import{A as vr,a as M,b as te,c as gn,d as Bm,e as b,f as eC,g as Nd,h as tC,i as nC,j as rC,k as $m,l as iC,m as rl,n as zm,o as Pd,p as sC,q as oC,r as qm,s as rt,t as Ds,u as yr,v as Od,w as il,x as aC,y as cC,z as Ci}from"./chunk-AGPXAQQT.js";function lC(n,e){return Object.is(n,e)}var Dt=null,Fd=!1,Vd=1,$r=Symbol("SIGNAL");function ke(n){let e=Dt;return Dt=n,e}function uC(){return Dt}var ol={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Wm(n){if(Fd)throw new Error("");if(Dt===null)return;Dt.consumerOnSignalRead(n);let e=Dt.nextProducerIndex++;if(Bd(Dt),e<Dt.producerNode.length&&Dt.producerNode[e]!==n&&sl(Dt)){let t=Dt.producerNode[e];Ud(t,Dt.producerIndexOfThis[e])}Dt.producerNode[e]!==n&&(Dt.producerNode[e]=n,Dt.producerIndexOfThis[e]=sl(Dt)?pC(n,Dt,e):0),Dt.producerLastReadVersion[e]=n.version}function xF(){Vd++}function dC(n){if(!(sl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Vd)){if(!n.producerMustRecompute(n)&&!Qm(n)){n.dirty=!1,n.lastCleanEpoch=Vd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Vd}}function hC(n){if(n.liveConsumerNode===void 0)return;let e=Fd;Fd=!0;try{for(let t of n.liveConsumerNode)t.dirty||MF(t)}finally{Fd=e}}function fC(){return Dt?.consumerAllowSignalWrites!==!1}function MF(n){n.dirty=!0,hC(n),n.consumerMarkedDirty?.(n)}function jd(n){return n&&(n.nextProducerIndex=0),ke(n)}function Km(n,e){if(ke(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(sl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ud(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Qm(n){Bd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(dC(t),r!==t.version))return!0}return!1}function Ym(n){if(Bd(n),sl(n))for(let e=0;e<n.producerNode.length;e++)Ud(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function pC(n,e,t){if(gC(n),n.liveConsumerNode.length===0&&mC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=pC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ud(n,e){if(gC(n),n.liveConsumerNode.length===1&&mC(n))for(let r=0;r<n.producerNode.length;r++)Ud(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Bd(i),i.producerIndexOfThis[r]=e}}function sl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Bd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function gC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function mC(n){return n.producerNode!==void 0}function yC(n){let e=Object.create(RF);e.computation=n;let t=()=>{if(dC(e),Wm(e),e.value===Ld)throw e.error;return e.value};return t[$r]=e,t}var Hm=Symbol("UNSET"),Gm=Symbol("COMPUTING"),Ld=Symbol("ERRORED"),RF=te(M({},ol),{value:Hm,dirty:!0,error:null,equal:lC,producerMustRecompute(n){return n.value===Hm||n.value===Gm},producerRecomputeValue(n){if(n.value===Gm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Gm;let t=jd(n),r;try{r=n.computation()}catch(i){r=Ld,n.error=i}finally{Km(n,t)}if(e!==Hm&&e!==Ld&&r!==Ld&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function kF(){throw new Error}var vC=kF;function wC(){vC()}function _C(n){vC=n}var NF=null;function EC(n){let e=Object.create(bC);e.value=n;let t=()=>(Wm(e),e.value);return t[$r]=e,t}function Zm(n,e){fC()||wC(),n.equal(n.value,e)||(n.value=e,PF(n))}function IC(n,e){fC()||wC(),Zm(n,e(n.value))}var bC=te(M({},ol),{equal:lC,value:void 0});function PF(n){n.version++,xF(),hC(n),NF?.()}function fe(n){return typeof n=="function"}function Mo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var $d=Mo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Cs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ct=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(fe(r))try{r()}catch(s){e=s instanceof $d?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{DC(s)}catch(o){e=e??[],o instanceof $d?e=[...e,...o.errors]:e.push(o)}}if(e)throw new $d(e)}}add(e){var t;if(e&&e!==this)if(this.closed)DC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Cs(t,e)}remove(e){let{_finalizers:t}=this;t&&Cs(t,e),e instanceof n&&e._removeParent(this)}};ct.EMPTY=(()=>{let n=new ct;return n.closed=!0,n})();var Jm=ct.EMPTY;function zd(n){return n instanceof ct||n&&"closed"in n&&fe(n.remove)&&fe(n.add)&&fe(n.unsubscribe)}function DC(n){fe(n)?n():n.unsubscribe()}var tr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ro={setTimeout(n,e,...t){let{delegate:r}=Ro;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ro;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function qd(n){Ro.setTimeout(()=>{let{onUnhandledError:e}=tr;if(e)e(n);else throw n})}function al(){}var CC=Xm("C",void 0,void 0);function TC(n){return Xm("E",void 0,n)}function SC(n){return Xm("N",n,void 0)}function Xm(n,e,t){return{kind:n,value:e,error:t}}var Ts=null;function ko(n){if(tr.useDeprecatedSynchronousErrorHandling){let e=!Ts;if(e&&(Ts={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ts;if(Ts=null,t)throw r}}else n()}function AC(n){tr.useDeprecatedSynchronousErrorHandling&&Ts&&(Ts.errorThrown=!0,Ts.error=n)}var Ss=class extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,zd(e)&&e.add(this)):this.destination=VF}static create(e,t,r){return new zr(e,t,r)}next(e){this.isStopped?ty(SC(e),this):this._next(e)}error(e){this.isStopped?ty(TC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ty(CC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OF=Function.prototype.bind;function ey(n,e){return OF.call(n,e)}var ny=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Hd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Hd(r)}else Hd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hd(t)}}},zr=class extends Ss{constructor(e,t,r){super();let i;if(fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&tr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ey(e.next,s),error:e.error&&ey(e.error,s),complete:e.complete&&ey(e.complete,s)}):i=e}this.destination=new ny(i)}};function Hd(n){tr.useDeprecatedSynchronousErrorHandling?AC(n):qd(n)}function FF(n){throw n}function ty(n,e){let{onStoppedNotification:t}=tr;t&&Ro.setTimeout(()=>t(n,e))}var VF={closed:!0,next:al,error:FF,complete:al};var No=typeof Symbol=="function"&&Symbol.observable||"@@observable";function sn(n){return n}function ry(...n){return iy(n)}function iy(n){return n.length===0?sn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=jF(t)?t:new zr(t,r,i);return ko(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=xC(r),new r((i,s)=>{let o=new zr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[No](){return this}pipe(...t){return iy(t)(this)}toPromise(t){return t=xC(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function xC(n){var e;return(e=n??tr.Promise)!==null&&e!==void 0?e:Promise}function LF(n){return n&&fe(n.next)&&fe(n.error)&&fe(n.complete)}function jF(n){return n&&n instanceof Ss||LF(n)&&zd(n)}function sy(n){return fe(n?.lift)}function we(n){return e=>{if(sy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new oy(n,e,t,r,i)}var oy=class extends Ss{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Po(){return we((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Oo=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,sy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return Po()(this)}};var MC=Mo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Gd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new MC}next(t){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ko(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Jm:(this.currentObservers=null,s.push(t),new ct(()=>{this.currentObservers=null,Cs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new Gd(e,t),n})(),Gd=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Jm}};var Ft=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cl={now(){return(cl.delegate||Date).now()},delegate:void 0};var Wd=class extends Ue{constructor(e=1/0,t=1/0,r=cl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Kd=class extends ct{constructor(e,t){super()}schedule(e,t=0){return this}};var ll={setInterval(n,e,...t){let{delegate:r}=ll;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ll;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Fo=class extends Kd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ll.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ll.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Cs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Vo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Vo.now=cl.now;var Lo=class extends Vo{constructor(e,t=Vo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var jo=new Lo(Fo),ay=jo;var Qd=class extends Fo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Yd=class extends Lo{};var cy=new Yd(Qd);var on=new ge(n=>n.complete());function Zd(n){return n&&fe(n.schedule)}function ly(n){return n[n.length-1]}function Jd(n){return fe(ly(n))?n.pop():void 0}function wr(n){return Zd(ly(n))?n.pop():void 0}function RC(n,e){return typeof ly(n)=="number"?n.pop():e}var Xd=n=>n&&typeof n.length=="number"&&typeof n!="function";function eh(n){return fe(n?.then)}function th(n){return fe(n[No])}function nh(n){return Symbol.asyncIterator&&fe(n?.[Symbol.asyncIterator])}function rh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function UF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ih=UF();function sh(n){return fe(n?.[ih])}function oh(n){return tC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Nd(t.read());if(i)return yield Nd(void 0);yield yield Nd(r)}}finally{t.releaseLock()}})}function ah(n){return fe(n?.getReader)}function Ze(n){if(n instanceof ge)return n;if(n!=null){if(th(n))return BF(n);if(Xd(n))return $F(n);if(eh(n))return zF(n);if(nh(n))return kC(n);if(sh(n))return qF(n);if(ah(n))return HF(n)}throw rh(n)}function BF(n){return new ge(e=>{let t=n[No]();if(fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function $F(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function zF(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,qd)})}function qF(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function kC(n){return new ge(e=>{GF(n,e).catch(t=>e.error(t))})}function HF(n){return kC(oh(n))}function GF(n,e){var t,r,i,s;return eC(this,void 0,void 0,function*(){try{for(t=nC(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function mn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Bn(n,e=0){return we((t,r)=>{t.subscribe(_e(r,i=>mn(r,n,()=>r.next(i),e),()=>mn(r,n,()=>r.complete(),e),i=>mn(r,n,()=>r.error(i),e)))})}function nr(n,e=0){return we((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function NC(n,e){return Ze(n).pipe(nr(e),Bn(e))}function PC(n,e){return Ze(n).pipe(nr(e),Bn(e))}function OC(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function FC(n,e){return new ge(t=>{let r;return mn(t,e,()=>{r=n[ih](),mn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}function ch(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{mn(t,e,()=>{let r=n[Symbol.asyncIterator]();mn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function VC(n,e){return ch(oh(n),e)}function LC(n,e){if(n!=null){if(th(n))return NC(n,e);if(Xd(n))return OC(n,e);if(eh(n))return PC(n,e);if(nh(n))return ch(n,e);if(sh(n))return FC(n,e);if(ah(n))return VC(n,e)}throw rh(n)}function Se(n,e){return e?LC(n,e):Ze(n)}function ae(...n){let e=wr(n);return Se(n,e)}function Uo(n,e){let t=fe(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function uy(n){return!!n&&(n instanceof ge||fe(n.lift)&&fe(n.subscribe))}var qr=Mo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function jC(n){return n instanceof Date&&!isNaN(n)}function oe(n,e){return we((t,r)=>{let i=0;t.subscribe(_e(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:WF}=Array;function KF(n,e){return WF(e)?n(...e):n(e)}function lh(n){return oe(e=>KF(n,e))}var{isArray:QF}=Array,{getPrototypeOf:YF,prototype:ZF,keys:JF}=Object;function uh(n){if(n.length===1){let e=n[0];if(QF(e))return{args:e,keys:null};if(XF(e)){let t=JF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function XF(n){return n&&typeof n=="object"&&YF(n)===ZF}function dh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ul(...n){let e=wr(n),t=Jd(n),{args:r,keys:i}=uh(n);if(r.length===0)return Se([],e);let s=new ge(eV(r,e,i?o=>dh(i,o):sn));return t?s.pipe(lh(t)):s}function eV(n,e,t=sn){return r=>{UC(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)UC(e,()=>{let u=Se(n[c],e),d=!1;u.subscribe(_e(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function UC(n,e,t){n?mn(t,n,e):e()}function BC(n,e,t,r,i,s,o,a){let c=[],u=0,d=0,f=!1,g=()=>{f&&!c.length&&!u&&e.complete()},m=D=>u<r?w(D):c.push(D),w=D=>{s&&e.next(D),u++;let C=!1;Ze(t(D,d++)).subscribe(_e(e,O=>{i?.(O),s?m(O):e.next(O)},()=>{C=!0},void 0,()=>{if(C)try{for(u--;c.length&&u<r;){let O=c.shift();o?mn(e,o,()=>w(O)):w(O)}g()}catch(O){e.error(O)}}))};return n.subscribe(_e(e,m,()=>{f=!0,g()})),()=>{a?.()}}function mt(n,e,t=1/0){return fe(e)?mt((r,i)=>oe((s,o)=>e(r,s,i,o))(Ze(n(r,i))),t):(typeof e=="number"&&(t=e),we((r,i)=>BC(r,i,n,t)))}function Ti(n=1/0){return mt(sn,n)}function $C(){return Ti(1)}function Bo(...n){return $C()(Se(n,wr(n)))}function hh(n){return new ge(e=>{Ze(n()).subscribe(e)})}function dy(...n){let e=Jd(n),{args:t,keys:r}=uh(n),i=new ge(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let d=0;d<o;d++){let f=!1;Ze(t[d]).subscribe(_e(s,g=>{f||(f=!0,u--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(u||s.next(r?dh(r,a):a),s.complete())}))}});return e?i.pipe(lh(e)):i}function hy(n=0,e,t=ay){let r=-1;return e!=null&&(Zd(e)?t=e:r=e),new ge(i=>{let s=jC(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function dl(...n){let e=wr(n),t=RC(n,1/0),r=n;return r.length?r.length===1?Ze(r[0]):Ti(t)(Se(r,e)):on}function Ct(n,e){return we((t,r)=>{let i=0;t.subscribe(_e(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Si(n){return we((e,t)=>{let r=null,i=!1,s;r=e.subscribe(_e(t,void 0,void 0,o=>{s=Ze(n(o,Si(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function zC(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(_e(o,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Hr(n,e){return fe(e)?mt(n,e,1):mt(n,1)}function Ai(n){return we((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gr(n){return n<=0?()=>on:we((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hl(n){return oe(()=>n)}function fl(n,e=sn){return n=n??tV,we((t,r)=>{let i,s=!0;t.subscribe(_e(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function tV(n,e){return n===e}function fh(n=nV){return we((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function nV(){return new qr}function As(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function xn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,s)=>n(i,s,r)):sn,Gr(1),t?Ai(e):fh(()=>new qr))}function $o(n){return n<=0?()=>on:we((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function fy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ct((i,s)=>n(i,s,r)):sn,$o(1),t?Ai(e):fh(()=>new qr))}function pl(){return we((n,e)=>{let t,r=!1;n.subscribe(_e(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function xs(n,e){return we(zC(n,e,arguments.length>=2,!0))}function qC(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=c=void 0,d=f=!1},w=()=>{let D=o;m(),D?.unsubscribe()};return we((D,C)=>{u++,!f&&!d&&g();let O=c=c??e();C.add(()=>{u--,u===0&&!f&&!d&&(a=py(w,i))}),O.subscribe(C),!o&&u>0&&(o=new zr({next:V=>O.next(V),error:V=>{f=!0,g(),a=py(m,t,V),O.error(V)},complete:()=>{d=!0,g(),a=py(m,r),O.complete()}}),Ze(D).subscribe(o))})(s)}}function py(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new zr({next:()=>{r.unsubscribe(),n()}});return Ze(e(...t)).subscribe(r)}function zo(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,qC({connector:()=>new Wd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Wr(...n){let e=wr(n);return we((t,r)=>{(e?Bo(n,t,e):Bo(n,t)).subscribe(r)})}function Ke(n,e){return we((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(_e(r,c=>{i?.unsubscribe();let u=0,d=s++;Ze(n(c,d)).subscribe(i=_e(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ph(n,e){return fe(e)?Ke(()=>n,e):Ke(()=>n)}function gl(n){return we((e,t)=>{Ze(n).subscribe(_e(t,()=>t.complete(),al)),!t.closed&&e.subscribe(t)})}function yt(n,e,t){let r=fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?we((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(_e(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):sn}var kT="https://g.co/ng/security#xss",ie=class extends Error{constructor(e,t){super(ef(e,t)),this.code=e}};function ef(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Sl(n){return{toString:n}.toString()}var gh="__parameters__";function rV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function NT(n,e,t){return Sl(()=>{let r=rV(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,d){let f=c.hasOwnProperty(gh)?c[gh]:Object.defineProperty(c,gh,{value:[]})[gh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Rn=globalThis;function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function iV(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function cn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(cn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Ay(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var sV=Ge({__forward_ref__:Ge});function ca(n){return n.__forward_ref__=ca,n.toString=function(){return cn(this())},n}function an(n){return PT(n)?n():n}function PT(n){return typeof n=="function"&&n.hasOwnProperty(sV)&&n.__forward_ref__===ca}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function tf(n){return HC(n,FT)||HC(n,VT)}function OT(n){return tf(n)!==null}function HC(n,e){return n.hasOwnProperty(e)?n[e]:null}function oV(n){let e=n&&(n[FT]||n[VT]);return e||null}function GC(n){return n&&(n.hasOwnProperty(WC)||n.hasOwnProperty(aV))?n[WC]:null}var FT=Ge({\u0275prov:Ge}),WC=Ge({\u0275inj:Ge}),VT=Ge({ngInjectableDef:Ge}),aV=Ge({ngInjectorDef:Ge}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function LT(n){return n&&!!n.\u0275providers}var cV=Ge({\u0275cmp:Ge}),lV=Ge({\u0275dir:Ge}),uV=Ge({\u0275pipe:Ge}),dV=Ge({\u0275mod:Ge}),Ah=Ge({\u0275fac:Ge}),yl=Ge({__NG_ELEMENT_ID__:Ge}),KC=Ge({__NG_ENV_ID__:Ge});function wl(n){return typeof n=="string"?n:n==null?"":String(n)}function hV(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():wl(n)}function fV(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ie(-200,n)}function Fv(n,e){throw new ie(-201,!1)}var Ie=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ie||{}),xy;function jT(){return xy}function yn(n){let e=xy;return xy=n,e}function UT(n,e,t){let r=tf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ie.Optional)return null;if(e!==void 0)return e;Fv(n,"Injector")}var pV={},_l=pV,My="__NG_DI_FLAG__",xh="ngTempTokenPath",gV="ngTokenPath",mV=/\n/gm,yV="\u0275",QC="__source",Ko;function vV(){return Ko}function xi(n){let e=Ko;return Ko=n,e}function wV(n,e=Ie.Default){if(Ko===void 0)throw new ie(-203,!1);return Ko===null?UT(n,void 0,e):Ko.get(n,e&Ie.Optional?null:void 0,e)}function B(n,e=Ie.Default){return(jT()||wV)(an(n),e)}function G(n,e=Ie.Default){return B(n,nf(e))}function nf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ry(n){let e=[];for(let t=0;t<n.length;t++){let r=an(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,s=Ie.Default;for(let o=0;o<r.length;o++){let a=r[o],c=_V(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(B(i,s))}else e.push(B(r))}return e}function BT(n,e){return n[My]=e,n.prototype[My]=e,n}function _V(n){return n[My]}function EV(n,e,t,r){let i=n[xh];throw e[QC]&&i.unshift(e[QC]),n.message=IV(`
`+n.message,i,t,r),n[gV]=i,n[xh]=null,n}function IV(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==yV?n.slice(2):n;let i=cn(e);if(Array.isArray(e))i=e.map(cn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):cn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(mV,`
  `)}`}var la=BT(NT("Optional"),8);var rf=BT(NT("SkipSelf"),4);function Ns(n,e){let t=n.hasOwnProperty(Ah);return t?n[Ah]:null}function bV(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function DV(n){return n.flat(Number.POSITIVE_INFINITY)}function Vv(n,e){n.forEach(t=>Array.isArray(t)?Vv(t,e):e(t))}function $T(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Mh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function CV(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function TV(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function sf(n,e,t){let r=Al(n,e);return r>=0?n[r|1]=t:(r=~r,TV(n,r,e,t)),r}function gy(n,e){let t=Al(n,e);if(t>=0)return n[t|1]}function Al(n,e){return SV(n,e,1)}function SV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Yo={},vn=[],Zo=new W(""),zT=new W("",-1),qT=new W(""),Rh=class{get(e,t=_l){if(t===_l){let r=new Error(`NullInjectorError: No provider for ${cn(e)}!`);throw r.name="NullInjectorError",r}return t}},HT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(HT||{}),Ir=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ir||{}),ki=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ki||{});function AV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function ky(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];MV(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function xV(n){return n===3||n===4||n===6}function MV(n){return n.charCodeAt(0)===64}function El(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?YC(n,t,i,null,e[++r]):YC(n,t,i,null,null))}}return n}function YC(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var GT="ng-template";function RV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&AV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Lv(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Lv(n){return n.type===4&&n.value!==GT}function kV(n,e,t){let r=n.type===4&&!t?GT:n.value;return e===r}function NV(n,e,t){let r=4,i=n.attrs,s=i!==null?FV(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!rr(r)&&!rr(c))return!1;if(o&&rr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!kV(n,c,t)||c===""&&e.length===1){if(rr(r))return!1;o=!0}}else if(r&8){if(i===null||!RV(n,i,c,t)){if(rr(r))return!1;o=!0}}else{let u=e[++a],d=PV(c,i,Lv(n),t);if(d===-1){if(rr(r))return!1;o=!0;continue}if(u!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(rr(r))return!1;o=!0}}}}return rr(r)||o}function rr(n){return(n&1)===0}function PV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return VV(e,n)}function WT(n,e,t=!1){for(let r=0;r<e.length;r++)if(NV(n,e[r],t))return!0;return!1}function OV(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function FV(n){for(let e=0;e<n.length;e++){let t=n[e];if(xV(t))return e}return n.length}function VV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function LV(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function ZC(n,e){return n?":not("+e.trim()+")":e}function jV(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!rr(o)&&(e+=ZC(s,i),i=""),r=o,s=s||!rr(r);t++}return i!==""&&(e+=ZC(s,i)),e}function UV(n){return n.map(jV).join(",")}function BV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!rr(i))break;i=s}r++}return{attrs:e,classes:t}}function Ae(n){return Sl(()=>{let e=JT(n),t=te(M({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===HT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ir.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});XT(t);let r=n.dependencies;return t.directiveDefs=kh(r,!1),t.pipeDefs=kh(r,!0),t.id=qV(t),t})}function $V(n){return Ni(n)||KT(n)}function zV(n){return n!==null}function At(n){return Sl(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function JC(n,e){if(n==null)return Yo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=ki.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==ki.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Kt(n){return Sl(()=>{let e=JT(n);return XT(e),e})}function zs(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ni(n){return n[cV]||null}function KT(n){return n[lV]||null}function QT(n){return n[uV]||null}function YT(n){let e=Ni(n)||KT(n)||QT(n);return e!==null?e.standalone:!1}function ZT(n,e){let t=n[dV]||null;if(!t&&e===!0)throw new Error(`Type ${cn(n)} does not have '\u0275mod' property.`);return t}function JT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Yo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:JC(n.inputs,e),outputs:JC(n.outputs),debugInfo:null}}function XT(n){n.features?.forEach(e=>e(n))}function kh(n,e){if(!n)return null;let t=e?QT:$V;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(zV)}function qV(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function of(n){return{\u0275providers:n}}function HV(...n){return{\u0275providers:eS(!0,n),\u0275fromNgModule:!0}}function eS(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Vv(e,o=>{let a=o;Ny(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tS(i,s),t}function tS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];jv(i,s=>{e(s,r)})}}function Ny(n,e,t,r){if(n=an(n),!n)return!1;let i=null,s=GC(n),o=!s&&Ni(n);if(!s&&!o){let c=n.ngModule;if(s=GC(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Ny(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Vv(s.imports,d=>{Ny(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&tS(u,e)}if(!a){let u=Ns(i)||(()=>new i);e({provide:i,useFactory:u,deps:vn},i),e({provide:qT,useValue:i,multi:!0},i),e({provide:Zo,useValue:()=>B(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;jv(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function jv(n,e){for(let t of n)LT(t)&&(t=t.\u0275providers),Array.isArray(t)?jv(t,e):e(t)}var GV=Ge({provide:String,useValue:Ge});function nS(n){return n!==null&&typeof n=="object"&&GV in n}function WV(n){return!!(n&&n.useExisting)}function KV(n){return!!(n&&n.useFactory)}function Jo(n){return typeof n=="function"}function QV(n){return!!n.useClass}var af=new W(""),bh={},YV={},my;function Uv(){return my===void 0&&(my=new Rh),my}var ln=class{},Il=class extends ln{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Oy(e,o=>this.processProvider(o)),this.records.set(zT,qo(void 0,this)),i.has("environment")&&this.records.set(ln,qo(void 0,this));let s=this.records.get(af);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(qT,vn,Ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ke(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ke(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=xi(this),r=yn(void 0),i;try{return e()}finally{xi(t),yn(r)}}get(e,t=_l,r=Ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(KC))return e[KC](this);r=nf(r);let i,s=xi(this),o=yn(void 0);try{if(!(r&Ie.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=tL(e)&&tf(e);u&&this.injectableDefInScope(u)?c=qo(Py(e),bh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ie.Self?Uv():this.parent;return t=r&Ie.Optional&&t===_l?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[xh]=a[xh]||[]).unshift(cn(e)),s)throw a;return EV(a,e,"R3InjectorError",this.source)}else throw a}finally{yn(o),xi(s)}}resolveInjectorInitializers(){let e=ke(null),t=xi(this),r=yn(void 0),i;try{let s=this.get(Zo,vn,Ie.Self);for(let o of s)o()}finally{xi(t),yn(r),ke(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(cn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(e){e=an(e);let t=Jo(e)?e:an(e&&e.provide),r=JV(e);if(!Jo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=qo(void 0,bh,!0),i.factory=()=>Ry(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=ke(null);try{return t.value===bh&&(t.value=YV,t.value=t.factory()),typeof t.value=="object"&&t.value&&eL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{ke(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=an(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Py(n){let e=tf(n),t=e!==null?e.factory:Ns(n);if(t!==null)return t;if(n instanceof W)throw new ie(204,!1);if(n instanceof Function)return ZV(n);throw new ie(204,!1)}function ZV(n){if(n.length>0)throw new ie(204,!1);let t=oV(n);return t!==null?()=>t.factory(n):()=>new n}function JV(n){if(nS(n))return qo(void 0,n.useValue);{let e=rS(n);return qo(e,bh)}}function rS(n,e,t){let r;if(Jo(n)){let i=an(n);return Ns(i)||Py(i)}else if(nS(n))r=()=>an(n.useValue);else if(KV(n))r=()=>n.useFactory(...Ry(n.deps||[]));else if(WV(n))r=()=>B(an(n.useExisting));else{let i=an(n&&(n.useClass||n.provide));if(XV(n))r=()=>new i(...Ry(n.deps));else return Ns(i)||Py(i)}return r}function qo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function XV(n){return!!n.deps}function eL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function tL(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function Oy(n,e){for(let t of n)Array.isArray(t)?Oy(t,e):t&&LT(t)?Oy(t.\u0275providers,e):e(t)}function qn(n,e){n instanceof Il&&n.assertNotDestroyed();let t,r=xi(n),i=yn(void 0);try{return e()}finally{xi(r),yn(i)}}function iS(){return jT()!==void 0||vV()!=null}function nL(n){if(!iS())throw new ie(-203,!1)}function rL(n){let e=Rn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function iL(n){return typeof n=="function"}var Jr=0,ye=1,de=2,Wt=3,ir=4,wn=5,bl=6,Nh=7,sr=8,Xo=9,br=10,lt=11,Dl=12,XC=13,ua=14,zn=15,Ps=16,Ho=17,Kr=18,cf=19,sS=20,Mi=21,yy=22,$n=23,un=25,oS=1;var Os=7,Ph=8,ea=9,Mn=10,Oh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Oh||{});function Ri(n){return Array.isArray(n)&&typeof n[oS]=="object"}function Xr(n){return Array.isArray(n)&&n[oS]===!0}function Bv(n){return(n.flags&4)!==0}function lf(n){return n.componentOffset>-1}function uf(n){return(n.flags&1)===1}function Pi(n){return!!n.template}function Fy(n){return(n[de]&512)!==0}var Vy=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function aS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Vi(){return cS}function cS(n){return n.type.prototype.ngOnChanges&&(n.setInput=oL),sL}Vi.ngInherit=!0;function sL(){let n=uS(this),e=n?.current;if(e){let t=n.previous;if(t===Yo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function oL(n,e,t,r,i){let s=this.declaredInputs[r],o=uS(n)||aL(n,{previous:Yo,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Vy(u&&u.currentValue,t,c===Yo),aS(n,e,i,t)}var lS="__ngSimpleChanges__";function uS(n){return n[lS]||null}function aL(n,e){return n[lS]=e}var eT=null;var _r=function(n,e,t){eT?.(n,e,t)},cL="svg",lL="math";function Dr(n){for(;Array.isArray(n);)n=n[Jr];return n}function dS(n,e){return Dr(e[n])}function or(n,e){return Dr(e[n.index])}function hS(n,e){return n.data[e]}function $v(n,e){return n[e]}function Li(n,e){let t=e[n];return Ri(t)?t:t[Jr]}function uL(n){return(n[de]&4)===4}function zv(n){return(n[de]&128)===128}function dL(n){return Xr(n[Wt])}function ta(n,e){return e==null?null:n[e]}function fS(n){n[Ho]=0}function pS(n){n[de]&1024||(n[de]|=1024,zv(n)&&hf(n))}function hL(n,e){for(;n>0;)e=e[ua],n--;return e}function df(n){return!!(n[de]&9216||n[$n]?.dirty)}function Ly(n){n[br].changeDetectionScheduler?.notify(8),n[de]&64&&(n[de]|=1024),df(n)&&hf(n)}function hf(n){n[br].changeDetectionScheduler?.notify(0);let e=Fs(n);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!zv(e)));)e=Fs(e)}function gS(n,e){if((n[de]&256)===256)throw new ie(911,!1);n[Mi]===null&&(n[Mi]=[]),n[Mi].push(e)}function fL(n,e){if(n[Mi]===null)return;let t=n[Mi].indexOf(e);t!==-1&&n[Mi].splice(t,1)}function Fs(n){let e=n[Wt];return Xr(e)?e[Wt]:e}var Ee={lFrame:DS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var mS=!1;function pL(){return Ee.lFrame.elementDepthCount}function gL(){Ee.lFrame.elementDepthCount++}function mL(){Ee.lFrame.elementDepthCount--}function yS(){return Ee.bindingsEnabled}function vS(){return Ee.skipHydrationRootTNode!==null}function yL(n){return Ee.skipHydrationRootTNode===n}function vL(){Ee.skipHydrationRootTNode=null}function be(){return Ee.lFrame.lView}function vt(){return Ee.lFrame.tView}function Xe(n){return Ee.lFrame.contextLView=n,n[sr]}function et(n){return Ee.lFrame.contextLView=null,n}function dn(){let n=wS();for(;n!==null&&n.type===64;)n=n.parent;return n}function wS(){return Ee.lFrame.currentTNode}function wL(){let n=Ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function qs(n,e){let t=Ee.lFrame;t.currentTNode=n,t.isParent=e}function qv(){return Ee.lFrame.isParent}function Hv(){Ee.lFrame.isParent=!1}function _L(){return Ee.lFrame.contextLView}function _S(){return mS}function tT(n){mS=n}function ff(){let n=Ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function EL(){return Ee.lFrame.bindingIndex}function IL(n){return Ee.lFrame.bindingIndex=n}function Gv(){return Ee.lFrame.bindingIndex++}function Wv(n){let e=Ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function bL(){return Ee.lFrame.inI18n}function DL(n,e){let t=Ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,jy(e)}function CL(){return Ee.lFrame.currentDirectiveIndex}function jy(n){Ee.lFrame.currentDirectiveIndex=n}function TL(n){let e=Ee.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function ES(){return Ee.lFrame.currentQueryIndex}function Kv(n){Ee.lFrame.currentQueryIndex=n}function SL(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[wn]:null}function IS(n,e,t){if(t&Ie.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Ie.Host);)if(i=SL(s),i===null||(s=s[ua],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ee.lFrame=bS();return r.currentTNode=e,r.lView=n,!0}function Qv(n){let e=bS(),t=n[ye];Ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function bS(){let n=Ee.lFrame,e=n===null?null:n.child;return e===null?DS(n):e}function DS(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function CS(){let n=Ee.lFrame;return Ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var TS=CS;function Yv(){let n=CS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function AL(n){return(Ee.lFrame.contextLView=hL(n,Ee.lFrame.contextLView))[sr]}function ji(){return Ee.lFrame.selectedIndex}function Vs(n){Ee.lFrame.selectedIndex=n}function Zv(){let n=Ee.lFrame;return hS(n.tView,n.selectedIndex)}function xL(){return Ee.lFrame.currentNamespace}var SS=!0;function pf(){return SS}function gf(n){SS=n}function ML(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=cS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function mf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Dh(n,e,t){AS(n,e,3,t)}function Ch(n,e,t,r){(n[de]&3)===t&&AS(n,e,t,r)}function vy(n,e){let t=n[de];(t&3)===e&&(t&=16383,t+=1,n[de]=t)}function AS(n,e,t,r){let i=r!==void 0?n[Ho]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ho]+=65536),(a<s||s==-1)&&(RL(n,t,e,c),n[Ho]=(n[Ho]&4294901760)+c+2),c++}function nT(n,e){_r(4,n,e);let t=ke(null);try{e.call(n)}finally{ke(t),_r(5,n,e)}}function RL(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[de]>>14<n[Ho]>>16&&(n[de]&3)===e&&(n[de]+=16384,nT(a,s)):nT(a,s)}var Qo=-1,Ls=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function kL(n){return n instanceof Ls}function NL(n){return(n.flags&8)!==0}function PL(n){return(n.flags&16)!==0}var wy={},Uy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=nf(r);let i=this.injector.get(e,wy,r);return i!==wy||t===wy?i:this.parentInjector.get(e,t,r)}};function xS(n){return n!==Qo}function Fh(n){return n&32767}function OL(n){return n>>16}function Vh(n,e){let t=OL(n),r=e;for(;t>0;)r=r[ua],t--;return r}var By=!0;function Lh(n){let e=By;return By=n,e}var FL=256,MS=FL-1,RS=5,VL=0,Er={};function LL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(yl)&&(r=t[yl]),r==null&&(r=t[yl]=VL++);let i=r&MS,s=1<<i;e.data[n+(i>>RS)]|=s}function jh(n,e){let t=kS(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,_y(r.data,n),_y(e,null),_y(r.blueprint,null));let i=Jv(n,e),s=n.injectorIndex;if(xS(i)){let o=Fh(i),a=Vh(i,e),c=a[ye].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function _y(n,e){n.push(0,0,0,0,0,0,0,0,e)}function kS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Jv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=VS(i),r===null)return Qo;if(t++,i=i[ua],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Qo}function $y(n,e,t){LL(n,e,t)}function NS(n,e,t){if(t&Ie.Optional||n!==void 0)return n;Fv(e,"NodeInjector")}function PS(n,e,t,r){if(t&Ie.Optional&&r===void 0&&(r=null),!(t&(Ie.Self|Ie.Host))){let i=n[Xo],s=yn(void 0);try{return i?i.get(e,r,t&Ie.Optional):UT(e,r,t&Ie.Optional)}finally{yn(s)}}return NS(r,e,t)}function OS(n,e,t,r=Ie.Default,i){if(n!==null){if(e[de]&2048&&!(r&Ie.Self)){let o=$L(n,e,t,r,Er);if(o!==Er)return o}let s=FS(n,e,t,r,Er);if(s!==Er)return s}return PS(e,t,r,i)}function FS(n,e,t,r,i){let s=UL(t);if(typeof s=="function"){if(!IS(e,n,r))return r&Ie.Host?NS(i,t,r):PS(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Ie.Optional))Fv(t);else return o}finally{TS()}}else if(typeof s=="number"){let o=null,a=kS(n,e),c=Qo,u=r&Ie.Host?e[zn][wn]:null;for((a===-1||r&Ie.SkipSelf)&&(c=a===-1?Jv(n,e):e[a+8],c===Qo||!iT(r,!1)?a=-1:(o=e[ye],a=Fh(c),e=Vh(c,e)));a!==-1;){let d=e[ye];if(rT(s,a,d.data)){let f=jL(a,e,t,o,r,u);if(f!==Er)return f}c=e[a+8],c!==Qo&&iT(r,e[ye].data[a+8]===u)&&rT(s,a,e)?(o=d,a=Fh(c),e=Vh(c,e)):a=-1}}return i}function jL(n,e,t,r,i,s){let o=e[ye],a=o.data[n+8],c=r==null?lf(a)&&By:r!=o&&(a.type&3)!==0,u=i&Ie.Host&&s===a,d=Th(a,o,t,c,u);return d!==null?js(e,o,d,a):Er}function Th(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:u;for(let m=f;m<g;m++){let w=o[m];if(m<c&&t===w||m>=c&&w.type===t)return m}if(i){let m=o[c];if(m&&Pi(m)&&m.type===t)return c}return null}function js(n,e,t,r){let i=n[t],s=e.data;if(kL(i)){let o=i;o.resolving&&fV(hV(s[t]));let a=Lh(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?yn(o.injectImpl):null,d=IS(n,r,Ie.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&ML(t,s[t],e)}finally{u!==null&&yn(u),Lh(a),o.resolving=!1,TS()}}return i}function UL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(yl)?n[yl]:void 0;return typeof e=="number"?e>=0?e&MS:BL:e}function rT(n,e,t){let r=1<<n;return!!(t[e+(n>>RS)]&r)}function iT(n,e){return!(n&Ie.Self)&&!(n&Ie.Host&&e)}var ks=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return OS(this._tNode,this._lView,e,nf(r),t)}};function BL(){return new ks(dn(),be())}function xl(n){return Sl(()=>{let e=n.prototype.constructor,t=e[Ah]||zy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Ah]||zy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function zy(n){return PT(n)?()=>{let e=zy(an(n));return e&&e()}:Ns(n)}function $L(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[de]&2048&&!(o[de]&512);){let a=FS(s,o,t,r|Ie.Self,Er);if(a!==Er)return a;let c=s.parent;if(!c){let u=o[sS];if(u){let d=u.get(t,Er,r);if(d!==Er)return d}c=VS(o),o=o[ua]}s=c}return i}function VS(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[wn]:null}function sT(n,e=null,t=null,r){let i=LS(n,e,t,r);return i.resolveInjectorInitializers(),i}function LS(n,e=null,t=null,r,i=new Set){let s=[t||vn,HV(n)];return r=r||(typeof n=="object"?void 0:cn(n)),new Il(s,e||Uv(),r||null,i)}var Ms=class Ms{static create(e,t){if(Array.isArray(e))return sT({name:""},t,e,"");{let r=e.name??"";return sT({name:r},e.parent,e.providers,r)}}};Ms.THROW_IF_NOT_FOUND=_l,Ms.NULL=new Rh,Ms.\u0275prov=K({token:Ms,providedIn:"any",factory:()=>B(zT)}),Ms.__NG_ELEMENT_ID__=-1;var kn=Ms;var zL=new W("");zL.__NG_ELEMENT_ID__=n=>{let e=dn();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(n&Ie.Optional)return null;throw new ie(204,!1)};var qL="ngOriginalError";function Ey(n){return n[qL]}var jS=!0,Xv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HL,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),qy=class extends Xv{constructor(e){super(),this._lView=e}onDestroy(e){return gS(this._lView,e),()=>fL(this._lView,e)}};function HL(){return new qy(be())}var Ui=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ft(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var Hy=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,iS()&&(this.destroyRef=G(Xv,{optional:!0})??void 0,this.pendingTasks=G(Ui,{optional:!0})??void 0)}emit(e){let t=ke(null);try{super.next(e)}finally{ke(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ct&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Je=Hy;function Uh(...n){}function US(n){let e,t;function r(){n=Uh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function oT(n){return queueMicrotask(()=>n()),()=>{n=Uh}}var ew="isAngularZone",Bh=ew+"_ID",GL=0,De=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Je(!1),this.onMicrotaskEmpty=new Je(!1),this.onStable=new Je(!1),this.onError=new Je(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=jS}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,QL(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ew)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,WL,Uh,Uh);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},WL={};function tw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function KL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){US(()=>{n.callbackScheduled=!1,Gy(n),n.isCheckStableRunning=!0,tw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Gy(n)}function QL(n){let e=()=>{KL(n)},t=GL++;n._inner=n._inner.fork({name:"angular",properties:{[ew]:!0,[Bh]:t,[Bh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(YL(c))return r.invokeTask(s,o,a,c);try{return aT(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),cT(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return aT(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!ZL(c)&&e(),cT(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Gy(n),tw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Gy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function aT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function cT(n){n._nesting--,tw(n)}var $h=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Je,this.onMicrotaskEmpty=new Je,this.onStable=new Je,this.onError=new Je}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function YL(n){return BS(n,"__ignore_ng_zone__")}function ZL(n){return BS(n,"__scheduler_tick__")}function BS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function JL(n="zone.js",e){return n==="noop"?new $h:n==="zone.js"?new De(e):n}var Qr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ey(e);for(;t&&Ey(t);)t=Ey(t);return t||null}},XL=new W("",{providedIn:"root",factory:()=>{let n=G(De),e=G(Qr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function e2(){return da(dn(),be())}function da(n,e){return new kt(or(n,e))}var kt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=e2;let n=e;return n})();function t2(n){return n instanceof kt?n.nativeElement:n}function n2(){return this._results[Symbol.iterator]()}var Wy=class n{get changes(){return this._changes??=new Je}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=n2)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=DV(e);(this._changesDetected=!bV(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function $S(n){return(n.flags&128)===128}var zS=new Map,r2=0;function i2(){return r2++}function s2(n){zS.set(n[cf],n)}function Ky(n){zS.delete(n[cf])}var lT="__ngContext__";function Oi(n,e){Ri(e)?(n[lT]=e[cf],s2(e)):n[lT]=e}function qS(n){return GS(n[Dl])}function HS(n){return GS(n[ir])}function GS(n){for(;n!==null&&!Xr(n);)n=n[ir];return n}var Qy;function WS(n){Qy=n}function o2(){if(Qy!==void 0)return Qy;if(typeof document<"u")return document;throw new ie(210,!1)}var yf=new W("",{providedIn:"root",factory:()=>a2}),a2="ng",nw=new W(""),Vt=new W("",{providedIn:"platform",factory:()=>"unknown"});var rw=new W("",{providedIn:"root",factory:()=>o2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var c2="h",l2="b";var u2=()=>null;function iw(n,e,t=!1){return u2(n,e,t)}var KS=!1,d2=new W("",{providedIn:"root",factory:()=>KS});var mh;function h2(){if(mh===void 0&&(mh=null,Rn.trustedTypes))try{mh=Rn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return mh}function vf(n){return h2()?.createHTML(n)||n}var yh;function f2(){if(yh===void 0&&(yh=null,Rn.trustedTypes))try{yh=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return yh}function uT(n){return f2()?.createScriptURL(n)||n}var Yr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kT})`}},Yy=class extends Yr{getTypeName(){return"HTML"}},Zy=class extends Yr{getTypeName(){return"Style"}},Jy=class extends Yr{getTypeName(){return"Script"}},Xy=class extends Yr{getTypeName(){return"URL"}},ev=class extends Yr{getTypeName(){return"ResourceURL"}};function Hn(n){return n instanceof Yr?n.changingThisBreaksApplicationSecurity:n}function Bi(n,e){let t=p2(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${kT})`)}return t===e}function p2(n){return n instanceof Yr&&n.getTypeName()||null}function QS(n){return new Yy(n)}function YS(n){return new Zy(n)}function ZS(n){return new Jy(n)}function JS(n){return new Xy(n)}function XS(n){return new ev(n)}function g2(n){let e=new nv(n);return m2()?new tv(e):e}var tv=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(vf(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},nv=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=vf(e),t}};function m2(){try{return!!new window.DOMParser().parseFromString(vf(""),"text/html")}catch{return!1}}var y2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function wf(n){return n=String(n),n.match(y2)?n:"unsafe:"+n}function ei(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Ml(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var eA=ei("area,br,col,hr,img,wbr"),tA=ei("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nA=ei("rp,rt"),v2=Ml(nA,tA),w2=Ml(tA,ei("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),_2=Ml(nA,ei("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dT=Ml(eA,w2,_2,v2),rA=ei("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),E2=ei("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),I2=ei("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),b2=Ml(rA,E2,I2),D2=ei("script,style,template"),rv=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=S2(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=T2(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=hT(e).toLowerCase();if(!dT.hasOwnProperty(t))return this.sanitizedSomething=!0,!D2.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!b2.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;rA[a]&&(c=wf(c)),this.buf.push(" ",o,'="',fT(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=hT(e).toLowerCase();dT.hasOwnProperty(t)&&!eA.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(fT(e))}};function C2(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function T2(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw iA(e);return e}function S2(n){let e=n.firstChild;if(e&&C2(n,e))throw iA(e);return e}function hT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function iA(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var A2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,x2=/([^\#-~ |!])/g;function fT(n){return n.replace(/&/g,"&amp;").replace(A2,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(x2,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var vh;function sA(n,e){let t=null;try{vh=vh||g2(n);let r=e?String(e):"";t=vh.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=vh.getInertBodyElement(r)}while(r!==s);let a=new rv().sanitizeChildren(pT(t)||t);return vf(a)}finally{if(t){let r=pT(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function pT(n){return"content"in n&&M2(n)?n.content:null}function M2(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var _n=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(_n||{});function dt(n){let e=oA();return e?e.sanitize(_n.URL,n)||"":Bi(n,"URL")?Hn(n):wf(wl(n))}function _f(n){let e=oA();if(e)return uT(e.sanitize(_n.RESOURCE_URL,n)||"");if(Bi(n,"ResourceURL"))return uT(Hn(n));throw new ie(904,!1)}function oA(){let n=be();return n&&n[br].sanitizer}var R2=/^>|^->|<!--|-->|--!>|<!-$/g,k2=/(<|>)/g,N2="\u200B$1\u200B";function P2(n){return n.replace(R2,e=>e.replace(k2,N2))}function aA(n){return n instanceof Function?n():n}function O2(n){return(n??G(kn)).get(Vt)==="browser"}var Cr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Cr||{}),F2;function sw(n,e){return F2(n,e)}function Go(n,e,t,r,i){if(r!=null){let s,o=!1;Xr(r)?s=r:Ri(r)&&(o=!0,r=r[Jr]);let a=Dr(r);n===0&&t!==null?i==null?fA(e,t,a):zh(e,t,a,i||null,!0):n===1&&t!==null?zh(e,t,a,i||null,!0):n===2?Y2(e,a,o):n===3&&e.destroyNode(a),s!=null&&J2(e,n,s,t,i)}}function V2(n,e){return n.createText(e)}function L2(n,e,t){n.setValue(e,t)}function j2(n,e){return n.createComment(P2(e))}function cA(n,e,t){return n.createElement(e,t)}function U2(n,e){lA(n,e),e[Jr]=null,e[wn]=null}function B2(n,e,t,r,i,s){r[Jr]=i,r[wn]=e,If(n,r,t,1,i,s)}function lA(n,e){e[br].changeDetectionScheduler?.notify(9),If(n,e,e[lt],2,null,null)}function $2(n){let e=n[Dl];if(!e)return Iy(n[ye],n);for(;e;){let t=null;if(Ri(e))t=e[Dl];else{let r=e[Mn];r&&(t=r)}if(!t){for(;e&&!e[ir]&&e!==n;)Ri(e)&&Iy(e[ye],e),e=e[Wt];e===null&&(e=n),Ri(e)&&Iy(e[ye],e),t=e&&e[ir]}e=t}}function z2(n,e,t,r){let i=Mn+r,s=t.length;r>0&&(t[i-1][ir]=e),r<s-Mn?(e[ir]=t[i],$T(t,Mn+r,e)):(t.push(e),e[ir]=null),e[Wt]=t;let o=e[Ps];o!==null&&t!==o&&uA(o,e);let a=e[Kr];a!==null&&a.insertView(n),Ly(e),e[de]|=128}function uA(n,e){let t=n[ea],r=e[Wt];if(Ri(r))n[de]|=Oh.HasTransplantedViews;else{let i=r[Wt][zn];e[zn]!==i&&(n[de]|=Oh.HasTransplantedViews)}t===null?n[ea]=[e]:t.push(e)}function ow(n,e){let t=n[ea],r=t.indexOf(e);t.splice(r,1)}function iv(n,e){if(n.length<=Mn)return;let t=Mn+e,r=n[t];if(r){let i=r[Ps];i!==null&&i!==n&&ow(i,r),e>0&&(n[t-1][ir]=r[ir]);let s=Mh(n,Mn+e);U2(r[ye],r);let o=s[Kr];o!==null&&o.detachView(s[ye]),r[Wt]=null,r[ir]=null,r[de]&=-129}return r}function dA(n,e){if(!(e[de]&256)){let t=e[lt];t.destroyNode&&If(n,e,t,3,null,null),$2(e)}}function Iy(n,e){if(e[de]&256)return;let t=ke(null);try{e[de]&=-129,e[de]|=256,e[$n]&&Ym(e[$n]),H2(n,e),q2(n,e),e[ye].type===1&&e[lt].destroy();let r=e[Ps];if(r!==null&&Xr(e[Wt])){r!==e[Wt]&&ow(r,e);let i=e[Kr];i!==null&&i.detachView(n)}Ky(e)}finally{ke(t)}}function q2(n,e){let t=n.cleanup,r=e[Nh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Nh]=null);let i=e[Mi];if(i!==null){e[Mi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function H2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ls)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];_r(4,a,c);try{c.call(a)}finally{_r(5,a,c)}}else{_r(4,i,s);try{s.call(i)}finally{_r(5,i,s)}}}}}function hA(n,e,t){return G2(n,e.parent,t)}function G2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Jr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ir.None||s===Ir.Emulated)return null}return or(r,t)}}function zh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function fA(n,e,t){n.appendChild(e,t)}function gT(n,e,t,r,i){r!==null?zh(n,e,t,r,i):fA(n,e,t)}function pA(n,e){return n.parentNode(e)}function W2(n,e){return n.nextSibling(e)}function gA(n,e,t){return Q2(n,e,t)}function K2(n,e,t){return n.type&40?or(n,t):null}var Q2=K2,mT;function Ef(n,e,t,r){let i=hA(n,r,e),s=e[lt],o=r.parent||e[wn],a=gA(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)gT(s,i,t[c],a,!1);else gT(s,i,t,a,!1);mT!==void 0&&mT(s,r,e,t,i)}function ml(n,e){if(e!==null){let t=e.type;if(t&3)return or(e,n);if(t&4)return sv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ml(n,r);{let i=n[e.index];return Xr(i)?sv(-1,i):Dr(i)}}else{if(t&128)return ml(n,e.next);if(t&32)return sw(e,n)()||Dr(n[e.index]);{let r=mA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Fs(n[zn]);return ml(i,r)}else return ml(n,e.next)}}}return null}function mA(n,e){if(e!==null){let r=n[zn][wn],i=e.projection;return r.projection[i]}return null}function sv(n,e){let t=Mn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return ml(r,i)}return e[Os]}function Y2(n,e,t){n.removeChild(null,e,t)}function aw(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Oi(Dr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)aw(n,e,t.child,r,i,s,!1),Go(e,n,i,a,s);else if(c&32){let u=sw(t,r),d;for(;d=u();)Go(e,n,i,d,s);Go(e,n,i,a,s)}else c&16?yA(n,e,r,t,i,s):Go(e,n,i,a,s);t=o?t.projectionNext:t.next}}function If(n,e,t,r,i,s){aw(t,r,n.firstChild,e,i,s,!1)}function Z2(n,e,t){let r=e[lt],i=hA(n,t,e),s=t.parent||e[wn],o=gA(s,t,e);yA(r,0,e,t,i,o)}function yA(n,e,t,r,i,s){let o=t[zn],c=o[wn].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Go(e,n,i,d,s)}else{let u=c,d=o[Wt];$S(r)&&(u.flags|=128),aw(n,e,u,d,i,s,!0)}}function J2(n,e,t,r,i){let s=t[Os],o=Dr(t);s!==o&&Go(e,n,r,s,i);for(let a=Mn;a<t.length;a++){let c=t[a];If(c[ye],c,n,e,r,s)}}function X2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Cr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Cr.Important),n.setStyle(t,r,i,s))}}function ej(n,e,t){n.setAttribute(e,"style",t)}function vA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function wA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&ky(n,e,r),i!==null&&vA(n,e,i),s!==null&&ej(n,e,s)}var Gn={};function j(n=1){_A(vt(),be(),ji()+n,!1)}function _A(n,e,t,r){if(!r)if((e[de]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Dh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Ch(e,s,0,t)}Vs(t)}function q(n,e=Ie.Default){let t=be();if(t===null)return B(n,e);let r=dn();return OS(r,t,an(n),e)}function EA(){let n="invalid";throw new Error(n)}function IA(n,e,t,r,i,s){let o=ke(null);try{let a=null;i&ki.SignalBased&&(a=e[r][$r]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ki.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):aS(e,a,r,s)}finally{ke(o)}}function tj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Vs(~i);else{let s=i,o=t[++r],a=t[++r];DL(o,s);let c=e[s];a(2,c)}}}finally{Vs(-1)}}function bf(n,e,t,r,i,s,o,a,c,u,d){let f=e.blueprint.slice();return f[Jr]=i,f[de]=r|4|128|8|64,(u!==null||n&&n[de]&2048)&&(f[de]|=2048),fS(f),f[Wt]=f[ua]=n,f[sr]=t,f[br]=o||n&&n[br],f[lt]=a||n&&n[lt],f[Xo]=c||n&&n[Xo]||null,f[wn]=s,f[cf]=i2(),f[bl]=d,f[sS]=u,f[zn]=e.type==2?n[zn]:f,f}function ha(n,e,t,r,i){let s=n.data[e];if(s===null)s=nj(n,e,t,r,i),bL()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=wL();s.injectorIndex=o===null?-1:o.injectorIndex}return qs(s,!0),s}function nj(n,e,t,r,i){let s=wS(),o=qv(),a=o?s:s&&s.parent,c=n.data[e]=cj(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function bA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function DA(n,e,t,r,i){let s=ji(),o=r&2;try{Vs(-1),o&&e.length>un&&_A(n,e,un,!1),_r(o?2:0,i),t(r,i)}finally{Vs(s),_r(o?3:1,i)}}function cw(n,e,t){if(Bv(e)){let r=ke(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{ke(r)}}}function lw(n,e,t){yS()&&(pj(n,e,t,or(t,e)),(t.flags&64)===64&&SA(n,e,t))}function uw(n,e,t=or){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function CA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=dw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function dw(n,e,t,r,i,s,o,a,c,u,d){let f=un+r,g=f+i,m=rj(f,g),w=typeof u=="function"?u():u;return m[ye]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function rj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Gn);return t}function ij(n,e,t,r){let s=r.get(d2,KS)||t===Ir.ShadowDom,o=n.selectRootElement(e,s);return sj(o),o}function sj(n){oj(n)}var oj=()=>null;function aj(n,e,t,r){let i=MA(e);i.push(t),n.firstCreatePass&&RA(n).push(r,i.length-1)}function cj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return vS()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=ki.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}n===0?vT(r,t,u,a,c):vT(r,t,u,a)}return r}function vT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function lj(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,m=g?g.inputs:null,w=g?g.outputs:null;c=yT(0,f.inputs,d,c,m),u=yT(1,f.outputs,d,u,w);let D=c!==null&&o!==null&&!Lv(e)?bj(c,d,o):null;a.push(D)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function uj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function hw(n,e,t,r,i,s,o,a){let c=or(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(pw(n,t,d,r,i),lf(e)&&dj(t,e.index)):e.type&3?(r=uj(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function dj(n,e){let t=Li(e,n);t[de]&16||(t[de]|=64)}function fw(n,e,t,r){if(yS()){let i=r===null?null:{"":-1},s=mj(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&TA(n,e,t,o,i,a),i&&yj(t,r,i)}t.mergedAttrs=El(t.mergedAttrs,t.attrs)}function TA(n,e,t,r,i,s){for(let u=0;u<r.length;u++)$y(jh(t,e),n,r[u].type);wj(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=bA(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=El(t.mergedAttrs,d.hostAttrs),_j(n,t,e,c,d),vj(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}lj(n,t,s)}function hj(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;fj(o)!=a&&o.push(a),o.push(t,r,s)}}function fj(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function pj(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;lf(t)&&Ej(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||jh(t,e),Oi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],u=js(e,n,a,t);if(Oi(u,e),o!==null&&Ij(e,a-i,u,c,t,o),Pi(c)){let d=Li(t.index,e);d[sr]=js(e,n,a,t)}}}function SA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=CL();try{Vs(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];jy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&gj(c,u)}}finally{Vs(-1),jy(o)}}function gj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function mj(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(WT(e,o.selectors,!1))if(r||(r=[]),Pi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;ov(n,e,c)}else r.unshift(o),ov(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function ov(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function yj(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ie(-301,!1);r.push(e[i],s)}}}function vj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Pi(e)&&(t[""]=n)}}function wj(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function _j(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ns(i.type,!0)),o=new Ls(s,Pi(i),q);n.blueprint[r]=o,t[r]=o,hj(n,e,r,bA(n,t,i.hostVars,Gn),i)}function Ej(n,e,t){let r=or(e,n),i=CA(t),s=n[br].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Df(n,bf(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function Ij(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],d=o[a++],f=o[a++];IA(r,t,c,u,d,f)}}function bj(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function AA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function xA(n,e){let t=n.contentQueries;if(t!==null){let r=ke(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Kv(s),a.contentQueries(2,e[o],o)}}}finally{ke(r)}}}function Df(n,e){return n[Dl]?n[XC][ir]=e:n[Dl]=e,n[XC]=e,e}function av(n,e,t){Kv(0);let r=ke(null);try{e(n,t)}finally{ke(r)}}function MA(n){return n[Nh]??=[]}function RA(n){return n.cleanup??=[]}function kA(n,e){let t=n[Xo],r=t?t.get(Qr,null):null;r&&r.handleError(e)}function pw(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],u=e[o],d=n.data[o];IA(d,u,r,a,c,i)}}function NA(n,e,t){let r=dS(e,n);L2(n[lt],r,t)}function Dj(n,e){let t=Li(e,n),r=t[ye];Cj(r,t);let i=t[Jr];i!==null&&t[bl]===null&&(t[bl]=iw(i,t[Xo])),gw(r,t,t[sr])}function Cj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function gw(n,e,t){Qv(e);try{let r=n.viewQuery;r!==null&&av(1,r,t);let i=n.template;i!==null&&DA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Kr]?.finishViewCreation(n),n.staticContentQueries&&xA(n,e),n.staticViewQueries&&av(2,n.viewQuery,t);let s=n.components;s!==null&&Tj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[de]&=-5,Yv()}}function Tj(n,e){for(let t=0;t<e.length;t++)Dj(n,e[t])}function PA(n,e,t,r){let i=ke(null);try{let s=e.tView,a=n[de]&4096?4096:16,c=bf(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Ps]=u;let d=n[Kr];return d!==null&&(c[Kr]=d.createEmbeddedView(s)),gw(s,c,t),c}finally{ke(i)}}function cv(n,e){return!e||e.firstChild===null||$S(n)}function OA(n,e,t,r=!0){let i=e[ye];if(z2(i,e,n,t),r){let o=sv(t,n),a=e[lt],c=pA(a,n[Os]);c!==null&&B2(i,n[wn],a,e,c,o)}let s=e[bl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function qh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Dr(s)),Xr(s)&&Sj(s,r);let o=t.type;if(o&8)qh(n,e,t.child,r);else if(o&32){let a=sw(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=mA(e,t);if(Array.isArray(a))r.push(...a);else{let c=Fs(e[zn]);qh(c[ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Sj(n,e){for(let t=Mn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&qh(r[ye],r,i,e)}n[Os]!==n[Jr]&&e.push(n[Os])}var FA=[];function Aj(n){return n[$n]??xj(n)}function xj(n){let e=FA.pop()??Object.create(Rj);return e.lView=n,e}function Mj(n){n.lView[$n]!==n&&(n.lView=null,FA.push(n))}var Rj=te(M({},ol),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{hf(n.lView)},consumerOnSignalRead(){this.lView[$n]=this}});function kj(n){let e=n[$n]??Object.create(Nj);return e.lView=n,e}var Nj=te(M({},ol),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Fs(n.lView);for(;e&&!VA(e[ye]);)e=Fs(e);e&&pS(e)},consumerOnSignalRead(){this.lView[$n]=this}});function VA(n){return n.type!==2}var Pj=100;function LA(n,e=!0,t=0){let r=n[br],i=r.rendererFactory,s=!1;s||i.begin?.();try{Oj(n,t)}catch(o){throw e&&kA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Oj(n,e){let t=_S();try{tT(!0),lv(n,e);let r=0;for(;df(n);){if(r===Pj)throw new ie(103,!1);r++,lv(n,1)}}finally{tT(t)}}function Fj(n,e,t,r){let i=e[de];if((i&256)===256)return;let s=!1,o=!1;!s&&e[br].inlineEffectRunner?.flush(),Qv(e);let a=!0,c=null,u=null;s||(VA(n)?(u=Aj(e),c=jd(u)):uC()===null?(a=!1,u=kj(e),c=jd(u)):e[$n]&&(Ym(e[$n]),e[$n]=null));try{fS(e),IL(n.bindingStartIndex),t!==null&&DA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&Dh(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Ch(e,m,0,null),vy(e,0)}if(o||Vj(e),jA(e,0),n.contentQueries!==null&&xA(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&Dh(e,m)}else{let m=n.contentHooks;m!==null&&Ch(e,m,1),vy(e,1)}tj(n,e);let f=n.components;f!==null&&BA(e,f,0);let g=n.viewQuery;if(g!==null&&av(2,g,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&Dh(e,m)}else{let m=n.viewHooks;m!==null&&Ch(e,m,2),vy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[yy]){for(let m of e[yy])m();e[yy]=null}s||(e[de]&=-73)}catch(d){throw s||hf(e),d}finally{u!==null&&(Km(u,c),a&&Mj(u)),Yv()}}function jA(n,e){for(let t=qS(n);t!==null;t=HS(t))for(let r=Mn;r<t.length;r++){let i=t[r];UA(i,e)}}function Vj(n){for(let e=qS(n);e!==null;e=HS(e)){if(!(e[de]&Oh.HasTransplantedViews))continue;let t=e[ea];for(let r=0;r<t.length;r++){let i=t[r];pS(i)}}}function Lj(n,e,t){let r=Li(e,n);UA(r,t)}function UA(n,e){zv(n)&&lv(n,e)}function lv(n,e){let r=n[ye],i=n[de],s=n[$n],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Qm(s)),o||=!1,s&&(s.dirty=!1),n[de]&=-9217,o)Fj(r,n,r.template,n[sr]);else if(i&8192){jA(n,1);let a=r.components;a!==null&&BA(n,a,1)}}function BA(n,e,t){for(let r=0;r<e.length;r++)Lj(n,e[r],t)}function mw(n,e){let t=_S()?64:1088;for(n[br].changeDetectionScheduler?.notify(e);n;){n[de]|=t;let r=Fs(n);if(Fy(n)&&!r)return n;n=r}return null}var Us=class{get rootNodes(){let e=this._lView,t=e[ye];return qh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[sr]}set context(e){this._lView[sr]=e}get destroyed(){return(this._lView[de]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Wt];if(Xr(e)){let t=e[Ph],r=t?t.indexOf(this):-1;r>-1&&(iv(e,r),Mh(t,r))}this._attachedToViewContainer=!1}dA(this._lView[ye],this._lView)}onDestroy(e){gS(this._lView,e)}markForCheck(){mw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){Ly(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,LA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Fy(this._lView),t=this._lView[Ps];t!==null&&!e&&ow(t,this._lView),lA(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=Fy(this._lView),r=this._lView[Ps];r!==null&&!t&&uA(r,this._lView),Ly(this._lView)}},Bs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Bj;let n=e;return n})(),jj=Bs,Uj=class extends jj{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=PA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Us(i)}};function Bj(){return Cf(dn(),be())}function Cf(n,e){return n.type&4?new Uj(e,n,da(n,e)):null}var TZ=new RegExp(`^(\\d+)*(${l2}|${c2})*(.*)`);var $j=()=>null;function uv(n,e){return $j(n,e)}var na=class{},$A=new W("",{providedIn:"root",factory:()=>!1});var zA=new W(""),qA=new W(""),dv=class{},Hh=class{};function zj(n){let e=Error(`No component factory found for ${cn(n)}.`);return e[qj]=n,e}var qj="ngComponent";var hv=class{resolveComponentFactory(e){throw zj(e)}},Ow=class Ow{};Ow.NULL=new hv;var ra=Ow,ia=class{},Wn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>Hj();let n=e;return n})();function Hj(){let n=be(),e=dn(),t=Li(e.index,n);return(Ri(t)?t:n)[lt]}var Gj=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();function Gh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Ay(i,a);else if(s==2){let c=a,u=e[++o];r=Ay(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Wh=class extends ra{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ni(e);return new sa(t,this.ngModule)}};function wT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:ki.None;e?t.push({propName:o,templateName:r,isSignal:(a&ki.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function Wj(n){let e=n.toLowerCase();return e==="svg"?cL:e==="math"?lL:null}var sa=class extends Hh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=wT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return wT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=UV(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=ke(null);try{i=i||this.ngModule;let o=i instanceof ln?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Uy(e,o):e,c=a.get(ia,null);if(c===null)throw new ie(407,!1);let u=a.get(Gj,null),d=a.get(na,null),f={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",w=r?ij(g,r,this.componentDef.encapsulation,a):cA(g,m,Wj(m)),D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let C=null;w!==null&&(C=iw(w,a,!0));let O=dw(0,null,null,1,0,null,null,null,null,null,null),V=bf(null,O,null,D,null,null,f,g,a,null,C);Qv(V);let L,H,X=null;try{let Q=this.componentDef,I,v=null;Q.findHostDirectiveDefs?(I=[],v=new Map,Q.findHostDirectiveDefs(Q,I,v),I.push(Q)):I=[Q];let _=Kj(V,w);X=Qj(_,w,Q,I,V,f,g),H=hS(O,un),w&&Jj(g,Q,w,r),t!==void 0&&Xj(H,this.ngContentSelectors,t),L=Zj(X,Q,I,v,V,[eU]),gw(O,V,null)}catch(Q){throw X!==null&&Ky(X),Ky(V),Q}finally{Yv()}return new fv(this.componentType,L,da(H,V),V,H)}finally{ke(s)}}},fv=class extends dv{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Us(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;pw(s[ye],s,i,e,t),this.previousInputValues.set(e,t);let o=Li(this._tNode.index,s);mw(o,1)}}get injector(){return new ks(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Kj(n,e){let t=n[ye],r=un;return n[r]=e,ha(t,r,2,"#host",null)}function Qj(n,e,t,r,i,s,o){let a=i[ye];Yj(r,n,e,o);let c=null;e!==null&&(c=iw(e,i[Xo]));let u=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=bf(i,CA(t),null,d,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&ov(a,n,r.length-1),Df(i,f),i[n.index]=f}function Yj(n,e,t,r){for(let i of n)e.mergedAttrs=El(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Gh(e,e.mergedAttrs,!0),t!==null&&wA(r,t,e))}function Zj(n,e,t,r,i,s){let o=dn(),a=i[ye],c=or(o,i);TA(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=js(i,a,f,o);Oi(g,i)}SA(a,i,o),c&&Oi(c,i);let u=js(i,a,o.directiveStart+o.componentOffset,o);if(n[sr]=i[sr]=u,s!==null)for(let d of s)d(u,e);return cw(a,o,i),u}function Jj(n,e,t,r){if(r)ky(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=BV(e.selectors[0]);i&&ky(n,t,i),s&&s.length>0&&vA(n,t,s.join(" "))}}function Xj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function eU(){let n=dn();mf(be()[ye],n)}var En=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=tU;let n=e;return n})();function tU(){let n=dn();return GA(n,be())}var nU=En,HA=class extends nU{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return da(this._hostTNode,this._hostLView)}get injector(){return new ks(this._hostTNode,this._hostLView)}get parentInjector(){let e=Jv(this._hostTNode,this._hostLView);if(xS(e)){let t=Vh(e,this._hostLView),r=Fh(e),i=t[ye].data[r+8];return new ks(i,t)}else return new ks(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=_T(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Mn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=uv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,cv(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!iL(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new sa(Ni(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let D=(o?u:this.parentInjector).get(ln,null);D&&(s=D)}let d=Ni(c.componentType??{}),f=uv(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(u,i,g,s);return this.insertImpl(m.hostView,a,cv(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(dL(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Wt],u=new HA(c,c[wn],c[Wt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return OA(o,i,s,r),e.attachToViewContainerRef(),$T(by(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=_T(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=iv(this._lContainer,t);r&&(Mh(by(this._lContainer),t),dA(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=iv(this._lContainer,t);return r&&Mh(by(this._lContainer),t)!=null?new Us(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function _T(n){return n[Ph]}function by(n){return n[Ph]||(n[Ph]=[])}function GA(n,e){let t,r=e[n.index];return Xr(r)?t=r:(t=AA(r,e,null,n),e[n.index]=t,Df(e,t)),iU(t,e,n,r),new HA(t,n,e)}function rU(n,e){let t=n[lt],r=t.createComment(""),i=or(e,n),s=pA(t,i);return zh(t,s,r,W2(t,i),!1),r}var iU=aU,sU=()=>!1;function oU(n,e,t){return sU(n,e,t)}function aU(n,e,t,r){if(n[Os])return;let i;t.type&8?i=Dr(r):i=rU(e,t),n[Os]=i}var pv=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},gv=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)yw(e,t).matches!==null&&this.queries[t].setDirty()}},mv=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=gU(e):this.predicate=e}},yv=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},vv=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,cU(t,s)),this.matchTNodeWithReadOption(e,t,Th(t,e,s,!1,!1))}else r===Bs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Th(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===kt||i===En||i===Bs&&t.type&4)this.addMatch(t.index,-2);else{let s=Th(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function cU(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function lU(n,e){return n.type&11?da(n,e):n.type&4?Cf(n,e):null}function uU(n,e,t,r){return t===-1?lU(e,n):t===-2?dU(n,e,r):js(n,n[ye],t,e)}function dU(n,e,t){if(t===kt)return da(e,n);if(t===Bs)return Cf(e,n);if(t===En)return GA(e,n)}function WA(n,e,t,r){let i=e[Kr].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let d=s[u];a.push(uU(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function wv(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=WA(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],d=e[-c];for(let f=Mn;f<d.length;f++){let g=d[f];g[Ps]===g[Wt]&&wv(g[ye],g,u,r)}if(d[ea]!==null){let f=d[ea];for(let g=0;g<f.length;g++){let m=f[g];wv(m[ye],m,u,r)}}}}}return r}function hU(n,e){return n[Kr].queries[e].queryList}function fU(n,e,t){let r=new Wy((t&4)===4);return aj(n,e,r,r.destroy),(e[Kr]??=new gv).queries.push(new pv(r))-1}function pU(n,e,t){let r=vt();return r.firstCreatePass&&(mU(r,new mv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),fU(r,be(),e)}function gU(n){return n.split(",").map(e=>e.trim())}function mU(n,e,t){n.queries===null&&(n.queries=new yv),n.queries.track(new vv(e,t))}function yw(n,e){return n.queries.getByIndex(e)}function yU(n,e){let t=n[ye],r=yw(t,e);return r.crossesNgTemplate?wv(t,n,e,[]):WA(t,n,r,e)}var ET=new Set;function fa(n){ET.has(n)||(ET.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function vU(n){return typeof n=="function"&&n[$r]!==void 0}function Rl(n,e){fa("NgSignals");let t=EC(n),r=t[$r];return e?.equal&&(r.equal=e.equal),t.set=i=>Zm(r,i),t.update=i=>IC(r,i),t.asReadonly=wU.bind(t),t}function wU(){let n=this[$r];if(n.readonlyFn===void 0){let e=()=>this();e[$r]=n,n.readonlyFn=e}return n.readonlyFn}function KA(n){return vU(n)&&typeof n.set=="function"}function _U(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(DU))}return s}return Kh.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),o.push(r(f).then(m=>{a[u+g]=m,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>CU(s));e.push(c)}),IU(),Promise.all(e).then(()=>{})}var Kh=new Map,EU=new Set;function IU(){let n=Kh;return Kh=new Map,n}function bU(){return Kh.size===0}function DU(n){return typeof n=="string"?n:n.text()}function CU(n){EU.delete(n)}function TU(n){return Object.getPrototypeOf(n.prototype).constructor}function wt(n){let e=TU(n.type),t=!0,r=[n];for(;e;){let i;if(Pi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=wh(n.inputs),o.inputTransforms=wh(n.inputTransforms),o.declaredInputs=wh(n.declaredInputs),o.outputs=wh(n.outputs);let a=i.hostBindings;a&&RU(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&xU(n,c),u&&MU(n,u),SU(n,i),iV(n.outputs,i.outputs),Pi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===wt&&(t=!1)}}e=Object.getPrototypeOf(e)}AU(r)}function SU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function AU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=El(i.hostAttrs,t=El(t,i.hostAttrs))}}function wh(n){return n===Yo?{}:n===vn?[]:n}function xU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function MU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function RU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Fi=class{},Cl=class{};var Qh=class extends Fi{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Wh(this);let s=ZT(e);this._bootstrapComponents=aA(s.bootstrap),this._r3Injector=LS(e,t,[{provide:Fi,useValue:this},{provide:ra,useValue:this.componentFactoryResolver},...r],cn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yh=class extends Cl{constructor(e){super(),this.moduleType=e}create(e){return new Qh(this.moduleType,e,[])}};function kU(n,e,t){return new Qh(n,e,t,!1)}var _v=class extends Fi{constructor(e){super(),this.componentFactoryResolver=new Wh(this),this.instance=null;let t=new Il([...e.providers,{provide:Fi,useValue:this},{provide:ra,useValue:this.componentFactoryResolver}],e.parent||Uv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tf(n,e,t=null){return new _v({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function QA(n){return vw(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function NU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function vw(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ww(n,e,t){return n[e]=t}function Zr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function _w(n,e,t,r){let i=Zr(n,e,t);return Zr(n,e+1,r)||i}function PU(n,e,t,r,i){let s=_w(n,e,t,r);return Zr(n,e+2,i)||s}function OU(n){return(n.flags&32)===32}function FU(n,e,t,r,i,s,o,a,c){let u=e.consts,d=ha(e,n,4,o||null,a||null);fw(e,t,d,ta(u,c)),mf(e,d);let f=d.tView=dw(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function YA(n,e,t,r,i,s,o,a,c,u){let d=t+un,f=e.firstCreatePass?FU(d,e,n,r,i,s,o,a,c):e.data[d];qs(f,!1);let g=VU(e,n,f,t);pf()&&Ef(e,n,g,f),Oi(g,n);let m=AA(g,n,g,f);return n[d]=m,Df(n,m),oU(m,f,n),uf(f)&&lw(e,n,f),c!=null&&uw(n,f,u),f}function Ce(n,e,t,r,i,s,o,a){let c=be(),u=vt(),d=ta(u.consts,s);return YA(c,u,n,e,t,r,i,d,o,a),Ce}var VU=LU;function LU(n,e,t,r){return gf(!0),e[lt].createComment("")}var Wo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Wo||{}),ZA=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})(),Rs=class Rs{constructor(){this.ngZone=G(De),this.scheduler=G(na),this.errorHandler=G(Qr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Rs.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Rs.PHASES=[Wo.EarlyRead,Wo.Write,Wo.MixedReadWrite,Wo.Read],Rs.\u0275prov=K({token:Rs,providedIn:"root",factory:()=>new Rs});var Ev=Rs,Iv=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Ew(n,e){!e?.injector&&nL(Ew);let t=e?.injector??G(kn);return O2(t)?(fa("NgAfterNextRender"),UU(n,t,e,!0)):BU}function jU(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function UU(n,e,t,r){let i=e.get(ZA);i.impl??=e.get(Ev);let s=t?.phase??Wo.MixedReadWrite,o=new Iv(i.impl,jU(n,s),r,e.get(Xv));return i.impl.register(o),o}var BU={destroy(){}};function Iw(n,e,t,r){return Zr(n,Gv(),t)?e+wl(t)+r:Gn}function $U(n,e,t,r,i,s){let o=EL(),a=_w(n,o,t,i);return Wv(2),a?e+wl(t)+r+wl(i)+s:Gn}function _h(n,e){return n<<17|e<<2}function $s(n){return n>>17&32767}function zU(n){return(n&2)==2}function qU(n,e){return n&131071|e<<17}function bv(n){return n|2}function oa(n){return(n&131068)>>2}function Dy(n,e){return n&-131069|e<<2}function HU(n){return(n&1)===1}function Dv(n){return n|1}function GU(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=$s(o),c=oa(o);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Al(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let g=$s(n[a+1]);n[r+1]=_h(g,a),g!==0&&(n[g+1]=Dy(n[g+1],r)),n[a+1]=qU(n[a+1],r)}else n[r+1]=_h(a,0),a!==0&&(n[a+1]=Dy(n[a+1],r)),a=r;else n[r+1]=_h(c,0),a===0?a=r:n[c+1]=Dy(n[c+1],r),c=r;u&&(n[r+1]=bv(n[r+1])),IT(n,d,r,!0),IT(n,d,r,!1),WU(e,d,n,r,s),o=_h(a,c),s?e.classBindings=o:e.styleBindings=o}function WU(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Al(s,e)>=0&&(t[r+1]=Dv(t[r+1]))}function IT(n,e,t,r){let i=n[t+1],s=e===null,o=r?$s(i):oa(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];KU(c,e)&&(a=!0,n[o+1]=r?Dv(u):bv(u)),o=r?$s(u):oa(u)}a&&(n[t+1]=r?bv(i):Dv(i))}function KU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Al(n,e)>=0:!1}var Tt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function JA(n){return n.substring(Tt.key,Tt.keyEnd)}function QU(n){return n.substring(Tt.value,Tt.valueEnd)}function YU(n){return tx(n),XA(n,aa(n,0,Tt.textEnd))}function XA(n,e){let t=Tt.textEnd;return t===e?-1:(e=Tt.keyEnd=JU(n,Tt.key=e,t),aa(n,e,t))}function ZU(n){return tx(n),ex(n,aa(n,0,Tt.textEnd))}function ex(n,e){let t=Tt.textEnd,r=Tt.key=aa(n,e,t);return t===r?-1:(r=Tt.keyEnd=XU(n,r,t),r=bT(n,r,t,58),r=Tt.value=aa(n,r,t),r=Tt.valueEnd=eB(n,r,t),bT(n,r,t,59))}function tx(n){Tt.key=0,Tt.keyEnd=0,Tt.value=0,Tt.valueEnd=0,Tt.textEnd=n.length}function aa(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function JU(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function XU(n,e,t){let r;for(;e<t&&((r=n.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function bT(n,e,t,r){return e=aa(n,e,t),e<t&&e++,e}function eB(n,e,t){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<t;){let c=n.charCodeAt(o++);if(c===59)return a;c===34||c===39?a=o=DT(n,c,o,t):e===o-4&&s===85&&i===82&&r===76&&c===40?a=o=DT(n,41,o,t):c>32&&(a=o),s=i,i=r,r=c&-33}return a}function DT(n,e,t,r){let i=-1,s=t;for(;s<r;){let o=n.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function ee(n,e,t){let r=be(),i=Gv();if(Zr(r,i,e)){let s=vt(),o=Zv();hw(s,o,r,n,e,r[lt],t,!1)}return ee}function Cv(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";pw(n,t,s[o],o,r)}function pa(n,e,t){return nx(n,e,t,!1),pa}function ga(n,e){return nx(n,e,null,!0),ga}function bw(n){rx(ox,tB,n,!1)}function tB(n,e){for(let t=ZU(e);t>=0;t=ex(e,t))ox(n,JA(e),QU(e))}function nB(n,e){for(let t=YU(e);t>=0;t=XA(e,t))sf(n,JA(e),!0)}function nx(n,e,t,r){let i=be(),s=vt(),o=Wv(2);if(s.firstUpdatePass&&sx(s,n,o,r),e!==Gn&&Zr(i,o,e)){let a=s.data[ji()];ax(s,a,i,i[lt],n,i[o+1]=lB(e,t),r,o)}}function rx(n,e,t,r){let i=vt(),s=Wv(2);i.firstUpdatePass&&sx(i,null,s,r);let o=be();if(t!==Gn&&Zr(o,s,t)){let a=i.data[ji()];if(cx(a,r)&&!ix(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Ay(c,t||"")),Cv(i,a,o,t,r)}else cB(i,a,o,o[lt],o[s+1],o[s+1]=aB(n,e,t),r,s)}}function ix(n,e){return e>=n.expandoStartIndex}function sx(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ji()],o=ix(n,t);cx(s,r)&&e===null&&!o&&(e=!1),e=rB(i,s,e,r),GU(i,s,e,t,o,r)}}function rB(n,e,t,r){let i=TL(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Cy(null,n,e,t,r),t=Tl(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Cy(i,n,e,t,r),s===null){let c=iB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Cy(null,n,e,c[1],r),c=Tl(c,e.attrs,r),sB(n,e,r,c))}else s=oB(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function iB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(oa(r)!==0)return n[$s(r)]}function sB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[$s(i)]=r}function oB(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Tl(r,o,t)}return Tl(r,e.attrs,t)}function Cy(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Tl(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Tl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),sf(n,o,t?!0:e[++s]))}return n===void 0?null:n}function aB(n,e,t){if(t==null||t==="")return vn;let r=[],i=Hn(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function ox(n,e,t){sf(n,e,Hn(t))}function cB(n,e,t,r,i,s,o,a){i===Gn&&(i=vn);let c=0,u=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,m=u<s.length?s[u+1]:void 0,w=null,D;d===f?(c+=2,u+=2,g!==m&&(w=f,D=m)):f===null||d!==null&&d<f?(c+=2,w=d):(u+=2,w=f,D=m),w!==null&&ax(n,e,t,r,w,D,o,a),d=c<i.length?i[c]:null,f=u<s.length?s[u]:null}}function ax(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=HU(u)?CT(c,e,t,i,oa(u),o):void 0;if(!Zh(d)){Zh(s)||zU(u)&&(s=CT(c,null,t,i,a,o));let f=dS(ji(),t);X2(r,o,f,i,s)}}function CT(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,g=t[i+1];g===Gn&&(g=f?vn:void 0);let m=f?gy(g,r):d===r?g:void 0;if(u&&!Zh(m)&&(m=gy(c,r)),Zh(m)&&(a=m,o))return a;let w=n[i+1];i=o?$s(w):oa(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=gy(c,r))}return a}function Zh(n){return n!==void 0}function lB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=cn(Hn(n)))),n}function cx(n,e){return(n.flags&(e?8:16))!==0}function Sf(n,e,t){let r=be(),i=Iw(r,n,e,t);rx(sf,nB,i,!0)}function uB(n,e,t,r,i,s){let o=e.consts,a=ta(o,i),c=ha(e,n,2,r,a);return fw(e,t,c,ta(o,s)),c.attrs!==null&&Gh(c,c.attrs,!1),c.mergedAttrs!==null&&Gh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function k(n,e,t,r){let i=be(),s=vt(),o=un+n,a=i[lt],c=s.firstCreatePass?uB(o,s,i,e,t,r):s.data[o],u=dB(s,i,c,a,e,n);i[o]=u;let d=uf(c);return qs(c,!0),wA(a,u,c),!OU(c)&&pf()&&Ef(s,i,u,c),pL()===0&&Oi(u,i),gL(),d&&(lw(s,i,c),cw(s,c,i)),r!==null&&uw(i,c),k}function F(){let n=dn();qv()?Hv():(n=n.parent,qs(n,!1));let e=n;yL(e)&&vL(),mL();let t=vt();return t.firstCreatePass&&(mf(t,n),Bv(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&NL(e)&&Cv(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&PL(e)&&Cv(t,e,be(),e.stylesWithoutHost,!1),F}function ce(n,e,t,r){return k(n,e,t,r),F(),ce}var dB=(n,e,t,r,i,s)=>(gf(!0),cA(r,i,xL()));function hB(n,e,t,r,i){let s=e.consts,o=ta(s,r),a=ha(e,n,8,"ng-container",o);o!==null&&Gh(a,o,!0);let c=ta(s,i);return fw(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Dw(n,e,t){let r=be(),i=vt(),s=n+un,o=i.firstCreatePass?hB(s,i,r,e,t):i.data[s];qs(o,!0);let a=fB(i,r,o,n);return r[s]=a,pf()&&Ef(i,r,a,o),Oi(a,r),uf(o)&&(lw(i,r,o),cw(i,o,r)),t!=null&&uw(r,o),Dw}function Cw(){let n=dn(),e=vt();return qv()?Hv():(n=n.parent,qs(n,!1)),e.firstCreatePass&&(mf(e,n),Bv(n)&&e.queries.elementEnd(n)),Cw}var fB=(n,e,t,r)=>(gf(!0),j2(e[lt],""));function In(){return be()}var Jh="en-US";var pB=Jh;function gB(n){typeof n=="string"&&(pB=n.toLowerCase().replace(/_/g,"-"))}var mB=(n,e,t)=>{};function Oe(n,e,t,r){let i=be(),s=vt(),o=dn();return lx(s,i,i[lt],o,n,e,r),Oe}function yB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Nh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function lx(n,e,t,r,i,s,o){let a=uf(r),u=n.firstCreatePass&&RA(n),d=e[sr],f=MA(e),g=!0;if(r.type&3||o){let D=or(r,e),C=o?o(D):D,O=f.length,V=o?H=>o(Dr(H[r.index])):r.index,L=null;if(!o&&a&&(L=yB(n,e,i,r.index)),L!==null){let H=L.__ngLastListenerFn__||L;H.__ngNextListenerFn__=s,L.__ngLastListenerFn__=s,g=!1}else{s=ST(r,e,d,s),mB(D,i,s);let H=t.listen(C,i,s);f.push(s,H),u&&u.push(i,V,O,O+1)}}else s=ST(r,e,d,s);let m=r.outputs,w;if(g&&m!==null&&(w=m[i])){let D=w.length;if(D)for(let C=0;C<D;C+=2){let O=w[C],V=w[C+1],X=e[O][V].subscribe(s),Q=f.length;f.push(s,X),u&&u.push(i,r.index,Q,-(Q+1))}}}function TT(n,e,t,r){let i=ke(null);try{return _r(6,e,t),t(r)!==!1}catch(s){return kA(n,s),!1}finally{_r(7,e,t),ke(i)}}function ST(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Li(n.index,e):e;mw(o,5);let a=TT(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=TT(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function ue(n=1){return AL(n)}function vB(n,e){let t=null,r=OV(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?WT(n,s,!0):LV(r,s))return i}return t}function ux(n){let e=be()[zn][wn];if(!e.projection){let t=n?n.length:1,r=e.projection=CV(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?vB(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function dx(n,e=0,t,r,i,s){let o=be(),a=vt(),c=r?n+1:null;c!==null&&YA(o,a,c,r,i,s,null,t);let u=ha(a,un+n,16,null,t||null);u.projection===null&&(u.projection=e),Hv();let f=!o[bl]||vS();o[zn][wn].projection[u.projection]===null&&c!==null?wB(o,a,c):f&&(u.flags&32)!==32&&Z2(a,o,u)}function wB(n,e,t){let r=un+t,i=e.data[r],s=n[r],o=uv(s,i.tView.ssrId),a=PA(n,i,void 0,{dehydratedView:o});OA(s,a,0,cv(i,o))}function Nn(n,e,t){return Af(n,"",e,"",t),Nn}function Af(n,e,t,r,i){let s=be(),o=Iw(s,e,t,r);if(o!==Gn){let a=vt(),c=Zv();hw(a,c,s,n,o,s[lt],i,!1)}return Af}function kl(n,e,t){pU(n,e,t)}function ma(n){let e=be(),t=vt(),r=ES();Kv(r+1);let i=yw(t,r);if(n.dirty&&uL(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=yU(e,r);n.reset(s,t2),n.notifyOnChanges()}return!0}return!1}function ya(){return hU(be(),ES())}function _B(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function va(n){let e=_L();return $v(e,un+n)}function U(n,e=""){let t=be(),r=vt(),i=n+un,s=r.firstCreatePass?ha(r,i,1,e,null):r.data[i],o=EB(r,t,s,e,n);t[i]=o,pf()&&Ef(r,t,o,s),qs(s,!1)}var EB=(n,e,t,r,i)=>(gf(!0),V2(e[lt],r));function Ve(n){return Lt("",n,""),Ve}function Lt(n,e,t){let r=be(),i=Iw(r,n,e,t);return i!==Gn&&NA(r,ji(),i),Lt}function xf(n,e,t,r,i){let s=be(),o=$U(s,n,e,t,r,i);return o!==Gn&&NA(s,ji(),o),xf}function wa(n,e,t){KA(e)&&(e=e());let r=be(),i=Gv();if(Zr(r,i,e)){let s=vt(),o=Zv();hw(s,o,r,n,e,r[lt],t,!1)}return wa}function Nl(n,e){let t=KA(n);return t&&n.set(e),t}function _a(n,e){let t=be(),r=vt(),i=dn();return lx(r,t,t[lt],i,n,e),_a}function IB(n,e,t){let r=vt();if(r.firstCreatePass){let i=Pi(n);Tv(t,r.data,r.blueprint,i,!0),Tv(e,r.data,r.blueprint,i,!1)}}function Tv(n,e,t,r,i){if(n=an(n),Array.isArray(n))for(let s=0;s<n.length;s++)Tv(n[s],e,t,r,i);else{let s=vt(),o=be(),a=dn(),c=Jo(n)?n:an(n.provide),u=rS(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Jo(n)||!n.multi){let m=new Ls(u,i,q),w=Sy(c,e,i?d:d+g,f);w===-1?($y(jh(a,o),s,c),Ty(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[w]=m,o[w]=m)}else{let m=Sy(c,e,d+g,f),w=Sy(c,e,d,d+g),D=m>=0&&t[m],C=w>=0&&t[w];if(i&&!C||!i&&!D){$y(jh(a,o),s,c);let O=CB(i?DB:bB,t.length,i,r,u);!i&&C&&(t[w].providerFactory=O),Ty(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),o.push(O)}else{let O=hx(t[i?w:m],u,!i&&r);Ty(s,n,m>-1?m:w,O)}!i&&r&&C&&t[w].componentProviders++}}}function Ty(n,e,t,r){let i=Jo(e),s=QV(e);if(i||s){let c=(s?an(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function hx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Sy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function bB(n,e,t,r){return Sv(this.multi,[])}function DB(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=js(t,t[ye],this.providerFactory.index,r);s=a.slice(0,o),Sv(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Sv(i,s);return s}function Sv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function CB(n,e,t,r,i){let s=new Ls(n,t,q);return s.multi=[],s.index=e,s.componentProviders=0,hx(s,i,r&&!t),s}function Mf(n,e=[]){return t=>{t.providersResolver=(r,i)=>IB(r,i?i(n):n,e)}}var TB=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=eS(!1,r.type),s=i.length>0?Tf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=K({token:e,providedIn:"environment",factory:()=>new e(B(ln))});let n=e;return n})();function Pl(n){fa("NgStandalone"),n.getStandaloneInjector=e=>e.get(TB).getOrCreateStandaloneInjector(n)}function fx(n,e,t){let r=n.\u0275cmp;r.directiveDefs=kh(e,!1),r.pipeDefs=kh(t,!0)}function Rf(n,e,t,r){return px(be(),ff(),n,e,t,r)}function kf(n,e,t,r,i){return SB(be(),ff(),n,e,t,r,i)}function Tw(n,e){let t=n[e];return t===Gn?void 0:t}function px(n,e,t,r,i,s){let o=e+t;return Zr(n,o,i)?ww(n,o+1,s?r.call(s,i):r(i)):Tw(n,o+1)}function SB(n,e,t,r,i,s,o){let a=e+t;return _w(n,a,i,s)?ww(n,a+2,o?r.call(o,i,s):r(i,s)):Tw(n,a+2)}function AB(n,e,t,r,i,s,o,a){let c=e+t;return PU(n,c,i,s,o)?ww(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):Tw(n,c+3)}function jt(n,e){let t=vt(),r,i=n+un;t.firstCreatePass?(r=xB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ns(r.type,!0)),o,a=yn(q);try{let c=Lh(!1),u=s();return Lh(c),_B(t,be(),i,u),u}finally{yn(a)}}function xB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Pn(n,e,t){let r=n+un,i=be(),s=$v(i,r);return gx(i,r)?px(i,ff(),e,s.transform,t,s):s.transform(t)}function Ea(n,e,t,r,i){let s=n+un,o=be(),a=$v(o,s);return gx(o,s)?AB(o,ff(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function gx(n,e){return n[ye].data[e].pure}function Ia(n,e){return Cf(n,e)}var Eh=null;function MB(n){Eh!==null&&(n.defaultEncapsulation!==Eh.defaultEncapsulation||n.preserveWhitespaces!==Eh.preserveWhitespaces)||(Eh=n)}var Nf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var Sw=new W(""),Ol=new W(""),Pf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Aw||(RB(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(B(De),B(Of),B(Ol))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Of=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Aw?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function RB(n){Aw=n}var Aw;function $i(n){return!!n&&typeof n.then=="function"}function xw(n){return!!n&&typeof n.subscribe=="function"}var Ff=new W(""),mx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=G(Ff,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if($i(o))r.push(o);else if(xw(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Vf=new W("");function kB(){_C(()=>{throw new ie(600,!1)})}function NB(n){return n.isBoundToModule}var PB=10;function OB(n,e,t){try{let r=t();return $i(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function yx(n,e){return Array.isArray(e)?e.reduce(yx,n):M(M({},n),e)}var ti=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(XL),this.afterRenderManager=G(ZA),this.zonelessEnabled=G($A),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=G(Ui).hasPendingTasks.pipe(oe(r=>!r)),this._injector=G(ln)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Hh;if(!this._injector.get(mx).done){let m=!s&&YT(r),w=!1;throw new ie(405,w)}let a;s?a=r:a=this._injector.get(ra).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=NB(a)?void 0:this._injector.get(Fi),u=i||a.selector,d=a.create(kn.NULL,[],u,c),f=d.location.nativeElement,g=d.injector.get(Sw,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Sh(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ie(101,!1);let r=ke(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,ke(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(ia,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<PB;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)FB(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>df(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Sh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Vf,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Sh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ie(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Sh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function FB(n,e,t,r){if(!t&&!df(n))return;LA(n,e,t&&!r?0:1)}var Av=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Lf=(()=>{let e=class e{compileModuleSync(r){return new Yh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=ZT(r),o=aA(s.declarations).reduce((a,c)=>{let u=Ni(c);return u&&a.push(new sa(u)),a},[]);return new Av(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),VB=new W("");function LB(n,e,t){let r=new Yh(t);return Promise.resolve(r)}function AT(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var jB=(()=>{let e=class e{constructor(){this.zone=G(De),this.changeDetectionScheduler=G(na),this.applicationRef=G(ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function UB({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(te(M({},vx()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:Zo,multi:!0,useFactory:()=>{let r=G(jB,{optional:!0});return()=>r.initialize()}},{provide:Zo,multi:!0,useFactory:()=>{let r=G(BB);return()=>{r.initialize()}}},e===!0?{provide:zA,useValue:!0}:[],{provide:qA,useValue:t??jS}]}function vx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var BB=(()=>{let e=class e{constructor(){this.subscription=new ct,this.initialized=!1,this.zone=G(De),this.pendingTasks=G(Ui)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var $B=(()=>{let e=class e{constructor(){this.appRef=G(ti),this.taskService=G(Ui),this.ngZone=G(De),this.zonelessEnabled=G($A),this.disableScheduling=G(zA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ct,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Bh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(qA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $h||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?oT:US;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Bh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,oT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function zB(){return typeof $localize<"u"&&$localize.locale||Jh}var Mw=new W("",{providedIn:"root",factory:()=>G(Mw,Ie.Optional|Ie.SkipSelf)||zB()});var Rw=new W("");function Ih(n){return!!n.platformInjector}function qB(n){let e=Ih(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{Ih(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Qr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Ih(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Rw);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{Sh(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return OB(r,t,()=>{let s=e.get(mx);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Mw,Jh);if(gB(o||Jh),Ih(n)){let a=e.get(ti);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return HB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function HB(n,e){let t=n.injector.get(ti);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ie(-403,!1);e.push(n)}var wx=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=i?.scheduleInRootZone,o=()=>JL(i?.ngZone,te(M({},vx({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:s})),a=i?.ignoreChangesOutsideZone,c=[UB({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:na,useExisting:$B}],u=kU(r.moduleType,this.injector,c);return qB({moduleRef:u,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let s=yx({},i);return LB(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Rw,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(B(kn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),vl=null,_x=new W("");function GB(n){if(vl&&!vl.get(_x,!1))throw new ie(400,!1);kB(),vl=n;let e=n.get(wx);return QB(n),e}function kw(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(s=[])=>{let o=Ex();if(!o||o.injector.get(_x,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):GB(WB(a,r))}return KB(i)}}function WB(n=[],e){return kn.create({name:e,providers:[{provide:af,useValue:"platform"},{provide:Rw,useValue:new Set([()=>vl=null])},...n]})}function KB(n){let e=Ex();if(!e)throw new ie(401,!1);return e}function Ex(){return vl?.get(wx)??null}function QB(n){n.get(nw,null)?.forEach(t=>t())}function Nw(){return!1}var Tr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=YB;let n=e;return n})();function YB(n){return ZB(dn(),be(),(n&16)===16)}function ZB(n,e,t){if(lf(n)&&!t){let r=Li(n.index,e);return new Us(r,r)}else if(n.type&175){let r=e[zn];return new Us(r,e)}return null}var xv=class{constructor(){}supports(e){return QA(e)}create(e){return new Mv(e)}},JB=(n,e)=>e,Mv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<xT(r,i,s)?t:r,a=xT(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,d=c-i;if(u!=d){for(let g=0;g<u;g++){let m=g<s.length?s[g]:s[g]=0,w=m+g;d<=w&&w<u&&(s[g]=m+1)}let f=o.previousIndex;s[f]=d-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!QA(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,NU(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Rv(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Xh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Xh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Rv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},kv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Xh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new kv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function xT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Nv=class{constructor(){}supports(e){return e instanceof Map||vw(e)}create(){return new Pv}},Pv=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||vw(e)))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Ov(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Ov=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function MT(){return new Pw([new xv])}var Pw=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||MT()),deps:[[e,new rf,new la]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new ie(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:MT});let n=e;return n})();function RT(){return new jf([new Nv])}var jf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||RT()),deps:[[e,new rf,new la]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new ie(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:RT});let n=e;return n})();var Ix=kw(null,"core",[]),bx=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(B(ti))},e.\u0275mod=At({type:e}),e.\u0275inj=St({});let n=e;return n})();var Dx=new W("");function Uf(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Fl(n,e){fa("NgSignals");let t=yC(n);return e?.equal&&(t[$r].equal=e.equal),t}function ar(n){let e=ke(null);try{return n()}finally{ke(e)}}function Cx(n){let e=Ni(n);if(!e)return null;let t=new sa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var kx=null;function cr(){return kx}function Nx(n){kx??=n}var Bf=class{};var xt=new W(""),qw=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(n$),providedIn:"platform"});let n=e;return n})(),Px=new W(""),n$=(()=>{let e=class e extends qw{constructor(){super(),this._doc=G(xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cr().getBaseHref(this._doc)}onPopState(r){let i=cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function Hw(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Tx(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ni(n){return n&&n[0]!=="?"?"?"+n:n}var Hs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(Gw),providedIn:"root"});let n=e;return n})(),Ox=new W(""),Gw=(()=>{let e=class e extends Hs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??G(xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Hw(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ni(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+ni(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+ni(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(B(qw),B(Ox,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Fx=(()=>{let e=class e extends Hs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Hw(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+ni(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+ni(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(B(qw),B(Ox,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Da=(()=>{let e=class e{constructor(r){this._subject=new Je,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=s$(Tx(Sx(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ni(i))}normalize(r){return e.stripTrailingSlash(i$(this._basePath,Sx(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ni(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ni(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=ni,e.joinWithSlash=Hw,e.stripTrailingSlash=Tx,e.\u0275fac=function(i){return new(i||e)(B(Hs))},e.\u0275prov=K({token:e,factory:()=>r$(),providedIn:"root"});let n=e;return n})();function r$(){return new Da(B(Hs))}function i$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Sx(n){return n.replace(/\/index.html$/,"")}function s$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function $f(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Fw=/\s+/,Ax=[],Ca=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Ax,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Fw):Ax}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Fw):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Fw).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(q(kt),q(Wn))},e.\u0275dir=Kt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var Vw=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Qt=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Vw(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),xx(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);xx(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(En),q(Bs),q(Pw))},e.\u0275dir=Kt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function xx(n,e){n.context.$implicit=e.item}var Yt=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Lw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Mx("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Mx("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(q(En),q(Bs))},e.\u0275dir=Kt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),Lw=class{constructor(){this.$implicit=null,this.ngIf=null}};function Mx(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${cn(e)}'.`)}var Vx=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:Cr.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(q(kt),q(jf),q(Wn))},e.\u0275dir=Kt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let n=e;return n})();function Lx(n,e){return new ie(2100,!1)}var jw=class{createSubscription(e,t){return ar(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){ar(()=>e.unsubscribe())}},Uw=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},o$=new Uw,a$=new jw,jx=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if($i(r))return o$;if(xw(r))return a$;throw Lx(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(q(Tr,16))},e.\u0275pipe=zs({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();function c$(n,e){return{key:n,value:e}}var zi=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=Rx}transform(r,i=Rx){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let s=this.differ.diff(r),o=i!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(c$(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)(q(jf,16))},e.\u0275pipe=zs({name:"keyvalue",type:e,pure:!1,standalone:!0});let n=e;return n})();function Rx(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var Ta=(()=>{let e=class e{transform(r,i,s){if(r==null)return null;if(!this.supports(r))throw Lx(e,r);return r.slice(i,s)}supports(r){return typeof r=="string"||Array.isArray(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=zs({name:"slice",type:e,pure:!1,standalone:!0});let n=e;return n})();var Sa=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=At({type:e}),e.\u0275inj=St({});let n=e;return n})(),Ww="browser",l$="server";function qi(n){return n===Ww}function Hi(n){return n===l$}var Ux=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>qi(G(Vt))?new Bw(G(xt),window):new $w});let n=e;return n})(),Bw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=u$(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function u$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var $w=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ba=class{};var Ll=class{},qf=class{},bn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Qw=class{encodeKey(e){return Bx(e)}encodeValue(e){return Bx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function d$(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var h$=/%(\d[a-f0-9])/gi,f$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Bx(n){return encodeURIComponent(n).replace(h$,(e,t)=>f$[t]??e)}function zf(n){return`${n}`}var Wi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Qw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=d$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(zf):[zf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(zf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(zf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Yw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function p$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function $x(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function zx(n){return typeof Blob<"u"&&n instanceof Blob}function qx(n){return typeof FormData<"u"&&n instanceof FormData}function g$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Vl=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(p$(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new bn,this.context??=new Yw,!this.params)this.params=new Wi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||$x(this.body)||zx(this.body)||qx(this.body)||g$(this.body)?this.body:this.body instanceof Wi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||qx(this.body)?null:zx(this.body)?this.body.type||null:$x(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Wi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),d)),new n(t,r,o,{params:d,headers:u,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},Ki=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ki||{}),jl=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new bn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Hf=class n extends jl{constructor(e={}){super(e),this.type=Ki.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ul=class n extends jl{constructor(e={}){super(e),this.type=Ki.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Gi=class extends jl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Kx=200,m$=204;function Kw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ri=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Vl)o=r;else{let u;s.headers instanceof bn?u=s.headers:u=new bn(s.headers);let d;s.params&&(s.params instanceof Wi?d=s.params:d=new Wi({fromObject:s.params})),o=new Vl(r,i,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=ae(o).pipe(Hr(u=>this.handler.handle(u)));if(r instanceof Vl||s.observe==="events")return a;let c=a.pipe(Ct(u=>u instanceof Ul));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(oe(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(oe(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(oe(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(oe(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Wi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Kw(s,i))}post(r,i,s={}){return this.request("POST",r,Kw(s,i))}put(r,i,s={}){return this.request("PUT",r,Kw(s,i))}};e.\u0275fac=function(i){return new(i||e)(B(Ll))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),y$=/^\)\]\}',?\n/,v$="X-Request-URL";function Hx(n){if(n.url)return n.url;let e=v$.toLocaleLowerCase();return n.headers.get(e)}var w$=(()=>{let e=class e{constructor(){this.fetchImpl=G(Zw,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=G(De)}handle(r){return new ge(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(Jw,o=>i.error(new Gi({error:o}))),()=>s.abort()})}doRequest(r,i,s){return b(this,null,function*(){let o=this.createRequestInit(r),a;try{let w=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,M({signal:i},o)));_$(w),s.next({type:Ki.Sent}),a=yield w}catch(w){s.error(new Gi({error:w,status:w.status??0,statusText:w.statusText,url:r.urlWithParams,headers:w.headers}));return}let c=new bn(a.headers),u=a.statusText,d=Hx(a)??r.urlWithParams,f=a.status,g=null;if(r.reportProgress&&s.next(new Hf({headers:c,status:f,statusText:u,url:d})),a.body){let w=a.headers.get("content-length"),D=[],C=a.body.getReader(),O=0,V,L,H=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>b(this,null,function*(){for(;;){let{done:Q,value:I}=yield C.read();if(Q)break;if(D.push(I),O+=I.length,r.reportProgress){L=r.responseType==="text"?(L??"")+(V??=new TextDecoder).decode(I,{stream:!0}):void 0;let v=()=>s.next({type:Ki.DownloadProgress,total:w?+w:void 0,loaded:O,partialText:L});H?H.run(v):v()}}}));let X=this.concatChunks(D,O);try{let Q=a.headers.get("Content-Type")??"";g=this.parseBody(r,X,Q)}catch(Q){s.error(new Gi({error:Q,headers:new bn(a.headers),status:a.status,statusText:a.statusText,url:Hx(a)??r.urlWithParams}));return}}f===0&&(f=g?Kx:0),f>=200&&f<300?(s.next(new Ul({body:g,headers:c,status:f,statusText:u,url:d})),s.complete()):s.error(new Gi({error:g,headers:c,status:f,statusText:u,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(y$,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Zw=class{};function Jw(){}function _$(n){n.then(Jw,Jw)}function E$(n,e){return e(n)}function I$(n,e,t){return(r,i)=>qn(t,()=>e(r,s=>n(s,i)))}var Qx=new W(""),b$=new W(""),D$=new W("",{providedIn:"root",factory:()=>!0});var Gx=(()=>{let e=class e extends Ll{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=G(Ui),this.contributeToStability=G(D$)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Qx),...this.injector.get(b$,[])]));this.chain=i.reduceRight((s,o)=>I$(s,o,this.injector),E$)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(As(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(B(qf),B(ln))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();var C$=/^\)\]\}',?\n/;function T$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var Wx=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ie(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Se(i.\u0275loadImpl()):ae(null)).pipe(Ke(()=>new ge(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,O)=>a.setRequestHeader(C,O.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let c=r.serializeBody(),u=null,d=()=>{if(u!==null)return u;let C=a.statusText||"OK",O=new bn(a.getAllResponseHeaders()),V=T$(a)||r.url;return u=new Hf({headers:O,status:a.status,statusText:C,url:V}),u},f=()=>{let{headers:C,status:O,statusText:V,url:L}=d(),H=null;O!==m$&&(H=typeof a.response>"u"?a.responseText:a.response),O===0&&(O=H?Kx:0);let X=O>=200&&O<300;if(r.responseType==="json"&&typeof H=="string"){let Q=H;H=H.replace(C$,"");try{H=H!==""?JSON.parse(H):null}catch(I){H=Q,X&&(X=!1,H={error:I,text:H})}}X?(o.next(new Ul({body:H,headers:C,status:O,statusText:V,url:L||void 0})),o.complete()):o.error(new Gi({error:H,headers:C,status:O,statusText:V,url:L||void 0}))},g=C=>{let{url:O}=d(),V=new Gi({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:O||void 0});o.error(V)},m=!1,w=C=>{m||(o.next(d()),m=!0);let O={type:Ki.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(O.total=C.total),r.responseType==="text"&&a.responseText&&(O.partialText=a.responseText),o.next(O)},D=C=>{let O={type:Ki.UploadProgress,loaded:C.loaded};C.lengthComputable&&(O.total=C.total),o.next(O)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",w),c!==null&&a.upload&&a.upload.addEventListener("progress",D)),a.send(c),o.next({type:Ki.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",w),c!==null&&a.upload&&a.upload.removeEventListener("progress",D)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(B(ba))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Yx=new W(""),S$="XSRF-TOKEN",A$=new W("",{providedIn:"root",factory:()=>S$}),x$="X-XSRF-TOKEN",M$=new W("",{providedIn:"root",factory:()=>x$}),Gf=class{},R$=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=$f(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(B(xt),B(Vt),B(A$))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function k$(n,e){let t=n.url.toLowerCase();if(!G(Yx)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=G(Gf).getToken(),i=G(M$);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function Zx(...n){let e=[ri,Wx,Gx,{provide:Ll,useExisting:Gx},{provide:qf,useFactory:()=>G(w$,{optional:!0})??G(Wx)},{provide:Qx,useValue:k$,multi:!0},{provide:Yx,useValue:!0},{provide:Gf,useClass:R$}];for(let t of n)e.push(...t.\u0275providers);return of(e)}var n_=class extends Bf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},r_=class n extends n_{static makeCurrent(){Nx(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=N$();return t==null?null:P$(t)}resetBaseElement(){Bl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $f(document.cookie,e)}},Bl=null;function N$(){return Bl=Bl||document.querySelector("base"),Bl?Bl.getAttribute("href"):null}function P$(n){return new URL(n,document.baseURI).pathname}var i_=class{addToWindow(e){Rn.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new ie(5103,!1);return s},Rn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Rn.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Rn.frameworkStabilizers||(Rn.frameworkStabilizers=[]),Rn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?cr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},O$=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Wf=new W(""),tM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new ie(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(B(Wf),B(De))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),$l=class{constructor(e){this._doc=e}},e_="ng-app-id",nM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hi(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${e_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(e_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(e_,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(B(xt),B(yf),B(rw,8),B(Vt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),t_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},o_=/%COMP%/g,rM="%COMP%",F$=`_nghost-${rM}`,V$=`_ngcontent-${rM}`,L$=!0,j$=new W("",{providedIn:"root",factory:()=>L$});function U$(n){return V$.replace(o_,n)}function B$(n){return F$.replace(o_,n)}function iM(n,e){return e.map(t=>t.replace(o_,n))}var Jx=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Hi(c),this.defaultRenderer=new zl(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ir.ShadowDom&&(i=te(M({},i),{encapsulation:Ir.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Kf?s.applyToHost(r):s instanceof ql&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case Ir.Emulated:o=new Kf(u,d,i,this.appId,f,a,c,g);break;case Ir.ShadowDom:return new s_(u,d,r,i,a,c,this.nonce,g);default:o=new ql(u,d,i,f,a,c,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(B(tM),B(nM),B(yf),B(j$),B(xt),B(Vt),B(De),B(rw))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),zl=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(t_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Xx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Xx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=t_[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=t_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Cr.DashCase|Cr.Important)?e.style.setProperty(t,r,i&Cr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Cr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=cr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Xx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var s_=class extends zl{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=iM(i.id,i.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ql=class extends zl{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?iM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Kf=class extends ql{constructor(e,t,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=U$(u),this.hostAttr=B$(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},$$=(()=>{let e=class e extends $l{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(B(xt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),z$=(()=>{let e=class e extends $l{constructor(r){super(r),this.delegate=G(Dx,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(B(xt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),eM=["alt","control","meta","shift"],q$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},H$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},G$=(()=>{let e=class e extends $l{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),eM.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=q$[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),eM.forEach(a=>{if(a!==s){let c=H$[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(B(xt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function W$(){r_.makeCurrent()}function K$(){return new Qr}function Q$(){return WS(document),document}var Y$=[{provide:Vt,useValue:Ww},{provide:nw,useValue:W$,multi:!0},{provide:xt,useFactory:Q$,deps:[]}],sM=kw(Ix,"browser",Y$),Z$=new W(""),J$=[{provide:Ol,useClass:i_,deps:[]},{provide:Sw,useClass:Pf,deps:[De,Of,Ol]},{provide:Pf,useClass:Pf,deps:[De,Of,Ol]}],X$=[{provide:af,useValue:"root"},{provide:Qr,useFactory:K$,deps:[]},{provide:Wf,useClass:$$,multi:!0,deps:[xt,De,Vt]},{provide:Wf,useClass:G$,multi:!0,deps:[xt]},{provide:Wf,useClass:z$,multi:!0},Jx,nM,tM,{provide:ia,useExisting:Jx},{provide:ba,useClass:O$,deps:[]},[]],oM=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:yf,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(B(Z$,12))},e.\u0275mod=At({type:e}),e.\u0275inj=St({providers:[...X$,...J$],imports:[Sa,bx]});let n=e;return n})(),aM=(()=>{let e=class e{constructor(r){this._doc=r,this._dom=cr()}addTag(r,i=!1){return r?this._getOrCreateElement(r,i):null}addTags(r,i=!1){return r?r.reduce((s,o)=>(o&&s.push(this._getOrCreateElement(o,i)),s),[]):[]}getTag(r){return r&&this._doc.querySelector(`meta[${r}]`)||null}getTags(r){if(!r)return[];let i=this._doc.querySelectorAll(`meta[${r}]`);return i?[].slice.call(i):[]}updateTag(r,i){if(!r)return null;i=i||this._parseSelector(r);let s=this.getTag(i);return s?this._setMetaElementAttributes(r,s):this._getOrCreateElement(r,!0)}removeTag(r){this.removeTagElement(this.getTag(r))}removeTagElement(r){r&&this._dom.remove(r)}_getOrCreateElement(r,i=!1){if(!i){let a=this._parseSelector(r),c=this.getTags(a).filter(u=>this._containsAttributes(r,u))[0];if(c!==void 0)return c}let s=this._dom.createElement("meta");return this._setMetaElementAttributes(r,s),this._doc.getElementsByTagName("head")[0].appendChild(s),s}_setMetaElementAttributes(r,i){return Object.keys(r).forEach(s=>i.setAttribute(this._getMetaKeyMap(s),r[s])),i}_parseSelector(r){let i=r.name?"name":"property";return`${i}="${r[i]}"`}_containsAttributes(r,i){return Object.keys(r).every(s=>i.getAttribute(this._getMetaKeyMap(s))===r[s])}_getMetaKeyMap(r){return e4[r]||r}};e.\u0275fac=function(i){return new(i||e)(B(xt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),e4={httpEquiv:"http-equiv"},Dn=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(B(xt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Gs=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=B(t4),s},providedIn:"root"});let n=e;return n})(),t4=(()=>{let e=class e extends Gs{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case _n.NONE:return i;case _n.HTML:return Bi(i,"HTML")?Hn(i):sA(this._doc,String(i)).toString();case _n.STYLE:return Bi(i,"Style")?Hn(i):i;case _n.SCRIPT:if(Bi(i,"Script"))return Hn(i);throw new ie(5200,!1);case _n.URL:return Bi(i,"URL")?Hn(i):wf(String(i));case _n.RESOURCE_URL:if(Bi(i,"ResourceURL"))return Hn(i);throw new ie(5201,!1);default:throw new ie(5202,!1)}}bypassSecurityTrustHtml(r){return QS(r)}bypassSecurityTrustStyle(r){return YS(r)}bypassSecurityTrustScript(r){return ZS(r)}bypassSecurityTrustUrl(r){return JS(r)}bypassSecurityTrustResourceUrl(r){return XS(r)}};e.\u0275fac=function(i){return new(i||e)(B(xt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function l_(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ks=l_();function fM(n){Ks=n}var pM=/[&<>"']/,n4=new RegExp(pM.source,"g"),gM=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,r4=new RegExp(gM.source,"g"),i4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},cM=n=>i4[n];function On(n,e){if(e){if(pM.test(n))return n.replace(n4,cM)}else if(gM.test(n))return n.replace(r4,cM);return n}var s4=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function o4(n){return n.replace(s4,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var a4=/(^|[^\[])\^/g;function ze(n,e){let t=typeof n=="string"?n:n.source;e=e||"";let r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(a4,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function lM(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var Gl={exec:()=>null};function uM(n,e){let t=n.replace(/\|/g,(s,o,a)=>{let c=!1,u=o;for(;--u>=0&&a[u]==="\\";)c=!c;return c?"|":" |"}),r=t.split(/ \|/),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function Qf(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function c4(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function dM(n,e,t,r){let i=e.href,s=e.title?On(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:On(o)}}function l4(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var xa=class{options;rules;lexer;constructor(e){this.options=e||Ks}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Qf(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=l4(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let i=Qf(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=Qf(r.replace(/^ *>[ \t]?/gm,""),`
`);let i=this.lexer.state.top;this.lexer.state.top=!0;let s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",c="",u=!1;for(;e;){let d=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let f=t[2].split(`
`,1)[0].replace(/^\t+/,O=>" ".repeat(3*O.length)),g=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,c=f.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=f.slice(m),m+=t[1].length);let w=!1;if(!f&&/^ *$/.test(g)&&(a+=g+`
`,e=e.substring(g.length+1),d=!0),!d){let O=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),V=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),L=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),H=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){let X=e.split(`
`,1)[0];if(g=X,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),L.test(g)||H.test(g)||O.test(g)||V.test(e))break;if(g.search(/[^ ]/)>=m||!g.trim())c+=`
`+g.slice(m);else{if(w||f.search(/[^ ]/)>=4||L.test(f)||H.test(f)||V.test(f))break;c+=`
`+g}!w&&!g.trim()&&(w=!0),a+=X+`
`,e=e.substring(X.length+1),f=g.slice(m)}}s.loose||(u?s.loose=!0:/\n *\n *$/.test(a)&&(u=!0));let D=null,C;this.options.gfm&&(D=/^\[[ xX]\] /.exec(c),D&&(C=D[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!D,checked:C,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){let f=s.items[d].tokens.filter(m=>m.type==="space"),g=f.length>0&&f.some(m=>/\n.*\n/.test(m.raw));s.loose=g}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=uM(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of s)o.rows.push(uM(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:On(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let o=Qf(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=c4(t[2],"()");if(o>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),dM(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return dM(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,c,u=o,d=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+o);(i=f.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(c=[...a].length,i[3]||i[4]){u+=c;continue}else if((i[5]||i[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+d);let g=[...i[0]][0].length,m=e.slice(0,o+i.index+g+c);if(Math.min(o,c)%2){let D=m.slice(1,-1);return{type:"em",raw:m,text:D,tokens:this.lexer.inlineTokens(D)}}let w=m.slice(2,-2);return{type:"strong",raw:m,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=On(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=On(t[1]),i="mailto:"+r):(r=On(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=On(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=On(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=On(t[0]),{type:"text",raw:t[0],text:r}}}},u4=/^(?: *(?:\n|$))+/,d4=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,h4=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Kl=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,f4=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,mM=/(?:[*+-]|\d{1,9}[.)])/,yM=ze(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,mM).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),u_=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,p4=/^[^\n]+/,d_=/(?!\s*\])(?:\\.|[^\[\]\\])+/,g4=ze(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",d_).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),m4=ze(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,mM).getRegex(),Jf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",h_=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,y4=ze("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",h_).replace("tag",Jf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),vM=ze(u_).replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jf).getRegex(),v4=ze(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",vM).getRegex(),f_={blockquote:v4,code:d4,def:g4,fences:h4,heading:f4,hr:Kl,html:y4,lheading:yM,list:m4,newline:u4,paragraph:vM,table:Gl,text:p4},hM=ze("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jf).getRegex(),w4=te(M({},f_),{table:hM,paragraph:ze(u_).replace("hr",Kl).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",hM).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Jf).getRegex()}),_4=te(M({},f_),{html:ze(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",h_).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Gl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ze(u_).replace("hr",Kl).replace("heading",` *#{1,6} *[^
]`).replace("lheading",yM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),wM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,E4=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,_M=/^( {2,}|\\)\n(?!\s*$)/,I4=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ql="\\p{P}\\p{S}",b4=ze(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ql).getRegex(),D4=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,C4=ze(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ql).getRegex(),T4=ze("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ql).getRegex(),S4=ze("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ql).getRegex(),A4=ze(/\\([punct])/,"gu").replace(/punct/g,Ql).getRegex(),x4=ze(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),M4=ze(h_).replace("(?:-->|$)","-->").getRegex(),R4=ze("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",M4).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Zf=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,k4=ze(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Zf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),EM=ze(/^!?\[(label)\]\[(ref)\]/).replace("label",Zf).replace("ref",d_).getRegex(),IM=ze(/^!?\[(ref)\](?:\[\])?/).replace("ref",d_).getRegex(),N4=ze("reflink|nolink(?!\\()","g").replace("reflink",EM).replace("nolink",IM).getRegex(),p_={_backpedal:Gl,anyPunctuation:A4,autolink:x4,blockSkip:D4,br:_M,code:E4,del:Gl,emStrongLDelim:C4,emStrongRDelimAst:T4,emStrongRDelimUnd:S4,escape:wM,link:k4,nolink:IM,punctuation:b4,reflink:EM,reflinkSearch:N4,tag:R4,text:I4,url:Gl},P4=te(M({},p_),{link:ze(/^!?\[(label)\]\((.*?)\)/).replace("label",Zf).getRegex(),reflink:ze(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Zf).getRegex()}),a_=te(M({},p_),{escape:ze(wM).replace("])","~|])").getRegex(),url:ze(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),O4=te(M({},a_),{br:ze(_M).replace("{2,}","*").getRegex(),text:ze(a_.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),Yf={normal:f_,gfm:w4,pedantic:_4},Hl={normal:p_,gfm:a_,breaks:O4,pedantic:P4},ii=class n{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ks,this.options.tokenizer=this.options.tokenizer||new xa,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:Yf.normal,inline:Hl.normal};this.options.pedantic?(t.block=Yf.pedantic,t.inline=Hl.pedantic):this.options.gfm&&(t.block=Yf.gfm,this.options.breaks?t.inline=Hl.breaks:t.inline=Hl.gfm),this.tokenizer.rules=t}static get rules(){return{block:Yf,inline:Hl}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,c,u)=>c+"    ".repeat(u.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,c=e.slice(1),u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},c),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,c,u;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,u)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,f=e.slice(1),g;this.options.extensions.startInline.forEach(m=>{g=m.call({lexer:this},f),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),c=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},it=class{options;constructor(e){this.options=e||Ks}code(e,t,r){let i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+On(i)+'">'+(r?e:On(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:On(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){let i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){let r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){let i=lM(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){let i=lM(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}},Wl=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},si=class n{options;renderer;textRenderer;constructor(e){this.options=e||Ks,this.options.renderer=this.options.renderer||new it,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Wl}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{let o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,o4(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=s,a="",c="";for(let d=0;d<o.header.length;d++)c+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(c);let u="";for(let d=0;d<o.rows.length;d++){let f=o.rows[d];c="";for(let g=0;g<f.length;g++)c+=this.renderer.tablecell(this.parseInline(f[g].tokens),{header:!1,align:o.align[g]});u+=this.renderer.tablerow(c)}r+=this.renderer.table(a,u);continue}case"blockquote":{let o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{let o=s,a=o.ordered,c=o.start,u=o.loose,d="";for(let f=0;f<o.items.length;f++){let g=o.items[f],m=g.checked,w=g.task,D="";if(g.task){let C=this.renderer.checkbox(!!m);u?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=C+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=C+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:C+" "}):D+=C+" "}D+=this.parse(g.tokens,u),d+=this.renderer.listitem(D,w,!!m)}r+=this.renderer.list(d,a,c);continue}case"html":{let o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{let o=s;r+=t.text(o.text);break}case"html":{let o=s;r+=t.html(o.text);break}case"link":{let o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{let o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{let o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{let o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{let o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{let o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{let o=s;r+=t.text(o.text);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},Aa=class{options;constructor(e){this.options=e||Ks}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},c_=class{defaults=l_();options=this.setOptions;parse=this.#s(ii.lex,si.parse);parseInline=this.#s(ii.lexInline,si.parseInline);Parser=si;Renderer=it;TextRenderer=Wl;Lexer=ii;Tokenizer=xa;Hooks=Aa;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i=M({},r);if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let c=s.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){let s=this.defaults.renderer||new it(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.renderer[a],u=s[a];s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=u.apply(s,d)),f||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new xa(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,c=r.tokenizer[a],u=s[a];s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=u.apply(s,d)),f}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Aa;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.hooks[a],u=s[a];Aa.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(c.call(s,d)).then(g=>u.call(s,g));let f=c.call(s,d);return u.call(s,f)}:s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=u.apply(s,d)),f}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults=M(M({},this.defaults),i)}),this}setOptions(e){return this.defaults=M(M({},this.defaults),e),this}lexer(e,t){return ii.lex(e,t??this.defaults)}parser(e,t){return si.parse(e,t??this.defaults)}#s(e,t){return(r,i)=>{let s=M({},i),o=M(M({},this.defaults),s);this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let a=this.#l(!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=t(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return a(c)}}}#l(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+On(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Ws=new c_;function xe(n,e){return Ws.parse(n,e)}xe.options=xe.setOptions=function(n){return Ws.setOptions(n),xe.defaults=Ws.defaults,fM(xe.defaults),xe};xe.getDefaults=l_;xe.defaults=Ks;xe.use=function(...n){return Ws.use(...n),xe.defaults=Ws.defaults,fM(xe.defaults),xe};xe.walkTokens=function(n,e){return Ws.walkTokens(n,e)};xe.parseInline=Ws.parseInline;xe.Parser=si;xe.parser=si.parse;xe.Renderer=it;xe.TextRenderer=Wl;xe.Lexer=ii;xe.lexer=ii.lex;xe.Tokenizer=xa;xe.Hooks=Aa;xe.parse=xe;var IJ=xe.options,bJ=xe.setOptions,DJ=xe.use,CJ=xe.walkTokens,TJ=xe.parseInline;var SJ=si.parse,AJ=ii.lex;var F4=["*"],V4="Copy",L4="Copied",j4=(()=>{let e=class e{constructor(){this._buttonClick$=new Ue,this.copied$=this._buttonClick$.pipe(Ke(()=>dl(ae(!0),hy(3e3).pipe(hl(!1)))),fl(),zo(1)),this.copiedText$=this.copied$.pipe(Wr(!1),oe(r=>r?L4:V4))}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ae({type:e,selectors:[["markdown-clipboard"]],standalone:!0,features:[Pl],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,s){i&1&&(k(0,"button",0),jt(1,"async"),Oe("click",function(){return s.onCopyToClipboardClick()}),U(2),jt(3,"async"),F()),i&2&&(ga("copied",Pn(1,3,s.copied$)),j(2),Ve(Pn(3,5,s.copiedText$)))},dependencies:[jx],encapsulation:2,changeDetection:0});let n=e;return n})(),U4=new W("CLIPBOARD_OPTIONS");var g_=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(g_||{}),DM=new W("MARKED_EXTENSIONS"),m_=new W("MARKED_OPTIONS"),B4="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",$4="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",z4="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",q4="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",H4="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",G4="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",CM=new W("SECURITY_CONTEXT");var Zt=(()=>{let e=class e{get options(){return this._options}set options(r){this._options=M(M({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,s,o,a,c,u){this.clipboardOptions=r,this.extensions=i,this.platform=o,this.securityContext=a,this.http=c,this.sanitizer=u,this.DEFAULT_MARKED_OPTIONS={renderer:new it},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Ue,this.reload$=this._reload$.asObservable(),this.options=s}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:u}=i,d=M(M({},this.options),i.markedOptions),f=d.renderer||this.renderer||new it;this.extensions&&(this.renderer=this.extendsRendererForExtensions(f)),c&&(this.renderer=this.extendsRendererForMermaid(f));let g=this.trimIndentation(r),m=s?this.decodeHtml(g):g,w=a?this.parseEmoji(m):m,D=this.parseMarked(w,d,o);return(u?D:this.sanitizer.sanitize(this.securityContext,D))||""}render(r,i=this.DEFAULT_RENDER_OPTIONS,s){let{clipboard:o,clipboardOptions:a,katex:c,katexOptions:u,mermaid:d,mermaidOptions:f}=i;c&&this.renderKatex(r,M(M({},this.DEFAULT_KATEX_OPTIONS),u)),d&&this.renderMermaid(r,M(M({},this.DEFAULT_MERMAID_OPTIONS),f)),o&&this.renderClipboard(r,s,M(M(M({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(G4);return this.http.get(r,{responseType:"text"}).pipe(oe(i=>this.handleExtension(r,i)))}highlight(r){if(!qi(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,s=>s.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!qi(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&xe.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let s=r.code;return r.code=function(o,a,c){return a==="mermaid"?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let s=r.lastIndexOf("://"),o=s>-1?r.substring(s+4):r,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",u=c.lastIndexOf("."),d=u>-1?c.substring(u+1):"";return d&&d!=="md"?"```"+d+`
`+i+"\n```":i}parseMarked(r,i,s=!1){if(i.renderer){let o=M({},i.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,xe.use({renderer:o})}return s?xe.parseInline(r,i):xe.parse(r,i)}parseEmoji(r){if(!qi(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(B4);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(qi(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error($4);renderMathInElement(r,i)}}renderClipboard(r,i,s){if(!qi(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(q4);if(!i)throw new Error(H4);let{buttonComponent:o,buttonTemplate:a}=s,c=r.querySelectorAll("pre");for(let u=0;u<c.length;u++){let d=c.item(u),f=document.createElement("div");f.style.position="relative",d.parentNode.insertBefore(f,d),f.appendChild(d);let g=document.createElement("div");g.classList.add("markdown-clipboard-toolbar"),g.style.position="absolute",g.style.top=".5em",g.style.right=".5em",g.style.zIndex="1",f.insertAdjacentElement("beforeend",g),f.onmouseenter=()=>g.classList.add("hover"),f.onmouseleave=()=>g.classList.remove("hover");let m;if(o){let D=i.createComponent(o);m=D.hostView,D.changeDetectorRef.markForCheck()}else if(a)m=i.createEmbeddedView(a);else{let D=i.createComponent(j4);m=D.hostView,D.changeDetectorRef.markForCheck()}let w;m.rootNodes.forEach(D=>{g.appendChild(D),w=new ClipboardJS(D,{text:()=>d.innerText})}),m.onDestroy(()=>w.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!qi(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(z4);let s=r.querySelectorAll(".mermaid");s.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:s}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(s=>{let o=i;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(i)&&(i=o),o?s.substring(o):s}).join(`
`)}};e.\u0275fac=function(i){return new(i||e)(B(U4,8),B(DM,8),B(m_,8),B(Vt),B(CM),B(ri,8),B(Gs))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Kn=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,s){this.element=r,this.markdownService=i,this.viewContainerRef=s,this.error=new Je,this.load=new Je,this.ready=new Je,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Ue}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(gl(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return b(this,null,function*(){let s={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,s);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,g_.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,g_.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++){let a=i instanceof Array?i:[i];s.item(o).classList.add(...a)}}setPluginOptions(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(i).forEach(a=>{let c=i[a];if(c){let u=this.toLispCase(a);s.item(o).setAttribute(u,c.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let s=r.toString();for(let o=0,a=i.length;o<a;o++)s=s.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return s.slice(0,1)==="-"&&(s=s.slice(1)),s}};e.\u0275fac=function(i){return new(i||e)(q(kt),q(Zt),q(En))},e.\u0275cmp=Ae({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Vi,Pl],ngContentSelectors:F4,decls:1,vars:0,template:function(i,s){i&1&&(ux(),dx(0))},encapsulation:2});let n=e;return n})();function W4(n){return[Zt,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],{provide:DM,useValue:n?.markedExtensions??[]},{provide:CM,useValue:n?.sanitize??_n.HTML}]}var TM=(()=>{let e=class e{static forRoot(r){return{ngModule:e,providers:[W4(r)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=At({type:e}),e.\u0275inj=St({imports:[Sa]});let n=e;return n})(),bM;(function(n){let e;(function(i){i.Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox"})(e=n.SecurityLevel||(n.SecurityLevel={}));let t;(function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"})(t=n.Theme||(n.Theme={}));let r;(function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(r=n.LogLevel||(n.LogLevel={}))})(bM||(bM={}));var PM=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(q(Wn),q(kt))},e.\u0275dir=Kt({type:e});let n=e;return n})(),Q4=(()=>{let e=class e extends PM{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=xl(e)))(s||e)}})(),e.\u0275dir=Kt({type:e,features:[wt]});let n=e;return n})(),OM=new W("");var Y4={provide:OM,useExisting:ca(()=>Pa),multi:!0};function Z4(){let n=cr()?cr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var J4=new W(""),Pa=(()=>{let e=class e extends PM{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Z4())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(q(Wn),q(kt),q(J4,8))},e.\u0275dir=Kt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Oe("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Mf([Y4]),wt]});let n=e;return n})();var FM=new W(""),VM=new W("");function LM(n){return n!=null}function jM(n){return $i(n)?Se(n):n}function UM(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function BM(n,e){return e.map(t=>t(n))}function X4(n){return!n.validate}function $M(n){return n.map(e=>X4(e)?e:t=>e.validate(t))}function ez(n){if(!n)return null;let e=n.filter(LM);return e.length==0?null:function(t){return UM(BM(t,e))}}function v_(n){return n!=null?ez($M(n)):null}function tz(n){if(!n)return null;let e=n.filter(LM);return e.length==0?null:function(t){let r=BM(t,e).map(jM);return dy(r).pipe(oe(UM))}}function w_(n){return n!=null?tz($M(n)):null}function SM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nz(n){return n._rawValidators}function rz(n){return n._rawAsyncValidators}function y_(n){return n?Array.isArray(n)?n:[n]:[]}function ep(n,e){return Array.isArray(n)?n.includes(e):n===e}function AM(n,e){let t=y_(e);return y_(n).forEach(i=>{ep(t,i)||t.push(i)}),t}function xM(n,e){return y_(e).filter(t=>!ep(n,t))}var tp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=v_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=w_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},ka=class extends tp{get formDirective(){return null}get path(){return null}},tu=class extends tp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},np=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},iz={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},cX=te(M({},iz),{"[class.ng-submitted]":"isSubmitted"}),op=(()=>{let e=class e extends np{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(tu,2))},e.\u0275dir=Kt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&ga("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[wt]});let n=e;return n})(),zM=(()=>{let e=class e extends np{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(q(ka,10))},e.\u0275dir=Kt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&ga("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[wt]});let n=e;return n})();var Yl="VALID",Xf="INVALID",Ma="PENDING",Zl="DISABLED",Na=class{},rp=class extends Na{constructor(e,t){super(),this.value=e,this.source=t}},Xl=class extends Na{constructor(e,t){super(),this.pristine=e,this.source=t}},eu=class extends Na{constructor(e,t){super(),this.touched=e,this.source=t}},Ra=class extends Na{constructor(e,t){super(),this.status=e,this.source=t}};function qM(n){return(ap(n)?n.validators:n)||null}function sz(n){return Array.isArray(n)?v_(n):n||null}function HM(n,e){return(ap(e)?e.asyncValidators:n)||null}function oz(n){return Array.isArray(n)?w_(n):n||null}function ap(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function az(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ie(1e3,"");if(!r[t])throw new ie(1001,"")}function cz(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ie(1002,"")})}var ip=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Fl(()=>this.statusReactive()),this.statusReactive=Rl(void 0),this._pristine=Fl(()=>this.pristineReactive()),this.pristineReactive=Rl(!0),this._touched=Fl(()=>this.touchedReactive()),this.touchedReactive=Rl(!1),this._events=new Ue,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ar(this.statusReactive)}set status(e){ar(()=>this.statusReactive.set(e))}get valid(){return this.status===Yl}get invalid(){return this.status===Xf}get pending(){return this.status==Ma}get disabled(){return this.status===Zl}get enabled(){return this.status!==Zl}get pristine(){return ar(this.pristineReactive)}set pristine(e){ar(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ar(this.touchedReactive)}set touched(e){ar(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(AM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xM(e,this._rawAsyncValidators))}hasValidator(e){return ep(this._rawValidators,e)}hasAsyncValidator(e){return ep(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new eu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new eu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Xl(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Xl(!0,r))}markAsPending(e={}){this.status=Ma;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ra(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Zl,this.errors=null,this._forEachChild(i=>{i.disable(te(M({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rp(this.value,r)),this._events.next(new Ra(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Yl,this._forEachChild(r=>{r.enable(te(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yl||this.status===Ma)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rp(this.value,t)),this._events.next(new Ra(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zl:Yl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ma,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=jM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ra(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?Zl:this.errors?Xf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ma)?Ma:this._anyControlsHaveStatus(Xf)?Xf:Yl}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Xl(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new eu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ap(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=sz(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=oz(this._rawAsyncValidators)}},sp=class extends ip{constructor(e,t,r){super(qM(t),HM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){cz(this,!0,e),Object.keys(e).forEach(r=>{az(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var __=new W("CallSetDisabledState",{providedIn:"root",factory:()=>E_}),E_="always";function lz(n,e){return[...e.path,n]}function GM(n,e,t=E_){WM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),dz(n,e),fz(n,e),hz(n,e),uz(n,e)}function MM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function uz(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function WM(n,e){let t=nz(n);e.validator!==null?n.setValidators(SM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=rz(n);e.asyncValidator!==null?n.setAsyncValidators(SM(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();MM(e._rawValidators,i),MM(e._rawAsyncValidators,i)}function dz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&KM(n,e)})}function hz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&KM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function KM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function fz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function pz(n,e){n==null,WM(n,e)}function gz(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function mz(n){return Object.getPrototypeOf(n.constructor)===Q4}function yz(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function vz(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Pa?t=s:mz(s)?r=s:i=s}),i||r||t||null}var wz={provide:ka,useExisting:ca(()=>I_)},Jl=Promise.resolve(),I_=(()=>{let e=class e extends ka{get submitted(){return ar(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Fl(()=>this.submittedReactive()),this.submittedReactive=Rl(!1),this._directives=new Set,this.ngSubmit=new Je,this.form=new sp({},v_(r),w_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Jl.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),GM(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Jl.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Jl.then(()=>{let i=this._findContainer(r.path),s=new sp({});pz(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Jl.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Jl.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),yz(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(q(FM,10),q(VM,10),q(__,8))},e.\u0275dir=Kt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Oe("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Mf([wz]),wt]});let n=e;return n})();function RM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function kM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _z=class extends ip{constructor(e=null,t,r){super(qM(t),HM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ap(t)&&(t.nonNullable||t.initialValueIsDefault)&&(kM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){RM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){RM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){kM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Ez={provide:tu,useExisting:ca(()=>nu)},NM=Promise.resolve(),nu=(()=>{let e=class e extends tu{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new _z,this._registered=!1,this.name="",this.update=new Je,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=vz(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),gz(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){GM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){NM.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Uf(i);NM.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?lz(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(q(ka,9),q(FM,10),q(VM,10),q(OM,10),q(Tr,8),q(__,8))},e.\u0275dir=Kt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Mf([Ez]),wt,Vi]});let n=e;return n})(),QM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Kt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var Iz=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=At({type:e}),e.\u0275inj=St({});let n=e;return n})();var YM=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:__,useValue:r.callSetDisabledState??E_}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=At({type:e}),e.\u0275inj=St({imports:[Iz]});let n=e;return n})();var he={production:!0,host:"https://publichome.page",port:"8888",eventBusURL:"https://publichome.page:8888/eventbus/",defaultFirm:"SS",redirect_url:"https://publichome.page/u",client_id:"8c987bdba61457c20417",client_secret:"DONT_SEND_FROM_FRONT_END",gh_default_user_repo:"publichomepage",gh_dr_folder:"my/main",gh_dr_url:"https://raw.githubusercontent.com",gh_api_url:"https://api.github.com",gh_auth_url:"https://github.com/login/oauth/authorize",gh_private_dr_folder:"my",supabaseUrl:"https://hnqbvkzmfdcshdgnhipy.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhucWJ2a3ptZmRjc2hkZ25oaXB5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjkyMjAwOTAsImV4cCI6MjA0NDc5NjA5MH0.3PlLXR6ljTwIWsrMO8QT2fvy0VIGKsXLfahjSgBIN7U",pineconeConfig:{apiKey:"pcsk_3Akhgu_3pS3hHzA7fBJmnHNVg9e7grZFj8pjvPtiQ9uCVA2n2UURFEmrZjXy1fi4XQSwEP",index:"example-index"},openApiKey:"ABCD",firebaseConfig:{apiKey:"AIzaSyBdEWJQNGtrtL88aX5sE2VGEqYpWLXtpFQ",authDomain:"publichomepage-b872d.firebaseapp.com",projectId:"publichomepage-b872d",storageBucket:"publichomepage-b872d.appspot.com",messagingSenderId:"850538578524",appId:"1:850538578524:web:56c70f38ac285bffd5dc99",measurementId:"G-TRBD0HQFWM"}};var Jt=(()=>{let e=class e{constructor(){this._event=new Ue,this.event$=this._event.asObservable()}send(r){this._event.next(r)}observable(){return this.event$}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function bz(n,e){n&1&&ce(0,"app-footer")}var qe=class qe{constructor(e){this.messaging=e,this.sponserVisible=!0,this.footerVisible=!0,localStorage.setItem("debug","true"),qe.iconsColorByKey.set("facebook","#3b5998"),qe.iconsColorByKey.set("youtube","#ed302f"),qe.iconsColorByKey.set("discord","#7289DA"),qe.iconsColorByKey.set("linkedin","#0082ca"),qe.iconsColorByKey.set("github","#bcbcbc"),qe.iconsColorByKey.set("link","green"),this.messaging.event$.subscribe(t=>{let r=t;switch(r.cmd){case"host":r.file=="IaComponent"&&(this.sponserVisible=!1,this.footerVisible=!1);break;case"UserContext":break;default:break}})}loadScript(e){let t=document.body,r=document.createElement("script");r.innerHTML="",r.src=e,r.async=!1,t.appendChild(r)}};qe.title="Public Homepage",qe.ghUserLoaded=he.gh_default_user_repo,qe.readme_home=`${he.gh_dr_url}/${he.gh_default_user_repo}/${he.gh_dr_folder}/README.md`,qe.user_contacts=`${he.gh_dr_url}/${he.gh_default_user_repo}/${he.gh_dr_folder}/contacts.md`,qe.fab_questions_list2=`${he.gh_dr_url}/${he.gh_default_user_repo}/${he.gh_dr_folder}/questions/ds-list2.md`,qe.YOUR_READ_ME="",qe.ghUser={name:qe.title,blog:"/"},qe.userContext={username:"",status:"0",directory:{},youtube_links:new Set,leetcode_links:new Set,assessment:{}},qe.INTERNAL_FOLDERS=["my","roadmap","questions","articles","faqs","coding","credits","README.md","contacts.md","assessments"],qe.homeUser={name:qe.title,blog:"/"},qe.navLinks=[{link:"#about",text:"About"}],qe.iconsColorByKey=new Map,qe.contactLinksByKey=new Map,qe.contactTextsByKey=new Map,qe.\u0275fac=function(t){return new(t||qe)(q(Jt))},qe.\u0275cmp=Ae({type:qe,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,r){t&1&&(ce(0,"app-navbar")(1,"router-outlet"),Ce(2,bz,1,0,"app-footer",0)),t&2&&(j(2),ee("ngIf",r.footerVisible))}});var ne=qe;function Dz(n,e){n&1&&(k(0,"a",11)(1,"i",12),U(2,"\xA0Chat"),F()())}function Cz(n,e){if(n&1&&(k(0,"li",13)(1,"a",14),U(2),F()()),n&2){let t=e.$implicit;j(),ee("href",t.link,dt),j(),Ve(t.text)}}var ZM=(()=>{let e=class e{constructor(r,i){this.cdRef=r,this.messaging=i,this.navUser=ne.homeUser,this.photoUrl="",this.navLinks=ne.navLinks,this.contactsFileFound=!1,this.userLoaded=ne.ghUserLoaded,this.isHomeGHUser=!0,i.event$.subscribe(s=>{let o=s;switch(this.userLoaded=ne.ghUserLoaded,this.isHomeGHUser=this.userLoaded==he.gh_default_user_repo,o.cmd){case"UserDirectory":this.isHomeGHUser?this.navLinks.push({link:"#projects",text:"Solutions"}):this.navLinks.forEach(c=>{let u=ne.navLinks.indexOf(c);ne.navLinks[u].link=ne.ghUser.blog}),this.navUser=ne.ghUser,ne.userContext.directory.folders.forEach(c=>{let u=c.charAt(0).toUpperCase()+c.slice(1),d=c.toLowerCase();d.endsWith("contacts")||this.navLinks.push({link:this.getNavLink(d),text:u})}),this.addAContactLink();break;case"PageFile":switch(o.file){case"HomeGHUser":break;default:break}break;default:break}})}getNavLink(r){return this.isHomeGHUser?"/"+r:`/${ne.userContext.username}/${r}`}addAContactLink(){let r=ne.userContext.directory;r.files&&r.files.includes("contacts.md")?this.navLinks.push({link:this.getNavLink("contacts"),text:"Contacts"}):this.navLinks.push({link:"#about",text:"Contact"})}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(q(Tr),q(Jt))},e.\u0275cmp=Ae({type:e,selectors:[["app-navbar"]],decls:15,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container"],["href","/"],[1,"fa-solid","fa-link",2,"color","green"],[1,"navbar-brand",3,"href"],["href","/chat",4,"ngIf"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav","navbar-nav","ml-auto"],["class","nav-item",4,"ngFor","ngForOf"],["href","/chat"],[1,"fa-solid","fa-bolt","lightning-text"],[1,"nav-item"],[1,"nav-link","js-scroll-trigger",3,"href"]],template:function(i,s){i&1&&(k(0,"nav",0)(1,"div",1)(2,"span")(3,"a",2),ce(4,"i",3),F(),k(5,"a",4)(6,"b"),U(7),F(),Ce(8,Dz,3,0,"a",5),F()(),k(9,"button",6),ce(10,"span",7),F(),k(11,"div",8)(12,"ul",9),Ce(13,Cz,3,2,"li",10),jt(14,"slice"),F()()()()),i&2&&(j(5),ee("href",s.userLoaded,dt),j(2),Lt("\xA0",s.navUser.name,""),j(),ee("ngIf",s.isHomeGHUser),j(5),ee("ngForOf",Ea(14,4,s.navLinks,0,7)))},dependencies:[Qt,Yt,Ta],styles:["@keyframes _ngcontent-%COMP%_blink{0%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.2)}to{opacity:1;transform:scale(1)}}.lightning-text[_ngcontent-%COMP%]{font-size:.5em;color:#ff4500;text-transform:lowercase;margin-left:5px;animation:_ngcontent-%COMP%_blink 2s infinite}"]});let n=e;return n})();var ve="primary",yu=Symbol("RouteTitle"),A_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ua(n){return new A_(n)}function Tz(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Sz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ar(n[t],e[t]))return!1;return!0}function Ar(n,e){let t=n?x_(n):void 0,r=e?x_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!cR(n[i],e[i]))return!1;return!0}function x_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function cR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function lR(n){return n.length>0?n[n.length-1]:null}function Zi(n){return uy(n)?n:$i(n)?Se(Promise.resolve(n)):ae(n)}var Az={exact:dR,subset:hR},uR={exact:xz,subset:Mz,ignored:()=>!0};function JM(n,e,t){return Az[t.paths](n.root,e.root,t.matrixParams)&&uR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function xz(n,e){return Ar(n,e)}function dR(n,e,t){if(!Zs(n.segments,e.segments)||!up(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!dR(n.children[r],e.children[r],t))return!1;return!0}function Mz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cR(n[t],e[t]))}function hR(n,e,t){return fR(n,e,e.segments,t)}function fR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Zs(i,t)||e.hasChildren()||!up(i,t,r))}else if(n.segments.length===t.length){if(!Zs(n.segments,t)||!up(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!hR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Zs(n.segments,i)||!up(n.segments,i,r)||!n.children[ve]?!1:fR(n.children[ve],e,s,r)}}function up(n,e,t){return e.every((r,i)=>uR[t](n[i].parameters,r.parameters))}var ai=class{constructor(e=new je([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ua(this.queryParams),this._queryParamMap}toString(){return Nz.serialize(this)}},je=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dp(this)}},Ys=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ua(this.parameters),this._parameterMap}toString(){return gR(this)}};function Rz(n,e){return Zs(n,e)&&n.every((t,r)=>Ar(t.parameters,e[r].parameters))}function Zs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function kz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ve&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ve&&(t=t.concat(e(i,r)))}),t}var vu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new Ba,providedIn:"root"});let n=e;return n})(),Ba=class{parse(e){let t=new R_(e);return new ai(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ru(e.root,!0)}`,r=Fz(e.queryParams),i=typeof e.fragment=="string"?`#${Pz(e.fragment)}`:"";return`${t}${r}${i}`}},Nz=new Ba;function dp(n){return n.segments.map(e=>gR(e)).join("/")}function ru(n,e){if(!n.hasChildren())return dp(n);if(e){let t=n.children[ve]?ru(n.children[ve],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ve&&r.push(`${i}:${ru(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=kz(n,(r,i)=>i===ve?[ru(n.children[ve],!1)]:[`${i}:${ru(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ve]!=null?`${dp(n)}/${t[0]}`:`${dp(n)}/(${t.join("//")})`}}function pR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cp(n){return pR(n).replace(/%3B/gi,";")}function Pz(n){return encodeURI(n)}function M_(n){return pR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hp(n){return decodeURIComponent(n)}function XM(n){return hp(n.replace(/\+/g,"%20"))}function gR(n){return`${M_(n.path)}${Oz(n.parameters)}`}function Oz(n){return Object.entries(n).map(([e,t])=>`;${M_(e)}=${M_(t)}`).join("")}function Fz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${cp(t)}=${cp(i)}`).join("&"):`${cp(t)}=${cp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Vz=/^[^\/()?;#]+/;function D_(n){let e=n.match(Vz);return e?e[0]:""}var Lz=/^[^\/()?;=#]+/;function jz(n){let e=n.match(Lz);return e?e[0]:""}var Uz=/^[^=?&#]+/;function Bz(n){let e=n.match(Uz);return e?e[0]:""}var $z=/^[^&#]+/;function zz(n){let e=n.match($z);return e?e[0]:""}var R_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ve]=new je(e,t)),r}parseSegment(){let e=D_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new Ys(hp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=jz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=D_(this.remaining);i&&(r=i,this.capture(r))}e[hp(t)]=hp(r)}parseQueryParam(e){let t=Bz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=zz(this.remaining);o&&(r=o,this.capture(r))}let i=XM(t),s=XM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=D_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ie(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ve);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ve]:new je([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function mR(n){return n.segments.length>0?new je([],{[ve]:n}):n}function yR(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=yR(i);if(r===ve&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new je(n.segments,e);return qz(t)}function qz(n){if(n.numberOfChildren===1&&n.children[ve]){let e=n.children[ve];return new je(n.segments.concat(e.segments),e.children)}return n}function lu(n){return n instanceof ai}function Hz(n,e,t=null,r=null){let i=vR(n);return wR(i,e,t,r)}function vR(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new je(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=mR(r);return e??i}function wR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return C_(i,i,i,t,r);let s=Gz(e);if(s.toRoot())return C_(i,i,new je([],{}),t,r);let o=Wz(s,i,n),a=o.processChildren?ou(o.segmentGroup,o.index,s.commands):ER(o.segmentGroup,o.index,s.commands);return C_(i,o.segmentGroup,a,t,r)}function fp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function uu(n){return typeof n=="object"&&n!=null&&n.outlets}function C_(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let o;n===e?o=t:o=_R(n,e,t);let a=mR(yR(o));return new ai(a,s,i)}function _R(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=_R(s,e,t)}),new je(n.segments,r)}var pp=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fp(r[0]))throw new ie(4003,!1);let i=r.find(uu);if(i&&i!==lR(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Gz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new pp(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new pp(t,e,r)}var Va=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Wz(n,e,t){if(n.isAbsolute)return new Va(e,!0,0);if(!t)return new Va(e,!1,NaN);if(t.parent===null)return new Va(t,!0,0);let r=fp(n.commands[0])?0:1,i=t.segments.length-1+r;return Kz(t,i,n.numberOfDoubleDots)}function Kz(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new Va(r,!1,i-s)}function Qz(n){return uu(n[0])?n[0].outlets:{[ve]:n}}function ER(n,e,t){if(n??=new je([],{}),n.segments.length===0&&n.hasChildren())return ou(n,e,t);let r=Yz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new je(n.segments.slice(0,r.pathIndex),{});return s.children[ve]=new je(n.segments.slice(r.pathIndex),n.children),ou(s,0,i)}else return r.match&&i.length===0?new je(n.segments,{}):r.match&&!n.hasChildren()?k_(n,e,t):r.match?ou(n,0,i):k_(n,e,t)}function ou(n,e,t){if(t.length===0)return new je(n.segments,{});{let r=Qz(t),i={};if(Object.keys(r).some(s=>s!==ve)&&n.children[ve]&&n.numberOfChildren===1&&n.children[ve].segments.length===0){let s=ou(n.children[ve],e,t);return new je(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=ER(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new je(n.segments,i)}}function Yz(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(uu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!tR(c,u,o))return s;r+=2}else{if(!tR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function k_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(uu(s)){let c=Zz(s.outlets);return new je(r,c)}if(i===0&&fp(t[0])){let c=n.segments[e];r.push(new Ys(c.path,eR(t[0]))),i++;continue}let o=uu(s)?s.outlets[ve]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&fp(a)?(r.push(new Ys(o,eR(a))),i+=2):(r.push(new Ys(o,{})),i++)}return new je(r,{})}function Zz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=k_(new je([],{}),0,r))}),e}function eR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tR(n,e,t){return n==t.path&&Ar(e,t.parameters)}var au="imperative",Nt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Nt||{}),Qn=class{constructor(e,t){this.id=e,this.url=t}},$a=class extends Qn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Nt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ci=class extends Qn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Nt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Vn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Vn||{}),gp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(gp||{}),oi=class extends Qn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Nt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Yi=class extends Qn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Nt.NavigationSkipped}},du=class extends Qn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Nt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mp=class extends Qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Nt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},N_=class extends Qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Nt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},P_=class extends Qn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Nt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},O_=class extends Qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Nt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},F_=class extends Qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Nt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},V_=class{constructor(e){this.route=e,this.type=Nt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},L_=class{constructor(e){this.route=e,this.type=Nt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},j_=class{constructor(e){this.snapshot=e,this.type=Nt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},U_=class{constructor(e){this.snapshot=e,this.type=Nt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},B_=class{constructor(e){this.snapshot=e,this.type=Nt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$_=class{constructor(e){this.snapshot=e,this.type=Nt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yp=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Nt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},hu=class{},za=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Jz(n,e){return n.providers&&!n._injector&&(n._injector=Tf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ur(n){return n.outlet||ve}function Xz(n,e){let t=n.filter(r=>ur(r)===e);return t.push(...n.filter(r=>ur(r)!==e)),t}function wu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var z_=class{get injector(){return wu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new _u(this.rootInjector),this.attachRef=null}},_u=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new z_(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(B(ln))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),vp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=q_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=q_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=H_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return H_(e,this._root).map(t=>t.value)}};function q_(n,e){if(n===e.value)return e;for(let t of e.children){let r=q_(n,t);if(r)return r}return null}function H_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=H_(n,t);if(r.length)return r.unshift(e),r}return[]}var Fn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var wp=class extends vp{constructor(e,t){super(e),this.snapshot=t,e0(this,e)}toString(){return this.snapshot.toString()}};function IR(n){let e=e3(n),t=new Ft([new Ys("",{})]),r=new Ft({}),i=new Ft({}),s=new Ft({}),o=new Ft(""),a=new Cn(t,r,s,o,i,ve,n,e.root);return a.snapshot=e.root,new wp(new Fn(a,[]),e)}function e3(n){let e={},t={},r={},i="",s=new La([],e,r,i,t,ve,n,null,{});return new Ep("",new Fn(s,[]))}var Cn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(u=>u[yu]))??ae(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>Ua(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>Ua(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _p(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),i?.data),n._resolvedData)}:r={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},i&&DR(i)&&(r.resolve[yu]=i.title),r}var La=class{get title(){return this.data?.[yu]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ua(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ua(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ep=class extends vp{constructor(e,t){super(t),this.url=e,e0(this,t)}toString(){return bR(this._root)}};function e0(n,e){e.value._routerState=n,e.children.forEach(t=>e0(n,t))}function bR(n){let e=n.children.length>0?` { ${n.children.map(bR).join(", ")} } `:"";return`${n.value}${e}`}function T_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ar(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ar(e.params,t.params)||n.paramsSubject.next(t.params),Sz(e.url,t.url)||n.urlSubject.next(t.url),Ar(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function G_(n,e){let t=Ar(n.params,e.params)&&Rz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||G_(n.parent,e.parent))}function DR(n){return typeof n.title=="string"||n.title===null}var t0=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ve,this.activateEvents=new Je,this.deactivateEvents=new Je,this.attachEvents=new Je,this.detachEvents=new Je,this.parentContexts=G(_u),this.location=G(En),this.changeDetector=G(Tr),this.inputBinder=G(Tp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new W_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Kt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Vi]});let n=e;return n})(),W_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Cn?this.route:e===_u?this.childContexts:this.parent.get(e,t)}},Tp=new W(""),nR=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=ul([i.queryParams,i.params,i.data]).pipe(Ke(([o,a,c],u)=>(c=M(M(M({},o),a),c),u===0?ae(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Cx(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function t3(n,e,t){let r=fu(n,e._root,t?t._root:void 0);return new wp(r,e)}function fu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=n3(n,e,t);return new Fn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>fu(n,a)),o}}let r=r3(e.value),i=e.children.map(s=>fu(n,s));return new Fn(r,i)}}function n3(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return fu(n,r,i);return fu(n,r)})}function r3(n){return new Cn(new Ft(n.url),new Ft(n.params),new Ft(n.queryParams),new Ft(n.fragment),new Ft(n.data),n.outlet,n.component,n)}var pu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},CR="ngNavigationCancelingError";function Ip(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=lu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=TR(!1,Vn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function TR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[CR]=!0,t.cancellationCode=e,t}function i3(n){return SR(n)&&lu(n.url)}function SR(n){return!!n&&n[CR]}var s3=(n,e,t,r)=>oe(i=>(new K_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),K_=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),T_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fa(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fa(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new $_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new U_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(T_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),T_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},bp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ja=class{constructor(e,t){this.component=e,this.route=t}};function o3(n,e,t){let r=n._root,i=e?e._root:null;return iu(r,i,t,[r.value])}function a3(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ha(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!OT(n)?n:e.get(n):r}function iu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fa(e);return n.children.forEach(o=>{c3(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>cu(a,t.getContext(o),i)),i}function c3(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=l3(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new bp(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?iu(n,e,a?a.children:null,r,i):iu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ja(a.outlet.component,o))}else o&&cu(e,a,i),i.canActivateChecks.push(new bp(r)),s.component?iu(n,null,a?a.children:null,r,i):iu(n,null,t,r,i);return i}function l3(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Zs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zs(n.url,e.url)||!Ar(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!G_(n,e)||!Ar(n.queryParams,e.queryParams);case"paramsChange":default:return!G_(n,e)}}function cu(n,e,t){let r=Fa(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?cu(o,e.children.getContext(s),t):cu(o,null,t):cu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ja(e.outlet.component,i)):t.canDeactivateChecks.push(new ja(null,i)):t.canDeactivateChecks.push(new ja(null,i))}function Eu(n){return typeof n=="function"}function u3(n){return typeof n=="boolean"}function d3(n){return n&&Eu(n.canLoad)}function h3(n){return n&&Eu(n.canActivate)}function f3(n){return n&&Eu(n.canActivateChild)}function p3(n){return n&&Eu(n.canDeactivate)}function g3(n){return n&&Eu(n.canMatch)}function AR(n){return n instanceof qr||n?.name==="EmptyError"}var lp=Symbol("INITIAL_VALUE");function qa(){return Ke(n=>ul(n.map(e=>e.pipe(Gr(1),Wr(lp)))).pipe(oe(e=>{for(let t of e)if(t!==!0){if(t===lp)return lp;if(t===!1||m3(t))return t}return!0}),Ct(e=>e!==lp),Gr(1)))}function m3(n){return lu(n)||n instanceof pu}function y3(n,e){return mt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ae(te(M({},t),{guardsResult:!0})):v3(o,r,i,n).pipe(mt(a=>a&&u3(a)?w3(r,s,n,e):ae(a)),oe(a=>te(M({},t),{guardsResult:a})))})}function v3(n,e,t,r){return Se(n).pipe(mt(i=>D3(i.component,i.route,t,e,r)),xn(i=>i!==!0,!0))}function w3(n,e,t,r){return Se(e).pipe(Hr(i=>Bo(E3(i.route.parent,r),_3(i.route,r),b3(n,i.path,t),I3(n,i.route,t))),xn(i=>i!==!0,!0))}function _3(n,e){return n!==null&&e&&e(new B_(n)),ae(!0)}function E3(n,e){return n!==null&&e&&e(new j_(n)),ae(!0)}function I3(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ae(!0);let i=r.map(s=>hh(()=>{let o=wu(e)??t,a=Ha(s,o),c=h3(a)?a.canActivate(e,n):qn(o,()=>a(e,n));return Zi(c).pipe(xn())}));return ae(i).pipe(qa())}function b3(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>a3(o)).filter(o=>o!==null).map(o=>hh(()=>{let a=o.guards.map(c=>{let u=wu(o.node)??t,d=Ha(c,u),f=f3(d)?d.canActivateChild(r,n):qn(u,()=>d(r,n));return Zi(f).pipe(xn())});return ae(a).pipe(qa())}));return ae(s).pipe(qa())}function D3(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ae(!0);let o=s.map(a=>{let c=wu(e)??i,u=Ha(a,c),d=p3(u)?u.canDeactivate(n,e,t,r):qn(c,()=>u(n,e,t,r));return Zi(d).pipe(xn())});return ae(o).pipe(qa())}function C3(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ae(!0);let s=i.map(o=>{let a=Ha(o,n),c=d3(a)?a.canLoad(e,t):qn(n,()=>a(e,t));return Zi(c)});return ae(s).pipe(qa(),xR(r))}function xR(n){return ry(yt(e=>{if(typeof e!="boolean")throw Ip(n,e)}),oe(e=>e===!0))}function T3(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ae(!0);let s=i.map(o=>{let a=Ha(o,n),c=g3(a)?a.canMatch(e,t):qn(n,()=>a(e,t));return Zi(c)});return ae(s).pipe(qa(),xR(r))}var gu=class{constructor(e){this.segmentGroup=e||null}},mu=class extends Error{constructor(e){super(),this.urlTree=e}};function Oa(n){return Uo(new gu(n))}function S3(n){return Uo(new ie(4e3,!1))}function A3(n){return Uo(TR(!1,Vn.GuardRejected))}var Q_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ae(r);if(i.numberOfChildren>1||!i.children[ve])return S3(`${e.redirectTo}`);i=i.children[ve]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:f,outlet:g,params:m,data:w,title:D}=i,C=qn(s,()=>a({params:m,data:w,queryParams:c,fragment:u,routeConfig:d,url:f,outlet:g,title:D}));if(C instanceof ai)throw new mu(C);t=C}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new mu(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ai(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new je(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Y_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function x3(n,e,t,r,i){let s=MR(n,e,t);return s.matched?(r=Jz(e,r),T3(r,e,t,i).pipe(oe(o=>o===!0?s:M({},Y_)))):ae(s)}function MR(n,e,t){if(e.path==="**")return M3(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},Y_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Tz)(t,n,e);if(!i)return M({},Y_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?M(M({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function M3(n){return{matched:!0,parameters:n.length>0?lR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function rR(n,e,t,r){return t.length>0&&N3(n,t,r)?{segmentGroup:new je(e,k3(r,new je(t,n.children))),slicedSegments:[]}:t.length===0&&P3(n,t,r)?{segmentGroup:new je(n.segments,R3(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new je(n.segments,n.children),slicedSegments:t}}function R3(n,e,t,r){let i={};for(let s of t)if(Sp(n,e,s)&&!r[ur(s)]){let o=new je([],{});i[ur(s)]=o}return M(M({},r),i)}function k3(n,e){let t={};t[ve]=e;for(let r of n)if(r.path===""&&ur(r)!==ve){let i=new je([],{});t[ur(r)]=i}return t}function N3(n,e,t){return t.some(r=>Sp(n,e,r)&&ur(r)!==ve)}function P3(n,e,t){return t.some(r=>Sp(n,e,r))}function Sp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function O3(n,e,t){return e.length===0&&!n.children[t]}var Z_=class{};function F3(n,e,t,r,i,s,o="emptyOnly"){return new J_(n,e,t,r,i,o,s).recognize()}var V3=31,J_=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Q_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=rR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:t,rootSnapshot:r})=>{let i=new Fn(r,t),s=new Ep("",i),o=Hz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new La([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ve,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ve,t).pipe(oe(r=>({children:r,rootSnapshot:t})),Si(r=>{if(r instanceof mu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof gu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(oe(o=>o instanceof Fn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Se(s).pipe(Hr(o=>{let a=r.children[o],c=Xz(t,o);return this.processSegmentGroup(e,c,a,o,i)}),xs((o,a)=>(o.push(...a),o)),Ai(null),fy(),mt(o=>{if(o===null)return Oa(r);let a=RR(o);return L3(a),ae(a)}))}processSegment(e,t,r,i,s,o,a){return Se(t).pipe(Hr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Si(u=>{if(u instanceof gu)return ae(null);throw u}))),xn(c=>!!c),Si(c=>{if(AR(c))return O3(r,i,s)?ae(new Z_):Oa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return ur(r)!==o&&(o===ve||!Sp(i,s,r))?Oa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Oa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=MR(t,i,s);if(!c)return Oa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>V3&&(this.allowRedirects=!1));let m=new La(s,u,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,iR(i),ur(i),i.component??i._loadedComponent??null,i,sR(i)),w=_p(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(w.params),m.data=Object.freeze(w.data);let D=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(mt(C=>this.processSegment(e,r,t,C.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=x3(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ke(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ke(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=c,w=new La(g,f,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,iR(r),ur(r),r.component??r._loadedComponent??null,r,sR(r)),D=_p(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(D.params),w.data=Object.freeze(D.data);let{segmentGroup:C,slicedSegments:O}=rR(t,g,m,u);if(O.length===0&&C.hasChildren())return this.processChildren(d,u,C,w).pipe(oe(L=>new Fn(w,L)));if(u.length===0&&O.length===0)return ae(new Fn(w,[]));let V=ur(r)===s;return this.processSegment(d,u,C,O,V?ve:s,!0,w).pipe(oe(L=>new Fn(w,L instanceof Fn?[L]:[])))}))):Oa(t)))}getChildConfig(e,t,r){return t.children?ae({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ae({routes:t._loadedRoutes,injector:t._loadedInjector}):C3(e,t,r,this.urlSerializer).pipe(mt(i=>i?this.configLoader.loadChildren(e,t).pipe(yt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):A3(t))):ae({routes:[],injector:e})}};function L3(n){n.sort((e,t)=>e.value.outlet===ve?-1:t.value.outlet===ve?1:e.value.outlet.localeCompare(t.value.outlet))}function j3(n){let e=n.value.routeConfig;return e&&e.path===""}function RR(n){let e=[],t=new Set;for(let r of n){if(!j3(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=RR(r.children);e.push(new Fn(r.value,i))}return e.filter(r=>!t.has(r))}function iR(n){return n.data||{}}function sR(n){return n.resolve||{}}function U3(n,e,t,r,i,s){return mt(o=>F3(n,e,t,r,o.extractedUrl,i,s).pipe(oe(({state:a,tree:c})=>te(M({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function B3(n,e){return mt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ae(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of kR(c))o.add(u);let a=0;return Se(o).pipe(Hr(c=>s.has(c)?$3(c,r,n,e):(c.data=_p(c,c.parent,n).resolve,ae(void 0))),yt(()=>a++),$o(1),mt(c=>a===o.size?ae(t):on))})}function kR(n){let e=n.children.map(t=>kR(t)).flat();return[n,...e]}function $3(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!DR(i)&&(s[yu]=i.title),z3(s,n,e,r).pipe(oe(o=>(n._resolvedData=o,n.data=_p(n,n.parent,t).resolve,null)))}function z3(n,e,t,r){let i=x_(n);if(i.length===0)return ae({});let s={};return Se(i).pipe(mt(o=>q3(n[o],e,t,r).pipe(xn(),yt(a=>{if(a instanceof pu)throw Ip(new Ba,a);s[o]=a}))),$o(1),hl(s),Si(o=>AR(o)?on:Uo(o)))}function q3(n,e,t,r){let i=wu(e)??r,s=Ha(n,i),o=s.resolve?s.resolve(e,t):qn(i,()=>s(e,t));return Zi(o)}function S_(n){return Ke(e=>{let t=n(e);return t?Se(t).pipe(oe(()=>e)):ae(e)})}var NR=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ve);return i}getResolvedTitleForRoute(r){return r.data[yu]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(H3),providedIn:"root"});let n=e;return n})(),H3=(()=>{let e=class e extends NR{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(B(Dn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Iu=new W("",{providedIn:"root",factory:()=>({})}),G3=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ae({type:e,selectors:[["ng-component"]],standalone:!0,features:[Pl],decls:1,vars:0,template:function(i,s){i&1&&ce(0,"router-outlet")},dependencies:[t0],encapsulation:2});let n=e;return n})();function n0(n){let e=n.children&&n.children.map(n0),t=e?te(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ve&&(t.component=G3),t}var Dp=new W(""),r0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(Lf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ae(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Zi(r.loadComponent()).pipe(oe(PR),yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),As(()=>{this.componentLoaders.delete(r)})),s=new Oo(i,()=>new Ue).pipe(Po());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ae({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=W3(i,this.compiler,r,this.onLoadEndListener).pipe(As(()=>{this.childrenLoaders.delete(i)})),a=new Oo(o,()=>new Ue).pipe(Po());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function W3(n,e,t,r){return Zi(n.loadChildren()).pipe(oe(PR),mt(i=>i instanceof Cl||Array.isArray(i)?ae(i):Se(e.compileModuleAsync(i))),oe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Dp,[],{optional:!0,self:!0}).flat()),{routes:o.map(n0),injector:s}}))}function K3(n){return n&&typeof n=="object"&&"default"in n}function PR(n){return K3(n)?n.default:n}var i0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(Q3),providedIn:"root"});let n=e;return n})(),Q3=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),OR=new W(""),FR=new W("");function Y3(n,e,t){let r=n.get(FR),i=n.get(xt);return n.get(De).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),Z3(n))),{onViewTransitionCreated:c}=r;return c&&qn(n,()=>c({transition:a,from:e,to:t})),o})}function Z3(n){return new Promise(e=>{Ew({read:()=>setTimeout(e)},{injector:n})})}var J3=new W(""),s0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=G(r0),this.environmentInjector=G(ln),this.urlSerializer=G(vu),this.rootContexts=G(_u),this.location=G(Da),this.inputBindingEnabled=G(Tp,{optional:!0})!==null,this.titleStrategy=G(NR),this.options=G(Iu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(i0),this.createViewTransition=G(OR,{optional:!0}),this.navigationErrorHandler=G(J3,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ae(void 0),this.rootComponentType=null;let r=s=>this.events.next(new V_(s)),i=s=>this.events.next(new L_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(te(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ft({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:au,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ct(o=>o.id!==0),oe(o=>te(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ke(o=>{let a=!1,c=!1;return ae(o).pipe(Ke(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Vn.SupersededByNewNavigation),on;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?te(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Yi(u.id,this.urlSerializer.serialize(u.rawUrl),g,gp.IgnoredSameUrlNavigation)),u.resolve(!1),on}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ae(u).pipe(Ke(g=>{let m=this.transitions?.getValue();return this.events.next(new $a(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?on:Promise.resolve(g)}),U3(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),yt(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=te(M({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new mp(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:m,source:w,restoredState:D,extras:C}=u,O=new $a(g,this.urlSerializer.serialize(m),w,D);this.events.next(O);let V=IR(this.rootComponentType).snapshot;return this.currentTransition=o=te(M({},u),{targetSnapshot:V,urlAfterRedirects:m,extras:te(M({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ae(o)}else{let g="";return this.events.next(new Yi(u.id,this.urlSerializer.serialize(u.extractedUrl),g,gp.IgnoredByUrlHandlingStrategy)),u.resolve(!1),on}}),yt(u=>{let d=new N_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),oe(u=>(this.currentTransition=o=te(M({},u),{guards:o3(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),y3(this.environmentInjector,u=>this.events.next(u)),yt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Ip(this.urlSerializer,u.guardsResult);let d=new P_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),Ct(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Vn.GuardRejected),!1)),S_(u=>{if(u.guards.canActivateChecks.length)return ae(u).pipe(yt(d=>{let f=new O_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ke(d=>{let f=!1;return ae(d).pipe(B3(this.paramsInheritanceStrategy,this.environmentInjector),yt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",Vn.NoDataFromResolver)}}))}),yt(d=>{let f=new F_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),S_(u=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(yt(m=>{f.component=m}),oe(()=>{})));for(let m of f.children)g.push(...d(m));return g};return ul(d(u.targetSnapshot.root)).pipe(Ai(null),Gr(1))}),S_(()=>this.afterPreactivation()),Ke(()=>{let{currentSnapshot:u,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return f?Se(f).pipe(oe(()=>o)):ae(o)}),oe(u=>{let d=t3(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=te(M({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),yt(()=>{this.events.next(new hu)}),s3(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Gr(1),yt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ci(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),gl(this.transitionAbortSubject.pipe(yt(u=>{throw u}))),As(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Vn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Si(u=>{if(c=!0,SR(u))this.events.next(new oi(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),i3(u)?this.events.next(new za(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let d=new du(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let f=qn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof pu){let{message:g,cancellationCode:m}=Ip(this.urlSerializer,f);this.events.next(new oi(o.id,this.urlSerializer.serialize(o.extractedUrl),g,m)),this.events.next(new za(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(u);o.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return on}))}))}cancelNavigationTransition(r,i,s){let o=new oi(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function X3(n){return n!==au}var eq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(tq),providedIn:"root"});let n=e;return n})(),X_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},tq=(()=>{let e=class e extends X_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=xl(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),VR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(nq),providedIn:"root"});let n=e;return n})(),nq=(()=>{let e=class e extends VR{constructor(){super(...arguments),this.location=G(Da),this.urlSerializer=G(vu),this.options=G(Iu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(i0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ai,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=IR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof $a)this.stateMemento=this.createStateMemento();else if(r instanceof Yi)this.rawUrlTree=i.initialUrl;else if(r instanceof mp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof hu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof oi&&(r.code===Vn.GuardRejected||r.code===Vn.NoDataFromResolver)?this.restoreHistory(i):r instanceof du?this.restoreHistory(i,!0):r instanceof ci&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof ai?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=xl(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),su=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(su||{});function LR(n,e){n.events.pipe(Ct(t=>t instanceof ci||t instanceof oi||t instanceof du||t instanceof Yi),oe(t=>t instanceof ci||t instanceof Yi?su.COMPLETE:(t instanceof oi?t.code===Vn.Redirect||t.code===Vn.SupersededByNewNavigation:!1)?su.REDIRECTING:su.FAILED),Ct(t=>t!==su.REDIRECTING),Gr(1)).subscribe(()=>{e()})}function rq(n){throw n}var iq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ln=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(Nf),this.stateManager=G(VR),this.options=G(Iu,{optional:!0})||{},this.pendingTasks=G(Ui),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(s0),this.urlSerializer=G(vu),this.location=G(Da),this.urlHandlingStrategy=G(i0),this._events=new Ue,this.errorHandler=this.options.errorHandler||rq,this.navigated=!1,this.routeReuseStrategy=G(eq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(Dp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(Tp,{optional:!0}),this.eventsSubscription=new ct,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof oi&&i.code!==Vn.Redirect&&i.code!==Vn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof ci)this.navigated=!0;else if(i instanceof za){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u=M({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||X3(s.source)},a);this.scheduleNavigation(c,au,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}aq(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),au,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=M({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(n0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,d=u?this.currentUrlTree.fragment:a,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=vR(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return wR(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=lu(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,au,null,i)}navigate(r,i={skipLocationChange:!1}){return oq(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=M({},iq):i===!1?s=M({},sq):s=i,lu(r))return JM(this.currentUrlTree,r,s);let o=this.parseUrl(r);return JM(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((g,m)=>{c=g,u=m});let f=this.pendingTasks.add();return LR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function oq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}function aq(n){return!(n instanceof hu)&&!(n instanceof za)}var Cp=class{};var cq=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ct(r=>r instanceof ci),Hr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Tf(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Se(s).pipe(Ti())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=ae(null);let o=s.pipe(mt(a=>a===null?ae(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Se([o,a]).pipe(Ti())}else return o})}};e.\u0275fac=function(i){return new(i||e)(B(Ln),B(Lf),B(ln),B(Cp),B(r0))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),jR=new W(""),lq=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof $a?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof ci?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Yi&&r.code===gp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof yp&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yp(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){EA()},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function uq(n){return n.routerState.root}function bu(n,e){return{\u0275kind:n,\u0275providers:e}}function dq(){let n=G(kn);return e=>{let t=n.get(ti);if(e!==t.components[0])return;let r=n.get(Ln),i=n.get(UR);n.get(o0)===1&&r.initialNavigation(),n.get(BR,null,Ie.Optional)?.setUpPreloading(),n.get(jR,null,Ie.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var UR=new W("",{factory:()=>new Ue}),o0=new W("",{providedIn:"root",factory:()=>1});function hq(){return bu(2,[{provide:o0,useValue:0},{provide:Ff,multi:!0,deps:[kn],useFactory:e=>{let t=e.get(Px,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Ln),s=e.get(UR);LR(i,()=>{r(!0)}),e.get(s0).afterPreactivation=()=>(r(!0),s.closed?ae(void 0):s),i.initialNavigation()}))}}])}function fq(){return bu(3,[{provide:Ff,multi:!0,useFactory:()=>{let e=G(Ln);return()=>{e.setUpLocationChangeListener()}}},{provide:o0,useValue:2}])}var BR=new W("");function pq(n){return bu(0,[{provide:BR,useExisting:cq},{provide:Cp,useExisting:n}])}function gq(){return bu(8,[nR,{provide:Tp,useExisting:nR}])}function mq(n){let e=[{provide:OR,useValue:Y3},{provide:FR,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return bu(9,e)}var oR=new W("ROUTER_FORROOT_GUARD"),yq=[Da,{provide:vu,useClass:Ba},Ln,_u,{provide:Cn,useFactory:uq,deps:[Ln]},r0,[]],a0=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[yq,[],{provide:Dp,multi:!0,useValue:r},{provide:oR,useFactory:Eq,deps:[[Ln,new la,new rf]]},{provide:Iu,useValue:i||{}},i?.useHash?wq():_q(),vq(),i?.preloadingStrategy?pq(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?Iq(i):[],i?.bindToComponentInputs?gq().\u0275providers:[],i?.enableViewTransitions?mq().\u0275providers:[],bq()]}}static forChild(r){return{ngModule:e,providers:[{provide:Dp,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(B(oR,8))},e.\u0275mod=At({type:e}),e.\u0275inj=St({});let n=e;return n})();function vq(){return{provide:jR,useFactory:()=>{let n=G(Ux),e=G(De),t=G(Iu),r=G(s0),i=G(vu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new lq(i,r,n,e,t)}}}function wq(){return{provide:Hs,useClass:Fx}}function _q(){return{provide:Hs,useClass:Gw}}function Eq(n){return"guarded"}function Iq(n){return[n.initialNavigation==="disabled"?fq().\u0275providers:[],n.initialNavigation==="enabledBlocking"?hq().\u0275providers:[]]}var aR=new W("");function bq(){return[{provide:aR,useFactory:dq},{provide:Vf,multi:!0,useExisting:aR}]}var Le=class n{static parseHtmlLine(e){return e.includes("Widget:")?{Widget:"NAVI"}:{PageType:e}}static isMobileBrowser(){let e=navigator.userAgent||window.opera;return!!(/android/i.test(e)||/iPad|iPhone|iPod/.test(e)&&!window.MSStream)}static toString(e){return e==null?"":typeof e=="string"?e:String(e)}static unescape(e){return e=this.toString(e),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")}static getTodaysDate(e){let t=new Date().toUTCString();return t=t.replaceAll(" ",e),t.replace(",","")}static getBasePath(e){let t="",r=e.snapshot.url[0];return r&&r.path&&(t=r.path),r&&r.path?.toLocaleLowerCase()}static getUrl(e){let t=e.url;for(;t!==decodeURIComponent(t);)t=decodeURIComponent(t);let r=t.indexOf("?");return r>0?e.url.substring(0,r):e.url}static getRouterUrl(e,t){return this.getUrl(e).replace("/"+t,"")}static getRouteParam(e,t){return e.snapshot.paramMap.get(t)?.toLocaleLowerCase()}static getQueryParam(e,t){return e.snapshot.queryParamMap.get(t)}static getFirstLineEnd(e){return e.indexOf(`
`)}static getFirstLine(e){let t=e.indexOf(`
`);return t!==-1?e.substring(0,t):e}static getDataValueFromString(e){let t=e.charAt(0);return t=="["?(e=e.replace(/'/g,'"'),e=JSON.parse(e),e):t=="'"||t=="`"||t=='"'?(e=e.replace(/'/g,'"'),JSON.parse(e)):new Number(e)}static getFilesInFolder(e,t){return e.files.filter(r=>r.includes(t))}static getFileNameWithoutCurrentFolder(e,t){return n.getFileName(e.substring(e.indexOf(t)+t.length+1),!0)}static getFileName(e,t=!1){let i=(t?e:e.substring(e.lastIndexOf("/")+1)).replace(/[-_]/g," ");return i.substring(0,i.lastIndexOf("."))}static getFileNameWithCategory(e,t=!1){let r="",i=e.lastIndexOf("/");e.indexOf("/")!=-1&&(r=t?e.substring(0,e.indexOf("/")):e.substring(e.lastIndexOf("/",i-1)+1,i));let a=e.substring(i+1).replace(/[-_]/g," ");return{Category:r,File:a.substring(0,a.lastIndexOf("."))}}static closestHost(e){e=e.substring(e.indexOf("."));let t=new Map;return t.set("raw.githubusercontent","github"),t.set(".githubusercontent","github"),t.set("youtu","youtube"),t.set(".publichome","link"),t.has(e)?t.get(e):e}static getGhUserFilePath(e,t,r=!1){return r?`${he.gh_api_url}/repos/${e}/${he.gh_private_dr_folder}/contents/${t}`:`${he.gh_dr_url}/${e}/${he.gh_dr_folder}/${t}`}};var Yn=class{constructor(e){if(this.githubService=e,this.router=G(Ln),this.route=G(Cn),this.messaging=G(Jt),this.routerFileUrl="",this.hasPrivateAccess=!1,this.githubUser=he.gh_default_user_repo,this.basePath="",this.articleFolderName="",this.isHomePageGHUser=!1,this.basePath=Le.getBasePath(this.route),this.basePath=="i"||ne.INTERNAL_FOLDERS.includes(this.basePath)){let t=Le.getRouteParam(this.route,"folder");t||(t=this.basePath),this.articleFolderName=t}else console.debug("It is a user's public article !!");this.githubUser=Le.getRouteParam(this.route,"ghUser"),this.githubUser||(this.githubUser=he.gh_default_user_repo,this.isHomePageGHUser=!0),this.routerFileUrl=Le.getRouterUrl(this.router,this.githubUser),this.githubUser&&this.githubService.getJwtToken(this.githubUser).then(t=>this.githubService.getAccessToken(t).then(r=>{this.hasPrivateAccess=r!=null})).finally(()=>this.initialiseUserContext(this.githubUser))}initialiseUserContext(e){return b(this,null,function*(){this.githubService.get("users/"+e).then(t=>{ne.ghUser=JSON.parse(t),ne.userContext.username=e,this.githubService.getGhDirectoryContents(e).then(r=>{ne.userContext.directory=r,this.messaging.send({cmd:"UserDirectory"})})}).finally(()=>{ne.ghUserLoaded=e,this.messaging.send({cmd:"UserContext"})})})}getFolderName(){return this.articleFolderName}};function Xt(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function xp(n,e,t,r){if(typeof t!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>xp.bind(null,n,s,i,r),t)():Promise.resolve().then(()=>n.registry[e]?n.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),t)():t(r))}function $R(n,e,t,r){let i=r;n.registry[t]||(n.registry[t]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(c=>(a=c,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),n.registry[t].push({hook:r,orig:i})}function zR(n,e,t){if(!n.registry[e])return;let r=n.registry[e].map(i=>i.orig).indexOf(t);r!==-1&&n.registry[e].splice(r,1)}var qR=Function.bind,HR=qR.bind(qR);function GR(n,e,t){let r=HR(zR,null).apply(null,t?[e,t]:[e]);n.api={remove:r},n.remove=r,["before","error","after","wrap"].forEach(i=>{let s=t?[e,i,t]:[e,i];n[i]=n.api[i]=HR($R,null).apply(null,s)})}function Dq(){let n=Symbol("Singular"),e={registry:{}},t=xp.bind(null,e,n);return GR(t,e,n),t}function Cq(){let n={registry:{}},e=xp.bind(null,n);return GR(e,n),e}var WR={Singular:Dq,Collection:Cq};var Tq="0.0.0-development",Sq=`octokit-endpoint.js/${Tq} ${Xt()}`,Aq={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Sq},mediaType:{format:""}};function xq(n){return n?Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=n[t],e),{}):{}}function Mq(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function YR(n,e){let t=Object.assign({},n);return Object.keys(e).forEach(r=>{Mq(e[r])?r in n?t[r]=YR(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function KR(n){for(let e in n)n[e]===void 0&&delete n[e];return n}function l0(n,e,t){if(typeof e=="string"){let[i,s]=e.split(" ");t=Object.assign(s?{method:i,url:s}:{url:i},t)}else t=Object.assign({},e);t.headers=xq(t.headers),KR(t),KR(t.headers);let r=YR(n||{},t);return t.url==="/graphql"&&(n&&n.mediaType.previews?.length&&(r.mediaType.previews=n.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function Rq(n,e){let t=/\?/.test(n)?"&":"?",r=Object.keys(e);return r.length===0?n:n+t+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var kq=/\{[^}]+\}/g;function Nq(n){return n.replace(/^\W+|\W+$/g,"").split(/,/)}function Pq(n){let e=n.match(kq);return e?e.map(Nq).reduce((t,r)=>t.concat(r),[]):[]}function QR(n,e){let t={__proto__:null};for(let r of Object.keys(n))e.indexOf(r)===-1&&(t[r]=n[r]);return t}function ZR(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function Wa(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Du(n,e,t){return e=n==="+"||n==="#"?ZR(e):Wa(e),t?Wa(t)+"="+e:e}function Ga(n){return n!=null}function c0(n){return n===";"||n==="&"||n==="?"}function Oq(n,e,t,r){var i=n[t],s=[];if(Ga(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(Du(e,i,c0(e)?t:""));else if(r==="*")Array.isArray(i)?i.filter(Ga).forEach(function(o){s.push(Du(e,o,c0(e)?t:""))}):Object.keys(i).forEach(function(o){Ga(i[o])&&s.push(Du(e,i[o],o))});else{let o=[];Array.isArray(i)?i.filter(Ga).forEach(function(a){o.push(Du(e,a))}):Object.keys(i).forEach(function(a){Ga(i[a])&&(o.push(Wa(a)),o.push(Du(e,i[a].toString())))}),c0(e)?s.push(Wa(t)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?Ga(i)&&s.push(Wa(t)):i===""&&(e==="&"||e==="?")?s.push(Wa(t)+"="):i===""&&s.push("");return s}function Fq(n){return{expand:Vq.bind(null,n)}}function Vq(n,e){var t=["+","#",".","/",";","?","&"];return n=n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="",c=[];if(t.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(u){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(u);c.push(Oq(e,a,d[1],d[2]||d[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(c.length!==0?a:"")+c.join(o)}else return c.join(",")}else return ZR(s)}),n==="/"?n:n.replace(/\/$/,"")}function JR(n){let e=n.method.toUpperCase(),t=(n.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},n.headers),i,s=QR(n,["method","baseUrl","url","headers","request","mediaType"]),o=Pq(t);t=Fq(t).expand(s),/^http/.test(t)||(t=n.baseUrl+t);let a=Object.keys(n).filter(d=>o.includes(d)).concat("baseUrl"),c=QR(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(n.mediaType.format&&(r.accept=r.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${n.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&n.mediaType.previews?.length)){let d=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=d.concat(n.mediaType.previews).map(f=>{let g=n.mediaType.format?`.${n.mediaType.format}`:"+json";return`application/vnd.github.${f}-preview${g}`}).join(",")}return["GET","HEAD"].includes(e)?t=Rq(t,c):"data"in c?i=c.data:Object.keys(c).length&&(i=c),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:t,headers:r},typeof i<"u"?{body:i}:null,n.request?{request:n.request}:null)}function Lq(n,e,t){return JR(l0(n,e,t))}function XR(n,e){let t=l0(n,e),r=Lq.bind(null,t);return Object.assign(r,{DEFAULTS:t,defaults:XR.bind(null,t),merge:l0.bind(null,t),parse:JR})}var ek=XR(null,Aq);var li=class extends Error{name;status;request;response;constructor(e,t,r){super(e),this.name="HttpError",this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);let i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}};var jq="0.0.0-development",Uq={headers:{"user-agent":`octokit-request.js/${jq} ${Xt()}`}};function Bq(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function tk(n){return b(this,null,function*(){let e=n.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let t=n.request?.log||console,r=n.request?.parseSuccessResponseBody!==!1,i=Bq(n.body)||Array.isArray(n.body)?JSON.stringify(n.body):n.body,s=Object.fromEntries(Object.entries(n.headers).map(([f,g])=>[f,String(g)])),o;try{o=yield e(n.url,M({method:n.method,body:i,redirect:n.request?.redirect,headers:s,signal:n.request?.signal},n.body&&{duplex:"half"}))}catch(f){let g="Unknown Error";if(f instanceof Error){if(f.name==="AbortError")throw f.status=500,f;g=f.message,f.name==="TypeError"&&"cause"in f&&(f.cause instanceof Error?g=f.cause.message:typeof f.cause=="string"&&(g=f.cause))}let m=new li(g,500,{request:n});throw m.cause=f,m}let a=o.status,c=o.url,u={};for(let[f,g]of o.headers)u[f]=g;let d={url:c,status:a,headers:u,data:""};if("deprecation"in u){let f=u.link&&u.link.match(/<([^>]+)>; rel="deprecation"/),g=f&&f.pop();t.warn(`[@octokit/request] "${n.method} ${n.url}" is deprecated. It is scheduled to be removed on ${u.sunset}${g?`. See ${g}`:""}`)}if(a===204||a===205)return d;if(n.method==="HEAD"){if(a<400)return d;throw new li(o.statusText,a,{response:d,request:n})}if(a===304)throw d.data=yield u0(o),new li("Not modified",a,{response:d,request:n});if(a>=400)throw d.data=yield u0(o),new li($q(d.data),a,{response:d,request:n});return d.data=r?yield u0(o):o.body,d})}function u0(n){return b(this,null,function*(){let e=n.headers.get("content-type");return/application\/json/.test(e)?n.json().catch(()=>n.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?n.text():n.arrayBuffer()})}function $q(n){if(typeof n=="string")return n;if(n instanceof ArrayBuffer)return"Unknown error";if("message"in n){let e="documentation_url"in n?` - ${n.documentation_url}`:"";return Array.isArray(n.errors)?`${n.message}: ${n.errors.map(t=>JSON.stringify(t)).join(", ")}${e}`:`${n.message}${e}`}return`Unknown error: ${JSON.stringify(n)}`}function d0(n,e){let t=n.defaults(e);return Object.assign(function(i,s){let o=t.merge(i,s);if(!o.request||!o.request.hook)return tk(t.parse(o));let a=(c,u)=>tk(t.parse(t.merge(c,u)));return Object.assign(a,{endpoint:t,defaults:d0.bind(null,t)}),o.request.hook(a,o)},{endpoint:t,defaults:d0.bind(null,t)})}var Be=d0(ek,Uq);var zq="0.0.0-development";function qq(n){return`Request failed due to following response errors:
`+n.errors.map(e=>` - ${e.message}`).join(`
`)}var Hq=class extends Error{constructor(n,e,t){super(qq(t)),this.request=n,this.headers=e,this.response=t,this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},Gq=["method","baseUrl","url","headers","request","query","mediaType"],Wq=["query","method","url"],nk=/\/api\/v3\/?$/;function Kq(n,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in t)if(Wq.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let r=typeof e=="string"?Object.assign({query:e},t):e,i=Object.keys(r).reduce((o,a)=>Gq.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||n.endpoint.DEFAULTS.baseUrl;return nk.test(s)&&(i.url=s.replace(nk,"/api/graphql")),n(i).then(o=>{if(o.data.errors){let a={};for(let c of Object.keys(o.headers))a[c]=o.headers[c];throw new Hq(i,a,o.data)}return o.data.data})}function h0(n,e){let t=n.defaults(e);return Object.assign((i,s)=>Kq(t,i,s),{defaults:h0.bind(null,t),endpoint:t.endpoint})}var dee=h0(Be,{headers:{"user-agent":`octokit-graphql.js/${zq} ${Xt()}`},method:"POST",url:"/graphql"});function rk(n){return h0(n,{method:"POST",url:"/graphql"})}var Qq=/^v1\./,Yq=/^ghs_/,Zq=/^ghu_/;function Jq(n){return b(this,null,function*(){let e=n.split(/\./).length===3,t=Qq.test(n)||Yq.test(n),r=Zq.test(n);return{type:"token",token:n,tokenType:e?"app":t?"installation":r?"user-to-server":"oauth"}})}function Xq(n){return n.split(/\./).length===3?`bearer ${n}`:`token ${n}`}function eH(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);return i.headers.authorization=Xq(n),e(i)})}var ik=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(Jq.bind(null,e),{hook:eH.bind(null,e)})};var f0="6.1.2";var sk=()=>{},tH=console.warn.bind(console),nH=console.error.bind(console),ok=`octokit-core.js/${f0} ${Xt()}`,p0=(()=>{class n{static VERSION=f0;static defaults(t){return class extends this{constructor(...i){let s=i[0]||{};if(typeof t=="function"){super(t(s));return}super(Object.assign({},t,s,s.userAgent&&t.userAgent?{userAgent:`${s.userAgent} ${t.userAgent}`}:null))}}}static plugins=[];static plugin(...t){let r=this.plugins;return class extends this{static plugins=r.concat(t.filter(s=>!r.includes(s)))}}constructor(t={}){let r=new WR.Collection,i={baseUrl:Be.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(i.headers["user-agent"]=t.userAgent?`${t.userAgent} ${ok}`:ok,t.baseUrl&&(i.baseUrl=t.baseUrl),t.previews&&(i.mediaType.previews=t.previews),t.timeZone&&(i.headers["time-zone"]=t.timeZone),this.request=Be.defaults(i),this.graphql=rk(this.request).defaults(i),this.log=Object.assign({debug:sk,info:sk,warn:tH,error:nH},t.log),this.hook=r,t.authStrategy){let o=t,{authStrategy:a}=o,c=gn(o,["authStrategy"]),u=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:c},t.auth));r.wrap("request",u.hook),this.auth=u}else if(!t.auth)this.auth=()=>b(this,null,function*(){return{type:"unauthenticated"}});else{let a=ik(t.auth);r.wrap("request",a.hook),this.auth=a}let s=this.constructor;for(let a=0;a<s.plugins.length;++a)Object.assign(this,s.plugins[a](this,t))}request;graphql;log;hook;auth}return n})();function rH(n){let e=n.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(e.baseUrl)?"https://github.com":e.baseUrl.replace("/api/v3","")}function Mp(n,e,t){return b(this,null,function*(){let r=M({baseUrl:rH(n),headers:{accept:"application/json"}},t),i=yield n(e,r);if("error"in i.data){let s=new li(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:n.endpoint.merge(e,r)});throw s.response=i,s}return i})}function uk(n){return b(this,null,function*(){let e=n.request||Be,t=yield Mp(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,code:n.code,redirect_uri:n.redirectUrl}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=ak(i,t.data.expires_in),r.refreshTokenExpiresAt=ak(i,t.data.refresh_token_expires_in)}delete r.scopes}return te(M({},t),{authentication:r})})}function ak(n,e){return new Date(n+e*1e3).toISOString()}function dk(n){return b(this,null,function*(){let e=n.request||Be,t={client_id:n.clientId};return"scopes"in n&&Array.isArray(n.scopes)&&(t.scope=n.scopes.join(" ")),Mp(e,"POST /login/device/code",t)})}function g0(n){return b(this,null,function*(){let e=n.request||Be,t=yield Mp(e,"POST /login/oauth/access_token",{client_id:n.clientId,device_code:n.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),r={clientType:n.clientType,clientId:n.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in n&&(r.clientSecret=n.clientSecret),n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=ck(i,t.data.expires_in),r.refreshTokenExpiresAt=ck(i,t.data.refresh_token_expires_in)}delete r.scopes}return te(M({},t),{authentication:r})})}function ck(n,e){return new Date(n+e*1e3).toISOString()}function hk(n){return b(this,null,function*(){let t=yield(n.request||Be)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`},client_id:n.clientId,access_token:n.token}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.token,scopes:t.data.scopes};return t.data.expires_at&&(r.expiresAt=t.data.expires_at),n.clientType==="github-app"&&delete r.scopes,te(M({},t),{authentication:r})})}function fk(n){return b(this,null,function*(){let e=n.request||Be,t=yield Mp(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,grant_type:"refresh_token",refresh_token:n.refreshToken}),r=new Date(t.headers.date).getTime(),i={clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:lk(r,t.data.expires_in),refreshTokenExpiresAt:lk(r,t.data.refresh_token_expires_in)};return te(M({},t),{authentication:i})})}function lk(n,e){return new Date(n+e*1e3).toISOString()}function pk(n){return b(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`),r=yield e("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token}),i={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:r.data.token,scopes:r.data.scopes};return r.data.expires_at&&(i.expiresAt=r.data.expires_at),n.clientType==="github-app"&&delete i.scopes,te(M({},r),{authentication:i})})}function gk(n){return b(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function mk(n){return b(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function vk(n,e){return b(this,null,function*(){let t=iH(n,e.auth);if(t)return t;let{data:r}=yield dk({clientType:n.clientType,clientId:n.clientId,request:e.request||n.request,scopes:e.auth.scopes||n.scopes});yield n.onVerification(r);let i=yield m0(e.request||n.request,n.clientId,n.clientType,r);return n.authentication=i,i})}function iH(n,e){if(e.refresh===!0||!n.authentication)return!1;if(n.clientType==="github-app")return n.authentication;let t=n.authentication,r=("scopes"in e&&e.scopes||n.scopes).join(" "),i=t.scopes.join(" ");return r===i?t:!1}function yk(n){return b(this,null,function*(){yield new Promise(e=>setTimeout(e,n*1e3))})}function m0(n,e,t,r){return b(this,null,function*(){try{let i={clientId:e,request:n,code:r.device_code},{authentication:s}=t==="oauth-app"?yield g0(te(M({},i),{clientType:"oauth-app"})):yield g0(te(M({},i),{clientType:"github-app"}));return M({type:"token",tokenType:"oauth"},s)}catch(i){if(!i.response)throw i;let s=i.response.data.error;if(s==="authorization_pending")return yield yk(r.interval),m0(n,e,t,r);if(s==="slow_down")return yield yk(r.interval+5),m0(n,e,t,r);throw i}})}function sH(n,e){return b(this,null,function*(){return vk(n,{auth:e})})}function oH(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);let{token:s}=yield vk(n,{request:e,auth:{type:"oauth"}});return i.headers.authorization=`token ${s}`,e(i)})}var aH="0.0.0-development";function wk(n){let e=n.request||Be.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${aH} ${Xt()}`}}),s=n,{request:t=e}=s,r=gn(s,["request"]),i=n.clientType==="github-app"?te(M({},r),{clientType:"github-app",request:t}):te(M({},r),{clientType:"oauth-app",request:t,scopes:n.scopes||[]});if(!n.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!n.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(sH.bind(null,i),{hook:oH.bind(null,i)})}var Ek="0.0.0-development";function _k(n){return b(this,null,function*(){if("code"in n.strategyOptions){let{authentication:e}=yield uk(te(M({clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}));return M({type:"token",tokenType:"oauth"},e)}if("onVerification"in n.strategyOptions){let t=yield wk(te(M({clientType:n.clientType,clientId:n.clientId,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}))({type:"oauth"});return M({clientSecret:n.clientSecret},t)}if("token"in n.strategyOptions)return M({type:"token",tokenType:"oauth",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions);throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")})}function y0(t){return b(this,arguments,function*(n,e={}){if(n.authentication||(n.authentication=n.clientType==="oauth-app"?yield _k(n):yield _k(n)),n.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");let r=n.authentication;if("expiresAt"in r&&(e.type==="refresh"||new Date(r.expiresAt)<new Date)){let{authentication:i}=yield fk({clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,refreshToken:r.refreshToken,request:n.request});n.authentication=M({tokenType:"oauth",type:"token"},i)}if(e.type==="refresh"){if(n.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!r.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");yield n.onTokenCreated?.(n.authentication,{type:e.type})}if(e.type==="check"||e.type==="reset"){let i=e.type==="check"?hk:pk;try{let{authentication:s}=yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request});return n.authentication=M({tokenType:"oauth",type:"token"},s),e.type==="reset"&&(yield n.onTokenCreated?.(n.authentication,{type:e.type})),n.authentication}catch(s){throw s.status===404&&(s.message="[@octokit/auth-oauth-user] Token is invalid",n.authentication.invalid=!0),s}}if(e.type==="delete"||e.type==="deleteAuthorization"){let i=e.type==="delete"?gk:mk;try{yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request})}catch(s){if(s.status!==404)throw s}return n.authentication.invalid=!0,n.authentication}return n.authentication})}var cH=/\/applications\/[^/]+\/(token|grant)s?/;function Cu(n){return n&&cH.test(n)}function lH(i,s,o){return b(this,arguments,function*(n,e,t,r={}){let a=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(a.url))return e(a);if(Cu(a.url)){let u=btoa(`${n.clientId}:${n.clientSecret}`);return a.headers.authorization=`basic ${u}`,e(a)}let{token:c}=n.clientType==="oauth-app"?yield y0(te(M({},n),{request:e})):yield y0(te(M({},n),{request:e}));return a.headers.authorization="token "+c,e(a)})}function Rp(o){var a=o,{clientId:n,clientSecret:e,clientType:t="oauth-app",request:r=Be.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${Ek} ${Xt()}`}}),onTokenCreated:i}=a,s=gn(a,["clientId","clientSecret","clientType","request","onTokenCreated"]);let c=Object.assign({clientType:t,clientId:n,clientSecret:e,onTokenCreated:i,strategyOptions:s,request:r});return Object.assign(y0.bind(null,c),{hook:lH.bind(null,c)})}Rp.VERSION=Ek;function uH(n,e){return b(this,null,function*(){if(e.type==="oauth-app")return{type:"oauth-app",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`}};if("factory"in e){let i=M(M({},e),n),{type:s}=i,o=gn(i,["type"]);return e.factory(o)}let t=M({clientId:n.clientId,clientSecret:n.clientSecret,request:n.request},e);return(n.clientType==="oauth-app"?yield Rp(te(M({},t),{clientType:n.clientType})):yield Rp(te(M({},t),{clientType:n.clientType})))()})}function dH(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);if(n.clientType==="github-app"&&!Cu(i.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let s=btoa(`${n.clientId}:${n.clientSecret}`);i.headers.authorization=`basic ${s}`;try{return yield e(i)}catch(o){throw o.status!==401||(o.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),o}})}var hH="0.0.0-development";function Ik(n){let e=Object.assign({request:Be.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${hH} ${Xt()}`}}),clientType:"oauth-app"},n);return Object.assign(uH.bind(null,e),{hook:dH.bind(null,e)})}function Dk(n){return n.includes("-----BEGIN RSA PRIVATE KEY-----")}function Ck(n){return n.includes("-----BEGIN OPENSSH PRIVATE KEY-----")}function v0(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function Tk(n){let e=n.trim().split(`
`).slice(1,-1).join(""),t=atob(e);return v0(t)}function Sk(n,e){return`${bk(n)}.${bk(e)}`}function Ak(n){for(var e="",t=new Uint8Array(n),r=t.byteLength,i=0;i<r;i++)e+=String.fromCharCode(t[i]);return xk(btoa(e))}function xk(n){return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bk(n){return xk(btoa(JSON.stringify(n)))}var{subtle:w0}=globalThis.crypto;function Mk(t){return b(this,arguments,function*({privateKey:n,payload:e}){let r=n;if(Dk(r))throw new Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");if(Ck(r))throw new Error("[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s={alg:"RS256",typ:"JWT"},o=Tk(r),a=yield w0.importKey("pkcs8",o,i,!1,["sign"]),c=Sk(s,e),u=v0(c),d=yield w0.sign(i.name,a,u),f=Ak(d);return`${c}.${f}`})}function _0(r){return b(this,arguments,function*({id:n,privateKey:e,now:t=Math.floor(Date.now()/1e3)}){let i=e.replace(/\\n/g,`
`),s=t-30,o=s+60*10,c=yield Mk({privateKey:i,payload:{iat:s,exp:o,iss:n}});return{appId:n,expiration:o,token:c}})}var Ka=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,kk=new Set,E0=typeof process=="object"&&process?process:{},Nk=(n,e,t,r)=>{typeof E0.emitWarning=="function"?E0.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)},kp=globalThis.AbortController,Rk=globalThis.AbortSignal;if(typeof kp>"u"){Rk=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},kp=class{constructor(){e()}signal=new Rk;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let n=E0.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{n&&(n=!1,Nk("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var fH=n=>!kk.has(n),pte=Symbol("type"),Ji=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),Pk=n=>Ji(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Qa:null:null,Qa=class extends Array{constructor(e){super(e),this.fill(0)}},I0=class n{heap;length;static#s=!1;static create(e){let t=Pk(e);if(!t)return[];n.#s=!0;let r=new n(e,t);return n.#s=!1,r}constructor(e,t){if(!n.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Np=class n{#s;#l;#g;#m;#M;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#r;#n;#e;#u;#h;#c;#o;#v;#a;#w;#_;#f;#E;#T;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#f,sizes:e.#w,keyMap:e.#r,keyList:e.#n,valList:e.#e,next:e.#u,prev:e.#h,get head(){return e.#c},get tail(){return e.#o},free:e.#v,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,r,i,s)=>e.#P(t,r,i,s),moveToTail:t=>e.#x(t),indexes:t=>e.#I(t),rindexes:t=>e.#b(t),isStale:t=>e.#p(t)}}get max(){return this.#s}get maxSize(){return this.#l}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#M}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(e){let{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:f,noUpdateTTL:g,maxSize:m=0,maxEntrySize:w=0,sizeCalculation:D,fetchMethod:C,memoMethod:O,noDeleteOnFetchRejection:V,noDeleteOnStaleGet:L,allowStaleOnFetchRejection:H,allowStaleOnFetchAbort:X,ignoreFetchAbort:Q}=e;if(t!==0&&!Ji(t))throw new TypeError("max option must be a nonnegative integer");let I=t?Pk(t):Array;if(!I)throw new Error("invalid max value: "+t);if(this.#s=t,this.#l=m,this.maxEntrySize=w||this.#l,this.sizeCalculation=D,this.sizeCalculation){if(!this.#l&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(O!==void 0&&typeof O!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=O,C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#M=C,this.#T=!!C,this.#r=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#u=new I(t),this.#h=new I(t),this.#c=0,this.#o=0,this.#v=I0.create(t),this.#i=0,this.#y=0,typeof u=="function"&&(this.#g=u),typeof d=="function"?(this.#m=d,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#E=!!this.#g,this.#d=!!this.#m,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!V,this.allowStaleOnFetchRejection=!!H,this.allowStaleOnFetchAbort=!!X,this.ignoreFetchAbort=!!Q,this.maxEntrySize!==0){if(this.#l!==0&&!Ji(this.#l))throw new TypeError("maxSize must be a positive integer if specified");if(!Ji(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!L,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ji(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Ji(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#s===0&&this.ttl===0&&this.#l===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#l){let v="LRU_CACHE_UNBOUNDED";fH(v)&&(kk.add(v),Nk("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",v,n))}}getRemainingTTL(e){return this.#r.has(e)?1/0:0}#O(){let e=new Qa(this.#s),t=new Qa(this.#s);this.#f=e,this.#_=t,this.#F=(s,o,a=Ka.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#p(s)&&this.#D(this.#n[s],"expire")},o+1);c.unref&&c.unref()}},this.#S=s=>{t[s]=e[s]!==0?Ka.now():0},this.#C=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();let u=s.now-c;s.remainingTTL=a-u}};let r=0,i=()=>{let s=Ka.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#r.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let u=(r||i())-c;return a-u},this.#p=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#S=()=>{};#C=()=>{};#F=()=>{};#p=()=>!1;#B(){let e=new Qa(this.#s);this.#y=0,this.#w=e,this.#A=t=>{this.#y-=e[t],e[t]=0},this.#V=(t,r,i,s)=>{if(this.#t(r))return 0;if(!Ji(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!Ji(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#k=(t,r,i)=>{if(e[t]=r,this.#l){let s=this.#l-e[t];for(;this.#y>s;)this.#N(!0)}this.#y+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#y)}}#A=e=>{};#k=(e,t,r)=>{};#V=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#c));)t=this.#h[t]}*#b({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#c;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#o));)t=this.#u[t]}#L(e){return e!==void 0&&this.#r.get(this.#n[e])===e}*entries(){for(let e of this.#I())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#I()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#b()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#I())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#n[r],this))return this.get(this.#n[r],t)}}forEach(e,t=this){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}rforEach(e,t=this){for(let r of this.#b()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}purgeStale(){let e=!1;for(let t of this.#b({allowStale:!0}))this.#p(t)&&(this.#D(this.#n[t],"expire"),e=!0);return e}info(e){let t=this.#r.get(e);if(t===void 0)return;let r=this.#e[t],i=this.#t(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#f&&this.#_){let o=this.#f[t],a=this.#_[t];if(o&&a){let c=o-(Ka.now()-a);s.ttl=c,s.start=Date.now()}}return this.#w&&(s.size=this.#w[t]),s}dump(){let e=[];for(let t of this.#I({allowStale:!0})){let r=this.#n[t],i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#f&&this.#_){o.ttl=this.#f[t];let a=Ka.now()-this.#_[t];o.start=Math.floor(Date.now()-a)}this.#w&&(o.size=this.#w[t]),e.unshift([r,o])}return e}load(e){this.clear();for(let[t,r]of e){if(r.start){let i=Date.now()-r.start;r.start=Ka.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r,{noUpdateTTL:u=this.noUpdateTTL}=r,d=this.#V(e,t,r.size||0,a);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let f=this.#i===0?void 0:this.#r.get(e);if(f===void 0)f=this.#i===0?this.#o:this.#v.length!==0?this.#v.pop():this.#i===this.#s?this.#N(!1):this.#i,this.#n[f]=e,this.#e[f]=t,this.#r.set(e,f),this.#u[this.#o]=f,this.#h[f]=this.#o,this.#o=f,this.#i++,this.#k(f,d,c),c&&(c.set="add"),u=!1;else{this.#x(f);let g=this.#e[f];if(t!==g){if(this.#T&&this.#t(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=g;m!==void 0&&!o&&(this.#E&&this.#g?.(m,e,"set"),this.#d&&this.#a?.push([m,e,"set"]))}else o||(this.#E&&this.#g?.(g,e,"set"),this.#d&&this.#a?.push([g,e,"set"]));if(this.#A(f),this.#k(f,d,c),this.#e[f]=t,c){c.set="replace";let m=g&&this.#t(g)?g.__staleWhileFetching:g;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#f&&this.#O(),this.#f&&(u||this.#F(f,i,s),c&&this.#C(c,f)),!o&&this.#d&&this.#a){let g=this.#a,m;for(;m=g?.shift();)this.#m?.(...m)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#c];if(this.#N(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}}#N(e){let t=this.#c,r=this.#n[t],i=this.#e[t];return this.#T&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(i,r,"evict"),this.#d&&this.#a?.push([i,r,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#v.push(t)),this.#i===1?(this.#c=this.#o=0,this.#v.length=0):this.#c=this.#u[t],this.#r.delete(r),this.#i--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#r.get(e);if(s!==void 0){let o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(s))i&&(i.has="stale",this.#C(i,s));else return r&&this.#S(s),i&&(i.has="hit",this.#C(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#r.get(e);if(i===void 0||!r&&this.#p(i))return;let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#P(e,t,r,i){let s=t===void 0?void 0:this.#e[t];if(this.#t(s))return s;let o=new kp,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:r,context:i},u=(D,C=!1)=>{let{aborted:O}=o.signal,V=r.ignoreFetchAbort&&D!==void 0;if(r.status&&(O&&!C?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,V&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),O&&!V&&!C)return f(o.signal.reason);let L=m;return this.#e[t]===m&&(D===void 0?L.__staleWhileFetching?this.#e[t]=L.__staleWhileFetching:this.#D(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,D,c.options))),D},d=D=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=D),f(D)),f=D=>{let{aborted:C}=o.signal,O=C&&r.allowStaleOnFetchAbort,V=O||r.allowStaleOnFetchRejection,L=V||r.noDeleteOnFetchRejection,H=m;if(this.#e[t]===m&&(!L||H.__staleWhileFetching===void 0?this.#D(e,"fetch"):O||(this.#e[t]=H.__staleWhileFetching)),V)return r.status&&H.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),H.__staleWhileFetching;if(H.__returned===H)throw D},g=(D,C)=>{let O=this.#M?.(e,s,c);O&&O instanceof Promise&&O.then(V=>D(V===void 0?void 0:V),C),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(D(void 0),r.allowStaleOnFetchAbort&&(D=V=>u(V,!0)))})};r.status&&(r.status.fetchDispatched=!0);let m=new Promise(g).then(u,d),w=Object.assign(m,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,w,te(M({},c.options),{status:void 0})),t=this.#r.get(e)):this.#e[t]=w,w}#t(e){if(!this.#T)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof kp}fetch(r){return b(this,arguments,function*(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:u=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:w=this.ignoreFetchAbort,allowStaleOnFetchAbort:D=this.allowStaleOnFetchAbort,context:C,forceRefresh:O=!1,status:V,signal:L}=t;if(!this.#T)return V&&(V.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:V});let H={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:c,size:u,sizeCalculation:d,noUpdateTTL:f,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:D,ignoreFetchAbort:w,status:V,signal:L},X=this.#r.get(e);if(X===void 0){V&&(V.fetch="miss");let Q=this.#P(e,X,H,C);return Q.__returned=Q}else{let Q=this.#e[X];if(this.#t(Q)){let S=i&&Q.__staleWhileFetching!==void 0;return V&&(V.fetch="inflight",S&&(V.returnedStale=!0)),S?Q.__staleWhileFetching:Q.__returned=Q}let I=this.#p(X);if(!O&&!I)return V&&(V.fetch="hit"),this.#x(X),s&&this.#S(X),V&&this.#C(V,X),Q;let v=this.#P(e,X,H,C),T=v.__staleWhileFetching!==void 0&&i;return V&&(V.fetch=I?"stale":"refresh",T&&I&&(V.returnedStale=!0)),T?v.__staleWhileFetching:v.__returned=v}})}forceFetch(r){return b(this,arguments,function*(e,t={}){let i=yield this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i})}memo(e,t={}){let r=this.#R;if(!r)throw new Error("no memoMethod provided to constructor");let u=t,{context:i,forceRefresh:s}=u,o=gn(u,["context","forceRefresh"]),a=this.get(e,o);if(!s&&a!==void 0)return a;let c=r(e,a,{options:o,context:i});return this.set(e,c,o),c}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#r.get(e);if(a!==void 0){let c=this.#e[a],u=this.#t(c);return o&&this.#C(o,a),this.#p(a)?(o&&(o.get="stale"),u?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),u?c.__staleWhileFetching:(this.#x(a),i&&this.#S(a),c))}else o&&(o.get="miss")}#j(e,t){this.#h[t]=e,this.#u[e]=t}#x(e){e!==this.#o&&(e===this.#c?this.#c=this.#u[e]:this.#j(this.#h[e],this.#u[e]),this.#j(this.#o,e),this.#o=e)}delete(e){return this.#D(e,"delete")}#D(e,t){let r=!1;if(this.#i!==0){let i=this.#r.get(e);if(i!==void 0)if(r=!0,this.#i===1)this.#U(t);else{this.#A(i);let s=this.#e[i];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(s,e,t),this.#d&&this.#a?.push([s,e,t])),this.#r.delete(e),this.#n[i]=void 0,this.#e[i]=void 0,i===this.#o)this.#o=this.#h[i];else if(i===this.#c)this.#c=this.#u[i];else{let o=this.#h[i];this.#u[o]=this.#u[i];let a=this.#u[i];this.#h[a]=this.#h[i]}this.#i--,this.#v.push(i)}}if(this.#d&&this.#a?.length){let i=this.#a,s;for(;s=i?.shift();)this.#m?.(...s)}return r}clear(){return this.#U("delete")}#U(e){for(let t of this.#b({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#n[t];this.#E&&this.#g?.(r,i,e),this.#d&&this.#a?.push([r,i,e])}}if(this.#r.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#f&&this.#_&&(this.#f.fill(0),this.#_.fill(0)),this.#w&&this.#w.fill(0),this.#c=0,this.#o=0,this.#v.length=0,this.#y=0,this.#i=0,this.#d&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#m?.(...r)}}};function Pp(r){return b(this,arguments,function*({appId:n,privateKey:e,timeDifference:t}){try{let i=yield _0({id:n,privateKey:e,now:t&&Math.floor(Date.now()/1e3)+t});return{type:"app",token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(i){throw e==="-----BEGIN RSA PRIVATE KEY-----"?new Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):i}})}function pH(){return new Np({max:15e3,ttl:1e3*60*59})}function gH(n,e){return b(this,null,function*(){let t=Fk(e),r=yield n.get(t);if(!r)return;let[i,s,o,a,c,u]=r.split("|"),d=e.permissions||c.split(/,/).reduce((f,g)=>(/!$/.test(g)?f[g.slice(0,-1)]="write":f[g]="read",f),{});return{token:i,createdAt:s,expiresAt:o,permissions:d,repositoryIds:e.repositoryIds,repositoryNames:e.repositoryNames,singleFileName:u,repositorySelection:a}})}function mH(n,e,t){return b(this,null,function*(){let r=Fk(e),i=e.permissions?"":Object.keys(t.permissions).map(o=>`${o}${t.permissions[o]==="write"?"!":""}`).join(","),s=[t.token,t.createdAt,t.expiresAt,t.repositorySelection,i,t.singleFileName].join("|");yield n.set(r,s)})}function Fk({installationId:n,permissions:e={},repositoryIds:t=[],repositoryNames:r=[]}){let i=Object.keys(e).sort().map(a=>e[a]==="read"?a:`${a}!`).join(","),s=t.sort().join(","),o=r.join(",");return[n,s,o,i].filter(Boolean).join("|")}function Ok({installationId:n,token:e,createdAt:t,expiresAt:r,repositorySelection:i,permissions:s,repositoryIds:o,repositoryNames:a,singleFileName:c}){return Object.assign({type:"token",tokenType:"installation",token:e,installationId:n,permissions:s,createdAt:t,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,a?{repositoryNames:a}:null,c?{singleFileName:c}:null)}function Vk(n,e,t){return b(this,null,function*(){let r=Number(e.installationId||n.installationId);if(!r)throw new Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(e.factory){let V=M(M({},n),e),{type:L,factory:H,oauthApp:X}=V,Q=gn(V,["type","factory","oauthApp"]);return H(Q)}let i=Object.assign({installationId:r},e);if(!e.refresh){let L=yield gH(n.cache,i);if(L){let{token:H,createdAt:X,expiresAt:Q,permissions:I,repositoryIds:v,repositoryNames:_,singleFileName:T,repositorySelection:S}=L;return Ok({installationId:r,token:H,createdAt:X,expiresAt:Q,permissions:I,repositorySelection:S,repositoryIds:v,repositoryNames:_,singleFileName:T})}}let s=yield Pp(n),o=t||n.request,{data:{token:a,expires_at:c,repositories:u,permissions:d,repository_selection:f,single_file:g}}=yield o("POST /app/installations/{installation_id}/access_tokens",{installation_id:r,repository_ids:e.repositoryIds,repositories:e.repositoryNames,permissions:e.permissions,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${s.token}`}}),m=d||{},w=f||"all",D=u?u.map(L=>L.id):void 0,C=u?u.map(L=>L.name):void 0,O=new Date().toISOString();return yield mH(n.cache,i,{token:a,createdAt:O,expiresAt:c,repositorySelection:w,permissions:m,repositoryIds:D,repositoryNames:C,singleFileName:g}),Ok({installationId:r,token:a,createdAt:O,expiresAt:c,repositorySelection:w,permissions:m,repositoryIds:D,repositoryNames:C,singleFileName:g})})}function yH(n,e){return b(this,null,function*(){switch(e.type){case"app":return Pp(n);case"oauth-app":return n.oauthApp({type:"oauth-app"});case"installation":return Vk(n,te(M({},e),{type:"installation"}));case"oauth-user":return n.oauthApp(e);default:throw new Error(`Invalid auth type: ${e.type}`)}})}var vH=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/app/installation-requests","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"];function wH(n){let t=`^(?:${n.map(r=>r.split("/").map(i=>i.startsWith("{")?"(?:.+?)":i).join("/")).map(r=>`(?:${r})`).join("|")})$`;return new RegExp(t,"i")}var _H=wH(vH);function EH(n){return!!n&&_H.test(n.split("?")[0])}var IH=5*1e3;function bH(n){return!(n.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||n.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}function DH(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r),s=i.url;if(/\/login\/oauth\/access_token$/.test(s))return e(i);if(EH(s.replace(e.endpoint.DEFAULTS.baseUrl,""))){let{token:c}=yield Pp(n);i.headers.authorization=`bearer ${c}`;let u;try{u=yield e(i)}catch(d){if(bH(d)||typeof d.response.headers.date>"u")throw d;let f=Math.floor((Date.parse(d.response.headers.date)-Date.parse(new Date().toString()))/1e3);n.log.warn(d.message),n.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${f} seconds. Retrying request with the difference accounted for.`);let{token:g}=yield Pp(te(M({},n),{timeDifference:f}));return i.headers.authorization=`bearer ${g}`,e(i)}return u}if(Cu(s)){let c=yield n.oauthApp({type:"oauth-app"});return i.headers.authorization=c.headers.authorization,e(i)}let{token:o,createdAt:a}=yield Vk(n,{},e.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,Lk(n,e,i,a)})}function Lk(n,e,t,r,i=0){return b(this,null,function*(){let s=+new Date-+new Date(r);try{return yield e(t)}catch(o){if(o.status!==401)throw o;if(s>=IH)throw i>0&&(o.message=`After ${i} retries within ${s/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let a=i*1e3;return n.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${a/1e3}s)`),yield new Promise(c=>setTimeout(c,a)),Lk(n,e,t,r,i)}})}var CH="7.1.1";function b0(n){if(!n.appId)throw new Error("[@octokit/auth-app] appId option is required");if(!n.privateKey)throw new Error("[@octokit/auth-app] privateKey option is required");if("installationId"in n&&!n.installationId)throw new Error("[@octokit/auth-app] installationId is set to a falsy value");let e=Object.assign({warn:console.warn.bind(console)},n.log),t=n.request||Be.defaults({headers:{"user-agent":`octokit-auth-app.js/${CH} ${Xt()}`}}),r=Object.assign({request:t,cache:pH()},n,n.installationId?{installationId:Number(n.installationId)}:{},{log:e,oauthApp:Ik({clientType:"github-app",clientId:n.clientId||"",clientSecret:n.clientSecret||"",request:t})});return Object.assign(yH.bind(null,r),{hook:DH.bind(null,r)})}var Pt=(()=>{let e=class e{constructor(r){this._http=r,this.applicationId="1012063",this.privateKey=`-----BEGIN PRIVATE KEY-----
  MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCnxYEcKaEsyRx7
  8VicDgz+XwMOECEVLtMWwmfn0bdilPKLVTJRZF12Hz0BAckilc3nW7tTAikDpXyw
  efTnmt9DQhI6mAlpfIx8l7yNoucj1xxOzclZy6noOke9CSjhu8UhcrRd6XoYGvQH
  vKjttln1tv0EgyIREnAbHNPhK8b1SpHE/MzaJs9yCNU4lidwmHEl/hw+lzrUp+O2
  7Gi38WLJEaycChXtq94b6z5866cqgi0pPz+FTQNHlRg2rei2XGfb7pHxzQPkouS1
  Cg+3NZ15cPv9jsAk15HRMr/1fV8xk4JZ+V403zlCAl6gKaogfeZbC+3OTPNKvw4o
  HVHlcSYPAgMBAAECggEAGjDcCgB5t9shhjvUIHCVGLTObkiYUY1AyOHKhMcZgNtN
  zfCb7VbkvEb+KAUWWD7YqRCJ+thwfLA9+fLgB7QGvKI45ErN1VjrOZwahGX0/YRc
  V/UKROlleep3PoyKhEri6GjWvX5wYAj9JaQPHyUDgDdz4ltyWwXs2F60uQczhSFB
  NIeF55lyN3/cqBUHNQalrlD64LXwZLzviS8dpTIH1Qsp+S7TJgGM9NgeQ8yYiyzz
  tduux+gu6IxgL1aOgBiBonRFZdfAySws1mUhYvPWr1fzn64kaYsiDqXwCdmKmzxx
  +RbXGWvKX/wctN6454E1UlTPWVVOx4SHZ4Yf03ulWQKBgQDb4ZQqHb0chwFvHTIW
  pIc5DMmepQ2+/syxXumjrNMpi3sltmnGNu/n7DebuiyZOaFlHrDKLcC4WO/ILPe6
  O1A/LjgliTsHiQYmaB/XRj5iy6pGYra0esxFuhWZeYTJ00yBwpWGpAh91TvpxGcR
  PweOToPvq+nZi6tgVbMRu5gUkwKBgQDDVJ1yPYSAhnBDGkXU8XQp1jrKkzxwO7Zo
  UDAJ69LbTmC6rw7s4ZRT6KmS/7p3g7HXz1HQaEN7u1fzie5I8AZvhE21y42w9+z2
  r41rW+Q/IM+3102L6Okm9o91aLCIozyWgoBWXuXM67/oj4HlXgTZOVeiGZAcwN7o
  2PUjkrpyFQKBgEts4RdlZiawBQTpnfH4dE5UnaDm+4UmAG9joH+93B2nNBImtbgB
  xl/nPtgTkBLrmvqGAZ0I/s/96hrfmgbvK8LQhwARSAd4sHxiQXHmLaZUOM+2MvhM
  G2BbyecAsVVOPzNP3Vz3TdZkXA3/il93II9nTYjcjvZKG/qKy0ds82kzAoGBAIAo
  KTFGKYSGMGvmdgDT9upoM6Sr29CrbO+eBRbNUkgvcYmqx/klvEMdeP0Iqlg14N5+
  mOhLMFOjRH52dhAG48IRJUds6Wc+E4x6/Cd/YA8HQSIWsjtksmytAsz+xiywJVV/
  BCMnGlFMMFqupYRPHpFDbTre2M30wYw2pQgVAh1NAoGBANDbSx25LnRwUlgsA1Go
  c6YXlZ+ggQfjYfCjMjj26I/nLzxCQe3Ghw/dSI0IVQ6kjFWkNVllEaA7ESxMKAtq
  W+9Tc4e7MN5sqQoTIos0um2l+7BJaft/14WB1GxQiK2grgff8BtiQQuUORBl/F4g
  D2tNDflWM97viVfizU9grXkW
  -----END PRIVATE KEY-----`,this.installationId="Iv23li7aCJeV1yPt8rcr",this.accessToken=null,this.fetchOptions={},this.httpHeaders=new bn({Accept:"application/json"}),this.ghUser={authenticated:!1,name:"",login:"",avatar_url:"/assets/github-logo.png",email:""},this.token={access_token:"",scope:"",token_type:""},this.octokit=new p0({authStrategy:b0,auth:{appId:this.applicationId,privateKey:this.privateKey}})}getInstallationId(r){return b(this,null,function*(){this.installationId="";try{let i=yield this.octokit.request("GET /repos/{owner}/my/installation",{owner:r,repo:"my"});return i.status==200?(this.installationId=i.data.id,this.octokit=new p0({authStrategy:b0,auth:{appId:this.applicationId,privateKey:this.privateKey,installationId:this.installationId}}),this.installationId):null}catch(i){console.debug("Error fetching InstallationId :",i)}return null})}getJwtToken(r,i=""){return b(this,null,function*(){let s=null;if(r)try{yield this.getInstallationId(r)}catch(o){console.debug("Error fetching InstallationId :",o)}if(this.installationId)try{let o=yield this.octokit.auth({type:"app"});o.token&&(this.fetchOptions={headers:{Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${o.token}`,"X-GitHub-Api-Version":"2022-11-28"}},s=o.token)}catch(o){throw console.error("Error fetching JWT:",o),o}return s})}getAccessToken(r){return b(this,null,function*(){if(this.accessToken=null,this.installationId)try{let i=yield fetch(`https://api.github.com/app/installations/${this.installationId}/access_tokens`,te(M({},this.fetchOptions),{method:"POST"}));if(i.ok){let s=yield i.json();this.fetchOptions={headers:{"X-GitHub-Api-Version":"2022-11-28",Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${s.token}`}},this.accessToken=s.token}return this.accessToken}catch(i){throw console.error("Error fetching AccessToken:",i),i}return this.accessToken})}getInstalledContent(r,i="README.md"){return b(this,null,function*(){let s="Resource not Found";try{s=yield this.get(`repos/${r}/my/contents/${i}`)}catch(o){console.error("Error fetching repository:",o)}return s})}setToken(r){this.token=r}getSavedToken(){return this.ghUser.authenticated?this.token.access_token:""}getSavedUser(){return this.ghUser}isAuthenticated(){return this.ghUser.authenticated}setUserAuthenticated(r){this.ghUser.authenticated=r}setEmail(r){this.ghUser.email=r}getEmail(){return this.ghUser.email}setName(r){this.ghUser.name=r}setUserId(r){this.ghUser.login=r}getUserId(){return this.ghUser.login}setAvatar(r){return this.ghUser.avatar_url=r}creatHttpHeaders(r){return this.httpHeaders.append("Authorization","Bearer "+r)}getAuthUrl(){return`${he.gh_auth_url}?client_id=${he.client_id}`}getInstalledAccessToken(){return this.accessToken}hasInstalledAccessToken(){return this.accessToken!=null}getToken(r){return he.production?this._http.get(`${he.host}/ghproxy.php?code=${r}`):this._http.get(`${he.host}/token/ghproxy.php?code=${r}`)}getUser(r){return this._http.get(`${he.gh_api_url}/user`,{headers:this.creatHttpHeaders(r)})}getInternalArticleContent(r,i=""){return r=i?`${i}/${r}`:r,this.getMdFileContent(he.gh_default_user_repo,r)}getReadMeContent(r){let i=`${he.gh_dr_url}/${r}/${he.gh_dr_folder}/README.md`;return fetch(i,this.fetchOptions).then(s=>s.ok?s.text():Promise.reject("Resource not found"))}getMdFileContent(r,i){i=i.replace(/^\/?/,"")+(i.endsWith(".md")?"":".md");let s=Le.getGhUserFilePath(r,i,this.accessToken!=null);return fetch(s,this.fetchOptions).then(o=>o.ok?o.text():Promise.reject("Resource not found"))}getFileContent(r,i,s){return s=i?`${i}/${s}`:s,this.getMdFileContent(r,s)}getLocalFileContent(r){return fetch(r,this.fetchOptions).then(i=>i.ok?i:Promise.reject("Resource not found"))}getGhDirectoryContents(r,i=!0,s=""){let o=`${he.gh_api_url}/repos/${r}/my/git/trees/main`;i||(o=`${he.gh_api_url}/repos/${r}/my/contents/${s}?ref=main`),o+=i?"?recursive=1":"";let a={root:"/",files:[],folders:[]};return fetch(o,this.fetchOptions).then(c=>c.ok?c.json():Promise.reject("Directory not found")).then(c=>{let u;if(c.tree?u=c.tree:u=c,u&&u.forEach(d=>{if(d.type==="tree"||d.type==="dir"){let f=d.path.split("/")[0];a.folders.includes(f)||a.folders.push(f)}else(d.type==="file"||d.type==="blob"&&d.path!=".DS_Store")&&a.files.push(d.path)}),s){let d=Le.getFilesInFolder(a,s);a.root=s,a.files=d}return Promise.resolve(a)}).catch(c=>Promise.reject("Folder not found"))}getFirstCertificate(r="certificates"){return this.getGhDirectoryContents(he.gh_default_user_repo,!1,r).then(i=>{let s=i;return s.files&&s.files.length==0?Promise.reject(""):Promise.resolve(`${he.gh_dr_url}/${he.gh_default_user_repo}/${he.gh_dr_folder}/${s.files[0]}`)})}get(r){return fetch(`${he.gh_api_url}/${r}`,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("Resource not found"))}};e.\u0275fac=function(i){return new(i||e)(B(ri))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var jk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-webfront-jumbotron"]],decls:39,vars:0,consts:[[1,"masthead"],[1,"container","px-4","px-lg-5","d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","justify-content-center"],[1,"text-center"],[1,"mx-auto","my-0","text-uppercase"],[1,"text-white-50","mx-auto","mt-2","mb-5"],["href","#about",1,"btn","btn-primary"],["id","about",1,"about-section","text-center"],[1,"container","px-lg-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"text-white","mb-4"],[1,"text-white-50"],[1,"row","py-4","justify-content-center"],["id","contactForm","data-sb-form-api-token","API_TOKEN",1,"form-signup"],[1,"row","input-group-newsletter","justify-content-center"],[1,"col-6"],["id","emailAddress","type","email","placeholder","Enter email address...","aria-label","Enter email address...","data-sb-validations","required,email",1,"form-control"],[1,"col-auto"],["id","submitButton","type","Submit","onclick","sendMessage()",1,"btn","btn-primary"],["data-sb-feedback","emailAddress:required",1,"invalid-feedback","mt-2"],["data-sb-feedback","emailAddress:email",1,"invalid-feedback","mt-2"],["id","submitSuccessMessage",1,"d-none"],[1,"text-center","mb-3","mt-2","text-white"],[1,"fw-bolder"],["href",""],["id","submitErrorMessage",1,"d-none"],[1,"text-center","text-danger","mb-3","mt-2"]],template:function(i,s){i&1&&(k(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),U(5,"Own your own Homepage"),F(),k(6,"h2",5),U(7,"Want to Own a Public Homepage ?"),F(),k(8,"a",6),U(9,"Get Started"),F()()()()(),k(10,"section",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2",11),U(15,"Your PublicHome.Page is Your secret sauce!"),F(),k(16,"div",12),U(17," Boost your business or portfolio's visibility to millions with a strong public presence. It's easy to get started ! Contact us today and elevate your brand. "),F()()(),k(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16),ce(22,"input",17),F(),k(23,"div",18)(24,"button",19),U(25,"Notify"),F()()(),k(26,"div",20),U(27,"An email is required."),F(),k(28,"div",21),U(29,"Email is not valid."),F(),k(30,"div",22)(31,"div",23)(32,"div",24),U(33,"Thank you for your interest!"),F(),ce(34,"br")(35,"a",25),F()(),k(36,"div",26)(37,"div",27),U(38,"Error sending message!"),F()()()()()())},dependencies:[QM,zM,I_]});let n=e;return n})();var Uk=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.homePageFile=ne.readme_home;let o=s.snapshot.url[0];o&&o.path=="questions"&&(this.homePageFile=ne.fab_questions_list2)}};e.\u0275fac=function(i){return new(i||e)(q(Pt),q(Ln),q(Cn))},e.\u0275cmp=Ae({type:e,selectors:[["app-webfront-main"]],decls:5,vars:1,consts:[[1,"container"],["id","questions",1,"row","justify-content-center"],[1,""],[1,"container",3,"src"]],template:function(i,s){i&1&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),U(4,`
            `),F()()()()),i&2&&(j(3),ee("src",s.homePageFile))},dependencies:[Kn]});let n=e;return n})();var Bk=(()=>{let e=class e extends Yn{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.metaService=o,this.messaging.event$.subscribe(a=>{switch(a.cmd){case"UserContext":ne.homeUser=ne.ghUser;break;case"UserDirectory":this.messaging.send({cmd:"PageFile",file:"HomeGHUser"});break;default:break}})}ngOnInit(){this.metaService.addTag({name:"keywords",content:"My Brand, Your brand, Your landing page, Resume Builder, Resume"}),this.metaService.addTag({name:"description",content:"Own your Own page ! Create your brand, Reach millions"})}ngOnDestroy(){}};e.\u0275fac=function(i){return new(i||e)(q(Zt),q(Pt),q(Dn),q(aM))},e.\u0275cmp=Ae({type:e,selectors:[["home"]],features:[wt],decls:2,vars:0,template:function(i,s){i&1&&ce(0,"app-webfront-jumbotron")(1,"app-webfront-main")},dependencies:[jk,Uk]});let n=e;return n})();var AH=n=>({"text-center":n});function xH(n,e){if(n&1&&(k(0,"h2"),U(1),F()),n&2){let t=ue(2);j(),Ve(t.contacts_title)}}function MH(n,e){if(n&1&&(k(0,"a",15),ce(1,"i"),U(2),F()),n&2){let t=ue().$implicit,r=ue(2);Nn("href",r.availableLinks.get(t.key),dt),j(),Sf("fa-brands fa-",t.key,""),pa("color",r.iconsByKey.get(t.key)),j(),Lt(" ",r.availableTexts.get(t.key),"")}}function RH(n,e){if(n&1&&(k(0,"a",15),U(1),F()),n&2){let t=ue().$implicit,r=ue(2);ee("href",r.availableLinks.get(t.key),dt),j(),Ve(r.availableLinks.get(t.key))}}function kH(n,e){if(n&1&&(k(0,"div"),Ce(1,MH,3,7,"a",14)(2,RH,2,2,"ng-template",null,0,Ia),F()),n&2){let t=e.$implicit,r=va(3);j(),ee("ngIf",t.key!="link")("ngIfElse",r)}}function NH(n,e){if(n&1&&(k(0,"div",9)(1,"div",10),ce(2,"img",11),k(3,"h5"),U(4),F(),k(5,"p"),U(6),F(),Ce(7,xH,2,1,"h2",12)(8,kH,4,2,"div",13),jt(9,"keyvalue"),jt(10,"slice"),F()()),n&2){let t=ue();j(2),Nn("src",t.userData.avatar_url,dt),j(2),Ve(t.userData.name||t.userData.login),j(2),Ve(t.userData.bio),j(),ee("ngIf",t.contacts_title),j(),ee("ngForOf",Ea(10,7,Pn(9,5,t.availableLinks),0,7))}}function PH(n,e){if(n&1&&(k(0,"a",16),ce(1,"img",17),F()),n&2){let t=e.$implicit;j(),Nn("src",t,dt)}}var D0=(()=>{let e=class e extends Yn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.badgesAvailable=[],this.contactPageContent="Loading..",this.contactsContent="",this.availableLinks=new Map,this.availableTexts=new Map,this.iconsByKey=ne.iconsColorByKey,this.useUsersContent=!1,this.firstList=!0,this.firstHtml=!0,this.contacts_title="",this.userData={},this.certificateLink="",this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.titleService.setTitle(ne.ghUser.name),this.userData=ne.ghUser,this.githubService.getMdFileContent(ne.ghUserLoaded,this.routerFileUrl).then(u=>this.contactPageContent=u);break;case"UserDirectory":let c=Le.getFilesInFolder(ne.userContext.directory,"certificates/badges");for(let u of c){let d=Le.getGhUserFilePath(ne.ghUserLoaded,u,this.githubService.hasInstalledAccessToken());this.badgesAvailable.push(d),this.badgesAvailable.length==1&&(this.certificateLink=this.badgesAvailable[0])}break;default:break}})}ngOnInit(){ne.contactLinksByKey.clear(),this.markdownService.renderer.html=r=>(this.useUsersContent=this.firstHtml?Le.getFirstLine(r)=="<!-- My Contacts -->":this.useUsersContent,this.firstHtml=!1,r),this.markdownService.renderer.list=(r,i,s)=>this.firstList||!this.useUsersContent?(this.firstList=!1,""):it.prototype.list.call(this.markdownService.renderer,r,i,s)}onMarkdownReady(){this.firstHtml,this.iconsByKey=ne.iconsColorByKey,this.availableLinks=ne.contactLinksByKey,this.availableTexts=ne.contactTextsByKey,this.messaging.send({cmd:"PageFile",file:"Contacts"})}};e.\u0275fac=function(i){return new(i||e)(q(Zt),q(Pt),q(Dn))},e.\u0275cmp=Ae({type:e,selectors:[["app-contact"]],features:[wt],decls:9,vars:6,consts:[["nonbrandLink",""],[1,"container"],[1,"row","justify-content-center",3,"ngClass"],[1,"col-lg-8"],[1,"container",3,"ready","data"],["class","row justify-content-center",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-center"],["href","/certificates",4,"ngFor","ngForOf"],[1,"row","justify-content-center"],[1,"col-lg-6"],["alt","Passport Pic",1,"col-4","rounded-circle",3,"src"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","btn btn-outline-secondary my-2","style","width:100%","target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",1,"btn","btn-outline-secondary","my-2",2,"width","100%",3,"href"],["href","/certificates"],["alt","Thumbnail Image",3,"src"]],template:function(i,s){i&1&&(k(0,"div",1)(1,"div",2)(2,"div",3)(3,"markdown",4),Oe("ready",function(){return s.onMarkdownReady()}),U(4,`
            `),F()(),Ce(5,NH,11,11,"div",5),k(6,"div",6)(7,"div",7),Ce(8,PH,2,1,"a",8),F()()()()),i&2&&(j(),ee("ngClass",Rf(4,AH,!s.useUsersContent)),j(2),ee("data",s.contactPageContent),j(2),ee("ngIf",!s.useUsersContent),j(3),ee("ngForOf",s.badgesAvailable))},dependencies:[Ca,Qt,Yt,Kn,Ta,zi]});let n=e;return n})();function OH(n,e){if(n&1&&(k(0,"a",9),ce(1,"i"),F()),n&2){let t=ue().$implicit,r=ue();ee("href",r.availableLinks.get(t.key),dt),j(),Sf("fa-brands fa-",t.key,""),pa("color",r.iconsByKey.get(t.key))}}function FH(n,e){if(n&1&&(k(0,"a",9),ce(1,"i",10),F()),n&2){let t=ue().$implicit,r=ue();ee("href",r.availableLinks.get(t.key),dt)}}function VH(n,e){if(n&1&&(k(0,"li"),Ce(1,OH,2,6,"a",8)(2,FH,2,1,"ng-template",null,0,Ia),F()),n&2){let t=e.$implicit,r=va(3),i=ue();j(),ee("ngIf",i.hasBrandLink(t.key))("ngIfElse",r)}}var $k=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.messaging=i,this.route=s,this.footerNote="Copyright",this.contactsFileUrl=ne.user_contacts,this.availableLinks=new Map,this.iconsByKey=ne.iconsColorByKey,this.oldRender={}}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"UserDirectory":this.footerNote="Powered By",this.loadContacts(ne.userContext.username);break;case"PageFile":switch(i.file){case"HomeGHUser":this.footerNote="Copyright";break;case"Contacts":this.availableLinks=ne.contactLinksByKey;break;default:break}break;default:break}}),this.loadContacts(he.gh_default_user_repo)}availableKeys(){return this.availableLinks.keys()}loadContacts(r){this.githubService.getMdFileContent(r,"contacts.md").then(i=>{ne.contactLinksByKey.clear(),this.parseMarkdownWithCustomRenderer(i)}).catch(i=>{console.log("Contacts not available")}).finally(()=>{this.availableLinks=ne.contactLinksByKey})}parseMarkdownWithCustomRenderer(r){let i=new it;return i.link=(s,o,a)=>{try{if(s){let u=new URL(s).hostname.replace("www.","");u=u.substring(0,u.lastIndexOf(".")),u=Le.closestHost(u),ne.contactLinksByKey.set(u,s),ne.iconsColorByKey.has(u)?ne.contactTextsByKey.set(u,this.getHostText(u)):ne.contactTextsByKey.set(u,a!=s?Le.unescape(a):this.getHostText(u))}}catch{}return it.prototype.link.call(i,s,o,a)},xe(r,{renderer:i})}hasBrandLink(r){return r!="link"&&ne.iconsColorByKey.get(r)}ngAfterViewInit(){}getHostText(r){switch(r){case"youtube":return"YouTube";case"github":return"Github";case"linkedin":return"Linkedin";default:break}return r}};e.\u0275fac=function(i){return new(i||e)(q(Pt),q(Jt),q(Cn))},e.\u0275cmp=Ae({type:e,selectors:[["app-footer"]],decls:12,vars:8,consts:[["nonbrandLink",""],["id","contact",1,"text-center"],[1,"container"],[1,"socials-media","text-center"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"credits"],["href","/"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"fa-solid","fa-link"]],template:function(i,s){i&1&&(k(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4),Ce(4,VH,4,2,"li",5),jt(5,"keyvalue"),jt(6,"slice"),F()(),k(7,"div",6),U(8),k(9,"a",7),U(10,"www.publichome.page"),F(),U(11," All rights reserved. "),F()()()),i&2&&(j(4),ee("ngForOf",Ea(6,4,Pn(5,2,s.availableLinks),0,7)),j(4),Lt(" ",s.footerNote," \xA9 "))},dependencies:[Qt,Yt,Ta,zi],styles:['#contact[_ngcontent-%COMP%]{background:#f7f7f7;padding-top:25px;padding-bottom:25px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]{width:100%}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;float:none;margin:0}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-right:10px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:24px;color:#999;letter-spacing:.1em;font-weight:500;background:transparent;text-transform:uppercase;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8a07e;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.1em;font-weight:500;margin-top:0;text-transform:uppercase}.credits[_ngcontent-%COMP%]{font-size:13px}pre.code[_ngcontent-%COMP%]{white-space:pre-wrap}pre.code[_ngcontent-%COMP%]:before{counter-reset:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";width:8em;padding-left:auto;margin-left:auto;text-align:right}']});let n=e;return n})();var zk=(()=>{let e=class e{constructor(){this.WIT_URL="https://api.wit.ai/message?v=20211010&q=",this.WIT_TOKEN="GLM547LWVQYPHR6QWS5ADO3YYTB6ZRI3"}getIntent(r){return b(this,null,function*(){return fetch(`https://api.wit.ai/message?v=20211010&q=${encodeURIComponent(r.substring(0,250))}`,{headers:{Authorization:`Bearer ${this.WIT_TOKEN}`}}).then(i=>i.ok?i.json():Promise.reject(i.statusText))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Ut=[];for(Op=0;Op<256;++Op)Ut.push((Op+256).toString(16).slice(1));var Op;function qk(n,e=0){return(Ut[n[e+0]]+Ut[n[e+1]]+Ut[n[e+2]]+Ut[n[e+3]]+"-"+Ut[n[e+4]]+Ut[n[e+5]]+"-"+Ut[n[e+6]]+Ut[n[e+7]]+"-"+Ut[n[e+8]]+Ut[n[e+9]]+"-"+Ut[n[e+10]]+Ut[n[e+11]]+Ut[n[e+12]]+Ut[n[e+13]]+Ut[n[e+14]]+Ut[n[e+15]]).toLowerCase()}var Fp,jH=new Uint8Array(16);function C0(){if(!Fp&&(Fp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Fp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Fp(jH)}var UH=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),T0={randomUUID:UH};function BH(n,e,t){if(T0.randomUUID&&!e&&!n)return T0.randomUUID();n=n||{};var r=n.random||(n.rng||C0)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return qk(r)}var S0=BH;var Hk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Gk={};var Xi,A0;(function(){var n;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(T,S,x){for(var E=Array(arguments.length-2),jr=2;jr<arguments.length;jr++)E[jr-2]=arguments[jr];return v.prototype[S].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(S=0;16>S;++S)T[S]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],S=I.g[2];var x=I.g[3],E=v+(x^_&(S^x))+T[0]+3614090360&4294967295;v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[1]+3905402710&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[2]+606105819&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[3]+3250441966&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[4]+4118548399&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[5]+1200080426&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[6]+2821735955&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[7]+4249261313&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[8]+1770035416&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[9]+2336552879&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[10]+4294925233&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[11]+2304563134&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[12]+1804603682&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[13]+4254626195&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[14]+2792965006&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[15]+1236535329&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(S^x&(_^S))+T[1]+4129170786&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[6]+3225465664&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[11]+643717713&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[0]+3921069994&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[5]+3593408605&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[10]+38016083&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[15]+3634488961&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[4]+3889429448&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[9]+568446438&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[14]+3275163606&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[3]+4107603335&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[8]+1163531501&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[13]+2850285829&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[2]+4243563512&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[7]+1735328473&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[12]+2368359562&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(_^S^x)+T[5]+4294588738&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[8]+2272392833&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[11]+1839030562&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[14]+4259657740&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[1]+2763975236&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[4]+1272893353&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[7]+4139469664&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[10]+3200236656&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[13]+681279174&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[0]+3936430074&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[3]+3572445317&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[6]+76029189&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[9]+3654602809&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[12]+3873151461&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[15]+530742520&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[2]+3299628645&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(S^(_|~x))+T[0]+4096336452&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[7]+1126891415&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[14]+2878612391&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[5]+4237533241&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[12]+1700485571&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[3]+2399980690&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[10]+4293915773&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[1]+2240044497&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[8]+1873313359&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[15]+4264355552&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[6]+2734768916&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[13]+1309151649&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[4]+4149444226&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[11]+3174756917&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[2]+718787259&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+x&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,T=this.B,S=this.h,x=0;x<v;){if(S==0)for(;x<=_;)i(this,I,x),x+=this.blockSize;if(typeof I=="string"){for(;x<v;)if(T[S++]=I.charCodeAt(x++),S==this.blockSize){i(this,T),S=0;break}}else for(;x<v;)if(T[S++]=I[x++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var T=0;32>T;T+=8)I[_++]=this.g[v]>>>T&255;return I};function s(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function o(I,v){this.h=v;for(var _=[],T=!0,S=I.length-1;0<=S;S--){var x=I[S]|0;T&&x==v||(_[S]=x,T=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return C(u(-I));for(var v=[],_=1,T=0;I>=_;T++)v[T]=I/_|0,_*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return C(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(v,8)),T=f,S=0;S<I.length;S+=8){var x=Math.min(8,I.length-S),E=parseInt(I.substring(S,S+x),v);8>x?(x=u(Math.pow(v,x)),T=T.j(x).add(u(E))):(T=T.j(_),T=T.add(u(E)))}return T}var f=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-C(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var T=this.i(_);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(D(this))return"-"+C(this).toString(I);for(var v=u(Math.pow(I,6)),_=this,T="";;){var S=H(_,v).g;_=O(_,S.j(v));var x=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=S,w(_))return x+T;for(;6>x.length;)x="0"+x;T=x+T}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=O(this,I),D(I)?-1:w(I)?0:1};function C(I){for(var v=I.g.length,_=[],T=0;T<v;T++)_[T]=~I.g[T];return new o(_,~I.h).add(g)}n.abs=function(){return D(this)?C(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0,S=0;S<=v;S++){var x=T+(this.i(S)&65535)+(I.i(S)&65535),E=(x>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=E>>>16,x&=65535,E&=65535,_[S]=E<<16|x}return new o(_,_[_.length-1]&-2147483648?-1:0)};function O(I,v){return I.add(C(v))}n.j=function(I){if(w(this)||w(I))return f;if(D(this))return D(I)?C(this).j(C(I)):C(C(this).j(I));if(D(I))return C(this.j(C(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],T=0;T<2*v;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var x=this.i(T)>>>16,E=this.i(T)&65535,jr=I.i(S)>>>16,Lc=I.i(S)&65535;_[2*T+2*S]+=E*Lc,V(_,2*T+2*S),_[2*T+2*S+1]+=x*Lc,V(_,2*T+2*S+1),_[2*T+2*S+1]+=E*jr,V(_,2*T+2*S+1),_[2*T+2*S+2]+=x*jr,V(_,2*T+2*S+2)}for(T=0;T<v;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=v;T<2*v;T++)_[T]=0;return new o(_,0)};function V(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function L(I,v){this.g=I,this.h=v}function H(I,v){if(w(v))throw Error("division by zero");if(w(I))return new L(f,f);if(D(I))return v=H(C(I),v),new L(C(v.g),C(v.h));if(D(v))return v=H(I,C(v)),new L(C(v.g),v.h);if(30<I.g.length){if(D(I)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,T=v;0>=T.l(I);)_=X(_),T=X(T);var S=Q(_,1),x=Q(T,1);for(T=Q(T,2),_=Q(_,2);!w(T);){var E=x.add(T);0>=E.l(I)&&(S=S.add(_),x=E),T=Q(T,1),_=Q(_,1)}return v=O(I,S.j(v)),new L(S,v)}for(S=f;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),x=u(_),E=x.j(v);D(E)||0<E.l(I);)_-=T,x=u(_),E=x.j(v);w(x)&&(x=g),S=S.add(x),I=O(I,E)}return new L(S,I)}n.A=function(I){return H(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)&I.i(T);return new o(_,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)|I.i(T);return new o(_,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)^I.i(T);return new o(_,this.h^I.h)};function X(I){for(var v=I.g.length+1,_=[],T=0;T<v;T++)_[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(_,I.h)}function Q(I,v){var _=v>>5;v%=32;for(var T=I.g.length-_,S=[],x=0;x<T;x++)S[x]=0<v?I.i(x+_)>>>v|I.i(x+_+1)<<32-v:I.i(x+_);return new o(S,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,A0=Gk.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Xi=Gk.Integer=o}).apply(typeof Hk<"u"?Hk:typeof self<"u"?self:typeof window<"u"?window:{});var Vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},di={};var x0,$H,Ya,M0,Tu,Lp,R0,k0,N0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vp=="object"&&Vp];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var A=l[y];if(!(A in p))break e;p=p[A]}l=l[l.length-1],y=p[l],h=h(y),h!=y&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,y=!1,A={next:function(){if(!y&&p<l.length){var N=p++;return{value:h(N,l[N]),done:!1}}return y=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,y),l.apply(h,A)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function w(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(y,A,N){for(var Y=Array(arguments.length-2),He=2;He<arguments.length;He++)Y[He-2]=arguments[He];return h.prototype[A].apply(y,Y)}}function D(l){let h=l.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=l[y];return p}return[]}function C(l,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let A=l.length||0,N=y.length||0;l.length=A+N;for(let Y=0;Y<N;Y++)l[A+Y]=y[Y]}else l.push(y)}}class O{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function V(l){return/^[\s\xa0]*$/.test(l)}function L(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function H(l){return H[" "](l),l}H[" "]=function(){};var X=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function Q(l,h,p){for(let y in l)h.call(p,l[y],y,l)}function I(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function v(l){let h={};for(let p in l)h[p]=l[p];return h}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,h){let p,y;for(let A=1;A<arguments.length;A++){y=arguments[A];for(p in y)l[p]=y[p];for(let N=0;N<_.length;N++)p=_[N],Object.prototype.hasOwnProperty.call(y,p)&&(l[p]=y[p])}}function S(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function x(l){a.setTimeout(()=>{throw l},0)}function E(){var l=mm;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class jr{constructor(){this.h=this.g=null}add(h,p){let y=Lc.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var Lc=new O(()=>new QO,l=>l.reset());class QO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let jc,Uc=!1,mm=new jr,Xb=()=>{let l=a.Promise.resolve(void 0);jc=()=>{l.then(YO)}};var YO=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(p){x(p)}var h=Lc;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Uc=!1};function Ei(){this.s=this.s,this.C=this.C}Ei.prototype.s=!1,Ei.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ei.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function zt(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}zt.prototype.h=function(){this.defaultPrevented=!0};var ZO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Bc(l,h){if(zt.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(X){e:{try{H(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:JO[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Bc.aa.h.call(this)}}w(Bc,zt);var JO={2:"touch",3:"pen",4:"mouse"};Bc.prototype.h=function(){Bc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var $c="closure_listenable_"+(1e6*Math.random()|0),XO=0;function eF(l,h,p,y,A){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=A,this.key=++XO,this.da=this.fa=!1}function md(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function yd(l){this.src=l,this.g={},this.h=0}yd.prototype.add=function(l,h,p,y,A){var N=l.toString();l=this.g[N],l||(l=this.g[N]=[],this.h++);var Y=vm(l,h,y,A);return-1<Y?(h=l[Y],p||(h.fa=!1)):(h=new eF(h,this.src,N,!!y,A),h.fa=p,l.push(h)),h};function ym(l,h){var p=h.type;if(p in l.g){var y=l.g[p],A=Array.prototype.indexOf.call(y,h,void 0),N;(N=0<=A)&&Array.prototype.splice.call(y,A,1),N&&(md(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function vm(l,h,p,y){for(var A=0;A<l.length;++A){var N=l[A];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==y)return A}return-1}var wm="closure_lm_"+(1e6*Math.random()|0),_m={};function eD(l,h,p,y,A){if(y&&y.once)return nD(l,h,p,y,A);if(Array.isArray(h)){for(var N=0;N<h.length;N++)eD(l,h[N],p,y,A);return null}return p=Dm(p),l&&l[$c]?l.K(h,p,u(y)?!!y.capture:!!y,A):tD(l,h,p,!1,y,A)}function tD(l,h,p,y,A,N){if(!h)throw Error("Invalid event type");var Y=u(A)?!!A.capture:!!A,He=Im(l);if(He||(l[wm]=He=new yd(l)),p=He.add(h,p,y,Y,N),p.proxy)return p;if(y=tF(),p.proxy=y,y.src=l,y.listener=p,l.addEventListener)ZO||(A=Y),A===void 0&&(A=!1),l.addEventListener(h.toString(),y,A);else if(l.attachEvent)l.attachEvent(iD(h.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function tF(){function l(p){return h.call(l.src,l.listener,p)}let h=nF;return l}function nD(l,h,p,y,A){if(Array.isArray(h)){for(var N=0;N<h.length;N++)nD(l,h[N],p,y,A);return null}return p=Dm(p),l&&l[$c]?l.L(h,p,u(y)?!!y.capture:!!y,A):tD(l,h,p,!0,y,A)}function rD(l,h,p,y,A){if(Array.isArray(h))for(var N=0;N<h.length;N++)rD(l,h[N],p,y,A);else y=u(y)?!!y.capture:!!y,p=Dm(p),l&&l[$c]?(l=l.i,h=String(h).toString(),h in l.g&&(N=l.g[h],p=vm(N,p,y,A),-1<p&&(md(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete l.g[h],l.h--)))):l&&(l=Im(l))&&(h=l.g[h.toString()],l=-1,h&&(l=vm(h,p,y,A)),(p=-1<l?h[l]:null)&&Em(p))}function Em(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[$c])ym(h.i,l);else{var p=l.type,y=l.proxy;h.removeEventListener?h.removeEventListener(p,y,l.capture):h.detachEvent?h.detachEvent(iD(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=Im(h))?(ym(p,l),p.h==0&&(p.src=null,h[wm]=null)):md(l)}}}function iD(l){return l in _m?_m[l]:_m[l]="on"+l}function nF(l,h){if(l.da)l=!0;else{h=new Bc(h,this);var p=l.listener,y=l.ha||l.src;l.fa&&Em(l),l=p.call(y,h)}return l}function Im(l){return l=l[wm],l instanceof yd?l:null}var bm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dm(l){return typeof l=="function"?l:(l[bm]||(l[bm]=function(h){return l.handleEvent(h)}),l[bm])}function qt(){Ei.call(this),this.i=new yd(this),this.M=this,this.F=null}w(qt,Ei),qt.prototype[$c]=!0,qt.prototype.removeEventListener=function(l,h,p,y){rD(this,l,h,p,y)};function nn(l,h){var p,y=l.F;if(y)for(p=[];y;y=y.F)p.push(y);if(l=l.M,y=h.type||h,typeof h=="string")h=new zt(h,l);else if(h instanceof zt)h.target=h.target||l;else{var A=h;h=new zt(y,l),T(h,A)}if(A=!0,p)for(var N=p.length-1;0<=N;N--){var Y=h.g=p[N];A=vd(Y,y,!0,h)&&A}if(Y=h.g=l,A=vd(Y,y,!0,h)&&A,A=vd(Y,y,!1,h)&&A,p)for(N=0;N<p.length;N++)Y=h.g=p[N],A=vd(Y,y,!1,h)&&A}qt.prototype.N=function(){if(qt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],y=0;y<p.length;y++)md(p[y]);delete l.g[h],l.h--}}this.F=null},qt.prototype.K=function(l,h,p,y){return this.i.add(String(l),h,!1,p,y)},qt.prototype.L=function(l,h,p,y){return this.i.add(String(l),h,!0,p,y)};function vd(l,h,p,y){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,N=0;N<h.length;++N){var Y=h[N];if(Y&&!Y.da&&Y.capture==p){var He=Y.listener,Ot=Y.ha||Y.src;Y.fa&&ym(l.i,Y),A=He.call(Ot,y)!==!1&&A}}return A&&!y.defaultPrevented}function sD(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function oD(l){l.g=sD(()=>{l.g=null,l.i&&(l.i=!1,oD(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class rF extends Ei{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:oD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zc(l){Ei.call(this),this.h=l,this.g={}}w(zc,Ei);var aD=[];function cD(l){Q(l.g,function(h,p){this.g.hasOwnProperty(p)&&Em(h)},l),l.g={}}zc.prototype.N=function(){zc.aa.N.call(this),cD(this)},zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cm=a.JSON.stringify,iF=a.JSON.parse,sF=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Tm(){}Tm.prototype.h=null;function lD(l){return l.h||(l.h=l.i())}function uD(){}var qc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Sm(){zt.call(this,"d")}w(Sm,zt);function Am(){zt.call(this,"c")}w(Am,zt);var _s={},dD=null;function wd(){return dD=dD||new qt}_s.La="serverreachability";function hD(l){zt.call(this,_s.La,l)}w(hD,zt);function Hc(l){let h=wd();nn(h,new hD(h))}_s.STAT_EVENT="statevent";function fD(l,h){zt.call(this,_s.STAT_EVENT,l),this.stat=h}w(fD,zt);function rn(l){let h=wd();nn(h,new fD(h,l))}_s.Ma="timingevent";function pD(l,h){zt.call(this,_s.Ma,l),this.size=h}w(pD,zt);function Gc(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Wc(){this.g=!0}Wc.prototype.xa=function(){this.g=!1};function oF(l,h,p,y,A,N){l.info(function(){if(l.g)if(N)for(var Y="",He=N.split("&"),Ot=0;Ot<He.length;Ot++){var Pe=He[Ot].split("=");if(1<Pe.length){var Ht=Pe[0];Pe=Pe[1];var Gt=Ht.split("_");Y=2<=Gt.length&&Gt[1]=="type"?Y+(Ht+"="+Pe+"&"):Y+(Ht+"=redacted&")}}else Y=null;else Y=N;return"XMLHTTP REQ ("+y+") [attempt "+A+"]: "+h+`
`+p+`
`+Y})}function aF(l,h,p,y,A,N,Y){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+A+"]: "+h+`
`+p+`
`+N+" "+Y})}function To(l,h,p,y){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+lF(l,p)+(y?" "+y:"")})}function cF(l,h){l.info(function(){return"TIMEOUT: "+h})}Wc.prototype.info=function(){};function lF(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var y=p[l];if(!(2>y.length)){var A=y[1];if(Array.isArray(A)&&!(1>A.length)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(var Y=1;Y<A.length;Y++)A[Y]=""}}}}return Cm(p)}catch{return h}}var _d={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xm;function Ed(){}w(Ed,Tm),Ed.prototype.g=function(){return new XMLHttpRequest},Ed.prototype.i=function(){return{}},xm=new Ed;function Ii(l,h,p,y){this.j=l,this.i=h,this.l=p,this.R=y||1,this.U=new zc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mD}function mD(){this.i=null,this.g="",this.h=!1}var yD={},Mm={};function Rm(l,h,p){l.L=1,l.v=Cd(Ur(h)),l.m=p,l.P=!0,vD(l,null)}function vD(l,h){l.F=Date.now(),Id(l),l.A=Ur(l.v);var p=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),kD(p.i,"t",y),l.C=0,p=l.j.J,l.h=new mD,l.g=YD(l.j,p?h:null,!l.m),0<l.O&&(l.M=new rF(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,y=l.ca;var A="readystatechange";Array.isArray(A)||(A&&(aD[0]=A.toString()),A=aD);for(var N=0;N<A.length;N++){var Y=eD(p,A[N],y||h.handleEvent,!1,h.h||h);if(!Y)break;h.g[Y.key]=Y}h=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Hc(),oF(l.i,l.u,l.A,l.l,l.R,l.m)}Ii.prototype.ca=function(l){l=l.target;let h=this.M;h&&Br(l)==3?h.j():this.Y(l)},Ii.prototype.Y=function(l){try{if(l==this.g)e:{let Gt=Br(this.g);var h=this.g.Ba();let xo=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||jD(this.g)))){this.J||Gt!=4||h==7||(h==8||0>=xo?Hc(3):Hc(2)),km(this);var p=this.g.Z();this.X=p;t:if(wD(this)){var y=jD(this.g);l="";var A=y.length,N=Br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Es(this),Kc(this);var Y="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,l+=this.h.i.decode(y[h],{stream:!(N&&h==A-1)});y.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=p==200,aF(this.i,this.u,this.A,this.l,this.R,Gt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Ot=this.g;if((He=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(He)){var Pe=He;break t}}Pe=null}if(p=Pe)To(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nm(this,p);else{this.o=!1,this.s=3,rn(12),Es(this),Kc(this);break e}}if(this.P){p=!0;let er;for(;!this.J&&this.C<Y.length;)if(er=uF(this,Y),er==Mm){Gt==4&&(this.s=4,rn(14),p=!1),To(this.i,this.l,null,"[Incomplete Response]");break}else if(er==yD){this.s=4,rn(15),To(this.i,this.l,Y,"[Invalid Chunk]"),p=!1;break}else To(this.i,this.l,er,null),Nm(this,er);if(wD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||Y.length!=0||this.h.h||(this.s=1,rn(16),p=!1),this.o=this.o&&p,!p)To(this.i,this.l,Y,"[Invalid Chunked Response]"),Es(this),Kc(this);else if(0<Y.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),jm(Ht),Ht.M=!0,rn(11))}}else To(this.i,this.l,Y,null),Nm(this,Y);Gt==4&&Es(this),this.o&&!this.J&&(Gt==4?GD(this.j,this):(this.o=!1,Id(this)))}else SF(this.g),p==400&&0<Y.indexOf("Unknown SID")?(this.s=3,rn(12)):(this.s=0,rn(13)),Es(this),Kc(this)}}}catch{}finally{}};function wD(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function uF(l,h){var p=l.C,y=h.indexOf(`
`,p);return y==-1?Mm:(p=Number(h.substring(p,y)),isNaN(p)?yD:(y+=1,y+p>h.length?Mm:(h=h.slice(y,y+p),l.C=y+p,h)))}Ii.prototype.cancel=function(){this.J=!0,Es(this)};function Id(l){l.S=Date.now()+l.I,_D(l,l.I)}function _D(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Gc(g(l.ba,l),h)}function km(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Ii.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(cF(this.i,this.A),this.L!=2&&(Hc(),rn(17)),Es(this),this.s=2,Kc(this)):_D(this,this.S-l)};function Kc(l){l.j.G==0||l.J||GD(l.j,l)}function Es(l){km(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,cD(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Nm(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Pm(p.h,l))){if(!l.K&&Pm(p.h,l)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var A=y;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Md(p),Ad(p);else break e;Lm(p),rn(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=Gc(g(p.Za,p),6e3));if(1>=bD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else bs(p,11)}else if((l.K||p.g==l)&&Md(p),!V(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Pe=A[h];if(p.T=Pe[0],Pe=Pe[1],p.G==2)if(Pe[0]=="c"){p.K=Pe[1],p.ia=Pe[2];let Ht=Pe[3];Ht!=null&&(p.la=Ht,p.j.info("VER="+p.la));let Gt=Pe[4];Gt!=null&&(p.Aa=Gt,p.j.info("SVER="+p.Aa));let xo=Pe[5];xo!=null&&typeof xo=="number"&&0<xo&&(y=1.5*xo,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let er=l.g;if(er){let kd=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kd){var N=y.h;N.g||kd.indexOf("spdy")==-1&&kd.indexOf("quic")==-1&&kd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Om(N,N.h),N.h=null))}if(y.D){let Um=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;Um&&(y.ya=Um,Ye(y.I,y.D,Um))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var Y=l;if(y.qa=QD(y,y.J?y.ia:null,y.W),Y.K){DD(y.h,Y);var He=Y,Ot=y.L;Ot&&(He.I=Ot),He.B&&(km(He),Id(He)),y.g=Y}else qD(y);0<p.i.length&&xd(p)}else Pe[0]!="stop"&&Pe[0]!="close"||bs(p,7);else p.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?bs(p,7):Vm(p):Pe[0]!="noop"&&p.l&&p.l.ta(Pe),p.v=0)}}Hc(4)}catch{}}var dF=class{constructor(l,h){this.g=l,this.map=h}};function ED(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ID(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function bD(l){return l.h?1:l.g?l.g.size:0}function Pm(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Om(l,h){l.g?l.g.add(h):l.h=h}function DD(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}ED.prototype.cancel=function(){if(this.i=CD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function CD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return D(l.i)}function hF(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,y=0;y<p;y++)h.push(l[y]);return h}h=[],p=0;for(y in l)h[p++]=l[y];return h}function fF(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let y in l)h[p++]=y;return h}}}function TD(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=fF(l),y=hF(l),A=y.length,N=0;N<A;N++)h.call(void 0,y[N],p&&p[N],l)}var SD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pF(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var y=l[p].indexOf("="),A=null;if(0<=y){var N=l[p].substring(0,y);A=l[p].substring(y+1)}else N=l[p];h(N,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Is(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Is){this.h=l.h,bd(this,l.j),this.o=l.o,this.g=l.g,Dd(this,l.s),this.l=l.l;var h=l.i,p=new Zc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),AD(this,p),this.m=l.m}else l&&(h=String(l).match(SD))?(this.h=!1,bd(this,h[1]||"",!0),this.o=Qc(h[2]||""),this.g=Qc(h[3]||"",!0),Dd(this,h[4]),this.l=Qc(h[5]||"",!0),AD(this,h[6]||"",!0),this.m=Qc(h[7]||"")):(this.h=!1,this.i=new Zc(null,this.h))}Is.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Yc(h,xD,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Yc(h,xD,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Yc(p,p.charAt(0)=="/"?yF:mF,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Yc(p,wF)),l.join("")};function Ur(l){return new Is(l)}function bd(l,h,p){l.j=p?Qc(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Dd(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function AD(l,h,p){h instanceof Zc?(l.i=h,_F(l.i,l.h)):(p||(h=Yc(h,vF)),l.i=new Zc(h,l.h))}function Ye(l,h,p){l.i.set(h,p)}function Cd(l){return Ye(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Qc(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Yc(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,gF),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function gF(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var xD=/[#\/\?@]/g,mF=/[#\?:]/g,yF=/[#\?]/g,vF=/[#\?@]/g,wF=/#/g;function Zc(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function bi(l){l.g||(l.g=new Map,l.h=0,l.i&&pF(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Zc.prototype,n.add=function(l,h){bi(this),this.i=null,l=So(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function MD(l,h){bi(l),h=So(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function RD(l,h){return bi(l),h=So(l,h),l.g.has(h)}n.forEach=function(l,h){bi(this),this.g.forEach(function(p,y){p.forEach(function(A){l.call(h,A,y,this)},this)},this)},n.na=function(){bi(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let A=l[y];for(let N=0;N<A.length;N++)p.push(h[y])}return p},n.V=function(l){bi(this);let h=[];if(typeof l=="string")RD(this,l)&&(h=h.concat(this.g.get(So(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return bi(this),this.i=null,l=So(this,l),RD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function kD(l,h,p){MD(l,h),0<p.length&&(l.i=null,l.g.set(So(l,h),D(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let N=encodeURIComponent(String(y)),Y=this.V(y);for(y=0;y<Y.length;y++){var A=N;Y[y]!==""&&(A+="="+encodeURIComponent(String(Y[y]))),l.push(A)}}return this.i=l.join("&")};function So(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function _F(l,h){h&&!l.j&&(bi(l),l.i=null,l.g.forEach(function(p,y){var A=y.toLowerCase();y!=A&&(MD(this,y),kD(this,A,p))},l)),l.j=h}function EF(l,h){let p=new Wc;if(a.Image){let y=new Image;y.onload=m(Di,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(Di,p,"TestLoadImage: error",!1,h,y),y.onabort=m(Di,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(Di,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else h(!1)}function IF(l,h){let p=new Wc,y=new AbortController,A=setTimeout(()=>{y.abort(),Di(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:y.signal}).then(N=>{clearTimeout(A),N.ok?Di(p,"TestPingServer: ok",!0,h):Di(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),Di(p,"TestPingServer: error",!1,h)})}function Di(l,h,p,y,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),y(p)}catch{}}function bF(){this.g=new sF}function DF(l,h,p){let y=p||"";try{TD(l,function(A,N){let Y=A;u(A)&&(Y=Cm(A)),h.push(y+N+"="+encodeURIComponent(Y))})}catch(A){throw h.push(y+"type="+encodeURIComponent("_badmap")),A}}function Jc(l){this.l=l.Ub||null,this.j=l.eb||!1}w(Jc,Tm),Jc.prototype.g=function(){return new Td(this.l,this.j)},Jc.prototype.i=function(l){return function(){return l}}({});function Td(l,h){qt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Td,qt),n=Td.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,el(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xc(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,el(this)),this.g&&(this.readyState=3,el(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ND(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ND(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Xc(this):el(this),this.readyState==3&&ND(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Xc(this))},n.Qa=function(l){this.g&&(this.response=l,Xc(this))},n.ga=function(){this.g&&Xc(this)};function Xc(l){l.readyState=4,l.l=null,l.j=null,l.v=null,el(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function el(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Td.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function PD(l){let h="";return Q(l,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Fm(l,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=PD(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ye(l,h,p))}function at(l){qt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(at,qt);var CF=/^https?$/i,TF=["POST","PUT"];n=at.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xm.g(),this.v=this.o?lD(this.o):lD(xm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(N){OD(this,N);return}if(l=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var A in y)p.set(A,y[A]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let N of y.keys())p.set(N,y.get(N));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),A=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TF,h,void 0))||y||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,Y]of p)this.g.setRequestHeader(N,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{LD(this),this.u=!0,this.g.send(l),this.u=!1}catch(N){OD(this,N)}};function OD(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,FD(l),Sd(l)}function FD(l){l.A||(l.A=!0,nn(l,"complete"),nn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,nn(this,"complete"),nn(this,"abort"),Sd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sd(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?VD(this):this.bb())},n.bb=function(){VD(this)};function VD(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Br(l)!=4||l.Z()!=2)){if(l.u&&Br(l)==4)sD(l.Ea,0,l);else if(nn(l,"readystatechange"),Br(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=Y===0){var A=String(l.D).match(SD)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),y=!CF.test(A?A.toLowerCase():"")}p=y}if(p)nn(l,"complete"),nn(l,"success");else{l.m=6;try{var N=2<Br(l)?l.g.statusText:""}catch{N=""}l.l=N+" ["+l.Z()+"]",FD(l)}}finally{Sd(l)}}}}function Sd(l,h){if(l.g){LD(l);let p=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||nn(l,"ready");try{p.onreadystatechange=y}catch{}}}function LD(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Br(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Br(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),iF(h)}};function jD(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function SF(l){let h={};l=(l.g&&2<=Br(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(V(l[y]))continue;var p=S(l[y]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[A]||[];h[A]=N,N.push(p)}I(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function UD(l){this.Aa=0,this.i=[],this.j=new Wc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tl("baseRetryDelayMs",5e3,l),this.cb=tl("retryDelaySeedMs",1e4,l),this.Wa=tl("forwardChannelMaxRetries",2,l),this.wa=tl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ED(l&&l.concurrentRequestLimit),this.Da=new bF,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=UD.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,y){rn(0),this.W=l,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=QD(this,null,this.W),xd(this)};function Vm(l){if(BD(l),l.G==3){var h=l.U++,p=Ur(l.I);if(Ye(p,"SID",l.K),Ye(p,"RID",h),Ye(p,"TYPE","terminate"),nl(l,p),h=new Ii(l,l.j,h),h.L=2,h.v=Cd(Ur(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=YD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Id(h)}KD(l)}function Ad(l){l.g&&(jm(l),l.g.cancel(),l.g=null)}function BD(l){Ad(l),l.u&&(a.clearTimeout(l.u),l.u=null),Md(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function xd(l){if(!ID(l.h)&&!l.s){l.s=!0;var h=l.Ga;jc||Xb(),Uc||(jc(),Uc=!0),mm.add(h,l),l.B=0}}function AF(l,h){return bD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Gc(g(l.Ga,l,h),WD(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let A=new Ii(this,this.j,l),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(A.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=zD(this,A,h),p=Ur(this.I),Ye(p,"RID",l),Ye(p,"CVER",22),this.D&&Ye(p,"X-HTTP-Session-Id",this.D),nl(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(PD(N)))+"&"+h:this.m&&Fm(p,this.m,N)),Om(this.h,A),this.Ua&&Ye(p,"TYPE","init"),this.P?(Ye(p,"$req",h),Ye(p,"SID","null"),A.T=!0,Rm(A,p,null)):Rm(A,p,h),this.G=2}}else this.G==3&&(l?$D(this,l):this.i.length==0||ID(this.h)||$D(this))};function $D(l,h){var p;h?p=h.l:p=l.U++;let y=Ur(l.I);Ye(y,"SID",l.K),Ye(y,"RID",p),Ye(y,"AID",l.T),nl(l,y),l.m&&l.o&&Fm(y,l.m,l.o),p=new Ii(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=zD(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Om(l.h,p),Rm(p,y,h)}function nl(l,h){l.H&&Q(l.H,function(p,y){Ye(h,y,p)}),l.l&&TD({},function(p,y){Ye(h,y,p)})}function zD(l,h,p){p=Math.min(l.i.length,p);var y=l.l?g(l.l.Na,l.l,l):null;e:{var A=l.i;let N=-1;for(;;){let Y=["count="+p];N==-1?0<p?(N=A[0].g,Y.push("ofs="+N)):N=0:Y.push("ofs="+N);let He=!0;for(let Ot=0;Ot<p;Ot++){let Pe=A[Ot].g,Ht=A[Ot].map;if(Pe-=N,0>Pe)N=Math.max(0,A[Ot].g-100),He=!1;else try{DF(Ht,Y,"req"+Pe+"_")}catch{y&&y(Ht)}}if(He){y=Y.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,y}function qD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;jc||Xb(),Uc||(jc(),Uc=!0),mm.add(h,l),l.v=0}}function Lm(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Gc(g(l.Fa,l),WD(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,HD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Gc(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rn(10),Ad(this),HD(this))};function jm(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function HD(l){l.g=new Ii(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Ur(l.qa);Ye(h,"RID","rpc"),Ye(h,"SID",l.K),Ye(h,"AID",l.T),Ye(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ye(h,"TO",l.ja),Ye(h,"TYPE","xmlhttp"),nl(l,h),l.m&&l.o&&Fm(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Cd(Ur(h)),p.m=null,p.P=!0,vD(p,l)}n.Za=function(){this.C!=null&&(this.C=null,Ad(this),Lm(this),rn(19))};function Md(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function GD(l,h){var p=null;if(l.g==h){Md(l),jm(l),l.g=null;var y=2}else if(Pm(l.h,h))p=h.D,DD(l.h,h),y=1;else return;if(l.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=l.B;y=wd(),nn(y,new pD(y,p)),xd(l)}else qD(l);else if(A=h.s,A==3||A==0&&0<h.X||!(y==1&&AF(l,h)||y==2&&Lm(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),A){case 1:bs(l,5);break;case 4:bs(l,10);break;case 3:bs(l,6);break;default:bs(l,2)}}}function WD(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function bs(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),y=l.Xa;let A=!y;y=new Is(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bd(y,"https"),Cd(y),A?EF(y.toString(),p):IF(y.toString(),p)}else rn(2);l.G=0,l.l&&l.l.sa(h),KD(l),BD(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function KD(l){if(l.G=0,l.ka=[],l.l){let h=CD(l.h);(h.length!=0||l.i.length!=0)&&(C(l.ka,h),C(l.ka,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.ra()}}function QD(l,h,p){var y=p instanceof Is?Ur(p):new Is(p);if(y.g!="")h&&(y.g=h+"."+y.g),Dd(y,y.s);else{var A=a.location;y=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var N=new Is(null);y&&bd(N,y),h&&(N.g=h),A&&Dd(N,A),p&&(N.l=p),y=N}return p=l.D,h=l.ya,p&&h&&Ye(y,p,h),Ye(y,"VER",l.la),nl(l,y),y}function YD(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new at(new Jc({eb:p})):new at(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ZD(){}n=ZD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Rd(){}Rd.prototype.g=function(l,h){return new An(l,h)};function An(l,h){qt.call(this),this.g=new UD(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!V(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!V(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Ao(this)}w(An,qt),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){Vm(this.g)},An.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Cm(l),l=p);h.i.push(new dF(h.Ya++,l)),h.G==3&&xd(h)},An.prototype.N=function(){this.g.l=null,delete this.j,Vm(this.g),delete this.g,An.aa.N.call(this)};function JD(l){Sm.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(JD,Sm);function XD(){Am.call(this),this.status=1}w(XD,Am);function Ao(l){this.g=l}w(Ao,ZD),Ao.prototype.ua=function(){nn(this.g,"a")},Ao.prototype.ta=function(l){nn(this.g,new JD(l))},Ao.prototype.sa=function(l){nn(this.g,new XD)},Ao.prototype.ra=function(){nn(this.g,"b")},Rd.prototype.createWebChannel=Rd.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,N0=di.createWebChannelTransport=function(){return new Rd},k0=di.getStatEventTarget=function(){return wd()},R0=di.Event=_s,Lp=di.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_d.NO_ERROR=0,_d.TIMEOUT=8,_d.HTTP_ERROR=6,Tu=di.ErrorCode=_d,gD.COMPLETE="complete",M0=di.EventType=gD,uD.EventType=qc,qc.OPEN="a",qc.CLOSE="b",qc.ERROR="c",qc.MESSAGE="d",qt.prototype.listen=qt.prototype.K,Ya=di.WebChannel=uD,$H=di.FetchXmlHttpFactory=Jc,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,x0=di.XhrIo=at}).apply(typeof Vp<"u"?Vp:typeof self<"u"?self:typeof window<"u"?window:{});var Wk="@firebase/firestore";var It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");var Sc="10.14.0";var os=new Od("@firebase/firestore");function tc(){return os.logLevel}function YN(n){os.setLogLevel(n)}function z(n,...e){if(os.logLevel<=yr.DEBUG){let t=e.map(LI);os.debug(`Firestore (${Sc}): ${n}`,...t)}}function ht(n,...e){if(os.logLevel<=yr.ERROR){let t=e.map(LI);os.error(`Firestore (${Sc}): ${n}`,...t)}}function dr(n,...e){if(os.logLevel<=yr.WARN){let t=e.map(LI);os.warn(`Firestore (${Sc}): ${n}`,...t)}}function LI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function re(n="Unexpected state"){let e=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: `+n;throw ht(e),new Error(e)}function se(n,e){n||re()}function ZN(n,e){n||re()}function Z(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends sC{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Mt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Kp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},j0=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(It.UNAUTHENTICATED))}shutdown(){}},U0=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},B0=class{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){se(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Mt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string"),new Kp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string"),new It(e)}},$0=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},z0=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new $0(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}},q0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},H0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){se(this.o===void 0);let r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(se(typeof t.token=="string"),this.R=t.token,new q0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function HH(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Qp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=HH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(n,e){return n<e?-1:n>e?1:0}function uc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function JN(n){return n+"\0"}var st=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new st(0,0))}static max(){return new n(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Yp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(),r===void 0?r=e.length-t:r>e.length-t&&re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Re=class n extends Yp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},GH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ft=class n extends Yp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return GH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new $(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var J=class n{constructor(e){this.path=e}static fromPath(e){return new n(Re.fromString(e))}static fromName(e){return new n(Re.fromString(e).popFirst(5))}static empty(){return new n(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Re(e.slice()))}};var dc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function G0(n){return n.fields.find(e=>e.kind===2)}function Xs(n){return n.fields.filter(e=>e.kind!==2)}dc.UNKNOWN_ID=-1;var ac=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Lu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Jn.min())}};function XN(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new Jn(i,J.empty(),e)}function e1(n){return new Jn(n.readTime,n.key,-1)}var Jn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),J.empty(),-1)}static max(){return new n(le.max(),J.empty(),-1)}};function jI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=J.comparator(n.documentKey,e.documentKey),t!==0?t:pe(n.largestBatchId,e.largestBatchId))}var t1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ms(n){return b(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==t1)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Jp=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Mt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new so(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=UI(r.target.error);this.V.reject(new so(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new so(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new K0(t)}},as=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(rl())===12.2&&ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z("SimpleDb","Removing database:",e),eo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Pd())return!1;if(n.v())return!0;let e=rl(),t=n.S(e),r=0<t&&t<10,i=n1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return b(this,null,function*(){return this.db||(z("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new so(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new $(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new $(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new so(e,o))},i.onupgradeneeded=s=>{z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return b(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Jp.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),R.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(z("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function n1(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var W0=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return eo(this.B.delete())}},so=class extends ${constructor(e,t){super(P.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ys(n){return n.name==="IndexedDbTransactionError"}var K0=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(z("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eo(r)}add(e){return z("SimpleDb","ADD",this.store.name,e,e),eo(this.store.add(e))}get(e){return eo(this.store.get(e)).next(t=>(t===void 0&&(t=null),z("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return z("SimpleDb","DELETE",this.store.name,e),eo(this.store.delete(e))}count(){return z("SimpleDb","COUNT",this.store.name),eo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new R((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new R((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){z("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new R((r,i)=>{t.onerror=s=>{let o=UI(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new R((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new W0(a),u=t(a.primaryKey,a.value,c);if(u instanceof R){let d=u.catch(f=>(c.done(),R.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>R.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function eo(n){return new R((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=UI(r.target.error);t(i)}})}var Kk=!1;function UI(n){let e=as.S(rl());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new $("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kk||(Kk=!0,setTimeout(()=>{throw r},0)),r}}return n}var Q0=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){z("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>b(this,null,function*(){this.task=null;try{z("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ys(t)?z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ms(t)}yield this.X(6e4)}))}},Y0=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return b(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return R.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(z("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=e1(s);jI(o,r)>0&&(r=o)}),new Jn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var jn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function sd(n){return n==null}function ju(n){return n===0&&1/n==-1/0}function r1(n){return typeof n=="number"&&Number.isInteger(n)&&!ju(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function hn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Qk(e)),e=WH(n.get(t),e);return Qk(e)}function WH(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function Qk(n){return n+""}function xr(n){let e=n.length;if(se(e>=2),e===2)return se(n.charAt(0)===""&&n.charAt(1)===""),Re.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&re(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:re()}s=o+2}return new Re(r)}var Yk=["userId","batchId"];function zp(n,e){return[n,hn(e)]}function i1(n,e,t){return[n,hn(e),t]}var KH={},QH=["prefixPath","collectionGroup","readTime","documentId"],YH=["prefixPath","collectionGroup","documentId"],ZH=["collectionGroup","readTime","prefixPath","documentId"],JH=["canonicalId","targetId"],XH=["targetId","path"],eG=["path","targetId"],tG=["collectionId","parent"],nG=["indexId","uid"],rG=["uid","sequenceNumber"],iG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],sG=["indexId","uid","orderedDocumentKey"],oG=["userId","collectionPath","documentId"],aG=["userId","collectionPath","largestBatchId"],cG=["userId","collectionGroup","largestBatchId"],s1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],lG=[...s1,"documentOverlays"],o1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],a1=o1,BI=[...a1,"indexConfiguration","indexState","indexEntries"],uG=BI,dG=[...BI,"globals"];var Uu=class extends Zp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Rt(n,e){let t=Z(n);return as.F(t._e,e)}function Zk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function vo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function c1(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var tt=class n{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}},oc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var We=class n{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xp(this.data.getIterator())}getIteratorFrom(e){return new Xp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Za(n){return n.hasNext()?n.getNext():void 0}var Un=class n{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new n([])}unionWith(e){let t=new We(ft.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var eg=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function l1(){return typeof atob<"u"}var gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new eg("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};gt.EMPTY_BYTE_STRING=new gt("");var hG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(n){if(se(!!n),typeof n=="string"){let e=0,t=hG.exec(n);if(se(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(n.seconds),nanos:nt(n.nanos)}}function nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function cs(n){return typeof n=="string"?gt.fromBase64String(n):gt.fromUint8Array(n)}function Hg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function $I(n){let e=n.mapValue.fields.__previous_value__;return Hg(e)?$I(e):e}function Bu(n){let e=pi(n.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}var Z0=class{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},ls=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var is={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},qp={nullValue:"NULL_VALUE"};function oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hg(n)?4:u1(n)?9007199254740991:Gg(n)?10:11:re()}function Pr(n,e){if(n===e)return!0;let t=oo(n);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bu(n).isEqual(Bu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=pi(i.timestampValue),a=pi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return cs(i.bytesValue).isEqual(cs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=nt(i.doubleValue),a=nt(s.doubleValue);return o===a?ju(o)===ju(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return uc(n.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Zk(o)!==Zk(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Pr(o[c],a[c])))return!1;return!0}(n,e);default:return re()}}function $u(n,e){return(n.values||[]).find(t=>Pr(t,e))!==void 0}function us(n,e){if(n===e)return 0;let t=oo(n),r=oo(e);if(t!==r)return pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=nt(s.integerValue||s.doubleValue),c=nt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Jk(n.timestampValue,e.timestampValue);case 4:return Jk(Bu(n),Bu(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(s,o){let a=cs(s),c=cs(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=pe(a[u],c[u]);if(d!==0)return d}return pe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=pe(nt(s.latitude),nt(o.latitude));return a!==0?a:pe(nt(s.longitude),nt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Xk(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,u,d;let f=s.fields||{},g=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=pe(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:Xk(m,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===is.mapValue&&o===is.mapValue)return 0;if(s===is.mapValue)return 1;if(o===is.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=pe(c[f],d[f]);if(g!==0)return g;let m=us(a[c[f]],u[d[f]]);if(m!==0)return m}return pe(c.length,d.length)}(n.mapValue,e.mapValue);default:throw re()}}function Jk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pe(n,e);let t=pi(n),r=pi(e),i=pe(t.seconds,r.seconds);return i!==0?i:pe(t.nanos,r.nanos)}function Xk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=us(t[i],r[i]);if(s)return s}return pe(t.length,r.length)}function hc(n){return J0(n)}function J0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=pi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return cs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return J.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=J0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${J0(t.fields[o])}`;return i+"}"}(n.mapValue):re()}function ao(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function X0(n){return!!n&&"integerValue"in n}function zu(n){return!!n&&"arrayValue"in n}function eN(n){return!!n&&"nullValue"in n}function tN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Hp(n){return!!n&&"mapValue"in n}function Gg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Nu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return vo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function u1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var d1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function fG(n){return"nullValue"in n?qp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ao(ls.empty(),J.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Gg(n)?d1:{mapValue:{}}:re()}function pG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ao(ls.empty(),J.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?d1:"mapValue"in n?Gg(n)?{mapValue:{}}:is:re()}function nN(n,e){let t=us(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function rN(n,e){let t=us(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var tn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Hp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nu(t)}setAll(e){let t=ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Nu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Hp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Hp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){vo(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Nu(this.value))}};function h1(n){let e=[];return vo(n.fields,(t,r)=>{let i=new ft([t]);if(Hp(r)){let s=h1(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Un(e)}var bt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),tn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),tn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Or=class{constructor(e,t){this.position=e,this.inclusive=t}};function iN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),t.key):r=us(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pr(n.position[t],e.position[t]))return!1;return!0}var co=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function gG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var tg=class{},Te=class n extends tg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new nE(e,t,r):t==="array-contains"?new sE(e,r):t==="in"?new ng(e,r):t==="not-in"?new oE(e,r):t==="array-contains-any"?new aE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new rE(e,r):new iE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(us(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(us(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class n extends tg{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return fc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function fc(n){return n.op==="and"}function eE(n){return n.op==="or"}function zI(n){return f1(n)&&fc(n)}function f1(n){for(let e of n.filters)if(e instanceof $e)return!1;return!0}function tE(n){if(n instanceof Te)return n.field.canonicalString()+n.op.toString()+hc(n.value);if(zI(n))return n.filters.map(e=>tE(e)).join(",");{let e=n.filters.map(t=>tE(t)).join(",");return`${n.op}(${e})`}}function p1(n,e){return n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&Pr(r.value,i.value)}(n,e):n instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&p1(o,i.filters[a]),!0):!1}(n,e):void re()}function g1(n,e){let t=n.filters.concat(e);return $e.create(t,n.op)}function m1(n){return n instanceof Te?function(t){return`${t.field.canonicalString()} ${t.op} ${hc(t.value)}`}(n):n instanceof $e?function(t){return t.op.toString()+" {"+t.getFilters().map(m1).join(" ,")+"}"}(n):"Filter"}var nE=class extends Te{constructor(e,t,r){super(e,t,r),this.key=J.fromName(r.referenceValue)}matches(e){let t=J.comparator(e.key,this.key);return this.matchesComparison(t)}},rE=class extends Te{constructor(e,t){super(e,"in",t),this.keys=y1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},iE=class extends Te{constructor(e,t){super(e,"not-in",t),this.keys=y1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function y1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>J.fromName(r.referenceValue))}var sE=class extends Te{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return zu(t)&&$u(t.arrayValue,this.value)}},ng=class extends Te{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&$u(this.value.arrayValue,t)}},oE=class extends Te{constructor(e,t){super(e,"not-in",t)}matches(e){if($u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!$u(this.value.arrayValue,t)}},aE=class extends Te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!zu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$u(this.value.arrayValue,r))}};var cE=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function lE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new cE(n,e,t,r,i,s,o)}function lo(n){let e=Z(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>tE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hc(r)).join(",")),e.ue=t}return e.ue}function od(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!gG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!p1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sN(n.startAt,e.startAt)&&sN(n.endAt,e.endAt)}function rg(n){return J.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function ig(n,e){return n.filters.filter(t=>t instanceof Te&&t.field.isEqual(e))}function oN(n,e,t){let r=qp,i=!0;for(let s of ig(n,e)){let o=qp,a=!0;switch(s.op){case"<":case"<=":o=fG(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=qp}nN({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];nN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function aN(n,e,t){let r=is,i=!0;for(let s of ig(n,e)){let o=is,a=!0;switch(s.op){case">=":case">":o=pG(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=is}rN({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];rN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var hr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function v1(n,e,t,r,i,s,o,a){return new hr(n,e,t,r,i,s,o,a)}function Ac(n){return new hr(n)}function cN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qI(n){return n.collectionGroup!==null}function cc(n){let e=Z(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new We(ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new co(s,r))}),t.has(ft.keyField().canonicalString())||e.ce.push(new co(ft.keyField(),r))}return e.ce}function fn(n){let e=Z(n);return e.le||(e.le=mG(e,cc(n))),e.le}function mG(n,e){if(n.limitType==="F")return lE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new co(i.field,s)});let t=n.endAt?new Or(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Or(n.startAt.position,n.startAt.inclusive):null;return lE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function uE(n,e){let t=n.filters.concat([e]);return new hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function sg(n,e,t){return new hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ad(n,e){return od(fn(n),fn(e))&&n.limitType===e.limitType}function w1(n){return`${lo(fn(n))}|lt:${n.limitType}`}function nc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>m1(i)).join(", ")}]`),sd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>hc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>hc(i)).join(",")),`Target(${r})`}(fn(n))}; limitType=${n.limitType})`}function cd(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of cc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=iN(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,cc(r),i)||r.endAt&&!function(o,a,c){let u=iN(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,cc(r),i))}(n,e)}function _1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function E1(n){return(e,t)=>{let r=!1;for(let i of cc(n)){let s=yG(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function yG(n,e,t){let r=n.field.isKeyField()?J.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?us(c,u):re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var Fr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){vo(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return c1(this.inner)}size(){return this.innerSize}};var vG=new tt(J.comparator);function Tn(){return vG}var I1=new tt(J.comparator);function Ru(...n){let e=I1;for(let t of n)e=e.insert(t.key,t);return e}function b1(n){let e=I1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mr(){return Pu()}function D1(){return Pu()}function Pu(){return new Fr(n=>n.toString(),(n,e)=>n.isEqual(e))}var wG=new tt(J.comparator),_G=new We(J.comparator);function me(...n){let e=_G;for(let t of n)e=e.add(t);return e}var EG=new We(pe);function HI(){return EG}function GI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function C1(n){return{integerValue:""+n}}function T1(n,e){return r1(e)?C1(e):GI(n,e)}var pc=class{constructor(){this._=void 0}};function IG(n,e,t){return n instanceof ds?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hg(s)&&(s=$I(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof gi?A1(n,e):n instanceof mi?x1(n,e):function(i,s){let o=S1(i,s),a=lN(o)+lN(i.Pe);return X0(o)&&X0(i.Pe)?C1(a):GI(i.serializer,a)}(n,e)}function bG(n,e,t){return n instanceof gi?A1(n,e):n instanceof mi?x1(n,e):t}function S1(n,e){return n instanceof hs?function(r){return X0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ds=class extends pc{},gi=class extends pc{constructor(e){super(),this.elements=e}};function A1(n,e){let t=M1(e);for(let r of n.elements)t.some(i=>Pr(i,r))||t.push(r);return{arrayValue:{values:t}}}var mi=class extends pc{constructor(e){super(),this.elements=e}};function x1(n,e){let t=M1(e);for(let r of n.elements)t=t.filter(i=>!Pr(i,r));return{arrayValue:{values:t}}}var hs=class extends pc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function lN(n){return nt(n.integerValue||n.doubleValue)}function M1(n){return zu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var uo=class{constructor(e,t){this.field=e,this.transform=t}};function DG(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof gi&&i instanceof gi||r instanceof mi&&i instanceof mi?uc(r.elements,i.elements,Pr):r instanceof hs&&i instanceof hs?Pr(r.Pe,i.Pe):r instanceof ds&&i instanceof ds}(n.transform,e.transform)}var dE=class{constructor(e,t){this.version=e,this.transformResults=t}},ut=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Gp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var gc=class{};function R1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ps(n.key,ut.none()):new fs(n.key,n.data,ut.none());{let t=n.data,r=tn.empty(),i=new We(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fr(n.key,r,new Un(i.toArray()),ut.none())}}function CG(n,e,t){n instanceof fs?function(i,s,o){let a=i.value.clone(),c=dN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof fr?function(i,s,o){if(!Gp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=dN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(k1(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ou(n,e,t,r){return n instanceof fs?function(s,o,a,c){if(!Gp(s.precondition,o))return a;let u=s.value.clone(),d=hN(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof fr?function(s,o,a,c){if(!Gp(s.precondition,o))return a;let u=hN(s.fieldTransforms,c,o),d=o.data;return d.setAll(k1(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return Gp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function TG(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=S1(r.transform,i||null);s!=null&&(t===null&&(t=tn.empty()),t.set(r.field,s))}return t||null}function uN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uc(r,i,(s,o)=>DG(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var fs=class extends gc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fr=class extends gc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function k1(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function dN(n,e,t){let r=new Map;se(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,bG(o,a,t[i]))}return r}function hN(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,IG(s,o,e))}return r}var ps=class extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},qu=class extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Hu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&CG(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Ou(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=D1();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=R1(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(t,r)=>uN(t,r))&&uc(this.baseMutations,e.baseMutations,(t,r)=>uN(t,r))}},hE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){se(e.mutations.length===r.length);let i=function(){return wG}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Gu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var fE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var _t,Me;function N1(n){switch(n){default:return re();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function P1(n){if(n===void 0)return ht("GRPC error has no .code"),P.UNKNOWN;switch(n){case _t.OK:return P.OK;case _t.CANCELLED:return P.CANCELLED;case _t.UNKNOWN:return P.UNKNOWN;case _t.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case _t.INTERNAL:return P.INTERNAL;case _t.UNAVAILABLE:return P.UNAVAILABLE;case _t.UNAUTHENTICATED:return P.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case _t.NOT_FOUND:return P.NOT_FOUND;case _t.ALREADY_EXISTS:return P.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return P.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case _t.ABORTED:return P.ABORTED;case _t.OUT_OF_RANGE:return P.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return P.UNIMPLEMENTED;case _t.DATA_LOSS:return P.DATA_LOSS;default:return re()}}(Me=_t||(_t={}))[Me.OK=0]="OK",Me[Me.CANCELLED=1]="CANCELLED",Me[Me.UNKNOWN=2]="UNKNOWN",Me[Me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Me[Me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Me[Me.NOT_FOUND=5]="NOT_FOUND",Me[Me.ALREADY_EXISTS=6]="ALREADY_EXISTS",Me[Me.PERMISSION_DENIED=7]="PERMISSION_DENIED",Me[Me.UNAUTHENTICATED=16]="UNAUTHENTICATED",Me[Me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Me[Me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Me[Me.ABORTED=10]="ABORTED",Me[Me.OUT_OF_RANGE=11]="OUT_OF_RANGE",Me[Me.UNIMPLEMENTED=12]="UNIMPLEMENTED",Me[Me.INTERNAL=13]="INTERNAL",Me[Me.UNAVAILABLE=14]="UNAVAILABLE",Me[Me.DATA_LOSS=15]="DATA_LOSS";var fN=null;function O1(){return new TextEncoder}var SG=new Xi([4294967295,4294967295],0);function pN(n){let e=O1().encode(n),t=new A0;return t.update(e),new Uint8Array(t.digest())}function gN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xi([t,r],0),new Xi([i,s],0)]}var pE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new io(`Invalid padding: ${t}`);if(r<0)throw new io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new io(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Xi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Xi.fromNumber(r)));return i.compare(SG)===1&&(i=new Xi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=pN(e),[r,i]=gN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=pN(e),[r,i]=gN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},io=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wu=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Ku.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new tt(pe),Tn(),me())}},Ku=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,me(),me(),me())}};var lc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},og=class{constructor(e,t){this.targetId=e,this.me=t}},ag=class{constructor(e,t,r=gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},cg=class{constructor(){this.fe=0,this.ge=yN(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),t=me(),r=me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re()}}),new Ku(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=yN()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},gE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tn(),this.qe=mN(),this.Qe=new tt(pe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(rg(s))if(r===0){let o=new J(s.path);this.Ue(t,o,bt.newNoDocument(o,le.min()))}else se(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}fN?.et(function(d,f,g,m,w){var D,C,O,V,L,H;let X={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},Q=f.unchangedNames;return Q&&(X.bloomFilter={applied:w===0,hashCount:(D=Q?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(V=(O=(C=Q?.bits)===null||C===void 0?void 0:C.bitmap)===null||O===void 0?void 0:O.length)!==null&&V!==void 0?V:0,padding:(H=(L=Q?.bits)===null||L===void 0?void 0:L.padding)!==null&&H!==void 0?H:0,mightContain:I=>{var v;return(v=m?.mightContain(I))!==null&&v!==void 0&&v}}),X}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=cs(r).toUint8Array()}catch(c){if(c instanceof eg)return dr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new pE(o,i,s)}catch(c){return dr(c instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&rg(a.target)){let c=new J(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,bt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=me();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Wu(e,t,this.Qe,this.ke,r);return this.ke=Tn(),this.qe=mN(),this.Qe=new tt(pe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new cg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new We(pe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new cg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function mN(){return new tt(J.comparator)}function yN(){return new tt(J.comparator)}var AG={asc:"ASCENDING",desc:"DESCENDING"},xG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MG={and:"AND",or:"OR"},mE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function yE(n,e){return n.useProto3Json||sd(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function RG(n,e){return mc(n,e.toTimestamp())}function pt(n){return se(!!n),le.fromTimestamp(function(t){let r=pi(t);return new st(r.seconds,r.nanos)}(n))}function WI(n,e){return vE(n,e).canonicalString()}function vE(n,e){let t=function(i){return new Re(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function V1(n){let e=Re.fromString(n);return se(W1(e)),e}function Qu(n,e){return WI(n.databaseId,e.path)}function kr(n,e){let t=V1(e);if(t.get(1)!==n.databaseId.projectId)throw new $(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new J(U1(t))}function L1(n,e){return WI(n.databaseId,e)}function j1(n){let e=V1(n);return e.length===4?Re.emptyPath():U1(e)}function wE(n){return new Re(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function U1(n){return se(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function vN(n,e,t){return{name:Qu(n,e),fields:t.value.mapValue.fields}}function B1(n,e,t){let r=kr(n,e.name),i=pt(e.updateTime),s=e.createTime?pt(e.createTime):le.min(),o=new tn({mapValue:{fields:e.fields}}),a=bt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function kG(n,e){return"found"in e?function(r,i){se(!!i.found),i.found.name,i.found.updateTime;let s=kr(r,i.found.name),o=pt(i.found.updateTime),a=i.found.createTime?pt(i.found.createTime):le.min(),c=new tn({mapValue:{fields:i.found.fields}});return bt.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){se(!!i.missing),se(!!i.readTime);let s=kr(r,i.missing),o=pt(i.readTime);return bt.newNoDocument(s,o)}(n,e):re()}function NG(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(se(d===void 0||typeof d=="string"),gt.fromBase64String(d||"")):(se(d===void 0||d instanceof Buffer||d instanceof Uint8Array),gt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let d=u.code===void 0?P.UNKNOWN:P1(u.code);return new $(d,u.message||"")}(o);t=new ag(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kr(n,r.document.name),s=pt(r.document.updateTime),o=r.document.createTime?pt(r.document.createTime):le.min(),a=new tn({mapValue:{fields:r.document.fields}}),c=bt.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new lc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kr(n,r.document),s=r.readTime?pt(r.readTime):le.min(),o=bt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new lc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kr(n,r.document),s=r.removedTargetIds||[];t=new lc([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new fE(i,s),a=r.targetId;t=new og(a,o)}}return t}function Yu(n,e){let t;if(e instanceof fs)t={update:vN(n,e.key,e.value)};else if(e instanceof ps)t={delete:Qu(n,e.key)};else if(e instanceof fr)t={update:vN(n,e.key,e.data),updateMask:jG(e.fieldMask)};else{if(!(e instanceof qu))return re();t={verify:Qu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ds)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof mi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:RG(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(n,e.precondition)),t}function _E(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?ut.updateTime(pt(s.updateTime)):s.exists!==void 0?ut.exists(s.exists):ut.none()}(e.currentDocument):ut.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)se(a.setToServerValue==="REQUEST_TIME"),c=new ds;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new gi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new mi(d)}else"increment"in a?c=new hs(o,a.increment):re();let u=ft.fromServerFormat(a.fieldPath);return new uo(u,c)}(n,i)):[];if(e.update){e.update.name;let i=kr(n,e.update.name),s=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let u=c.fieldPaths||[];return new Un(u.map(d=>ft.fromServerFormat(d)))}(e.updateMask);return new fr(i,s,o,t,r)}return new fs(i,s,t,r)}if(e.delete){let i=kr(n,e.delete);return new ps(i,t)}if(e.verify){let i=kr(n,e.verify);return new qu(i,t)}return re()}function PG(n,e){return n&&n.length>0?(se(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?pt(i.updateTime):pt(s);return o.isEqual(le.min())&&(o=pt(s)),new dE(o,i.transformResults||[])}(t,e))):[]}function $1(n,e){return{documents:[L1(n,e.path)]}}function z1(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=L1(n,i);let s=function(u){if(u.length!==0)return G1($e.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:rc(g.field),direction:FG(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=yE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function q1(n){let e=j1(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){se(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=H1(f);return g instanceof $e&&zI(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(w){return new co(ic(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,sd(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new Or(m,g)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let g=!f.before,m=f.values||[];return new Or(m,g)}(t.endAt)),v1(e,i,o,s,a,"F",c,u)}function OG(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function H1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ic(t.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ic(t.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ic(t.unaryFilter.field);return Te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ic(t.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(n):n.fieldFilter!==void 0?function(t){return Te.create(ic(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $e.create(t.compositeFilter.filters.map(r=>H1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(t.compositeFilter.op))}(n):re()}function FG(n){return AG[n]}function VG(n){return xG[n]}function LG(n){return MG[n]}function rc(n){return{fieldPath:n.canonicalString()}}function ic(n){return ft.fromServerFormat(n.fieldPath)}function G1(n){return n instanceof Te?function(t){if(t.op==="=="){if(tN(t.value))return{unaryFilter:{field:rc(t.field),op:"IS_NAN"}};if(eN(t.value))return{unaryFilter:{field:rc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(tN(t.value))return{unaryFilter:{field:rc(t.field),op:"IS_NOT_NAN"}};if(eN(t.value))return{unaryFilter:{field:rc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rc(t.field),op:VG(t.op),value:t.value}}}(n):n instanceof $e?function(t){let r=t.getFilters().map(i=>G1(i));return r.length===1?r[0]:{compositeFilter:{op:LG(t.op),filters:r}}}(n):re()}function jG(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function W1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var yc=class n{constructor(e,t,r,i,s=le.min(),o=le.min(),a=gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var lg=class{constructor(e){this.ct=e}};function UG(n,e){let t;if(e.document)t=B1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=J.fromSegments(e.noDocument.path),i=fo(e.noDocument.readTime);t=bt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return re();{let r=J.fromSegments(e.unknownDocument.path),i=fo(e.unknownDocument.version);t=bt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new st(i[0],i[1]);return le.fromTimestamp(s)}(e.readTime)),t}function wN(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ug(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Qu(s,o.key),fields:o.data.value.mapValue.fields,updateTime:mc(s,o.version.toTimestamp()),createTime:mc(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ho(e.version)};else{if(!e.isUnknownDocument())return re();r.unknownDocument={path:t.path.toArray(),version:ho(e.version)}}return r}function ug(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ho(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fo(n){let e=new st(n.seconds,n.nanoseconds);return le.fromTimestamp(e)}function to(n,e){let t=(e.baseMutations||[]).map(s=>_E(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>_E(n.ct,s)),i=st.fromMillis(e.localWriteTimeMs);return new Hu(e.batchId,i,t,r)}function ku(n){let e=fo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?fo(n.lastLimboFreeSnapshotVersion):le.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return se(s.documents.length===1),fn(Ac(j1(s.documents[0])))}(n.query):function(s){return fn(q1(s))}(n.query),new yc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,gt.fromBase64String(n.resumeToken))}function K1(n,e){let t=ho(e.snapshotVersion),r=ho(e.lastLimboFreeSnapshotVersion),i;i=rg(e.target)?$1(n.ct,e.target):z1(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:lo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function KI(n){let e=q1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?sg(e,e.limit,"L"):e}function P0(n,e){return new Gu(e.largestBatchId,_E(n.ct,e.overlayMutation))}function _N(n,e){let t=e.path.lastSegment();return[n,hn(e.path.popLast()),t]}function EN(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ho(r.readTime),documentKey:hn(r.documentKey.path),largestBatchId:r.largestBatchId}}var EE=class{getBundleMetadata(e,t){return IN(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:fo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return IN(e).put(function(i){return{bundleId:i.id,createTime:ho(pt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return bN(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:KI(s.bundledQuery),readTime:fo(s.readTime)}}(r)})}saveNamedQuery(e,t){return bN(e).put(function(i){return{name:i.name,readTime:ho(pt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function IN(n){return Rt(n,"bundles")}function bN(n){return Rt(n,"namedQueries")}var dg=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Su(e).get(_N(this.userId,t)).next(r=>r?P0(this.serializer,r):null)}getOverlays(e,t){let r=Mr();return R.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Gu(t,o);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(hn(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Su(e).j("collectionPathOverlayIndex",a))}),R.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Mr(),s=hn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Su(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let u=P0(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Mr(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Su(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,d)=>{let f=P0(this.serializer,u);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Su(e).put(function(i,s,o){let[a,c,u]=_N(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Yu(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Su(n){return Rt(n,"documentOverlays")}var IE=class{Pt(e){return Rt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?gt.fromUint8Array(r):gt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var hi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(nt(e.integerValue));else if("doubleValue"in e){let r=nt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ju(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=pi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(cs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?u1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Gg(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):re()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(nt(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),J.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};hi.vt=new hi;function BG(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function DN(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=BG(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var bE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=DN(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=DN(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},DE=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},CE=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},no=class{constructor(){this.jt=new bE,this.Ht=new DE(this.jt),this.Jt=new CE(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ro=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function es(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=CN(n.arrayValue,e.arrayValue),t!==0?t:(t=CN(n.directionalValue,e.directionalValue),t!==0?t:J.comparator(n.documentKey,e.documentKey)))}function CN(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var hg=class{constructor(e){this.Xt=new We((t,r)=>ft.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(se(e.collectionGroup===this.collectionId),this.nn)return!1;let t=G0(e);if(t!==void 0&&!this.sn(t))return!1;let r=Xs(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new We(ft.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ac(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ac(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ac(r.field,r.dir==="asc"?0:1)));return new dc(dc.UNKNOWN_ID,this.collectionId,t,Lu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function Q1(n){var e,t;if(se(n instanceof Te||n instanceof $e),n instanceof Te){if(n instanceof ng){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Te.create(n.field,"==",s)))||[];return $e.create(i,"or")}return n}let r=n.filters.map(i=>Q1(i));return $e.create(r,n.op)}function $G(n){if(n.getFilters().length===0)return[];let e=AE(Q1(n));return se(Y1(e)),TE(e)||SE(e)?[e]:e.getFilters()}function TE(n){return n instanceof Te}function SE(n){return n instanceof $e&&zI(n)}function Y1(n){return TE(n)||SE(n)||function(t){if(t instanceof $e&&eE(t)){for(let r of t.getFilters())if(!TE(r)&&!SE(r))return!1;return!0}return!1}(n)}function AE(n){if(se(n instanceof Te||n instanceof $e),n instanceof Te)return n;if(n.filters.length===1)return AE(n.filters[0]);let e=n.filters.map(r=>AE(r)),t=$e.create(e,n.op);return t=fg(t),Y1(t)?t:(se(t instanceof $e),se(fc(t)),se(t.filters.length>1),t.filters.reduce((r,i)=>QI(r,i)))}function QI(n,e){let t;return se(n instanceof Te||n instanceof $e),se(e instanceof Te||e instanceof $e),t=n instanceof Te?e instanceof Te?function(i,s){return $e.create([i,s],"and")}(n,e):TN(n,e):e instanceof Te?TN(e,n):function(i,s){if(se(i.filters.length>0&&s.filters.length>0),fc(i)&&fc(s))return g1(i,s.getFilters());let o=eE(i)?i:s,a=eE(i)?s:i,c=o.filters.map(u=>QI(u,a));return $e.create(c,"or")}(n,e),fg(t)}function TN(n,e){if(fc(e))return g1(e,n.getFilters());{let t=e.filters.map(r=>QI(n,r));return $e.create(t,"or")}}function fg(n){if(se(n instanceof Te||n instanceof $e),n instanceof Te)return n;let e=n.getFilters();if(e.length===1)return fg(e[0]);if(f1(n))return n;let t=e.map(i=>fg(i)),r=[];return t.forEach(i=>{i instanceof Te?r.push(i):i instanceof $e&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:$e.create(r,n.op)}var xE=class{constructor(){this.un=new Zu}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(Jn.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},Zu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new We(Re.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new We(Re.comparator)).toArray()}};var jp=new Uint8Array(0),ME=class{constructor(e,t){this.databaseId=t,this.cn=new Zu,this.ln=new Fr(r=>lo(r),(r,i)=>od(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:hn(i)};return SN(e).put(s)}return R.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[JN(t),""],!1,!0);return SN(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(xr(o.parent))}return r})}addFieldIndex(e,t){let r=Au(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Xa(e);return s.next(a=>{o.put(EN(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=Au(e),i=Xa(e),s=Ja(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Au(e),r=Ja(e),i=Xa(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return R.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new hg(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Ja(e),i=!0,s=new Map;return R.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=me(),a=[];return R.forEach(s,(c,u)=>{z("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(c)} to execute ${lo(t)}`);let d=function(L,H){let X=G0(H);if(X===void 0)return null;for(let Q of ig(L,X.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(u,c),f=function(L,H){let X=new Map;for(let Q of Xs(H))for(let I of ig(L,Q.fieldPath))switch(I.op){case"==":case"in":X.set(Q.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return X.set(Q.fieldPath.canonicalString(),I.value),Array.from(X.values())}return null}(u,c),g=function(L,H){let X=[],Q=!0;for(let I of Xs(H)){let v=I.kind===0?oN(L,I.fieldPath,L.startAt):aN(L,I.fieldPath,L.startAt);X.push(v.value),Q&&(Q=v.inclusive)}return new Or(X,Q)}(u,c),m=function(L,H){let X=[],Q=!0;for(let I of Xs(H)){let v=I.kind===0?aN(L,I.fieldPath,L.endAt):oN(L,I.fieldPath,L.endAt);X.push(v.value),Q&&(Q=v.inclusive)}return new Or(X,Q)}(u,c),w=this.In(c,u,g),D=this.In(c,u,m),C=this.Tn(c,u,f),O=this.En(c.indexId,d,w,g.inclusive,D,m.inclusive,C);return R.forEach(O,V=>r.G(V,t.limit).next(L=>{L.forEach(H=>{let X=J.fromSegments(H.documentKey);o.has(X)||(o=o.add(X),a.push(X))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=$G($e.create(e.filters,"and")).map(r=>lE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),u=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.dn(t[f/u]):jp,m=this.An(e,g,r[f%u],i),w=this.Rn(e,g,s[f%u],o),D=a.map(C=>this.An(e,g,C,!0));d.push(...this.createRange(m,w,D))}return d}An(e,t,r,i){let s=new ro(e,J.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new ro(e,J.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new hg(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return R.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new We(ft.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:u=u.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(u=u.add(f.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new no;for(let i of Xs(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);hi.vt.It(s,o)}return r.zt()}dn(e){let t=new no;return hi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new no;return hi.vt.It(ao(this.databaseId,t),r.Yt(function(s){let o=Xs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new no);let s=0;for(let o of Xs(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&zu(a))i=this.gn(i,o,a);else{let u=c.Yt(o.kind);hi.vt.It(a,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new no;c.seed(a.zt()),hi.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Au(e),i=Xa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return R.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){let g=f?new Lu(f.sequenceNumber,new Jn(fo(f.readTime),new J(xr(f.documentKey)),f.largestBatchId)):Lu.empty(),m=d.fields.map(([w,D])=>new ac(ft.fromServerFormat(w),D));return new dc(d.indexId,d.collectionGroup,m,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:pe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Au(e),s=Xa(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>R.forEach(a,c=>s.put(EN(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return R.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,c=>this.wn(e,i,c).next(u=>{let d=this.Sn(s,c);return u.isEqual(d)?R.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,t,r,i){return Ja(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Ja(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Ja(e),s=new We(es);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new ro(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new We(es),i=this.Vn(t,e);if(i==null)return r;let s=G0(t);if(s!=null){let o=e.data.field(s.fieldPath);if(zu(o))for(let a of o.arrayValue.values||[])r=r.add(new ro(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ro(t.indexId,e.key,jp,i));return r}bn(e,t,r,i,s){z("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,u,d,f,g){let m=c.getIterator(),w=u.getIterator(),D=Za(m),C=Za(w);for(;D||C;){let O=!1,V=!1;if(D&&C){let L=d(D,C);L<0?V=!0:L>0&&(O=!0)}else D!=null?V=!0:O=!0;O?(f(C),C=Za(w)):V?(g(D),D=Za(m)):(D=Za(m),C=Za(w))}}(i,s,es,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),R.waitFor(o)}yn(e){let t=1;return Xa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>es(o,a)).filter((o,a,c)=>!a||es(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=es(o,e),c=es(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,jp,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,jp,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return es(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(AN)}getMinOffset(e,t){return R.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||re())).next(AN)}};function SN(n){return Rt(n,"collectionParents")}function Ja(n){return Rt(n,"indexEntries")}function Au(n){return Rt(n,"indexConfiguration")}function Xa(n){return Rt(n,"indexState")}function AN(n){se(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;jI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Jn(e.readTime,e.documentKey,t)}var xN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function Z1(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(d,f,g)=>(a++,g.delete()));s.push(c.next(()=>{se(a===1)}));let u=[];for(let d of t.mutations){let f=i1(e,d.key.path,t.batchId);s.push(i.delete(f)),u.push(d.key)}return R.waitFor(s).next(()=>u)}function pg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw re();e=n.noDocument}return JSON.stringify(e).length}Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(41943040,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);var gg=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){se(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=sc(e),o=ts(e);return o.add({}).next(a=>{se(typeof a=="number");let c=new Hu(a,t,r,i),u=function(m,w,D){let C=D.baseMutations.map(V=>Yu(m.ct,V)),O=D.mutations.map(V=>Yu(m.ct,V));return{userId:w,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:C,mutations:O}}(this.serializer,this.userId,c),d=[],f=new We((g,m)=>pe(g.canonicalString(),m.canonicalString()));for(let g of i){let m=i1(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(u)),d.push(s.put(m,KH))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),R.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return ts(e).get(t).next(r=>r?(se(r.userId===this.userId),to(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?R.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return ts(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(se(a.batchId>=r),s=to(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ts(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ts(e).U("userMutationsIndex",t).next(r=>r.map(i=>to(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=zp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return sc(e).J({range:i},(o,a,c)=>{let[u,d,f]=o,g=xr(d);if(u===this.userId&&t.path.isEqual(g))return ts(e).get(f).next(m=>{if(!m)throw re();se(m.userId===this.userId),s.push(to(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new We(pe),i=[];return t.forEach(s=>{let o=zp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=sc(e).J({range:a},(u,d,f)=>{let[g,m,w]=u,D=xr(m);g===this.userId&&s.path.isEqual(D)?r=r.add(w):f.done()});i.push(c)}),R.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=zp(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new We(pe);return sc(e).J({range:o},(c,u,d)=>{let[f,g,m]=c,w=xr(g);f===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(ts(e).get(s).next(o=>{if(o===null)throw re();se(o.userId===this.userId),r.push(to(this.serializer,o))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Z1(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return R.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return sc(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=xr(s[1]);i.push(c)}else a.done()}).next(()=>{se(i.length===0)})})}containsKey(e,t){return J1(e,this.userId,t)}Nn(e){return X1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function J1(n,e,t){let r=zp(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return sc(n).J({range:s,H:!0},(a,c,u)=>{let[d,f,g]=a;d===e&&f===i&&(o=!0),u.done()}).next(()=>o)}function ts(n){return Rt(n,"mutations")}function sc(n){return Rt(n,"documentMutations")}function X1(n){return Rt(n,"mutationQueues")}var vc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var RE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new vc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>le.fromTimestamp(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ec(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(se(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return ec(e).J((o,a)=>{let c=ku(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>R.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ec(e).J((r,i)=>{let s=ku(i);t(s)})}qn(e){return MN(e).get("targetGlobalKey").next(t=>(se(t!==null),t))}Qn(e,t){return MN(e).put("targetGlobalKey",t)}Kn(e,t){return ec(e).put(K1(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=lo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return ec(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let u=ku(a);od(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=ns(e);return t.forEach(o=>{let a=hn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),R.waitFor(i)}removeMatchingKeys(e,t,r){let i=ns(e);return R.forEach(t,s=>{let o=hn(s.path);return R.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=ns(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ns(e),s=me();return i.J({range:r,H:!0},(o,a,c)=>{let u=xr(o[1]),d=new J(u);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=hn(t.path),i=IDBKeyRange.bound([r],[JN(r)],!1,!0),s=0;return ns(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return ec(e).get(t).next(r=>r?ku(r):null)}};function ec(n){return Rt(n,"targets")}function MN(n){return Rt(n,"targetGlobal")}function ns(n){return Rt(n,"targetDocuments")}function RN([n,e],[t,r]){let i=pe(n,t);return i===0?pe(e,r):i}var kE=class{constructor(e){this.Un=e,this.buffer=new We(RN),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();RN(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},NE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ys(t)?z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ms(t)}yield this.Hn(3e5)}))}},PE=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return R.resolve(jn.oe);let r=new kE(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(xN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xN):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),tc()<=yr.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function zG(n,e){return new PE(n,e)}var OE=class{constructor(e,t){this.db=e,this.garbageCollector=zG(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Up(e,r)}removeReference(e,t,r){return Up(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Up(e,t)}nr(e,t){return function(i,s){let o=!1;return X1(i).Y(a=>J1(i,a,s).next(c=>(c&&(o=!0),R.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,le.min()),ns(e).delete(function(f){return[0,hn(f.path)]}(o))))});i.push(c)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Up(e,t)}tr(e,t){let r=ns(e),i,s=jn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(s!==jn.oe&&t(new J(xr(i)),s),s=u,i=c):s=jn.oe}).next(()=>{s!==jn.oe&&t(new J(xr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Up(n,e){return ns(n).put(function(r,i){return{targetId:0,path:hn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var mg=class{constructor(){this.changes=new Fr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var FE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Js(e).put(r)}removeEntry(e,t,r){return Js(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ug(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=bt.newInvalidDocument(t);return Js(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xu(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:bt.newInvalidDocument(t)};return Js(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(xu(t))},(i,s)=>{r={document:this.ir(t,s),size:pg(s)}}).next(()=>r)}getEntries(e,t){let r=Tn();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Tn(),i=new tt(J.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,pg(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return R.resolve();let i=new We(PN);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(xu(i.first()),xu(i.last())),o=i.getIterator(),a=o.getNext();return Js(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{let f=J.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&PN(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.$(xu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ug(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Js(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let d=Tn();for(let f of u){let g=this.ir(J.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(cd(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Tn(),o=NN(t,r),a=NN(t,Jn.max());return Js(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,d)=>{let f=this.ir(J.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new VE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return kN(e).get("remoteDocumentGlobalKey").next(t=>(se(!!t),t))}rr(e,t){return kN(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=UG(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return bt.newInvalidDocument(e)}};function eP(n){return new FE(n)}var VE=class extends mg{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Fr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new We((s,o)=>pe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=wN(this.cr.serializer,o);i=i.add(s.path.popLast());let u=pg(c);r+=u-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=wN(this.cr.serializer,o.convertToNoDocument(le.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),R.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function kN(n){return Rt(n,"remoteDocumentGlobal")}function Js(n){return Rt(n,"remoteDocumentsV14")}function xu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function NN(n,e){let t=e.documentKey.path.toArray();return[n,ug(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function PN(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=pe(t[s],r[s]),i)return i;return i=pe(t.length,r.length),i||(i=pe(t[t.length-2],r[r.length-2]),i||pe(t[t.length-1],r[r.length-1]))}var LE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var yg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Ou(r.mutation,i,Un.empty(),st.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=me()){let i=Mr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Ru();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Mr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,me()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Tn(),o=Pu(),a=function(){return Pu()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof fr)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Ou(d.mutation,u,d.mutation.getFieldMask(),st.now())):o.set(u.key,Un.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new LE(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Pu(),i=new tt((o,a)=>o-a),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Un.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||me()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=D1();d.forEach(g=>{if(!s.has(g)){let m=R1(t.get(g),r.get(g));m!==null&&f.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):R.resolve(Mr()),a=-1,c=s;return o.next(u=>R.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,me())).next(d=>({batchId:a,changes:b1(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(r=>{let i=Ru();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Ru();return this.indexManager.getCollectionParents(e,s).next(a=>R.forEach(a,c=>{let u=function(f,g){return new hr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,bt.newInvalidDocument(d)))});let a=Ru();return o.forEach((c,u)=>{let d=s.get(c);d!==void 0&&Ou(d.mutation,u,Un.empty(),st.now()),cd(t,u)&&(a=a.insert(c,u))}),a})}};var jE=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:pt(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:KI(i.bundledQuery),readTime:pt(i.readTime)}}(t)),R.resolve()}};var UE=class{constructor(){this.overlays=new tt(J.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Mr();return R.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=Mr(),s=t.length+1,o=new J(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tt((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Mr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Mr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Gu(t,r));let s=this.Ir.get(t);s===void 0&&(s=me(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var BE=class{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var Ju=class{constructor(){this.Tr=new We(Et.Er),this.dr=new We(Et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new J(new Re([])),r=new Et(t,e),i=new Et(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new J(new Re([])),r=new Et(t,e),i=new Et(t,e+1),s=me();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return J.comparator(e.key,t.key)||pe(e.wr,t.wr)}static Ar(e,t){return pe(e.wr,t.wr)||J.comparator(e.key,t.key)}};var $E=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new We(Et.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Hu(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Et(t,0),i=new Et(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new We(pe);return t.forEach(i=>{let s=new Et(i,0),o=new Et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;J.isDocumentKey(s)||(s=s.child(""));let o=new Et(new J(s),0),a=new We(pe);return this.br.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},o),R.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){se(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let s=new Et(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Et(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var zE=class{constructor(e){this.Mr=e,this.docs=function(){return new tt(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(t))}getEntries(e,t){let r=Tn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Tn(),o=t.path,a=new J(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||jI(e1(d),r)<=0||(i.has(d.key)||cd(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,t,r,i){re()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qE(this)}getSize(e){return R.resolve(this.size)}},qE=class extends mg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var HE=class{constructor(e){this.persistence=e,this.Nr=new Fr(t=>lo(t),od),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ju,this.targetCount=0,this.kr=vc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new vc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var vg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new jn(0),this.Kr=!1,this.Kr=!0,this.$r=new BE,this.referenceDelegate=e(this),this.Ur=new HE(this),this.indexManager=new xE,this.remoteDocumentCache=function(i){return new zE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lg(t),this.Gr=new jE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new UE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new $E(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new GE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},GE=class extends Zp{constructor(e){super(),this.currentSequenceNumber=e}},wg=class n{constructor(e){this.persistence=e,this.Jr=new Ju,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=J.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var WE=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new Jp("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yk,{unique:!0}),c.createObjectStore("documentMutations")}(e),ON(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=R.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),ON(e)),o=o.next(()=>function(c){let u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Yk,{unique:!0});let f=u.store("mutations"),g=d.map(m=>f.put(m));return R.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:oG});u.createIndex("collectionPathOverlayIndex",aG,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",cG,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:QH});u.createIndex("documentKeyIndex",YH),u.createIndex("collectionGroupIndex",ZH)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:nG}).createIndex("sequenceNumberIndex",rG,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:iG}).createIndex("documentKeyIndex",sG,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=pg(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>R.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>R.forEach(a,c=>{se(c.userId===s.userId);let u=to(this.serializer,c);return Z1(e,s.userId,u).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Re(o),u=function(f){return[0,hn(f)]}(c);s.push(t.get(u).next(d=>d?R.resolve():(f=>t.put({targetId:0,path:hn(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>R.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:tG});let r=t.store("collectionParents"),i=new Zu,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:hn(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Re(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{let d=xr(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=ku(i),o=K1(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new J(Re.fromString(f.document.name).popFirst(5)):f.noDocument?J.fromSegments(f.noDocument.path):f.unknownDocument?J.fromSegments(f.unknownDocument.path):re()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>R.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=eP(this.serializer),s=new vg(wg.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:me();to(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),R.forEach(a,(c,u)=>{let d=new It(u),f=dg.lt(this.serializer,d),g=s.getIndexManager(d),m=gg.lt(d,this.serializer,g,s.referenceDelegate);return new yg(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new Uu(t,jn.oe),c).next()})})}};function ON(n){n.createObjectStore("targetDocuments",{keyPath:XH}).createIndex("documentTargetsIndex",eG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JH,{unique:!0}),n.createObjectStore("targetGlobal")}var O0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",KE=class n{constructor(e,t,r,i,s,o,a,c,u,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new $(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OE(this,i),this.Ai=t+"main",this.serializer=new lg(c),this.Ri=new as(this.Ai,this.hi,new WE(this.serializer)),this.$r=new IE,this.Ur=new RE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=eP(this.serializer),this.Gr=new EE,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ht("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new $(P.FAILED_PRECONDITION,O0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new jn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>b(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>b(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>b(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ys(e))return z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Mu(e).get("owner").next(t=>R.resolve(this.vi(t)))}Ci(e){return Bp(e).delete(this.clientId)}Fi(){return b(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Rt(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return R.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):Mu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new $(P.FAILED_PRECONDITION,O0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bp(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&z("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return b(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Uu(e,jn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Bp(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return gg.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new ME(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return dg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){z("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?dG:c===16?uG:c===15?BI:c===14?a1:c===13?o1:c===12?lG:c===11?s1:void re()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Uu(a,this.Qr?this.Qr.next():jn.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new $(P.FAILED_PRECONDITION,t1);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Mu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new $(P.FAILED_PRECONDITION,O0)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mu(e).put("owner",t)}static D(){return as.D()}bi(e){let t=Mu(e);return t.get("owner").next(r=>this.vi(r)?(z("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):R.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;zm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ht("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ht("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Mu(n){return Rt(n,"owner")}function Bp(n){return Rt(n,"clientMetadata")}function YI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var QE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=me(),i=me();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var YE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _g=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return zm()?8:n1(rl())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new YE;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(tc()<=yr.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",nc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(tc()<=yr.DEBUG&&z("QueryEngine","Query:",nc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(tc()<=yr.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",nc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(t))):R.resolve())}Yi(e,t){if(cN(t))return R.resolve(null);let r=fn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=sg(t,null,"F"),r=fn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=me(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.ts(t,a);return this.ns(t,u,o,c.readTime)?this.Yi(e,sg(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return cN(t)||i.isEqual(le.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?R.resolve(null):(tc()<=yr.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nc(t)),this.rs(e,o,t,XN(i,-1)).next(a=>a))})}ts(e,t){let r=new We(E1(e));return t.forEach((i,s)=>{cd(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return tc()<=yr.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",nc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Jn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ZE=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new tt(pe),this._s=new Fr(s=>lo(s),od),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function tP(n,e,t,r){return new ZE(n,e,t,r)}function nP(n,e){return b(this,null,function*(){let t=Z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=me();for(let u of i){o.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})})}function qG(n,e){let t=Z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,g=f.keys(),m=R.resolve();return g.forEach(w=>{m=m.next(()=>d.getEntry(c,w)).next(D=>{let C=u.docVersions.get(w);se(C!==null),D.version.compareTo(C)<0&&(f.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),d.addEntry(D)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function rP(n){let e=Z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function HG(n,e){let t=Z(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(gt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(D,C,O){return D.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let c=Tn(),u=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(iP(s,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(le.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}function iP(n,e,t){let r=me(),i=me();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Tn();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function GG(n,e){let t=Z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wc(n,e){let t=Z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new yc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function _c(n,e,t){return b(this,null,function*(){let r=Z(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ys(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Eg(n,e,t){let r=Z(n),i=le.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){let f=Z(c),g=f._s.get(d);return g!==void 0?R.resolve(f.os.get(g)):f.Ur.getTargetData(u,d)}(r,o,fn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:le.min(),t?s:me())).next(a=>(aP(r,_1(e),a),{documents:a,Ts:s})))}function sP(n,e){let t=Z(n),r=Z(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function oP(n,e){let t=Z(n),r=t.us.get(e)||le.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,XN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(aP(t,e,i),i))}function aP(n,e,t){let r=n.us.get(e)||le.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function WG(n,e,t,r){return b(this,null,function*(){let i=Z(n),s=me(),o=Tn();for(let u of t){let d=e.Es(u.metadata.name);u.document&&(s=s.add(d));let f=e.ds(u);f.setReadTime(e.As(u.metadata.readTime)),o=o.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield wc(i,function(d){return fn(Ac(Re.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>iP(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))})}function KG(r,i){return b(this,arguments,function*(n,e,t=me()){let s=yield wc(n,fn(KI(e.bundledQuery))),o=Z(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=pt(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let u=s.withResumeToken(gt.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(u.targetId,u),o.Ur.updateTargetData(a,u).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function FN(n,e){return`firestore_clients_${n}_${e}`}function VN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function F0(n,e){return`firestore_targets_${n}_${e}`}var Ig=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new $(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(ht("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Fu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new $(r.error.code,r.error.message))),s?new n(e,r.state,i):(ht("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},bg=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=HI();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=r1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(ht("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},JE=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ht("SharedClientState",`Failed to parse online state: ${e}`),null)}},Xu=class{constructor(){this.activeTargetIds=HI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Vu=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new tt(pe),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=FN(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Xu),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return b(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(FN(this.persistenceKey,r));if(i){let s=bg.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(F0(this.persistenceKey,e));if(i){let s=Fu.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(F0(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return z("SharedClientState","READ",e,t),t}setItem(e,t){z("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(z("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>b(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=jn.oe;if(s!=null)try{let a=JSON.parse(s);se(typeof a=="number"),o=a}catch(a){ht("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==jn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Ig(this.currentUser,e,t,r),s=VN(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=VN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=F0(this.persistenceKey,e),s=new Fu(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return bg.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Ig.Rs(new It(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Fu.Rs(i,t)}Ls(e){return JE.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return b(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=HI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Dg=class{constructor(){this.so=new Xu,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xu,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var XE=class{_o(e){}shutdown(){}};var Cg=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var $p=null;function V0(){return $p===null?$p=function(){return 268435456+Math.round(2147483648*Math.random())}():$p++,"0x"+$p.toString(16)}var QG={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var eI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var en="WebChannelConnection",tI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=V0(),c=this.xo(t,r.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,c,u,i).then(d=>(z("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw dr("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=QG[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=V0();return new Promise((o,a)=>{let c=new x0;c.setWithCredentials(!0),c.listenOnce(M0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Tu.NO_ERROR:let d=c.getResponseJson();z(en,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Tu.TIMEOUT:z(en,`RPC '${e}' ${s} timed out`),a(new $(P.DEADLINE_EXCEEDED,"Request time out"));break;case Tu.HTTP_ERROR:let f=c.getStatus();if(z(en,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let w=function(C){let O=C.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(O)>=0?O:P.UNKNOWN}(m.status);a(new $(w,m.message))}else a(new $(P.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new $(P.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{z(en,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);z(en,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=V0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=N0(),a=k0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");z(en,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,m=!1,w=new eI({Io:C=>{m?z(en,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(z(en,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),z(en,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},To:()=>f.close()}),D=(C,O,V)=>{C.listen(O,L=>{try{V(L)}catch(H){setTimeout(()=>{throw H},0)}})};return D(f,Ya.EventType.OPEN,()=>{m||(z(en,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),D(f,Ya.EventType.CLOSE,()=>{m||(m=!0,z(en,`RPC '${e}' stream ${i} transport closed`),w.So())}),D(f,Ya.EventType.ERROR,C=>{m||(m=!0,dr(en,`RPC '${e}' stream ${i} transport errored:`,C),w.So(new $(P.UNAVAILABLE,"The operation could not be completed")))}),D(f,Ya.EventType.MESSAGE,C=>{var O;if(!m){let V=C.data[0];se(!!V);let L=V,H=L.error||((O=L[0])===null||O===void 0?void 0:O.error);if(H){z(en,`RPC '${e}' stream ${i} received error:`,H);let X=H.status,Q=function(_){let T=_t[_];if(T!==void 0)return P1(T)}(X),I=H.message;Q===void 0&&(Q=P.INTERNAL,I="Unknown error status: "+X+" with message "+H.message),m=!0,w.So(new $(Q,I)),f.close()}else z(en,`RPC '${e}' stream ${i} received:`,V),w.bo(V)}}),D(a,R0.STAT_EVENT,C=>{C.stat===Lp.PROXY?z(en,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Lp.NOPROXY&&z(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function cP(){return typeof window<"u"?window:null}function Wp(){return typeof document<"u"?document:null}function ld(n){return new mE(n,!0)}var ed=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Tg=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ed(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(ht(t.toString()),ht("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new $(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},nI=class extends Tg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=NG(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?pt(o.readTime):le.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=wE(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=rg(c)?{documents:$1(s,c)}:{query:z1(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=F1(s,o.resumeToken);let u=yE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=mc(s,o.snapshotVersion.toTimestamp());let u=yE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=OG(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=wE(this.serializer),t.removeTarget=e,this.a_(t)}},rI=class extends Tg{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return se(!!e.streamToken),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=PG(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=wE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Yu(this.serializer,r))};this.a_(t)}};var iI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,vE(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(P.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,vE(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},sI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ht(t),this.D_=!1):z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var oI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){vs(this)&&(z("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let u=Z(c);u.L_.add(4),yield xc(u),u.q_.set("Unknown"),u.L_.delete(4),yield ud(u)})}(this))}))}),this.q_=new sI(r,i)}};function ud(n){return b(this,null,function*(){if(vs(n))for(let e of n.B_)yield e(!0)})}function xc(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Wg(n,e){let t=Z(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),XI(t)?JI(t):Rc(t).r_()&&ZI(t,e))}function Ec(n,e){let t=Z(n),r=Rc(t);t.N_.delete(e),r.r_()&&lP(t,e),t.N_.size===0&&(r.r_()?r.o_():vs(t)&&t.q_.set("Unknown"))}function ZI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Rc(n).A_(e)}function lP(n,e){n.Q_.xe(e),Rc(n).R_(e)}function JI(n){n.Q_=new gE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Rc(n).start(),n.q_.v_()}function XI(n){return vs(n)&&!Rc(n).n_()&&n.N_.size>0}function vs(n){return Z(n).L_.size===0}function uP(n){n.Q_=void 0}function YG(n){return b(this,null,function*(){n.q_.set("Online")})}function ZG(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{ZI(n,e)})})}function JG(n,e){return b(this,null,function*(){uP(n),XI(n)?(n.q_.M_(e),JI(n)):n.q_.set("Unknown")})}function XG(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof ag&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sg(n,r)}else if(e instanceof lc?n.Q_.Ke(e):e instanceof og?n.Q_.He(e):n.Q_.We(e),!t.isEqual(le.min()))try{let r=yield rP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(gt.EMPTY_BYTE_STRING,d.snapshotVersion)),lP(s,c);let f=new yc(d.target,c,u,d.sequenceNumber);ZI(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Sg(n,r)}})}function Sg(n,e,t){return b(this,null,function*(){if(!ys(e))throw e;n.L_.add(1),yield xc(n),n.q_.set("Offline"),t||(t=()=>rP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ud(n)}))})}function dP(n,e){return e().catch(t=>Sg(n,t,e))}function Mc(n){return b(this,null,function*(){let e=Z(n),t=gs(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;e5(e);)try{let i=yield GG(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,t5(e,i)}catch(i){yield Sg(e,i)}hP(e)&&fP(e)})}function e5(n){return vs(n)&&n.O_.length<10}function t5(n,e){n.O_.push(e);let t=gs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function hP(n){return vs(n)&&!gs(n).n_()&&n.O_.length>0}function fP(n){gs(n).start()}function n5(n){return b(this,null,function*(){gs(n).p_()})}function r5(n){return b(this,null,function*(){let e=gs(n);for(let t of n.O_)e.m_(t.mutations)})}function i5(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=hE.from(r,e,t);yield dP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Mc(n)})}function s5(n,e){return b(this,null,function*(){e&&gs(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return N1(o)&&o!==P.ABORTED}(i.code)){let s=r.O_.shift();gs(r).s_(),yield dP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Mc(r)}})}(n,e)),hP(n)&&fP(n)})}function LN(n,e){return b(this,null,function*(){let t=Z(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");let r=vs(t);t.L_.add(3),yield xc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ud(t)})}function aI(n,e){return b(this,null,function*(){let t=Z(n);e?(t.L_.delete(2),yield ud(t)):e||(t.L_.add(2),yield xc(t),t.q_.set("Unknown"))})}function Rc(n){return n.K_||(n.K_=function(t,r,i){let s=Z(t);return s.w_(),new nI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:YG.bind(null,n),Ro:ZG.bind(null,n),mo:JG.bind(null,n),d_:XG.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),XI(n)?JI(n):n.q_.set("Unknown")):(yield n.K_.stop(),uP(n))}))),n.K_}function gs(n){return n.U_||(n.U_=function(t,r,i){let s=Z(t);return s.w_(),new rI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:n5.bind(null,n),mo:s5.bind(null,n),f_:r5.bind(null,n),g_:i5.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield Mc(n)):(yield n.U_.stop(),n.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var cI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Mt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function kc(n,e){if(ht("AsyncQueue",`${e}: ${n}`),ys(n))return new $(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Ag=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||J.comparator(t.key,r.key):(t,r)=>J.comparator(t.key,r.key),this.keyedMap=Ru(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var xg=class{constructor(){this.W_=new tt(J.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ic=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Ag.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var lI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},uI=class{constructor(){this.queries=jN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Z(t),s=i.queries;i.queries=jN(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new $(P.ABORTED,"Firestore shutting down"))}};function jN(){return new Fr(n=>w1(n),ad)}function eb(n,e){return b(this,null,function*(){let t=Z(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new lI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=kc(o,`Initialization of query '${nc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&nb(t)})}function tb(n,e){return b(this,null,function*(){let t=Z(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function o5(n,e){let t=Z(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&nb(t)}function a5(n,e,t){let r=Z(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function nb(n){n.Y_.forEach(e=>{e.next()})}var dI,UN;(UN=dI||(dI={})).ea="default",UN.Cache="cache";var td=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==dI.Cache}};var hI=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Mg=class{constructor(e){this.serializer=e}Es(e){return kr(this.serializer,e)}ds(e){return e.metadata.exists?B1(this.serializer,e.document,!1):bt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return pt(e)}},fI=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=pP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Re.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Mg(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||me()).add(s);t.set(o,a)}}return t}complete(){return b(this,null,function*(){let e=yield WG(this.localStore,new Mg(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield KG(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function pP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Rg=class{constructor(e){this.key=e}},kg=class{constructor(e){this.key=e}},Ng=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=E1(e),this.Ra=new Ag(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new xg,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=cd(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),C=!1;g&&m?g.data.isEqual(m.data)?w!==D&&(r.track({type:3,doc:m}),C=!0):this.ga(g,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.Aa(m,c)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),C=!0):g&&!m&&(r.track({type:1,doc:g}),C=!0,(c||u)&&(a=!0)),C&&(m?(o=o.add(m),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(m,w){let D=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return D(m)-D(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Ic(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new xg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new kg(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Rg(r))}),t}ba(e){this.Ta=e.Ts,this.da=me();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ic.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},pI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},gI=class{constructor(e){this.key=e,this.va=!1}},mI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Fr(a=>w1(a),ad),this.Ma=new Map,this.xa=new Set,this.Oa=new tt(J.comparator),this.Na=new Map,this.La=new Ju,this.Ba={},this.ka=new Map,this.qa=vc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function c5(n,e,t=!0){return b(this,null,function*(){let r=Kg(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield gP(r,e,t,!0),i})}function l5(n,e){return b(this,null,function*(){let t=Kg(n);yield gP(t,e,!0,!1)})}function gP(n,e,t,r){return b(this,null,function*(){let i=yield wc(n.localStore,fn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield rb(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Wg(n.remoteStore,i),a})}function rb(n,e,t,r,i){return b(this,null,function*(){n.Ka=(f,g,m)=>function(D,C,O,V){return b(this,null,function*(){let L=C.view.ma(O);L.ns&&(L=yield Eg(D.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,L)));let H=V&&V.targetChanges.get(C.targetId),X=V&&V.targetMismatches.get(C.targetId)!=null,Q=C.view.applyChanges(L,D.isPrimaryClient,H,X);return yI(D,C.targetId,Q.wa),Q.snapshot})}(n,f,g,m);let s=yield Eg(n.localStore,e,!0),o=new Ng(e,s.Ts),a=o.ma(s.documents),c=Ku.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);yI(n,t,u.wa);let d=new pI(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function u5(n,e,t){return b(this,null,function*(){let r=Z(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ad(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield _c(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ec(r.remoteStore,i.targetId),bc(r,i.targetId)}).catch(ms))):(bc(r,i.targetId),yield _c(r.localStore,i.targetId,!0))})}function d5(n,e){return b(this,null,function*(){let t=Z(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ec(t.remoteStore,r.targetId))})}function h5(n,e,t){return b(this,null,function*(){let r=ab(n);try{let i=yield function(o,a){let c=Z(o),u=st.now(),d=a.reduce((m,w)=>m.add(w.key),me()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=Tn(),D=me();return c.cs.getEntries(m,d).next(C=>{w=C,w.forEach((O,V)=>{V.isValidDocument()||(D=D.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,w)).next(C=>{f=C;let O=[];for(let V of a){let L=TG(V,f.get(V.key).overlayedDocument);L!=null&&O.push(new fr(V.key,L,h1(L.value.mapValue),ut.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,O,a)}).next(C=>{g=C;let O=C.applyToLocalDocumentSet(f,D);return c.documentOverlayCache.saveOverlays(m,C.batchId,O)})}).then(()=>({batchId:g.batchId,changes:b1(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new tt(pe)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),yield wi(r,i.changes),yield Mc(r.remoteStore)}catch(i){let s=kc(i,"Failed to persist write");t.reject(s)}})}function mP(n,e){return b(this,null,function*(){let t=Z(n);try{let r=yield HG(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?se(o.va):i.removedDocuments.size>0&&(se(o.va),o.va=!1))}),yield wi(t,r,e)}catch(r){yield ms(r)}})}function BN(n,e,t){let r=Z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=Z(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(u=!0)}),u&&nb(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function f5(n,e,t){return b(this,null,function*(){let r=Z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new tt(J.comparator);o=o.insert(s,bt.newNoDocument(s,le.min()));let a=me().add(s),c=new Wu(le.min(),new Map,new tt(pe),o,a);yield mP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),ob(r)}else yield _c(r.localStore,e,!1).then(()=>bc(r,e,t)).catch(ms)})}function p5(n,e){return b(this,null,function*(){let t=Z(n),r=e.batch.batchId;try{let i=yield qG(t.localStore,e);sb(t,r,null),ib(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield wi(t,i)}catch(i){yield ms(i)}})}function g5(n,e,t){return b(this,null,function*(){let r=Z(n);try{let i=yield function(o,a){let c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(se(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);sb(r,e,t),ib(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield wi(r,i)}catch(i){yield ms(i)}})}function m5(n,e){return b(this,null,function*(){let t=Z(n);vs(t.remoteStore)||z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=kc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function ib(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function sb(n,e,t){let r=Z(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function bc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||yP(n,r)})}function yP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ec(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),ob(n))}function yI(n,e,t){for(let r of t)r instanceof Rg?(n.La.addReference(r.key,e),y5(n,r)):r instanceof kg?(z("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||yP(n,r.key)):re()}function y5(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(z("SyncEngine","New document in limbo: "+t),n.xa.add(r),ob(n))}function ob(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new J(Re.fromString(e)),r=n.qa.next();n.Na.set(r,new gI(t)),n.Oa=n.Oa.insert(t,r),Wg(n.remoteStore,new yc(fn(Ac(t.path)),r,"TargetPurposeLimboResolution",jn.oe))}}function wi(n,e,t){return b(this,null,function*(){let r=Z(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=QE.Wi(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,u){return b(this,null,function*(){let d=Z(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(u,g=>R.forEach(g.$i,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>R.forEach(g.Ui,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!ys(f))throw f;z("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let m=d.os.get(g),w=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,D)}}})}(r.localStore,s))})}function v5(n,e){return b(this,null,function*(){let t=Z(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());let r=yield nP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new $(P.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield wi(t,r.hs)}})}function w5(n,e){let t=Z(n),r=t.Na.get(e);if(r&&r.va)return me().add(r.key);{let i=me(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function _5(n,e){return b(this,null,function*(){let t=Z(n),r=yield Eg(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&yI(t,e.targetId,i.wa),i})}function E5(n,e){return b(this,null,function*(){let t=Z(n);return oP(t.localStore,e).then(r=>wi(t,r))})}function I5(n,e,t,r){return b(this,null,function*(){let i=Z(n),s=yield function(a,c){let u=Z(a),d=Z(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?u.localDocuments.getDocuments(f,g):R.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield Mc(i.remoteStore):t==="acknowledged"||t==="rejected"?(sb(i,e,r||null),ib(i,e),function(a,c){Z(Z(a).mutationQueue).On(c)}(i.localStore,e)):re(),yield wi(i,s)):z("SyncEngine","Cannot apply mutation batch with id: "+e)})}function b5(n,e){return b(this,null,function*(){let t=Z(n);if(Kg(t),ab(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $N(t,r.toArray());t.Qa=!0,yield aI(t.remoteStore,!0);for(let s of i)Wg(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(bc(t,o),_c(t.localStore,o,!0))),Ec(t.remoteStore,o)}),yield i,yield $N(t,r),function(o){let a=Z(o);a.Na.forEach((c,u)=>{Ec(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new tt(J.comparator)}(t),t.Qa=!1,yield aI(t.remoteStore,!1)}})}function $N(n,e,t){return b(this,null,function*(){let r=Z(n),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield wc(r.localStore,fn(c[0]));for(let u of c){let d=r.Fa.get(u),f=yield _5(r,d);f.snapshot&&s.push(f.snapshot)}}else{let u=yield sP(r.localStore,o);a=yield wc(r.localStore,u),yield rb(r,vP(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function vP(n){return v1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function D5(n){return function(t){return Z(Z(t).persistence).Qi()}(Z(n).localStore)}function C5(n,e,t,r){return b(this,null,function*(){let i=Z(n);if(i.Qa)return void z("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield oP(i.localStore,_1(s[0])),a=Wu.createSynthesizedRemoteEventForCurrentChange(e,t==="current",gt.EMPTY_BYTE_STRING);yield wi(i,o,a);break}case"rejected":yield _c(i.localStore,e,!0),bc(i,e,r);break;default:re()}})}function T5(n,e,t){return b(this,null,function*(){let r=Kg(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){z("SyncEngine","Adding an already active target "+i);continue}let s=yield sP(r.localStore,i),o=yield wc(r.localStore,s);yield rb(r,vP(s),o.targetId,!1,o.resumeToken),Wg(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield _c(r.localStore,i,!1).then(()=>{Ec(r.remoteStore,i),bc(r,i)}).catch(ms))}})}function Kg(n){let e=Z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=f5.bind(null,e),e.Ca.d_=o5.bind(null,e.eventManager),e.Ca.$a=a5.bind(null,e.eventManager),e}function ab(n){let e=Z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=p5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=g5.bind(null,e),e}function S5(n,e,t){let r=Z(n);(function(s,o,a){return b(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,w){let D=Z(m),C=pt(w.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",O=>D.Gr.getBundleMetadata(O,w.id)).then(O=>!!O&&O.createTime.compareTo(C)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(pP(c));let u=new fI(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let g=yield u.la(d);g&&a._updateProgress(g),d=yield o.Ua()}let f=yield u.complete();return yield wi(s,f.Ia,void 0),yield function(m,w){let D=Z(m);return D.persistence.runTransaction("Save bundle","readwrite",C=>D.Gr.saveBundleMetadata(C,w))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return dr("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var vI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=ld(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return tP(this.persistence,new _g,t.initialUser,this.serializer)}Ga(t){return new vg(wg.Zr,this.serializer)}Wa(t){return new Dg}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Pg=class n extends vI{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){yield Bm(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield ab(this.Ja.syncEngine),yield Mc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return tP(this.persistence,new _g,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new NE(r,e.asyncQueue,t)}Ha(e,t){let r=new Y0(t,this.persistence);return new Q0(e.asyncQueue,r)}Ga(e){let t=YI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new KE(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cP(),Wp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Dg}},wI=class n extends Pg{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return b(this,null,function*(){yield Bm(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Vu&&(this.sharedClientState.syncEngine={no:I5.bind(null,t),ro:C5.bind(null,t),io:T5.bind(null,t),Qi:D5.bind(null,t),eo:E5.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>b(this,null,function*(){yield b5(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=cP();if(!Vu.D(t))throw new $(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=YI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Vu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},cb=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>BN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=v5.bind(null,this.syncEngine),yield aI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new uI}()}createDatastore(t){let r=ld(t.databaseInfo.databaseId),i=function(o){return new tI(o)}(t.databaseInfo);return function(o,a,c,u){return new iI(o,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new oI(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>BN(this.syncEngine,r,0),function(){return Cg.D()?new Cg:new XE}())}createSyncEngine(t,r){return function(s,o,a,c,u,d,f){let g=new mI(s,o,a,c,u,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=Z(s);z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield xc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function zN(n,e=10240){let t=0;return{read(){return b(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return b(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Dc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ht("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var _I=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Mt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return b(this,null,function*(){return this.metadata.promise})}Ua(){return b(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return b(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new hI(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return b(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return b(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return b(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var EI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new $(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return b(this,null,function*(){let o=Z(i),a={documents:s.map(f=>Qu(o.serializer,f))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Re.emptyPath(),a,s.length),u=new Map;c.forEach(f=>{let g=kG(o.serializer,f);u.set(g.key.toString(),g)});let d=[];return s.forEach(f=>{let g=u.get(f.toString());se(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ps(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=J.fromPath(r);this.mutations.push(new qu(i,this.precondition(i)))}),yield function(r,i){return b(this,null,function*(){let s=Z(r),o={writes:i.map(a=>Yu(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Re.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw re();t=le.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new $(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(le.min())?ut.exists(!1):ut.updateTime(t):ut.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(le.min()))throw new $(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var II=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new ed(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>b(this,null,function*(){let e=new EI(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!sd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!N1(t)}return!1}};var bI=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=Qp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Mt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=kc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function L0(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield nP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function qN(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield lb(n);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>LN(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>LN(e.remoteStore,i)),n._onlineComponents=e})}function lb(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield L0(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;dr("Error using user provided cache. Falling back to memory cache: "+t),yield L0(n,new vI)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield L0(n,new vI);return n._offlineComponents})}function Qg(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield qN(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield qN(n,new cb))),n._onlineComponents})}function wP(n){return lb(n).then(e=>e.persistence)}function ub(n){return lb(n).then(e=>e.localStore)}function _P(n){return Qg(n).then(e=>e.remoteStore)}function db(n){return Qg(n).then(e=>e.syncEngine)}function A5(n){return Qg(n).then(e=>e.datastore)}function Cc(n){return b(this,null,function*(){let e=yield Qg(n),t=e.eventManager;return t.onListen=c5.bind(null,e.syncEngine),t.onUnlisten=u5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=l5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=d5.bind(null,e.syncEngine),t})}function x5(n){return n.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield wP(n),t=yield _P(n);return e.setNetworkEnabled(!0),function(i){let s=Z(i);return s.L_.delete(0),ud(s)}(t)}))}function M5(n){return n.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield wP(n),t=yield _P(n);return e.setNetworkEnabled(!1),function(i){return b(this,null,function*(){let s=Z(i);s.L_.add(0),yield xc(s),s.q_.set("Offline")})}(t)}))}function R5(n,e){let t=new Mt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s,o){return b(this,null,function*(){try{let a=yield function(u,d){let f=Z(u);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new $(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=kc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield ub(n),e,t)})),t.promise}function EP(n,e,t={}){let r=new Mt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,u){let d=new Dc({next:g=>{d.Za(),o.enqueueAndForget(()=>tb(s,f));let m=g.docs.has(a);!m&&g.fromCache?u.reject(new $(P.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?u.reject(new $(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new td(Ac(a.path),d,{includeMetadataChanges:!0,_a:!0});return eb(s,f)}(yield Cc(n),n.asyncQueue,e,t,r)})),r.promise}function k5(n,e){let t=new Mt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s,o){return b(this,null,function*(){try{let a=yield Eg(i,s,!0),c=new Ng(s,a.Ts),u=c.ma(a.documents),d=c.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){let c=kc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield ub(n),e,t)})),t.promise}function IP(n,e,t={}){let r=new Mt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,u){let d=new Dc({next:g=>{d.Za(),o.enqueueAndForget(()=>tb(s,f)),g.fromCache&&c.source==="server"?u.reject(new $(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new td(a,d,{includeMetadataChanges:!0,_a:!0});return eb(s,f)}(yield Cc(n),n.asyncQueue,e,t,r)})),r.promise}function N5(n,e){let t=new Dc(e);return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s){Z(i).Y_.add(s),s.next()}(yield Cc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s){Z(i).Y_.delete(s)}(yield Cc(n),t)}))}}function P5(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?O1().encode(o):o,function(d,f){return new _I(d,f)}(function(d,f){if(d instanceof Uint8Array)return zN(d,f);if(d instanceof ArrayBuffer)return zN(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,ld(e));n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){S5(yield db(n),i,r)}))}function O5(n,e){return n.asyncQueue.enqueue(()=>b(this,null,function*(){return function(r,i){let s=Z(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield ub(n),e)}))}function bP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var HN=new Map;function hb(n,e,t){if(!t)throw new $(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fb(n,e,t,r){if(e===!0&&r===!0)throw new $(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GN(n){if(!J.isDocumentKey(n))throw new $(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WN(n){if(J.isDocumentKey(n))throw new $(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Yg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re()}function Ne(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Yg(n);throw new $(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function DP(n,e){if(e<=0)throw new $(P.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Og=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},po=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Og({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Og(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new j0;switch(r.type){case"firstParty":return new z0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=HN.get(t);r&&(z("ComponentProvider","Removing Datastore"),HN.delete(t),r.terminate())}(this),Promise.resolve()}};function CP(n,e,t,r={}){var i;let s=(n=Ne(n,po))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=It.MOCK_USER;else{a=iC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new $(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new It(u)}n._authCredentials=new U0(new Kp(a,c))}}var Bt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Qe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Nr=class n extends Bt{constructor(e,t,r){super(e,t,Ac(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new J(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function pb(n,e,...t){if(n=rt(n),hb("collection","path",e),n instanceof po){let r=Re.fromString(e,...t);return WN(r),new Nr(n,null,r)}{if(!(n instanceof Qe||n instanceof Nr))throw new $(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return WN(r),new Nr(n.firestore,null,r)}}function TP(n,e){if(n=Ne(n,po),hb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new $(P.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Bt(n,null,function(r){return new hr(Re.emptyPath(),r)}(e))}function dd(n,e,...t){if(n=rt(n),arguments.length===1&&(e=Qp.newId()),hb("doc","path",e),n instanceof po){let r=Re.fromString(e,...t);return GN(r),new Qe(n,null,new J(r))}{if(!(n instanceof Qe||n instanceof Nr))throw new $(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Re.fromString(e,...t));return GN(r),new Qe(n.firestore,n instanceof Nr?n.converter:null,new J(r))}}function gb(n,e){return n=rt(n),e=rt(e),(n instanceof Qe||n instanceof Nr)&&(e instanceof Qe||e instanceof Nr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mb(n,e){return n=rt(n),e=rt(e),n instanceof Bt&&e instanceof Bt&&n.firestore===e.firestore&&ad(n._query,e._query)&&n.converter===e.converter}var Fg=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ed(this,"async_queue_retry"),this.Vu=()=>{let r=Wp();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Wp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Wp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Mt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ys(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ht("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=cI.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function DI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var CI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Mt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var SP=-1,ot=class extends po{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Fg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Fg(e),this._firestoreClient=void 0,yield e}})}};function $t(n){if(n._terminated)throw new $(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||AP(n),n._firestoreClient}function AP(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,u,d){return new Z0(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,bP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new bI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function xP(n,e){dr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return RP(n,cb.provider,{build:r=>new Pg(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function MP(n){return b(this,null,function*(){dr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();RP(n,cb.provider,{build:t=>new wI(t,e.cacheSizeBytes)})})}function RP(n,e,t){if((n=Ne(n,ot))._firestoreClient||n._terminated)throw new $(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new $(P.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},AP(n)}function kP(n){if(n._initialized&&!n._terminated)throw new $(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Mt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{yield function(r){return b(this,null,function*(){if(!as.D())return Promise.resolve();let i=r+"main";yield as.delete(i)})}(YI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function NP(n){return function(t){let r=new Mt;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return m5(yield db(t),r)})),r.promise}($t(n=Ne(n,ot)))}function PP(n){return x5($t(n=Ne(n,ot)))}function OP(n){return M5($t(n=Ne(n,ot)))}function FP(n,e){let t=$t(n=Ne(n,ot)),r=new CI;return P5(t,n._databaseId,e,r),r}function VP(n,e){return O5($t(n=Ne(n,ot)),e).then(t=>t?new Bt(n,null,t.query):null)}var Vr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(gt.fromBase64String(e))}catch(t){throw new $(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var yi=class{constructor(e){this._methodName=e}};var go=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var nd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var F5=/^__.*__$/,TI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new fs(e,this.data,t,this.fieldTransforms)}},Vg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function LP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var Lg=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return jg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(LP(this.Cu)&&F5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},SI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ld(e)}Qu(e,t,r,i=!1){return new Lg({Cu:e,methodName:t,qu:r,path:ft.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function wo(n){let e=n._freezeSettings(),t=ld(n._databaseId);return new SI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zg(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);wb("Data must be an object, but it was:",o,r);let a=BP(r,o),c,u;if(s.merge)c=new Un(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=kI(e,f,t);if(!o.contains(g))throw new $(P.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);zP(d,g)||d.push(g)}c=new Un(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new TI(new tn(a),c,u)}var rd=class n extends yi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function jP(n,e,t){return new Lg({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var AI=class n extends yi{_toFieldTransform(e){return new uo(e.path,new ds)}isEqual(e){return e instanceof n}},xI=class n extends yi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=jP(this,e,!0),r=this.Ku.map(s=>_o(s,t)),i=new gi(r);return new uo(e.path,i)}isEqual(e){return e instanceof n&&qm(this.Ku,e.Ku)}},MI=class n extends yi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=jP(this,e,!0),r=this.Ku.map(s=>_o(s,t)),i=new mi(r);return new uo(e.path,i)}isEqual(e){return e instanceof n&&qm(this.Ku,e.Ku)}},RI=class n extends yi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new hs(e.serializer,T1(e.serializer,this.$u));return new uo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function yb(n,e,t,r){let i=n.Qu(1,e,t);wb("Data must be an object, but it was:",i,r);let s=[],o=tn.empty();vo(r,(c,u)=>{let d=_b(e,c,t);u=rt(u);let f=i.Nu(d);if(u instanceof rd)s.push(d);else{let g=_o(u,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new Un(s);return new Vg(o,a,i.fieldTransforms)}function vb(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[kI(e,r,t)],c=[i];if(s.length%2!=0)throw new $(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(kI(e,s[g])),c.push(s[g+1]);let u=[],d=tn.empty();for(let g=a.length-1;g>=0;--g)if(!zP(u,a[g])){let m=a[g],w=c[g];w=rt(w);let D=o.Nu(m);if(w instanceof rd)u.push(m);else{let C=_o(w,D);C!=null&&(u.push(m),d.set(m,C))}}let f=new Un(u);return new Vg(d,f,o.fieldTransforms)}function UP(n,e,t,r=!1){return _o(t,n.Qu(r?4:3,e))}function _o(n,e){if($P(n=rt(n)))return wb("Unsupported field value:",e,n),BP(n,e);if(n instanceof yi)return function(r,i){if(!LP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=_o(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return T1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=st.fromDate(r);return{timestampValue:mc(i.serializer,s)}}if(r instanceof st){let s=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mc(i.serializer,s)}}if(r instanceof go)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:F1(i.serializer,r._byteString)};if(r instanceof Qe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:WI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof nd)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return GI(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Yg(r)}`)}(n,e)}function BP(n,e){let t={};return c1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vo(n,(r,i)=>{let s=_o(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function $P(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof go||n instanceof Vr||n instanceof Qe||n instanceof yi||n instanceof nd)}function wb(n,e,t){if(!$P(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Yg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function kI(n,e,t){if((e=rt(e))instanceof pr)return e._internalPath;if(typeof e=="string")return _b(n,e);throw jg("Field path arguments must be of type string or ",n,!1,void 0,t)}var V5=new RegExp("[~\\*/\\[\\]]");function _b(n,e,t){if(e.search(V5)>=0)throw jg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pr(...e.split("."))._internalPath}catch{throw jg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jg(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new $(P.INVALID_ARGUMENT,a+n+c)}function zP(n,e){return n.some(t=>t.isEqual(e))}var mo=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new NI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Jg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},NI=class extends mo{data(){return super.data()}};function Jg(n,e){return typeof e=="string"?_b(n,e):e instanceof pr?e._internalPath:e._delegate._internalPath}function qP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var id=class{},yo=class extends id{};function _i(n,e,...t){let r=[];e instanceof id&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof PI).length,a=s.filter(c=>c instanceof Ug).length;if(o>1||o>0&&a>0)throw new $(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Ug=class n extends yo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return eO(e._query,t),new Bt(e.firestore,e.converter,uE(e._query,t))}_parse(e){let t=wo(e.firestore);return function(s,o,a,c,u,d,f){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new $(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){QN(f,d);let m=[];for(let w of f)m.push(KN(c,s,w));g={arrayValue:{values:m}}}else g=KN(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||QN(f,d),g=UP(a,o,f,d==="in"||d==="not-in");return Te.create(u,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function HP(n,e,t){let r=e,i=Jg("where",n);return Ug._create(i,r,t)}var PI=class n extends id{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:$e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)eO(o,c),o=uE(o,c)}(e._query,t),new Bt(e.firestore,e.converter,uE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var OI=class n extends yo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new $(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new $(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new co(s,o)}(e._query,this._field,this._direction);return new Bt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new hr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function GP(n,e="asc"){let t=e,r=Jg("orderBy",n);return OI._create(r,t)}var Bg=class n extends yo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Bt(e.firestore,e.converter,sg(e._query,this._limit,this._limitType))}};function WP(n){return DP("limit",n),Bg._create("limit",n,"F")}function KP(n){return DP("limitToLast",n),Bg._create("limitToLast",n,"L")}var $g=class n extends yo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=XP(e,this.type,this._docOrFields,this._inclusive);return new Bt(e.firestore,e.converter,function(i,s){return new hr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function QP(...n){return $g._create("startAt",n,!0)}function YP(...n){return $g._create("startAfter",n,!1)}var zg=class n extends yo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=XP(e,this.type,this._docOrFields,this._inclusive);return new Bt(e.firestore,e.converter,function(i,s){return new hr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function ZP(...n){return zg._create("endBefore",n,!1)}function JP(...n){return zg._create("endAt",n,!0)}function XP(n,e,t,r){if(t[0]=rt(t[0]),t[0]instanceof mo)return function(s,o,a,c,u){if(!c)throw new $(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of cc(s))if(f.field.isKeyField())d.push(ao(o,c.key));else{let g=c.data.field(f.field);if(Hg(g))throw new $(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new $(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new Or(d,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=wo(n.firestore);return function(o,a,c,u,d,f){let g=o.explicitOrderBy;if(d.length>g.length)throw new $(P.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let w=0;w<d.length;w++){let D=d[w];if(g[w].field.isKeyField()){if(typeof D!="string")throw new $(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof D}`);if(!qI(o)&&D.indexOf("/")!==-1)throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${D}' contains a slash.`);let C=o.path.child(Re.fromString(D));if(!J.isDocumentKey(C))throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let O=new J(C);m.push(ao(a,O))}else{let C=UP(c,u,D);m.push(C)}}return new Or(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function KN(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new $(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qI(e)&&t.indexOf("/")!==-1)throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Re.fromString(t));if(!J.isDocumentKey(r))throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ao(n,new J(r))}if(t instanceof Qe)return ao(n,t._key);throw new $(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yg(t)}.`)}function QN(n,e){if(!Array.isArray(n)||n.length===0)throw new $(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eO(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new $(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Tc=class{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return vo(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nt(o.doubleValue));return new nd(s)}convertGeoPoint(e){return new go(nt(e.latitude),nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=$I(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Bu(e));default:return null}}convertTimestamp(e){let t=pi(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Re.fromString(e);se(W1(r));let i=new ls(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(t)||ht(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Xg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var FI=class extends Tc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,t)}};var fi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xn=class extends mo{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ss(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Jg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},ss=class extends Xn{data(e={}){return super.data(e)}},gr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new fi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ss(this._firestore,this._userDataWriter,r.key,r,new fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new ss(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ss(i._firestore,i._userDataWriter,a.doc.key,a.doc,new fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:L5(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function L5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}function Eb(n,e){return n instanceof Xn&&e instanceof Xn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gr&&e instanceof gr&&n._firestore===e._firestore&&mb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function tO(n){n=Ne(n,Qe);let e=Ne(n.firestore,ot);return EP($t(e),n._key).then(t=>Cb(e,n,t))}var vi=class extends Tc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,t)}};function nO(n){n=Ne(n,Qe);let e=Ne(n.firestore,ot),t=$t(e),r=new vi(e);return R5(t,n._key).then(i=>new Xn(e,r,n._key,i,new fi(i!==null&&i.hasLocalMutations,!0),n.converter))}function rO(n){n=Ne(n,Qe);let e=Ne(n.firestore,ot);return EP($t(e),n._key,{source:"server"}).then(t=>Cb(e,n,t))}function iO(n){n=Ne(n,Bt);let e=Ne(n.firestore,ot),t=$t(e),r=new vi(e);return qP(n._query),IP(t,n._query).then(i=>new gr(e,r,n,i))}function sO(n){n=Ne(n,Bt);let e=Ne(n.firestore,ot),t=$t(e),r=new vi(e);return k5(t,n._query).then(i=>new gr(e,r,n,i))}function oO(n){n=Ne(n,Bt);let e=Ne(n.firestore,ot),t=$t(e),r=new vi(e);return IP(t,n._query,{source:"server"}).then(i=>new gr(e,r,n,i))}function Ib(n,e,t){n=Ne(n,Qe);let r=Ne(n.firestore,ot),i=Xg(n.converter,e,t);return Nc(r,[Zg(wo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ut.none())])}function bb(n,e,t,...r){n=Ne(n,Qe);let i=Ne(n.firestore,ot),s=wo(i),o;return o=typeof(e=rt(e))=="string"||e instanceof pr?vb(s,"updateDoc",n._key,e,t,r):yb(s,"updateDoc",n._key,e),Nc(i,[o.toMutation(n._key,ut.exists(!0))])}function aO(n){return Nc(Ne(n.firestore,ot),[new ps(n._key,ut.none())])}function cO(n,e){let t=Ne(n.firestore,ot),r=dd(n),i=Xg(n.converter,e);return Nc(t,[Zg(wo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ut.exists(!1))]).then(()=>r)}function Db(n,...e){var t,r,i;n=rt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||DI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(DI(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof Qe)u=Ne(n.firestore,ot),d=Ac(n._key.path),c={next:f=>{e[o]&&e[o](Cb(u,n,f))},error:e[o+1],complete:e[o+2]};else{let f=Ne(n,Bt);u=Ne(f.firestore,ot),d=f._query;let g=new vi(u);c={next:m=>{e[o]&&e[o](new gr(u,g,f,m))},error:e[o+1],complete:e[o+2]},qP(n._query)}return function(g,m,w,D){let C=new Dc(D),O=new td(m,C,w);return g.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return eb(yield Cc(g),O)})),()=>{C.Za(),g.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return tb(yield Cc(g),O)}))}}($t(u),d,a,c)}function lO(n,e){return N5($t(n=Ne(n,ot)),DI(e)?e:{next:e})}function Nc(n,e){return function(r,i){let s=new Mt;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return h5(yield db(r),i,s)})),s.promise}($t(n),e)}function Cb(n,e,t){let r=t.docs.get(e._key),i=new vi(n);return new Xn(n,i,e._key,r,new fi(t.hasPendingWrites,t.fromCache),e.converter)}var j5={maxAttempts:5};var qg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wo(e)}set(e,t,r){this._verifyNotCommitted();let i=rs(e,this._firestore),s=Xg(i.converter,t,r),o=Zg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ut.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=rs(e,this._firestore),o;return o=typeof(t=rt(t))=="string"||t instanceof pr?vb(this._dataReader,"WriteBatch.update",s._key,t,r,i):yb(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ut.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=rs(e,this._firestore);return this._mutations=this._mutations.concat(new ps(t._key,ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new $(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function rs(n,e){if((n=rt(n)).firestore!==e)throw new $(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var VI=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=wo(t)}get(t){let r=rs(t,this._firestore),i=new FI(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return re();let o=s[0];if(o.isFoundDocument())return new mo(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new mo(this._firestore,i,r._key,null,r.converter);throw re()})}set(t,r,i){let s=rs(t,this._firestore),o=Xg(s.converter,r,i),a=Zg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=rs(t,this._firestore),a;return a=typeof(r=rt(r))=="string"||r instanceof pr?vb(this._dataReader,"Transaction.update",o._key,r,i,s):yb(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=rs(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=rs(e,this._firestore),r=new vi(this._firestore);return super.get(e).then(i=>new Xn(this._firestore,r,t._key,i._document,new fi(!1,!1),t.converter))}};function uO(n,e,t){n=Ne(n,ot);let r=Object.assign(Object.assign({},j5),t);return function(s){if(s.maxAttempts<1)throw new $(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new Mt;return s.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){let u=yield A5(s);new II(s.asyncQueue,u,a,o,c).au()})),c.promise}($t(n),i=>e(new VI(n,i)),r)}function dO(){return new rd("deleteField")}function hO(){return new AI("serverTimestamp")}function fO(...n){return new xI("arrayUnion",n)}function pO(...n){return new MI("arrayRemove",n)}function em(n){return new RI("increment",n)}(function(e,t=!0){(function(i){Sc=i})(aC),il(new Ds("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ot(new B0(r.getProvider("auth-internal")),new H0(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new $(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ls(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ci(Wk,"4.7.3",e),Ci(Wk,"4.7.3","esm2017")})();var U5="firebase",B5="10.14.1";Ci(U5,B5,"app");var $5=(n,e)=>{let t=e?[e]:cC(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Eo=class{constructor(){return $5(z5)}},z5="app-check";function Tb(){}var tm=class{zone;delegate;constructor(e,t=cy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Sb=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tb,{},Tb,Tb)),t.pipe(yt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},nm=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new tm(Zone.current)),this.insideAngular=t.run(()=>new tm(Zone.current,jo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(B(De))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function q5(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Sn(n){return H5(q5())(n)}function H5(n){return function(t){return t=t.lift(new Sb(n.ngZone)),t.pipe(nr(n.outsideAngular),Bn(n.insideAngular))}}var G5=new Map,W5={activated:!1,tokenObservers:[]},K5={initialized:!1,enabled:!1};function mr(n){return G5.get(n)||Object.assign({},W5)}function _O(){return K5}var Q5="https://content-firebaseappcheck.googleapis.com/v1";var Y5="exchangeDebugToken",mO={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},One=24*60*60*1e3;var xb=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new $m,this.pending.promise.catch(t=>{}),yield Z5(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new $m,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function Z5(n){return new Promise(e=>{setTimeout(e,n)})}var J5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},ws=new oC("appCheck","AppCheck",J5);function EO(n){if(!mr(n).activated)throw ws.create("use-before-activation",{appName:n.name})}function IO(r,i){return b(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw ws.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw ws.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(m){throw ws.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw ws.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:u.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function bO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${Q5}/projects/${t}/apps/${r}:${Y5}?key=${i}`,body:{debug_token:e}}}var X5="firebase-app-check-database",e9=1,Mb="firebase-app-check-store";var rm=null;function t9(){return rm||(rm=new Promise((n,e)=>{try{let t=indexedDB.open(X5,e9);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ws.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Mb,{keyPath:"compositeKey"})}}}catch(t){e(ws.create("storage-open",{originalErrorMessage:t?.message}))}}),rm)}function n9(n,e){return r9(i9(n),e)}function r9(n,e){return b(this,null,function*(){let r=(yield t9()).transaction(Mb,"readwrite"),s=r.objectStore(Mb).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(ws.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function i9(n){return`${n.options.appId}-${n.name}`}var Rb=new Od("@firebase/app-check");function Ab(n,e){return Pd()?n9(n,e).catch(t=>{Rb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function DO(){return _O().enabled}function CO(){return b(this,null,function*(){let n=_O();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var s9={error:"UNKNOWN_ERROR"};function o9(n){return rC.encodeString(JSON.stringify(n),!1)}function kb(n,e=!1){return b(this,null,function*(){let t=n.app;EO(t);let r=mr(t),i=r.token,s;if(i&&!hd(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(hd(c)?i=c:yield Ab(t,void 0))}if(!e&&i&&hd(i))return{token:i.token};let o=!1;if(DO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=IO(bO(t,yield CO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield Ab(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield mr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Rb.warn(c.message):Rb.error(c),s=c}let a;return i?s?hd(i)?a={token:i.token,internalError:s}:a=vO(s):(a={token:i.token},r.token=i,yield Ab(t,i)):a=vO(s),o&&u9(t,a),a})}function a9(n){return b(this,null,function*(){let e=n.app;EO(e);let{provider:t}=mr(e);if(DO()){let r=yield CO(),{token:i}=yield IO(bO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function c9(n,e,t,r){let{app:i}=n,s=mr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&hd(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),yO(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>yO(n))}function TO(n,e){let t=mr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function yO(n){let{app:e}=n,t=mr(e),r=t.tokenRefresher;r||(r=l9(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function l9(n){let{app:e}=n;return new xb(()=>b(this,null,function*(){let t=mr(e),r;if(t.token?r=yield kb(n,!0):r=yield kb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},mO.RETRIAL_MIN_WAIT,mO.RETRIAL_MAX_WAIT)}function u9(n,e){let t=mr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function hd(n){return n.expireTimeMillis-Date.now()>0}function vO(n){return{token:o9(s9),error:n}}var Nb=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=mr(this.app);for(let t of e)TO(this.app,t.next);return Promise.resolve()}};function d9(n,e){return new Nb(n,e)}function h9(n){return{getToken:e=>kb(n,e),getLimitedUseToken:()=>a9(n),addTokenListener:e=>c9(n,"INTERNAL",e),removeTokenListener:e=>TO(n.app,e)}}var f9="@firebase/app-check",p9="0.8.8";var g9="app-check",wO="app-check-internal";function m9(){il(new Ds(g9,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return d9(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(wO).initialize()})),il(new Ds(wO,n=>{let e=n.getProvider("app-check").getImmediate();return h9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ci(f9,p9)}m9();var y9=["localhost","0.0.0.0","127.0.0.1"],Wne=typeof window<"u"&&y9.includes(window.location.hostname);var v9="firebase",w9="10.14.1";vr.registerVersion(v9,w9,"app-compat");var _9=["ngOnDestroy"],xO=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(_9.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(d=>{let f=d?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,f),f})})})});var Pb=class{constructor(e){return e}},Pc=new W("angularfire2.app.options"),im=new W("angularfire2.app.name");function sm(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=vr.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>vr.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;E9("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Pb(o)}var E9=(n,...e)=>{Nw()&&typeof console<"u"&&console[n](...e)};function om(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return I9(i,o)||(AO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${b9?" You may need to reload as Firebase is not HMR aware.":""}`),AO("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function I9(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var b9=typeof module<"u"&&!!module.hot,AO=(n,...e)=>{Nw()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Ob=new W("angularfire2.auth.use-emulator"),Fb=new W("angularfire2.auth.settings"),Vb=new W("angularfire2.auth.tenant-id"),Lb=new W("angularfire2.auth.langugage-code"),jb=new W("angularfire2.auth.use-device-language"),Ub=new W("angularfire.auth.persistence"),Bb=(n,e,t,r,i,s,o,a)=>om(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[u,d]of Object.entries(o))c.settings[u]=d;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]),MO=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,d,f,g,m){let w=new Ue,D=ae(void 0).pipe(Bn(o.outsideAngular),Ke(()=>s.runOutsideAngular(()=>import("./chunk-GA2XKJLQ.js"))),oe(()=>sm(t,s,r)),oe(C=>Bb(C,s,a,u,d,f,c,g)),zo({bufferSize:1,refCount:!1}));if(Hi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ae(null);else{D.pipe(xn()).subscribe();let C=D.pipe(Ke(L=>L.getRedirectResult().then(H=>H,()=>null)),Sn,zo({bufferSize:1,refCount:!1})),O=D.pipe(Ke(L=>new ge(H=>({unsubscribe:s.runOutsideAngular(()=>L.onAuthStateChanged(X=>H.next(X),X=>H.error(X),()=>H.complete()))})))),V=D.pipe(Ke(L=>new ge(H=>({unsubscribe:s.runOutsideAngular(()=>L.onIdTokenChanged(X=>H.next(X),X=>H.error(X),()=>H.complete()))}))));this.authState=C.pipe(ph(O),nr(o.outsideAngular),Bn(o.insideAngular)),this.user=C.pipe(ph(V),nr(o.outsideAngular),Bn(o.insideAngular)),this.idToken=this.user.pipe(Ke(L=>L?Se(L.getIdToken()):ae(null))),this.idTokenResult=this.user.pipe(Ke(L=>L?Se(L.getIdTokenResult()):ae(null))),this.credential=dl(C,w,this.authState.pipe(Ct(L=>!L))).pipe(oe(L=>L?.user?L:null),nr(o.outsideAngular),Bn(o.insideAngular))}return xO(this,D,s,{spy:{apply:(C,O,V)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&V.then(L=>w.next(L))}}})}static \u0275fac=function(r){return new(r||n)(B(Pc),B(im,8),B(Vt),B(De),B(nm),B(Ob,8),B(Fb,8),B(Vb,8),B(Lb,8),B(jb,8),B(Ub,8),B(Eo,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var T9="@firebase/firestore-compat",S9="0.3.38";function Wb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new $("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function RO(){if(typeof Uint8Array>"u")throw new $("unimplemented","Uint8Arrays are not available in this environment.")}function kO(){if(!l1())throw new $("unimplemented","Blobs are unavailable in Firestore in this environment.")}var am=class n{constructor(e){this._delegate=e}static fromBase64String(e){return kO(),new n(Vr.fromBase64String(e))}static fromUint8Array(e){return RO(),new n(Vr.fromUint8Array(e))}toBase64(){return kO(),this._delegate.toBase64()}toUint8Array(){return RO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function $b(n){return A9(n,["next","error","complete"])}function A9(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var zb=class{enableIndexedDbPersistence(e,t){return xP(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return MP(e._delegate)}clearIndexedDbPersistence(e){return kP(e._delegate)}},cm=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ls||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){CP(this._delegate,e,t,r)}enableNetwork(){return PP(this._delegate)}disableNetwork(){return OP(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,fb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return NP(this._delegate)}onSnapshotsInSync(e){return lO(this._delegate,e)}get app(){if(!this._appCompat)throw new $("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vc(this,pb(this._delegate,e))}catch(t){throw pn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Lr(this,dd(this._delegate,e))}catch(t){throw pn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Co(this,TP(this._delegate,e))}catch(t){throw pn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return uO(this._delegate,t=>e(new lm(this,t)))}batch(){return $t(this._delegate),new um(new qg(this._delegate,e=>Nc(this._delegate,e)))}loadBundle(e){return FP(this._delegate,e)}namedQuery(e){return VP(this._delegate,e).then(t=>t?new Co(this,t):null)}},Oc=class extends Tc{constructor(e){super(),this.firestore=e}convertBytes(e){return new am(new Vr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Lr.forKey(t,this.firestore,null)}};function x9(n){YN(n)}var lm=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Oc(e)}get(e){let t=Io(e);return this._delegate.get(t).then(r=>new bo(this._firestore,new Xn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Io(e);return r?(Wb("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=Io(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=Io(e);return this._delegate.delete(t),this}},um=class{constructor(e){this._delegate=e}set(e,t,r){let i=Io(e);return r?(Wb("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=Io(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=Io(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Fc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new ss(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Do(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new Oc(e),t),i.set(t,s)),s}};Fc.INSTANCES=new WeakMap;var Lr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Oc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new $("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Qe(t._delegate,r,new J(e)))}static forKey(e,t,r){return new n(t,new Qe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vc(this.firestore,pb(this._delegate,e))}catch(t){throw pn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=rt(e),e instanceof Qe?gb(this._delegate,e):!1}set(e,t){t=Wb("DocumentReference.set",t);try{return t?Ib(this._delegate,e,t):Ib(this._delegate,e)}catch(r){throw pn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?bb(this._delegate,e):bb(this._delegate,e,t,...r)}catch(i){throw pn(i,"updateDoc()","DocumentReference.update()")}}delete(){return aO(this._delegate)}onSnapshot(...e){let t=NO(e),r=PO(e,i=>new bo(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Db(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=nO(this._delegate):e?.source==="server"?t=rO(this._delegate):t=tO(this._delegate),t.then(r=>new bo(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function pn(n,e,t){return n.message=n.message.replace(e,t),n}function NO(n){for(let e of n)if(typeof e=="object"&&!$b(e))return e;return{}}function PO(n,e){var t,r;let i;return $b(n[0])?i=n[0]:$b(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var bo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Lr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Eb(this._delegate,e._delegate)}},Do=class extends bo{data(e){let t=this._delegate.data(e);return this._delegate._converter||ZN(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Co=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Oc(e)}where(e,t,r){try{return new n(this.firestore,_i(this._delegate,HP(e,t,r)))}catch(i){throw pn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,_i(this._delegate,GP(e,t)))}catch(r){throw pn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,_i(this._delegate,WP(e)))}catch(t){throw pn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,_i(this._delegate,KP(e)))}catch(t){throw pn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,_i(this._delegate,QP(...e)))}catch(t){throw pn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,_i(this._delegate,YP(...e)))}catch(t){throw pn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,_i(this._delegate,ZP(...e)))}catch(t){throw pn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,_i(this._delegate,JP(...e)))}catch(t){throw pn(t,"endAt()","Query.endAt()")}}isEqual(e){return mb(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=sO(this._delegate):e?.source==="server"?t=oO(this._delegate):t=iO(this._delegate),t.then(r=>new fd(this.firestore,new gr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=NO(e),r=PO(e,i=>new fd(this.firestore,new gr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Db(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},qb=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Do(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},fd=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Co(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Do(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qb(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Do(this._firestore,r))})}isEqual(e){return Eb(this._delegate,e._delegate)}},Vc=class n extends Co{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Lr(this.firestore,e):null}doc(e){try{return e===void 0?new Lr(this.firestore,dd(this._delegate)):new Lr(this.firestore,dd(this._delegate,e))}catch(t){throw pn(t,"doc()","CollectionReference.doc()")}}add(e){return cO(this._delegate,e).then(t=>new Lr(this.firestore,t))}isEqual(e){return gb(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Io(n){return Ne(n,Qe)}var Hb=class n{constructor(...e){this._delegate=new pr(...e)}static documentId(){return new n(ft.keyField().canonicalString())}isEqual(e){return e=rt(e),e instanceof pr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Gb=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=hO();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=dO();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=fO(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=pO(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=em(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var M9={Firestore:cm,GeoPoint:go,Timestamp:st,Blob:am,Transaction:lm,WriteBatch:um,DocumentReference:Lr,DocumentSnapshot:bo,Query:Co,QueryDocumentSnapshot:Do,QuerySnapshot:fd,CollectionReference:Vc,FieldPath:Hb,FieldValue:Gb,setLogLevel:x9,CACHE_SIZE_UNLIMITED:SP};function R9(n,e){n.INTERNAL.registerComponent(new Ds("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},M9)))}function k9(n){R9(n,(e,t)=>new cm(e,t,new zb)),n.registerVersion(T9,S9)}k9(vr);function N9(n,e=jo){return new ge(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function OO(n,e){return N9(n,e)}function P9(n,e){return OO(n,e).pipe(Wr(void 0),pl(),oe(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Yb(n,e){return OO(n,e).pipe(oe(t=>({payload:t,type:"query"})))}var dm=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=LO(r,t);return new fm(i,s,this.afs)}snapshotChanges(){return P9(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn)}valueChanges(e={}){return this.snapshotChanges().pipe(oe(({payload:t})=>e.idField?te(M({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Se(this.ref.get(e)).pipe(Sn)}};function hm(n,e){return Yb(n,e).pipe(Wr(void 0),pl(),oe(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=s.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function FO(n,e,t){return hm(n,t).pipe(xs((r,i)=>O9(r,i.map(s=>s.payload),e),[]),fl(),oe(r=>r.map(i=>({type:i.type,payload:i}))))}function O9(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=F9(n,r))}),n}function Kb(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function F9(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Kb(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Kb(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Kb(n,e.oldIndex,1);break}return n}function VO(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var fm=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hm(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Wr(void 0),pl(),Ct(([r,i])=>i.length>0||!r),oe(([,r])=>r),Sn)}auditTrail(e){return this.stateChanges(e).pipe(xs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=VO(e);return FO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn)}valueChanges(e={}){return Yb(this.query,this.afs.schedulers.outsideAngular).pipe(oe(t=>t.payload.docs.map(r=>e.idField?te(M({},r.data()),{[e.idField]:r.id}):r.data())),Sn)}get(e){return Se(this.query.get(e)).pipe(Sn)}add(e){return this.ref.add(e)}doc(e){return new dm(this.ref.doc(e),this.afs)}},Qb=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?hm(this.query,this.afs.schedulers.outsideAngular).pipe(Sn):hm(this.query,this.afs.schedulers.outsideAngular).pipe(oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ct(t=>t.length>0),Sn)}auditTrail(e){return this.stateChanges(e).pipe(xs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=VO(e);return FO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn)}valueChanges(e={}){return Yb(this.query,this.afs.schedulers.outsideAngular).pipe(oe(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),Sn)}get(e){return Se(this.query.get(e)).pipe(Sn)}},V9=new W("angularfire2.enableFirestorePersistence"),L9=new W("angularfire2.firestore.persistenceSettings"),j9=new W("angularfire2.firestore.settings"),U9=new W("angularfire2.firestore.use-emulator");function LO(n,e=t=>t){return{query:e(n),ref:n}}var jO=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,d,f,g,m,w,D,C,O,V){this.schedulers=c;let L=sm(t,a,r),H=d;f&&Bb(L,a,g,w,D,C,m,O),[this.firestore,this.persistenceEnabled$]=om(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let X=a.runOutsideAngular(()=>L.firestore());if(s&&X.settings(s),H&&X.useEmulator(...H),i&&!Hi(o)){let Q=()=>{try{return Se(X.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ae(!1)}};return[X,a.runOutsideAngular(Q)]}else return[X,ae(!1)]},[s,H,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=LO(i,r),a=this.schedulers.ngZone.run(()=>s);return new fm(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Qb(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new dm(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(B(Pc),B(im,8),B(V9,8),B(j9,8),B(Vt),B(De),B(nm),B(L9,8),B(U9,8),B(MO,8),B(Ob,8),B(Fb,8),B(Vb,8),B(Lb,8),B(jb,8),B(Ub,8),B(Eo,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var UO=(()=>{let e=class e{constructor(r){this.store=r,this.TABLE_NAME="user_speech",this.uuid=S0()}setRecordUid(r){r&&(this.uuid=r)}getRecordUid(){return this.uuid}getRecord(r){return this.store.collection(this.TABLE_NAME).doc(r).valueChanges()}incrementHits(r="Navi"){return b(this,null,function*(){this.store.doc(`${r}/config`).set({numberOfHits:em(1)},{merge:!0}).catch(i=>console.error("Error incrementing hit counter : ",i))})}saveAppScore(r,i="Navi"){return b(this,null,function*(){r.updated_at=new Date,this.store.doc(`${i}/config`).set(r,{merge:!0}).catch(s=>(console.error("Error upserting : ",s),s))})}getAppdata(r="Navi"){return this.store.doc(`${r}/config`).valueChanges()}saveSpeech(r){return b(this,null,function*(){return r.id=this.uuid,r.updated_at=new Date,this.store.collection(this.TABLE_NAME).doc(this.uuid).set(r,{merge:!0}).then(()=>this.uuid).catch(i=>(console.error("Error upserting : ",i),i.status)),this.uuid})}};e.\u0275fac=function(i){return new(i||e)(B(jO))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var z9=(n,e)=>({"btn-success pulse-animation":n,"btn-danger":e});function q9(n,e){if(n&1){let t=In();k(0,"p"),U(1,"Try saying \u{1F5E3}\uFE0F "),k(2,"span",18),U(3),F(),U(4," or "),k(5,"span",14),U(6),F(),U(7,". Say "),k(8,"span",18),U(9),F(),U(10," to clean the board. "),k(11,"button",19),Oe("click",function(){Xe(t);let i=ue();return et(i.toggleListening())}),ce(12,"i",20),F(),U(13,"\xA0 "),k(14,"a",21),Oe("click",function(){Xe(t);let i=ue();return et(i.copyVoiceSmithLink())}),k(15,"i",22),Oe("click",function(){Xe(t);let i=ue();return et(i.copyVoiceSmithLink())}),F(),U(16,"\xA0 "),k(17,"span",23),U(18),F()(),U(19,"\xA0 "),k(20,"a",24),ce(21,"i",25),F(),k(22,"span",26),U(23,"Desktop-only / "),k(24,"span",27),U(25,"Mobile-limited"),F()()()}if(n&2){let t=ue();j(3),Ve(t.START_COMMAND),j(3),Ve(t.STOP_COMMAND),j(3),Ve(t.CLEAR_COMMAND),j(2),ee("ngClass",kf(7,z9,t.listening,!t.listening)),j(),ee("ngClass",t.listening?"fa-microphone":"fa-microphone-slash"),j(3),ee("ngClass",t.copied?"fa-solid":"fa-regular"),j(3),Ve(t.getRecordUid())}}function H9(n,e){n&1&&(k(0,"span",29),U(1,"Listening"),F())}function G9(n,e){n&1&&(k(0,"span",29),U(1,"Stopped"),F())}function W9(n,e){if(n&1&&(k(0,"p"),U(1,"Transcript will appear in the space below as your host speaks. "),Ce(2,H9,2,0,"span",28)(3,G9,2,0,"span",28),F()),n&2){let t=ue();j(2),ee("ngIf",t.listening),j(),ee("ngIf",!t.listening)}}function K9(n,e){if(n&1&&(k(0,"span",30),U(1),k(2,"span",13),U(3),F()()),n&2){let t=e.$implicit,r=ue();ee("ngClass",r.isLeader(t.key)?"badge badge-border-success":"badge badge-border-danger"),j(),Lt("",t.key,"\xA0"),j(2),Ve(t.value)}}var pm=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.zone=r,this.witaiService=i,this.messaging=s,this.database=o,this.route=a,this.router=c,this.START_COMMAND="start listening",this.STOP_COMMAND="stop listening",this.CLEAR_COMMAND="clear",this.MAX_SPEECH_TIME=5,this.test_command="start listening",this.fillerWords=["oh","ok","okay","um","uh","it's like","like","you know","basically","actually","so","right","I mean","well","just","er","anyway","now","let me think","haha","bla","really","and","well"],this.probableFillers=["fine","good","awesome"],this.unwantedVerbs=["am","is","are","were","do","did","done","doing","go","going","worked","work","working"],this.listening=!1,this.speaking=!1,this.fullTranscript=`Hi there! \u{1F44B} I am nA'vI
I would love to hear your story.
\u{1F3A4} Tell me something about yourself ..

Say "${this.START_COMMAND}" to begin \u{1F680}`,this.interimTranscript="",this.currentTerm="",this.verbsMap=new Map,this.leaderwordsMap=new Map,this.fillerWordsMap=new Map,this.goodbadwordsMap=new Map,this.sentenseClarity={good:0,bad:0},this.previousTime=0,this.totalWords=0,this.prevSentense="",this.isMobile=!1,this.minutes=this.MAX_SPEECH_TIME,this.seconds=0,this.speechTime="",this.voiceMode=!1,this.copied=!1,this.totalScore=0,this.appData={numberOfHits:0,highestScore:0},this.leadershipWords=["lead","vision","empower","collaborate","adapt","communicate","integrate","mentore","mentor","account","innovate","innovation","resilient","resilience","delegate","resolve","include","strategic","motivate","empower","encourage","impact","growth","deliver","delivering","collaboration"],this.createTimer=()=>{this.timerInterval=setInterval(()=>{this.updateTime()},1e3),this.speechTime=""},this.updateTime=()=>{this.seconds>0?this.seconds--:this.minutes>0?(this.minutes--,this.seconds=59):(console.debug("Time's up!"),this.stopListening()),this.speechTime=`${this.minutes}m ${this.seconds}s`},this.clearTimer=()=>{this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.minutes=this.MAX_SPEECH_TIME,this.seconds=0},this.myTask=()=>{let d=performance.now(),f=d-this.previousTime;f!=d&&f>5,requestAnimationFrame(this.myTask)},this.isMobile=Le.isMobileBrowser();let u=Le.getQueryParam(a,"vid");o.setRecordUid(u),this.initCompromiseNLP(),u?(this.voiceMode=!1,this.fullTranscript="",this.database.getRecord(u).subscribe(d=>{if(d){let f=d.message;this.updateFullText(f)}})):(this.voiceMode=!0,this.initAnnyang())}setStartCommand(r){this.START_COMMAND=r}setStopCommand(r){this.STOP_COMMAND=r}setClearCommand(r){this.CLEAR_COMMAND=r}getRecordUid(){return this.database.getRecordUid().split("-")[0]}getVoiceSmithLink(){return`${he.host}/voicesmith?vid=${this.database.getRecordUid()}`}copyVoiceSmithLink(){return b(this,null,function*(){try{yield navigator.clipboard.writeText(this.getVoiceSmithLink()),this.copied=!0}catch{console.error("Failed to copy the link")}})}isLeader(r){return this.leaderwordsMap.get(r)!=null}analyseClarity(r){return b(this,null,function*(){if(r){let i=r.trim().split(" ").length;i>=5&&i<=20?(this.sentenseClarity.good++,this.totalScore++):this.sentenseClarity.bad++,this.totalWords+=i}})}analyseVerbs(r){return b(this,null,function*(){let i=r.match("#Verb").out("array");return i.forEach(s=>{let o=s.toLowerCase();this.unwantedVerbs.includes(o)||(this.verbsMap.has(o)?this.verbsMap.set(o,this.verbsMap.get(o)+1):this.verbsMap.set(o,1),this.totalScore++)}),i.length})}analyseFillers(r){return b(this,null,function*(){let i=r.lookup(this.fillerWords).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.fillerWordsMap.has(o)?this.fillerWordsMap.set(o,this.fillerWordsMap.get(o)+1):this.fillerWordsMap.set(o,1),this.totalScore=this.totalScore-2,this.goodbadwordsMap.set(o,this.fillerWordsMap.get(o))}),i.length>0})}analyseLeaedershipQualities(r){return b(this,null,function*(){let i=r.compute("root").lookup(this.leadershipWords,{form:"root"}).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.leaderwordsMap.has(o)?this.leaderwordsMap.set(o,this.leaderwordsMap.get(o)+1):this.leaderwordsMap.set(o,1),this.totalScore=this.totalScore+3,this.goodbadwordsMap.set(o,this.leaderwordsMap.get(o))}),i.length})}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"SpeechToText":this.analyseClarity(i.payload);let s=this.nlp(i.payload);this.analyseFillers(s),this.analyseVerbs(s),this.analyseLeaedershipQualities(s),this.voiceMode&&(this.witaiService.getIntent(i.payload).then(o=>{}),this.database.saveSpeech({message:i.payload}));break;default:break}}),this.database.getAppdata().subscribe(r=>{this.appData=r})}initCompromiseNLP(){this.loadExternalScript("https://unpkg.com/compromise").then(()=>{this.nlp=window.nlp,this.nlp&&this.nlp.compile(this.leadershipWords)})}initAnnyang(){this.loadExternalScript("assets/annyang.js").then(()=>{this.initializeSpeechRecognition()})}stopListening(){this.listening&&this.voiceMode&&this.database.saveSpeech({message:this.STOP_COMMAND}),this.listening=!1,this.interimTranscript="",this.clearTimer(),this.totalScore>this.appData.highestScore&&this.database.saveAppScore({highestScore:this.totalScore})}startListening(){this.listening||this.database.incrementHits(),this.fullTranscript="",this.listening=!0,this.clearMaps(),this.createTimer(),this.totalScore=0}clearCommand(){this.fullTranscript="",this.interimTranscript="",this.clearMaps(),this.totalScore=0}toggleListening(){this.listening=!this.listening,this.listening?this.startListening():this.stopListening()}clearMaps(){this.leaderwordsMap.clear(),this.verbsMap.clear(),this.fillerWordsMap.clear(),this.goodbadwordsMap.clear(),this.previousTime=0,this.totalWords=0,this.sentenseClarity={good:0,bad:0},this.timerInterval&&(clearInterval(this.timerInterval),this.speechTime="")}initializeSpeechRecognition(){if(this.annyang=window.annyang,this.annyang){let r={"Stop listening":()=>{this.zone.run(()=>{this.stopListening()})},"Start listening":()=>{this.zone.run(()=>{this.startListening()})},Clear:()=>{this.zone.run(()=>{this.clearCommand()})}};this.annyang.addCallback("result",(i,s,o)=>{if(this.listening){let a=this.previousTime?o-this.previousTime>=300:!1;this.previousTime=o,this.zone.run(()=>{if(this.interimTranscript="",s&&i[0]){if(this.isMobile){let u=i[0].trim();if(this.prevSentense==u)return;this.prevSentense=u}let c=i[0]+(a?". ":" ");this.updateFullText(c)}else this.interimTranscript+=i})}}),this.annyang.addCallback("soundstart",()=>{console.debug("sound detected"),this.zone.run(()=>{this.speaking=!0})}),this.annyang.addCommands(r),this.recognition=this.annyang.getSpeechRecognizer(),this.recognition?(this.recognition.interimResults=!this.isMobile,this.annyang.start({autoRestart:!0,continuous:!0}),console.debug("Speech recognition started")):console.error("Voice is not supported in this browser.")}else console.error("Voice is not supported in this browser.")}loadExternalScript(r){return new Promise((i,s)=>{let o=document.createElement("script");o.src=r,o.type="application/javascript",o.onload=()=>{i()},o.onerror=()=>{s("Script load error")},document.body.appendChild(o)})}updateFullText(r){this.voiceMode?r.includes(this.START_COMMAND)||(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r):r.includes(this.CLEAR_COMMAND)?this.clearCommand():r.includes(this.STOP_COMMAND)?this.stopListening():(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r,this.listening=!0)}};e.\u0275fac=function(i){return new(i||e)(q(De),q(zk),q(Jt),q(UO),q(Cn),q(Ln))},e.\u0275cmp=Ae({type:e,selectors:[["app-voice-smith"]],decls:45,vars:16,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-8"],[4,"ngIf"],["id","voice-output"],[1,"float-end"],[1,"fa-regular","fa-clock"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"small"],[1,"badge","badge-border-info"],[1,"badge","text-bg-light"],[1,"badge","badge-border-danger"],[1,"badge","badge-border-primary"],[1,"card-text"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","badge-border-success"],[1,"btn","rounded-circle","justify-content-center","align-items-center",3,"click","ngClass"],[1,"fas",3,"ngClass"],["target","_blank",1,"text-decoration-none",3,"click"],[1,"fa-clipboard",3,"click","ngClass"],[1,"badge","rounded-pill","text-bg-primary"],["href","https://www.merriam-webster.com/word-of-the-day","target","_blank",1,""],[1,"fa-solid","fa-lightbulb",2,"color","#efbc06"],[1,"d-sm-none","badge","badge-border-success"],[1,"text-strike-black"],["class","badge text-bg-primary",4,"ngIf"],[1,"badge","text-bg-primary"],[3,"ngClass"]],template:function(i,s){i&1&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1),Ce(4,q9,26,10,"p",3)(5,W9,4,2,"p",3),F(),k(6,"div",4),U(7),k(8,"em"),U(9),F()(),k(10,"div",5),U(11),k(12,"span"),U(13),F(),U(14,"\xA0"),ce(15,"i",6),U(16,"\xA0"),k(17,"span"),U(18),F()()(),k(19,"div",7)(20,"div",8)(21,"div",9)(22,"h5",10),U(23,"Strength Board : "),k(24,"span",11),U(25),F()(),k(26,"p")(27,"span",12),U(28,"Actions\xA0"),k(29,"span",13),U(30),F()(),U(31," | "),k(32,"span",14),U(33,"Fillers\xA0"),k(34,"span",13),U(35),F()(),U(36," | "),k(37,"span",15),U(38,"Clarity\xA0"),k(39,"span",13),U(40),F()()(),ce(41,"hr"),k(42,"div",16),Ce(43,K9,4,3,"span",17),jt(44,"keyvalue"),F()()()()()()),i&2&&(j(4),ee("ngIf",s.voiceMode),j(),ee("ngIf",!s.voiceMode),j(2),Lt("",s.fullTranscript," "),j(2),Ve(s.interimTranscript),j(2),xf("Highest : ",s.appData.highestScore," | Tried : ",s.appData.numberOfHits," | "),j(2),Lt("Words : ",s.totalWords,""),j(5),Ve(s.speechTime),j(7),Ve(s.totalScore),j(5),Ve(s.verbsMap.size),j(5),Ve(s.fillerWordsMap.size),j(5),xf("",s.sentenseClarity.good,"/",s.sentenseClarity.bad,""),j(3),ee("ngForOf",Pn(44,14,s.goodbadwordsMap)))},dependencies:[Ca,Qt,Yt,zi],styles:["#voice-output[_ngcontent-%COMP%]{font-size:1.4em;line-height:1.6;border:1px solid #ccc;padding:20px;min-height:200px;background-color:#f9f9f9;margin-top:10px;white-space:pre-wrap}.typing-cursor[_ngcontent-%COMP%]{border-right:2px solid black;animation:_ngcontent-%COMP%_blink 1s steps(1) infinite}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #007bffb3}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 0 #007bffb3}50%{transform:scale(1.1);box-shadow:0 0 10px #00ff7bb3}to{transform:scale(1);box-shadow:0 0 #007bffb3}}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}.badge-border-primary[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-primary);color:var(--bs-primary)!important}.badge-border-danger[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-danger);color:var(--bs-danger)!important}.badge-border-info[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-info);color:var(--bs-info)!important}.text-strike-black[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#000}"]});let n=e;return n})();var Zb=(()=>{let e=class e extends Yn{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=o,this.homePageContent="Loading..",this.imgLayout="LayoutMix",this.firstHeading=!1,this.firstPara=!1,this.loadNewWidget=!1,this.usersFileAlreadyLoaded=!1,this.messaging.event$.subscribe(a=>{switch(a.cmd){case"UserContext":this.titleService.setTitle(ne.ghUser.name),this.usersFileAlreadyLoaded||(ne.YOUR_READ_ME?this.homePageContent=ne.YOUR_READ_ME:this.githubService.getInstalledAccessToken()?this.githubService.getInstalledContent(ne.ghUserLoaded).then(u=>{this.homePageContent=u}):this.githubService.getReadMeContent(ne.ghUserLoaded).then(u=>{this.homePageContent=u}).catch(u=>{console.log(ne.ghUserLoaded+" not available")}));break;case"UserDirectory":break;default:break}})}ngAfterViewInit(){}ngOnInit(){if(ne.INTERNAL_FOLDERS.includes(this.basePath)){this.router.navigate(["/i"+Le.getUrl(this.router)]);return}this.routerFileUrl&&this.githubService.getMdFileContent(this.basePath,this.routerFileUrl).then(r=>{this.homePageContent=r,this.usersFileAlreadyLoaded=!0}).catch(r=>this.homePageContent=r),this.titleService.setTitle("John Doe"),this.markdownService.renderer.html=r=>(Le.getFirstLine(r).includes("Widget")&&(this.loadNewWidget=!0),this.imgLayout=="<!-- Theme:Classic, ImgAlign:Left Widget:NAVI-->"||this.imgLayout,r),this.markdownService.renderer.heading=(r,i,s)=>i==1&&!this.firstHeading?(this.firstHeading=!0,`<h1 class="first-heading">${s}</h1>`):it.prototype.heading.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.paragraph=r=>r.startsWith("<a")&&r.endsWith("</a>")?r:this.firstHeading&&!this.firstPara?(this.firstPara=!0,`<p class="first-para">${r}<p>`):`<p>${r}<p>`,this.markdownService.renderer.link=(r,i,s)=>it.prototype.link.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.image=(r,i,s)=>`<img src="${r}" class="img-fluid mx-auto d-block" alt="${s}">`}onMarkdownReady(){if(this.applyLastHeadingStyle(),this.loadNewWidget){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(pm);r.appendChild(i.location.nativeElement)}}}applyLastHeadingStyle(){let r=document.querySelectorAll("h1");if(r.length>1){let i=r[r.length-1];i.classList.add("cta");let s=i.nextElementSibling;for(;s;)s.classList.add("cta"),s=s.nextElementSibling}}};e.\u0275fac=function(i){return new(i||e)(q(Zt),q(Pt),q(Dn),q(En))},e.\u0275cmp=Ae({type:e,selectors:[["app-ghhome"]],features:[wt],decls:5,vars:1,consts:[["mdContent",""],[1,"container"],[1,"row","justify-content-center"],[1,"container",3,"ready","data"]],template:function(i,s){if(i&1){let o=In();k(0,"div",1)(1,"div",2,0)(3,"markdown",3),Oe("ready",function(){return Xe(o),et(s.onMarkdownReady())}),U(4,`
        `),F()()()}i&2&&(j(3),ee("data",s.homePageContent))},dependencies:[Kn],styles:[".badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}"]});let n=e;return n})();function Q9(n,e){if(n&1&&(k(0,"div",6)(1,"div",7)(2,"a",8),ce(3,"img",9),F(),k(4,"div",10)(5,"a",11)(6,"h5",12),U(7),F()()()()()),n&2){let t=e.$implicit,r=ue();j(2),ee("href",r.galaryLinks.get(t.key),dt),j(),Nn("alt",t.key),ee("src",t.value,dt),j(2),ee("href",r.galaryLinks.get(t.key),dt),j(2),Ve(t.key)}}var BO=(()=>{let e=class e extends Yn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.markdownContent="Loading..",this.galaryLinks=new Map,this.galaryImgs=new Map,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.titleService.setTitle(ne.ghUser.name),this.githubService.getReadMeContent(this.routerFileUrl).then(c=>this.markdownContent=c);break;default:break}})}ngOnInit(){this.markdownService.renderer.link=(r,i,s)=>(this.galaryLinks.set(s,r),it.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.image=(r,i,s)=>(this.galaryImgs.set(s,r),s)}onMarkdownReady(){}};e.\u0275fac=function(i){return new(i||e)(q(Zt),q(Pt),q(Dn))},e.\u0275cmp=Ae({type:e,selectors:[["app-crazy-coupons"]],features:[wt],decls:8,vars:4,consts:[[1,"container","mt-5"],[1,"row"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"container"],[1,"row","justify-content-center"],[3,"ready","data"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],["target","_blank","rel","noopener noreferrer",1,"text-decoration-none",3,"href"],[1,"card-title"]],template:function(i,s){i&1&&(k(0,"div",0)(1,"div",1),Ce(2,Q9,8,5,"div",2),jt(3,"keyvalue"),F()(),k(4,"div",3)(5,"div",4)(6,"markdown",5),Oe("ready",function(){return s.onMarkdownReady()}),U(7,`
        `),F()()()),i&2&&(j(2),ee("ngForOf",Pn(3,2,s.galaryImgs)),j(4),ee("data",s.markdownContent))},dependencies:[Qt,Kn,zi],styles:['@import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css";.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#333;margin-top:4px;text-align:left;line-height:1.2}.card-body[_ngcontent-%COMP%]{padding:8px}.card[_ngcontent-%COMP%]{border:none}']});let n=e;return n})();var gm=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.el=i}ngOnInit(){let r=this.renderer.createElement("script");r.src="https://giscus.app/client.js",r.setAttribute("data-repo","publichomepage/discuss"),r.setAttribute("data-repo-id","R_kgDONHZY8A"),r.setAttribute("data-category","Announcements"),r.setAttribute("data-category-id","DIC_kwDONHZY8M4CjyZp"),r.setAttribute("data-mapping","pathname"),r.setAttribute("data-reactions-enabled","1"),r.setAttribute("data-emit-metadata","1"),r.setAttribute("data-theme","light"),r.setAttribute("data-lang","en"),r.setAttribute("crossorigin","anonymous"),r.async=!0;let i=this.el.nativeElement.querySelector("#discuss-pane");this.renderer.appendChild(i,r),window.addEventListener("message",this.handleMessage.bind(this))}ngOnDestroy(){window.removeEventListener("message",this.handleMessage.bind(this))}handleMessage(r){if(r.origin!=="https://giscus.app"||!(typeof r.data=="object"&&r.data.giscus))return;let i=r.data.giscus;console.log("GiscusData"+JSON.stringify(r.data))}};e.\u0275fac=function(i){return new(i||e)(q(Wn),q(kt))},e.\u0275cmp=Ae({type:e,selectors:[["app-giscus-widget"]],decls:1,vars:0,consts:[["id","discuss-pane"]],template:function(i,s){i&1&&ce(0,"div",0)}});let n=e;return n})();var pd=(()=>{let e=class e{};e.NEW_USER_CHANNEL="https://discord.com/api/webhooks/1161881028474966077/1NlJyAYOMZbQTZmbVL_WAEm4S_whyKQ275RsOf3PHYqF7naHYmx9z9lFNW2kqzlLr0I-",e.WEB_ERROR_CHANNEL="https://discord.com/api/webhooks/1161880477750272000/I-DJecqOhonKLsy75jP6iVeGxpqxMuu8WZ8wgBd31o4rZzF49vXnjKo9Tv0p5S6HTm7j",e.PUBLISHING_HELP_CHANNEL="https://discord.com/api/webhooks/1161873930991190078/FHGUfffC-VfjGOrLv9OU0EAkmeqM0-3o6phOYtg3cGkjG1E57_CPSAhQ0_pJO6AYNLC7",e.INTERVIEW_ASSISTANCE_CHANNEL="https://discord.com/api/webhooks/1177388543023272059/Tqt3tk3Bm3tvd6aZksnQ9-crhr8qWTby6HEWguT3nb5DG-10Y7zV3vh84D7utAdTvL17",e.DEFAULT_PAGE_COUNT=777,e.DEFAULT_PAGE_LIKES=17,e.MAX_SIDE_PANEL_VIDEO_LINKS=5,e.MAX_QUESTION_TIMEOUT=2500,e.JUDGE_0_SUBMISSION_URL="https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=true&fields=*",e.DRAFT_HEADER="<!-- Draft -->",e.DRAFT_PAGE_LINK="/faqs/draft_content",e.CODING_QUESTIONS_CONTENT_HEADER="<!-- question -->",e.CODING_SOLUTIONS_CONTENT_HEADER="<!-- correct_solution -->",e.CODING_ONE_TEST_CASE_CONTENT_HEADER="<!-- runOneTestCaseHandler -->",e.CODING_ALL_TESTS_CONTENT_HEADER="<!-- runAllTestCases -->",e.SELECTIFY_ANSWER_CONTENT_HEADER="<!-- Answer[ ]?=(.*)-->",e.ASSESSMENT_FOLDER_HEADER="<!-- Assessment Folder : (?<name>\\S+) -->",e.ASSESSMENT_KNOWLEDGE_CHECK_HEADER=/<!-- Knowledge Check | (\w+) | (\S+) | (\w+) -->/g,e.ASSESSMENT_QUESTIONS_FILE_NAME_SYNTAX="(?<qId>\\d+)-(?<qName>\\S+).md",e.SELECT_OPTIONS_HEADER="<!-- Select options -->";let n=e;return n})();var zO=(()=>{let e=class e{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustResourceUrl(r)}};e.\u0275fac=function(i){return new(i||e)(q(Gs,16))},e.\u0275pipe=zs({name:"safe",type:e,pure:!0});let n=e;return n})();var Z9=(n,e)=>({"fa-play":n,"fa-pause":e});function J9(n,e){if(n&1&&(k(0,"li")(1,"a",21),U(2),F()()),n&2){let t=e.$implicit,r=ue(2);j(),Af("href","/i/",t,"",dt),j(),Ve(r.getFileName(t))}}function X9(n,e){if(n&1&&(k(0,"div",14)(1,"div",15),U(2),k(3,"a",16),ce(4,"i",17),F()(),k(5,"div",18)(6,"div",19)(7,"div",8)(8,"ul",20),Ce(9,J9,3,3,"li",10),F()()()()()),n&2){let t=ue();j(2),Lt("",t.folderName," "),j(7),ee("ngForOf",t.filesAvailable)}}function e8(n,e){if(n&1&&(k(0,"div",22)(1,"div",23)(2,"p"),U(3,"Try these challenge questions and get better on this topic."),F(),k(4,"a",24),ce(5,"i",25),U(6,"\xA0Knowledge Check"),F()()()),n&2){let t=ue();j(4),Nn("href",t.assementLink,dt)}}function t8(n,e){n&1&&(k(0,"div")(1,"b"),U(2,"Practice questions"),F()())}function n8(n,e){if(n&1&&(k(0,"li")(1,"a",26),U(2),F()()),n&2){let t=e.$implicit;j(),Nn("href",t,dt),j(),Ve(t.split("problems")[1])}}function r8(n,e){n&1&&(k(0,"div",27)(1,"b"),U(2,"Video reference"),F()())}function i8(n,e){if(n&1&&(k(0,"div",28),ce(1,"iframe",29),jt(2,"safe"),F()),n&2){let t=e.$implicit;j(),ee("src",Pn(2,1,t),_f)}}function s8(n,e){if(n&1){let t=In();k(0,"a",30),Oe("click",function(){Xe(t);let i=ue();return et(i.speakText())}),ce(1,"i",31),F()}if(n&2){let t=ue();j(),ee("ngClass",kf(1,Z9,!t.isPaused,t.isPaused))}}var gd=(()=>{let e=class e extends Yn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=G(En),this.filesAvailable=[],this.availableYoutubeLinks=new Set,this.leetcodeLinks=new Set,this.folderName="",this.readmeFileUrl="",this.assementLink="",this.speechContent=null,this.isPaused=!1,this.isSpeaking=!1,this.isDraftArticle=!1,this.loadPlugin=!1,this.firstLineProcessed=!1,this.hasSelectOptionsHeader=!1,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.folderName=this.articleFolderName;let c=Le.getRouterUrl(this.router,this.basePath+"/"+this.folderName);c.endsWith(".md")||(c=c+".md"),this.readmeFileUrl=Le.getGhUserFilePath(ne.ghUserLoaded,`${this.folderName}/${c}`,this.githubService.hasInstalledAccessToken());break;case"UserDirectory":this.githubService.getGhDirectoryContents(this.githubUser,!0,this.getFolderName()).then(u=>{this.filesAvailable=u.files.filter(d=>!d.includes("README.md"))});break;default:break}}),this.speechSir=window.speechSynthesis}getFolderName(){let r=this.routerFileUrl.substring(this.routerFileUrl.lastIndexOf("/")+1);return r.endsWith("md")?super.getFolderName():r}ngOnInit(){this.router.events.subscribe(r=>{r.type==15&&this.ngOnDestroy()}),this.markdownService.renderer.html=r=>{if(this.processFirstLine(r),this.isDraftArticle)return"";let i=r.match(pd.ASSESSMENT_FOLDER_HEADER);if(i!=null&&i.groups&&i.groups.name){let s=i.groups.name;return this.assementLink=s.includes("http")?s:`/assessments/${s}`,""}return this.hasSelectOptionsHeader=r.includes(pd.SELECT_OPTIONS_HEADER),r},this.markdownService.renderer.list=(r,i,s)=>{if(this.hasSelectOptionsHeader){let o=r.split(`
`).map(a=>`<option>${a.trim()}</option>`).join("");return this.hasSelectOptionsHeader=!1,`<select class="form-select form-select-lg mb-3">${o}</select>`}return it.prototype.list.call(this.markdownService.renderer,r,i,s)}}processFirstLine(r){if(this.firstLineProcessed)return;let i=Le.parseHtmlLine(r);switch(i.PageType){case pd.DRAFT_HEADER:{this.isDraftArticle=!0;break}case"Assessment":break;default:break}i.Widget=="NAVI"&&(this.loadPlugin=!0),this.firstLineProcessed=!0}speakText(){this.isPaused?this.resumeSpeech():this.isSpeaking?this.pauseSpeech():this.startSpeech()}startSpeech(){!this.isSpeaking&&this.speechContent!=null&&(this.speechSir.speak(this.speechContent),this.isSpeaking=!0)}pauseSpeech(){!this.isPaused&&this.isSpeaking&&(this.speechSir.pause(),this.isPaused=!0)}resumeSpeech(){this.isPaused&&this.isSpeaking&&(this.speechSir.resume(),this.isPaused=!1)}onMarkdownReady(){if(this.availableYoutubeLinks=ne.userContext.youtube_links,this.leetcodeLinks=ne.userContext.leetcode_links,this.isDraftArticle)this.router.navigate([pd.DRAFT_PAGE_LINK]);else if(this.router.navigate([this.router.url]),this.loadPlugin){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(pm);r.appendChild(i.location.nativeElement)}}}speechReady(r){this.isDraftArticle||(this.speechContent=r?new SpeechSynthesisUtterance(r):null,this.speechContent!=null&&(this.speechContent.pitch=1,this.speechContent.rate=1,this.speechContent.volume=1,this.speechContent.lang="en-US"))}ngOnDestroy(){this.speechSir&&this.speechContent!=null&&this.speechSir.cancel()}getFileName(r){return this.folderName=="faqs"?Le.getFileNameWithoutCurrentFolder(r,this.folderName):Le.getFileName(r)}};e.\u0275fac=function(i){return new(i||e)(q(Zt),q(Pt),q(Dn))},e.\u0275cmp=Ae({type:e,selectors:[["app-internal-articles"]],features:[wt],decls:16,vars:8,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"container",3,"ready","load","src"],[1,"col-lg-4"],["class","card mb-4 my-3",4,"ngIf"],["class","card my-3 text-center border-success",4,"ngIf"],[4,"ngIf"],[1,"text-truncate"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],["class","text-capitalize my-2",4,"ngIf"],["class","card mb-4",4,"ngFor","ngForOf"],["class","float",3,"click",4,"ngIf"],[1,"card","mb-4","my-3"],[1,"card-header","text-capitalize"],["href","/articles"],[1,"fa-solid","fa-magnifying-glass","float-right",2,"color","darkorange"],[1,"card-body","scrollable-card"],[1,"row"],[1,"list-unstyled","mb-0","text-capitalize"],[3,"href"],[1,"card","my-3","text-center","border-success"],[1,"card-body"],[1,"btn","btn-warning",3,"href"],[1,"fa-regular","fa-lightbulb"],["target","_blank",3,"href"],[1,"text-capitalize","my-2"],[1,"card","mb-4"],["width","100%","height","200","allowfullscreen","",1,"rounded-2",3,"src"],[1,"float",3,"click"],[1,"fa","my-float",3,"ngClass"]],template:function(i,s){i&1&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),Oe("ready",function(){return s.onMarkdownReady()})("load",function(a){return s.speechReady(a)}),U(4,`
            `),F()(),k(5,"div",4),Ce(6,X9,10,2,"div",5)(7,e8,7,1,"div",6)(8,t8,3,0,"div",7),k(9,"div",8)(10,"ul",9),Ce(11,n8,3,2,"li",10),F()(),Ce(12,r8,3,0,"div",11)(13,i8,3,3,"div",12),ce(14,"app-giscus-widget"),F()()(),Ce(15,s8,2,4,"a",13)),i&2&&(j(3),ee("src",s.readmeFileUrl),j(3),ee("ngIf",s.folderName),j(),ee("ngIf",s.assementLink),j(),ee("ngIf",s.leetcodeLinks.size>0),j(3),ee("ngForOf",s.leetcodeLinks),j(),ee("ngIf",s.availableYoutubeLinks.size>0),j(),ee("ngForOf",s.availableYoutubeLinks),j(2),ee("ngIf",s.speechContent))},dependencies:[Ca,Qt,Yt,Kn,gm,zO],styles:[".scrollable-card[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto}"]});let n=e;return n})();var qO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-roadmap"]],decls:35,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-4"],[1,"my-3"],[1,"step","step-active"],[1,"circle"],[1,"fa","fa-check"],[1,"title"],[1,"caption"],[1,"step"],[1,"circle",2,"background-color","green"],[1,"fab","fa-youtube","fa-xl",2,"color","#ed302f"],[1,"circle",2,"background-color","yellowgreen"],["href","https://interviewdose.com/roadmap","target","_blank"]],template:function(i,s){i&1&&(k(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),U(4,"Roadmap"),F(),U(5," '"),k(6,"div",4)(7,"div")(8,"div",5),ce(9,"i",6),F()(),k(10,"div")(11,"div",7),U(12,"What's Next ?"),F(),k(13,"div",8),U(14,"Comming soon..."),F()()(),k(15,"div",9)(16,"div")(17,"div",10),U(18,"1"),F()(),k(19,"div")(20,"div",7),ce(21,"i",11),U(22,"\xA0interviewdose channel created"),F(),ce(23,"div",8),F()(),k(24,"div",9)(25,"div")(26,"div",12),U(27,"1"),F()(),k(28,"div")(29,"div",7),U(30,"Menifesting the World's simplest AI Page"),F(),k(31,"div",8),U(32,"This is THE simplest developer friendly webpage builder on earth today: Forked from "),k(33,"a",13),U(34,"https://interviewdose.com"),F()()()()()()())},styles:['.step[_ngcontent-%COMP%]{position:relative;min-height:1em;color:gray}.title[_ngcontent-%COMP%]{line-height:1.5em;font-weight:700}.caption[_ngcontent-%COMP%]{font-size:.8em}.step[_ngcontent-%COMP%] + .step[_ngcontent-%COMP%]{margin-top:1.5em}.step[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:static;height:0}.step[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){margin-left:1.5em;padding-left:1em}.circle[_ngcontent-%COMP%]{background:gray;position:relative;width:1.5em;height:1.5em;line-height:1.5em;border-radius:100%;color:#fff;text-align:center;box-shadow:0 0 0 3px #fff}.circle[_ngcontent-%COMP%]:after{content:" ";position:absolute;display:block;inset:1px 50%;height:100%;width:1px;transform:scaleY(2);transform-origin:50% -100%;background-color:#00000040;z-index:-1}.step[_ngcontent-%COMP%]:last-child   .circle[_ngcontent-%COMP%]:after{display:none}.step.step-active[_ngcontent-%COMP%]{color:#4285f4}.step.step-active[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{background-color:#4285f4}']});let n=e;return n})();var HO=(()=>{let e=class e{constructor(r){this.messaging=r,this.recognition=new webkitSpeechRecognition,this.isStoppedSpeechRecog=!1,this.text="",this.tempWords=""}init(){this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.addEventListener("result",r=>{var i=r.results[0][0].transcript;if(this.tempWords=i,i){let s={cmd:"speech",payload:i};this.messaging.send(s)}})}start(){this.isStoppedSpeechRecog=!1,this.recognition.start(),console.log("Speech recognition started"),this.recognition.addEventListener("end",()=>{this.isStoppedSpeechRecog?(this.recognition.stop(),console.log("End speech recognition")):(this.wordConcat(),this.recognition.start())})}stop(){this.isStoppedSpeechRecog=!0,this.wordConcat(),this.recognition.stop(),console.log("End speech recognition")}wordConcat(){this.text=this.text+" "+this.tempWords+".",this.tempWords=""}};e.\u0275fac=function(i){return new(i||e)(B(Jt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var a8=["searchInput"],c8=n=>({transform:n});function l8(n,e){n&1&&(k(0,"div",12),U(1,"Listening... "),k(2,"div",13)(3,"span",14),U(4,"Loading..."),F()()())}function u8(n,e){n&1&&(k(0,"div",12),U(1,"Listening "),ce(2,"i",15),F())}function d8(n,e){if(n&1&&(k(0,"div",16),ce(1,"i",17),U(2),F()),n&2){let t=ue();j(2),Lt("\xA0",t.lastSpeechText,"")}}function h8(n,e){if(n&1&&(k(0,"h6",25),U(1),F()),n&2){let t=ue().ngIf;j(),Lt(" ~ ",t.Category,"")}}function f8(n,e){if(n&1&&(Dw(0),k(1,"h2",22),U(2),F(),k(3,"i"),Ce(4,h8,2,1,"h6",23),F(),ce(5,"a",24),Cw()),n&2){let t=e.ngIf,r=ue().$implicit,i=ue();j(2),Ve(t.File),j(2),ee("ngIf",t.Category),j(),Nn("href",i.createClickableLink(r),dt)}}function p8(n,e){if(n&1){let t=In();k(0,"div",18)(1,"div",19),Oe("mouseenter",function(){let i=Xe(t).$implicit,s=ue();return et(s.onCardHover(!0,i))})("mouseleave",function(){let i=Xe(t).$implicit,s=ue();return et(s.onCardHover(!1,i))}),k(2,"div",20),Ce(3,f8,6,3,"ng-container",21),F()()()}if(n&2){let t=e.$implicit,r=ue();j(),Nn("id",t),ee("ngStyle",Rf(3,c8,r.getRandomRotation(t))),j(2),ee("ngIf",r.getFileNameWithCategory(t))}}var Jb=(()=>{let e=class e extends gd{constructor(r,i,s,o,a){super(i,r,s),this.filterText="",this.lastSpeechText="",this.articleFound=!1,this.filteredFiles=[],this.cachedRotations={},this.userTyping=!1,this.ghuserName="",a.event$.subscribe(c=>{let u=c;switch(u.cmd){case"speech":this.articleFound=!1,this.filterText=u.payload?u.payload:"",this.lastSpeechText=this.filterText.substring(0,25),this.searchKey(),this.articleFound||(this.filterText="",this.filteredFiles=this.filesAvailable);break;case"UserDirectory":setTimeout(()=>{this.filteredFiles=this.filesAvailable},1e3);break;default:break}}),o.init(),o.start()}ngOnInit(){this.ghuserName=ne.ghUserLoaded}onUserInput(){this.userTyping=!0}clickArticle(r){this.router.navigate(["/i"+r])}searchKey(){let r=this.filterText.trim().split(/\s+/).map(s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),i=new RegExp(r.join("|"),"i");this.filteredFiles=this.filterText===""?this.filesAvailable:this.filesAvailable.filter(s=>i.test(s)?(this.articleFound=!0,this.userTyping||this.searchInput.nativeElement.select(),!0):!1)}getRandomRotation(r){if(!this.cachedRotations[r]){let o=Math.random()*4+-2;this.cachedRotations[r]=`rotate(${o}deg)`}return this.cachedRotations[r]}onCardHover(r,i){let s=document.getElementById(i);s&&(r?s.style.transform="":s.style.transform=this.cachedRotations[i])}getFileNameWithCategory(r,i=!1){return Le.getFileNameWithCategory(r,i)}createClickableLink(r){let i=r.lastIndexOf(".md");return i!=-1&&(r=r.substring(0,i)),this.isHomePageGHUser?`/i/${r}`:`/${this.githubUser}/${r}`}};e.\u0275fac=function(i){return new(i||e)(q(Pt),q(Zt),q(Dn),q(HO),q(Jt))},e.\u0275cmp=Ae({type:e,selectors:[["app-search-articles"]],viewQuery:function(i,s){if(i&1&&kl(a8,7),i&2){let o;ma(o=ya())&&(s.searchInput=o.first)}},features:[wt],decls:15,vars:5,consts:[["searchInput",""],[1,"container","px-5"],[1,"row","mx-auto","mb-4","rounded-3","align-items-center","justify-content-center"],[1,"container-fluid","py-3","text-center"],[1,"display-4","fw-bold"],[1,"col-lg-6"],["class","fs-6 text-muted float-end",4,"ngIf"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type or Speak to search ...",1,"form-control","border","border-success",3,"ngModelChange","input","ngModel"],["class","fs-6 text-muted text-center",4,"ngIf"],[1,"row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"fs-6","text-muted","float-end"],["role","status",1,"spinner-border","spinner-border-sm","text-secondary"],[1,"sr-only"],[1,"fa-solid","fa-check",2,"color","#63E6BE"],[1,"fs-6","text-muted","text-center"],[1,"fa-brands","fa-searchengin"],[1,"col-md-3"],[1,"card","mb-4","border-primary","card-hover",3,"mouseenter","mouseleave","id","ngStyle"],[1,"card-body","text-success"],[4,"ngIf"],[1,"card-title","text-capitalize"],["class","card-subtitle text-muted text-end",4,"ngIf"],[1,"stretched-link",3,"href"],[1,"card-subtitle","text-muted","text-end"]],template:function(i,s){if(i&1){let o=In();k(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),U(4,"Search Articles"),F()(),k(5,"div",5),Ce(6,l8,5,0,"div",6)(7,u8,3,0,"div",6),k(8,"div",7)(9,"input",8,0),_a("ngModelChange",function(c){return Xe(o),Nl(s.filterText,c)||(s.filterText=c),et(c)}),Oe("ngModelChange",function(){return Xe(o),et(s.searchKey())})("input",function(){return Xe(o),et(s.onUserInput())}),F()(),Ce(11,d8,3,1,"div",9),F()(),k(12,"div",10),Ce(13,p8,4,5,"div",11),F(),ce(14,"app-giscus-widget"),F()}i&2&&(j(6),ee("ngIf",!s.articleFound),j(),ee("ngIf",s.articleFound),j(2),wa("ngModel",s.filterText),j(2),ee("ngIf",!s.articleFound),j(2),ee("ngForOf",s.filteredFiles))},dependencies:[Qt,Yt,Vx,Pa,op,nu,gm],styles:[".card-hover[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease,background-color .3s ease}.card-hover[_ngcontent-%COMP%]:hover{box-shadow:0 10px 20px #0000004d;background-color:silver}"]});let n=e;return n})();var g8=["scrollPanel"],m8=["iframeRef"];function y8(n,e){n&1&&(k(0,"h4",25),U(1,"Deep Search in your page"),F())}function v8(n,e){if(n&1){let t=In();k(0,"iframe",26,2),Oe("load",function(){Xe(t);let i=ue();return et(i.captureTextContent())}),F()}if(n&2){let t=ue();ee("src",t.safeUrl,_f)}}function w8(n,e){if(n&1&&(k(0,"div",27),U(1),F()),n&2){let t=ue();j(),Ve(t.iFramePlaceholder)}}function _8(n,e){if(n&1){let t=In();k(0,"div")(1,"b"),U(2,"Follow-up :\xA0"),F(),U(3),k(4,"i",34),Oe("click",function(i){Xe(t);let s=ue(2).$implicit,o=ue();return et(o.setNewQuestion(s.followUp?s.followUp:"",i))}),F()()}if(n&2){let t=ue(2).$implicit;j(3),Ve(t.followUp)}}function E8(n,e){if(n&1){let t=In();k(0,"div")(1,"button",31),Oe("click",function(){Xe(t);let i=ue(2);return et(i.aiUserLiked("like"))}),ce(2,"i",32),F(),k(3,"button",31),Oe("click",function(){Xe(t);let i=ue(2);return et(i.aiUserLiked("clipped"))}),ce(4,"i",33),F(),Ce(5,_8,5,1,"div",30),F()}if(n&2){let t=ue().$implicit;j(5),ee("ngIf",t.followUp)}}function I8(n,e){if(n&1&&(k(0,"div",28),ce(1,"markdown",29),Ce(2,E8,6,1,"div",30),F()),n&2){let t=e.$implicit;j(),ee("data",t.content),j(),ee("ngIf",t.from!="You")}}function b8(n,e){if(n&1&&(k(0,"div",35)(1,"div",36)(2,"div",37),ce(3,"div",38),F(),k(4,"div",39),ce(5,"div",38),F()()()),n&2){let t=ue();j(3),bw(t.firstStyle),j(2),bw(t.secondStyle)}}var GO=(()=>{let e=class e{captureTextContent(){setTimeout(()=>{let r=this.iframeRef?.nativeElement;if(r&&r.contentWindow&&r.contentWindow.document)try{console.log("Inside iframe content window");let i=r.contentWindow.document.body.innerText;i&&(this.contextLoaded=!0,this.addDeepContext(i).subscribe(s=>{console.log("Added the page content to search")},s=>{this.iFramePlaceholder="Error ! No response from response from Deep API : "+s,console.error(this.iFramePlaceholder)}),setTimeout(()=>{this.newQuestion.trim()==""&&(this.newQuestion="Who is John Doe ?",this.enableSend=!0,this.sendIsDisabled=!1)},4e3))}catch{console.error("Unable to access iframe content due to CORS restrictions."),this.iFramePlaceholder="CORS restriction prevents accessing iframe content"}},2e3)}setStyles(){this.firstStyle=`width: ${this.firstProgress}%`,this.secondStyle=`width: ${this.secondProgress}%`}constructor(r,i,s,o,a,c,u){this.ghService=r,this.httpClient=i,this.messaging=s,this.renderer=o,this.el=a,this.markdownService=c,this.sanitizer=u,this.messages=[],this.newQuestion="",this.currentQuestion="",this.aiAnswer="",this.max_context_size=6,this.enableSend=!1,this.firstTimeOpen=!0,this.liked=!1,this.requestStarted=!1,this.firstProgress=25,this.secondProgress=10,this.firstStyle="width: 25%",this.secondStyle="width: 10%",this.activeIndex=0,this.iFramePlaceholder="Enter a publichome.page URL to deep search...",this.url="https://publichome.page/simpleresume",this.loadedUrl="",this.contextLoaded=!1,this.sendIsDisabled=!0,this.initialConversation=[{role:"system",content:"You are in a job interview."}],this.messaging.send({cmd:"host",file:"IaComponent"})}ngOnInit(){this.markdownService.renderer.text=r=>{let i=r;return r}}loadUrl(){this.url.trim()&&(this.loadedUrl=this.url,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.url))}setNewQuestion(r,i=null){this.newQuestion=r,i!=null?(i.currentTarget.hidden=!0,this.sendMessage()):this.sendMessage()}sendMessage(){this.enableSend&&this.newQuestion.trim()!==""&&(this.enableSend=!1,this.startTimer(),this.messages.push({from:"You",content:`<b>You: </b>${this.newQuestion}`}),this.queryDeepApi(this.newQuestion).subscribe(r=>{this.parseDeepResponse(r.answer)},r=>{console.error("Error ! No response from response from Deep API : ",r)}),this.currentQuestion=this.newQuestion,this.newQuestion="")}parseDeepResponse(r){localStorage.setItem(this.currentQuestion,r),this.aiAnswer=r;let i="";this.aiAnswer&&(this.aiAnswer=this.aiAnswer.trim());let s=`<i class="fa-solid fa-robot" style="color:#19C37D">:</i> ${this.aiAnswer}`;this.messages.push({from:"DP",content:s,followUp:i}),this.resetMembers(),this.scrollToBottom()}aiUserLiked(r){this.liked=!0}onScroll(){}addDeepContext(r){let i="https://api.publichome.page/vector/data",s=new bn({"Content-Type":"application/json"}),o={web_link:this.loadedUrl,web_content:r};return this.httpClient.post(i,o,{headers:s})}queryDeepApi(r){let i="https://api.publichome.page/webpeek",s=new bn({"Content-Type":"application/json"}),o={web_link:this.loadedUrl,query:r};return this.httpClient.post(i,o,{headers:s})}scrollPageToBottom(){this.enableSend=!0,this.firstTimeOpen=!1;let r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=(window.scrollY||window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)+r;this.renderer.setProperty(document.documentElement,"scrollTop",s),this.renderer.setProperty(document.body,"scrollTop",s)}resetMembers(){this.stopTimer(),this.enableSend=!0,this.firstTimeOpen=!1,this.liked=!1,this.requestStarted=!1,this.timerInterval=null,this.firstProgress=25,this.secondProgress=10}scrollToBottom(){try{this.scrollPanel.nativeElement.scrollTop=this.scrollPanel.nativeElement.scrollHeight}catch{}}ngOnDestroy(){this.stopTimer()}random(r){return Math.floor(Math.random()*r+1)}startTimer(){this.requestStarted=!0,this.timerInterval=setInterval(()=>{this.firstProgress=this.firstProgress+this.random(40),this.secondProgress=this.secondProgress+this.random(20),this.firstProgress>100&&(this.firstProgress=0),this.secondProgress>100&&(this.secondProgress=0),this.setStyles(),this.scrollToBottom()},500)}stopTimer(){this.requestStarted=!1,this.timerInterval!=null&&clearInterval(this.timerInterval)}};e.\u0275fac=function(i){return new(i||e)(q(Pt),q(ri),q(Jt),q(Wn),q(kt),q(Zt),q(Gs))},e.\u0275cmp=Ae({type:e,selectors:[["app-deep-page"]],viewQuery:function(i,s){if(i&1&&(kl(g8,5),kl(m8,5)),i&2){let o;ma(o=ya())&&(s.scrollPanel=o.first),ma(o=ya())&&(s.iframeRef=o.first)}},decls:39,vars:8,consts:[["scrollPanel",""],["placeholder",""],["iframeRef",""],[1,"scroll-panel",3,"scroll"],[1,"row","col-10","col-md-8","mx-auto"],[1,"text-center"],[1,"card-text","small","my-3"],[1,"fa-solid","fa-robot",2,"color","#19C37D"],[2,"color","green"],["class","card-text",4,"ngIf"],[1,"input-group"],["type","text","placeholder","Enter URL...",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-right"],[1,"iframe-container","mt-3"],[3,"src","load",4,"ngIf","ngIfElse"],["class","justify-content-center",4,"ngFor","ngForOf"],["id","myCarousel","class","carousel slide","data-bs-ride","carousel",4,"ngIf"],[1,"row","fixed-bottom","justify-content-center",2,"background-color","#F7F7F7"],[1,"col-10","col-md-8"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type your question ...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fa","fa-arrow-up"],[1,"text-center","text-small","my-3","small"],[1,"card-text"],[3,"load","src"],[1,"iframe-placeholder"],[1,"justify-content-center"],[1,"pb-0",3,"data"],[4,"ngIf"],["type","button",1,"btn","p-1",3,"click"],[1,"fa-regular","fa-thumbs-up"],[1,"fa-regular","fa-clipboard"],[1,"btn","fa-solid","fa-plus",2,"color","green",3,"click"],["id","myCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"my-3"],["role","progressbar","aria-label","Basic example","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress",2,"height","5px"],[1,"progress-bar"],["role","progressbar","aria-label","Basic example","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress","my-2",2,"height","5px"]],template:function(i,s){if(i&1){let o=In();k(0,"div",3,0),Oe("scroll",function(){return Xe(o),et(s.onScroll())}),k(2,"div",4)(3,"div",5)(4,"h6",6),ce(5,"i",7),k(6,"b",8),U(7,"D"),F(),U(8,"eep"),k(9,"b",8),U(10,"P"),F(),U(11,"age"),F(),Ce(12,y8,2,0,"h4",9),k(13,"div",10)(14,"input",11),_a("ngModelChange",function(c){return Xe(o),Nl(s.url,c)||(s.url=c),et(c)}),F(),k(15,"button",12),Oe("click",function(){return Xe(o),et(s.loadUrl())}),ce(16,"i",13),F()(),k(17,"div",14),Ce(18,v8,2,1,"iframe",15)(19,w8,2,1,"ng-template",null,1,Ia),F()(),Ce(21,I8,3,2,"div",16)(22,b8,6,4,"div",17),F(),ce(23,"br")(24,"br")(25,"br"),U(26,"\xA0"),ce(27,"br")(28,"br")(29,"br"),F(),k(30,"div",18)(31,"div",19)(32,"div",20)(33,"input",21),_a("ngModelChange",function(c){return Xe(o),Nl(s.newQuestion,c)||(s.newQuestion=c),et(c)}),Oe("keyup.enter",function(){return Xe(o),et(s.sendMessage())}),F(),k(34,"button",22),Oe("click",function(){return Xe(o),et(s.sendMessage())}),ce(35,"i",23),F()(),k(36,"div",24),ce(37,"i",7),U(38," uses AIEmbeddings with DeepSeek"),F()()()}if(i&2){let o=va(20);j(12),ee("ngIf",s.firstTimeOpen&&!s.requestStarted),j(2),wa("ngModel",s.url),j(4),ee("ngIf",s.loadedUrl)("ngIfElse",o),j(3),ee("ngForOf",s.messages),j(),ee("ngIf",s.requestStarted),j(11),wa("ngModel",s.newQuestion),j(),ee("disabled",!s.enableSend)}},dependencies:[Qt,Yt,Pa,op,nu,Kn],styles:[".iframe-container[_ngcontent-%COMP%]{width:100%;height:300px;border:2px solid #ccc;border-radius:5px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}.iframe-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#aaa;font-style:italic;font-size:16px;background:#f8f9fa}"]});let n=e;return n})();var D8={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",enableTracing:!he.production},C8=[{path:"i/:folder/:id",component:gd,children:[{path:"**",component:gd}]},{path:"chat",component:GO},{path:"roadmap",component:qO},{path:":ghUser/articles",component:Jb},{path:"articles",component:Jb},{path:"crazycoupons",component:BO},{path:"contacts",component:D0},{path:":ghUser/contacts",component:D0},{path:"",component:Bk},{path:":ghUser",component:Zb,children:[{path:"**",component:Zb}]}],WO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=At({type:e}),e.\u0275inj=St({imports:[Sa,a0.forRoot(C8,D8),a0]});let n=e;return n})();var KO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=At({type:e,bootstrap:[ne]}),e.\u0275inj=St({providers:[Zx(),{provide:Pc,useValue:he.firebaseConfig}],imports:[oM,YM,WO,TM.forRoot({loader:ri,markedOptions:{provide:m_,useValue:{gfm:!0,breaks:!1,pedantic:!1}},sanitize:_n.NONE})]});let n=e;return n})();fx(ne,function(){return[Yt,t0,ZM,$k]},[]);sM().bootstrapModule(KO).catch(n=>console.error(n));
