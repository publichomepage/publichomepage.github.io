import{A as ar,a as M,b as te,c as Xt,d as lm,e as b,f as hD,g as fd,h as fD,i as pD,j as gD,k as dm,l as mD,m as Lc,n as hm,o as pd,p as yD,q as vD,r as fm,s as Xe,t as ys,u as or,v as gd,w as jc,x as wD,y as _D,z as gi}from"./chunk-AGPXAQQT.js";function ED(n,e){return Object.is(n,e)}var wt=null,md=!1,yd=1,mi=Symbol("SIGNAL");function Ae(n){let e=wt;return wt=n,e}function ID(){return wt}var Bc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function mm(n){if(md)throw new Error("");if(wt===null)return;wt.consumerOnSignalRead(n);let e=wt.nextProducerIndex++;if(Ed(wt),e<wt.producerNode.length&&wt.producerNode[e]!==n&&Uc(wt)){let t=wt.producerNode[e];_d(t,wt.producerIndexOfThis[e])}wt.producerNode[e]!==n&&(wt.producerNode[e]=n,wt.producerIndexOfThis[e]=Uc(wt)?TD(n,wt,e):0),wt.producerLastReadVersion[e]=n.version}function OO(){yd++}function bD(n){if(!(Uc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===yd)){if(!n.producerMustRecompute(n)&&!vm(n)){n.dirty=!1,n.lastCleanEpoch=yd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=yd}}function DD(n){if(n.liveConsumerNode===void 0)return;let e=md;md=!0;try{for(let t of n.liveConsumerNode)t.dirty||FO(t)}finally{md=e}}function CD(){return wt?.consumerAllowSignalWrites!==!1}function FO(n){n.dirty=!0,DD(n),n.consumerMarkedDirty?.(n)}function wd(n){return n&&(n.nextProducerIndex=0),Ae(n)}function ym(n,e){if(Ae(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Uc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)_d(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function vm(n){Ed(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(bD(t),r!==t.version))return!0}return!1}function wm(n){if(Ed(n),Uc(n))for(let e=0;e<n.producerNode.length;e++)_d(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function TD(n,e,t){if(SD(n),n.liveConsumerNode.length===0&&AD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=TD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function _d(n,e){if(SD(n),n.liveConsumerNode.length===1&&AD(n))for(let r=0;r<n.producerNode.length;r++)_d(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ed(i),i.producerIndexOfThis[r]=e}}function Uc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ed(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function SD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function AD(n){return n.producerNode!==void 0}function xD(n){let e=Object.create(VO);e.computation=n;let t=()=>{if(bD(e),mm(e),e.value===vd)throw e.error;return e.value};return t[mi]=e,t}var pm=Symbol("UNSET"),gm=Symbol("COMPUTING"),vd=Symbol("ERRORED"),VO=te(M({},Bc),{value:pm,dirty:!0,error:null,equal:ED,producerMustRecompute(n){return n.value===pm||n.value===gm},producerRecomputeValue(n){if(n.value===gm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=gm;let t=wd(n),r;try{r=n.computation()}catch(i){r=vd,n.error=i}finally{ym(n,t)}if(e!==pm&&e!==vd&&r!==vd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function LO(){throw new Error}var MD=LO;function RD(){MD()}function kD(n){MD=n}var jO=null;function ND(n){let e=Object.create(OD);e.value=n;let t=()=>(mm(e),e.value);return t[mi]=e,t}function _m(n,e){CD()||RD(),n.equal(n.value,e)||(n.value=e,UO(n))}function PD(n,e){CD()||RD(),_m(n,e(n.value))}var OD=te(M({},Bc),{equal:ED,value:void 0});function UO(n){n.version++,OO(),DD(n),jO?.()}function ue(n){return typeof n=="function"}function Eo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Id=Eo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function vs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var st=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ue(r))try{r()}catch(s){e=s instanceof Id?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{FD(s)}catch(o){e=e??[],o instanceof Id?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Id(e)}}add(e){var t;if(e&&e!==this)if(this.closed)FD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vs(t,e)}remove(e){let{_finalizers:t}=this;t&&vs(t,e),e instanceof n&&e._removeParent(this)}};st.EMPTY=(()=>{let n=new st;return n.closed=!0,n})();var Em=st.EMPTY;function bd(n){return n instanceof st||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function FD(n){ue(n)?n():n.unsubscribe()}var $n={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Io={setTimeout(n,e,...t){let{delegate:r}=Io;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Io;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Dd(n){Io.setTimeout(()=>{let{onUnhandledError:e}=$n;if(e)e(n);else throw n})}function $c(){}var VD=Im("C",void 0,void 0);function LD(n){return Im("E",void 0,n)}function jD(n){return Im("N",n,void 0)}function Im(n,e,t){return{kind:n,value:e,error:t}}var ws=null;function bo(n){if($n.useDeprecatedSynchronousErrorHandling){let e=!ws;if(e&&(ws={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ws;if(ws=null,t)throw r}}else n()}function UD(n){$n.useDeprecatedSynchronousErrorHandling&&ws&&(ws.errorThrown=!0,ws.error=n)}var _s=class extends st{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bd(e)&&e.add(this)):this.destination=zO}static create(e,t,r){return new Pr(e,t,r)}next(e){this.isStopped?Dm(jD(e),this):this._next(e)}error(e){this.isStopped?Dm(LD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Dm(VD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BO=Function.prototype.bind;function bm(n,e){return BO.call(n,e)}var Cm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Cd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Cd(r)}else Cd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Cd(t)}}},Pr=class extends _s{constructor(e,t,r){super();let i;if(ue(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&$n.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&bm(e.next,s),error:e.error&&bm(e.error,s),complete:e.complete&&bm(e.complete,s)}):i=e}this.destination=new Cm(i)}};function Cd(n){$n.useDeprecatedSynchronousErrorHandling?UD(n):Dd(n)}function $O(n){throw n}function Dm(n,e){let{onStoppedNotification:t}=$n;t&&Io.setTimeout(()=>t(n,e))}var zO={closed:!0,next:$c,error:$O,complete:$c};var Do=typeof Symbol=="function"&&Symbol.observable||"@@observable";function qt(n){return n}function Tm(...n){return Sm(n)}function Sm(n){return n.length===0?qt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=HO(t)?t:new Pr(t,r,i);return bo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=BD(r),new r((i,s)=>{let o=new Pr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Do](){return this}pipe(...t){return Sm(t)(this)}toPromise(t){return t=BD(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function BD(n){var e;return(e=n??$n.Promise)!==null&&e!==void 0?e:Promise}function qO(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}function HO(n){return n&&n instanceof _s||qO(n)&&bd(n)}function Am(n){return ue(n?.lift)}function me(n){return e=>{if(Am(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new xm(n,e,t,r,i)}var xm=class extends _s{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Co(){return me((n,e)=>{let t=null;n._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var To=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Am(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new st;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=st.EMPTY)}return e}refCount(){return Co()(this)}};var $D=Eo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ne=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Td(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $D}next(t){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Em:(this.currentObservers=null,s.push(t),new st(()=>{this.currentObservers=null,vs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new Td(e,t),n})(),Td=class extends Ne{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Em}};var xt=class extends Ne{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zc={now(){return(zc.delegate||Date).now()},delegate:void 0};var Sd=class extends Ne{constructor(e=1/0,t=1/0,r=zc){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Ad=class extends st{constructor(e,t){super()}schedule(e,t=0){return this}};var qc={setInterval(n,e,...t){let{delegate:r}=qc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=qc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var So=class extends Ad{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return qc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&qc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ao=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ao.now=zc.now;var xo=class extends Ao{constructor(e,t=Ao.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Mo=new xo(So),Mm=Mo;var xd=class extends So{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Md=class extends xo{};var Rm=new Md(xd);var Ht=new fe(n=>n.complete());function Rd(n){return n&&ue(n.schedule)}function km(n){return n[n.length-1]}function kd(n){return ue(km(n))?n.pop():void 0}function cr(n){return Rd(km(n))?n.pop():void 0}function zD(n,e){return typeof km(n)=="number"?n.pop():e}var Nd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Pd(n){return ue(n?.then)}function Od(n){return ue(n[Do])}function Fd(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function Vd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function GO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ld=GO();function jd(n){return ue(n?.[Ld])}function Ud(n){return fD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield fd(t.read());if(i)return yield fd(void 0);yield yield fd(r)}}finally{t.releaseLock()}})}function Bd(n){return ue(n?.getReader)}function Qe(n){if(n instanceof fe)return n;if(n!=null){if(Od(n))return WO(n);if(Nd(n))return KO(n);if(Pd(n))return QO(n);if(Fd(n))return qD(n);if(jd(n))return YO(n);if(Bd(n))return ZO(n)}throw Vd(n)}function WO(n){return new fe(e=>{let t=n[Do]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KO(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function QO(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Dd)})}function YO(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function qD(n){return new fe(e=>{JO(n,e).catch(t=>e.error(t))})}function ZO(n){return qD(Ud(n))}function JO(n,e){var t,r,i,s;return hD(this,void 0,void 0,function*(){try{for(t=pD(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function en(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Tn(n,e=0){return me((t,r)=>{t.subscribe(ye(r,i=>en(r,n,()=>r.next(i),e),()=>en(r,n,()=>r.complete(),e),i=>en(r,n,()=>r.error(i),e)))})}function zn(n,e=0){return me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function HD(n,e){return Qe(n).pipe(zn(e),Tn(e))}function GD(n,e){return Qe(n).pipe(zn(e),Tn(e))}function WD(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function KD(n,e){return new fe(t=>{let r;return en(t,e,()=>{r=n[Ld](),en(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ue(r?.return)&&r.return()})}function $d(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{en(t,e,()=>{let r=n[Symbol.asyncIterator]();en(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function QD(n,e){return $d(Ud(n),e)}function YD(n,e){if(n!=null){if(Od(n))return HD(n,e);if(Nd(n))return WD(n,e);if(Pd(n))return GD(n,e);if(Fd(n))return $d(n,e);if(jd(n))return KD(n,e);if(Bd(n))return QD(n,e)}throw Vd(n)}function De(n,e){return e?YD(n,e):Qe(n)}function oe(...n){let e=cr(n);return De(n,e)}function Ro(n,e){let t=ue(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function Nm(n){return!!n&&(n instanceof fe||ue(n.lift)&&ue(n.subscribe))}var Or=Eo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ZD(n){return n instanceof Date&&!isNaN(n)}function se(n,e){return me((t,r)=>{let i=0;t.subscribe(ye(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:XO}=Array;function eF(n,e){return XO(e)?n(...e):n(e)}function zd(n){return se(e=>eF(n,e))}var{isArray:tF}=Array,{getPrototypeOf:nF,prototype:rF,keys:iF}=Object;function qd(n){if(n.length===1){let e=n[0];if(tF(e))return{args:e,keys:null};if(sF(e)){let t=iF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function sF(n){return n&&typeof n=="object"&&nF(n)===rF}function Hd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Hc(...n){let e=cr(n),t=kd(n),{args:r,keys:i}=qd(n);if(r.length===0)return De([],e);let s=new fe(oF(r,e,i?o=>Hd(i,o):qt));return t?s.pipe(zd(t)):s}function oF(n,e,t=qt){return r=>{JD(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)JD(e,()=>{let l=De(n[c],e),d=!1;l.subscribe(ye(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function JD(n,e,t){n?en(t,n,e):e()}function XD(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},m=D=>l<r?w(D):c.push(D),w=D=>{s&&e.next(D),l++;let C=!1;Qe(t(D,d++)).subscribe(ye(e,P=>{i?.(P),s?m(P):e.next(P)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let P=c.shift();o?en(e,o,()=>w(P)):w(P)}g()}catch(P){e.error(P)}}))};return n.subscribe(ye(e,m,()=>{f=!0,g()})),()=>{a?.()}}function dt(n,e,t=1/0){return ue(e)?dt((r,i)=>se((s,o)=>e(r,s,i,o))(Qe(n(r,i))),t):(typeof e=="number"&&(t=e),me((r,i)=>XD(r,i,n,t)))}function yi(n=1/0){return dt(qt,n)}function eC(){return yi(1)}function ko(...n){return eC()(De(n,cr(n)))}function Gd(n){return new fe(e=>{Qe(n()).subscribe(e)})}function Pm(...n){let e=kd(n),{args:t,keys:r}=qd(n),i=new fe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;Qe(t[d]).subscribe(ye(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Hd(r,a):a),s.complete())}))}});return e?i.pipe(zd(e)):i}function Om(n=0,e,t=Mm){let r=-1;return e!=null&&(Rd(e)?t=e:r=e),new fe(i=>{let s=ZD(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Gc(...n){let e=cr(n),t=zD(n,1/0),r=n;return r.length?r.length===1?Qe(r[0]):yi(t)(De(r,e)):Ht}function _t(n,e){return me((t,r)=>{let i=0;t.subscribe(ye(r,s=>n.call(e,s,i++)&&r.next(s)))})}function vi(n){return me((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ye(t,void 0,void 0,o=>{s=Qe(n(o,vi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function tC(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(ye(o,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Fr(n,e){return ue(e)?dt(n,e,1):dt(n,1)}function wi(n){return me((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Vr(n){return n<=0?()=>Ht:me((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Wc(n){return se(()=>n)}function Kc(n,e=qt){return n=n??aF,me((t,r)=>{let i,s=!0;t.subscribe(ye(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function aF(n,e){return n===e}function Wd(n=cF){return me((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function cF(){return new Or}function _i(n){return me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function gn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_t((i,s)=>n(i,s,r)):qt,Vr(1),t?wi(e):Wd(()=>new Or))}function No(n){return n<=0?()=>Ht:me((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Fm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?_t((i,s)=>n(i,s,r)):qt,No(1),t?wi(e):Wd(()=>new Or))}function Qc(){return me((n,e)=>{let t,r=!1;n.subscribe(ye(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Es(n,e){return me(tC(n,e,arguments.length>=2,!0))}function nC(n={}){let{connector:e=()=>new Ne,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=c=void 0,d=f=!1},w=()=>{let D=o;m(),D?.unsubscribe()};return me((D,C)=>{l++,!f&&!d&&g();let P=c=c??e();C.add(()=>{l--,l===0&&!f&&!d&&(a=Vm(w,i))}),P.subscribe(C),!o&&l>0&&(o=new Pr({next:O=>P.next(O),error:O=>{f=!0,g(),a=Vm(m,t,O),P.error(O)},complete:()=>{d=!0,g(),a=Vm(m,r),P.complete()}}),Qe(D).subscribe(o))})(s)}}function Vm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Pr({next:()=>{r.unsubscribe(),n()}});return Qe(e(...t)).subscribe(r)}function Po(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,nC({connector:()=>new Sd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Lr(...n){let e=cr(n);return me((t,r)=>{(e?ko(n,t,e):ko(n,t)).subscribe(r)})}function He(n,e){return me((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ye(r,c=>{i?.unsubscribe();let l=0,d=s++;Qe(n(c,d)).subscribe(i=ye(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Kd(n,e){return ue(e)?He(()=>n,e):He(()=>n)}function Yc(n){return me((e,t)=>{Qe(n).subscribe(ye(t,()=>t.complete(),$c)),!t.closed&&e.subscribe(t)})}function ht(n,e,t){let r=ue(n)||e||t?{next:n,error:e,complete:t}:n;return r?me((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ye(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):qt}var $C="https://g.co/ng/security#xss",re=class extends Error{constructor(e,t){super(Ph(e,t)),this.code=e}};function Ph(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function cu(n){return{toString:n}.toString()}var Qd="__parameters__";function uF(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function zC(n,e,t){return cu(()=>{let r=uF(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(Qd)?c[Qd]:Object.defineProperty(c,Qd,{value:[]})[Qd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var mn=globalThis;function ze(n){for(let e in n)if(n[e]===ze)return e;throw Error("Could not find renamed property on target object.")}function lF(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Wt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Wt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Zm(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var dF=ze({__forward_ref__:ze});function Oh(n){return n.__forward_ref__=Oh,n.toString=function(){return Wt(this())},n}function Gt(n){return qC(n)?n():n}function qC(n){return typeof n=="function"&&n.hasOwnProperty(dF)&&n.__forward_ref__===Oh}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ft(n){return{providers:n.providers||[],imports:n.imports||[]}}function Fh(n){return rC(n,GC)||rC(n,WC)}function HC(n){return Fh(n)!==null}function rC(n,e){return n.hasOwnProperty(e)?n[e]:null}function hF(n){let e=n&&(n[GC]||n[WC]);return e||null}function iC(n){return n&&(n.hasOwnProperty(sC)||n.hasOwnProperty(fF))?n[sC]:null}var GC=ze({\u0275prov:ze}),sC=ze({\u0275inj:ze}),WC=ze({ngInjectableDef:ze}),fF=ze({ngInjectorDef:ze}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function KC(n){return n&&!!n.\u0275providers}var pF=ze({\u0275cmp:ze}),gF=ze({\u0275dir:ze}),mF=ze({\u0275pipe:ze}),yF=ze({\u0275mod:ze}),ah=ze({\u0275fac:ze}),Jc=ze({__NG_ELEMENT_ID__:ze}),oC=ze({__NG_ENV_ID__:ze});function eu(n){return typeof n=="string"?n:n==null?"":String(n)}function vF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():eu(n)}function wF(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new re(-200,n)}function Xy(n,e){throw new re(-201,!1)}var ve=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ve||{}),Jm;function QC(){return Jm}function tn(n){let e=Jm;return Jm=n,e}function YC(n,e,t){let r=Fh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ve.Optional)return null;if(e!==void 0)return e;Xy(n,"Injector")}var _F={},tu=_F,Xm="__NG_DI_FLAG__",ch="ngTempTokenPath",EF="ngTokenPath",IF=/\n/gm,bF="\u0275",aC="__source",jo;function DF(){return jo}function Ei(n){let e=jo;return jo=n,e}function CF(n,e=ve.Default){if(jo===void 0)throw new re(-203,!1);return jo===null?YC(n,void 0,e):jo.get(n,e&ve.Optional?null:void 0,e)}function L(n,e=ve.Default){return(QC()||CF)(Gt(n),e)}function U(n,e=ve.Default){return L(n,Vh(e))}function Vh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ey(n){let e=[];for(let t=0;t<n.length;t++){let r=Gt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,s=ve.Default;for(let o=0;o<r.length;o++){let a=r[o],c=TF(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(L(i,s))}else e.push(L(r))}return e}function ZC(n,e){return n[Xm]=e,n.prototype[Xm]=e,n}function TF(n){return n[Xm]}function SF(n,e,t,r){let i=n[ch];throw e[aC]&&i.unshift(e[aC]),n.message=AF(`
`+n.message,i,t,r),n[EF]=i,n[ch]=null,n}function AF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==bF?n.slice(2):n;let i=Wt(e);if(Array.isArray(e))i=e.map(Wt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Wt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(IF,`
  `)}`}var Xo=ZC(zC("Optional"),8);var Lh=ZC(zC("SkipSelf"),4);function Cs(n,e){let t=n.hasOwnProperty(ah);return t?n[ah]:null}function ev(n,e){n.forEach(t=>Array.isArray(t)?ev(t,e):e(t))}function JC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function uh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function xF(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function MF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function tv(n,e,t){let r=uu(n,e);return r>=0?n[r|1]=t:(r=~r,MF(n,r,e,t)),r}function Lm(n,e){let t=uu(n,e);if(t>=0)return n[t|1]}function uu(n,e){return RF(n,e,1)}function RF(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Bo={},nn=[],$o=new H(""),XC=new H("",-1),eT=new H(""),lh=class{get(e,t=tu){if(t===tu){let r=new Error(`NullInjectorError: No provider for ${Wt(e)}!`);throw r.name="NullInjectorError",r}return t}},tT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(tT||{}),dr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(dr||{}),Di=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Di||{});function kF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function ty(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];PF(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function NF(n){return n===3||n===4||n===6}function PF(n){return n.charCodeAt(0)===64}function nu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?cC(n,t,i,null,e[++r]):cC(n,t,i,null,null))}}return n}function cC(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var nT="ng-template";function OF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&kF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(nv(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function nv(n){return n.type===4&&n.value!==nT}function FF(n,e,t){let r=n.type===4&&!t?nT:n.value;return e===r}function VF(n,e,t){let r=4,i=n.attrs,s=i!==null?UF(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!qn(r)&&!qn(c))return!1;if(o&&qn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!FF(n,c,t)||c===""&&e.length===1){if(qn(r))return!1;o=!0}}else if(r&8){if(i===null||!OF(n,i,c,t)){if(qn(r))return!1;o=!0}}else{let l=e[++a],d=LF(c,i,nv(n),t);if(d===-1){if(qn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(qn(r))return!1;o=!0}}}}return qn(r)||o}function qn(n){return(n&1)===0}function LF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return BF(e,n)}function rT(n,e,t=!1){for(let r=0;r<e.length;r++)if(VF(n,e[r],t))return!0;return!1}function jF(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function UF(n){for(let e=0;e<n.length;e++){let t=n[e];if(NF(t))return e}return n.length}function BF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function $F(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function uC(n,e){return n?":not("+e.trim()+")":e}function zF(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!qn(o)&&(e+=uC(s,i),i=""),r=o,s=s||!qn(r);t++}return i!==""&&(e+=uC(s,i)),e}function qF(n){return n.map(zF).join(",")}function HF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!qn(i))break;i=s}r++}return{attrs:e,classes:t}}function Pe(n){return cu(()=>{let e=cT(n),t=te(M({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===tT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||dr.Emulated,styles:n.styles||nn,_:null,schemas:n.schemas||null,tView:null,id:""});uT(t);let r=n.dependencies;return t.directiveDefs=dh(r,!1),t.pipeDefs=dh(r,!0),t.id=KF(t),t})}function GF(n){return Ci(n)||iT(n)}function WF(n){return n!==null}function pt(n){return cu(()=>({type:n.type,bootstrap:n.bootstrap||nn,declarations:n.declarations||nn,imports:n.imports||nn,exports:n.exports||nn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function lC(n,e){if(n==null)return Bo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Di.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Di.None?[r,a]:r,e[s]=o):t[s]=r}return t}function pr(n){return cu(()=>{let e=cT(n);return uT(e),e})}function Ns(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ci(n){return n[pF]||null}function iT(n){return n[gF]||null}function sT(n){return n[mF]||null}function oT(n){let e=Ci(n)||iT(n)||sT(n);return e!==null?e.standalone:!1}function aT(n,e){let t=n[yF]||null;if(!t&&e===!0)throw new Error(`Type ${Wt(n)} does not have '\u0275mod' property.`);return t}function cT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Bo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||nn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lC(n.inputs,e),outputs:lC(n.outputs),debugInfo:null}}function uT(n){n.features?.forEach(e=>e(n))}function dh(n,e){if(!n)return null;let t=e?sT:GF;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(WF)}function KF(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function jh(n){return{\u0275providers:n}}function QF(...n){return{\u0275providers:lT(!0,n),\u0275fromNgModule:!0}}function lT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return ev(e,o=>{let a=o;ny(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&dT(i,s),t}function dT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];rv(i,s=>{e(s,r)})}}function ny(n,e,t,r){if(n=Gt(n),!n)return!1;let i=null,s=iC(n),o=!s&&Ci(n);if(!s&&!o){let c=n.ngModule;if(s=iC(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)ny(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{ev(s.imports,d=>{ny(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&dT(l,e)}if(!a){let l=Cs(i)||(()=>new i);e({provide:i,useFactory:l,deps:nn},i),e({provide:eT,useValue:i,multi:!0},i),e({provide:$o,useValue:()=>L(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;rv(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function rv(n,e){for(let t of n)KC(t)&&(t=t.\u0275providers),Array.isArray(t)?rv(t,e):e(t)}var YF=ze({provide:String,useValue:ze});function hT(n){return n!==null&&typeof n=="object"&&YF in n}function ZF(n){return!!(n&&n.useExisting)}function JF(n){return!!(n&&n.useFactory)}function zo(n){return typeof n=="function"}function XF(n){return!!n.useClass}var Uh=new H(""),rh={},eV={},jm;function iv(){return jm===void 0&&(jm=new lh),jm}var Kt=class{},ru=class extends Kt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,iy(e,o=>this.processProvider(o)),this.records.set(XC,Oo(void 0,this)),i.has("environment")&&this.records.set(Kt,Oo(void 0,this));let s=this.records.get(Uh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(eT,nn,ve.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ae(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ae(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ei(this),r=tn(void 0),i;try{return e()}finally{Ei(t),tn(r)}}get(e,t=tu,r=ve.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(oC))return e[oC](this);r=Vh(r);let i,s=Ei(this),o=tn(void 0);try{if(!(r&ve.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=sV(e)&&Fh(e);l&&this.injectableDefInScope(l)?c=Oo(ry(e),rh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ve.Self?iv():this.parent;return t=r&ve.Optional&&t===tu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ch]=a[ch]||[]).unshift(Wt(e)),s)throw a;return SF(a,e,"R3InjectorError",this.source)}else throw a}finally{tn(o),Ei(s)}}resolveInjectorInitializers(){let e=Ae(null),t=Ei(this),r=tn(void 0),i;try{let s=this.get($o,nn,ve.Self);for(let o of s)o()}finally{Ei(t),tn(r),Ae(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Wt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(e){e=Gt(e);let t=zo(e)?e:Gt(e&&e.provide),r=nV(e);if(!zo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Oo(void 0,rh,!0),i.factory=()=>ey(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ae(null);try{return t.value===rh&&(t.value=eV,t.value=t.factory()),typeof t.value=="object"&&t.value&&iV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ae(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Gt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function ry(n){let e=Fh(n),t=e!==null?e.factory:Cs(n);if(t!==null)return t;if(n instanceof H)throw new re(204,!1);if(n instanceof Function)return tV(n);throw new re(204,!1)}function tV(n){if(n.length>0)throw new re(204,!1);let t=hF(n);return t!==null?()=>t.factory(n):()=>new n}function nV(n){if(hT(n))return Oo(void 0,n.useValue);{let e=fT(n);return Oo(e,rh)}}function fT(n,e,t){let r;if(zo(n)){let i=Gt(n);return Cs(i)||ry(i)}else if(hT(n))r=()=>Gt(n.useValue);else if(JF(n))r=()=>n.useFactory(...ey(n.deps||[]));else if(ZF(n))r=()=>L(Gt(n.useExisting));else{let i=Gt(n&&(n.useClass||n.provide));if(rV(n))r=()=>new i(...ey(n.deps));else return Cs(i)||ry(i)}return r}function Oo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function rV(n){return!!n.deps}function iV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function sV(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function iy(n,e){for(let t of n)Array.isArray(t)?iy(t,e):t&&KC(t)?iy(t.\u0275providers,e):e(t)}function Mn(n,e){n instanceof ru&&n.assertNotDestroyed();let t,r=Ei(n),i=tn(void 0);try{return e()}finally{Ei(r),tn(i)}}function pT(){return QC()!==void 0||DF()!=null}function oV(n){if(!pT())throw new re(-203,!1)}function aV(n){let e=mn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function cV(n){return typeof n=="function"}var $r=0,Ee=1,le=2,Qt=3,Gn=4,sn=5,iu=6,hh=7,Wn=8,qo=9,hr=10,Et=11,su=12,dC=13,ea=14,xn=15,Ho=16,Fo=17,Go=18,Bh=19,gT=20,Ii=21,Um=22,Sn=23,rn=25,mT=1;var Ts=7,fh=8,ph=9,An=10,gh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(gh||{});function bi(n){return Array.isArray(n)&&typeof n[mT]=="object"}function zr(n){return Array.isArray(n)&&n[mT]===!0}function yT(n){return(n.flags&4)!==0}function $h(n){return n.componentOffset>-1}function sv(n){return(n.flags&1)===1}function Ti(n){return!!n.template}function sy(n){return(n[le]&512)!==0}var oy=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function vT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ps(){return wT}function wT(n){return n.type.prototype.ngOnChanges&&(n.setInput=lV),uV}Ps.ngInherit=!0;function uV(){let n=ET(this),e=n?.current;if(e){let t=n.previous;if(t===Bo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function lV(n,e,t,r,i){let s=this.declaredInputs[r],o=ET(n)||dV(n,{previous:Bo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new oy(l&&l.currentValue,t,c===Bo),vT(n,e,i,t)}var _T="__ngSimpleChanges__";function ET(n){return n[_T]||null}function dV(n,e){return n[_T]=e}var hC=null;var ur=function(n,e,t){hC?.(n,e,t)},hV="svg",fV="math";function fr(n){for(;Array.isArray(n);)n=n[$r];return n}function IT(n,e){return fr(e[n])}function Kn(n,e){return fr(e[n.index])}function bT(n,e){return n.data[e]}function ov(n,e){return n[e]}function xi(n,e){let t=e[n];return bi(t)?t:t[$r]}function av(n){return(n[le]&128)===128}function pV(n){return zr(n[Qt])}function mh(n,e){return e==null?null:n[e]}function DT(n){n[Fo]=0}function CT(n){n[le]&1024||(n[le]|=1024,av(n)&&qh(n))}function gV(n,e){for(;n>0;)e=e[ea],n--;return e}function zh(n){return!!(n[le]&9216||n[Sn]?.dirty)}function ay(n){n[hr].changeDetectionScheduler?.notify(8),n[le]&64&&(n[le]|=1024),zh(n)&&qh(n)}function qh(n){n[hr].changeDetectionScheduler?.notify(0);let e=Ss(n);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!av(e)));)e=Ss(e)}function TT(n,e){if((n[le]&256)===256)throw new re(911,!1);n[Ii]===null&&(n[Ii]=[]),n[Ii].push(e)}function mV(n,e){if(n[Ii]===null)return;let t=n[Ii].indexOf(e);t!==-1&&n[Ii].splice(t,1)}function Ss(n){let e=n[Qt];return zr(e)?e[Qt]:e}var we={lFrame:LT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ST=!1;function yV(){return we.lFrame.elementDepthCount}function vV(){we.lFrame.elementDepthCount++}function wV(){we.lFrame.elementDepthCount--}function AT(){return we.bindingsEnabled}function xT(){return we.skipHydrationRootTNode!==null}function _V(n){return we.skipHydrationRootTNode===n}function EV(){we.skipHydrationRootTNode=null}function xe(){return we.lFrame.lView}function on(){return we.lFrame.tView}function Mi(n){return we.lFrame.contextLView=n,n[Wn]}function Ri(n){return we.lFrame.contextLView=null,n}function vn(){let n=MT();for(;n!==null&&n.type===64;)n=n.parent;return n}function MT(){return we.lFrame.currentTNode}function IV(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function lu(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function RT(){return we.lFrame.isParent}function kT(){we.lFrame.isParent=!1}function bV(){return we.lFrame.contextLView}function NT(){return ST}function fC(n){ST=n}function Hh(){let n=we.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function DV(){return we.lFrame.bindingIndex}function CV(n){return we.lFrame.bindingIndex=n}function PT(){return we.lFrame.bindingIndex++}function cv(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function TV(){return we.lFrame.inI18n}function SV(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,cy(e)}function AV(){return we.lFrame.currentDirectiveIndex}function cy(n){we.lFrame.currentDirectiveIndex=n}function xV(n){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function OT(n){we.lFrame.currentQueryIndex=n}function MV(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[sn]:null}function FT(n,e,t){if(t&ve.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ve.Host);)if(i=MV(s),i===null||(s=s[ea],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=we.lFrame=VT();return r.currentTNode=e,r.lView=n,!0}function uv(n){let e=VT(),t=n[Ee];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function VT(){let n=we.lFrame,e=n===null?null:n.child;return e===null?LT(n):e}function LT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function jT(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var UT=jT;function lv(){let n=jT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function RV(n){return(we.lFrame.contextLView=gV(n,we.lFrame.contextLView))[Wn]}function ki(){return we.lFrame.selectedIndex}function As(n){we.lFrame.selectedIndex=n}function BT(){let n=we.lFrame;return bT(n.tView,n.selectedIndex)}function kV(){return we.lFrame.currentNamespace}var $T=!0;function dv(){return $T}function hv(n){$T=n}function NV(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=wT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function fv(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function ih(n,e,t){zT(n,e,3,t)}function sh(n,e,t,r){(n[le]&3)===t&&zT(n,e,t,r)}function Bm(n,e){let t=n[le];(t&3)===e&&(t&=16383,t+=1,n[le]=t)}function zT(n,e,t,r){let i=r!==void 0?n[Fo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Fo]+=65536),(a<s||s==-1)&&(PV(n,t,e,c),n[Fo]=(n[Fo]&4294901760)+c+2),c++}function pC(n,e){ur(4,n,e);let t=Ae(null);try{e.call(n)}finally{Ae(t),ur(5,n,e)}}function PV(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[le]>>14<n[Fo]>>16&&(n[le]&3)===e&&(n[le]+=16384,pC(a,s)):pC(a,s)}var Uo=-1,xs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function OV(n){return n instanceof xs}function FV(n){return(n.flags&8)!==0}function VV(n){return(n.flags&16)!==0}var $m={},uy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Vh(r);let i=this.injector.get(e,$m,r);return i!==$m||t===$m?i:this.parentInjector.get(e,t,r)}};function qT(n){return n!==Uo}function yh(n){return n&32767}function LV(n){return n>>16}function vh(n,e){let t=LV(n),r=e;for(;t>0;)r=r[ea],t--;return r}var ly=!0;function wh(n){let e=ly;return ly=n,e}var jV=256,HT=jV-1,GT=5,UV=0,lr={};function BV(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Jc)&&(r=t[Jc]),r==null&&(r=t[Jc]=UV++);let i=r&HT,s=1<<i;e.data[n+(i>>GT)]|=s}function _h(n,e){let t=WT(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,zm(r.data,n),zm(e,null),zm(r.blueprint,null));let i=pv(n,e),s=n.injectorIndex;if(qT(i)){let o=yh(i),a=vh(i,e),c=a[Ee].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function zm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function WT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function pv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=JT(i),r===null)return Uo;if(t++,i=i[ea],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Uo}function dy(n,e,t){BV(n,e,t)}function KT(n,e,t){if(t&ve.Optional||n!==void 0)return n;Xy(e,"NodeInjector")}function QT(n,e,t,r){if(t&ve.Optional&&r===void 0&&(r=null),!(t&(ve.Self|ve.Host))){let i=n[qo],s=tn(void 0);try{return i?i.get(e,r,t&ve.Optional):YC(e,r,t&ve.Optional)}finally{tn(s)}}return KT(r,e,t)}function YT(n,e,t,r=ve.Default,i){if(n!==null){if(e[le]&2048&&!(r&ve.Self)){let o=GV(n,e,t,r,lr);if(o!==lr)return o}let s=ZT(n,e,t,r,lr);if(s!==lr)return s}return QT(e,t,r,i)}function ZT(n,e,t,r,i){let s=qV(t);if(typeof s=="function"){if(!FT(e,n,r))return r&ve.Host?KT(i,t,r):QT(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ve.Optional))Xy(t);else return o}finally{UT()}}else if(typeof s=="number"){let o=null,a=WT(n,e),c=Uo,l=r&ve.Host?e[xn][sn]:null;for((a===-1||r&ve.SkipSelf)&&(c=a===-1?pv(n,e):e[a+8],c===Uo||!mC(r,!1)?a=-1:(o=e[Ee],a=yh(c),e=vh(c,e)));a!==-1;){let d=e[Ee];if(gC(s,a,d.data)){let f=$V(a,e,t,o,r,l);if(f!==lr)return f}c=e[a+8],c!==Uo&&mC(r,e[Ee].data[a+8]===l)&&gC(s,a,e)?(o=d,a=yh(c),e=vh(c,e)):a=-1}}return i}function $V(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],c=r==null?$h(a)&&ly:r!=o&&(a.type&3)!==0,l=i&ve.Host&&s===a,d=zV(a,o,t,c,l);return d!==null?Wo(e,o,d,a):lr}function zV(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let w=o[m];if(m<c&&t===w||m>=c&&w.type===t)return m}if(i){let m=o[c];if(m&&Ti(m)&&m.type===t)return c}return null}function Wo(n,e,t,r){let i=n[t],s=e.data;if(OV(i)){let o=i;o.resolving&&wF(vF(s[t]));let a=wh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?tn(o.injectImpl):null,d=FT(n,r,ve.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&NV(t,s[t],e)}finally{l!==null&&tn(l),wh(a),o.resolving=!1,UT()}}return i}function qV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Jc)?n[Jc]:void 0;return typeof e=="number"?e>=0?e&HT:HV:e}function gC(n,e,t){let r=1<<n;return!!(t[e+(n>>GT)]&r)}function mC(n,e){return!(n&ve.Self)&&!(n&ve.Host&&e)}var Ds=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return YT(this._tNode,this._lView,e,Vh(r),t)}};function HV(){return new Ds(vn(),xe())}function Gh(n){return cu(()=>{let e=n.prototype.constructor,t=e[ah]||hy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[ah]||hy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function hy(n){return qC(n)?()=>{let e=hy(Gt(n));return e&&e()}:Cs(n)}function GV(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[le]&2048&&!(o[le]&512);){let a=ZT(s,o,t,r|ve.Self,lr);if(a!==lr)return a;let c=s.parent;if(!c){let l=o[gT];if(l){let d=l.get(t,lr,r);if(d!==lr)return d}c=JT(o),o=o[ea]}s=c}return i}function JT(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[sn]:null}function yC(n,e=null,t=null,r){let i=XT(n,e,t,r);return i.resolveInjectorInitializers(),i}function XT(n,e=null,t=null,r,i=new Set){let s=[t||nn,QF(n)];return r=r||(typeof n=="object"?void 0:Wt(n)),new ru(s,e||iv(),r||null,i)}var Is=class Is{static create(e,t){if(Array.isArray(e))return yC({name:""},t,e,"");{let r=e.name??"";return yC({name:r},e.parent,e.providers,r)}}};Is.THROW_IF_NOT_FOUND=tu,Is.NULL=new lh,Is.\u0275prov=K({token:Is,providedIn:"any",factory:()=>L(XC)}),Is.__NG_ELEMENT_ID__=-1;var yn=Is;var WV=new H("");WV.__NG_ELEMENT_ID__=n=>{let e=vn();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&ve.Optional)return null;throw new re(204,!1)};var KV="ngOriginalError";function qm(n){return n[KV]}var eS=!0,gv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=QV,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),fy=class extends gv{constructor(e){super(),this._lView=e}onDestroy(e){return TT(this._lView,e),()=>mV(this._lView,e)}};function QV(){return new fy(xe())}var qr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new xt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var py=class extends Ne{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,pT()&&(this.destroyRef=U(gv,{optional:!0})??void 0,this.pendingTasks=U(qr,{optional:!0})??void 0)}emit(e){let t=Ae(null);try{super.next(e)}finally{Ae(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof st&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},et=py;function Eh(...n){}function tS(n){let e,t;function r(){n=Eh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function vC(n){return queueMicrotask(()=>n()),()=>{n=Eh}}var mv="isAngularZone",Ih=mv+"_ID",YV=0,_e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=eS}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,XV(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(mv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,ZV,Eh,Eh);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},ZV={};function yv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function JV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){tS(()=>{n.callbackScheduled=!1,gy(n),n.isCheckStableRunning=!0,yv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),gy(n)}function XV(n){let e=()=>{JV(n)},t=YV++;n._inner=n._inner.fork({name:"angular",properties:{[mv]:!0,[Ih]:t,[Ih+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(eL(c))return r.invokeTask(s,o,a,c);try{return wC(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),_C(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return wC(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!tL(c)&&e(),_C(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,gy(n),yv(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function gy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function _C(n){n._nesting--,yv(n)}var bh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function eL(n){return nS(n,"__ignore_ng_zone__")}function tL(n){return nS(n,"__scheduler_tick__")}function nS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function nL(n="zone.js",e){return n==="noop"?new bh:n==="zone.js"?new _e(e):n}var jr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&qm(e);for(;t&&qm(t);)t=qm(t);return t||null}},rL=new H("",{providedIn:"root",factory:()=>{let n=U(_e),e=U(jr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function iL(){return Wh(vn(),xe())}function Wh(n,e){return new gr(Kn(n,e))}var gr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=iL;let n=e;return n})();function rS(n){return(n.flags&128)===128}var iS=new Map,sL=0;function oL(){return sL++}function aL(n){iS.set(n[Bh],n)}function my(n){iS.delete(n[Bh])}var EC="__ngContext__";function Ms(n,e){bi(e)?(n[EC]=e[Bh],aL(e)):n[EC]=e}function sS(n){return aS(n[su])}function oS(n){return aS(n[Gn])}function aS(n){for(;n!==null&&!zr(n);)n=n[Gn];return n}var yy;function cS(n){yy=n}function cL(){if(yy!==void 0)return yy;if(typeof document<"u")return document;throw new re(210,!1)}var Kh=new H("",{providedIn:"root",factory:()=>uL}),uL="ng",vv=new H(""),Mt=new H("",{providedIn:"platform",factory:()=>"unknown"});var wv=new H("",{providedIn:"root",factory:()=>cL().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var lL="h",dL="b";var hL=()=>null;function _v(n,e,t=!1){return hL(n,e,t)}var uS=!1,fL=new H("",{providedIn:"root",factory:()=>uS});var Yd;function pL(){if(Yd===void 0&&(Yd=null,mn.trustedTypes))try{Yd=mn.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Yd}function Qh(n){return pL()?.createHTML(n)||n}var Zd;function gL(){if(Zd===void 0&&(Zd=null,mn.trustedTypes))try{Zd=mn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zd}function IC(n){return gL()?.createScriptURL(n)||n}var Ur=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$C})`}},vy=class extends Ur{getTypeName(){return"HTML"}},wy=class extends Ur{getTypeName(){return"Style"}},_y=class extends Ur{getTypeName(){return"Script"}},Ey=class extends Ur{getTypeName(){return"URL"}},Iy=class extends Ur{getTypeName(){return"ResourceURL"}};function Qn(n){return n instanceof Ur?n.changingThisBreaksApplicationSecurity:n}function Ni(n,e){let t=mL(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${$C})`)}return t===e}function mL(n){return n instanceof Ur&&n.getTypeName()||null}function lS(n){return new vy(n)}function dS(n){return new wy(n)}function hS(n){return new _y(n)}function fS(n){return new Ey(n)}function pS(n){return new Iy(n)}function yL(n){let e=new Dy(n);return vL()?new by(e):e}var by=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Qh(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Dy=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Qh(e),t}};function vL(){try{return!!new window.DOMParser().parseFromString(Qh(""),"text/html")}catch{return!1}}var wL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Yh(n){return n=String(n),n.match(wL)?n:"unsafe:"+n}function Hr(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function du(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var gS=Hr("area,br,col,hr,img,wbr"),mS=Hr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),yS=Hr("rp,rt"),_L=du(yS,mS),EL=du(mS,Hr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),IL=du(yS,Hr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),bC=du(gS,EL,IL,_L),vS=Hr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bL=Hr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),DL=Hr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),CL=du(vS,bL,DL),TL=Hr("script,style,template"),Cy=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=xL(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=AL(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=DC(e).toLowerCase();if(!bC.hasOwnProperty(t))return this.sanitizedSomething=!0,!TL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!CL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;vS[a]&&(c=Yh(c)),this.buf.push(" ",o,'="',CC(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=DC(e).toLowerCase();bC.hasOwnProperty(t)&&!gS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(CC(e))}};function SL(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function AL(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw wS(e);return e}function xL(n){let e=n.firstChild;if(e&&SL(n,e))throw wS(e);return e}function DC(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function wS(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var ML=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,RL=/([^\#-~ |!])/g;function CC(n){return n.replace(/&/g,"&amp;").replace(ML,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(RL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Jd;function _S(n,e){let t=null;try{Jd=Jd||yL(n);let r=e?String(e):"";t=Jd.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Jd.getInertBodyElement(r)}while(r!==s);let a=new Cy().sanitizeChildren(TC(t)||t);return Qh(a)}finally{if(t){let r=TC(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function TC(n){return"content"in n&&kL(n)?n.content:null}function kL(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var an=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(an||{});function It(n){let e=IS();return e?e.sanitize(an.URL,n)||"":Ni(n,"URL")?Qn(n):Yh(eu(n))}function ES(n){let e=IS();if(e)return IC(e.sanitize(an.RESOURCE_URL,n)||"");if(Ni(n,"ResourceURL"))return IC(Qn(n));throw new re(904,!1)}function IS(){let n=xe();return n&&n[hr].sanitizer}function bS(n){return n instanceof Function?n():n}function NL(n){return(n??U(yn)).get(Mt)==="browser"}var Br=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Br||{}),PL;function Ev(n,e){return PL(n,e)}function Vo(n,e,t,r,i){if(r!=null){let s,o=!1;zr(r)?s=r:bi(r)&&(o=!0,r=r[$r]);let a=fr(r);n===0&&t!==null?i==null?xS(e,t,a):Dh(e,t,a,i||null,!0):n===1&&t!==null?Dh(e,t,a,i||null,!0):n===2?WL(e,a,o):n===3&&e.destroyNode(a),s!=null&&QL(e,n,s,t,i)}}function OL(n,e){return n.createText(e)}function FL(n,e,t){n.setValue(e,t)}function DS(n,e,t){return n.createElement(e,t)}function VL(n,e){CS(n,e),e[$r]=null,e[sn]=null}function LL(n,e,t,r,i,s){r[$r]=i,r[sn]=e,Zh(n,r,t,1,i,s)}function CS(n,e){e[hr].changeDetectionScheduler?.notify(9),Zh(n,e,e[Et],2,null,null)}function jL(n){let e=n[su];if(!e)return Hm(n[Ee],n);for(;e;){let t=null;if(bi(e))t=e[su];else{let r=e[An];r&&(t=r)}if(!t){for(;e&&!e[Gn]&&e!==n;)bi(e)&&Hm(e[Ee],e),e=e[Qt];e===null&&(e=n),bi(e)&&Hm(e[Ee],e),t=e&&e[Gn]}e=t}}function UL(n,e,t,r){let i=An+r,s=t.length;r>0&&(t[i-1][Gn]=e),r<s-An?(e[Gn]=t[i],JC(t,An+r,e)):(t.push(e),e[Gn]=null),e[Qt]=t;let o=e[Ho];o!==null&&t!==o&&TS(o,e);let a=e[Go];a!==null&&a.insertView(n),ay(e),e[le]|=128}function TS(n,e){let t=n[ph],r=e[Qt];if(bi(r))n[le]|=gh.HasTransplantedViews;else{let i=r[Qt][xn];e[xn]!==i&&(n[le]|=gh.HasTransplantedViews)}t===null?n[ph]=[e]:t.push(e)}function Iv(n,e){let t=n[ph],r=t.indexOf(e);t.splice(r,1)}function Ty(n,e){if(n.length<=An)return;let t=An+e,r=n[t];if(r){let i=r[Ho];i!==null&&i!==n&&Iv(i,r),e>0&&(n[t-1][Gn]=r[Gn]);let s=uh(n,An+e);VL(r[Ee],r);let o=s[Go];o!==null&&o.detachView(s[Ee]),r[Qt]=null,r[Gn]=null,r[le]&=-129}return r}function SS(n,e){if(!(e[le]&256)){let t=e[Et];t.destroyNode&&Zh(n,e,t,3,null,null),jL(e)}}function Hm(n,e){if(e[le]&256)return;let t=Ae(null);try{e[le]&=-129,e[le]|=256,e[Sn]&&wm(e[Sn]),$L(n,e),BL(n,e),e[Ee].type===1&&e[Et].destroy();let r=e[Ho];if(r!==null&&zr(e[Qt])){r!==e[Qt]&&Iv(r,e);let i=e[Go];i!==null&&i.detachView(n)}my(e)}finally{Ae(t)}}function BL(n,e){let t=n.cleanup,r=e[hh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[hh]=null);let i=e[Ii];if(i!==null){e[Ii]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function $L(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof xs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];ur(4,a,c);try{c.call(a)}finally{ur(5,a,c)}}else{ur(4,i,s);try{s.call(i)}finally{ur(5,i,s)}}}}}function AS(n,e,t){return zL(n,e.parent,t)}function zL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[$r];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===dr.None||s===dr.Emulated)return null}return Kn(r,t)}}function Dh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function xS(n,e,t){n.appendChild(e,t)}function SC(n,e,t,r,i){r!==null?Dh(n,e,t,r,i):xS(n,e,t)}function MS(n,e){return n.parentNode(e)}function qL(n,e){return n.nextSibling(e)}function RS(n,e,t){return GL(n,e,t)}function HL(n,e,t){return n.type&40?Kn(n,t):null}var GL=HL,AC;function bv(n,e,t,r){let i=AS(n,r,e),s=e[Et],o=r.parent||e[sn],a=RS(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)SC(s,i,t[c],a,!1);else SC(s,i,t,a,!1);AC!==void 0&&AC(s,r,e,t,i)}function Zc(n,e){if(e!==null){let t=e.type;if(t&3)return Kn(e,n);if(t&4)return Sy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Zc(n,r);{let i=n[e.index];return zr(i)?Sy(-1,i):fr(i)}}else{if(t&128)return Zc(n,e.next);if(t&32)return Ev(e,n)()||fr(n[e.index]);{let r=kS(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ss(n[xn]);return Zc(i,r)}else return Zc(n,e.next)}}}return null}function kS(n,e){if(e!==null){let r=n[xn][sn],i=e.projection;return r.projection[i]}return null}function Sy(n,e){let t=An+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return Zc(r,i)}return e[Ts]}function WL(n,e,t){n.removeChild(null,e,t)}function Dv(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Ms(fr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Dv(n,e,t.child,r,i,s,!1),Vo(e,n,i,a,s);else if(c&32){let l=Ev(t,r),d;for(;d=l();)Vo(e,n,i,d,s);Vo(e,n,i,a,s)}else c&16?NS(n,e,r,t,i,s):Vo(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Zh(n,e,t,r,i,s){Dv(t,r,n.firstChild,e,i,s,!1)}function KL(n,e,t){let r=e[Et],i=AS(n,t,e),s=t.parent||e[sn],o=RS(s,t,e);NS(r,0,e,t,i,o)}function NS(n,e,t,r,i,s){let o=t[xn],c=o[sn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Vo(e,n,i,d,s)}else{let l=c,d=o[Qt];rS(r)&&(l.flags|=128),Dv(n,e,l,d,i,s,!0)}}function QL(n,e,t,r,i){let s=t[Ts],o=fr(t);s!==o&&Vo(e,n,r,s,i);for(let a=An;a<t.length;a++){let c=t[a];Zh(c[Ee],c,n,e,r,s)}}function YL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Br.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Br.Important),n.setStyle(t,r,i,s))}}function ZL(n,e,t){n.setAttribute(e,"style",t)}function PS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function OS(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&ty(n,e,r),i!==null&&PS(n,e,i),s!==null&&ZL(n,e,s)}var Rn={};function q(n=1){FS(on(),xe(),ki()+n,!1)}function FS(n,e,t,r){if(!r)if((e[le]&3)===3){let s=n.preOrderCheckHooks;s!==null&&ih(e,s,t)}else{let s=n.preOrderHooks;s!==null&&sh(e,s,0,t)}As(t)}function ee(n,e=ve.Default){let t=xe();if(t===null)return L(n,e);let r=vn();return YT(r,t,Gt(n),e)}function VS(){let n="invalid";throw new Error(n)}function LS(n,e,t,r,i,s){let o=Ae(null);try{let a=null;i&Di.SignalBased&&(a=e[r][mi]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Di.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):vT(e,a,r,s)}finally{Ae(o)}}function JL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)As(~i);else{let s=i,o=t[++r],a=t[++r];SV(o,s);let c=e[s];a(2,c)}}}finally{As(-1)}}function Jh(n,e,t,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[$r]=i,f[le]=r|4|128|8|64,(l!==null||n&&n[le]&2048)&&(f[le]|=2048),DT(f),f[Qt]=f[ea]=n,f[Wn]=t,f[hr]=o||n&&n[hr],f[Et]=a||n&&n[Et],f[qo]=c||n&&n[qo]||null,f[sn]=s,f[Bh]=oL(),f[iu]=d,f[gT]=l,f[xn]=e.type==2?n[xn]:f,f}function hu(n,e,t,r,i){let s=n.data[e];if(s===null)s=XL(n,e,t,r,i),TV()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=IV();s.injectorIndex=o===null?-1:o.injectorIndex}return lu(s,!0),s}function XL(n,e,t,r,i){let s=MT(),o=RT(),a=o?s:s&&s.parent,c=n.data[e]=ij(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function jS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function US(n,e,t,r,i){let s=ki(),o=r&2;try{As(-1),o&&e.length>rn&&FS(n,e,rn,!1),ur(o?2:0,i),t(r,i)}finally{As(s),ur(o?3:1,i)}}function BS(n,e,t){if(yT(e)){let r=Ae(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ae(r)}}}function $S(n,e,t){AT()&&(lj(n,e,t,Kn(t,e)),(t.flags&64)===64&&KS(n,e,t))}function zS(n,e,t=Kn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function qS(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Cv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Cv(n,e,t,r,i,s,o,a,c,l,d){let f=rn+r,g=f+i,m=ej(f,g),w=typeof l=="function"?l():l;return m[Ee]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function ej(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Rn);return t}function tj(n,e,t,r){let s=r.get(fL,uS)||t===dr.ShadowDom,o=n.selectRootElement(e,s);return nj(o),o}function nj(n){rj(n)}var rj=()=>null;function ij(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return xT()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function xC(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Di.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?MC(r,t,l,a,c):MC(r,t,l,a)}return r}function MC(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function sj(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,m=g?g.inputs:null,w=g?g.outputs:null;c=xC(0,f.inputs,d,c,m),l=xC(1,f.outputs,d,l,w);let D=c!==null&&o!==null&&!nv(e)?wj(c,d,o):null;a.push(D)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function oj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HS(n,e,t,r,i,s,o,a){let c=Kn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Tv(n,t,d,r,i),$h(e)&&aj(t,e.index)):e.type&3?(r=oj(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function aj(n,e){let t=xi(e,n);t[le]&16||(t[le]|=64)}function GS(n,e,t,r){if(AT()){let i=r===null?null:{"":-1},s=hj(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&WS(n,e,t,o,i,a),i&&fj(t,r,i)}t.mergedAttrs=nu(t.mergedAttrs,t.attrs)}function WS(n,e,t,r,i,s){for(let l=0;l<r.length;l++)dy(_h(t,e),n,r[l].type);gj(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=jS(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=nu(t.mergedAttrs,d.hostAttrs),mj(n,t,e,c,d),pj(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}sj(n,t,s)}function cj(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;uj(o)!=a&&o.push(a),o.push(t,r,s)}}function uj(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function lj(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;$h(t)&&yj(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||_h(t,e),Ms(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Wo(e,n,a,t);if(Ms(l,e),o!==null&&vj(e,a-i,l,c,t,o),Ti(c)){let d=xi(t.index,e);d[Wn]=Wo(e,n,a,t)}}}function KS(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=AV();try{As(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];cy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&dj(c,l)}}finally{As(-1),cy(o)}}function dj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function hj(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(rT(e,o.selectors,!1))if(r||(r=[]),Ti(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Ay(n,e,c)}else r.unshift(o),Ay(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ay(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function fj(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new re(-301,!1);r.push(e[i],s)}}}function pj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ti(e)&&(t[""]=n)}}function gj(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function mj(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Cs(i.type,!0)),o=new xs(s,Ti(i),ee);n.blueprint[r]=o,t[r]=o,cj(n,e,r,jS(n,t,i.hostVars,Rn),i)}function yj(n,e,t){let r=Kn(e,n),i=qS(t),s=n[hr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Xh(n,Jh(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function vj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];LS(r,t,c,l,d,f)}}function wj(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function QS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function YS(n,e){let t=n.contentQueries;if(t!==null){let r=Ae(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];OT(s),a.contentQueries(2,e[o],o)}}}finally{Ae(r)}}}function Xh(n,e){return n[su]?n[dC][Gn]=e:n[su]=e,n[dC]=e,e}function xy(n,e,t){OT(0);let r=Ae(null);try{e(n,t)}finally{Ae(r)}}function _j(n){return n[hh]??=[]}function Ej(n){return n.cleanup??=[]}function ZS(n,e){let t=n[qo],r=t?t.get(jr,null):null;r&&r.handleError(e)}function Tv(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];LS(d,l,r,a,c,i)}}function JS(n,e,t){let r=IT(e,n);FL(n[Et],r,t)}function Ij(n,e){let t=xi(e,n),r=t[Ee];bj(r,t);let i=t[$r];i!==null&&t[iu]===null&&(t[iu]=_v(i,t[qo])),Sv(r,t,t[Wn])}function bj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Sv(n,e,t){uv(e);try{let r=n.viewQuery;r!==null&&xy(1,r,t);let i=n.template;i!==null&&US(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Go]?.finishViewCreation(n),n.staticContentQueries&&YS(n,e),n.staticViewQueries&&xy(2,n.viewQuery,t);let s=n.components;s!==null&&Dj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[le]&=-5,lv()}}function Dj(n,e){for(let t=0;t<e.length;t++)Ij(n,e[t])}function XS(n,e,t,r){let i=Ae(null);try{let s=e.tView,a=n[le]&4096?4096:16,c=Jh(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Ho]=l;let d=n[Go];return d!==null&&(c[Go]=d.createEmbeddedView(s)),Sv(s,c,t),c}finally{Ae(i)}}function My(n,e){return!e||e.firstChild===null||rS(n)}function eA(n,e,t,r=!0){let i=e[Ee];if(UL(i,e,n,t),r){let o=Sy(t,n),a=e[Et],c=MS(a,n[Ts]);c!==null&&LL(i,n[sn],a,e,c,o)}let s=e[iu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Ch(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(fr(s)),zr(s)&&Cj(s,r);let o=t.type;if(o&8)Ch(n,e,t.child,r);else if(o&32){let a=Ev(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=kS(e,t);if(Array.isArray(a))r.push(...a);else{let c=Ss(e[xn]);Ch(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Cj(n,e){for(let t=An;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&Ch(r[Ee],r,i,e)}n[Ts]!==n[$r]&&e.push(n[Ts])}var tA=[];function Tj(n){return n[Sn]??Sj(n)}function Sj(n){let e=tA.pop()??Object.create(xj);return e.lView=n,e}function Aj(n){n.lView[Sn]!==n&&(n.lView=null,tA.push(n))}var xj=te(M({},Bc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{qh(n.lView)},consumerOnSignalRead(){this.lView[Sn]=this}});function Mj(n){let e=n[Sn]??Object.create(Rj);return e.lView=n,e}var Rj=te(M({},Bc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Ss(n.lView);for(;e&&!nA(e[Ee]);)e=Ss(e);e&&CT(e)},consumerOnSignalRead(){this.lView[Sn]=this}});function nA(n){return n.type!==2}var kj=100;function rA(n,e=!0,t=0){let r=n[hr],i=r.rendererFactory,s=!1;s||i.begin?.();try{Nj(n,t)}catch(o){throw e&&ZS(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Nj(n,e){let t=NT();try{fC(!0),Ry(n,e);let r=0;for(;zh(n);){if(r===kj)throw new re(103,!1);r++,Ry(n,1)}}finally{fC(t)}}function Pj(n,e,t,r){let i=e[le];if((i&256)===256)return;let s=!1,o=!1;!s&&e[hr].inlineEffectRunner?.flush(),uv(e);let a=!0,c=null,l=null;s||(nA(n)?(l=Tj(e),c=wd(l)):ID()===null?(a=!1,l=Mj(e),c=wd(l)):e[Sn]&&(wm(e[Sn]),e[Sn]=null));try{DT(e),CV(n.bindingStartIndex),t!==null&&US(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&ih(e,m,null)}else{let m=n.preOrderHooks;m!==null&&sh(e,m,0,null),Bm(e,0)}if(o||Oj(e),iA(e,0),n.contentQueries!==null&&YS(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&ih(e,m)}else{let m=n.contentHooks;m!==null&&sh(e,m,1),Bm(e,1)}JL(n,e);let f=n.components;f!==null&&oA(e,f,0);let g=n.viewQuery;if(g!==null&&xy(2,g,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&ih(e,m)}else{let m=n.viewHooks;m!==null&&sh(e,m,2),Bm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Um]){for(let m of e[Um])m();e[Um]=null}s||(e[le]&=-73)}catch(d){throw s||qh(e),d}finally{l!==null&&(ym(l,c),a&&Aj(l)),lv()}}function iA(n,e){for(let t=sS(n);t!==null;t=oS(t))for(let r=An;r<t.length;r++){let i=t[r];sA(i,e)}}function Oj(n){for(let e=sS(n);e!==null;e=oS(e)){if(!(e[le]&gh.HasTransplantedViews))continue;let t=e[ph];for(let r=0;r<t.length;r++){let i=t[r];CT(i)}}}function Fj(n,e,t){let r=xi(e,n);sA(r,t)}function sA(n,e){av(n)&&Ry(n,e)}function Ry(n,e){let r=n[Ee],i=n[le],s=n[Sn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&vm(s)),o||=!1,s&&(s.dirty=!1),n[le]&=-9217,o)Pj(r,n,r.template,n[Wn]);else if(i&8192){iA(n,1);let a=r.components;a!==null&&oA(n,a,1)}}function oA(n,e,t){for(let r=0;r<e.length;r++)Fj(n,e[r],t)}function Av(n,e){let t=NT()?64:1088;for(n[hr].changeDetectionScheduler?.notify(e);n;){n[le]|=t;let r=Ss(n);if(sy(n)&&!r)return n;n=r}return null}var Rs=class{get rootNodes(){let e=this._lView,t=e[Ee];return Ch(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(e){this._lView[Wn]=e}get destroyed(){return(this._lView[le]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qt];if(zr(e)){let t=e[fh],r=t?t.indexOf(this):-1;r>-1&&(Ty(e,r),uh(t,r))}this._attachedToViewContainer=!1}SS(this._lView[Ee],this._lView)}onDestroy(e){TT(this._lView,e)}markForCheck(){Av(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){ay(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,rA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=sy(this._lView),t=this._lView[Ho];t!==null&&!e&&Iv(t,this._lView),CS(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=sy(this._lView),r=this._lView[Ho];r!==null&&!t&&TS(r,this._lView),ay(this._lView)}},ef=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=jj;let n=e;return n})(),Vj=ef,Lj=class extends Vj{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=XS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Rs(i)}};function jj(){return aA(vn(),xe())}function aA(n,e){return n.type&4?new Lj(e,n,Wh(n,e)):null}var GQ=new RegExp(`^(\\d+)*(${dL}|${lL})*(.*)`);var Uj=()=>null;function ky(n,e){return Uj(n,e)}var Ko=class{},cA=new H("",{providedIn:"root",factory:()=>!1});var uA=new H(""),lA=new H(""),Ny=class{},Th=class{};function Bj(n){let e=Error(`No component factory found for ${Wt(n)}.`);return e[$j]=n,e}var $j="ngComponent";var Py=class{resolveComponentFactory(e){throw Bj(e)}},qv=class qv{};qv.NULL=new Py;var Qo=qv,Yo=class{},Os=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>zj();let n=e;return n})();function zj(){let n=xe(),e=vn(),t=xi(e.index,n);return(bi(t)?t:n)[Et]}var qj=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();function Oy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Zm(i,a);else if(s==2){let c=a,l=e[++o];r=Zm(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Sh=class extends Qo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ci(e);return new Zo(t,this.ngModule)}};function RC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Di.None;e?t.push({propName:o,templateName:r,isSignal:(a&Di.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function Hj(n){let e=n.toLowerCase();return e==="svg"?hV:e==="math"?fV:null}var Zo=class extends Th{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=RC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return RC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=qF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ae(null);try{i=i||this.ngModule;let o=i instanceof Kt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new uy(e,o):e,c=a.get(Yo,null);if(c===null)throw new re(407,!1);let l=a.get(qj,null),d=a.get(Ko,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",w=r?tj(g,r,this.componentDef.encapsulation,a):DS(g,m,Hj(m)),D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let C=null;w!==null&&(C=_v(w,a,!0));let P=Cv(0,null,null,1,0,null,null,null,null,null,null),O=Jh(null,P,null,D,null,null,f,g,a,null,C);uv(O);let F,B,J=null;try{let G=this.componentDef,I,v=null;G.findHostDirectiveDefs?(I=[],v=new Map,G.findHostDirectiveDefs(G,I,v),I.push(G)):I=[G];let _=Gj(O,w);J=Wj(_,w,G,I,O,f,g),B=bT(P,rn),w&&Yj(g,G,w,r),t!==void 0&&Zj(B,this.ngContentSelectors,t),F=Qj(J,G,I,v,O,[Jj]),Sv(P,O,null)}catch(G){throw J!==null&&my(J),my(O),G}finally{lv()}return new Fy(this.componentType,F,Wh(B,O),O,B)}finally{Ae(s)}}},Fy=class extends Ny{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Rs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Tv(s[Ee],s,i,e,t),this.previousInputValues.set(e,t);let o=xi(this._tNode.index,s);Av(o,1)}}get injector(){return new Ds(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Gj(n,e){let t=n[Ee],r=rn;return n[r]=e,hu(t,r,2,"#host",null)}function Wj(n,e,t,r,i,s,o){let a=i[Ee];Kj(r,n,e,o);let c=null;e!==null&&(c=_v(e,i[qo]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Jh(i,qS(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Ay(a,n,r.length-1),Xh(i,f),i[n.index]=f}function Kj(n,e,t,r){for(let i of n)e.mergedAttrs=nu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Oy(e,e.mergedAttrs,!0),t!==null&&OS(r,t,e))}function Qj(n,e,t,r,i,s){let o=vn(),a=i[Ee],c=Kn(o,i);WS(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=Wo(i,a,f,o);Ms(g,i)}KS(a,i,o),c&&Ms(c,i);let l=Wo(i,a,o.directiveStart+o.componentOffset,o);if(n[Wn]=i[Wn]=l,s!==null)for(let d of s)d(l,e);return BS(a,o,i),l}function Yj(n,e,t,r){if(r)ty(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=HF(e.selectors[0]);i&&ty(n,t,i),s&&s.length>0&&PS(n,t,s.join(" "))}}function Zj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function Jj(){let n=vn();fv(xe()[Ee],n)}var kn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Xj;let n=e;return n})();function Xj(){let n=vn();return t2(n,xe())}var e2=kn,dA=class extends e2{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Wh(this._hostTNode,this._hostLView)}get injector(){return new Ds(this._hostTNode,this._hostLView)}get parentInjector(){let e=pv(this._hostTNode,this._hostLView);if(qT(e)){let t=vh(e,this._hostLView),r=yh(e),i=t[Ee].data[r+8];return new Ds(i,t)}else return new Ds(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=kC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-An}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=ky(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,My(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!cV(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new Zo(Ci(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let D=(o?l:this.parentInjector).get(Kt,null);D&&(s=D)}let d=Ci(c.componentType??{}),f=ky(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(l,i,g,s);return this.insertImpl(m.hostView,a,My(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(pV(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Qt],l=new dA(c,c[sn],c[Qt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return eA(o,i,s,r),e.attachToViewContainerRef(),JC(Gm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=kC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Ty(this._lContainer,t);r&&(uh(Gm(this._lContainer),t),SS(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=Ty(this._lContainer,t);return r&&uh(Gm(this._lContainer),t)!=null?new Rs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function kC(n){return n[fh]}function Gm(n){return n[fh]||(n[fh]=[])}function t2(n,e){let t,r=e[n.index];return zr(r)?t=r:(t=QS(r,e,null,n),e[n.index]=t,Xh(e,t)),r2(t,e,n,r),new dA(t,n,e)}function n2(n,e){let t=n[Et],r=t.createComment(""),i=Kn(e,n),s=MS(t,i);return Dh(t,s,r,qL(t,i),!1),r}var r2=o2,i2=()=>!1;function s2(n,e,t){return i2(n,e,t)}function o2(n,e,t,r){if(n[Ts])return;let i;t.type&8?i=fr(r):i=n2(e,t),n[Ts]=i}var NC=new Set;function ta(n){NC.has(n)||(NC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function fu(n,e){ta("NgSignals");let t=ND(n),r=t[mi];return e?.equal&&(r.equal=e.equal),t.set=i=>_m(r,i),t.update=i=>PD(r,i),t.asReadonly=a2.bind(t),t}function a2(){let n=this[mi];if(n.readonlyFn===void 0){let e=()=>this();e[mi]=n,n.readonlyFn=e}return n.readonlyFn}function c2(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(h2))}return s}return Ah.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),o.push(r(f).then(m=>{a[l+g]=m,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>f2(s));e.push(c)}),l2(),Promise.all(e).then(()=>{})}var Ah=new Map,u2=new Set;function l2(){let n=Ah;return Ah=new Map,n}function d2(){return Ah.size===0}function h2(n){return typeof n=="string"?n:n.text()}function f2(n){u2.delete(n)}function p2(n){return Object.getPrototypeOf(n.prototype).constructor}function cn(n){let e=p2(n.type),t=!0,r=[n];for(;e;){let i;if(Ti(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Xd(n.inputs),o.inputTransforms=Xd(n.inputTransforms),o.declaredInputs=Xd(n.declaredInputs),o.outputs=Xd(n.outputs);let a=i.hostBindings;a&&w2(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&y2(n,c),l&&v2(n,l),g2(n,i),lF(n.outputs,i.outputs),Ti(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===cn&&(t=!1)}}e=Object.getPrototypeOf(e)}m2(r)}function g2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function m2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=nu(i.hostAttrs,t=nu(t,i.hostAttrs))}}function Xd(n){return n===Bo?{}:n===nn?[]:n}function y2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function v2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function w2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Si=class{},ou=class{};var xh=class extends Si{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Sh(this);let s=aT(e);this._bootstrapComponents=bS(s.bootstrap),this._r3Injector=XT(e,t,[{provide:Si,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver},...r],Wt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Mh=class extends ou{constructor(e){super(),this.moduleType=e}create(e){return new xh(this.moduleType,e,[])}};function _2(n,e,t){return new xh(n,e,t,!1)}var Vy=class extends Si{constructor(e){super(),this.componentFactoryResolver=new Sh(this),this.instance=null;let t=new ru([...e.providers,{provide:Si,useValue:this},{provide:Qo,useValue:this.componentFactoryResolver}],e.parent||iv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function tf(n,e,t=null){return new Vy({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function hA(n){return xv(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function E2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function xv(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Mv(n,e,t){return n[e]=t}function Ai(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Rv(n,e,t,r){let i=Ai(n,e,t);return Ai(n,e+1,r)||i}function I2(n,e,t,r,i){let s=Rv(n,e,t,r);return Ai(n,e+2,i)||s}function b2(n){return(n.flags&32)===32}function D2(n,e,t,r,i,s,o,a,c){let l=e.consts,d=hu(e,n,4,o||null,a||null);GS(e,t,d,mh(l,c)),fv(e,d);let f=d.tView=Cv(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function fA(n,e,t,r,i,s,o,a,c,l){let d=t+rn,f=e.firstCreatePass?D2(d,e,n,r,i,s,o,a,c):e.data[d];lu(f,!1);let g=C2(e,n,f,t);dv()&&bv(e,n,g,f),Ms(g,n);let m=QS(g,n,g,f);return n[d]=m,Xh(n,m),s2(m,f,n),sv(f)&&$S(e,n,f),c!=null&&zS(n,f,l),f}function Ye(n,e,t,r,i,s,o,a){let c=xe(),l=on(),d=mh(l.consts,s);return fA(c,l,n,e,t,r,i,d,o,a),Ye}var C2=T2;function T2(n,e,t,r){return hv(!0),e[Et].createComment("")}var Lo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Lo||{}),pA=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})(),bs=class bs{constructor(){this.ngZone=U(_e),this.scheduler=U(Ko),this.errorHandler=U(jr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of bs.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};bs.PHASES=[Lo.EarlyRead,Lo.Write,Lo.MixedReadWrite,Lo.Read],bs.\u0275prov=K({token:bs,providedIn:"root",factory:()=>new bs});var Ly=bs,jy=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function kv(n,e){!e?.injector&&oV(kv);let t=e?.injector??U(yn);return NL(t)?(ta("NgAfterNextRender"),A2(n,t,e,!0)):x2}function S2(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function A2(n,e,t,r){let i=e.get(pA);i.impl??=e.get(Ly);let s=t?.phase??Lo.MixedReadWrite,o=new jy(i.impl,S2(n,s),r,e.get(gv));return i.impl.register(o),o}var x2={destroy(){}};function Nv(n,e,t,r){return Ai(n,PT(),t)?e+eu(t)+r:Rn}function M2(n,e,t,r,i,s){let o=DV(),a=Rv(n,o,t,i);return cv(2),a?e+eu(t)+r+eu(i)+s:Rn}function eh(n,e){return n<<17|e<<2}function ks(n){return n>>17&32767}function R2(n){return(n&2)==2}function k2(n,e){return n&131071|e<<17}function Uy(n){return n|2}function Jo(n){return(n&131068)>>2}function Wm(n,e){return n&-131069|e<<2}function N2(n){return(n&1)===1}function By(n){return n|1}function P2(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ks(o),c=Jo(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||uu(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=ks(n[a+1]);n[r+1]=eh(g,a),g!==0&&(n[g+1]=Wm(n[g+1],r)),n[a+1]=k2(n[a+1],r)}else n[r+1]=eh(a,0),a!==0&&(n[a+1]=Wm(n[a+1],r)),a=r;else n[r+1]=eh(c,0),a===0?a=r:n[c+1]=Wm(n[c+1],r),c=r;l&&(n[r+1]=Uy(n[r+1])),PC(n,d,r,!0),PC(n,d,r,!1),O2(e,d,n,r,s),o=eh(a,c),s?e.classBindings=o:e.styleBindings=o}function O2(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&uu(s,e)>=0&&(t[r+1]=By(t[r+1]))}function PC(n,e,t,r){let i=n[t+1],s=e===null,o=r?ks(i):Jo(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];F2(c,e)&&(a=!0,n[o+1]=r?By(l):Uy(l)),o=r?ks(l):Jo(l)}a&&(n[t+1]=r?Uy(i):By(i))}function F2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?uu(n,e)>=0:!1}var Hn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function V2(n){return n.substring(Hn.key,Hn.keyEnd)}function L2(n){return j2(n),gA(n,mA(n,0,Hn.textEnd))}function gA(n,e){let t=Hn.textEnd;return t===e?-1:(e=Hn.keyEnd=U2(n,Hn.key=e,t),mA(n,e,t))}function j2(n){Hn.key=0,Hn.keyEnd=0,Hn.value=0,Hn.valueEnd=0,Hn.textEnd=n.length}function mA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function U2(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ce(n,e,t){let r=xe(),i=PT();if(Ai(r,i,e)){let s=on(),o=BT();HS(s,o,r,n,e,r[Et],t,!1)}return ce}function $y(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Tv(n,t,s[o],o,r)}function na(n,e,t){return yA(n,e,t,!1),na}function pu(n,e){return yA(n,e,null,!0),pu}function B2(n,e){for(let t=L2(e);t>=0;t=gA(e,t))tv(n,V2(e),!0)}function yA(n,e,t,r){let i=xe(),s=on(),o=cv(2);if(s.firstUpdatePass&&wA(s,n,o,r),e!==Rn&&Ai(i,o,e)){let a=s.data[ki()];_A(s,a,i,i[Et],n,i[o+1]=Q2(e,t),r,o)}}function $2(n,e,t,r){let i=on(),s=cv(2);i.firstUpdatePass&&wA(i,null,s,r);let o=xe();if(t!==Rn&&Ai(o,s,t)){let a=i.data[ki()];if(EA(a,r)&&!vA(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Zm(c,t||"")),$y(i,a,o,t,r)}else K2(i,a,o,o[Et],o[s+1],o[s+1]=W2(n,e,t),r,s)}}function vA(n,e){return e>=n.expandoStartIndex}function wA(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ki()],o=vA(n,t);EA(s,r)&&e===null&&!o&&(e=!1),e=z2(i,s,e,r),P2(i,s,e,t,o,r)}}function z2(n,e,t,r){let i=xV(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Km(null,n,e,t,r),t=au(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Km(i,n,e,t,r),s===null){let c=q2(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Km(null,n,e,c[1],r),c=au(c,e.attrs,r),H2(n,e,r,c))}else s=G2(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function q2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Jo(r)!==0)return n[ks(r)]}function H2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ks(i)]=r}function G2(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=au(r,o,t)}return au(r,e.attrs,t)}function Km(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=au(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function au(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),tv(n,o,t?!0:e[++s]))}return n===void 0?null:n}function W2(n,e,t){if(t==null||t==="")return nn;let r=[],i=Qn(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function K2(n,e,t,r,i,s,o,a){i===Rn&&(i=nn);let c=0,l=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,m=l<s.length?s[l+1]:void 0,w=null,D;d===f?(c+=2,l+=2,g!==m&&(w=f,D=m)):f===null||d!==null&&d<f?(c+=2,w=d):(l+=2,w=f,D=m),w!==null&&_A(n,e,t,r,w,D,o,a),d=c<i.length?i[c]:null,f=l<s.length?s[l]:null}}function _A(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=N2(l)?OC(c,e,t,i,Jo(l),o):void 0;if(!Rh(d)){Rh(s)||R2(l)&&(s=OC(c,null,t,i,a,o));let f=IT(ki(),t);YL(r,o,f,i,s)}}function OC(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Rn&&(g=f?nn:void 0);let m=f?Lm(g,r):d===r?g:void 0;if(l&&!Rh(m)&&(m=Lm(c,r)),Rh(m)&&(a=m,o))return a;let w=n[i+1];i=o?ks(w):Jo(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Lm(c,r))}return a}function Rh(n){return n!==void 0}function Q2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Wt(Qn(n)))),n}function EA(n,e){return(n.flags&(e?8:16))!==0}function nf(n,e,t){let r=xe(),i=Nv(r,n,e,t);$2(tv,B2,i,!0)}function Y2(n,e,t,r,i,s){let o=e.consts,a=mh(o,i),c=hu(e,n,2,r,a);return GS(e,t,c,mh(o,s)),c.attrs!==null&&Oy(c,c.attrs,!1),c.mergedAttrs!==null&&Oy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function $(n,e,t,r){let i=xe(),s=on(),o=rn+n,a=i[Et],c=s.firstCreatePass?Y2(o,s,i,e,t,r):s.data[o],l=Z2(s,i,c,a,e,n);i[o]=l;let d=sv(c);return lu(c,!0),OS(a,l,c),!b2(c)&&dv()&&bv(s,i,l,c),yV()===0&&Ms(l,i),vV(),d&&($S(s,i,c),BS(s,c,i)),r!==null&&zS(i,c),$}function z(){let n=vn();RT()?kT():(n=n.parent,lu(n,!1));let e=n;_V(e)&&EV(),wV();let t=on();return t.firstCreatePass&&(fv(t,n),yT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&FV(e)&&$y(t,e,xe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&VV(e)&&$y(t,e,xe(),e.stylesWithoutHost,!1),z}function Ie(n,e,t,r){return $(n,e,t,r),z(),Ie}var Z2=(n,e,t,r,i,s)=>(hv(!0),DS(r,i,kV()));function ra(){return xe()}var kh="en-US";var J2=kh;function X2(n){typeof n=="string"&&(J2=n.toLowerCase().replace(/_/g,"-"))}var eU=(n,e,t)=>{};function bt(n,e,t,r){let i=xe(),s=on(),o=vn();return nU(s,i,i[Et],o,n,e,r),bt}function tU(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[hh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function nU(n,e,t,r,i,s,o){let a=sv(r),l=n.firstCreatePass&&Ej(n),d=e[Wn],f=_j(e),g=!0;if(r.type&3||o){let D=Kn(r,e),C=o?o(D):D,P=f.length,O=o?B=>o(fr(B[r.index])):r.index,F=null;if(!o&&a&&(F=tU(n,e,i,r.index)),F!==null){let B=F.__ngLastListenerFn__||F;B.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,g=!1}else{s=VC(r,e,d,s),eU(D,i,s);let B=t.listen(C,i,s);f.push(s,B),l&&l.push(i,O,P,P+1)}}else s=VC(r,e,d,s);let m=r.outputs,w;if(g&&m!==null&&(w=m[i])){let D=w.length;if(D)for(let C=0;C<D;C+=2){let P=w[C],O=w[C+1],J=e[P][O].subscribe(s),G=f.length;f.push(s,J),l&&l.push(i,r.index,G,-(G+1))}}}function FC(n,e,t,r){let i=Ae(null);try{return ur(6,e,t),t(r)!==!1}catch(s){return ZS(n,s),!1}finally{ur(7,e,t),Ae(i)}}function VC(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?xi(n.index,e):e;Av(o,5);let a=FC(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=FC(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Le(n=1){return RV(n)}function rU(n,e){let t=null,r=jF(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?rT(n,s,!0):$F(r,s))return i}return t}function IA(n){let e=xe()[xn][sn];if(!e.projection){let t=n?n.length:1,r=e.projection=xF(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?rU(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function bA(n,e=0,t,r,i,s){let o=xe(),a=on(),c=r?n+1:null;c!==null&&fA(o,a,c,r,i,s,null,t);let l=hu(a,rn+n,16,null,t||null);l.projection===null&&(l.projection=e),kT();let f=!o[iu]||xT();o[xn][sn].projection[l.projection]===null&&c!==null?iU(o,a,c):f&&(l.flags&32)!==32&&KL(a,o,l)}function iU(n,e,t){let r=rn+t,i=e.data[r],s=n[r],o=ky(s,i.tView.ssrId),a=XS(n,i,void 0,{dehydratedView:o});eA(s,a,0,My(i,o))}function mr(n,e,t){return rf(n,"",e,"",t),mr}function rf(n,e,t,r,i){let s=xe(),o=Nv(s,e,t,r);if(o!==Rn){let a=on(),c=BT();HS(a,c,s,n,o,s[Et],i,!1)}return rf}function sU(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function sf(n){let e=bV();return ov(e,rn+n)}function Q(n,e=""){let t=xe(),r=on(),i=n+rn,s=r.firstCreatePass?hu(r,i,1,e,null):r.data[i],o=oU(r,t,s,e,n);t[i]=o,dv()&&bv(r,t,o,s),lu(s,!1)}var oU=(n,e,t,r,i)=>(hv(!0),OL(e[Et],r));function Ge(n){return un("",n,""),Ge}function un(n,e,t){let r=xe(),i=Nv(r,n,e,t);return i!==Rn&&JS(r,ki(),i),un}function of(n,e,t,r,i){let s=xe(),o=M2(s,n,e,t,r,i);return o!==Rn&&JS(s,ki(),o),of}function aU(n,e,t){let r=on();if(r.firstCreatePass){let i=Ti(n);zy(t,r.data,r.blueprint,i,!0),zy(e,r.data,r.blueprint,i,!1)}}function zy(n,e,t,r,i){if(n=Gt(n),Array.isArray(n))for(let s=0;s<n.length;s++)zy(n[s],e,t,r,i);else{let s=on(),o=xe(),a=vn(),c=zo(n)?n:Gt(n.provide),l=fT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(zo(n)||!n.multi){let m=new xs(l,i,ee),w=Ym(c,e,i?d:d+g,f);w===-1?(dy(_h(a,o),s,c),Qm(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[w]=m,o[w]=m)}else{let m=Ym(c,e,d+g,f),w=Ym(c,e,d,d+g),D=m>=0&&t[m],C=w>=0&&t[w];if(i&&!C||!i&&!D){dy(_h(a,o),s,c);let P=lU(i?uU:cU,t.length,i,r,l);!i&&C&&(t[w].providerFactory=P),Qm(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else{let P=DA(t[i?w:m],l,!i&&r);Qm(s,n,m>-1?m:w,P)}!i&&r&&C&&t[w].componentProviders++}}}function Qm(n,e,t,r){let i=zo(e),s=XF(e);if(i||s){let c=(s?Gt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function DA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ym(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function cU(n,e,t,r){return qy(this.multi,[])}function uU(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Wo(t,t[Ee],this.providerFactory.index,r);s=a.slice(0,o),qy(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],qy(i,s);return s}function qy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function lU(n,e,t,r,i){let s=new xs(n,t,ee);return s.multi=[],s.index=e,s.componentProviders=0,DA(s,i,r&&!t),s}function CA(n,e=[]){return t=>{t.providersResolver=(r,i)=>aU(r,i?i(n):n,e)}}var dU=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=lT(!1,r.type),s=i.length>0?tf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=K({token:e,providedIn:"environment",factory:()=>new e(L(Kt))});let n=e;return n})();function gu(n){ta("NgStandalone"),n.getStandaloneInjector=e=>e.get(dU).getOrCreateStandaloneInjector(n)}function TA(n,e,t){let r=n.\u0275cmp;r.directiveDefs=dh(e,!1),r.pipeDefs=dh(t,!0)}function SA(n,e,t,r){return AA(xe(),Hh(),n,e,t,r)}function af(n,e,t,r,i){return hU(xe(),Hh(),n,e,t,r,i)}function Pv(n,e){let t=n[e];return t===Rn?void 0:t}function AA(n,e,t,r,i,s){let o=e+t;return Ai(n,o,i)?Mv(n,o+1,s?r.call(s,i):r(i)):Pv(n,o+1)}function hU(n,e,t,r,i,s,o){let a=e+t;return Rv(n,a,i,s)?Mv(n,a+2,o?r.call(o,i,s):r(i,s)):Pv(n,a+2)}function fU(n,e,t,r,i,s,o,a){let c=e+t;return I2(n,c,i,s,o)?Mv(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):Pv(n,c+3)}function Rt(n,e){let t=on(),r,i=n+rn;t.firstCreatePass?(r=pU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Cs(r.type,!0)),o,a=tn(ee);try{let c=wh(!1),l=s();return wh(c),sU(t,xe(),i,l),l}finally{tn(a)}}function pU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function wn(n,e,t){let r=n+rn,i=xe(),s=ov(i,r);return xA(i,r)?AA(i,Hh(),e,s.transform,t,s):s.transform(t)}function ia(n,e,t,r,i){let s=n+rn,o=xe(),a=ov(o,s);return xA(o,s)?fU(o,Hh(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function xA(n,e){return n[Ee].data[e].pure}function cf(n,e){return aA(n,e)}var th=null;function gU(n){th!==null&&(n.defaultEncapsulation!==th.defaultEncapsulation||n.preserveWhitespaces!==th.preserveWhitespaces)||(th=n)}var uf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var Ov=new H(""),mu=new H(""),lf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Fv||(mU(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(L(_e),L(df),L(mu))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),df=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Fv?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function mU(n){Fv=n}var Fv;function Pi(n){return!!n&&typeof n.then=="function"}function Vv(n){return!!n&&typeof n.subscribe=="function"}var hf=new H(""),MA=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=U(hf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Pi(o))r.push(o);else if(Vv(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ff=new H("");function yU(){kD(()=>{throw new re(600,!1)})}function vU(n){return n.isBoundToModule}var wU=10;function _U(n,e,t){try{let r=t();return Pi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function RA(n,e){return Array.isArray(e)?e.reduce(RA,n):M(M({},n),e)}var Gr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=U(rL),this.afterRenderManager=U(pA),this.zonelessEnabled=U(cA),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ne,this.afterTick=new Ne,this.componentTypes=[],this.components=[],this.isStable=U(qr).hasPendingTasks.pipe(se(r=>!r)),this._injector=U(Kt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Th;if(!this._injector.get(MA).done){let m=!s&&oT(r),w=!1;throw new re(405,w)}let a;s?a=r:a=this._injector.get(Qo).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=vU(a)?void 0:this._injector.get(Si),l=i||a.selector,d=a.create(yn.NULL,[],l,c),f=d.location.nativeElement,g=d.injector.get(Ov,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),oh(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new re(101,!1);let r=Ae(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Ae(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Yo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<wU;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)EU(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>zh(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;oh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(ff,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>oh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new re(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function oh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function EU(n,e,t,r){if(!t&&!zh(n))return;rA(n,e,t&&!r?0:1)}var Hy=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},pf=(()=>{let e=class e{compileModuleSync(r){return new Mh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=aT(r),o=bS(s.declarations).reduce((a,c)=>{let l=Ci(c);return l&&a.push(new Zo(l)),a},[]);return new Hy(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),IU=new H("");function bU(n,e,t){let r=new Mh(t);return Promise.resolve(r)}function LC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var DU=(()=>{let e=class e{constructor(){this.zone=U(_e),this.changeDetectionScheduler=U(Ko),this.applicationRef=U(Gr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function CU({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _e(te(M({},kA()),{scheduleInRootZone:t})),[{provide:_e,useFactory:n},{provide:$o,multi:!0,useFactory:()=>{let r=U(DU,{optional:!0});return()=>r.initialize()}},{provide:$o,multi:!0,useFactory:()=>{let r=U(TU);return()=>{r.initialize()}}},e===!0?{provide:uA,useValue:!0}:[],{provide:lA,useValue:t??eS}]}function kA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var TU=(()=>{let e=class e{constructor(){this.subscription=new st,this.initialized=!1,this.zone=U(_e),this.pendingTasks=U(qr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var SU=(()=>{let e=class e{constructor(){this.appRef=U(Gr),this.taskService=U(qr),this.ngZone=U(_e),this.zonelessEnabled=U(cA),this.disableScheduling=U(uA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new st,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ih):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(U(lA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof bh||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?vC:tS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ih+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,vC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function AU(){return typeof $localize<"u"&&$localize.locale||kh}var Lv=new H("",{providedIn:"root",factory:()=>U(Lv,ve.Optional|ve.SkipSelf)||AU()});var jv=new H("");function nh(n){return!!n.platformInjector}function xU(n){let e=nh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_e);return t.run(()=>{nh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(jr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),nh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(jv);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{oh(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return _U(r,t,()=>{let s=e.get(MA);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Lv,kh);if(X2(o||kh),nh(n)){let a=e.get(Gr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return MU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function MU(n,e){let t=n.injector.get(Gr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new re(-403,!1);e.push(n)}var NA=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=i?.scheduleInRootZone,o=()=>nL(i?.ngZone,te(M({},kA({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:s})),a=i?.ignoreChangesOutsideZone,c=[CU({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:Ko,useExisting:SU}],l=_2(r.moduleType,this.injector,c);return xU({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let s=RA({},i);return bU(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(jv,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(L(yn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),Xc=null,PA=new H("");function RU(n){if(Xc&&!Xc.get(PA,!1))throw new re(400,!1);yU(),Xc=n;let e=n.get(NA);return PU(n),e}function Uv(n,e,t=[]){let r=`Platform: ${e}`,i=new H(r);return(s=[])=>{let o=OA();if(!o||o.injector.get(PA,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):RU(kU(a,r))}return NU(i)}}function kU(n=[],e){return yn.create({name:e,providers:[{provide:Uh,useValue:"platform"},{provide:jv,useValue:new Set([()=>Xc=null])},...n]})}function NU(n){let e=OA();if(!e)throw new re(401,!1);return e}function OA(){return Xc?.get(NA)??null}function PU(n){n.get(vv,null)?.forEach(t=>t())}function Bv(){return!1}var Yn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=OU;let n=e;return n})();function OU(n){return FU(vn(),xe(),(n&16)===16)}function FU(n,e,t){if($h(n)&&!t){let r=xi(n.index,e);return new Rs(r,r)}else if(n.type&175){let r=e[xn];return new Rs(r,e)}return null}var Gy=class{constructor(){}supports(e){return hA(e)}create(e){return new Wy(e)}},VU=(n,e)=>e,Wy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||VU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<jC(r,i,s)?t:r,a=jC(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let m=g<s.length?s[g]:s[g]=0,w=m+g;d<=w&&w<l&&(s[g]=m+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!hA(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,E2(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Ky(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Nh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Nh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Ky=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Qy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Nh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Qy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function jC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Yy=class{constructor(){}supports(e){return e instanceof Map||xv(e)}create(){return new Zy}},Zy=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||xv(e)))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Jy(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Jy=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function UC(){return new $v([new Gy])}var $v=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||UC()),deps:[[e,new Lh,new Xo]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new re(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:UC});let n=e;return n})();function BC(){return new zv([new Yy])}var zv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||BC()),deps:[[e,new Lh,new Xo]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new re(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:BC});let n=e;return n})();var FA=Uv(null,"core",[]),VA=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(L(Gr))},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({});let n=e;return n})();var LA=new H("");function yu(n,e){ta("NgSignals");let t=xD(n);return e?.equal&&(t[mi].equal=e.equal),t}function Zn(n){let e=Ae(null);try{return n()}finally{Ae(e)}}function jA(n){let e=Ci(n);if(!e)return null;let t=new Zo(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var WA=null;function Oi(){return WA}function KA(n){WA??=n}var gf=class{};var Dt=new H(""),Xv=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>U(BU),providedIn:"platform"});let n=e;return n})(),QA=new H(""),BU=(()=>{let e=class e extends Xv{constructor(){super(),this._doc=U(Dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Oi().getBaseHref(this._doc)}onPopState(r){let i=Oi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Oi().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function ew(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function UA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Wr(n){return n&&n[0]!=="?"?"?"+n:n}var Fs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>U(tw),providedIn:"root"});let n=e;return n})(),YA=new H(""),tw=(()=>{let e=class e extends Fs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??U(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return ew(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Wr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Wr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Wr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Xv),L(YA,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ZA=(()=>{let e=class e extends Fs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=ew(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Wr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Wr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Xv),L(YA,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),oa=(()=>{let e=class e{constructor(r){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=qU(UA(BA(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Wr(i))}normalize(r){return e.stripTrailingSlash(zU(this._basePath,BA(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Wr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Wr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Wr,e.joinWithSlash=ew,e.stripTrailingSlash=UA,e.\u0275fac=function(i){return new(i||e)(L(Fs))},e.\u0275prov=K({token:e,factory:()=>$U(),providedIn:"root"});let n=e;return n})();function $U(){return new oa(L(Fs))}function zU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function BA(n){return n.replace(/\/index.html$/,"")}function qU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function mf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Hv=/\s+/,$A=[],aa=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=$A,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Hv):$A}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Hv):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Hv).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(ee(gr),ee(Os))},e.\u0275dir=pr({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var Gv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Nn=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Gv(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),zA(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);zA(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ee(kn),ee(ef),ee($v))},e.\u0275dir=pr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function zA(n,e){n.context.$implicit=e.item}var yr=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Wv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){qA("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){qA("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ee(kn),ee(ef))},e.\u0275dir=pr({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),Wv=class{constructor(){this.$implicit=null,this.ngIf=null}};function qA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Wt(e)}'.`)}function JA(n,e){return new re(2100,!1)}var Kv=class{createSubscription(e,t){return Zn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Zn(()=>e.unsubscribe())}},Qv=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},HU=new Qv,GU=new Kv,XA=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Pi(r))return HU;if(Vv(r))return GU;throw JA(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(ee(Yn,16))},e.\u0275pipe=Ns({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();function WU(n,e){return{key:n,value:e}}var Fi=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=HA}transform(r,i=HA){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let s=this.differ.diff(r),o=i!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(WU(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)(ee(zv,16))},e.\u0275pipe=Ns({name:"keyvalue",type:e,pure:!1,standalone:!0});let n=e;return n})();function HA(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var ca=(()=>{let e=class e{transform(r,i,s){if(r==null)return null;if(!this.supports(r))throw JA(e,r);return r.slice(i,s)}supports(r){return typeof r=="string"||Array.isArray(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=Ns({name:"slice",type:e,pure:!1,standalone:!0});let n=e;return n})();var ua=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({});let n=e;return n})(),nw="browser",KU="server";function Vi(n){return n===nw}function Li(n){return n===KU}var ex=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>Vi(U(Mt))?new Yv(U(Dt),window):new Zv});let n=e;return n})(),Yv=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=QU(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function QU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Zv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},sa=class{};var wu=class{},vf=class{},Jn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var iw=class{encodeKey(e){return tx(e)}encodeValue(e){return tx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function YU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var ZU=/%(\d[a-f0-9])/gi,JU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tx(n){return encodeURIComponent(n).replace(ZU,(e,t)=>JU[t]??e)}function yf(n){return`${n}`}var Bi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new iw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=YU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(yf):[yf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(yf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(yf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var sw=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function XU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function nx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function rx(n){return typeof Blob<"u"&&n instanceof Blob}function ix(n){return typeof FormData<"u"&&n instanceof FormData}function eB(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var vu=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(XU(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Jn,this.context??=new sw,!this.params)this.params=new Bi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||nx(this.body)||rx(this.body)||ix(this.body)||eB(this.body)?this.body:this.body instanceof Bi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||ix(this.body)?null:rx(this.body)?this.body.type||null:nx(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Bi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),d)),new n(t,r,o,{params:d,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},$i=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}($i||{}),_u=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Jn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},wf=class n extends _u{constructor(e={}){super(e),this.type=$i.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Eu=class n extends _u{constructor(e={}){super(e),this.type=$i.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ui=class extends _u{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},ux=200,tB=204;function rw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Vs=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof vu)o=r;else{let l;s.headers instanceof Jn?l=s.headers:l=new Jn(s.headers);let d;s.params&&(s.params instanceof Bi?d=s.params:d=new Bi({fromObject:s.params})),o=new vu(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=oe(o).pipe(Fr(l=>this.handler.handle(l)));if(r instanceof vu||s.observe==="events")return a;let c=a.pipe(_t(l=>l instanceof Eu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(se(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(se(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(se(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(se(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Bi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,rw(s,i))}post(r,i,s={}){return this.request("POST",r,rw(s,i))}put(r,i,s={}){return this.request("PUT",r,rw(s,i))}};e.\u0275fac=function(i){return new(i||e)(L(wu))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),nB=/^\)\]\}',?\n/,rB="X-Request-URL";function sx(n){if(n.url)return n.url;let e=rB.toLocaleLowerCase();return n.headers.get(e)}var iB=(()=>{let e=class e{constructor(){this.fetchImpl=U(ow,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=U(_e)}handle(r){return new fe(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(aw,o=>i.error(new Ui({error:o}))),()=>s.abort()})}doRequest(r,i,s){return b(this,null,function*(){let o=this.createRequestInit(r),a;try{let w=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,M({signal:i},o)));sB(w),s.next({type:$i.Sent}),a=yield w}catch(w){s.error(new Ui({error:w,status:w.status??0,statusText:w.statusText,url:r.urlWithParams,headers:w.headers}));return}let c=new Jn(a.headers),l=a.statusText,d=sx(a)??r.urlWithParams,f=a.status,g=null;if(r.reportProgress&&s.next(new wf({headers:c,status:f,statusText:l,url:d})),a.body){let w=a.headers.get("content-length"),D=[],C=a.body.getReader(),P=0,O,F,B=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>b(this,null,function*(){for(;;){let{done:G,value:I}=yield C.read();if(G)break;if(D.push(I),P+=I.length,r.reportProgress){F=r.responseType==="text"?(F??"")+(O??=new TextDecoder).decode(I,{stream:!0}):void 0;let v=()=>s.next({type:$i.DownloadProgress,total:w?+w:void 0,loaded:P,partialText:F});B?B.run(v):v()}}}));let J=this.concatChunks(D,P);try{let G=a.headers.get("Content-Type")??"";g=this.parseBody(r,J,G)}catch(G){s.error(new Ui({error:G,headers:new Jn(a.headers),status:a.status,statusText:a.statusText,url:sx(a)??r.urlWithParams}));return}}f===0&&(f=g?ux:0),f>=200&&f<300?(s.next(new Eu({body:g,headers:c,status:f,statusText:l,url:d})),s.complete()):s.error(new Ui({error:g,headers:c,status:f,statusText:l,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(nB,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),ow=class{};function aw(){}function sB(n){n.then(aw,aw)}function lx(n,e){return e(n)}function oB(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}function aB(n,e,t){return(r,i)=>Mn(t,()=>e(r,s=>n(s,i)))}var cB=new H(""),cw=new H(""),uB=new H(""),dx=new H("",{providedIn:"root",factory:()=>!0});function lB(){let n=null;return(e,t)=>{n===null&&(n=(U(cB,{optional:!0})??[]).reduceRight(oB,lx));let r=U(qr);if(U(dx)){let s=r.add();return n(e,t).pipe(_i(()=>r.remove(s)))}else return n(e,t)}}var ox=(()=>{let e=class e extends wu{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=U(qr),this.contributeToStability=U(dx)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(cw),...this.injector.get(uB,[])]));this.chain=i.reduceRight((s,o)=>aB(s,o,this.injector),lx)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(_i(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(L(vf),L(Kt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();var dB=/^\)\]\}',?\n/;function hB(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var ax=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new re(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?De(i.\u0275loadImpl()):oe(null)).pipe(He(()=>new fe(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,P)=>a.setRequestHeader(C,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let C=a.statusText||"OK",P=new Jn(a.getAllResponseHeaders()),O=hB(a)||r.url;return l=new wf({headers:P,status:a.status,statusText:C,url:O}),l},f=()=>{let{headers:C,status:P,statusText:O,url:F}=d(),B=null;P!==tB&&(B=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=B?ux:0);let J=P>=200&&P<300;if(r.responseType==="json"&&typeof B=="string"){let G=B;B=B.replace(dB,"");try{B=B!==""?JSON.parse(B):null}catch(I){B=G,J&&(J=!1,B={error:I,text:B})}}J?(o.next(new Eu({body:B,headers:C,status:P,statusText:O,url:F||void 0})),o.complete()):o.error(new Ui({error:B,headers:C,status:P,statusText:O,url:F||void 0}))},g=C=>{let{url:P}=d(),O=new Ui({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});o.error(O)},m=!1,w=C=>{m||(o.next(d()),m=!0);let P={type:$i.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),o.next(P)},D=C=>{let P={type:$i.UploadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),o.next(P)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",w),c!==null&&a.upload&&a.upload.addEventListener("progress",D)),a.send(c),o.next({type:$i.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",w),c!==null&&a.upload&&a.upload.removeEventListener("progress",D)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(L(sa))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),hx=new H(""),fB="XSRF-TOKEN",pB=new H("",{providedIn:"root",factory:()=>fB}),gB="X-XSRF-TOKEN",mB=new H("",{providedIn:"root",factory:()=>gB}),_f=class{},yB=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=mf(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(L(Dt),L(Mt),L(pB))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function vB(n,e){let t=n.url.toLowerCase();if(!U(hx)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=U(_f).getToken(),i=U(mB);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var fx=function(n){return n[n.Interceptors=0]="Interceptors",n[n.LegacyInterceptors=1]="LegacyInterceptors",n[n.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",n[n.NoXsrfProtection=3]="NoXsrfProtection",n[n.JsonpSupport=4]="JsonpSupport",n[n.RequestsMadeViaParent=5]="RequestsMadeViaParent",n[n.Fetch=6]="Fetch",n}(fx||{});function wB(n,e){return{\u0275kind:n,\u0275providers:e}}function uw(...n){let e=[Vs,ax,ox,{provide:wu,useExisting:ox},{provide:vf,useFactory:()=>U(iB,{optional:!0})??U(ax)},{provide:cw,useValue:vB,multi:!0},{provide:hx,useValue:!0},{provide:_f,useClass:yB}];for(let t of n)e.push(...t.\u0275providers);return jh(e)}var cx=new H("");function _B(){return wB(fx.LegacyInterceptors,[{provide:cx,useFactory:lB},{provide:cw,useExisting:cx,multi:!0}])}var px=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({providers:[uw(_B())]});let n=e;return n})();var hw=class extends gf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},fw=class n extends hw{static makeCurrent(){KA(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=EB();return t==null?null:IB(t)}resetBaseElement(){Iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return mf(document.cookie,e)}},Iu=null;function EB(){return Iu=Iu||document.querySelector("base"),Iu?Iu.getAttribute("href"):null}function IB(n){return new URL(n,document.baseURI).pathname}var pw=class{addToWindow(e){mn.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new re(5103,!1);return s},mn.getAllAngularTestabilities=()=>e.getAllTestabilities(),mn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=mn.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};mn.frameworkStabilizers||(mn.frameworkStabilizers=[]),mn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Oi().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},bB=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Ef=new H(""),wx=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new re(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(L(Ef),L(_e))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),bu=class{constructor(e){this._doc=e}},lw="ng-app-id",_x=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Li(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${lw}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(lw),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(lw,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(L(Dt),L(Kh),L(wv,8),L(Mt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),dw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mw=/%COMP%/g,Ex="%COMP%",DB=`_nghost-${Ex}`,CB=`_ngcontent-${Ex}`,TB=!0,SB=new H("",{providedIn:"root",factory:()=>TB});function AB(n){return CB.replace(mw,n)}function xB(n){return DB.replace(mw,n)}function Ix(n,e){return e.map(t=>t.replace(mw,n))}var mx=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Li(c),this.defaultRenderer=new Du(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===dr.ShadowDom&&(i=te(M({},i),{encapsulation:dr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof If?s.applyToHost(r):s instanceof Cu&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case dr.Emulated:o=new If(l,d,i,this.appId,f,a,c,g);break;case dr.ShadowDom:return new gw(l,d,r,i,a,c,this.nonce,g);default:o=new Cu(l,d,i,f,a,c,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(L(wx),L(_x),L(Kh),L(SB),L(Dt),L(Mt),L(_e),L(wv))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Du=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(dw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(yx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(yx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=dw[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=dw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Br.DashCase|Br.Important)?e.style.setProperty(t,r,i&Br.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Br.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Oi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function yx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var gw=class extends Du{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Ix(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cu=class extends Du{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?Ix(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},If=class extends Cu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=AB(l),this.hostAttr=xB(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},MB=(()=>{let e=class e extends bu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(L(Dt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),RB=(()=>{let e=class e extends bu{constructor(r){super(r),this.delegate=U(LA,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(L(Dt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),vx=["alt","control","meta","shift"],kB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},PB=(()=>{let e=class e extends bu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Oi().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),vx.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=kB[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),vx.forEach(a=>{if(a!==s){let c=NB[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(L(Dt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function OB(){fw.makeCurrent()}function FB(){return new jr}function VB(){return cS(document),document}var LB=[{provide:Mt,useValue:nw},{provide:vv,useValue:OB,multi:!0},{provide:Dt,useFactory:VB,deps:[]}],bx=Uv(FA,"browser",LB),jB=new H(""),UB=[{provide:mu,useClass:pw,deps:[]},{provide:Ov,useClass:lf,deps:[_e,df,mu]},{provide:lf,useClass:lf,deps:[_e,df,mu]}],BB=[{provide:Uh,useValue:"root"},{provide:jr,useFactory:FB,deps:[]},{provide:Ef,useClass:MB,multi:!0,deps:[Dt,_e,Mt]},{provide:Ef,useClass:PB,multi:!0,deps:[Dt]},{provide:Ef,useClass:RB,multi:!0},mx,_x,wx,{provide:Yo,useExisting:mx},{provide:sa,useClass:bB,deps:[]},[]],Dx=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Kh,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(L(jB,12))},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({providers:[...BB,...UB],imports:[ua,VA]});let n=e;return n})(),Cx=(()=>{let e=class e{constructor(r){this._doc=r,this._dom=Oi()}addTag(r,i=!1){return r?this._getOrCreateElement(r,i):null}addTags(r,i=!1){return r?r.reduce((s,o)=>(o&&s.push(this._getOrCreateElement(o,i)),s),[]):[]}getTag(r){return r&&this._doc.querySelector(`meta[${r}]`)||null}getTags(r){if(!r)return[];let i=this._doc.querySelectorAll(`meta[${r}]`);return i?[].slice.call(i):[]}updateTag(r,i){if(!r)return null;i=i||this._parseSelector(r);let s=this.getTag(i);return s?this._setMetaElementAttributes(r,s):this._getOrCreateElement(r,!0)}removeTag(r){this.removeTagElement(this.getTag(r))}removeTagElement(r){r&&this._dom.remove(r)}_getOrCreateElement(r,i=!1){if(!i){let a=this._parseSelector(r),c=this.getTags(a).filter(l=>this._containsAttributes(r,l))[0];if(c!==void 0)return c}let s=this._dom.createElement("meta");return this._setMetaElementAttributes(r,s),this._doc.getElementsByTagName("head")[0].appendChild(s),s}_setMetaElementAttributes(r,i){return Object.keys(r).forEach(s=>i.setAttribute(this._getMetaKeyMap(s),r[s])),i}_parseSelector(r){let i=r.name?"name":"property";return`${i}="${r[i]}"`}_containsAttributes(r,i){return Object.keys(r).every(s=>i.getAttribute(this._getMetaKeyMap(s))===r[s])}_getMetaKeyMap(r){return $B[r]||r}};e.\u0275fac=function(i){return new(i||e)(L(Dt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),$B={httpEquiv:"http-equiv"},Pn=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(L(Dt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Tu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=L(zB),s},providedIn:"root"});let n=e;return n})(),zB=(()=>{let e=class e extends Tu{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case an.NONE:return i;case an.HTML:return Ni(i,"HTML")?Qn(i):_S(this._doc,String(i)).toString();case an.STYLE:return Ni(i,"Style")?Qn(i):i;case an.SCRIPT:if(Ni(i,"Script"))return Qn(i);throw new re(5200,!1);case an.URL:return Ni(i,"URL")?Qn(i):Yh(String(i));case an.RESOURCE_URL:if(Ni(i,"ResourceURL"))return Qn(i);throw new re(5201,!1);default:throw new re(5202,!1)}}bypassSecurityTrustHtml(r){return lS(r)}bypassSecurityTrustStyle(r){return dS(r)}bypassSecurityTrustScript(r){return hS(r)}bypassSecurityTrustUrl(r){return fS(r)}bypassSecurityTrustResourceUrl(r){return pS(r)}};e.\u0275fac=function(i){return new(i||e)(L(Dt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function ww(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var js=ww();function Rx(n){js=n}var kx=/[&<>"']/,qB=new RegExp(kx.source,"g"),Nx=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,HB=new RegExp(Nx.source,"g"),GB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Tx=n=>GB[n];function _n(n,e){if(e){if(kx.test(n))return n.replace(qB,Tx)}else if(Nx.test(n))return n.replace(HB,Tx);return n}var WB=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function KB(n){return n.replace(WB,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var QB=/(^|[^\[])\^/g;function Ue(n,e){let t=typeof n=="string"?n:n.source;e=e||"";let r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(QB,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function Sx(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var Au={exec:()=>null};function Ax(n,e){let t=n.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=t.split(/ \|/),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function bf(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function YB(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function xx(n,e,t,r){let i=e.href,s=e.title?_n(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:_n(o)}}function ZB(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var da=class{options;rules;lexer;constructor(e){this.options=e||js}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:bf(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=ZB(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let i=bf(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=bf(r.replace(/^ *>[ \t]?/gm,""),`
`);let i=this.lexer.state.top;this.lexer.state.top=!0;let s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",c="",l=!1;for(;e;){let d=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let f=t[2].split(`
`,1)[0].replace(/^\t+/,P=>" ".repeat(3*P.length)),g=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,c=f.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=f.slice(m),m+=t[1].length);let w=!1;if(!f&&/^ *$/.test(g)&&(a+=g+`
`,e=e.substring(g.length+1),d=!0),!d){let P=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),O=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),F=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),B=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){let J=e.split(`
`,1)[0];if(g=J,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),F.test(g)||B.test(g)||P.test(g)||O.test(e))break;if(g.search(/[^ ]/)>=m||!g.trim())c+=`
`+g.slice(m);else{if(w||f.search(/[^ ]/)>=4||F.test(f)||B.test(f)||O.test(f))break;c+=`
`+g}!w&&!g.trim()&&(w=!0),a+=J+`
`,e=e.substring(J.length+1),f=g.slice(m)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let D=null,C;this.options.gfm&&(D=/^\[[ xX]\] /.exec(c),D&&(C=D[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!D,checked:C,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){let f=s.items[d].tokens.filter(m=>m.type==="space"),g=f.length>0&&f.some(m=>/\n.*\n/.test(m.raw));s.loose=g}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=Ax(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of s)o.rows.push(Ax(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:_n(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let o=bf(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=YB(t[2],"()");if(o>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),xx(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return xx(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,c,l=o,d=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+o);(i=f.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(c=[...a].length,i[3]||i[4]){l+=c;continue}else if((i[5]||i[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);let g=[...i[0]][0].length,m=e.slice(0,o+i.index+g+c);if(Math.min(o,c)%2){let D=m.slice(1,-1);return{type:"em",raw:m,text:D,tokens:this.lexer.inlineTokens(D)}}let w=m.slice(2,-2);return{type:"strong",raw:m,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=_n(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=_n(t[1]),i="mailto:"+r):(r=_n(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=_n(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=_n(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=_n(t[0]),{type:"text",raw:t[0],text:r}}}},JB=/^(?: *(?:\n|$))+/,XB=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,e$=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Mu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,t$=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Px=/(?:[*+-]|\d{1,9}[.)])/,Ox=Ue(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Px).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),_w=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,n$=/^[^\n]+/,Ew=/(?!\s*\])(?:\\.|[^\[\]\\])+/,r$=Ue(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ew).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),i$=Ue(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Px).getRegex(),Tf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Iw=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,s$=Ue("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Iw).replace("tag",Tf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Fx=Ue(_w).replace("hr",Mu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tf).getRegex(),o$=Ue(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Fx).getRegex(),bw={blockquote:o$,code:XB,def:r$,fences:e$,heading:t$,hr:Mu,html:s$,lheading:Ox,list:i$,newline:JB,paragraph:Fx,table:Au,text:n$},Mx=Ue("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Mu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tf).getRegex(),a$=te(M({},bw),{table:Mx,paragraph:Ue(_w).replace("hr",Mu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Mx).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Tf).getRegex()}),c$=te(M({},bw),{html:Ue(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Iw).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Au,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ue(_w).replace("hr",Mu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ox).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),Vx=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,u$=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Lx=/^( {2,}|\\)\n(?!\s*$)/,l$=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ru="\\p{P}\\p{S}",d$=Ue(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ru).getRegex(),h$=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,f$=Ue(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ru).getRegex(),p$=Ue("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ru).getRegex(),g$=Ue("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ru).getRegex(),m$=Ue(/\\([punct])/,"gu").replace(/punct/g,Ru).getRegex(),y$=Ue(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),v$=Ue(Iw).replace("(?:-->|$)","-->").getRegex(),w$=Ue("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",v$).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Cf=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,_$=Ue(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Cf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),jx=Ue(/^!?\[(label)\]\[(ref)\]/).replace("label",Cf).replace("ref",Ew).getRegex(),Ux=Ue(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ew).getRegex(),E$=Ue("reflink|nolink(?!\\()","g").replace("reflink",jx).replace("nolink",Ux).getRegex(),Dw={_backpedal:Au,anyPunctuation:m$,autolink:y$,blockSkip:h$,br:Lx,code:u$,del:Au,emStrongLDelim:f$,emStrongRDelimAst:p$,emStrongRDelimUnd:g$,escape:Vx,link:_$,nolink:Ux,punctuation:d$,reflink:jx,reflinkSearch:E$,tag:w$,text:l$,url:Au},I$=te(M({},Dw),{link:Ue(/^!?\[(label)\]\((.*?)\)/).replace("label",Cf).getRegex(),reflink:Ue(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Cf).getRegex()}),yw=te(M({},Dw),{escape:Ue(Vx).replace("])","~|])").getRegex(),url:Ue(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),b$=te(M({},yw),{br:Ue(Lx).replace("{2,}","*").getRegex(),text:Ue(yw.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),Df={normal:bw,gfm:a$,pedantic:c$},Su={normal:Dw,gfm:yw,breaks:b$,pedantic:I$},Qr=class n{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||js,this.options.tokenizer=this.options.tokenizer||new da,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:Df.normal,inline:Su.normal};this.options.pedantic?(t.block=Df.pedantic,t.inline=Su.pedantic):this.options.gfm&&(t.block=Df.gfm,this.options.breaks?t.inline=Su.breaks:t.inline=Su.gfm),this.tokenizer.rules=t}static get rules(){return{block:Df,inline:Su}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,c=e.slice(1),l;this.options.extensions.startBlock.forEach(d=>{l=d.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,c,l;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,l)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,f=e.slice(1),g;this.options.extensions.startInline.forEach(m=>{g=m.call({lexer:this},f),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},tt=class{options;constructor(e){this.options=e||js}code(e,t,r){let i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+_n(i)+'">'+(r?e:_n(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:_n(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){let i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){let r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){let i=Sx(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){let i=Sx(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}},xu=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},Yr=class n{options;renderer;textRenderer;constructor(e){this.options=e||js,this.options.renderer=this.options.renderer||new tt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new xu}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{let o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,KB(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=s,a="",c="";for(let d=0;d<o.header.length;d++)c+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(c);let l="";for(let d=0;d<o.rows.length;d++){let f=o.rows[d];c="";for(let g=0;g<f.length;g++)c+=this.renderer.tablecell(this.parseInline(f[g].tokens),{header:!1,align:o.align[g]});l+=this.renderer.tablerow(c)}r+=this.renderer.table(a,l);continue}case"blockquote":{let o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{let o=s,a=o.ordered,c=o.start,l=o.loose,d="";for(let f=0;f<o.items.length;f++){let g=o.items[f],m=g.checked,w=g.task,D="";if(g.task){let C=this.renderer.checkbox(!!m);l?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=C+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=C+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:C+" "}):D+=C+" "}D+=this.parse(g.tokens,l),d+=this.renderer.listitem(D,w,!!m)}r+=this.renderer.list(d,a,c);continue}case"html":{let o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{let o=s;r+=t.text(o.text);break}case"html":{let o=s;r+=t.html(o.text);break}case"link":{let o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{let o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{let o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{let o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{let o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{let o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{let o=s;r+=t.text(o.text);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},la=class{options;constructor(e){this.options=e||js}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},vw=class{defaults=ww();options=this.setOptions;parse=this.#s(Qr.lex,Yr.parse);parseInline=this.#s(Qr.lexInline,Yr.parseInline);Parser=Yr;Renderer=tt;TextRenderer=xu;Lexer=Qr;Tokenizer=da;Hooks=la;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i=M({},r);if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let c=s.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){let s=this.defaults.renderer||new tt(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.renderer[a],l=s[a];s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=l.apply(s,d)),f||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new da(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,c=r.tokenizer[a],l=s[a];s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=l.apply(s,d)),f}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new la;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.hooks[a],l=s[a];la.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(c.call(s,d)).then(g=>l.call(s,g));let f=c.call(s,d);return l.call(s,f)}:s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=l.apply(s,d)),f}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults=M(M({},this.defaults),i)}),this}setOptions(e){return this.defaults=M(M({},this.defaults),e),this}lexer(e,t){return Qr.lex(e,t??this.defaults)}parser(e,t){return Yr.parse(e,t??this.defaults)}#s(e,t){return(r,i)=>{let s=M({},i),o=M(M({},this.defaults),s);this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let a=this.#u(!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#u(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+_n(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Ls=new vw;function Ce(n,e){return Ls.parse(n,e)}Ce.options=Ce.setOptions=function(n){return Ls.setOptions(n),Ce.defaults=Ls.defaults,Rx(Ce.defaults),Ce};Ce.getDefaults=ww;Ce.defaults=js;Ce.use=function(...n){return Ls.use(...n),Ce.defaults=Ls.defaults,Rx(Ce.defaults),Ce};Ce.walkTokens=function(n,e){return Ls.walkTokens(n,e)};Ce.parseInline=Ls.parseInline;Ce.Parser=Yr;Ce.parser=Yr.parse;Ce.Renderer=tt;Ce.TextRenderer=xu;Ce.Lexer=Qr;Ce.lexer=Qr.lex;Ce.Tokenizer=da;Ce.Hooks=la;Ce.parse=Ce;var $Y=Ce.options,zY=Ce.setOptions,qY=Ce.use,HY=Ce.walkTokens,GY=Ce.parseInline;var WY=Yr.parse,KY=Qr.lex;var D$=["*"],C$="Copy",T$="Copied",S$=(()=>{let e=class e{constructor(){this._buttonClick$=new Ne,this.copied$=this._buttonClick$.pipe(He(()=>Gc(oe(!0),Om(3e3).pipe(Wc(!1)))),Kc(),Po(1)),this.copiedText$=this.copied$.pipe(Lr(!1),se(r=>r?T$:C$))}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pe({type:e,selectors:[["markdown-clipboard"]],standalone:!0,features:[gu],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,s){i&1&&($(0,"button",0),Rt(1,"async"),bt("click",function(){return s.onCopyToClipboardClick()}),Q(2),Rt(3,"async"),z()),i&2&&(pu("copied",wn(1,3,s.copied$)),q(2),Ge(wn(3,5,s.copiedText$)))},dependencies:[XA],encapsulation:2,changeDetection:0});let n=e;return n})(),A$=new H("CLIPBOARD_OPTIONS");var Cw=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(Cw||{}),$x=new H("MARKED_EXTENSIONS"),Tw=new H("MARKED_OPTIONS"),x$="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",M$="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",R$="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",k$="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",N$="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",P$="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",zx=new H("SECURITY_CONTEXT");var On=(()=>{let e=class e{get options(){return this._options}set options(r){this._options=M(M({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,s,o,a,c,l){this.clipboardOptions=r,this.extensions=i,this.platform=o,this.securityContext=a,this.http=c,this.sanitizer=l,this.DEFAULT_MARKED_OPTIONS={renderer:new tt},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Ne,this.reload$=this._reload$.asObservable(),this.options=s}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:l}=i,d=M(M({},this.options),i.markedOptions),f=d.renderer||this.renderer||new tt;this.extensions&&(this.renderer=this.extendsRendererForExtensions(f)),c&&(this.renderer=this.extendsRendererForMermaid(f));let g=this.trimIndentation(r),m=s?this.decodeHtml(g):g,w=a?this.parseEmoji(m):m,D=this.parseMarked(w,d,o);return(l?D:this.sanitizer.sanitize(this.securityContext,D))||""}render(r,i=this.DEFAULT_RENDER_OPTIONS,s){let{clipboard:o,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:f}=i;c&&this.renderKatex(r,M(M({},this.DEFAULT_KATEX_OPTIONS),l)),d&&this.renderMermaid(r,M(M({},this.DEFAULT_MERMAID_OPTIONS),f)),o&&this.renderClipboard(r,s,M(M(M({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(P$);return this.http.get(r,{responseType:"text"}).pipe(se(i=>this.handleExtension(r,i)))}highlight(r){if(!Vi(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,s=>s.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!Vi(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&Ce.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let s=r.code;return r.code=function(o,a,c){return a==="mermaid"?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let s=r.lastIndexOf("://"),o=s>-1?r.substring(s+4):r,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&d!=="md"?"```"+d+`
`+i+"\n```":i}parseMarked(r,i,s=!1){if(i.renderer){let o=M({},i.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Ce.use({renderer:o})}return s?Ce.parseInline(r,i):Ce.parse(r,i)}parseEmoji(r){if(!Vi(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(x$);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(Vi(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(M$);renderMathInElement(r,i)}}renderClipboard(r,i,s){if(!Vi(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(k$);if(!i)throw new Error(N$);let{buttonComponent:o,buttonTemplate:a}=s,c=r.querySelectorAll("pre");for(let l=0;l<c.length;l++){let d=c.item(l),f=document.createElement("div");f.style.position="relative",d.parentNode.insertBefore(f,d),f.appendChild(d);let g=document.createElement("div");g.classList.add("markdown-clipboard-toolbar"),g.style.position="absolute",g.style.top=".5em",g.style.right=".5em",g.style.zIndex="1",f.insertAdjacentElement("beforeend",g),f.onmouseenter=()=>g.classList.add("hover"),f.onmouseleave=()=>g.classList.remove("hover");let m;if(o){let D=i.createComponent(o);m=D.hostView,D.changeDetectorRef.markForCheck()}else if(a)m=i.createEmbeddedView(a);else{let D=i.createComponent(S$);m=D.hostView,D.changeDetectorRef.markForCheck()}let w;m.rootNodes.forEach(D=>{g.appendChild(D),w=new ClipboardJS(D,{text:()=>d.innerText})}),m.onDestroy(()=>w.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!Vi(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(R$);let s=r.querySelectorAll(".mermaid");s.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:s}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(s=>{let o=i;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(i)&&(i=o),o?s.substring(o):s}).join(`
`)}};e.\u0275fac=function(i){return new(i||e)(L(A$,8),L($x,8),L(Tw,8),L(Mt),L(zx),L(Vs,8),L(Tu))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),vr=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,s){this.element=r,this.markdownService=i,this.viewContainerRef=s,this.error=new et,this.load=new et,this.ready=new et,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Ne}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Yc(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return b(this,null,function*(){let s={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,s);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,Cw.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,Cw.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++){let a=i instanceof Array?i:[i];s.item(o).classList.add(...a)}}setPluginOptions(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(i).forEach(a=>{let c=i[a];if(c){let l=this.toLispCase(a);s.item(o).setAttribute(l,c.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let s=r.toString();for(let o=0,a=i.length;o<a;o++)s=s.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return s.slice(0,1)==="-"&&(s=s.slice(1)),s}};e.\u0275fac=function(i){return new(i||e)(ee(gr),ee(On),ee(kn))},e.\u0275cmp=Pe({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Ps,gu],ngContentSelectors:D$,decls:1,vars:0,template:function(i,s){i&1&&(IA(),bA(0))},encapsulation:2});let n=e;return n})();function O$(n){return[On,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],{provide:$x,useValue:n?.markedExtensions??[]},{provide:zx,useValue:n?.sanitize??an.HTML}]}var qx=(()=>{let e=class e{static forRoot(r){return{ngModule:e,providers:[O$(r)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({imports:[ua]});let n=e;return n})(),Bx;(function(n){let e;(function(i){i.Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox"})(e=n.SecurityLevel||(n.SecurityLevel={}));let t;(function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"})(t=n.Theme||(n.Theme={}));let r;(function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(r=n.LogLevel||(n.LogLevel={}))})(Bx||(Bx={}));var V$=new H(""),L$=new H("");function Qx(n){return n!=null}function Yx(n){return Pi(n)?De(n):n}function Zx(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function Jx(n,e){return e.map(t=>t(n))}function j$(n){return!n.validate}function Xx(n){return n.map(e=>j$(e)?e:t=>e.validate(t))}function U$(n){if(!n)return null;let e=n.filter(Qx);return e.length==0?null:function(t){return Zx(Jx(t,e))}}function Rw(n){return n!=null?U$(Xx(n)):null}function B$(n){if(!n)return null;let e=n.filter(Qx);return e.length==0?null:function(t){let r=Jx(t,e).map(Yx);return Pm(r).pipe(se(Zx))}}function kw(n){return n!=null?B$(Xx(n)):null}function Hx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function $$(n){return n._rawValidators}function z$(n){return n._rawAsyncValidators}function Sw(n){return n?Array.isArray(n)?n:[n]:[]}function Af(n,e){return Array.isArray(n)?n.includes(e):n===e}function Gx(n,e){let t=Sw(e);return Sw(n).forEach(i=>{Af(t,i)||t.push(i)}),t}function Wx(n,e){return Sw(e).filter(t=>!Af(n,t))}var Aw=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Rw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=kw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Vu=class extends Aw{get formDirective(){return null}get path(){return null}};var xw=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},q$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},SZ=te(M({},q$),{"[class.ng-submitted]":"isSubmitted"});var eM=(()=>{let e=class e extends xw{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ee(Vu,10))},e.\u0275dir=pr({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&pu("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[cn]});let n=e;return n})();var ku="VALID",Sf="INVALID",fa="PENDING",Nu="DISABLED",ga=class{},xf=class extends ga{constructor(e,t){super(),this.value=e,this.source=t}},Ou=class extends ga{constructor(e,t){super(),this.pristine=e,this.source=t}},Fu=class extends ga{constructor(e,t){super(),this.touched=e,this.source=t}},pa=class extends ga{constructor(e,t){super(),this.status=e,this.source=t}};function H$(n){return(Nw(n)?n.validators:n)||null}function G$(n){return Array.isArray(n)?Rw(n):n||null}function W$(n,e){return(Nw(e)?e.asyncValidators:n)||null}function K$(n){return Array.isArray(n)?kw(n):n||null}function Nw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Q$(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[t])throw new re(1001,"")}function Y$(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new re(1002,"")})}var Mw=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=yu(()=>this.statusReactive()),this.statusReactive=fu(void 0),this._pristine=yu(()=>this.pristineReactive()),this.pristineReactive=fu(!0),this._touched=yu(()=>this.touchedReactive()),this.touchedReactive=fu(!1),this._events=new Ne,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Zn(this.statusReactive)}set status(e){Zn(()=>this.statusReactive.set(e))}get valid(){return this.status===ku}get invalid(){return this.status===Sf}get pending(){return this.status==fa}get disabled(){return this.status===Nu}get enabled(){return this.status!==Nu}get pristine(){return Zn(this.pristineReactive)}set pristine(e){Zn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Zn(this.touchedReactive)}set touched(e){Zn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Gx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Gx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wx(e,this._rawAsyncValidators))}hasValidator(e){return Af(this._rawValidators,e)}hasAsyncValidator(e){return Af(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ou(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ou(!0,r))}markAsPending(e={}){this.status=fa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Nu,this.errors=null,this._forEachChild(i=>{i.disable(te(M({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xf(this.value,r)),this._events.next(new pa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ku,this._forEachChild(r=>{r.enable(te(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ku||this.status===fa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xf(this.value,t)),this._events.next(new pa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nu:ku}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=fa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Yx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new pa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?Nu:this.errors?Sf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fa)?fa:this._anyControlsHaveStatus(Sf)?Sf:ku}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ou(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Fu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Nw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=G$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=K$(this._rawAsyncValidators)}},Mf=class extends Mw{constructor(e,t,r){super(H$(t),W$(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Y$(this,!0,e),Object.keys(e).forEach(r=>{Q$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var tM=new H("CallSetDisabledState",{providedIn:"root",factory:()=>Pw}),Pw="always";function Z$(n,e,t=Pw){nM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),X$(n,e),tz(n,e),ez(n,e),J$(n,e)}function Kx(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function J$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function nM(n,e){let t=$$(n);e.validator!==null?n.setValidators(Hx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=z$(n);e.asyncValidator!==null?n.setAsyncValidators(Hx(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Kx(e._rawValidators,i),Kx(e._rawAsyncValidators,i)}function X$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&rM(n,e)})}function ez(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&rM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function rM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function tz(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function nz(n,e){n==null,nM(n,e)}function rz(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}var iz={provide:Vu,useExisting:Oh(()=>Ow)},Pu=Promise.resolve(),Ow=(()=>{let e=class e extends Vu{get submitted(){return Zn(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=yu(()=>this.submittedReactive()),this.submittedReactive=fu(!1),this._directives=new Set,this.ngSubmit=new et,this.form=new Mf({},Rw(r),kw(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Pu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Z$(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Pu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Pu.then(()=>{let i=this._findContainer(r.path),s=new Mf({});nz(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Pu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Pu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),rz(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(ee(V$,10),ee(L$,10),ee(tM,8))},e.\u0275dir=pr({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&bt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[CA([iz]),cn]});let n=e;return n})();var iM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=pr({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var sz=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({});let n=e;return n})();var sM=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:tM,useValue:r.callSetDisabledState??Pw}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({imports:[sz]});let n=e;return n})();var de={production:!0,host:"https://publichome.page",port:"8888",eventBusURL:"https://publichome.page:8888/eventbus/",defaultFirm:"SS",redirect_url:"https://publichome.page/u",client_id:"8c987bdba61457c20417",client_secret:"DONT_SEND_FROM_FRONT_END",gh_default_user_repo:"publichomepage",gh_dr_folder:"my/main",gh_dr_url:"https://raw.githubusercontent.com",gh_api_url:"https://api.github.com",gh_auth_url:"https://github.com/login/oauth/authorize",gh_private_dr_folder:"my",supabaseUrl:"https://hnqbvkzmfdcshdgnhipy.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhucWJ2a3ptZmRjc2hkZ25oaXB5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjkyMjAwOTAsImV4cCI6MjA0NDc5NjA5MH0.3PlLXR6ljTwIWsrMO8QT2fvy0VIGKsXLfahjSgBIN7U",firebaseConfig:{apiKey:"AIzaSyBdEWJQNGtrtL88aX5sE2VGEqYpWLXtpFQ",authDomain:"publichomepage-b872d.firebaseapp.com",projectId:"publichomepage-b872d",storageBucket:"publichomepage-b872d.appspot.com",messagingSenderId:"850538578524",appId:"1:850538578524:web:56c70f38ac285bffd5dc99",measurementId:"G-TRBD0HQFWM"}};var wr=(()=>{let e=class e{constructor(){this._event=new Ne,this.event$=this._event.asObservable()}send(r){this._event.next(r)}observable(){return this.event$}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function az(n,e){n&1&&Ie(0,"app-footer")}var Be=class Be{constructor(e,t){this.cdRef=e,this.messaging=t,this.sponserVisible=!0,this.footerVisible=!0,Be.iconsColorByKey.set("facebook","#3b5998"),Be.iconsColorByKey.set("youtube","#ed302f"),Be.iconsColorByKey.set("discord","#7289DA"),Be.iconsColorByKey.set("linkedin","#0082ca"),Be.iconsColorByKey.set("github","#bcbcbc"),Be.iconsColorByKey.set("link","green"),t.event$.subscribe(r=>{let i=r;switch(i.cmd){case"host":i.file=="IaComponent"&&(this.sponserVisible=!1,this.footerVisible=!1);break;default:break}})}loadScript(e){let t=document.body,r=document.createElement("script");r.innerHTML="",r.src=e,r.async=!1,t.appendChild(r)}};Be.title="Public Homepage",Be.ghUserLoaded=de.gh_default_user_repo,Be.readme_home=`${de.gh_dr_url}/${de.gh_default_user_repo}/${de.gh_dr_folder}/README.md`,Be.user_contacts=`${de.gh_dr_url}/${de.gh_default_user_repo}/${de.gh_dr_folder}/contacts.md`,Be.fab_questions_list2=`${de.gh_dr_url}/${de.gh_default_user_repo}/${de.gh_dr_folder}/questions/ds-list2.md`,Be.YOUR_READ_ME="",Be.ghUser={name:Be.title,blog:"/"},Be.userContext={username:"",status:"0",directory:{},youtube_links:new Set,leetcode_links:new Set,assessment:{}},Be.INTERNAL_FOLDERS=["my","roadmap","questions","articles","faqs","coding","credits","README.md","contacts.md","assessments"],Be.homeUser={name:Be.title,blog:"/"},Be.navLinks=[{link:"#about",text:"About"}],Be.iconsColorByKey=new Map,Be.contactLinksByKey=new Map,Be.contactTextsByKey=new Map,Be.\u0275fac=function(t){return new(t||Be)(ee(Yn),ee(wr))},Be.\u0275cmp=Pe({type:Be,selectors:[["app-root"]],decls:4,vars:1,consts:[["ondragstart","return false","onselectstart","return false"],[4,"ngIf"]],template:function(t,r){t&1&&(Ie(0,"app-navbar"),$(1,"div",0),Ie(2,"router-outlet"),z(),Ye(3,az,1,0,"app-footer",1)),t&2&&(q(3),ce("ngIf",r.footerVisible))}});var X=Be;function cz(n,e){if(n&1&&($(0,"li",10)(1,"a",11),Q(2),z()()),n&2){let t=e.$implicit;q(),ce("href",t.link,It),q(),Ge(t.text)}}var oM=(()=>{let e=class e{constructor(r,i){this.cdRef=r,this.messaging=i,this.navUser=X.homeUser,this.photoUrl="",this.navLinks=X.navLinks,this.contactsFileFound=!1,this.userLoaded=X.ghUserLoaded,this.isHomeGHUser=!0,i.event$.subscribe(s=>{let o=s;switch(this.userLoaded=X.ghUserLoaded,this.isHomeGHUser=this.userLoaded==de.gh_default_user_repo,o.file){case"HomeGHUser":break;case"GHUser":this.isHomeGHUser?this.navLinks.push({link:"#projects",text:"Solutions"}):this.navLinks.forEach(c=>{let l=X.navLinks.indexOf(c);X.navLinks[l].link=X.ghUser.blog}),this.navUser=X.ghUser,X.userContext.directory.folders.forEach(c=>{let l=c.charAt(0).toUpperCase()+c.slice(1),d=c.toLowerCase();d.endsWith("contacts")||this.navLinks.push({link:this.getNavLink(d),text:l})}),this.addAContactLink();break;default:break}})}getNavLink(r){return this.isHomeGHUser?"/"+r:`/${X.userContext.username}/${r}`}addAContactLink(){let r=X.userContext.directory;r.files&&r.files.includes("contacts.md")?this.navLinks.push({link:this.getNavLink("contacts"),text:"Contacts"}):this.navLinks.push({link:"#about",text:"Contact"})}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(ee(Yn),ee(wr))},e.\u0275cmp=Pe({type:e,selectors:[["app-navbar"]],decls:14,vars:7,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container"],["href","/"],[1,"fa-solid","fa-link",2,"color","green"],[1,"navbar-brand",3,"href"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav","navbar-nav","ml-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","js-scroll-trigger",3,"href"]],template:function(i,s){i&1&&($(0,"nav",0)(1,"div",1)(2,"span")(3,"a",2),Ie(4,"i",3),z(),$(5,"a",4)(6,"b"),Q(7),z()()(),$(8,"button",5),Ie(9,"span",6),z(),$(10,"div",7)(11,"ul",8),Ye(12,cz,3,2,"li",9),Rt(13,"slice"),z()()()()),i&2&&(q(5),ce("href",s.userLoaded,It),q(2),un("\xA0",s.navUser.name,""),q(5),ce("ngForOf",ia(13,3,s.navLinks,0,7)))},dependencies:[Nn,ca]});let n=e;return n})();var ge="primary",Ju=Symbol("RouteTitle"),Uw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ea(n){return new Uw(n)}function uz(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function lz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!_r(n[t],e[t]))return!1;return!0}function _r(n,e){let t=n?Bw(n):void 0,r=e?Bw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!yM(n[i],e[i]))return!1;return!0}function Bw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function yM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function vM(n){return n.length>0?n[n.length-1]:null}function qi(n){return Nm(n)?n:Pi(n)?De(Promise.resolve(n)):oe(n)}var dz={exact:_M,subset:EM},wM={exact:hz,subset:fz,ignored:()=>!0};function aM(n,e,t){return dz[t.paths](n.root,e.root,t.matrixParams)&&wM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function hz(n,e){return _r(n,e)}function _M(n,e,t){if(!Bs(n.segments,e.segments)||!Pf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!_M(n.children[r],e.children[r],t))return!1;return!0}function fz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>yM(n[t],e[t]))}function EM(n,e,t){return IM(n,e,e.segments,t)}function IM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Bs(i,t)||e.hasChildren()||!Pf(i,t,r))}else if(n.segments.length===t.length){if(!Bs(n.segments,t)||!Pf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!EM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Bs(n.segments,i)||!Pf(n.segments,i,r)||!n.children[ge]?!1:IM(n.children[ge],e,s,r)}}function Pf(n,e,t){return e.every((r,i)=>wM[t](n[i].parameters,r.parameters))}var Jr=class{constructor(e=new ke([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ea(this.queryParams),this._queryParamMap}toString(){return mz.serialize(this)}},ke=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Of(this)}},Us=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ea(this.parameters),this._parameterMap}toString(){return DM(this)}};function pz(n,e){return Bs(n,e)&&n.every((t,r)=>_r(t.parameters,e[r].parameters))}function Bs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function gz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ge&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ge&&(t=t.concat(e(i,r)))}),t}var Xu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new Ia,providedIn:"root"});let n=e;return n})(),Ia=class{parse(e){let t=new zw(e);return new Jr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Lu(e.root,!0)}`,r=wz(e.queryParams),i=typeof e.fragment=="string"?`#${yz(e.fragment)}`:"";return`${t}${r}${i}`}},mz=new Ia;function Of(n){return n.segments.map(e=>DM(e)).join("/")}function Lu(n,e){if(!n.hasChildren())return Of(n);if(e){let t=n.children[ge]?Lu(n.children[ge],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ge&&r.push(`${i}:${Lu(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=gz(n,(r,i)=>i===ge?[Lu(n.children[ge],!1)]:[`${i}:${Lu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ge]!=null?`${Of(n)}/${t[0]}`:`${Of(n)}/(${t.join("//")})`}}function bM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kf(n){return bM(n).replace(/%3B/gi,";")}function yz(n){return encodeURI(n)}function $w(n){return bM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ff(n){return decodeURIComponent(n)}function cM(n){return Ff(n.replace(/\+/g,"%20"))}function DM(n){return`${$w(n.path)}${vz(n.parameters)}`}function vz(n){return Object.entries(n).map(([e,t])=>`;${$w(e)}=${$w(t)}`).join("")}function wz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${kf(t)}=${kf(i)}`).join("&"):`${kf(t)}=${kf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var _z=/^[^\/()?;#]+/;function Fw(n){let e=n.match(_z);return e?e[0]:""}var Ez=/^[^\/()?;=#]+/;function Iz(n){let e=n.match(Ez);return e?e[0]:""}var bz=/^[^=?&#]+/;function Dz(n){let e=n.match(bz);return e?e[0]:""}var Cz=/^[^&#]+/;function Tz(n){let e=n.match(Cz);return e?e[0]:""}var zw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ge]=new ke(e,t)),r}parseSegment(){let e=Fw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Us(Ff(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Iz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Fw(this.remaining);i&&(r=i,this.capture(r))}e[Ff(t)]=Ff(r)}parseQueryParam(e){let t=Dz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=Tz(this.remaining);o&&(r=o,this.capture(r))}let i=cM(t),s=cM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Fw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ge);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ge]:new ke([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function CM(n){return n.segments.length>0?new ke([],{[ge]:n}):n}function TM(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=TM(i);if(r===ge&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ke(n.segments,e);return Sz(t)}function Sz(n){if(n.numberOfChildren===1&&n.children[ge]){let e=n.children[ge];return new ke(n.segments.concat(e.segments),e.children)}return n}function qu(n){return n instanceof Jr}function Az(n,e,t=null,r=null){let i=SM(n);return AM(i,e,t,r)}function SM(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new ke(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=CM(r);return e??i}function AM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Vw(i,i,i,t,r);let s=xz(e);if(s.toRoot())return Vw(i,i,new ke([],{}),t,r);let o=Mz(s,i,n),a=o.processChildren?Bu(o.segmentGroup,o.index,s.commands):MM(o.segmentGroup,o.index,s.commands);return Vw(i,o.segmentGroup,a,t,r)}function Vf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Hu(n){return typeof n=="object"&&n!=null&&n.outlets}function Vw(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=xM(n,e,t);let a=CM(TM(o));return new Jr(a,s,i)}function xM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=xM(s,e,t)}),new ke(n.segments,r)}var Lf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vf(r[0]))throw new re(4003,!1);let i=r.find(Hu);if(i&&i!==vM(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Lf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Lf(t,e,r)}var va=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Mz(n,e,t){if(n.isAbsolute)return new va(e,!0,0);if(!t)return new va(e,!1,NaN);if(t.parent===null)return new va(t,!0,0);let r=Vf(n.commands[0])?0:1,i=t.segments.length-1+r;return Rz(t,i,n.numberOfDoubleDots)}function Rz(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new va(r,!1,i-s)}function kz(n){return Hu(n[0])?n[0].outlets:{[ge]:n}}function MM(n,e,t){if(n??=new ke([],{}),n.segments.length===0&&n.hasChildren())return Bu(n,e,t);let r=Nz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ke(n.segments.slice(0,r.pathIndex),{});return s.children[ge]=new ke(n.segments.slice(r.pathIndex),n.children),Bu(s,0,i)}else return r.match&&i.length===0?new ke(n.segments,{}):r.match&&!n.hasChildren()?qw(n,e,t):r.match?Bu(n,0,i):qw(n,e,t)}function Bu(n,e,t){if(t.length===0)return new ke(n.segments,{});{let r=kz(t),i={};if(Object.keys(r).some(s=>s!==ge)&&n.children[ge]&&n.numberOfChildren===1&&n.children[ge].segments.length===0){let s=Bu(n.children[ge],e,t);return new ke(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=MM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ke(n.segments,i)}}function Nz(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Hu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!lM(c,l,o))return s;r+=2}else{if(!lM(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function qw(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Hu(s)){let c=Pz(s.outlets);return new ke(r,c)}if(i===0&&Vf(t[0])){let c=n.segments[e];r.push(new Us(c.path,uM(t[0]))),i++;continue}let o=Hu(s)?s.outlets[ge]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Vf(a)?(r.push(new Us(o,uM(a))),i+=2):(r.push(new Us(o,{})),i++)}return new ke(r,{})}function Pz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=qw(new ke([],{}),0,r))}),e}function uM(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function lM(n,e,t){return n==t.path&&_r(e,t.parameters)}var $u="imperative",St=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(St||{}),Fn=class{constructor(e,t){this.id=e,this.url=t}},ba=class extends Fn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=St.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xr=class extends Fn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=St.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},In=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(In||{}),jf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(jf||{}),Zr=class extends Fn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=St.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},zi=class extends Fn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=St.NavigationSkipped}},Gu=class extends Fn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=St.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Uf=class extends Fn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=St.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hw=class extends Fn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=St.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gw=class extends Fn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=St.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ww=class extends Fn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=St.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kw=class extends Fn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=St.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qw=class{constructor(e){this.route=e,this.type=St.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yw=class{constructor(e){this.route=e,this.type=St.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Zw=class{constructor(e){this.snapshot=e,this.type=St.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jw=class{constructor(e){this.snapshot=e,this.type=St.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xw=class{constructor(e){this.snapshot=e,this.type=St.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},e_=class{constructor(e){this.snapshot=e,this.type=St.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bf=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=St.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Wu=class{},Da=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Oz(n,e){return n.providers&&!n._injector&&(n._injector=tf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Xn(n){return n.outlet||ge}function Fz(n,e){let t=n.filter(r=>Xn(r)===e);return t.push(...n.filter(r=>Xn(r)!==e)),t}function el(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var t_=class{get injector(){return el(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new tl(this.rootInjector),this.attachRef=null}},tl=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new t_(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(L(Kt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),$f=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=n_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=n_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=r_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return r_(e,this._root).map(t=>t.value)}};function n_(n,e){if(n===e.value)return e;for(let t of e.children){let r=n_(n,t);if(r)return r}return null}function r_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=r_(n,t);if(r.length)return r.unshift(e),r}return[]}var En=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ya(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var zf=class extends $f{constructor(e,t){super(e),this.snapshot=t,h_(this,e)}toString(){return this.snapshot.toString()}};function RM(n){let e=Vz(n),t=new xt([new Us("",{})]),r=new xt({}),i=new xt({}),s=new xt({}),o=new xt(""),a=new ln(t,r,s,o,i,ge,n,e.root);return a.snapshot=e.root,new zf(new En(a,[]),e)}function Vz(n){let e={},t={},r={},i="",s=new wa([],e,r,i,t,ge,n,null,{});return new Hf("",new En(s,[]))}var ln=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[Ju]))??oe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>Ea(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>Ea(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function qf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),i?.data),n._resolvedData)}:r={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},i&&NM(i)&&(r.resolve[Ju]=i.title),r}var wa=class{get title(){return this.data?.[Ju]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ea(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ea(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Hf=class extends $f{constructor(e,t){super(t),this.url=e,h_(this,t)}toString(){return kM(this._root)}};function h_(n,e){e.value._routerState=n,e.children.forEach(t=>h_(n,t))}function kM(n){let e=n.children.length>0?` { ${n.children.map(kM).join(", ")} } `:"";return`${n.value}${e}`}function Lw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,_r(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),_r(e.params,t.params)||n.paramsSubject.next(t.params),lz(e.url,t.url)||n.urlSubject.next(t.url),_r(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function i_(n,e){let t=_r(n.params,e.params)&&pz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||i_(n.parent,e.parent))}function NM(n){return typeof n.title=="string"||n.title===null}var f_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ge,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=U(tl),this.location=U(kn),this.changeDetector=U(Yn),this.inputBinder=U(Yf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new s_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=pr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ps]});let n=e;return n})(),s_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ln?this.route:e===tl?this.childContexts:this.parent.get(e,t)}},Yf=new H(""),dM=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Hc([i.queryParams,i.params,i.data]).pipe(He(([o,a,c],l)=>(c=M(M(M({},o),a),c),l===0?oe(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=jA(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function Lz(n,e,t){let r=Ku(n,e._root,t?t._root:void 0);return new zf(r,e)}function Ku(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=jz(n,e,t);return new En(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ku(n,a)),o}}let r=Uz(e.value),i=e.children.map(s=>Ku(n,s));return new En(r,i)}}function jz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ku(n,r,i);return Ku(n,r)})}function Uz(n){return new ln(new xt(n.url),new xt(n.params),new xt(n.queryParams),new xt(n.fragment),new xt(n.data),n.outlet,n.component,n)}var Qu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},PM="ngNavigationCancelingError";function Gf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=qu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=OM(!1,In.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function OM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[PM]=!0,t.cancellationCode=e,t}function Bz(n){return FM(n)&&qu(n.url)}function FM(n){return!!n&&n[PM]}var $z=(n,e,t,r)=>se(i=>(new o_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),o_=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Lw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ya(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ya(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ya(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ya(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new e_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Jw(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Lw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Lw(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Wf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_a=class{constructor(e,t){this.component=e,this.route=t}};function zz(n,e,t){let r=n._root,i=e?e._root:null;return ju(r,i,t,[r.value])}function qz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ta(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!HC(n)?n:e.get(n):r}function ju(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ya(e);return n.children.forEach(o=>{Hz(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>zu(a,t.getContext(o),i)),i}function Hz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Gz(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Wf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ju(n,e,a?a.children:null,r,i):ju(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _a(a.outlet.component,o))}else o&&zu(e,a,i),i.canActivateChecks.push(new Wf(r)),s.component?ju(n,null,a?a.children:null,r,i):ju(n,null,t,r,i);return i}function Gz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Bs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Bs(n.url,e.url)||!_r(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!i_(n,e)||!_r(n.queryParams,e.queryParams);case"paramsChange":default:return!i_(n,e)}}function zu(n,e,t){let r=ya(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?zu(o,e.children.getContext(s),t):zu(o,null,t):zu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new _a(e.outlet.component,i)):t.canDeactivateChecks.push(new _a(null,i)):t.canDeactivateChecks.push(new _a(null,i))}function nl(n){return typeof n=="function"}function Wz(n){return typeof n=="boolean"}function Kz(n){return n&&nl(n.canLoad)}function Qz(n){return n&&nl(n.canActivate)}function Yz(n){return n&&nl(n.canActivateChild)}function Zz(n){return n&&nl(n.canDeactivate)}function Jz(n){return n&&nl(n.canMatch)}function VM(n){return n instanceof Or||n?.name==="EmptyError"}var Nf=Symbol("INITIAL_VALUE");function Ca(){return He(n=>Hc(n.map(e=>e.pipe(Vr(1),Lr(Nf)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===Nf)return Nf;if(t===!1||Xz(t))return t}return!0}),_t(e=>e!==Nf),Vr(1)))}function Xz(n){return qu(n)||n instanceof Qu}function e4(n,e){return dt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?oe(te(M({},t),{guardsResult:!0})):t4(o,r,i,n).pipe(dt(a=>a&&Wz(a)?n4(r,s,n,e):oe(a)),se(a=>te(M({},t),{guardsResult:a})))})}function t4(n,e,t,r){return De(n).pipe(dt(i=>a4(i.component,i.route,t,e,r)),gn(i=>i!==!0,!0))}function n4(n,e,t,r){return De(e).pipe(Fr(i=>ko(i4(i.route.parent,r),r4(i.route,r),o4(n,i.path,t),s4(n,i.route,t))),gn(i=>i!==!0,!0))}function r4(n,e){return n!==null&&e&&e(new Xw(n)),oe(!0)}function i4(n,e){return n!==null&&e&&e(new Zw(n)),oe(!0)}function s4(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return oe(!0);let i=r.map(s=>Gd(()=>{let o=el(e)??t,a=Ta(s,o),c=Qz(a)?a.canActivate(e,n):Mn(o,()=>a(e,n));return qi(c).pipe(gn())}));return oe(i).pipe(Ca())}function o4(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>qz(o)).filter(o=>o!==null).map(o=>Gd(()=>{let a=o.guards.map(c=>{let l=el(o.node)??t,d=Ta(c,l),f=Yz(d)?d.canActivateChild(r,n):Mn(l,()=>d(r,n));return qi(f).pipe(gn())});return oe(a).pipe(Ca())}));return oe(s).pipe(Ca())}function a4(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return oe(!0);let o=s.map(a=>{let c=el(e)??i,l=Ta(a,c),d=Zz(l)?l.canDeactivate(n,e,t,r):Mn(c,()=>l(n,e,t,r));return qi(d).pipe(gn())});return oe(o).pipe(Ca())}function c4(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return oe(!0);let s=i.map(o=>{let a=Ta(o,n),c=Kz(a)?a.canLoad(e,t):Mn(n,()=>a(e,t));return qi(c)});return oe(s).pipe(Ca(),LM(r))}function LM(n){return Tm(ht(e=>{if(typeof e!="boolean")throw Gf(n,e)}),se(e=>e===!0))}function u4(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return oe(!0);let s=i.map(o=>{let a=Ta(o,n),c=Jz(a)?a.canMatch(e,t):Mn(n,()=>a(e,t));return qi(c)});return oe(s).pipe(Ca(),LM(r))}var Yu=class{constructor(e){this.segmentGroup=e||null}},Zu=class extends Error{constructor(e){super(),this.urlTree=e}};function ma(n){return Ro(new Yu(n))}function l4(n){return Ro(new re(4e3,!1))}function d4(n){return Ro(OM(!1,In.GuardRejected))}var a_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return oe(r);if(i.numberOfChildren>1||!i.children[ge])return l4(`${e.redirectTo}`);i=i.children[ge]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:m,data:w,title:D}=i,C=Mn(s,()=>a({params:m,data:w,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:D}));if(C instanceof Jr)throw new Zu(C);t=C}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Zu(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Jr(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ke(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},c_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function h4(n,e,t,r,i){let s=jM(n,e,t);return s.matched?(r=Oz(e,r),u4(r,e,t,i).pipe(se(o=>o===!0?s:M({},c_)))):oe(s)}function jM(n,e,t){if(e.path==="**")return f4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},c_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||uz)(t,n,e);if(!i)return M({},c_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?M(M({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function f4(n){return{matched:!0,parameters:n.length>0?vM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function hM(n,e,t,r){return t.length>0&&m4(n,t,r)?{segmentGroup:new ke(e,g4(r,new ke(t,n.children))),slicedSegments:[]}:t.length===0&&y4(n,t,r)?{segmentGroup:new ke(n.segments,p4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ke(n.segments,n.children),slicedSegments:t}}function p4(n,e,t,r){let i={};for(let s of t)if(Zf(n,e,s)&&!r[Xn(s)]){let o=new ke([],{});i[Xn(s)]=o}return M(M({},r),i)}function g4(n,e){let t={};t[ge]=e;for(let r of n)if(r.path===""&&Xn(r)!==ge){let i=new ke([],{});t[Xn(r)]=i}return t}function m4(n,e,t){return t.some(r=>Zf(n,e,r)&&Xn(r)!==ge)}function y4(n,e,t){return t.some(r=>Zf(n,e,r))}function Zf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function v4(n,e,t){return e.length===0&&!n.children[t]}var u_=class{};function w4(n,e,t,r,i,s,o="emptyOnly"){return new l_(n,e,t,r,i,o,s).recognize()}var _4=31,l_=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new a_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=hM(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:r})=>{let i=new En(r,t),s=new Hf("",i),o=Az(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new wa([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ge,t).pipe(se(r=>({children:r,rootSnapshot:t})),vi(r=>{if(r instanceof Zu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Yu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(se(o=>o instanceof En?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return De(s).pipe(Fr(o=>{let a=r.children[o],c=Fz(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Es((o,a)=>(o.push(...a),o)),wi(null),Fm(),dt(o=>{if(o===null)return ma(r);let a=UM(o);return E4(a),oe(a)}))}processSegment(e,t,r,i,s,o,a){return De(t).pipe(Fr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(vi(l=>{if(l instanceof Yu)return oe(null);throw l}))),gn(c=>!!c),vi(c=>{if(VM(c))return v4(r,i,s)?oe(new u_):ma(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Xn(r)!==o&&(o===ge||!Zf(i,s,r))?ma(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):ma(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=jM(t,i,s);if(!c)return ma(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>_4&&(this.allowRedirects=!1));let m=new wa(s,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,fM(i),Xn(i),i.component??i._loadedComponent??null,i,pM(i)),w=qf(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(w.params),m.data=Object.freeze(w.data);let D=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(dt(C=>this.processSegment(e,r,t,C.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=h4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(He(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(He(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=c,w=new wa(g,f,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,fM(r),Xn(r),r.component??r._loadedComponent??null,r,pM(r)),D=qf(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(D.params),w.data=Object.freeze(D.data);let{segmentGroup:C,slicedSegments:P}=hM(t,g,m,l);if(P.length===0&&C.hasChildren())return this.processChildren(d,l,C,w).pipe(se(F=>new En(w,F)));if(l.length===0&&P.length===0)return oe(new En(w,[]));let O=Xn(r)===s;return this.processSegment(d,l,C,P,O?ge:s,!0,w).pipe(se(F=>new En(w,F instanceof En?[F]:[])))}))):ma(t)))}getChildConfig(e,t,r){return t.children?oe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?oe({routes:t._loadedRoutes,injector:t._loadedInjector}):c4(e,t,r,this.urlSerializer).pipe(dt(i=>i?this.configLoader.loadChildren(e,t).pipe(ht(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):d4(t))):oe({routes:[],injector:e})}};function E4(n){n.sort((e,t)=>e.value.outlet===ge?-1:t.value.outlet===ge?1:e.value.outlet.localeCompare(t.value.outlet))}function I4(n){let e=n.value.routeConfig;return e&&e.path===""}function UM(n){let e=[],t=new Set;for(let r of n){if(!I4(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=UM(r.children);e.push(new En(r.value,i))}return e.filter(r=>!t.has(r))}function fM(n){return n.data||{}}function pM(n){return n.resolve||{}}function b4(n,e,t,r,i,s){return dt(o=>w4(n,e,t,r,o.extractedUrl,i,s).pipe(se(({state:a,tree:c})=>te(M({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function D4(n,e){return dt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return oe(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of BM(c))o.add(l);let a=0;return De(o).pipe(Fr(c=>s.has(c)?C4(c,r,n,e):(c.data=qf(c,c.parent,n).resolve,oe(void 0))),ht(()=>a++),No(1),dt(c=>a===o.size?oe(t):Ht))})}function BM(n){let e=n.children.map(t=>BM(t)).flat();return[n,...e]}function C4(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!NM(i)&&(s[Ju]=i.title),T4(s,n,e,r).pipe(se(o=>(n._resolvedData=o,n.data=qf(n,n.parent,t).resolve,null)))}function T4(n,e,t,r){let i=Bw(n);if(i.length===0)return oe({});let s={};return De(i).pipe(dt(o=>S4(n[o],e,t,r).pipe(gn(),ht(a=>{if(a instanceof Qu)throw Gf(new Ia,a);s[o]=a}))),No(1),Wc(s),vi(o=>VM(o)?Ht:Ro(o)))}function S4(n,e,t,r){let i=el(e)??r,s=Ta(n,i),o=s.resolve?s.resolve(e,t):Mn(i,()=>s(e,t));return qi(o)}function jw(n){return He(e=>{let t=n(e);return t?De(t).pipe(se(()=>e)):oe(e)})}var $M=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ge);return i}getResolvedTitleForRoute(r){return r.data[Ju]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>U(A4),providedIn:"root"});let n=e;return n})(),A4=(()=>{let e=class e extends $M{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(L(Pn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),rl=new H("",{providedIn:"root",factory:()=>({})}),x4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pe({type:e,selectors:[["ng-component"]],standalone:!0,features:[gu],decls:1,vars:0,template:function(i,s){i&1&&Ie(0,"router-outlet")},dependencies:[f_],encapsulation:2});let n=e;return n})();function p_(n){let e=n.children&&n.children.map(p_),t=e?te(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ge&&(t.component=x4),t}var Kf=new H(""),g_=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=U(pf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return oe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=qi(r.loadComponent()).pipe(se(zM),ht(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),_i(()=>{this.componentLoaders.delete(r)})),s=new To(i,()=>new Ne).pipe(Co());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return oe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=M4(i,this.compiler,r,this.onLoadEndListener).pipe(_i(()=>{this.childrenLoaders.delete(i)})),a=new To(o,()=>new Ne).pipe(Co());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function M4(n,e,t,r){return qi(n.loadChildren()).pipe(se(zM),dt(i=>i instanceof ou||Array.isArray(i)?oe(i):De(e.compileModuleAsync(i))),se(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Kf,[],{optional:!0,self:!0}).flat()),{routes:o.map(p_),injector:s}}))}function R4(n){return n&&typeof n=="object"&&"default"in n}function zM(n){return R4(n)?n.default:n}var m_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>U(k4),providedIn:"root"});let n=e;return n})(),k4=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),qM=new H(""),HM=new H("");function N4(n,e,t){let r=n.get(HM),i=n.get(Dt);return n.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),P4(n))),{onViewTransitionCreated:c}=r;return c&&Mn(n,()=>c({transition:a,from:e,to:t})),o})}function P4(n){return new Promise(e=>{kv({read:()=>setTimeout(e)},{injector:n})})}var O4=new H(""),y_=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ne,this.transitionAbortSubject=new Ne,this.configLoader=U(g_),this.environmentInjector=U(Kt),this.urlSerializer=U(Xu),this.rootContexts=U(tl),this.location=U(oa),this.inputBindingEnabled=U(Yf,{optional:!0})!==null,this.titleStrategy=U($M),this.options=U(rl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=U(m_),this.createViewTransition=U(qM,{optional:!0}),this.navigationErrorHandler=U(O4,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>oe(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Qw(s)),i=s=>this.events.next(new Yw(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(te(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new xt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:$u,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(o=>o.id!==0),se(o=>te(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),He(o=>{let a=!1,c=!1;return oe(o).pipe(He(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",In.SupersededByNewNavigation),Ht;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?te(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new zi(l.id,this.urlSerializer.serialize(l.rawUrl),g,jf.IgnoredSameUrlNavigation)),l.resolve(!1),Ht}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return oe(l).pipe(He(g=>{let m=this.transitions?.getValue();return this.events.next(new ba(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?Ht:Promise.resolve(g)}),b4(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ht(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=te(M({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new Uf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:m,source:w,restoredState:D,extras:C}=l,P=new ba(g,this.urlSerializer.serialize(m),w,D);this.events.next(P);let O=RM(this.rootComponentType).snapshot;return this.currentTransition=o=te(M({},l),{targetSnapshot:O,urlAfterRedirects:m,extras:te(M({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,oe(o)}else{let g="";return this.events.next(new zi(l.id,this.urlSerializer.serialize(l.extractedUrl),g,jf.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ht}}),ht(l=>{let d=new Hw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),se(l=>(this.currentTransition=o=te(M({},l),{guards:zz(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),e4(this.environmentInjector,l=>this.events.next(l)),ht(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw Gf(this.urlSerializer,l.guardsResult);let d=new Gw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),_t(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",In.GuardRejected),!1)),jw(l=>{if(l.guards.canActivateChecks.length)return oe(l).pipe(ht(d=>{let f=new Ww(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),He(d=>{let f=!1;return oe(d).pipe(D4(this.paramsInheritanceStrategy,this.environmentInjector),ht({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",In.NoDataFromResolver)}}))}),ht(d=>{let f=new Kw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),jw(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(ht(m=>{f.component=m}),se(()=>{})));for(let m of f.children)g.push(...d(m));return g};return Hc(d(l.targetSnapshot.root)).pipe(wi(null),Vr(1))}),jw(()=>this.afterPreactivation()),He(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?De(f).pipe(se(()=>o)):oe(o)}),se(l=>{let d=Lz(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=te(M({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),ht(()=>{this.events.next(new Wu)}),$z(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Vr(1),ht({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Yc(this.transitionAbortSubject.pipe(ht(l=>{throw l}))),_i(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",In.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),vi(l=>{if(c=!0,FM(l))this.events.next(new Zr(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Bz(l)?this.events.next(new Da(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Gu(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=Mn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Qu){let{message:g,cancellationCode:m}=Gf(this.urlSerializer,f);this.events.next(new Zr(o.id,this.urlSerializer.serialize(o.extractedUrl),g,m)),this.events.next(new Da(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(l);o.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return Ht}))}))}cancelNavigationTransition(r,i,s){let o=new Zr(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function F4(n){return n!==$u}var V4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>U(L4),providedIn:"root"});let n=e;return n})(),d_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},L4=(()=>{let e=class e extends d_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Gh(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),GM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>U(j4),providedIn:"root"});let n=e;return n})(),j4=(()=>{let e=class e extends GM{constructor(){super(...arguments),this.location=U(oa),this.urlSerializer=U(Xu),this.options=U(rl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=U(m_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=RM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ba)this.stateMemento=this.createStateMemento();else if(r instanceof zi)this.rawUrlTree=i.initialUrl;else if(r instanceof Uf){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Wu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Zr&&(r.code===In.GuardRejected||r.code===In.NoDataFromResolver)?this.restoreHistory(i):r instanceof Gu?this.restoreHistory(i,!0):r instanceof Xr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Jr?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Gh(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Uu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Uu||{});function WM(n,e){n.events.pipe(_t(t=>t instanceof Xr||t instanceof Zr||t instanceof Gu||t instanceof zi),se(t=>t instanceof Xr||t instanceof zi?Uu.COMPLETE:(t instanceof Zr?t.code===In.Redirect||t.code===In.SupersededByNewNavigation:!1)?Uu.REDIRECTING:Uu.FAILED),_t(t=>t!==Uu.REDIRECTING),Vr(1)).subscribe(()=>{e()})}function U4(n){throw n}var B4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},bn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=U(uf),this.stateManager=U(GM),this.options=U(rl,{optional:!0})||{},this.pendingTasks=U(qr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=U(y_),this.urlSerializer=U(Xu),this.location=U(oa),this.urlHandlingStrategy=U(m_),this._events=new Ne,this.errorHandler=this.options.errorHandler||U4,this.navigated=!1,this.routeReuseStrategy=U(V4),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=U(Kf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!U(Yf,{optional:!0}),this.eventsSubscription=new st,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Zr&&i.code!==In.Redirect&&i.code!==In.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Xr)this.navigated=!0;else if(i instanceof Da){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=M({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||F4(s.source)},a);this.scheduleNavigation(c,$u,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}q4(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$u,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=M({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(p_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=SM(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return AM(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=qu(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,$u,null,i)}navigate(r,i={skipLocationChange:!1}){return z4(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=M({},B4):i===!1?s=M({},$4):s=i,qu(r))return aM(this.currentUrlTree,r,s);let o=this.parseUrl(r);return aM(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,m)=>{c=g,l=m});let f=this.pendingTasks.add();return WM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function z4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}function q4(n){return!(n instanceof Wu)&&!(n instanceof Da)}var Qf=class{};var H4=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(_t(r=>r instanceof Xr),Fr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=tf(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return De(s).pipe(yi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=oe(null);let o=s.pipe(dt(a=>a===null?oe(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return De([o,a]).pipe(yi())}else return o})}};e.\u0275fac=function(i){return new(i||e)(L(bn),L(pf),L(Kt),L(Qf),L(g_))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),KM=new H(""),G4=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ba?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Xr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof zi&&r.code===jf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Bf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Bf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){VS()},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function W4(n){return n.routerState.root}function il(n,e){return{\u0275kind:n,\u0275providers:e}}function K4(){let n=U(yn);return e=>{let t=n.get(Gr);if(e!==t.components[0])return;let r=n.get(bn),i=n.get(QM);n.get(v_)===1&&r.initialNavigation(),n.get(YM,null,ve.Optional)?.setUpPreloading(),n.get(KM,null,ve.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var QM=new H("",{factory:()=>new Ne}),v_=new H("",{providedIn:"root",factory:()=>1});function Q4(){return il(2,[{provide:v_,useValue:0},{provide:hf,multi:!0,deps:[yn],useFactory:e=>{let t=e.get(QA,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(bn),s=e.get(QM);WM(i,()=>{r(!0)}),e.get(y_).afterPreactivation=()=>(r(!0),s.closed?oe(void 0):s),i.initialNavigation()}))}}])}function Y4(){return il(3,[{provide:hf,multi:!0,useFactory:()=>{let e=U(bn);return()=>{e.setUpLocationChangeListener()}}},{provide:v_,useValue:2}])}var YM=new H("");function Z4(n){return il(0,[{provide:YM,useExisting:H4},{provide:Qf,useExisting:n}])}function J4(){return il(8,[dM,{provide:Yf,useExisting:dM}])}function X4(n){let e=[{provide:qM,useValue:N4},{provide:HM,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return il(9,e)}var gM=new H("ROUTER_FORROOT_GUARD"),eq=[oa,{provide:Xu,useClass:Ia},bn,tl,{provide:ln,useFactory:W4,deps:[bn]},g_,[]],w_=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[eq,[],{provide:Kf,multi:!0,useValue:r},{provide:gM,useFactory:iq,deps:[[bn,new Xo,new Lh]]},{provide:rl,useValue:i||{}},i?.useHash?nq():rq(),tq(),i?.preloadingStrategy?Z4(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?sq(i):[],i?.bindToComponentInputs?J4().\u0275providers:[],i?.enableViewTransitions?X4().\u0275providers:[],oq()]}}static forChild(r){return{ngModule:e,providers:[{provide:Kf,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(L(gM,8))},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({});let n=e;return n})();function tq(){return{provide:KM,useFactory:()=>{let n=U(ex),e=U(_e),t=U(rl),r=U(y_),i=U(Xu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new G4(i,r,n,e,t)}}}function nq(){return{provide:Fs,useClass:ZA}}function rq(){return{provide:Fs,useClass:tw}}function iq(n){return"guarded"}function sq(n){return[n.initialNavigation==="disabled"?Y4().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Q4().\u0275providers:[]]}var mM=new H("");function oq(){return[{provide:mM,useFactory:K4},{provide:ff,multi:!0,useExisting:mM}]}var Oe=class n{static parseHtmlLine(e){return e.includes("Widget:")?{Widget:"NAVI"}:{PageType:e}}static isMobileBrowser(){let e=navigator.userAgent||window.opera;return!!(/android/i.test(e)||/iPad|iPhone|iPod/.test(e)&&!window.MSStream)}static toString(e){return e==null?"":typeof e=="string"?e:String(e)}static unescape(e){return e=this.toString(e),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")}static getTodaysDate(e){let t=new Date().toUTCString();return t=t.replaceAll(" ",e),t.replace(",","")}static getBasePath(e){let t="",r=e.snapshot.url[0];return r&&r.path&&(t=r.path),r&&r.path?.toLocaleLowerCase()}static getUrl(e){let t=e.url.indexOf("?");return t>0?e.url.substring(0,t):e.url}static getRouterUrl(e,t){return this.getUrl(e).replace("/"+t,"")}static getRouteParam(e,t){return e.snapshot.paramMap.get(t)?.toLocaleLowerCase()}static getQueryParam(e,t){return e.snapshot.queryParamMap.get(t)}static getFirstLineEnd(e){return e.indexOf(`
`)}static getFirstLine(e){let t=e.indexOf(`
`);return t!==-1?e.substring(0,t):e}static getDataValueFromString(e){let t=e.charAt(0);return t=="["?(e=e.replace(/'/g,'"'),e=JSON.parse(e),e):t=="'"||t=="`"||t=='"'?(e=e.replace(/'/g,'"'),JSON.parse(e)):new Number(e)}static getFilesInFolder(e,t){return e.files.filter(r=>r.includes(t))}static getFileNameWithoutCurrentFolder(e,t){return n.getFileName(e.substring(e.indexOf(t)+t.length+1),!0)}static getFileName(e,t=!1){let i=(t?e:e.substring(e.lastIndexOf("/")+1)).replace(/[-_]/g," ");return i.substring(0,i.lastIndexOf("."))}static getFileNameWithCategory(e,t=!1){let r="",i=e.lastIndexOf("/");e.indexOf("/")!=-1&&(r=t?e.substring(0,e.indexOf("/")):e.substring(e.lastIndexOf("/",i-1)+1,i));let a=e.substring(i+1).replace(/[-_]/g," ");return{Category:r,File:a.substring(0,a.lastIndexOf("."))}}static closestHost(e){e=e.substring(e.indexOf("."));let t=new Map;return t.set("raw.githubusercontent","github"),t.set(".githubusercontent","github"),t.set("youtu","youtube"),t.set(".publichome","link"),t.has(e)?t.get(e):e}static getGhUserFilePath(e,t,r=!1){return r?`${de.gh_api_url}/repos/${e}/${de.gh_private_dr_folder}/contents/${t}`:`${de.gh_dr_url}/${e}/${de.gh_dr_folder}/${t}`}};var Vn=class{constructor(e){if(this.githubService=e,this.router=U(bn),this.route=U(ln),this.messaging=U(wr),this.routerFileUrl="",this.hasPrivateAccess=!1,this.basePath="",this.articleFolderName="",this.basePath=Oe.getBasePath(this.route),X.INTERNAL_FOLDERS.includes(this.basePath))this.router.navigate(["/i"+Oe.getUrl(this.router)]);else if(this.basePath=="i"){let r=Oe.getRouteParam(this.route,"folder");r==null&&(r=""),this.articleFolderName=r}else console.debug("It is a user's public article !!");let t=Oe.getRouteParam(this.route,"ghUser");t||(t=de.gh_default_user_repo),this.routerFileUrl=Oe.getRouterUrl(this.router,t),t&&this.githubService.getJwtToken(t).then(r=>this.githubService.getAccessToken(r).then(i=>{this.hasPrivateAccess=i!=null})).finally(()=>this.initialiseUserContext(t))}initialiseUserContext(e){return b(this,null,function*(){this.githubService.get("users/"+e).then(t=>{X.ghUser=JSON.parse(t),X.userContext.username=e,this.githubService.getGhDirectoryContents(e,!0,this.articleFolderName).then(r=>{X.userContext.directory=r,this.messaging.send({cmd:"page",file:"GHUser"}),this.messaging.send({cmd:"Directory"})})}).finally(()=>{X.ghUserLoaded=e,this.messaging.send({cmd:"ContextInit"})})})}};function jt(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function Xf(n,e,t,r){if(typeof t!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>Xf.bind(null,n,s,i,r),t)():Promise.resolve().then(()=>n.registry[e]?n.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),t)():t(r))}function ZM(n,e,t,r){let i=r;n.registry[t]||(n.registry[t]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(c=>(a=c,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),n.registry[t].push({hook:r,orig:i})}function JM(n,e,t){if(!n.registry[e])return;let r=n.registry[e].map(i=>i.orig).indexOf(t);r!==-1&&n.registry[e].splice(r,1)}var XM=Function.bind,eR=XM.bind(XM);function tR(n,e,t){let r=eR(JM,null).apply(null,t?[e,t]:[e]);n.api={remove:r},n.remove=r,["before","error","after","wrap"].forEach(i=>{let s=t?[e,i,t]:[e,i];n[i]=n.api[i]=eR(ZM,null).apply(null,s)})}function aq(){let n=Symbol("Singular"),e={registry:{}},t=Xf.bind(null,e,n);return tR(t,e,n),t}function cq(){let n={registry:{}},e=Xf.bind(null,n);return tR(e,n),e}var nR={Singular:aq,Collection:cq};var uq="0.0.0-development",lq=`octokit-endpoint.js/${uq} ${jt()}`,dq={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":lq},mediaType:{format:""}};function hq(n){return n?Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=n[t],e),{}):{}}function fq(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function sR(n,e){let t=Object.assign({},n);return Object.keys(e).forEach(r=>{fq(e[r])?r in n?t[r]=sR(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function rR(n){for(let e in n)n[e]===void 0&&delete n[e];return n}function E_(n,e,t){if(typeof e=="string"){let[i,s]=e.split(" ");t=Object.assign(s?{method:i,url:s}:{url:i},t)}else t=Object.assign({},e);t.headers=hq(t.headers),rR(t),rR(t.headers);let r=sR(n||{},t);return t.url==="/graphql"&&(n&&n.mediaType.previews?.length&&(r.mediaType.previews=n.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function pq(n,e){let t=/\?/.test(n)?"&":"?",r=Object.keys(e);return r.length===0?n:n+t+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var gq=/\{[^}]+\}/g;function mq(n){return n.replace(/^\W+|\W+$/g,"").split(/,/)}function yq(n){let e=n.match(gq);return e?e.map(mq).reduce((t,r)=>t.concat(r),[]):[]}function iR(n,e){let t={__proto__:null};for(let r of Object.keys(n))e.indexOf(r)===-1&&(t[r]=n[r]);return t}function oR(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function Aa(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function sl(n,e,t){return e=n==="+"||n==="#"?oR(e):Aa(e),t?Aa(t)+"="+e:e}function Sa(n){return n!=null}function __(n){return n===";"||n==="&"||n==="?"}function vq(n,e,t,r){var i=n[t],s=[];if(Sa(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(sl(e,i,__(e)?t:""));else if(r==="*")Array.isArray(i)?i.filter(Sa).forEach(function(o){s.push(sl(e,o,__(e)?t:""))}):Object.keys(i).forEach(function(o){Sa(i[o])&&s.push(sl(e,i[o],o))});else{let o=[];Array.isArray(i)?i.filter(Sa).forEach(function(a){o.push(sl(e,a))}):Object.keys(i).forEach(function(a){Sa(i[a])&&(o.push(Aa(a)),o.push(sl(e,i[a].toString())))}),__(e)?s.push(Aa(t)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?Sa(i)&&s.push(Aa(t)):i===""&&(e==="&"||e==="?")?s.push(Aa(t)+"="):i===""&&s.push("");return s}function wq(n){return{expand:_q.bind(null,n)}}function _q(n,e){var t=["+","#",".","/",";","?","&"];return n=n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="",c=[];if(t.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(l){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(l);c.push(vq(e,a,d[1],d[2]||d[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(c.length!==0?a:"")+c.join(o)}else return c.join(",")}else return oR(s)}),n==="/"?n:n.replace(/\/$/,"")}function aR(n){let e=n.method.toUpperCase(),t=(n.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},n.headers),i,s=iR(n,["method","baseUrl","url","headers","request","mediaType"]),o=yq(t);t=wq(t).expand(s),/^http/.test(t)||(t=n.baseUrl+t);let a=Object.keys(n).filter(d=>o.includes(d)).concat("baseUrl"),c=iR(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(n.mediaType.format&&(r.accept=r.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${n.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&n.mediaType.previews?.length)){let d=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=d.concat(n.mediaType.previews).map(f=>{let g=n.mediaType.format?`.${n.mediaType.format}`:"+json";return`application/vnd.github.${f}-preview${g}`}).join(",")}return["GET","HEAD"].includes(e)?t=pq(t,c):"data"in c?i=c.data:Object.keys(c).length&&(i=c),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:t,headers:r},typeof i<"u"?{body:i}:null,n.request?{request:n.request}:null)}function Eq(n,e,t){return aR(E_(n,e,t))}function cR(n,e){let t=E_(n,e),r=Eq.bind(null,t);return Object.assign(r,{DEFAULTS:t,defaults:cR.bind(null,t),merge:E_.bind(null,t),parse:aR})}var uR=cR(null,dq);var ei=class extends Error{name;status;request;response;constructor(e,t,r){super(e),this.name="HttpError",this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);let i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}};var Iq="0.0.0-development",bq={headers:{"user-agent":`octokit-request.js/${Iq} ${jt()}`}};function Dq(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function lR(n){return b(this,null,function*(){let e=n.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let t=n.request?.log||console,r=n.request?.parseSuccessResponseBody!==!1,i=Dq(n.body)||Array.isArray(n.body)?JSON.stringify(n.body):n.body,s=Object.fromEntries(Object.entries(n.headers).map(([f,g])=>[f,String(g)])),o;try{o=yield e(n.url,M({method:n.method,body:i,redirect:n.request?.redirect,headers:s,signal:n.request?.signal},n.body&&{duplex:"half"}))}catch(f){let g="Unknown Error";if(f instanceof Error){if(f.name==="AbortError")throw f.status=500,f;g=f.message,f.name==="TypeError"&&"cause"in f&&(f.cause instanceof Error?g=f.cause.message:typeof f.cause=="string"&&(g=f.cause))}let m=new ei(g,500,{request:n});throw m.cause=f,m}let a=o.status,c=o.url,l={};for(let[f,g]of o.headers)l[f]=g;let d={url:c,status:a,headers:l,data:""};if("deprecation"in l){let f=l.link&&l.link.match(/<([^>]+)>; rel="deprecation"/),g=f&&f.pop();t.warn(`[@octokit/request] "${n.method} ${n.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${g?`. See ${g}`:""}`)}if(a===204||a===205)return d;if(n.method==="HEAD"){if(a<400)return d;throw new ei(o.statusText,a,{response:d,request:n})}if(a===304)throw d.data=yield I_(o),new ei("Not modified",a,{response:d,request:n});if(a>=400)throw d.data=yield I_(o),new ei(Cq(d.data),a,{response:d,request:n});return d.data=r?yield I_(o):o.body,d})}function I_(n){return b(this,null,function*(){let e=n.headers.get("content-type");return/application\/json/.test(e)?n.json().catch(()=>n.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?n.text():n.arrayBuffer()})}function Cq(n){if(typeof n=="string")return n;if(n instanceof ArrayBuffer)return"Unknown error";if("message"in n){let e="documentation_url"in n?` - ${n.documentation_url}`:"";return Array.isArray(n.errors)?`${n.message}: ${n.errors.map(t=>JSON.stringify(t)).join(", ")}${e}`:`${n.message}${e}`}return`Unknown error: ${JSON.stringify(n)}`}function b_(n,e){let t=n.defaults(e);return Object.assign(function(i,s){let o=t.merge(i,s);if(!o.request||!o.request.hook)return lR(t.parse(o));let a=(c,l)=>lR(t.parse(t.merge(c,l)));return Object.assign(a,{endpoint:t,defaults:b_.bind(null,t)}),o.request.hook(a,o)},{endpoint:t,defaults:b_.bind(null,t)})}var Fe=b_(uR,bq);var Tq="0.0.0-development";function Sq(n){return`Request failed due to following response errors:
`+n.errors.map(e=>` - ${e.message}`).join(`
`)}var Aq=class extends Error{constructor(n,e,t){super(Sq(t)),this.request=n,this.headers=e,this.response=t,this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},xq=["method","baseUrl","url","headers","request","query","mediaType"],Mq=["query","method","url"],dR=/\/api\/v3\/?$/;function Rq(n,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in t)if(Mq.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let r=typeof e=="string"?Object.assign({query:e},t):e,i=Object.keys(r).reduce((o,a)=>xq.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||n.endpoint.DEFAULTS.baseUrl;return dR.test(s)&&(i.url=s.replace(dR,"/api/graphql")),n(i).then(o=>{if(o.data.errors){let a={};for(let c of Object.keys(o.headers))a[c]=o.headers[c];throw new Aq(i,a,o.data)}return o.data.data})}function D_(n,e){let t=n.defaults(e);return Object.assign((i,s)=>Rq(t,i,s),{defaults:D_.bind(null,t),endpoint:t.endpoint})}var RJ=D_(Fe,{headers:{"user-agent":`octokit-graphql.js/${Tq} ${jt()}`},method:"POST",url:"/graphql"});function hR(n){return D_(n,{method:"POST",url:"/graphql"})}var kq=/^v1\./,Nq=/^ghs_/,Pq=/^ghu_/;function Oq(n){return b(this,null,function*(){let e=n.split(/\./).length===3,t=kq.test(n)||Nq.test(n),r=Pq.test(n);return{type:"token",token:n,tokenType:e?"app":t?"installation":r?"user-to-server":"oauth"}})}function Fq(n){return n.split(/\./).length===3?`bearer ${n}`:`token ${n}`}function Vq(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);return i.headers.authorization=Fq(n),e(i)})}var fR=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(Oq.bind(null,e),{hook:Vq.bind(null,e)})};var C_="6.1.2";var pR=()=>{},Lq=console.warn.bind(console),jq=console.error.bind(console),gR=`octokit-core.js/${C_} ${jt()}`,T_=(()=>{class n{static VERSION=C_;static defaults(t){return class extends this{constructor(...i){let s=i[0]||{};if(typeof t=="function"){super(t(s));return}super(Object.assign({},t,s,s.userAgent&&t.userAgent?{userAgent:`${s.userAgent} ${t.userAgent}`}:null))}}}static plugins=[];static plugin(...t){let r=this.plugins;return class extends this{static plugins=r.concat(t.filter(s=>!r.includes(s)))}}constructor(t={}){let r=new nR.Collection,i={baseUrl:Fe.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(i.headers["user-agent"]=t.userAgent?`${t.userAgent} ${gR}`:gR,t.baseUrl&&(i.baseUrl=t.baseUrl),t.previews&&(i.mediaType.previews=t.previews),t.timeZone&&(i.headers["time-zone"]=t.timeZone),this.request=Fe.defaults(i),this.graphql=hR(this.request).defaults(i),this.log=Object.assign({debug:pR,info:pR,warn:Lq,error:jq},t.log),this.hook=r,t.authStrategy){let o=t,{authStrategy:a}=o,c=Xt(o,["authStrategy"]),l=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:c},t.auth));r.wrap("request",l.hook),this.auth=l}else if(!t.auth)this.auth=()=>b(this,null,function*(){return{type:"unauthenticated"}});else{let a=fR(t.auth);r.wrap("request",a.hook),this.auth=a}let s=this.constructor;for(let a=0;a<s.plugins.length;++a)Object.assign(this,s.plugins[a](this,t))}request;graphql;log;hook;auth}return n})();function Uq(n){let e=n.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(e.baseUrl)?"https://github.com":e.baseUrl.replace("/api/v3","")}function ep(n,e,t){return b(this,null,function*(){let r=M({baseUrl:Uq(n),headers:{accept:"application/json"}},t),i=yield n(e,r);if("error"in i.data){let s=new ei(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:n.endpoint.merge(e,r)});throw s.response=i,s}return i})}function wR(n){return b(this,null,function*(){let e=n.request||Fe,t=yield ep(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,code:n.code,redirect_uri:n.redirectUrl}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=mR(i,t.data.expires_in),r.refreshTokenExpiresAt=mR(i,t.data.refresh_token_expires_in)}delete r.scopes}return te(M({},t),{authentication:r})})}function mR(n,e){return new Date(n+e*1e3).toISOString()}function _R(n){return b(this,null,function*(){let e=n.request||Fe,t={client_id:n.clientId};return"scopes"in n&&Array.isArray(n.scopes)&&(t.scope=n.scopes.join(" ")),ep(e,"POST /login/device/code",t)})}function S_(n){return b(this,null,function*(){let e=n.request||Fe,t=yield ep(e,"POST /login/oauth/access_token",{client_id:n.clientId,device_code:n.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),r={clientType:n.clientType,clientId:n.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in n&&(r.clientSecret=n.clientSecret),n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=yR(i,t.data.expires_in),r.refreshTokenExpiresAt=yR(i,t.data.refresh_token_expires_in)}delete r.scopes}return te(M({},t),{authentication:r})})}function yR(n,e){return new Date(n+e*1e3).toISOString()}function ER(n){return b(this,null,function*(){let t=yield(n.request||Fe)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`},client_id:n.clientId,access_token:n.token}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.token,scopes:t.data.scopes};return t.data.expires_at&&(r.expiresAt=t.data.expires_at),n.clientType==="github-app"&&delete r.scopes,te(M({},t),{authentication:r})})}function IR(n){return b(this,null,function*(){let e=n.request||Fe,t=yield ep(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,grant_type:"refresh_token",refresh_token:n.refreshToken}),r=new Date(t.headers.date).getTime(),i={clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:vR(r,t.data.expires_in),refreshTokenExpiresAt:vR(r,t.data.refresh_token_expires_in)};return te(M({},t),{authentication:i})})}function vR(n,e){return new Date(n+e*1e3).toISOString()}function bR(n){return b(this,null,function*(){let e=n.request||Fe,t=btoa(`${n.clientId}:${n.clientSecret}`),r=yield e("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token}),i={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:r.data.token,scopes:r.data.scopes};return r.data.expires_at&&(i.expiresAt=r.data.expires_at),n.clientType==="github-app"&&delete i.scopes,te(M({},r),{authentication:i})})}function DR(n){return b(this,null,function*(){let e=n.request||Fe,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function CR(n){return b(this,null,function*(){let e=n.request||Fe,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function SR(n,e){return b(this,null,function*(){let t=Bq(n,e.auth);if(t)return t;let{data:r}=yield _R({clientType:n.clientType,clientId:n.clientId,request:e.request||n.request,scopes:e.auth.scopes||n.scopes});yield n.onVerification(r);let i=yield A_(e.request||n.request,n.clientId,n.clientType,r);return n.authentication=i,i})}function Bq(n,e){if(e.refresh===!0||!n.authentication)return!1;if(n.clientType==="github-app")return n.authentication;let t=n.authentication,r=("scopes"in e&&e.scopes||n.scopes).join(" "),i=t.scopes.join(" ");return r===i?t:!1}function TR(n){return b(this,null,function*(){yield new Promise(e=>setTimeout(e,n*1e3))})}function A_(n,e,t,r){return b(this,null,function*(){try{let i={clientId:e,request:n,code:r.device_code},{authentication:s}=t==="oauth-app"?yield S_(te(M({},i),{clientType:"oauth-app"})):yield S_(te(M({},i),{clientType:"github-app"}));return M({type:"token",tokenType:"oauth"},s)}catch(i){if(!i.response)throw i;let s=i.response.data.error;if(s==="authorization_pending")return yield TR(r.interval),A_(n,e,t,r);if(s==="slow_down")return yield TR(r.interval+5),A_(n,e,t,r);throw i}})}function $q(n,e){return b(this,null,function*(){return SR(n,{auth:e})})}function zq(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);let{token:s}=yield SR(n,{request:e,auth:{type:"oauth"}});return i.headers.authorization=`token ${s}`,e(i)})}var qq="0.0.0-development";function AR(n){let e=n.request||Fe.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${qq} ${jt()}`}}),s=n,{request:t=e}=s,r=Xt(s,["request"]),i=n.clientType==="github-app"?te(M({},r),{clientType:"github-app",request:t}):te(M({},r),{clientType:"oauth-app",request:t,scopes:n.scopes||[]});if(!n.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!n.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign($q.bind(null,i),{hook:zq.bind(null,i)})}var MR="0.0.0-development";function xR(n){return b(this,null,function*(){if("code"in n.strategyOptions){let{authentication:e}=yield wR(te(M({clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}));return M({type:"token",tokenType:"oauth"},e)}if("onVerification"in n.strategyOptions){let t=yield AR(te(M({clientType:n.clientType,clientId:n.clientId,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}))({type:"oauth"});return M({clientSecret:n.clientSecret},t)}if("token"in n.strategyOptions)return M({type:"token",tokenType:"oauth",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions);throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")})}function x_(t){return b(this,arguments,function*(n,e={}){if(n.authentication||(n.authentication=n.clientType==="oauth-app"?yield xR(n):yield xR(n)),n.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");let r=n.authentication;if("expiresAt"in r&&(e.type==="refresh"||new Date(r.expiresAt)<new Date)){let{authentication:i}=yield IR({clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,refreshToken:r.refreshToken,request:n.request});n.authentication=M({tokenType:"oauth",type:"token"},i)}if(e.type==="refresh"){if(n.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!r.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");yield n.onTokenCreated?.(n.authentication,{type:e.type})}if(e.type==="check"||e.type==="reset"){let i=e.type==="check"?ER:bR;try{let{authentication:s}=yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request});return n.authentication=M({tokenType:"oauth",type:"token"},s),e.type==="reset"&&(yield n.onTokenCreated?.(n.authentication,{type:e.type})),n.authentication}catch(s){throw s.status===404&&(s.message="[@octokit/auth-oauth-user] Token is invalid",n.authentication.invalid=!0),s}}if(e.type==="delete"||e.type==="deleteAuthorization"){let i=e.type==="delete"?DR:CR;try{yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request})}catch(s){if(s.status!==404)throw s}return n.authentication.invalid=!0,n.authentication}return n.authentication})}var Hq=/\/applications\/[^/]+\/(token|grant)s?/;function ol(n){return n&&Hq.test(n)}function Gq(i,s,o){return b(this,arguments,function*(n,e,t,r={}){let a=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(a.url))return e(a);if(ol(a.url)){let l=btoa(`${n.clientId}:${n.clientSecret}`);return a.headers.authorization=`basic ${l}`,e(a)}let{token:c}=n.clientType==="oauth-app"?yield x_(te(M({},n),{request:e})):yield x_(te(M({},n),{request:e}));return a.headers.authorization="token "+c,e(a)})}function tp(o){var a=o,{clientId:n,clientSecret:e,clientType:t="oauth-app",request:r=Fe.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${MR} ${jt()}`}}),onTokenCreated:i}=a,s=Xt(a,["clientId","clientSecret","clientType","request","onTokenCreated"]);let c=Object.assign({clientType:t,clientId:n,clientSecret:e,onTokenCreated:i,strategyOptions:s,request:r});return Object.assign(x_.bind(null,c),{hook:Gq.bind(null,c)})}tp.VERSION=MR;function Wq(n,e){return b(this,null,function*(){if(e.type==="oauth-app")return{type:"oauth-app",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`}};if("factory"in e){let i=M(M({},e),n),{type:s}=i,o=Xt(i,["type"]);return e.factory(o)}let t=M({clientId:n.clientId,clientSecret:n.clientSecret,request:n.request},e);return(n.clientType==="oauth-app"?yield tp(te(M({},t),{clientType:n.clientType})):yield tp(te(M({},t),{clientType:n.clientType})))()})}function Kq(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);if(n.clientType==="github-app"&&!ol(i.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let s=btoa(`${n.clientId}:${n.clientSecret}`);i.headers.authorization=`basic ${s}`;try{return yield e(i)}catch(o){throw o.status!==401||(o.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),o}})}var Qq="0.0.0-development";function RR(n){let e=Object.assign({request:Fe.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${Qq} ${jt()}`}}),clientType:"oauth-app"},n);return Object.assign(Wq.bind(null,e),{hook:Kq.bind(null,e)})}function NR(n){return n.includes("-----BEGIN RSA PRIVATE KEY-----")}function PR(n){return n.includes("-----BEGIN OPENSSH PRIVATE KEY-----")}function M_(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function OR(n){let e=n.trim().split(`
`).slice(1,-1).join(""),t=atob(e);return M_(t)}function FR(n,e){return`${kR(n)}.${kR(e)}`}function VR(n){for(var e="",t=new Uint8Array(n),r=t.byteLength,i=0;i<r;i++)e+=String.fromCharCode(t[i]);return LR(btoa(e))}function LR(n){return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kR(n){return LR(btoa(JSON.stringify(n)))}var{subtle:R_}=globalThis.crypto;function jR(t){return b(this,arguments,function*({privateKey:n,payload:e}){let r=n;if(NR(r))throw new Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");if(PR(r))throw new Error("[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s={alg:"RS256",typ:"JWT"},o=OR(r),a=yield R_.importKey("pkcs8",o,i,!1,["sign"]),c=FR(s,e),l=M_(c),d=yield R_.sign(i.name,a,l),f=VR(d);return`${c}.${f}`})}function k_(r){return b(this,arguments,function*({id:n,privateKey:e,now:t=Math.floor(Date.now()/1e3)}){let i=e.replace(/\\n/g,`
`),s=t-30,o=s+60*10,c=yield jR({privateKey:i,payload:{iat:s,exp:o,iss:n}});return{appId:n,expiration:o,token:c}})}var xa=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,BR=new Set,N_=typeof process=="object"&&process?process:{},$R=(n,e,t,r)=>{typeof N_.emitWarning=="function"?N_.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)},np=globalThis.AbortController,UR=globalThis.AbortSignal;if(typeof np>"u"){UR=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},np=class{constructor(){e()}signal=new UR;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let n=N_.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{n&&(n=!1,$R("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Yq=n=>!BR.has(n),PX=Symbol("type"),Hi=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),zR=n=>Hi(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Ma:null:null,Ma=class extends Array{constructor(e){super(e),this.fill(0)}},P_=class n{heap;length;static#s=!1;static create(e){let t=zR(e);if(!t)return[];n.#s=!0;let r=new n(e,t);return n.#s=!1,r}constructor(e,t){if(!n.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},rp=class n{#s;#u;#g;#m;#M;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#r;#n;#e;#l;#h;#c;#o;#v;#a;#w;#_;#f;#E;#T;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#f,sizes:e.#w,keyMap:e.#r,keyList:e.#n,valList:e.#e,next:e.#l,prev:e.#h,get head(){return e.#c},get tail(){return e.#o},free:e.#v,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,r,i,s)=>e.#P(t,r,i,s),moveToTail:t=>e.#x(t),indexes:t=>e.#I(t),rindexes:t=>e.#b(t),isStale:t=>e.#p(t)}}get max(){return this.#s}get maxSize(){return this.#u}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#M}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(e){let{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:d,noDisposeOnSet:f,noUpdateTTL:g,maxSize:m=0,maxEntrySize:w=0,sizeCalculation:D,fetchMethod:C,memoMethod:P,noDeleteOnFetchRejection:O,noDeleteOnStaleGet:F,allowStaleOnFetchRejection:B,allowStaleOnFetchAbort:J,ignoreFetchAbort:G}=e;if(t!==0&&!Hi(t))throw new TypeError("max option must be a nonnegative integer");let I=t?zR(t):Array;if(!I)throw new Error("invalid max value: "+t);if(this.#s=t,this.#u=m,this.maxEntrySize=w||this.#u,this.sizeCalculation=D,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(P!==void 0&&typeof P!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=P,C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#M=C,this.#T=!!C,this.#r=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#l=new I(t),this.#h=new I(t),this.#c=0,this.#o=0,this.#v=P_.create(t),this.#i=0,this.#y=0,typeof l=="function"&&(this.#g=l),typeof d=="function"?(this.#m=d,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#E=!!this.#g,this.#d=!!this.#m,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!O,this.allowStaleOnFetchRejection=!!B,this.allowStaleOnFetchAbort=!!J,this.ignoreFetchAbort=!!G,this.maxEntrySize!==0){if(this.#u!==0&&!Hi(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!Hi(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!F,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Hi(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Hi(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#s===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#u){let v="LRU_CACHE_UNBOUNDED";Yq(v)&&(BR.add(v),$R("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",v,n))}}getRemainingTTL(e){return this.#r.has(e)?1/0:0}#O(){let e=new Ma(this.#s),t=new Ma(this.#s);this.#f=e,this.#_=t,this.#F=(s,o,a=xa.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#p(s)&&this.#D(this.#n[s],"expire")},o+1);c.unref&&c.unref()}},this.#S=s=>{t[s]=e[s]!==0?xa.now():0},this.#C=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();let l=s.now-c;s.remainingTTL=a-l}};let r=0,i=()=>{let s=xa.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#r.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let l=(r||i())-c;return a-l},this.#p=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#S=()=>{};#C=()=>{};#F=()=>{};#p=()=>!1;#B(){let e=new Ma(this.#s);this.#y=0,this.#w=e,this.#A=t=>{this.#y-=e[t],e[t]=0},this.#V=(t,r,i,s)=>{if(this.#t(r))return 0;if(!Hi(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!Hi(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#k=(t,r,i)=>{if(e[t]=r,this.#u){let s=this.#u-e[t];for(;this.#y>s;)this.#N(!0)}this.#y+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#y)}}#A=e=>{};#k=(e,t,r)=>{};#V=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#c));)t=this.#h[t]}*#b({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#c;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#o));)t=this.#l[t]}#L(e){return e!==void 0&&this.#r.get(this.#n[e])===e}*entries(){for(let e of this.#I())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#I()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#b()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#I())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#n[r],this))return this.get(this.#n[r],t)}}forEach(e,t=this){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}rforEach(e,t=this){for(let r of this.#b()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}purgeStale(){let e=!1;for(let t of this.#b({allowStale:!0}))this.#p(t)&&(this.#D(this.#n[t],"expire"),e=!0);return e}info(e){let t=this.#r.get(e);if(t===void 0)return;let r=this.#e[t],i=this.#t(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#f&&this.#_){let o=this.#f[t],a=this.#_[t];if(o&&a){let c=o-(xa.now()-a);s.ttl=c,s.start=Date.now()}}return this.#w&&(s.size=this.#w[t]),s}dump(){let e=[];for(let t of this.#I({allowStale:!0})){let r=this.#n[t],i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#f&&this.#_){o.ttl=this.#f[t];let a=xa.now()-this.#_[t];o.start=Math.floor(Date.now()-a)}this.#w&&(o.size=this.#w[t]),e.unshift([r,o])}return e}load(e){this.clear();for(let[t,r]of e){if(r.start){let i=Date.now()-r.start;r.start=xa.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,d=this.#V(e,t,r.size||0,a);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let f=this.#i===0?void 0:this.#r.get(e);if(f===void 0)f=this.#i===0?this.#o:this.#v.length!==0?this.#v.pop():this.#i===this.#s?this.#N(!1):this.#i,this.#n[f]=e,this.#e[f]=t,this.#r.set(e,f),this.#l[this.#o]=f,this.#h[f]=this.#o,this.#o=f,this.#i++,this.#k(f,d,c),c&&(c.set="add"),l=!1;else{this.#x(f);let g=this.#e[f];if(t!==g){if(this.#T&&this.#t(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=g;m!==void 0&&!o&&(this.#E&&this.#g?.(m,e,"set"),this.#d&&this.#a?.push([m,e,"set"]))}else o||(this.#E&&this.#g?.(g,e,"set"),this.#d&&this.#a?.push([g,e,"set"]));if(this.#A(f),this.#k(f,d,c),this.#e[f]=t,c){c.set="replace";let m=g&&this.#t(g)?g.__staleWhileFetching:g;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#f&&this.#O(),this.#f&&(l||this.#F(f,i,s),c&&this.#C(c,f)),!o&&this.#d&&this.#a){let g=this.#a,m;for(;m=g?.shift();)this.#m?.(...m)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#c];if(this.#N(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}}#N(e){let t=this.#c,r=this.#n[t],i=this.#e[t];return this.#T&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(i,r,"evict"),this.#d&&this.#a?.push([i,r,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#v.push(t)),this.#i===1?(this.#c=this.#o=0,this.#v.length=0):this.#c=this.#l[t],this.#r.delete(r),this.#i--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#r.get(e);if(s!==void 0){let o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(s))i&&(i.has="stale",this.#C(i,s));else return r&&this.#S(s),i&&(i.has="hit",this.#C(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#r.get(e);if(i===void 0||!r&&this.#p(i))return;let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#P(e,t,r,i){let s=t===void 0?void 0:this.#e[t];if(this.#t(s))return s;let o=new np,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:r,context:i},l=(D,C=!1)=>{let{aborted:P}=o.signal,O=r.ignoreFetchAbort&&D!==void 0;if(r.status&&(P&&!C?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,O&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),P&&!O&&!C)return f(o.signal.reason);let F=m;return this.#e[t]===m&&(D===void 0?F.__staleWhileFetching?this.#e[t]=F.__staleWhileFetching:this.#D(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,D,c.options))),D},d=D=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=D),f(D)),f=D=>{let{aborted:C}=o.signal,P=C&&r.allowStaleOnFetchAbort,O=P||r.allowStaleOnFetchRejection,F=O||r.noDeleteOnFetchRejection,B=m;if(this.#e[t]===m&&(!F||B.__staleWhileFetching===void 0?this.#D(e,"fetch"):P||(this.#e[t]=B.__staleWhileFetching)),O)return r.status&&B.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),B.__staleWhileFetching;if(B.__returned===B)throw D},g=(D,C)=>{let P=this.#M?.(e,s,c);P&&P instanceof Promise&&P.then(O=>D(O===void 0?void 0:O),C),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(D(void 0),r.allowStaleOnFetchAbort&&(D=O=>l(O,!0)))})};r.status&&(r.status.fetchDispatched=!0);let m=new Promise(g).then(l,d),w=Object.assign(m,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,w,te(M({},c.options),{status:void 0})),t=this.#r.get(e)):this.#e[t]=w,w}#t(e){if(!this.#T)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof np}fetch(r){return b(this,arguments,function*(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:l=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:w=this.ignoreFetchAbort,allowStaleOnFetchAbort:D=this.allowStaleOnFetchAbort,context:C,forceRefresh:P=!1,status:O,signal:F}=t;if(!this.#T)return O&&(O.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:O});let B={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:c,size:l,sizeCalculation:d,noUpdateTTL:f,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:D,ignoreFetchAbort:w,status:O,signal:F},J=this.#r.get(e);if(J===void 0){O&&(O.fetch="miss");let G=this.#P(e,J,B,C);return G.__returned=G}else{let G=this.#e[J];if(this.#t(G)){let S=i&&G.__staleWhileFetching!==void 0;return O&&(O.fetch="inflight",S&&(O.returnedStale=!0)),S?G.__staleWhileFetching:G.__returned=G}let I=this.#p(J);if(!P&&!I)return O&&(O.fetch="hit"),this.#x(J),s&&this.#S(J),O&&this.#C(O,J),G;let v=this.#P(e,J,B,C),T=v.__staleWhileFetching!==void 0&&i;return O&&(O.fetch=I?"stale":"refresh",T&&I&&(O.returnedStale=!0)),T?v.__staleWhileFetching:v.__returned=v}})}forceFetch(r){return b(this,arguments,function*(e,t={}){let i=yield this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i})}memo(e,t={}){let r=this.#R;if(!r)throw new Error("no memoMethod provided to constructor");let l=t,{context:i,forceRefresh:s}=l,o=Xt(l,["context","forceRefresh"]),a=this.get(e,o);if(!s&&a!==void 0)return a;let c=r(e,a,{options:o,context:i});return this.set(e,c,o),c}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#r.get(e);if(a!==void 0){let c=this.#e[a],l=this.#t(c);return o&&this.#C(o,a),this.#p(a)?(o&&(o.get="stale"),l?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#x(a),i&&this.#S(a),c))}else o&&(o.get="miss")}#j(e,t){this.#h[t]=e,this.#l[e]=t}#x(e){e!==this.#o&&(e===this.#c?this.#c=this.#l[e]:this.#j(this.#h[e],this.#l[e]),this.#j(this.#o,e),this.#o=e)}delete(e){return this.#D(e,"delete")}#D(e,t){let r=!1;if(this.#i!==0){let i=this.#r.get(e);if(i!==void 0)if(r=!0,this.#i===1)this.#U(t);else{this.#A(i);let s=this.#e[i];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(s,e,t),this.#d&&this.#a?.push([s,e,t])),this.#r.delete(e),this.#n[i]=void 0,this.#e[i]=void 0,i===this.#o)this.#o=this.#h[i];else if(i===this.#c)this.#c=this.#l[i];else{let o=this.#h[i];this.#l[o]=this.#l[i];let a=this.#l[i];this.#h[a]=this.#h[i]}this.#i--,this.#v.push(i)}}if(this.#d&&this.#a?.length){let i=this.#a,s;for(;s=i?.shift();)this.#m?.(...s)}return r}clear(){return this.#U("delete")}#U(e){for(let t of this.#b({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#n[t];this.#E&&this.#g?.(r,i,e),this.#d&&this.#a?.push([r,i,e])}}if(this.#r.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#f&&this.#_&&(this.#f.fill(0),this.#_.fill(0)),this.#w&&this.#w.fill(0),this.#c=0,this.#o=0,this.#v.length=0,this.#y=0,this.#i=0,this.#d&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#m?.(...r)}}};function ip(r){return b(this,arguments,function*({appId:n,privateKey:e,timeDifference:t}){try{let i=yield k_({id:n,privateKey:e,now:t&&Math.floor(Date.now()/1e3)+t});return{type:"app",token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(i){throw e==="-----BEGIN RSA PRIVATE KEY-----"?new Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):i}})}function Zq(){return new rp({max:15e3,ttl:1e3*60*59})}function Jq(n,e){return b(this,null,function*(){let t=HR(e),r=yield n.get(t);if(!r)return;let[i,s,o,a,c,l]=r.split("|"),d=e.permissions||c.split(/,/).reduce((f,g)=>(/!$/.test(g)?f[g.slice(0,-1)]="write":f[g]="read",f),{});return{token:i,createdAt:s,expiresAt:o,permissions:d,repositoryIds:e.repositoryIds,repositoryNames:e.repositoryNames,singleFileName:l,repositorySelection:a}})}function Xq(n,e,t){return b(this,null,function*(){let r=HR(e),i=e.permissions?"":Object.keys(t.permissions).map(o=>`${o}${t.permissions[o]==="write"?"!":""}`).join(","),s=[t.token,t.createdAt,t.expiresAt,t.repositorySelection,i,t.singleFileName].join("|");yield n.set(r,s)})}function HR({installationId:n,permissions:e={},repositoryIds:t=[],repositoryNames:r=[]}){let i=Object.keys(e).sort().map(a=>e[a]==="read"?a:`${a}!`).join(","),s=t.sort().join(","),o=r.join(",");return[n,s,o,i].filter(Boolean).join("|")}function qR({installationId:n,token:e,createdAt:t,expiresAt:r,repositorySelection:i,permissions:s,repositoryIds:o,repositoryNames:a,singleFileName:c}){return Object.assign({type:"token",tokenType:"installation",token:e,installationId:n,permissions:s,createdAt:t,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,a?{repositoryNames:a}:null,c?{singleFileName:c}:null)}function GR(n,e,t){return b(this,null,function*(){let r=Number(e.installationId||n.installationId);if(!r)throw new Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(e.factory){let O=M(M({},n),e),{type:F,factory:B,oauthApp:J}=O,G=Xt(O,["type","factory","oauthApp"]);return B(G)}let i=Object.assign({installationId:r},e);if(!e.refresh){let F=yield Jq(n.cache,i);if(F){let{token:B,createdAt:J,expiresAt:G,permissions:I,repositoryIds:v,repositoryNames:_,singleFileName:T,repositorySelection:S}=F;return qR({installationId:r,token:B,createdAt:J,expiresAt:G,permissions:I,repositorySelection:S,repositoryIds:v,repositoryNames:_,singleFileName:T})}}let s=yield ip(n),o=t||n.request,{data:{token:a,expires_at:c,repositories:l,permissions:d,repository_selection:f,single_file:g}}=yield o("POST /app/installations/{installation_id}/access_tokens",{installation_id:r,repository_ids:e.repositoryIds,repositories:e.repositoryNames,permissions:e.permissions,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${s.token}`}}),m=d||{},w=f||"all",D=l?l.map(F=>F.id):void 0,C=l?l.map(F=>F.name):void 0,P=new Date().toISOString();return yield Xq(n.cache,i,{token:a,createdAt:P,expiresAt:c,repositorySelection:w,permissions:m,repositoryIds:D,repositoryNames:C,singleFileName:g}),qR({installationId:r,token:a,createdAt:P,expiresAt:c,repositorySelection:w,permissions:m,repositoryIds:D,repositoryNames:C,singleFileName:g})})}function eH(n,e){return b(this,null,function*(){switch(e.type){case"app":return ip(n);case"oauth-app":return n.oauthApp({type:"oauth-app"});case"installation":return GR(n,te(M({},e),{type:"installation"}));case"oauth-user":return n.oauthApp(e);default:throw new Error(`Invalid auth type: ${e.type}`)}})}var tH=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/app/installation-requests","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"];function nH(n){let t=`^(?:${n.map(r=>r.split("/").map(i=>i.startsWith("{")?"(?:.+?)":i).join("/")).map(r=>`(?:${r})`).join("|")})$`;return new RegExp(t,"i")}var rH=nH(tH);function iH(n){return!!n&&rH.test(n.split("?")[0])}var sH=5*1e3;function oH(n){return!(n.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||n.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}function aH(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r),s=i.url;if(/\/login\/oauth\/access_token$/.test(s))return e(i);if(iH(s.replace(e.endpoint.DEFAULTS.baseUrl,""))){let{token:c}=yield ip(n);i.headers.authorization=`bearer ${c}`;let l;try{l=yield e(i)}catch(d){if(oH(d)||typeof d.response.headers.date>"u")throw d;let f=Math.floor((Date.parse(d.response.headers.date)-Date.parse(new Date().toString()))/1e3);n.log.warn(d.message),n.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${f} seconds. Retrying request with the difference accounted for.`);let{token:g}=yield ip(te(M({},n),{timeDifference:f}));return i.headers.authorization=`bearer ${g}`,e(i)}return l}if(ol(s)){let c=yield n.oauthApp({type:"oauth-app"});return i.headers.authorization=c.headers.authorization,e(i)}let{token:o,createdAt:a}=yield GR(n,{},e.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,WR(n,e,i,a)})}function WR(n,e,t,r,i=0){return b(this,null,function*(){let s=+new Date-+new Date(r);try{return yield e(t)}catch(o){if(o.status!==401)throw o;if(s>=sH)throw i>0&&(o.message=`After ${i} retries within ${s/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let a=i*1e3;return n.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${a/1e3}s)`),yield new Promise(c=>setTimeout(c,a)),WR(n,e,t,r,i)}})}var cH="7.1.1";function O_(n){if(!n.appId)throw new Error("[@octokit/auth-app] appId option is required");if(!n.privateKey)throw new Error("[@octokit/auth-app] privateKey option is required");if("installationId"in n&&!n.installationId)throw new Error("[@octokit/auth-app] installationId is set to a falsy value");let e=Object.assign({warn:console.warn.bind(console)},n.log),t=n.request||Fe.defaults({headers:{"user-agent":`octokit-auth-app.js/${cH} ${jt()}`}}),r=Object.assign({request:t,cache:Zq()},n,n.installationId?{installationId:Number(n.installationId)}:{},{log:e,oauthApp:RR({clientType:"github-app",clientId:n.clientId||"",clientSecret:n.clientSecret||"",request:t})});return Object.assign(eH.bind(null,r),{hook:aH.bind(null,r)})}var dn=(()=>{let e=class e{constructor(r){this._http=r,this.applicationId="1012063",this.privateKey=`-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCnxYEcKaEsyRx7
8VicDgz+XwMOECEVLtMWwmfn0bdilPKLVTJRZF12Hz0BAckilc3nW7tTAikDpXyw
efTnmt9DQhI6mAlpfIx8l7yNoucj1xxOzclZy6noOke9CSjhu8UhcrRd6XoYGvQH
vKjttln1tv0EgyIREnAbHNPhK8b1SpHE/MzaJs9yCNU4lidwmHEl/hw+lzrUp+O2
7Gi38WLJEaycChXtq94b6z5866cqgi0pPz+FTQNHlRg2rei2XGfb7pHxzQPkouS1
Cg+3NZ15cPv9jsAk15HRMr/1fV8xk4JZ+V403zlCAl6gKaogfeZbC+3OTPNKvw4o
HVHlcSYPAgMBAAECggEAGjDcCgB5t9shhjvUIHCVGLTObkiYUY1AyOHKhMcZgNtN
zfCb7VbkvEb+KAUWWD7YqRCJ+thwfLA9+fLgB7QGvKI45ErN1VjrOZwahGX0/YRc
V/UKROlleep3PoyKhEri6GjWvX5wYAj9JaQPHyUDgDdz4ltyWwXs2F60uQczhSFB
NIeF55lyN3/cqBUHNQalrlD64LXwZLzviS8dpTIH1Qsp+S7TJgGM9NgeQ8yYiyzz
tduux+gu6IxgL1aOgBiBonRFZdfAySws1mUhYvPWr1fzn64kaYsiDqXwCdmKmzxx
+RbXGWvKX/wctN6454E1UlTPWVVOx4SHZ4Yf03ulWQKBgQDb4ZQqHb0chwFvHTIW
pIc5DMmepQ2+/syxXumjrNMpi3sltmnGNu/n7DebuiyZOaFlHrDKLcC4WO/ILPe6
O1A/LjgliTsHiQYmaB/XRj5iy6pGYra0esxFuhWZeYTJ00yBwpWGpAh91TvpxGcR
PweOToPvq+nZi6tgVbMRu5gUkwKBgQDDVJ1yPYSAhnBDGkXU8XQp1jrKkzxwO7Zo
UDAJ69LbTmC6rw7s4ZRT6KmS/7p3g7HXz1HQaEN7u1fzie5I8AZvhE21y42w9+z2
r41rW+Q/IM+3102L6Okm9o91aLCIozyWgoBWXuXM67/oj4HlXgTZOVeiGZAcwN7o
2PUjkrpyFQKBgEts4RdlZiawBQTpnfH4dE5UnaDm+4UmAG9joH+93B2nNBImtbgB
xl/nPtgTkBLrmvqGAZ0I/s/96hrfmgbvK8LQhwARSAd4sHxiQXHmLaZUOM+2MvhM
G2BbyecAsVVOPzNP3Vz3TdZkXA3/il93II9nTYjcjvZKG/qKy0ds82kzAoGBAIAo
KTFGKYSGMGvmdgDT9upoM6Sr29CrbO+eBRbNUkgvcYmqx/klvEMdeP0Iqlg14N5+
mOhLMFOjRH52dhAG48IRJUds6Wc+E4x6/Cd/YA8HQSIWsjtksmytAsz+xiywJVV/
BCMnGlFMMFqupYRPHpFDbTre2M30wYw2pQgVAh1NAoGBANDbSx25LnRwUlgsA1Go
c6YXlZ+ggQfjYfCjMjj26I/nLzxCQe3Ghw/dSI0IVQ6kjFWkNVllEaA7ESxMKAtq
W+9Tc4e7MN5sqQoTIos0um2l+7BJaft/14WB1GxQiK2grgff8BtiQQuUORBl/F4g
D2tNDflWM97viVfizU9grXkW
-----END PRIVATE KEY-----`,this.installationId="Iv23li7aCJeV1yPt8rcr",this.accessToken=null,this.fetchOptions={},this.httpHeaders=new Jn({Accept:"application/json"}),this.ghUser={authenticated:!1,name:"",login:"",avatar_url:"/assets/github-logo.png",email:""},this.token={access_token:"",scope:"",token_type:""},this.octokit=new T_({authStrategy:O_,auth:{appId:this.applicationId,privateKey:this.privateKey}})}getInstallationId(r){return b(this,null,function*(){this.installationId="";try{let i=yield this.octokit.request("GET /repos/{owner}/my/installation",{owner:r,repo:"my"});return i.status==200?(this.installationId=i.data.id,this.octokit=new T_({authStrategy:O_,auth:{appId:this.applicationId,privateKey:this.privateKey,installationId:this.installationId}}),this.installationId):null}catch(i){console.debug("Error fetching InstallationId :",i)}return null})}getJwtToken(r,i=""){return b(this,null,function*(){let s=null;if(r)try{yield this.getInstallationId(r)}catch(o){console.debug("Error fetching InstallationId :",o)}if(this.installationId)try{let o=yield this.octokit.auth({type:"app"});o.token&&(this.fetchOptions={headers:{Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${o.token}`,"X-GitHub-Api-Version":"2022-11-28"}},s=o.token)}catch(o){throw console.error("Error fetching JWT:",o),o}return s})}getAccessToken(r){return b(this,null,function*(){if(this.accessToken=null,this.installationId)try{let i=yield fetch(`https://api.github.com/app/installations/${this.installationId}/access_tokens`,te(M({},this.fetchOptions),{method:"POST"}));if(i.ok){let s=yield i.json();this.fetchOptions={headers:{"X-GitHub-Api-Version":"2022-11-28",Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${s.token}`}},this.accessToken=s.token}return this.accessToken}catch(i){throw console.error("Error fetching AccessToken:",i),i}return this.accessToken})}getInstalledContent(r,i="README.md"){return b(this,null,function*(){let s="Resource not Found";try{s=yield this.get(`repos/${r}/my/contents/${i}`)}catch(o){console.error("Error fetching repository:",o)}return s})}setToken(r){this.token=r}getSavedToken(){return this.ghUser.authenticated?this.token.access_token:""}getSavedUser(){return this.ghUser}isAuthenticated(){return this.ghUser.authenticated}setUserAuthenticated(r){this.ghUser.authenticated=r}setEmail(r){this.ghUser.email=r}getEmail(){return this.ghUser.email}setName(r){this.ghUser.name=r}setUserId(r){this.ghUser.login=r}getUserId(){return this.ghUser.login}setAvatar(r){return this.ghUser.avatar_url=r}creatHttpHeaders(r){return this.httpHeaders.append("Authorization","Bearer "+r)}getAuthUrl(){return`${de.gh_auth_url}?client_id=${de.client_id}`}getInstalledAccessToken(){return this.accessToken}hasInstalledAccessToken(){return this.accessToken!=null}getToken(r){return de.production?this._http.get(`${de.host}/ghproxy.php?code=${r}`):this._http.get(`${de.host}/token/ghproxy.php?code=${r}`)}getUser(r){return this._http.get(`${de.gh_api_url}/user`,{headers:this.creatHttpHeaders(r)})}getInternalArticleContent(r,i=""){return r=i?`${i}/${r}`:r,this.getMdFileContent(de.gh_default_user_repo,r)}getReadMeContent(r){let i=`${de.gh_dr_url}/${r}/${de.gh_dr_folder}/README.md`;return fetch(i,this.fetchOptions).then(s=>s.ok?s.text():Promise.reject("Resource not found"))}getMdFileContent(r,i){i=i.replace(/^\/?/,"")+(i.endsWith(".md")?"":".md");let s=Oe.getGhUserFilePath(r,i,this.accessToken!=null);return fetch(s,this.fetchOptions).then(o=>o.ok?o.text():Promise.reject("Resource not found"))}getFileContent(r,i,s){return s=i?`${i}/${s}`:s,this.getMdFileContent(r,s)}getLocalFileContent(r){return fetch(r,this.fetchOptions).then(i=>i.ok?i:Promise.reject("Resource not found"))}getGhDirectoryContents(r,i=!0,s=""){let o=`${de.gh_api_url}/repos/${r}/my/git/trees/main`;i||(o=`${de.gh_api_url}/repos/${r}/my/contents/${s}?ref=main`),o+=i?"?recursive=1":"";let a={root:"/",files:[],folders:[]};return fetch(o,this.fetchOptions).then(c=>c.ok?c.json():Promise.reject("Directory not found")).then(c=>{let l;if(c.tree?l=c.tree:l=c,l&&l.forEach(d=>{if(d.type==="tree"||d.type==="dir"){let f=d.path.split("/")[0];a.folders.includes(f)||a.folders.push(f)}else(d.type==="file"||d.type==="blob"&&d.path!=".DS_Store")&&a.files.push(d.path)}),s){let d=Oe.getFilesInFolder(a,s);a.root=s,a.files=d}return Promise.resolve(a)}).catch(c=>Promise.reject("Folder not found"))}getFirstCertificate(r="certificates"){return this.getGhDirectoryContents(de.gh_default_user_repo,!1,r).then(i=>{let s=i;return s.files&&s.files.length==0?Promise.reject(""):Promise.resolve(`${de.gh_dr_url}/${de.gh_default_user_repo}/${de.gh_dr_folder}/${s.files[0]}`)})}get(r){return fetch(`${de.gh_api_url}/${r}`,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("Resource not found"))}};e.\u0275fac=function(i){return new(i||e)(L(Vs))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var KR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Pe({type:e,selectors:[["app-webfront-jumbotron"]],decls:39,vars:0,consts:[[1,"masthead"],[1,"container","px-4","px-lg-5","d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","justify-content-center"],[1,"text-center"],[1,"mx-auto","my-0","text-uppercase"],[1,"text-white-50","mx-auto","mt-2","mb-5"],["href","#about",1,"btn","btn-primary"],["id","about",1,"about-section","text-center"],[1,"container","px-lg-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"text-white","mb-4"],[1,"text-white-50"],[1,"row","py-4","justify-content-center"],["id","contactForm","data-sb-form-api-token","API_TOKEN",1,"form-signup"],[1,"row","input-group-newsletter","justify-content-center"],[1,"col-6"],["id","emailAddress","type","email","placeholder","Enter email address...","aria-label","Enter email address...","data-sb-validations","required,email",1,"form-control"],[1,"col-auto"],["id","submitButton","type","Submit","onclick","sendMessage()",1,"btn","btn-primary"],["data-sb-feedback","emailAddress:required",1,"invalid-feedback","mt-2"],["data-sb-feedback","emailAddress:email",1,"invalid-feedback","mt-2"],["id","submitSuccessMessage",1,"d-none"],[1,"text-center","mb-3","mt-2","text-white"],[1,"fw-bolder"],["href",""],["id","submitErrorMessage",1,"d-none"],[1,"text-center","text-danger","mb-3","mt-2"]],template:function(i,s){i&1&&($(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),Q(5,"Own your own Homepage"),z(),$(6,"h2",5),Q(7,"Want to Own a Public Homepage ?"),z(),$(8,"a",6),Q(9,"Get Started"),z()()()()(),$(10,"section",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2",11),Q(15,"Your PublicHome.Page is Your secret sauce!"),z(),$(16,"div",12),Q(17," Boost your business or portfolio's visibility to millions with a strong public presence. It's easy to get started ! Contact us today and elevate your brand. "),z()()(),$(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16),Ie(22,"input",17),z(),$(23,"div",18)(24,"button",19),Q(25,"Notify"),z()()(),$(26,"div",20),Q(27,"An email is required."),z(),$(28,"div",21),Q(29,"Email is not valid."),z(),$(30,"div",22)(31,"div",23)(32,"div",24),Q(33,"Thank you for your interest!"),z(),Ie(34,"br")(35,"a",25),z()(),$(36,"div",26)(37,"div",27),Q(38,"Error sending message!"),z()()()()()())},dependencies:[iM,eM,Ow]});let n=e;return n})();var QR=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.homePageFile=X.readme_home;let o=s.snapshot.url[0];o&&o.path=="questions"&&(this.homePageFile=X.fab_questions_list2)}};e.\u0275fac=function(i){return new(i||e)(ee(dn),ee(bn),ee(ln))},e.\u0275cmp=Pe({type:e,selectors:[["app-webfront-main"]],decls:5,vars:1,consts:[[1,"container"],["id","questions",1,"row","justify-content-center"],[1,""],[1,"container",3,"src"]],template:function(i,s){i&1&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),Q(4,`
            `),z()()()()),i&2&&(q(3),ce("src",s.homePageFile))},dependencies:[vr]});let n=e;return n})();var YR=(()=>{let e=class e extends Vn{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.metaService=o,this.messaging.event$.subscribe(a=>{switch(a.cmd){case"ContextInit":X.homeUser=X.ghUser;break;case"Directory":this.messaging.send({cmd:"page",file:"HomeGHUser"});break;default:break}})}ngOnInit(){this.metaService.addTag({name:"keywords",content:"My Brand, Your brand, Your landing page, Resume Builder, Resume"}),this.metaService.addTag({name:"description",content:"Own your Own page ! Create your brand, Reach millions"})}ngOnDestroy(){}};e.\u0275fac=function(i){return new(i||e)(ee(On),ee(dn),ee(Pn),ee(Cx))},e.\u0275cmp=Pe({type:e,selectors:[["home"]],features:[cn],decls:2,vars:0,template:function(i,s){i&1&&Ie(0,"app-webfront-jumbotron")(1,"app-webfront-main")},dependencies:[KR,QR]});let n=e;return n})();var dH=n=>({"text-center":n});function hH(n,e){if(n&1&&($(0,"h2"),Q(1),z()),n&2){let t=Le(2);q(),Ge(t.contacts_title)}}function fH(n,e){if(n&1&&($(0,"a",15),Ie(1,"i"),Q(2),z()),n&2){let t=Le().$implicit,r=Le(2);mr("href",r.availableLinks.get(t.key),It),q(),nf("fa-brands fa-",t.key,""),na("color",r.iconsByKey.get(t.key)),q(),un(" ",r.availableTexts.get(t.key),"")}}function pH(n,e){if(n&1&&($(0,"a",15),Q(1),z()),n&2){let t=Le().$implicit,r=Le(2);ce("href",r.availableLinks.get(t.key),It),q(),Ge(r.availableLinks.get(t.key))}}function gH(n,e){if(n&1&&($(0,"div"),Ye(1,fH,3,7,"a",14)(2,pH,2,2,"ng-template",null,0,cf),z()),n&2){let t=e.$implicit,r=sf(3);q(),ce("ngIf",t.key!="link")("ngIfElse",r)}}function mH(n,e){if(n&1&&($(0,"div",9)(1,"div",10),Ie(2,"img",11),$(3,"h5"),Q(4),z(),$(5,"p"),Q(6),z(),Ye(7,hH,2,1,"h2",12)(8,gH,4,2,"div",13),Rt(9,"keyvalue"),Rt(10,"slice"),z()()),n&2){let t=Le();q(2),mr("src",t.userData.avatar_url,It),q(2),Ge(t.userData.name||t.userData.login),q(2),Ge(t.userData.bio),q(),ce("ngIf",t.contacts_title),q(),ce("ngForOf",ia(10,7,wn(9,5,t.availableLinks),0,7))}}function yH(n,e){if(n&1&&($(0,"a",16),Ie(1,"img",17),z()),n&2){let t=e.$implicit;q(),mr("src",t,It)}}var F_=(()=>{let e=class e extends Vn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.badgesAvailable=[],this.contactPageContent="Loading..",this.contactsContent="",this.availableLinks=new Map,this.availableTexts=new Map,this.iconsByKey=X.iconsColorByKey,this.useUsersContent=!1,this.firstList=!0,this.firstHtml=!0,this.contacts_title="",this.userData={},this.certificateLink="",this.messaging.event$.subscribe(o=>{switch(o.cmd){case"ContextInit":this.titleService.setTitle(X.ghUser.name),this.userData=X.ghUser,this.githubService.getMdFileContent(X.ghUserLoaded,this.routerFileUrl).then(l=>this.contactPageContent=l);break;case"Directory":let c=Oe.getFilesInFolder(X.userContext.directory,"certificates/badges");for(let l of c){let d=Oe.getGhUserFilePath(X.ghUserLoaded,l,this.githubService.hasInstalledAccessToken());this.badgesAvailable.push(d),this.badgesAvailable.length==1&&(this.certificateLink=this.badgesAvailable[0])}break;default:break}})}ngOnInit(){X.contactLinksByKey.clear(),this.markdownService.renderer.html=r=>(this.useUsersContent=this.firstHtml?Oe.getFirstLine(r)=="<!-- My Contacts -->":this.useUsersContent,this.firstHtml=!1,r),this.markdownService.renderer.list=(r,i,s)=>this.firstList||!this.useUsersContent?(this.firstList=!1,""):tt.prototype.list.call(this.markdownService.renderer,r,i,s)}onMarkdownReady(){this.firstHtml,this.iconsByKey=X.iconsColorByKey,this.availableLinks=X.contactLinksByKey,this.availableTexts=X.contactTextsByKey,this.messaging.send({cmd:"page",file:"Contacts"})}};e.\u0275fac=function(i){return new(i||e)(ee(On),ee(dn),ee(Pn))},e.\u0275cmp=Pe({type:e,selectors:[["app-contact"]],features:[cn],decls:9,vars:6,consts:[["nonbrandLink",""],[1,"container"],[1,"row","justify-content-center",3,"ngClass"],[1,"col-lg-8"],[1,"container",3,"ready","data"],["class","row justify-content-center",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-center"],["href","/certificates",4,"ngFor","ngForOf"],[1,"row","justify-content-center"],[1,"col-lg-6"],["alt","Passport Pic",1,"col-4","rounded-circle",3,"src"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","btn btn-outline-secondary my-2","style","width:100%","target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",1,"btn","btn-outline-secondary","my-2",2,"width","100%",3,"href"],["href","/certificates"],["alt","Thumbnail Image",3,"src"]],template:function(i,s){i&1&&($(0,"div",1)(1,"div",2)(2,"div",3)(3,"markdown",4),bt("ready",function(){return s.onMarkdownReady()}),Q(4,`
            `),z()(),Ye(5,mH,11,11,"div",5),$(6,"div",6)(7,"div",7),Ye(8,yH,2,1,"a",8),z()()()()),i&2&&(q(),ce("ngClass",SA(4,dH,!s.useUsersContent)),q(2),ce("data",s.contactPageContent),q(2),ce("ngIf",!s.useUsersContent),q(3),ce("ngForOf",s.badgesAvailable))},dependencies:[aa,Nn,yr,vr,ca,Fi]});let n=e;return n})();function vH(n,e){if(n&1&&($(0,"a",9),Ie(1,"i"),z()),n&2){let t=Le().$implicit,r=Le();ce("href",r.availableLinks.get(t.key),It),q(),nf("fa-brands fa-",t.key,""),na("color",r.iconsByKey.get(t.key))}}function wH(n,e){if(n&1&&($(0,"a",9),Ie(1,"i",10),z()),n&2){let t=Le().$implicit,r=Le();ce("href",r.availableLinks.get(t.key),It)}}function _H(n,e){if(n&1&&($(0,"li"),Ye(1,vH,2,6,"a",8)(2,wH,2,1,"ng-template",null,0,cf),z()),n&2){let t=e.$implicit,r=sf(3),i=Le();q(),ce("ngIf",i.hasBrandLink(t.key))("ngIfElse",r)}}var ZR=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.messaging=i,this.route=s,this.footerNote="Copyright",this.contactsFileUrl=X.user_contacts,this.availableLinks=new Map,this.iconsByKey=X.iconsColorByKey,this.oldRender={}}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"page":i.file=="HomeGHUser"?this.footerNote="Copyright":i.file=="GHUser"?(this.footerNote="Powered By",this.loadContacts(X.userContext.username)):i.file=="Contacts"&&(this.availableLinks=X.contactLinksByKey);break;default:break}}),this.loadContacts(de.gh_default_user_repo)}availableKeys(){return this.availableLinks.keys()}loadContacts(r){this.githubService.getMdFileContent(r,"contacts.md").then(i=>{X.contactLinksByKey.clear(),this.parseMarkdownWithCustomRenderer(i)}).catch(i=>{console.log("Contacts not available")}).finally(()=>{this.availableLinks=X.contactLinksByKey})}parseMarkdownWithCustomRenderer(r){let i=new tt;return i.link=(s,o,a)=>{try{if(s){let l=new URL(s).hostname.replace("www.","");l=l.substring(0,l.lastIndexOf(".")),l=Oe.closestHost(l),X.contactLinksByKey.set(l,s),X.iconsColorByKey.has(l)?X.contactTextsByKey.set(l,this.getHostText(l)):X.contactTextsByKey.set(l,a!=s?Oe.unescape(a):this.getHostText(l))}}catch{}return tt.prototype.link.call(i,s,o,a)},Ce(r,{renderer:i})}hasBrandLink(r){return r!="link"&&X.iconsColorByKey.get(r)}ngAfterViewInit(){}getHostText(r){switch(r){case"youtube":return"YouTube";case"github":return"Github";case"linkedin":return"Linkedin";default:break}return r}};e.\u0275fac=function(i){return new(i||e)(ee(dn),ee(wr),ee(ln))},e.\u0275cmp=Pe({type:e,selectors:[["app-footer"]],decls:12,vars:8,consts:[["nonbrandLink",""],["id","contact",1,"text-center"],[1,"container"],[1,"socials-media","text-center"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"credits"],["href","/"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"fa-solid","fa-link"]],template:function(i,s){i&1&&($(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4),Ye(4,_H,4,2,"li",5),Rt(5,"keyvalue"),Rt(6,"slice"),z()(),$(7,"div",6),Q(8),$(9,"a",7),Q(10,"www.publichome.page"),z(),Q(11," All rights reserved. "),z()()()),i&2&&(q(4),ce("ngForOf",ia(6,4,wn(5,2,s.availableLinks),0,7)),q(4),un(" ",s.footerNote," \xA9 "))},dependencies:[Nn,yr,ca,Fi],styles:['#contact[_ngcontent-%COMP%]{background:#f7f7f7;padding-top:25px;padding-bottom:25px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]{width:100%}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;float:none;margin:0}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-right:10px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:24px;color:#999;letter-spacing:.1em;font-weight:500;background:transparent;text-transform:uppercase;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8a07e;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.1em;font-weight:500;margin-top:0;text-transform:uppercase}.credits[_ngcontent-%COMP%]{font-size:13px}pre.code[_ngcontent-%COMP%]{white-space:pre-wrap}pre.code[_ngcontent-%COMP%]:before{counter-reset:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";width:8em;padding-left:auto;margin-left:auto;text-align:right}']});let n=e;return n})();var JR=(()=>{let e=class e{constructor(){this.WIT_URL="https://api.wit.ai/message?v=20211010&q=",this.WIT_TOKEN="GLM547LWVQYPHR6QWS5ADO3YYTB6ZRI3"}getIntent(r){return b(this,null,function*(){return fetch(`https://api.wit.ai/message?v=20211010&q=${encodeURIComponent(r.substring(0,250))}`,{headers:{Authorization:`Bearer ${this.WIT_TOKEN}`}}).then(i=>i.ok?i.json():Promise.reject(i.statusText))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var kt=[];for(sp=0;sp<256;++sp)kt.push((sp+256).toString(16).slice(1));var sp;function XR(n,e=0){return(kt[n[e+0]]+kt[n[e+1]]+kt[n[e+2]]+kt[n[e+3]]+"-"+kt[n[e+4]]+kt[n[e+5]]+"-"+kt[n[e+6]]+kt[n[e+7]]+"-"+kt[n[e+8]]+kt[n[e+9]]+"-"+kt[n[e+10]]+kt[n[e+11]]+kt[n[e+12]]+kt[n[e+13]]+kt[n[e+14]]+kt[n[e+15]]).toLowerCase()}var op,IH=new Uint8Array(16);function V_(){if(!op&&(op=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!op))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return op(IH)}var bH=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),L_={randomUUID:bH};function DH(n,e,t){if(L_.randomUUID&&!e&&!n)return L_.randomUUID();n=n||{};var r=n.random||(n.rng||V_)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return XR(r)}var j_=DH;var ek=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tk={};var Gi,U_;(function(){var n;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(T,S,x){for(var E=Array(arguments.length-2),Rr=2;Rr<arguments.length;Rr++)E[Rr-2]=arguments[Rr];return v.prototype[S].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(S=0;16>S;++S)T[S]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],S=I.g[2];var x=I.g[3],E=v+(x^_&(S^x))+T[0]+3614090360&4294967295;v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[1]+3905402710&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[2]+606105819&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[3]+3250441966&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[4]+4118548399&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[5]+1200080426&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[6]+2821735955&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[7]+4249261313&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[8]+1770035416&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[9]+2336552879&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[10]+4294925233&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[11]+2304563134&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[12]+1804603682&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[13]+4254626195&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[14]+2792965006&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[15]+1236535329&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(S^x&(_^S))+T[1]+4129170786&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[6]+3225465664&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[11]+643717713&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[0]+3921069994&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[5]+3593408605&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[10]+38016083&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[15]+3634488961&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[4]+3889429448&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[9]+568446438&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[14]+3275163606&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[3]+4107603335&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[8]+1163531501&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[13]+2850285829&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[2]+4243563512&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[7]+1735328473&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[12]+2368359562&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(_^S^x)+T[5]+4294588738&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[8]+2272392833&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[11]+1839030562&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[14]+4259657740&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[1]+2763975236&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[4]+1272893353&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[7]+4139469664&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[10]+3200236656&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[13]+681279174&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[0]+3936430074&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[3]+3572445317&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[6]+76029189&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[9]+3654602809&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[12]+3873151461&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[15]+530742520&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[2]+3299628645&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(S^(_|~x))+T[0]+4096336452&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[7]+1126891415&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[14]+2878612391&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[5]+4237533241&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[12]+1700485571&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[3]+2399980690&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[10]+4293915773&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[1]+2240044497&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[8]+1873313359&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[15]+4264355552&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[6]+2734768916&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[13]+1309151649&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[4]+4149444226&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[11]+3174756917&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[2]+718787259&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+x&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,T=this.B,S=this.h,x=0;x<v;){if(S==0)for(;x<=_;)i(this,I,x),x+=this.blockSize;if(typeof I=="string"){for(;x<v;)if(T[S++]=I.charCodeAt(x++),S==this.blockSize){i(this,T),S=0;break}}else for(;x<v;)if(T[S++]=I[x++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var T=0;32>T;T+=8)I[_++]=this.g[v]>>>T&255;return I};function s(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function o(I,v){this.h=v;for(var _=[],T=!0,S=I.length-1;0<=S;S--){var x=I[S]|0;T&&x==v||(_[S]=x,T=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return C(l(-I));for(var v=[],_=1,T=0;I>=_;T++)v[T]=I/_|0,_*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return C(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),T=f,S=0;S<I.length;S+=8){var x=Math.min(8,I.length-S),E=parseInt(I.substring(S,S+x),v);8>x?(x=l(Math.pow(v,x)),T=T.j(x).add(l(E))):(T=T.j(_),T=T.add(l(E)))}return T}var f=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-C(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var T=this.i(_);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(D(this))return"-"+C(this).toString(I);for(var v=l(Math.pow(I,6)),_=this,T="";;){var S=B(_,v).g;_=P(_,S.j(v));var x=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=S,w(_))return x+T;for(;6>x.length;)x="0"+x;T=x+T}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=P(this,I),D(I)?-1:w(I)?0:1};function C(I){for(var v=I.g.length,_=[],T=0;T<v;T++)_[T]=~I.g[T];return new o(_,~I.h).add(g)}n.abs=function(){return D(this)?C(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0,S=0;S<=v;S++){var x=T+(this.i(S)&65535)+(I.i(S)&65535),E=(x>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=E>>>16,x&=65535,E&=65535,_[S]=E<<16|x}return new o(_,_[_.length-1]&-2147483648?-1:0)};function P(I,v){return I.add(C(v))}n.j=function(I){if(w(this)||w(I))return f;if(D(this))return D(I)?C(this).j(C(I)):C(C(this).j(I));if(D(I))return C(this.j(C(I)));if(0>this.l(m)&&0>I.l(m))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],T=0;T<2*v;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var x=this.i(T)>>>16,E=this.i(T)&65535,Rr=I.i(S)>>>16,wc=I.i(S)&65535;_[2*T+2*S]+=E*wc,O(_,2*T+2*S),_[2*T+2*S+1]+=x*wc,O(_,2*T+2*S+1),_[2*T+2*S+1]+=E*Rr,O(_,2*T+2*S+1),_[2*T+2*S+2]+=x*Rr,O(_,2*T+2*S+2)}for(T=0;T<v;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=v;T<2*v;T++)_[T]=0;return new o(_,0)};function O(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function F(I,v){this.g=I,this.h=v}function B(I,v){if(w(v))throw Error("division by zero");if(w(I))return new F(f,f);if(D(I))return v=B(C(I),v),new F(C(v.g),C(v.h));if(D(v))return v=B(I,C(v)),new F(C(v.g),v.h);if(30<I.g.length){if(D(I)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,T=v;0>=T.l(I);)_=J(_),T=J(T);var S=G(_,1),x=G(T,1);for(T=G(T,2),_=G(_,2);!w(T);){var E=x.add(T);0>=E.l(I)&&(S=S.add(_),x=E),T=G(T,1),_=G(_,1)}return v=P(I,S.j(v)),new F(S,v)}for(S=f;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),x=l(_),E=x.j(v);D(E)||0<E.l(I);)_-=T,x=l(_),E=x.j(v);w(x)&&(x=g),S=S.add(x),I=P(I,E)}return new F(S,I)}n.A=function(I){return B(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)&I.i(T);return new o(_,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)|I.i(T);return new o(_,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)^I.i(T);return new o(_,this.h^I.h)};function J(I){for(var v=I.g.length+1,_=[],T=0;T<v;T++)_[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(_,I.h)}function G(I,v){var _=v>>5;v%=32;for(var T=I.g.length-_,S=[],x=0;x<T;x++)S[x]=0<v?I.i(x+_)>>>v|I.i(x+_+1)<<32-v:I.i(x+_);return new o(S,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,U_=tk.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Gi=tk.Integer=o}).apply(typeof ek<"u"?ek:typeof self<"u"?self:typeof window<"u"?window:{});var ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ti={};var B_,CH,Ra,$_,al,cp,z_,q_,H_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ap=="object"&&ap];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var A=u[y];if(!(A in p))break e;p=p[A]}u=u[u.length-1],y=p[u],h=h(y),h!=y&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,y=!1,A={next:function(){if(!y&&p<u.length){var k=p++;return{value:h(k,u[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,y),u.apply(h,A)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function w(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,A,k){for(var W=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)W[$e-2]=arguments[$e];return h.prototype[A].apply(y,W)}}function D(u){let h=u.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=u[y];return p}return[]}function C(u,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let A=u.length||0,k=y.length||0;u.length=A+k;for(let W=0;W<k;W++)u[A+W]=y[W]}else u.push(y)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function O(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function B(u){return B[" "](u),u}B[" "]=function(){};var J=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function G(u,h,p){for(let y in u)h.call(p,u[y],y,u)}function I(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,y;for(let A=1;A<arguments.length;A++){y=arguments[A];for(p in y)u[p]=y[p];for(let k=0;k<_.length;k++)p=_[k],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function S(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function x(u){a.setTimeout(()=>{throw u},0)}function E(){var u=jg;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Rr{constructor(){this.h=this.g=null}add(h,p){let y=wc.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var wc=new P(()=>new tO,u=>u.reset());class tO{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let _c,Ec=!1,jg=new Rr,db=()=>{let u=a.Promise.resolve(void 0);_c=()=>{u.then(nO)}};var nO=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){x(p)}var h=wc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Ec=!1};function di(){this.s=this.s,this.C=this.C}di.prototype.s=!1,di.prototype.ma=function(){this.s||(this.s=!0,this.N())},di.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ot(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Ot.prototype.h=function(){this.defaultPrevented=!0};var rO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Ic(u,h){if(Ot.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(J){e:{try{B(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:iO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ic.aa.h.call(this)}}w(Ic,Ot);var iO={2:"touch",3:"pen",4:"mouse"};Ic.prototype.h=function(){Ic.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var bc="closure_listenable_"+(1e6*Math.random()|0),sO=0;function oO(u,h,p,y,A){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=A,this.key=++sO,this.da=this.fa=!1}function Yl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Zl(u){this.src=u,this.g={},this.h=0}Zl.prototype.add=function(u,h,p,y,A){var k=u.toString();u=this.g[k],u||(u=this.g[k]=[],this.h++);var W=Bg(u,h,y,A);return-1<W?(h=u[W],p||(h.fa=!1)):(h=new oO(h,this.src,k,!!y,A),h.fa=p,u.push(h)),h};function Ug(u,h){var p=h.type;if(p in u.g){var y=u.g[p],A=Array.prototype.indexOf.call(y,h,void 0),k;(k=0<=A)&&Array.prototype.splice.call(y,A,1),k&&(Yl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Bg(u,h,p,y){for(var A=0;A<u.length;++A){var k=u[A];if(!k.da&&k.listener==h&&k.capture==!!p&&k.ha==y)return A}return-1}var $g="closure_lm_"+(1e6*Math.random()|0),zg={};function hb(u,h,p,y,A){if(y&&y.once)return pb(u,h,p,y,A);if(Array.isArray(h)){for(var k=0;k<h.length;k++)hb(u,h[k],p,y,A);return null}return p=Wg(p),u&&u[bc]?u.K(h,p,l(y)?!!y.capture:!!y,A):fb(u,h,p,!1,y,A)}function fb(u,h,p,y,A,k){if(!h)throw Error("Invalid event type");var W=l(A)?!!A.capture:!!A,$e=Hg(u);if($e||(u[$g]=$e=new Zl(u)),p=$e.add(h,p,y,W,k),p.proxy)return p;if(y=aO(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)rO||(A=W),A===void 0&&(A=!1),u.addEventListener(h.toString(),y,A);else if(u.attachEvent)u.attachEvent(mb(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function aO(){function u(p){return h.call(u.src,u.listener,p)}let h=cO;return u}function pb(u,h,p,y,A){if(Array.isArray(h)){for(var k=0;k<h.length;k++)pb(u,h[k],p,y,A);return null}return p=Wg(p),u&&u[bc]?u.L(h,p,l(y)?!!y.capture:!!y,A):fb(u,h,p,!0,y,A)}function gb(u,h,p,y,A){if(Array.isArray(h))for(var k=0;k<h.length;k++)gb(u,h[k],p,y,A);else y=l(y)?!!y.capture:!!y,p=Wg(p),u&&u[bc]?(u=u.i,h=String(h).toString(),h in u.g&&(k=u.g[h],p=Bg(k,p,y,A),-1<p&&(Yl(k[p]),Array.prototype.splice.call(k,p,1),k.length==0&&(delete u.g[h],u.h--)))):u&&(u=Hg(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Bg(h,p,y,A)),(p=-1<u?h[u]:null)&&qg(p))}function qg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[bc])Ug(h.i,u);else{var p=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(p,y,u.capture):h.detachEvent?h.detachEvent(mb(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=Hg(h))?(Ug(p,u),p.h==0&&(p.src=null,h[$g]=null)):Yl(u)}}}function mb(u){return u in zg?zg[u]:zg[u]="on"+u}function cO(u,h){if(u.da)u=!0;else{h=new Ic(h,this);var p=u.listener,y=u.ha||u.src;u.fa&&qg(u),u=p.call(y,h)}return u}function Hg(u){return u=u[$g],u instanceof Zl?u:null}var Gg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wg(u){return typeof u=="function"?u:(u[Gg]||(u[Gg]=function(h){return u.handleEvent(h)}),u[Gg])}function Ft(){di.call(this),this.i=new Zl(this),this.M=this,this.F=null}w(Ft,di),Ft.prototype[bc]=!0,Ft.prototype.removeEventListener=function(u,h,p,y){gb(this,u,h,p,y)};function $t(u,h){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new Ot(h,u);else if(h instanceof Ot)h.target=h.target||u;else{var A=h;h=new Ot(y,u),T(h,A)}if(A=!0,p)for(var k=p.length-1;0<=k;k--){var W=h.g=p[k];A=Jl(W,y,!0,h)&&A}if(W=h.g=u,A=Jl(W,y,!0,h)&&A,A=Jl(W,y,!1,h)&&A,p)for(k=0;k<p.length;k++)W=h.g=p[k],A=Jl(W,y,!1,h)&&A}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],y=0;y<p.length;y++)Yl(p[y]);delete u.g[h],u.h--}}this.F=null},Ft.prototype.K=function(u,h,p,y){return this.i.add(String(u),h,!1,p,y)},Ft.prototype.L=function(u,h,p,y){return this.i.add(String(u),h,!0,p,y)};function Jl(u,h,p,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,k=0;k<h.length;++k){var W=h[k];if(W&&!W.da&&W.capture==p){var $e=W.listener,At=W.ha||W.src;W.fa&&Ug(u.i,W),A=$e.call(At,y)!==!1&&A}}return A&&!y.defaultPrevented}function yb(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function vb(u){u.g=yb(()=>{u.g=null,u.i&&(u.i=!1,vb(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class uO extends di{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:vb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dc(u){di.call(this),this.h=u,this.g={}}w(Dc,di);var wb=[];function _b(u){G(u.g,function(h,p){this.g.hasOwnProperty(p)&&qg(h)},u),u.g={}}Dc.prototype.N=function(){Dc.aa.N.call(this),_b(this)},Dc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kg=a.JSON.stringify,lO=a.JSON.parse,dO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Qg(){}Qg.prototype.h=null;function Eb(u){return u.h||(u.h=u.i())}function Ib(){}var Cc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yg(){Ot.call(this,"d")}w(Yg,Ot);function Zg(){Ot.call(this,"c")}w(Zg,Ot);var fs={},bb=null;function Xl(){return bb=bb||new Ft}fs.La="serverreachability";function Db(u){Ot.call(this,fs.La,u)}w(Db,Ot);function Tc(u){let h=Xl();$t(h,new Db(h))}fs.STAT_EVENT="statevent";function Cb(u,h){Ot.call(this,fs.STAT_EVENT,u),this.stat=h}w(Cb,Ot);function zt(u){let h=Xl();$t(h,new Cb(h,u))}fs.Ma="timingevent";function Tb(u,h){Ot.call(this,fs.Ma,u),this.size=h}w(Tb,Ot);function Sc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Ac(){this.g=!0}Ac.prototype.xa=function(){this.g=!1};function hO(u,h,p,y,A,k){u.info(function(){if(u.g)if(k)for(var W="",$e=k.split("&"),At=0;At<$e.length;At++){var Re=$e[At].split("=");if(1<Re.length){var Vt=Re[0];Re=Re[1];var Lt=Vt.split("_");W=2<=Lt.length&&Lt[1]=="type"?W+(Vt+"="+Re+"&"):W+(Vt+"=redacted&")}}else W=null;else W=k;return"XMLHTTP REQ ("+y+") [attempt "+A+"]: "+h+`
`+p+`
`+W})}function fO(u,h,p,y,A,k,W){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+A+"]: "+h+`
`+p+`
`+k+" "+W})}function yo(u,h,p,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+gO(u,p)+(y?" "+y:"")})}function pO(u,h){u.info(function(){return"TIMEOUT: "+h})}Ac.prototype.info=function(){};function gO(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var A=y[1];if(Array.isArray(A)&&!(1>A.length)){var k=A[0];if(k!="noop"&&k!="stop"&&k!="close")for(var W=1;W<A.length;W++)A[W]=""}}}}return Kg(p)}catch{return h}}var ed={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Sb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jg;function td(){}w(td,Qg),td.prototype.g=function(){return new XMLHttpRequest},td.prototype.i=function(){return{}},Jg=new td;function hi(u,h,p,y){this.j=u,this.i=h,this.l=p,this.R=y||1,this.U=new Dc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ab}function Ab(){this.i=null,this.g="",this.h=!1}var xb={},Xg={};function em(u,h,p){u.L=1,u.v=sd(kr(h)),u.m=p,u.P=!0,Mb(u,null)}function Mb(u,h){u.F=Date.now(),nd(u),u.A=kr(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),qb(p.i,"t",y),u.C=0,p=u.j.J,u.h=new Ab,u.g=cD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new uO(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,y=u.ca;var A="readystatechange";Array.isArray(A)||(A&&(wb[0]=A.toString()),A=wb);for(var k=0;k<A.length;k++){var W=hb(p,A[k],y||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Tc(),hO(u.i,u.u,u.A,u.l,u.R,u.m)}hi.prototype.ca=function(u){u=u.target;let h=this.M;h&&Nr(u)==3?h.j():this.Y(u)},hi.prototype.Y=function(u){try{if(u==this.g)e:{let Lt=Nr(this.g);var h=this.g.Ba();let _o=this.g.Z();if(!(3>Lt)&&(Lt!=3||this.g&&(this.h.h||this.g.oa()||Zb(this.g)))){this.J||Lt!=4||h==7||(h==8||0>=_o?Tc(3):Tc(2)),tm(this);var p=this.g.Z();this.X=p;t:if(Rb(this)){var y=Zb(this.g);u="";var A=y.length,k=Nr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ps(this),xc(this);var W="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(k&&h==A-1)});y.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,fO(this.i,this.u,this.A,this.l,this.R,Lt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var $e,At=this.g;if(($e=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O($e)){var Re=$e;break t}}Re=null}if(p=Re)yo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nm(this,p);else{this.o=!1,this.s=3,zt(12),ps(this),xc(this);break e}}if(this.P){p=!0;let Bn;for(;!this.J&&this.C<W.length;)if(Bn=mO(this,W),Bn==Xg){Lt==4&&(this.s=4,zt(14),p=!1),yo(this.i,this.l,null,"[Incomplete Response]");break}else if(Bn==xb){this.s=4,zt(15),yo(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else yo(this.i,this.l,Bn,null),nm(this,Bn);if(Rb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Lt!=4||W.length!=0||this.h.h||(this.s=1,zt(16),p=!1),this.o=this.o&&p,!p)yo(this.i,this.l,W,"[Invalid Chunked Response]"),ps(this),xc(this);else if(0<W.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),cm(Vt),Vt.M=!0,zt(11))}}else yo(this.i,this.l,W,null),nm(this,W);Lt==4&&ps(this),this.o&&!this.J&&(Lt==4?iD(this.j,this):(this.o=!1,nd(this)))}else NO(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,zt(12)):(this.s=0,zt(13)),ps(this),xc(this)}}}catch{}finally{}};function Rb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function mO(u,h){var p=u.C,y=h.indexOf(`
`,p);return y==-1?Xg:(p=Number(h.substring(p,y)),isNaN(p)?xb:(y+=1,y+p>h.length?Xg:(h=h.slice(y,y+p),u.C=y+p,h)))}hi.prototype.cancel=function(){this.J=!0,ps(this)};function nd(u){u.S=Date.now()+u.I,kb(u,u.I)}function kb(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Sc(g(u.ba,u),h)}function tm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}hi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(pO(this.i,this.A),this.L!=2&&(Tc(),zt(17)),ps(this),this.s=2,xc(this)):kb(this,this.S-u)};function xc(u){u.j.G==0||u.J||iD(u.j,u)}function ps(u){tm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,_b(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function nm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||rm(p.h,u))){if(!u.K&&rm(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var A=y;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)ld(p),cd(p);else break e;am(p),zt(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=Sc(g(p.Za,p),6e3));if(1>=Ob(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ms(p,11)}else if((u.K||p.g==u)&&ld(p),!O(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Re=A[h];if(p.T=Re[0],Re=Re[1],p.G==2)if(Re[0]=="c"){p.K=Re[1],p.ia=Re[2];let Vt=Re[3];Vt!=null&&(p.la=Vt,p.j.info("VER="+p.la));let Lt=Re[4];Lt!=null&&(p.Aa=Lt,p.j.info("SVER="+p.Aa));let _o=Re[5];_o!=null&&typeof _o=="number"&&0<_o&&(y=1.5*_o,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let Bn=u.g;if(Bn){let hd=Bn.g?Bn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hd){var k=y.h;k.g||hd.indexOf("spdy")==-1&&hd.indexOf("quic")==-1&&hd.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(im(k,k.h),k.h=null))}if(y.D){let um=Bn.g?Bn.g.getResponseHeader("X-HTTP-Session-Id"):null;um&&(y.ya=um,Ke(y.I,y.D,um))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var W=u;if(y.qa=aD(y,y.J?y.ia:null,y.W),W.K){Fb(y.h,W);var $e=W,At=y.L;At&&($e.I=At),$e.B&&(tm($e),nd($e)),y.g=W}else nD(y);0<p.i.length&&ud(p)}else Re[0]!="stop"&&Re[0]!="close"||ms(p,7);else p.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?ms(p,7):om(p):Re[0]!="noop"&&p.l&&p.l.ta(Re),p.v=0)}}Tc(4)}catch{}}var yO=class{constructor(u,h){this.g=u,this.map=h}};function Nb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ob(u){return u.h?1:u.g?u.g.size:0}function rm(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function im(u,h){u.g?u.g.add(h):u.h=h}function Fb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}Nb.prototype.cancel=function(){if(this.i=Vb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Vb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return D(u.i)}function vO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,y=0;y<p;y++)h.push(u[y]);return h}h=[],p=0;for(y in u)h[p++]=u[y];return h}function wO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let y in u)h[p++]=y;return h}}}function Lb(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=wO(u),y=vO(u),A=y.length,k=0;k<A;k++)h.call(void 0,y[k],p&&p[k],u)}var jb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _O(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),A=null;if(0<=y){var k=u[p].substring(0,y);A=u[p].substring(y+1)}else k=u[p];h(k,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function gs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof gs){this.h=u.h,rd(this,u.j),this.o=u.o,this.g=u.g,id(this,u.s),this.l=u.l;var h=u.i,p=new kc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Ub(this,p),this.m=u.m}else u&&(h=String(u).match(jb))?(this.h=!1,rd(this,h[1]||"",!0),this.o=Mc(h[2]||""),this.g=Mc(h[3]||"",!0),id(this,h[4]),this.l=Mc(h[5]||"",!0),Ub(this,h[6]||"",!0),this.m=Mc(h[7]||"")):(this.h=!1,this.i=new kc(null,this.h))}gs.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Rc(h,Bb,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Rc(h,Bb,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Rc(p,p.charAt(0)=="/"?bO:IO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Rc(p,CO)),u.join("")};function kr(u){return new gs(u)}function rd(u,h,p){u.j=p?Mc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function id(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function Ub(u,h,p){h instanceof kc?(u.i=h,TO(u.i,u.h)):(p||(h=Rc(h,DO)),u.i=new kc(h,u.h))}function Ke(u,h,p){u.i.set(h,p)}function sd(u){return Ke(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Mc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Rc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,EO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function EO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Bb=/[#\/\?@]/g,IO=/[#\?:]/g,bO=/[#\?]/g,DO=/[#\?@]/g,CO=/#/g;function kc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function fi(u){u.g||(u.g=new Map,u.h=0,u.i&&_O(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=kc.prototype,n.add=function(u,h){fi(this),this.i=null,u=vo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function $b(u,h){fi(u),h=vo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function zb(u,h){return fi(u),h=vo(u,h),u.g.has(h)}n.forEach=function(u,h){fi(this),this.g.forEach(function(p,y){p.forEach(function(A){u.call(h,A,y,this)},this)},this)},n.na=function(){fi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let A=u[y];for(let k=0;k<A.length;k++)p.push(h[y])}return p},n.V=function(u){fi(this);let h=[];if(typeof u=="string")zb(this,u)&&(h=h.concat(this.g.get(vo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return fi(this),this.i=null,u=vo(this,u),zb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function qb(u,h,p){$b(u,h),0<p.length&&(u.i=null,u.g.set(vo(u,h),D(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let k=encodeURIComponent(String(y)),W=this.V(y);for(y=0;y<W.length;y++){var A=k;W[y]!==""&&(A+="="+encodeURIComponent(String(W[y]))),u.push(A)}}return this.i=u.join("&")};function vo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function TO(u,h){h&&!u.j&&(fi(u),u.i=null,u.g.forEach(function(p,y){var A=y.toLowerCase();y!=A&&($b(this,y),qb(this,A,p))},u)),u.j=h}function SO(u,h){let p=new Ac;if(a.Image){let y=new Image;y.onload=m(pi,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(pi,p,"TestLoadImage: error",!1,h,y),y.onabort=m(pi,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(pi,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function AO(u,h){let p=new Ac,y=new AbortController,A=setTimeout(()=>{y.abort(),pi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(k=>{clearTimeout(A),k.ok?pi(p,"TestPingServer: ok",!0,h):pi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),pi(p,"TestPingServer: error",!1,h)})}function pi(u,h,p,y,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),y(p)}catch{}}function xO(){this.g=new dO}function MO(u,h,p){let y=p||"";try{Lb(u,function(A,k){let W=A;l(A)&&(W=Kg(A)),h.push(y+k+"="+encodeURIComponent(W))})}catch(A){throw h.push(y+"type="+encodeURIComponent("_badmap")),A}}function Nc(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Nc,Qg),Nc.prototype.g=function(){return new od(this.l,this.j)},Nc.prototype.i=function(u){return function(){return u}}({});function od(u,h){Ft.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(od,Ft),n=od.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Oc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Oc(this)),this.g&&(this.readyState=3,Oc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Pc(this):Oc(this),this.readyState==3&&Hb(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Pc(this))},n.Qa=function(u){this.g&&(this.response=u,Pc(this))},n.ga=function(){this.g&&Pc(this)};function Pc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Oc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Oc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(od.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Gb(u){let h="";return G(u,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function sm(u,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Gb(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ke(u,h,p))}function it(u){Ft.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(it,Ft);var RO=/^https?$/i,kO=["POST","PUT"];n=it.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jg.g(),this.v=this.o?Eb(this.o):Eb(Jg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(k){Wb(this,k);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var A in y)p.set(A,y[A]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let k of y.keys())p.set(k,y.get(k));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(k=>k.toLowerCase()=="content-type"),A=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kO,h,void 0))||y||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,W]of p)this.g.setRequestHeader(k,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yb(this),this.u=!0,this.g.send(u),this.u=!1}catch(k){Wb(this,k)}};function Wb(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,Kb(u),ad(u)}function Kb(u){u.A||(u.A=!0,$t(u,"complete"),$t(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,$t(this,"complete"),$t(this,"abort"),ad(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ad(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qb(this):this.bb())},n.bb=function(){Qb(this)};function Qb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Nr(u)!=4||u.Z()!=2)){if(u.u&&Nr(u)==4)yb(u.Ea,0,u);else if($t(u,"readystatechange"),Nr(u)==4){u.h=!1;try{let W=u.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=W===0){var A=String(u.D).match(jb)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),y=!RO.test(A?A.toLowerCase():"")}p=y}if(p)$t(u,"complete"),$t(u,"success");else{u.m=6;try{var k=2<Nr(u)?u.g.statusText:""}catch{k=""}u.l=k+" ["+u.Z()+"]",Kb(u)}}finally{ad(u)}}}}function ad(u,h){if(u.g){Yb(u);let p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||$t(u,"ready");try{p.onreadystatechange=y}catch{}}}function Yb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Nr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Nr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),lO(h)}};function Zb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function NO(u){let h={};u=(u.g&&2<=Nr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(O(u[y]))continue;var p=S(u[y]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let k=h[A]||[];h[A]=k,k.push(p)}I(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function Jb(u){this.Aa=0,this.i=[],this.j=new Ac,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fc("baseRetryDelayMs",5e3,u),this.cb=Fc("retryDelaySeedMs",1e4,u),this.Wa=Fc("forwardChannelMaxRetries",2,u),this.wa=Fc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Nb(u&&u.concurrentRequestLimit),this.Da=new xO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Jb.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,y){zt(0),this.W=u,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=aD(this,null,this.W),ud(this)};function om(u){if(Xb(u),u.G==3){var h=u.U++,p=kr(u.I);if(Ke(p,"SID",u.K),Ke(p,"RID",h),Ke(p,"TYPE","terminate"),Vc(u,p),h=new hi(u,u.j,h),h.L=2,h.v=sd(kr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=cD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),nd(h)}oD(u)}function cd(u){u.g&&(cm(u),u.g.cancel(),u.g=null)}function Xb(u){cd(u),u.u&&(a.clearTimeout(u.u),u.u=null),ld(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ud(u){if(!Pb(u.h)&&!u.s){u.s=!0;var h=u.Ga;_c||db(),Ec||(_c(),Ec=!0),jg.add(h,u),u.B=0}}function PO(u,h){return Ob(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Sc(g(u.Ga,u,h),sD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let A=new hi(this,this.j,u),k=this.o;if(this.S&&(k?(k=v(k),T(k,this.S)):k=this.S),this.m!==null||this.O||(A.H=k,k=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=tD(this,A,h),p=kr(this.I),Ke(p,"RID",u),Ke(p,"CVER",22),this.D&&Ke(p,"X-HTTP-Session-Id",this.D),Vc(this,p),k&&(this.O?h="headers="+encodeURIComponent(String(Gb(k)))+"&"+h:this.m&&sm(p,this.m,k)),im(this.h,A),this.Ua&&Ke(p,"TYPE","init"),this.P?(Ke(p,"$req",h),Ke(p,"SID","null"),A.T=!0,em(A,p,null)):em(A,p,h),this.G=2}}else this.G==3&&(u?eD(this,u):this.i.length==0||Pb(this.h)||eD(this))};function eD(u,h){var p;h?p=h.l:p=u.U++;let y=kr(u.I);Ke(y,"SID",u.K),Ke(y,"RID",p),Ke(y,"AID",u.T),Vc(u,y),u.m&&u.o&&sm(y,u.m,u.o),p=new hi(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=tD(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),im(u.h,p),em(p,y,h)}function Vc(u,h){u.H&&G(u.H,function(p,y){Ke(h,y,p)}),u.l&&Lb({},function(p,y){Ke(h,y,p)})}function tD(u,h,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var A=u.i;let k=-1;for(;;){let W=["count="+p];k==-1?0<p?(k=A[0].g,W.push("ofs="+k)):k=0:W.push("ofs="+k);let $e=!0;for(let At=0;At<p;At++){let Re=A[At].g,Vt=A[At].map;if(Re-=k,0>Re)k=Math.max(0,A[At].g-100),$e=!1;else try{MO(Vt,W,"req"+Re+"_")}catch{y&&y(Vt)}}if($e){y=W.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,y}function nD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;_c||db(),Ec||(_c(),Ec=!0),jg.add(h,u),u.v=0}}function am(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Sc(g(u.Fa,u),sD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,rD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Sc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,zt(10),cd(this),rD(this))};function cm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function rD(u){u.g=new hi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=kr(u.qa);Ke(h,"RID","rpc"),Ke(h,"SID",u.K),Ke(h,"AID",u.T),Ke(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ke(h,"TO",u.ja),Ke(h,"TYPE","xmlhttp"),Vc(u,h),u.m&&u.o&&sm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=sd(kr(h)),p.m=null,p.P=!0,Mb(p,u)}n.Za=function(){this.C!=null&&(this.C=null,cd(this),am(this),zt(19))};function ld(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function iD(u,h){var p=null;if(u.g==h){ld(u),cm(u),u.g=null;var y=2}else if(rm(u.h,h))p=h.D,Fb(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=u.B;y=Xl(),$t(y,new Tb(y,p)),ud(u)}else nD(u);else if(A=h.s,A==3||A==0&&0<h.X||!(y==1&&PO(u,h)||y==2&&am(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),A){case 1:ms(u,5);break;case 4:ms(u,10);break;case 3:ms(u,6);break;default:ms(u,2)}}}function sD(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function ms(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),y=u.Xa;let A=!y;y=new gs(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rd(y,"https"),sd(y),A?SO(y.toString(),p):AO(y.toString(),p)}else zt(2);u.G=0,u.l&&u.l.sa(h),oD(u),Xb(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function oD(u){if(u.G=0,u.ka=[],u.l){let h=Vb(u.h);(h.length!=0||u.i.length!=0)&&(C(u.ka,h),C(u.ka,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.ra()}}function aD(u,h,p){var y=p instanceof gs?kr(p):new gs(p);if(y.g!="")h&&(y.g=h+"."+y.g),id(y,y.s);else{var A=a.location;y=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var k=new gs(null);y&&rd(k,y),h&&(k.g=h),A&&id(k,A),p&&(k.l=p),y=k}return p=u.D,h=u.ya,p&&h&&Ke(y,p,h),Ke(y,"VER",u.la),Vc(u,y),y}function cD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new it(new Nc({eb:p})):new it(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uD(){}n=uD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function dd(){}dd.prototype.g=function(u,h){return new pn(u,h)};function pn(u,h){Ft.call(this),this.g=new Jb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!O(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!O(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new wo(this)}w(pn,Ft),pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},pn.prototype.close=function(){om(this.g)},pn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Kg(u),u=p);h.i.push(new yO(h.Ya++,u)),h.G==3&&ud(h)},pn.prototype.N=function(){this.g.l=null,delete this.j,om(this.g),delete this.g,pn.aa.N.call(this)};function lD(u){Yg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}w(lD,Yg);function dD(){Zg.call(this),this.status=1}w(dD,Zg);function wo(u){this.g=u}w(wo,uD),wo.prototype.ua=function(){$t(this.g,"a")},wo.prototype.ta=function(u){$t(this.g,new lD(u))},wo.prototype.sa=function(u){$t(this.g,new dD)},wo.prototype.ra=function(){$t(this.g,"b")},dd.prototype.createWebChannel=dd.prototype.g,pn.prototype.send=pn.prototype.o,pn.prototype.open=pn.prototype.m,pn.prototype.close=pn.prototype.close,H_=ti.createWebChannelTransport=function(){return new dd},q_=ti.getStatEventTarget=function(){return Xl()},z_=ti.Event=fs,cp=ti.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ed.NO_ERROR=0,ed.TIMEOUT=8,ed.HTTP_ERROR=6,al=ti.ErrorCode=ed,Sb.COMPLETE="complete",$_=ti.EventType=Sb,Ib.EventType=Cc,Cc.OPEN="a",Cc.CLOSE="b",Cc.ERROR="c",Cc.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,Ra=ti.WebChannel=Ib,CH=ti.FetchXmlHttpFactory=Nc,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,B_=ti.XhrIo=it}).apply(typeof ap<"u"?ap:typeof self<"u"?self:typeof window<"u"?window:{});var nk="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var cc="10.14.0";var Xi=new gd("@firebase/firestore");function Fa(){return Xi.logLevel}function sN(n){Xi.setLogLevel(n)}function j(n,...e){if(Xi.logLevel<=or.DEBUG){let t=e.map(YI);Xi.debug(`Firestore (${cc}): ${n}`,...t)}}function at(n,...e){if(Xi.logLevel<=or.ERROR){let t=e.map(YI);Xi.error(`Firestore (${cc}): ${n}`,...t)}}function er(n,...e){if(Xi.logLevel<=or.WARN){let t=e.map(YI);Xi.warn(`Firestore (${cc}): ${n}`,...t)}}function YI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n="Unexpected state"){let e=`FIRESTORE (${cc}) INTERNAL ASSERTION FAILED: `+n;throw at(e),new Error(e)}function ie(n,e){n||ne()}function oN(n,e){n||ne()}function Y(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends yD{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ct=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var vp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Z_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}},J_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},X_=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ie(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ct;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ct,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ct)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new vp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new yt(e)}},eE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},tE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new eE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},nE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},rE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ie(this.o===void 0);let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ie(typeof t.token=="string"),this.R=t.token,new nE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function AH(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var wp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=AH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function he(n,e){return n<e?-1:n>e?1:0}function Ha(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function aN(n){return n+"\0"}var nt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new nt(0,0))}static max(){return new n(new nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _p=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(),r===void 0?r=e.length-t:r>e.length-t&&ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Se=class n extends _p{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},xH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ct=class n extends _p{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return xH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};var Ga=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function iE(n){return n.fields.find(e=>e.kind===2)}function qs(n){return n.fields.filter(e=>e.kind!==2)}Ga.UNKNOWN_ID=-1;var $a=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var wl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,jn.min())}};function cN(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new nt(t+1,0):new nt(t,r));return new jn(i,Z.empty(),e)}function uN(n){return new jn(n.readTime,n.key,-1)}var jn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),Z.empty(),-1)}static max(){return new n(ae.max(),Z.empty(),-1)}};function ZI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}var lN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ep=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function us(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==lN)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Ip=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ct,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ys(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=JI(r.target.error);this.V.reject(new Ys(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new Ys(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new oE(t)}},es=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Lc())===12.2&&at("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),Hs(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!pd())return!1;if(n.v())return!0;let e=Lc(),t=n.S(e),r=0<t&&t<10,i=dN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return b(this,null,function*(){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new Ys(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new V(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new V(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ys(e,o))},i.onupgradeneeded=s=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return b(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Ip.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function dN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var sE=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Hs(this.B.delete())}},Ys=class extends V{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function ls(n){return n.name==="IndexedDbTransactionError"}var oE=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(j("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hs(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),Hs(this.store.add(e))}get(e){return Hs(this.store.get(e)).next(t=>(t===void 0&&(t=null),j("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),Hs(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),Hs(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new R((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new R((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){j("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new R((r,i)=>{t.onerror=s=>{let o=JI(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new R((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new sE(a),l=t(a.primaryKey,a.value,c);if(l instanceof R){let d=l.catch(f=>(c.done(),R.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>R.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Hs(n){return new R((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=JI(r.target.error);t(i)}})}var rk=!1;function JI(n){let e=es.S(Lc());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new V("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rk||(rk=!0,setTimeout(()=>{throw r},0)),r}}return n}var aE=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){j("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>b(this,null,function*(){this.task=null;try{j("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){ls(t)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield us(t)}yield this.X(6e4)}))}},cE=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return b(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return R.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(j("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=uN(s);ZI(o,r)>0&&(r=o)}),new jn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Dn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ul(n){return n==null}function _l(n){return n===0&&1/n==-1/0}function hN(n){return typeof n=="number"&&Number.isInteger(n)&&!_l(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Yt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ik(e)),e=MH(n.get(t),e);return ik(e)}function MH(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function ik(n){return n+""}function Er(n){let e=n.length;if(ie(e>=2),e===2)return ie(n.charAt(0)===""&&n.charAt(1)===""),Se.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&ne(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:ne()}s=o+2}return new Se(r)}var sk=["userId","batchId"];function fp(n,e){return[n,Yt(e)]}function fN(n,e,t){return[n,Yt(e),t]}var RH={},kH=["prefixPath","collectionGroup","readTime","documentId"],NH=["prefixPath","collectionGroup","documentId"],PH=["collectionGroup","readTime","prefixPath","documentId"],OH=["canonicalId","targetId"],FH=["targetId","path"],VH=["path","targetId"],LH=["collectionId","parent"],jH=["indexId","uid"],UH=["uid","sequenceNumber"],BH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],$H=["indexId","uid","orderedDocumentKey"],zH=["userId","collectionPath","documentId"],qH=["userId","collectionPath","largestBatchId"],HH=["userId","collectionGroup","largestBatchId"],pN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],GH=[...pN,"documentOverlays"],gN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mN=gN,XI=[...mN,"indexConfiguration","indexState","indexEntries"],WH=XI,KH=[...XI,"globals"];var El=class extends Ep{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Tt(n,e){let t=Y(n);return es.F(t._e,e)}function ok(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function co(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ze=class n{constructor(e,t){this.comparator=e,this.root=t||br.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,br.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ba(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ba(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ba(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ba(this.root,e,this.comparator,!0)}},Ba=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},br=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};br.EMPTY=null,br.RED=!0,br.BLACK=!1;br.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,t,r,i,s){return this}insert(e,t,r){return new br(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qe=class n{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bp(this.data.getIterator())}getIteratorFrom(e){return new bp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},bp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function ka(n){return n.hasNext()?n.getNext():void 0}var Cn=class n{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new n([])}unionWith(e){let t=new qe(ct.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Dp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function vN(){return typeof atob<"u"}var lt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Dp("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};lt.EMPTY_BYTE_STRING=new lt("");var QH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ii(n){if(ie(!!n),typeof n=="string"){let e=0,t=QH.exec(n);if(ie(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(n.seconds),nanos:Je(n.nanos)}}function Je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ts(n){return typeof n=="string"?lt.fromBase64String(n):lt.fromUint8Array(n)}function gg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function e0(n){let e=n.mapValue.fields.__previous_value__;return gg(e)?e0(e):e}function Il(n){let e=ii(n.mapValue.fields.__local_write_time__.timestampValue);return new nt(e.seconds,e.nanos)}var uE=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},ns=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Zi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},pp={nullValue:"NULL_VALUE"};function Zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?gg(n)?4:wN(n)?9007199254740991:mg(n)?10:11:ne()}function Tr(n,e){if(n===e)return!0;let t=Zs(n);if(t!==Zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Il(n).isEqual(Il(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ii(i.timestampValue),a=ii(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Je(i.doubleValue),a=Je(s.doubleValue);return o===a?_l(o)===_l(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ha(n.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ok(o)!==ok(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Tr(o[c],a[c])))return!1;return!0}(n,e);default:return ne()}}function bl(n,e){return(n.values||[]).find(t=>Tr(t,e))!==void 0}function rs(n,e){if(n===e)return 0;let t=Zs(n),r=Zs(e);if(t!==r)return he(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Je(s.integerValue||s.doubleValue),c=Je(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return ak(n.timestampValue,e.timestampValue);case 4:return ak(Il(n),Il(e));case 5:return he(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ts(s),c=ts(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=he(a[l],c[l]);if(d!==0)return d}return he(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=he(Je(s.latitude),Je(o.latitude));return a!==0?a:he(Je(s.longitude),Je(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ck(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=he(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:ck(m,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Zi.mapValue&&o===Zi.mapValue)return 0;if(s===Zi.mapValue)return 1;if(o===Zi.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=he(c[f],d[f]);if(g!==0)return g;let m=rs(a[c[f]],l[d[f]]);if(m!==0)return m}return he(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ne()}}function ak(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);let t=ii(n),r=ii(e),i=he(t.seconds,r.seconds);return i!==0?i:he(t.nanos,r.nanos)}function ck(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=rs(t[i],r[i]);if(s)return s}return he(t.length,r.length)}function Wa(n){return lE(n)}function lE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ii(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ts(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=lE(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${lE(t.fields[o])}`;return i+"}"}(n.mapValue):ne()}function Js(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function dE(n){return!!n&&"integerValue"in n}function Dl(n){return!!n&&"arrayValue"in n}function uk(n){return!!n&&"nullValue"in n}function lk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gp(n){return!!n&&"mapValue"in n}function mg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return co(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var _N={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function YH(n){return"nullValue"in n?pp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Js(ns.empty(),Z.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?mg(n)?_N:{mapValue:{}}:ne()}function ZH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Js(ns.empty(),Z.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?_N:"mapValue"in n?mg(n)?{mapValue:{}}:Zi:ne()}function dk(n,e){let t=rs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function hk(n,e){let t=rs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Bt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!gp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(t)}setAll(e){let t=ct.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=pl(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());gp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];gp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){co(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(pl(this.value))}};function EN(n){let e=[];return co(n.fields,(t,r)=>{let i=new ct([t]);if(gp(r)){let s=EN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Cn(e)}var vt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),Bt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),Bt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),Bt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Sr=class{constructor(e,t){this.position=e,this.inclusive=t}};function fk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),t.key):r=rs(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tr(n.position[t],e.position[t]))return!1;return!0}var Xs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function JH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Cp=class{},be=class n extends Cp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new pE(e,t,r):t==="array-contains"?new yE(e,r):t==="in"?new Tp(e,r):t==="not-in"?new vE(e,r):t==="array-contains-any"?new wE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gE(e,r):new mE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(rs(t,this.value)):t!==null&&Zs(this.value)===Zs(t)&&this.matchesComparison(rs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ve=class n extends Cp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Ka(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Ka(n){return n.op==="and"}function hE(n){return n.op==="or"}function t0(n){return IN(n)&&Ka(n)}function IN(n){for(let e of n.filters)if(e instanceof Ve)return!1;return!0}function fE(n){if(n instanceof be)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(t0(n))return n.filters.map(e=>fE(e)).join(",");{let e=n.filters.map(t=>fE(t)).join(",");return`${n.op}(${e})`}}function bN(n,e){return n instanceof be?function(r,i){return i instanceof be&&r.op===i.op&&r.field.isEqual(i.field)&&Tr(r.value,i.value)}(n,e):n instanceof Ve?function(r,i){return i instanceof Ve&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bN(o,i.filters[a]),!0):!1}(n,e):void ne()}function DN(n,e){let t=n.filters.concat(e);return Ve.create(t,n.op)}function CN(n){return n instanceof be?function(t){return`${t.field.canonicalString()} ${t.op} ${Wa(t.value)}`}(n):n instanceof Ve?function(t){return t.op.toString()+" {"+t.getFilters().map(CN).join(" ,")+"}"}(n):"Filter"}var pE=class extends be{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},gE=class extends be{constructor(e,t){super(e,"in",t),this.keys=TN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},mE=class extends be{constructor(e,t){super(e,"not-in",t),this.keys=TN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function TN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Z.fromName(r.referenceValue))}var yE=class extends be{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Dl(t)&&bl(t.arrayValue,this.value)}},Tp=class extends be{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&bl(this.value.arrayValue,t)}},vE=class extends be{constructor(e,t){super(e,"not-in",t)}matches(e){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!bl(this.value.arrayValue,t)}},wE=class extends be{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Dl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>bl(this.value.arrayValue,r))}};var _E=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function EE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new _E(n,e,t,r,i,s,o)}function eo(n){let e=Y(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ul(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wa(r)).join(",")),e.ue=t}return e.ue}function Bl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!JH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pk(n.startAt,e.startAt)&&pk(n.endAt,e.endAt)}function Sp(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Ap(n,e){return n.filters.filter(t=>t instanceof be&&t.field.isEqual(e))}function gk(n,e,t){let r=pp,i=!0;for(let s of Ap(n,e)){let o=pp,a=!0;switch(s.op){case"<":case"<=":o=YH(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=pp}dk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];dk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function mk(n,e,t){let r=Zi,i=!0;for(let s of Ap(n,e)){let o=Zi,a=!0;switch(s.op){case">=":case">":o=ZH(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Zi}hk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];hk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var tr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function SN(n,e,t,r,i,s,o,a){return new tr(n,e,t,r,i,s,o,a)}function uc(n){return new tr(n)}function yk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function n0(n){return n.collectionGroup!==null}function za(n){let e=Y(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qe(ct.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Xs(s,r))}),t.has(ct.keyField().canonicalString())||e.ce.push(new Xs(ct.keyField(),r))}return e.ce}function Zt(n){let e=Y(n);return e.le||(e.le=XH(e,za(n))),e.le}function XH(n,e){if(n.limitType==="F")return EE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Xs(i.field,s)});let t=n.endAt?new Sr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Sr(n.startAt.position,n.startAt.inclusive):null;return EE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function IE(n,e){let t=n.filters.concat([e]);return new tr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xp(n,e,t){return new tr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $l(n,e){return Bl(Zt(n),Zt(e))&&n.limitType===e.limitType}function AN(n){return`${eo(Zt(n))}|lt:${n.limitType}`}function Va(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>CN(i)).join(", ")}]`),Ul(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Wa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Wa(i)).join(",")),`Target(${r})`}(Zt(n))}; limitType=${n.limitType})`}function zl(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of za(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=fk(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,za(r),i)||r.endAt&&!function(o,a,c){let l=fk(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,za(r),i))}(n,e)}function xN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MN(n){return(e,t)=>{let r=!1;for(let i of za(n)){let s=e3(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function e3(n,e,t){let r=n.field.isKeyField()?Z.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?rs(c,l):ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var Ar=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return yN(this.inner)}size(){return this.innerSize}};var t3=new Ze(Z.comparator);function hn(){return t3}var RN=new Ze(Z.comparator);function hl(...n){let e=RN;for(let t of n)e=e.insert(t.key,t);return e}function kN(n){let e=RN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ir(){return gl()}function NN(){return gl()}function gl(){return new Ar(n=>n.toString(),(n,e)=>n.isEqual(e))}var n3=new Ze(Z.comparator),r3=new qe(Z.comparator);function pe(...n){let e=r3;for(let t of n)e=e.add(t);return e}var i3=new qe(he);function r0(){return i3}function i0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_l(e)?"-0":e}}function PN(n){return{integerValue:""+n}}function ON(n,e){return hN(e)?PN(e):i0(n,e)}var Qa=class{constructor(){this._=void 0}};function s3(n,e,t){return n instanceof is?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&gg(s)&&(s=e0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof si?VN(n,e):n instanceof oi?LN(n,e):function(i,s){let o=FN(i,s),a=vk(o)+vk(i.Pe);return dE(o)&&dE(i.Pe)?PN(a):i0(i.serializer,a)}(n,e)}function o3(n,e,t){return n instanceof si?VN(n,e):n instanceof oi?LN(n,e):t}function FN(n,e){return n instanceof ss?function(r){return dE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var is=class extends Qa{},si=class extends Qa{constructor(e){super(),this.elements=e}};function VN(n,e){let t=jN(e);for(let r of n.elements)t.some(i=>Tr(i,r))||t.push(r);return{arrayValue:{values:t}}}var oi=class extends Qa{constructor(e){super(),this.elements=e}};function LN(n,e){let t=jN(e);for(let r of n.elements)t=t.filter(i=>!Tr(i,r));return{arrayValue:{values:t}}}var ss=class extends Qa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function vk(n){return Je(n.integerValue||n.doubleValue)}function jN(n){return Dl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var to=class{constructor(e,t){this.field=e,this.transform=t}};function a3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof si&&i instanceof si||r instanceof oi&&i instanceof oi?Ha(r.elements,i.elements,Tr):r instanceof ss&&i instanceof ss?Tr(r.Pe,i.Pe):r instanceof is&&i instanceof is}(n.transform,e.transform)}var bE=class{constructor(e,t){this.version=e,this.transformResults=t}},ot=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function mp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ya=class{};function UN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new as(n.key,ot.none()):new os(n.key,n.data,ot.none());{let t=n.data,r=Bt.empty(),i=new qe(ct.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new nr(n.key,r,new Cn(i.toArray()),ot.none())}}function c3(n,e,t){n instanceof os?function(i,s,o){let a=i.value.clone(),c=_k(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof nr?function(i,s,o){if(!mp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=_k(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(BN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ml(n,e,t,r){return n instanceof os?function(s,o,a,c){if(!mp(s.precondition,o))return a;let l=s.value.clone(),d=Ek(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof nr?function(s,o,a,c){if(!mp(s.precondition,o))return a;let l=Ek(s.fieldTransforms,c,o),d=o.data;return d.setAll(BN(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return mp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function u3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=FN(r.transform,i||null);s!=null&&(t===null&&(t=Bt.empty()),t.set(r.field,s))}return t||null}function wk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ha(r,i,(s,o)=>a3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var os=class extends Ya{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},nr=class extends Ya{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function BN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function _k(n,e,t){let r=new Map;ie(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,o3(o,a,t[i]))}return r}function Ek(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,s3(s,o,e))}return r}var as=class extends Ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Cl=class extends Ya{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Tl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&c3(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ml(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ml(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=NN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=UN(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),pe())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,(t,r)=>wk(t,r))&&Ha(this.baseMutations,e.baseMutations,(t,r)=>wk(t,r))}},DE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ie(e.mutations.length===r.length);let i=function(){return n3}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Sl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var CE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var gt,Te;function $N(n){switch(n){default:return ne();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function zN(n){if(n===void 0)return at("GRPC error has no .code"),N.UNKNOWN;switch(n){case gt.OK:return N.OK;case gt.CANCELLED:return N.CANCELLED;case gt.UNKNOWN:return N.UNKNOWN;case gt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case gt.INTERNAL:return N.INTERNAL;case gt.UNAVAILABLE:return N.UNAVAILABLE;case gt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case gt.NOT_FOUND:return N.NOT_FOUND;case gt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case gt.ABORTED:return N.ABORTED;case gt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case gt.DATA_LOSS:return N.DATA_LOSS;default:return ne()}}(Te=gt||(gt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var Ik=null;function qN(){return new TextEncoder}var l3=new Gi([4294967295,4294967295],0);function bk(n){let e=qN().encode(n),t=new U_;return t.update(e),new Uint8Array(t.digest())}function Dk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gi([t,r],0),new Gi([i,s],0)]}var TE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qs(`Invalid padding: ${t}`);if(r<0)throw new Qs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Qs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Gi.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Gi.fromNumber(r)));return i.compare(l3)===1&&(i=new Gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=bk(e),[r,i]=Dk(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=bk(e),[r,i]=Dk(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Qs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Al=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new Ze(he),hn(),pe())}},xl=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,pe(),pe(),pe())}};var qa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Mp=class{constructor(e,t){this.targetId=e,this.me=t}},Rp=class{constructor(e,t,r=lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},kp=class{constructor(){this.fe=0,this.ge=Tk(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=pe(),t=pe(),r=pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new xl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Tk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},SE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=hn(),this.qe=Ck(),this.Qe=new Ze(he)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Sp(s))if(r===0){let o=new Z(s.path);this.Ue(t,o,vt.newNoDocument(o,ae.min()))}else ie(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}Ik?.et(function(d,f,g,m,w){var D,C,P,O,F,B;let J={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},G=f.unchangedNames;return G&&(J.bloomFilter={applied:w===0,hashCount:(D=G?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(O=(P=(C=G?.bits)===null||C===void 0?void 0:C.bitmap)===null||P===void 0?void 0:P.length)!==null&&O!==void 0?O:0,padding:(B=(F=G?.bits)===null||F===void 0?void 0:F.padding)!==null&&B!==void 0?B:0,mightContain:I=>{var v;return(v=m?.mightContain(I))!==null&&v!==void 0&&v}}),J}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ts(r).toUint8Array()}catch(c){if(c instanceof Dp)return er("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new TE(o,i,s)}catch(c){return er(c instanceof Qs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Sp(a.target)){let c=new Z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,vt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Al(e,t,this.Qe,this.ke,r);return this.ke=hn(),this.qe=Ck(),this.Qe=new Ze(he),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new kp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qe(he),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new kp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Ck(){return new Ze(Z.comparator)}function Tk(){return new Ze(Z.comparator)}var d3={asc:"ASCENDING",desc:"DESCENDING"},h3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f3={and:"AND",or:"OR"},AE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function xE(n,e){return n.useProto3Json||Ul(e)?e:{value:e}}function Za(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function p3(n,e){return Za(n,e.toTimestamp())}function ut(n){return ie(!!n),ae.fromTimestamp(function(t){let r=ii(t);return new nt(r.seconds,r.nanos)}(n))}function s0(n,e){return ME(n,e).canonicalString()}function ME(n,e){let t=function(i){return new Se(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function GN(n){let e=Se.fromString(n);return ie(n1(e)),e}function Ml(n,e){return s0(n.databaseId,e.path)}function Dr(n,e){let t=GN(e);if(t.get(1)!==n.databaseId.projectId)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(QN(t))}function WN(n,e){return s0(n.databaseId,e)}function KN(n){let e=GN(n);return e.length===4?Se.emptyPath():QN(e)}function RE(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function QN(n){return ie(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Sk(n,e,t){return{name:Ml(n,e),fields:t.value.mapValue.fields}}function YN(n,e,t){let r=Dr(n,e.name),i=ut(e.updateTime),s=e.createTime?ut(e.createTime):ae.min(),o=new Bt({mapValue:{fields:e.fields}}),a=vt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function g3(n,e){return"found"in e?function(r,i){ie(!!i.found),i.found.name,i.found.updateTime;let s=Dr(r,i.found.name),o=ut(i.found.updateTime),a=i.found.createTime?ut(i.found.createTime):ae.min(),c=new Bt({mapValue:{fields:i.found.fields}});return vt.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){ie(!!i.missing),ie(!!i.readTime);let s=Dr(r,i.missing),o=ut(i.readTime);return vt.newNoDocument(s,o)}(n,e):ne()}function m3(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(ie(d===void 0||typeof d=="string"),lt.fromBase64String(d||"")):(ie(d===void 0||d instanceof Buffer||d instanceof Uint8Array),lt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?N.UNKNOWN:zN(l.code);return new V(d,l.message||"")}(o);t=new Rp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Dr(n,r.document.name),s=ut(r.document.updateTime),o=r.document.createTime?ut(r.document.createTime):ae.min(),a=new Bt({mapValue:{fields:r.document.fields}}),c=vt.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new qa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Dr(n,r.document),s=r.readTime?ut(r.readTime):ae.min(),o=vt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new qa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Dr(n,r.document),s=r.removedTargetIds||[];t=new qa([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new CE(i,s),a=r.targetId;t=new Mp(a,o)}}return t}function Rl(n,e){let t;if(e instanceof os)t={update:Sk(n,e.key,e.value)};else if(e instanceof as)t={delete:Ml(n,e.key)};else if(e instanceof nr)t={update:Sk(n,e.key,e.data),updateMask:I3(e.fieldMask)};else{if(!(e instanceof Cl))return ne();t={verify:Ml(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof is)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof si)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof oi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ss)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:p3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(n,e.precondition)),t}function kE(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?ot.updateTime(ut(s.updateTime)):s.exists!==void 0?ot.exists(s.exists):ot.none()}(e.currentDocument):ot.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)ie(a.setToServerValue==="REQUEST_TIME"),c=new is;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new si(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new oi(d)}else"increment"in a?c=new ss(o,a.increment):ne();let l=ct.fromServerFormat(a.fieldPath);return new to(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Dr(n,e.update.name),s=new Bt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new Cn(l.map(d=>ct.fromServerFormat(d)))}(e.updateMask);return new nr(i,s,o,t,r)}return new os(i,s,t,r)}if(e.delete){let i=Dr(n,e.delete);return new as(i,t)}if(e.verify){let i=Dr(n,e.verify);return new Cl(i,t)}return ne()}function y3(n,e){return n&&n.length>0?(ie(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ut(i.updateTime):ut(s);return o.isEqual(ae.min())&&(o=ut(s)),new bE(o,i.transformResults||[])}(t,e))):[]}function ZN(n,e){return{documents:[WN(n,e.path)]}}function JN(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=WN(n,i);let s=function(l){if(l.length!==0)return t1(Ve.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:La(g.field),direction:w3(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=xE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function XN(n){let e=KN(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ie(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=e1(f);return g instanceof Ve&&t0(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(w){return new Xs(ja(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Ul(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new Sr(m,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,m=f.values||[];return new Sr(m,g)}(t.endAt)),SN(e,i,o,s,a,"F",c,l)}function v3(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function e1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ja(t.unaryFilter.field);return be.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ja(t.unaryFilter.field);return be.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ja(t.unaryFilter.field);return be.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ja(t.unaryFilter.field);return be.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(n):n.fieldFilter!==void 0?function(t){return be.create(ja(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ve.create(t.compositeFilter.filters.map(r=>e1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(t.compositeFilter.op))}(n):ne()}function w3(n){return d3[n]}function _3(n){return h3[n]}function E3(n){return f3[n]}function La(n){return{fieldPath:n.canonicalString()}}function ja(n){return ct.fromServerFormat(n.fieldPath)}function t1(n){return n instanceof be?function(t){if(t.op==="=="){if(lk(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NAN"}};if(uk(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lk(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NAN"}};if(uk(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(t.field),op:_3(t.op),value:t.value}}}(n):n instanceof Ve?function(t){let r=t.getFilters().map(i=>t1(i));return r.length===1?r[0]:{compositeFilter:{op:E3(t.op),filters:r}}}(n):ne()}function I3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function n1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Ja=class n{constructor(e,t,r,i,s=ae.min(),o=ae.min(),a=lt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Np=class{constructor(e){this.ct=e}};function b3(n,e){let t;if(e.document)t=YN(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=Z.fromSegments(e.noDocument.path),i=ro(e.noDocument.readTime);t=vt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne();{let r=Z.fromSegments(e.unknownDocument.path),i=ro(e.unknownDocument.version);t=vt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new nt(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),t}function Ak(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Pp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Ml(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Za(s,o.version.toTimestamp()),createTime:Za(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:no(e.version)};else{if(!e.isUnknownDocument())return ne();r.unknownDocument={path:t.path.toArray(),version:no(e.version)}}return r}function Pp(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function no(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ro(n){let e=new nt(n.seconds,n.nanoseconds);return ae.fromTimestamp(e)}function Gs(n,e){let t=(e.baseMutations||[]).map(s=>kE(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>kE(n.ct,s)),i=nt.fromMillis(e.localWriteTimeMs);return new Tl(e.batchId,i,t,r)}function fl(n){let e=ro(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ro(n.lastLimboFreeSnapshotVersion):ae.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return ie(s.documents.length===1),Zt(uc(KN(s.documents[0])))}(n.query):function(s){return Zt(XN(s))}(n.query),new Ja(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,lt.fromBase64String(n.resumeToken))}function r1(n,e){let t=no(e.snapshotVersion),r=no(e.lastLimboFreeSnapshotVersion),i;i=Sp(e.target)?ZN(n.ct,e.target):JN(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:eo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function o0(n){let e=XN({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xp(e,e.limit,"L"):e}function G_(n,e){return new Sl(e.largestBatchId,kE(n.ct,e.overlayMutation))}function xk(n,e){let t=e.path.lastSegment();return[n,Yt(e.path.popLast()),t]}function Mk(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:no(r.readTime),documentKey:Yt(r.documentKey.path),largestBatchId:r.largestBatchId}}var NE=class{getBundleMetadata(e,t){return Rk(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ro(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return Rk(e).put(function(i){return{bundleId:i.id,createTime:no(ut(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return kk(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:o0(s.bundledQuery),readTime:ro(s.readTime)}}(r)})}saveNamedQuery(e,t){return kk(e).put(function(i){return{name:i.name,readTime:no(ut(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function Rk(n){return Tt(n,"bundles")}function kk(n){return Tt(n,"namedQueries")}var Op=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return cl(e).get(xk(this.userId,t)).next(r=>r?G_(this.serializer,r):null)}getOverlays(e,t){let r=Ir();return R.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Sl(t,o);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(Yt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(cl(e).j("collectionPathOverlayIndex",a))}),R.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Ir(),s=Yt(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return cl(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=G_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Ir(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return cl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=G_(this.serializer,l);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return cl(e).put(function(i,s,o){let[a,c,l]=xk(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Rl(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function cl(n){return Tt(n,"documentOverlays")}var PE=class{Pt(e){return Tt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?lt.fromUint8Array(r):lt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ni=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Je(e.integerValue));else if("doubleValue"in e){let r=Je(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),_l(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ii(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ts(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?wN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):mg(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ne()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Je(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ni.vt=new ni;function D3(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Nk(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=D3(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var OE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=Nk(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=Nk(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},FE=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},VE=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ws=class{constructor(){this.jt=new OE,this.Ht=new FE(this.jt),this.Jt=new VE(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Ks=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Wi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Pk(n.arrayValue,e.arrayValue),t!==0?t:(t=Pk(n.directionalValue,e.directionalValue),t!==0?t:Z.comparator(n.documentKey,e.documentKey)))}function Pk(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Fp=class{constructor(e){this.Xt=new qe((t,r)=>ct.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ie(e.collectionGroup===this.collectionId),this.nn)return!1;let t=iE(e);if(t!==void 0&&!this.sn(t))return!1;let r=qs(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new qe(ct.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new $a(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new $a(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new $a(r.field,r.dir==="asc"?0:1)));return new Ga(Ga.UNKNOWN_ID,this.collectionId,t,wl.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function i1(n){var e,t;if(ie(n instanceof be||n instanceof Ve),n instanceof be){if(n instanceof Tp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>be.create(n.field,"==",s)))||[];return Ve.create(i,"or")}return n}let r=n.filters.map(i=>i1(i));return Ve.create(r,n.op)}function C3(n){if(n.getFilters().length===0)return[];let e=UE(i1(n));return ie(s1(e)),LE(e)||jE(e)?[e]:e.getFilters()}function LE(n){return n instanceof be}function jE(n){return n instanceof Ve&&t0(n)}function s1(n){return LE(n)||jE(n)||function(t){if(t instanceof Ve&&hE(t)){for(let r of t.getFilters())if(!LE(r)&&!jE(r))return!1;return!0}return!1}(n)}function UE(n){if(ie(n instanceof be||n instanceof Ve),n instanceof be)return n;if(n.filters.length===1)return UE(n.filters[0]);let e=n.filters.map(r=>UE(r)),t=Ve.create(e,n.op);return t=Vp(t),s1(t)?t:(ie(t instanceof Ve),ie(Ka(t)),ie(t.filters.length>1),t.filters.reduce((r,i)=>a0(r,i)))}function a0(n,e){let t;return ie(n instanceof be||n instanceof Ve),ie(e instanceof be||e instanceof Ve),t=n instanceof be?e instanceof be?function(i,s){return Ve.create([i,s],"and")}(n,e):Ok(n,e):e instanceof be?Ok(e,n):function(i,s){if(ie(i.filters.length>0&&s.filters.length>0),Ka(i)&&Ka(s))return DN(i,s.getFilters());let o=hE(i)?i:s,a=hE(i)?s:i,c=o.filters.map(l=>a0(l,a));return Ve.create(c,"or")}(n,e),Vp(t)}function Ok(n,e){if(Ka(e))return DN(e,n.getFilters());{let t=e.filters.map(r=>a0(n,r));return Ve.create(t,"or")}}function Vp(n){if(ie(n instanceof be||n instanceof Ve),n instanceof be)return n;let e=n.getFilters();if(e.length===1)return Vp(e[0]);if(IN(n))return n;let t=e.map(i=>Vp(i)),r=[];return t.forEach(i=>{i instanceof be?r.push(i):i instanceof Ve&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Ve.create(r,n.op)}var BE=class{constructor(){this.un=new kl}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(jn.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(jn.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},kl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new qe(Se.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qe(Se.comparator)).toArray()}};var up=new Uint8Array(0),$E=class{constructor(e,t){this.databaseId=t,this.cn=new kl,this.ln=new Ar(r=>eo(r),(r,i)=>Bl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:Yt(i)};return Fk(e).put(s)}return R.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[aN(t),""],!1,!0);return Fk(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Er(o.parent))}return r})}addFieldIndex(e,t){let r=ul(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Pa(e);return s.next(a=>{o.put(Mk(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=ul(e),i=Pa(e),s=Na(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=ul(e),r=Na(e),i=Pa(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return R.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Fp(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Na(e),i=!0,s=new Map;return R.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=pe(),a=[];return R.forEach(s,(c,l)=>{j("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`}(c)} to execute ${eo(t)}`);let d=function(F,B){let J=iE(B);if(J===void 0)return null;for(let G of Ap(F,J.fieldPath))switch(G.op){case"array-contains-any":return G.value.arrayValue.values||[];case"array-contains":return[G.value]}return null}(l,c),f=function(F,B){let J=new Map;for(let G of qs(B))for(let I of Ap(F,G.fieldPath))switch(I.op){case"==":case"in":J.set(G.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return J.set(G.fieldPath.canonicalString(),I.value),Array.from(J.values())}return null}(l,c),g=function(F,B){let J=[],G=!0;for(let I of qs(B)){let v=I.kind===0?gk(F,I.fieldPath,F.startAt):mk(F,I.fieldPath,F.startAt);J.push(v.value),G&&(G=v.inclusive)}return new Sr(J,G)}(l,c),m=function(F,B){let J=[],G=!0;for(let I of qs(B)){let v=I.kind===0?mk(F,I.fieldPath,F.endAt):gk(F,I.fieldPath,F.endAt);J.push(v.value),G&&(G=v.inclusive)}return new Sr(J,G)}(l,c),w=this.In(c,l,g),D=this.In(c,l,m),C=this.Tn(c,l,f),P=this.En(c.indexId,d,w,g.inclusive,D,m.inclusive,C);return R.forEach(P,O=>r.G(O,t.limit).next(F=>{F.forEach(B=>{let J=Z.fromSegments(B.documentKey);o.has(J)||(o=o.add(J),a.push(J))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=C3(Ve.create(e.filters,"and")).map(r=>EE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.dn(t[f/l]):up,m=this.An(e,g,r[f%l],i),w=this.Rn(e,g,s[f%l],o),D=a.map(C=>this.An(e,g,C,!0));d.push(...this.createRange(m,w,D))}return d}An(e,t,r,i){let s=new Ks(e,Z.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new Ks(e,Z.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new Fp(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return R.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new qe(ct.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ws;for(let i of qs(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);ni.vt.It(s,o)}return r.zt()}dn(e){let t=new Ws;return ni.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ws;return ni.vt.It(Js(this.databaseId,t),r.Yt(function(s){let o=qs(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ws);let s=0;for(let o of qs(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&Dl(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);ni.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new Ws;c.seed(a.zt()),ni.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof be&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=ul(e),i=Pa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return R.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){let g=f?new wl(f.sequenceNumber,new jn(ro(f.readTime),new Z(Er(f.documentKey)),f.largestBatchId)):wl.empty(),m=d.fields.map(([w,D])=>new $a(ct.fromServerFormat(w),D));return new Ga(d.indexId,d.collectionGroup,m,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:he(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=ul(e),s=Pa(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>R.forEach(a,c=>s.put(Mk(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return R.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(s,c);return l.isEqual(d)?R.resolve():this.bn(e,s,c,l,d)}))))})}Dn(e,t,r,i){return Na(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Na(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Na(e),s=new qe(Wi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Ks(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new qe(Wi),i=this.Vn(t,e);if(i==null)return r;let s=iE(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Dl(o))for(let a of o.arrayValue.values||[])r=r.add(new Ks(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Ks(t.indexId,e.key,up,i));return r}bn(e,t,r,i,s){j("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,d,f,g){let m=c.getIterator(),w=l.getIterator(),D=ka(m),C=ka(w);for(;D||C;){let P=!1,O=!1;if(D&&C){let F=d(D,C);F<0?O=!0:F>0&&(P=!0)}else D!=null?O=!0:P=!0;P?(f(C),C=ka(w)):O?(g(D),D=ka(m)):(D=ka(m),C=ka(w))}}(i,s,Wi,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),R.waitFor(o)}yn(e){let t=1;return Pa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Wi(o,a)).filter((o,a,c)=>!a||Wi(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Wi(o,e),c=Wi(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,up,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,up,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return Wi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Vk)}getMinOffset(e,t){return R.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ne())).next(Vk)}};function Fk(n){return Tt(n,"collectionParents")}function Na(n){return Tt(n,"indexEntries")}function ul(n){return Tt(n,"indexConfiguration")}function Pa(n){return Tt(n,"indexState")}function Vk(n){ie(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;ZI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new jn(e.readTime,e.documentKey,t)}var Lk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ln=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function o1(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(d,f,g)=>(a++,g.delete()));s.push(c.next(()=>{ie(a===1)}));let l=[];for(let d of t.mutations){let f=fN(e,d.key.path,t.batchId);s.push(i.delete(f)),l.push(d.key)}return R.waitFor(s).next(()=>l)}function Lp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ne();e=n.noDocument}return JSON.stringify(e).length}Ln.DEFAULT_COLLECTION_PERCENTILE=10,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ln.DEFAULT=new Ln(41943040,Ln.DEFAULT_COLLECTION_PERCENTILE,Ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ln.DISABLED=new Ln(-1,0,0);var jp=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ie(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ki(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=Ua(e),o=Ki(e);return o.add({}).next(a=>{ie(typeof a=="number");let c=new Tl(a,t,r,i),l=function(m,w,D){let C=D.baseMutations.map(O=>Rl(m.ct,O)),P=D.mutations.map(O=>Rl(m.ct,O));return{userId:w,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:C,mutations:P}}(this.serializer,this.userId,c),d=[],f=new qe((g,m)=>he(g.canonicalString(),m.canonicalString()));for(let g of i){let m=fN(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(l)),d.push(s.put(m,RH))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),R.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Ki(e).get(t).next(r=>r?(ie(r.userId===this.userId),Gs(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?R.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Ki(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(ie(a.batchId>=r),s=Gs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Ki(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ki(e).U("userMutationsIndex",t).next(r=>r.map(i=>Gs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=fp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Ua(e).J({range:i},(o,a,c)=>{let[l,d,f]=o,g=Er(d);if(l===this.userId&&t.path.isEqual(g))return Ki(e).get(f).next(m=>{if(!m)throw ne();ie(m.userId===this.userId),s.push(Gs(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qe(he),i=[];return t.forEach(s=>{let o=fp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Ua(e).J({range:a},(l,d,f)=>{let[g,m,w]=l,D=Er(m);g===this.userId&&s.path.isEqual(D)?r=r.add(w):f.done()});i.push(c)}),R.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=fp(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new qe(he);return Ua(e).J({range:o},(c,l,d)=>{let[f,g,m]=c,w=Er(g);f===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Ki(e).get(s).next(o=>{if(o===null)throw ne();ie(o.userId===this.userId),r.push(Gs(this.serializer,o))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return o1(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return R.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Ua(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Er(s[1]);i.push(c)}else a.done()}).next(()=>{ie(i.length===0)})})}containsKey(e,t){return a1(e,this.userId,t)}Nn(e){return c1(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function a1(n,e,t){let r=fp(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Ua(n).J({range:s,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(o=!0),l.done()}).next(()=>o)}function Ki(n){return Tt(n,"mutations")}function Ua(n){return Tt(n,"documentMutations")}function c1(n){return Tt(n,"mutationQueues")}var Xa=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var zE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Xa(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ae.fromTimestamp(new nt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Oa(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ie(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return Oa(e).J((o,a)=>{let c=fl(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>R.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Oa(e).J((r,i)=>{let s=fl(i);t(s)})}qn(e){return jk(e).get("targetGlobalKey").next(t=>(ie(t!==null),t))}Qn(e,t){return jk(e).put("targetGlobalKey",t)}Kn(e,t){return Oa(e).put(r1(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=eo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Oa(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=fl(a);Bl(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=Qi(e);return t.forEach(o=>{let a=Yt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),R.waitFor(i)}removeMatchingKeys(e,t,r){let i=Qi(e);return R.forEach(t,s=>{let o=Yt(s.path);return R.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=Qi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Qi(e),s=pe();return i.J({range:r,H:!0},(o,a,c)=>{let l=Er(o[1]),d=new Z(l);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=Yt(t.path),i=IDBKeyRange.bound([r],[aN(r)],!1,!0),s=0;return Qi(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Oa(e).get(t).next(r=>r?fl(r):null)}};function Oa(n){return Tt(n,"targets")}function jk(n){return Tt(n,"targetGlobal")}function Qi(n){return Tt(n,"targetDocuments")}function Uk([n,e],[t,r]){let i=he(n,t);return i===0?he(e,r):i}var qE=class{constructor(e){this.Un=e,this.buffer=new qe(Uk),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Uk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},HE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){ls(t)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield us(t)}yield this.Hn(3e5)}))}},GE=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return R.resolve(Dn.oe);let r=new qE(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(Lk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Lk):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Fa()<=or.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function T3(n,e){return new GE(n,e)}var WE=class{constructor(e,t){this.db=e,this.garbageCollector=T3(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return lp(e,r)}removeReference(e,t,r){return lp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return lp(e,t)}nr(e,t){return function(i,s){let o=!1;return c1(i).Y(a=>a1(i,a,s).next(c=>(c&&(o=!0),R.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),Qi(e).delete(function(f){return[0,Yt(f.path)]}(o))))});i.push(c)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return lp(e,t)}tr(e,t){let r=Qi(e),i,s=Dn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==Dn.oe&&t(new Z(Er(i)),s),s=l,i=c):s=Dn.oe}).next(()=>{s!==Dn.oe&&t(new Z(Er(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function lp(n,e){return Qi(n).put(function(r,i){return{targetId:0,path:Yt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Up=class{constructor(){this.changes=new Ar(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var KE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zs(e).put(r)}removeEntry(e,t,r){return zs(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Pp(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=vt.newInvalidDocument(t);return zs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ll(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:vt.newInvalidDocument(t)};return zs(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ll(t))},(i,s)=>{r={document:this.ir(t,s),size:Lp(s)}}).next(()=>r)}getEntries(e,t){let r=hn();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=hn(),i=new Ze(Z.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Lp(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return R.resolve();let i=new qe(zk);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(ll(i.first()),ll(i.last())),o=i.getIterator(),a=o.getNext();return zs(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{let f=Z.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&zk(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(ll(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Pp(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zs(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=hn();for(let f of l){let g=this.ir(Z.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(zl(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=hn(),o=$k(t,r),a=$k(t,jn.max());return zs(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let f=this.ir(Z.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new QE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Bk(e).get("remoteDocumentGlobalKey").next(t=>(ie(!!t),t))}rr(e,t){return Bk(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=b3(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return vt.newInvalidDocument(e)}};function u1(n){return new KE(n)}var QE=class extends Up{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ar(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new qe((s,o)=>he(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=Ak(this.cr.serializer,o);i=i.add(s.path.popLast());let l=Lp(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=Ak(this.cr.serializer,o.convertToNoDocument(ae.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),R.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function Bk(n){return Tt(n,"remoteDocumentGlobal")}function zs(n){return Tt(n,"remoteDocumentsV14")}function ll(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $k(n,e){let t=e.documentKey.path.toArray();return[n,Pp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zk(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=he(t[s],r[s]),i)return i;return i=he(t.length,r.length),i||(i=he(t[t.length-2],r[r.length-2]),i||he(t[t.length-1],r[r.length-1]))}var YE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Bp=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ml(r.mutation,i,Cn.empty(),nt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,pe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=pe()){let i=Ir();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=hl();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ir();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,pe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=hn(),o=gl(),a=function(){return gl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof nr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),ml(d.mutation,l,d.mutation.getFieldMask(),nt.now())):o.set(l.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new YE(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=gl(),i=new Ze((o,a)=>o-a),s=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Cn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||pe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=NN();d.forEach(g=>{if(!s.has(g)){let m=UN(t.get(g),r.get(g));m!==null&&f.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):n0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):R.resolve(Ir()),a=-1,c=s;return o.next(l=>R.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,pe())).next(d=>({batchId:a,changes:kN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(r=>{let i=hl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=hl();return this.indexManager.getCollectionParents(e,s).next(a=>R.forEach(a,c=>{let l=function(f,g){return new tr(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,vt.newInvalidDocument(d)))});let a=hl();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&ml(d.mutation,l,Cn.empty(),nt.now()),zl(t,l)&&(a=a.insert(c,l))}),a})}};var ZE=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ut(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:o0(i.bundledQuery),readTime:ut(i.readTime)}}(t)),R.resolve()}};var JE=class{constructor(){this.overlays=new Ze(Z.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ir();return R.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=Ir(),s=t.length+1,o=new Z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ze((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Ir(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Ir(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Sl(t,r));let s=this.Ir.get(t);s===void 0&&(s=pe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var XE=class{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var Nl=class{constructor(){this.Tr=new qe(mt.Er),this.dr=new qe(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new mt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new mt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Z(new Se([])),r=new mt(t,e),i=new mt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Z(new Se([])),r=new mt(t,e),i=new mt(t,e+1),s=pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new mt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},mt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Z.comparator(e.key,t.key)||he(e.wr,t.wr)}static Ar(e,t){return he(e.wr,t.wr)||Z.comparator(e.key,t.key)}};var eI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new qe(mt.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Tl(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new mt(t,0),i=new mt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new qe(he);return t.forEach(i=>{let s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Z.isDocumentKey(s)||(s=s.child(""));let o=new mt(new Z(s),0),a=new qe(he);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),R.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ie(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let s=new mt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new mt(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var tI=class{constructor(e){this.Mr=e,this.docs=function(){return new Ze(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(t))}getEntries(e,t){let r=hn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():vt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=hn(),o=t.path,a=new Z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||ZI(uN(d),r)<=0||(i.has(d.key)||zl(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ne()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nI(this)}getSize(e){return R.resolve(this.size)}},nI=class extends Up{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var rI=class{constructor(e){this.persistence=e,this.Nr=new Ar(t=>eo(t),Bl),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nl,this.targetCount=0,this.kr=Xa.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Xa(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var $p=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Dn(0),this.Kr=!1,this.Kr=!0,this.$r=new XE,this.referenceDelegate=e(this),this.Ur=new rI(this),this.indexManager=new BE,this.remoteDocumentCache=function(i){return new tI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Np(t),this.Gr=new ZE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new eI(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new iI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},iI=class extends Ep{constructor(e){super(),this.currentSequenceNumber=e}},zp=class n{constructor(e){this.persistence=e,this.Jr=new Nl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=Z.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var sI=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new Ip("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sk,{unique:!0}),c.createObjectStore("documentMutations")}(e),qk(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=R.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),qk(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",sk,{unique:!0});let f=l.store("mutations"),g=d.map(m=>f.put(m));return R.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:zH});l.createIndex("collectionPathOverlayIndex",qH,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",HH,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:kH});l.createIndex("documentKeyIndex",NH),l.createIndex("collectionGroupIndex",PH)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:jH}).createIndex("sequenceNumberIndex",UH,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:BH}).createIndex("documentKeyIndex",$H,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Lp(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>R.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>R.forEach(a,c=>{ie(c.userId===s.userId);let l=Gs(this.serializer,c);return o1(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Se(o),l=function(f){return[0,Yt(f)]}(c);s.push(t.get(l).next(d=>d?R.resolve():(f=>t.put({targetId:0,path:Yt(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>R.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:LH});let r=t.store("collectionParents"),i=new kl,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Yt(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Se(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=Er(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=fl(i),o=r1(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new Z(Se.fromString(f.document.name).popFirst(5)):f.noDocument?Z.fromSegments(f.noDocument.path):f.unknownDocument?Z.fromSegments(f.unknownDocument.path):ne()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>R.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=u1(this.serializer),s=new $p(zp.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:pe();Gs(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),R.forEach(a,(c,l)=>{let d=new yt(l),f=Op.lt(this.serializer,d),g=s.getIndexManager(d),m=jp.lt(d,this.serializer,g,s.referenceDelegate);return new Bp(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new El(t,Dn.oe),c).next()})})}};function qk(n){n.createObjectStore("targetDocuments",{keyPath:FH}).createIndex("documentTargetsIndex",VH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",OH,{unique:!0}),n.createObjectStore("targetGlobal")}var W_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",oI=class n{constructor(e,t,r,i,s,o,a,c,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new V(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new WE(this,i),this.Ai=t+"main",this.serializer=new Np(c),this.Ri=new es(this.Ai,this.hi,new sI(this.serializer)),this.$r=new PE,this.Ur=new zE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=u1(this.serializer),this.Gr=new NE,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&at("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new V(N.FAILED_PRECONDITION,W_);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Dn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>b(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>b(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>b(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>dp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(ls(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return dl(e).get("owner").next(t=>R.resolve(this.vi(t)))}Ci(e){return dp(e).delete(this.clientId)}Fi(){return b(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Tt(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return R.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):dl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new V(N.FAILED_PRECONDITION,W_);return!1}}return!(!this.networkEnabled||!this.inForeground)||dp(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&j("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return b(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new El(e,Dn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>dp(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return jp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new $E(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Op.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){j("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?KH:c===16?WH:c===15?XI:c===14?mN:c===13?gN:c===12?GH:c===11?pN:void ne()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new El(a,this.Qr?this.Qr.next():Dn.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw at(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new V(N.FAILED_PRECONDITION,lN);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return dl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new V(N.FAILED_PRECONDITION,W_)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dl(e).put("owner",t)}static D(){return es.D()}bi(e){let t=dl(e);return t.get("owner").next(r=>this.vi(r)?(j("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):R.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(at(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;hm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return at("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){at("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function dl(n){return Tt(n,"owner")}function dp(n){return Tt(n,"clientMetadata")}function c0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var aI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=pe(),i=pe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var cI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hm()?8:dN(Lc())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new cI;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Fa()<=or.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Va(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Fa()<=or.DEBUG&&j("QueryEngine","Query:",Va(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Fa()<=or.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Va(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(t))):R.resolve())}Yi(e,t){if(yk(t))return R.resolve(null);let r=Zt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xp(t,null,"F"),r=Zt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,xp(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return yk(t)||i.isEqual(ae.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?R.resolve(null):(Fa()<=or.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Va(t)),this.rs(e,o,t,cN(i,-1)).next(a=>a))})}ts(e,t){let r=new qe(MN(e));return t.forEach((i,s)=>{zl(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Fa()<=or.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Va(t)),this.Ji.getDocumentsMatchingQuery(e,t,jn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var uI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ze(he),this._s=new Ar(s=>eo(s),Bl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Bp(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function l1(n,e,t,r){return new uI(n,e,t,r)}function d1(n,e){return b(this,null,function*(){let t=Y(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=pe();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function S3(n,e){let t=Y(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),m=R.resolve();return g.forEach(w=>{m=m.next(()=>d.getEntry(c,w)).next(D=>{let C=l.docVersions.get(w);ie(C!==null),D.version.compareTo(C)<0&&(f.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),d.addEntry(D)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=pe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function h1(n){let e=Y(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function A3(n,e){let t=Y(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(lt.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(D,C,P){return D.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let c=hn(),l=pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(f1(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(ae.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function f1(n,e,t){let r=pe(),i=pe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=hn();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function x3(n,e){let t=Y(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ec(n,e){let t=Y(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Ja(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function tc(n,e,t){return b(this,null,function*(){let r=Y(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ls(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Hp(n,e,t){let r=Y(n),i=ae.min(),s=pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=Y(c),g=f._s.get(d);return g!==void 0?R.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,Zt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ae.min(),t?s:pe())).next(a=>(m1(r,xN(e),a),{documents:a,Ts:s})))}function p1(n,e){let t=Y(n),r=Y(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function g1(n,e){let t=Y(n),r=t.us.get(e)||ae.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,cN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(m1(t,e,i),i))}function m1(n,e,t){let r=n.us.get(e)||ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function M3(n,e,t,r){return b(this,null,function*(){let i=Y(n),s=pe(),o=hn();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(s=s.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),o=o.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield ec(i,function(d){return Zt(uc(Se.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>f1(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function R3(r,i){return b(this,arguments,function*(n,e,t=pe()){let s=yield ec(n,Zt(o0(e.bundledQuery))),o=Y(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=ut(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let l=s.withResumeToken(lt.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(l.targetId,l),o.Ur.updateTargetData(a,l).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function Hk(n,e){return`firestore_clients_${n}_${e}`}function Gk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function K_(n,e){return`firestore_targets_${n}_${e}`}var Gp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new V(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(at("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},yl=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new V(r.error.code,r.error.message))),s?new n(e,r.state,i):(at("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Wp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=r0();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=hN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(at("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},lI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(at("SharedClientState",`Failed to parse online state: ${e}`),null)}},Pl=class{constructor(){this.activeTargetIds=r0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},vl=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ze(he),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Hk(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Pl),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return b(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(Hk(this.persistenceKey,r));if(i){let s=Wp.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(K_(this.persistenceKey,e));if(i){let s=yl.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(K_(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return j("SharedClientState","READ",e,t),t}setItem(e,t){j("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(j("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void at("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>b(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=Dn.oe;if(s!=null)try{let a=JSON.parse(s);ie(typeof a=="number"),o=a}catch(a){at("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Dn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Gp(this.currentUser,e,t,r),s=Gk(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=Gk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=K_(this.persistenceKey,e),s=new yl(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Wp.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Gp.Rs(new yt(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return yl.Rs(i,t)}Ls(e){return lI.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return b(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=r0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Kp=class{constructor(){this.so=new Pl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Pl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dI=class{_o(e){}shutdown(){}};var Qp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hp=null;function Q_(){return hp===null?hp=function(){return 268435456+Math.round(2147483648*Math.random())}():hp++,"0x"+hp.toString(16)}var k3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var hI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ut="WebChannelConnection",fI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=Q_(),c=this.xo(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(j("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw er("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+cc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=k3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=Q_();return new Promise((o,a)=>{let c=new B_;c.setWithCredentials(!0),c.listenOnce($_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case al.NO_ERROR:let d=c.getResponseJson();j(Ut,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case al.TIMEOUT:j(Ut,`RPC '${e}' ${s} timed out`),a(new V(N.DEADLINE_EXCEEDED,"Request time out"));break;case al.HTTP_ERROR:let f=c.getStatus();if(j(Ut,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let w=function(C){let P=C.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(P)>=0?P:N.UNKNOWN}(m.status);a(new V(w,m.message))}else a(new V(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new V(N.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{j(Ut,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(Ut,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Q_(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=H_(),a=q_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");j(Ut,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,m=!1,w=new hI({Io:C=>{m?j(Ut,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(j(Ut,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),j(Ut,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},To:()=>f.close()}),D=(C,P,O)=>{C.listen(P,F=>{try{O(F)}catch(B){setTimeout(()=>{throw B},0)}})};return D(f,Ra.EventType.OPEN,()=>{m||(j(Ut,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),D(f,Ra.EventType.CLOSE,()=>{m||(m=!0,j(Ut,`RPC '${e}' stream ${i} transport closed`),w.So())}),D(f,Ra.EventType.ERROR,C=>{m||(m=!0,er(Ut,`RPC '${e}' stream ${i} transport errored:`,C),w.So(new V(N.UNAVAILABLE,"The operation could not be completed")))}),D(f,Ra.EventType.MESSAGE,C=>{var P;if(!m){let O=C.data[0];ie(!!O);let F=O,B=F.error||((P=F[0])===null||P===void 0?void 0:P.error);if(B){j(Ut,`RPC '${e}' stream ${i} received error:`,B);let J=B.status,G=function(_){let T=gt[_];if(T!==void 0)return zN(T)}(J),I=B.message;G===void 0&&(G=N.INTERNAL,I="Unknown error status: "+J+" with message "+B.message),m=!0,w.So(new V(G,I)),f.close()}else j(Ut,`RPC '${e}' stream ${i} received:`,O),w.bo(O)}}),D(a,z_.STAT_EVENT,C=>{C.stat===cp.PROXY?j(Ut,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===cp.NOPROXY&&j(Ut,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function y1(){return typeof window<"u"?window:null}function yp(){return typeof document<"u"?document:null}function ql(n){return new AE(n,!0)}var Ol=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Yp=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ol(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(at(t.toString()),at("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pI=class extends Yp{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=m3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?ut(o.readTime):ae.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=RE(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Sp(c)?{documents:ZN(s,c)}:{query:JN(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=HN(s,o.resumeToken);let l=xE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Za(s,o.snapshotVersion.toTimestamp());let l=xE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=v3(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=RE(this.serializer),t.removeTarget=e,this.a_(t)}},gI=class extends Yp{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ie(!!e.streamToken),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=y3(e.writeResults,e.commitTime),r=ut(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=RE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Rl(this.serializer,r))};this.a_(t)}};var mI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,ME(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,ME(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},yI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(at(t),this.D_=!1):j("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var vI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){ds(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let l=Y(c);l.L_.add(4),yield lc(l),l.q_.set("Unknown"),l.L_.delete(4),yield Hl(l)})}(this))}))}),this.q_=new yI(r,i)}};function Hl(n){return b(this,null,function*(){if(ds(n))for(let e of n.B_)yield e(!0)})}function lc(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function yg(n,e){let t=Y(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),d0(t)?l0(t):hc(t).r_()&&u0(t,e))}function nc(n,e){let t=Y(n),r=hc(t);t.N_.delete(e),r.r_()&&v1(t,e),t.N_.size===0&&(r.r_()?r.o_():ds(t)&&t.q_.set("Unknown"))}function u0(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}hc(n).A_(e)}function v1(n,e){n.Q_.xe(e),hc(n).R_(e)}function l0(n){n.Q_=new SE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),hc(n).start(),n.q_.v_()}function d0(n){return ds(n)&&!hc(n).n_()&&n.N_.size>0}function ds(n){return Y(n).L_.size===0}function w1(n){n.Q_=void 0}function N3(n){return b(this,null,function*(){n.q_.set("Online")})}function P3(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{u0(n,e)})})}function O3(n,e){return b(this,null,function*(){w1(n),d0(n)?(n.q_.M_(e),l0(n)):n.q_.set("Unknown")})}function F3(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof Rp&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zp(n,r)}else if(e instanceof qa?n.Q_.Ke(e):e instanceof Mp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ae.min()))try{let r=yield h1(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(lt.EMPTY_BYTE_STRING,d.snapshotVersion)),v1(s,c);let f=new Ja(d.target,c,l,d.sequenceNumber);u0(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield Zp(n,r)}})}function Zp(n,e,t){return b(this,null,function*(){if(!ls(e))throw e;n.L_.add(1),yield lc(n),n.q_.set("Offline"),t||(t=()=>h1(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Hl(n)}))})}function _1(n,e){return e().catch(t=>Zp(n,t,e))}function dc(n){return b(this,null,function*(){let e=Y(n),t=cs(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;V3(e);)try{let i=yield x3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,L3(e,i)}catch(i){yield Zp(e,i)}E1(e)&&I1(e)})}function V3(n){return ds(n)&&n.O_.length<10}function L3(n,e){n.O_.push(e);let t=cs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function E1(n){return ds(n)&&!cs(n).n_()&&n.O_.length>0}function I1(n){cs(n).start()}function j3(n){return b(this,null,function*(){cs(n).p_()})}function U3(n){return b(this,null,function*(){let e=cs(n);for(let t of n.O_)e.m_(t.mutations)})}function B3(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=DE.from(r,e,t);yield _1(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield dc(n)})}function $3(n,e){return b(this,null,function*(){e&&cs(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return $N(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();cs(r).s_(),yield _1(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield dc(r)}})}(n,e)),E1(n)&&I1(n)})}function Wk(n,e){return b(this,null,function*(){let t=Y(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=ds(t);t.L_.add(3),yield lc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Hl(t)})}function wI(n,e){return b(this,null,function*(){let t=Y(n);e?(t.L_.delete(2),yield Hl(t)):e||(t.L_.add(2),yield lc(t),t.q_.set("Unknown"))})}function hc(n){return n.K_||(n.K_=function(t,r,i){let s=Y(t);return s.w_(),new pI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:N3.bind(null,n),Ro:P3.bind(null,n),mo:O3.bind(null,n),d_:F3.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),d0(n)?l0(n):n.q_.set("Unknown")):(yield n.K_.stop(),w1(n))}))),n.K_}function cs(n){return n.U_||(n.U_=function(t,r,i){let s=Y(t);return s.w_(),new gI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:j3.bind(null,n),mo:$3.bind(null,n),f_:U3.bind(null,n),g_:B3.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield dc(n)):(yield n.U_.stop(),n.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var _I=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ct,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function fc(n,e){if(at("AsyncQueue",`${e}: ${n}`),ls(n))return new V(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Jp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=hl(),this.sortedSet=new Ze(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Xp=class{constructor(){this.W_=new Ze(Z.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},rc=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Jp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var EI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},II=class{constructor(){this.queries=Kk(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Y(t),s=i.queries;i.queries=Kk(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new V(N.ABORTED,"Firestore shutting down"))}};function Kk(){return new Ar(n=>AN(n),$l)}function h0(n,e){return b(this,null,function*(){let t=Y(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new EI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=fc(o,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&p0(t)})}function f0(n,e){return b(this,null,function*(){let t=Y(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function z3(n,e){let t=Y(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&p0(t)}function q3(n,e,t){let r=Y(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function p0(n){n.Y_.forEach(e=>{e.next()})}var bI,Qk;(Qk=bI||(bI={})).ea="default",Qk.Cache="cache";var Fl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new rc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=rc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bI.Cache}};var DI=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var eg=class{constructor(e){this.serializer=e}Es(e){return Dr(this.serializer,e)}ds(e){return e.metadata.exists?YN(this.serializer,e.document,!1):vt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return ut(e)}},CI=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=b1(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Se.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new eg(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||pe()).add(s);t.set(o,a)}}return t}complete(){return b(this,null,function*(){let e=yield M3(this.localStore,new eg(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield R3(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function b1(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var tg=class{constructor(e){this.key=e}},ng=class{constructor(e){this.key=e}},rg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=pe(),this.mutatedKeys=pe(),this.Aa=MN(e),this.Ra=new Jp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Xp,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=zl(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),C=!1;g&&m?g.data.isEqual(m.data)?w!==D&&(r.track({type:3,doc:m}),C=!0):this.ga(g,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.Aa(m,c)>0||l&&this.Aa(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),C=!0):g&&!m&&(r.track({type:1,doc:g}),C=!0,(c||l)&&(a=!0)),C&&(m?(o=o.add(m),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(m,w){let D=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return D(m)-D(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new rc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Xp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new ng(r))}),this.da.forEach(r=>{e.has(r)||t.push(new tg(r))}),t}ba(e){this.Ta=e.Ts,this.da=pe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return rc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},TI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},SI=class{constructor(e){this.key=e,this.va=!1}},AI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ar(a=>AN(a),$l),this.Ma=new Map,this.xa=new Set,this.Oa=new Ze(Z.comparator),this.Na=new Map,this.La=new Nl,this.Ba={},this.ka=new Map,this.qa=Xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function H3(n,e,t=!0){return b(this,null,function*(){let r=vg(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield D1(r,e,t,!0),i})}function G3(n,e){return b(this,null,function*(){let t=vg(n);yield D1(t,e,!0,!1)})}function D1(n,e,t,r){return b(this,null,function*(){let i=yield ec(n.localStore,Zt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield g0(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&yg(n.remoteStore,i),a})}function g0(n,e,t,r,i){return b(this,null,function*(){n.Ka=(f,g,m)=>function(D,C,P,O){return b(this,null,function*(){let F=C.view.ma(P);F.ns&&(F=yield Hp(D.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,F)));let B=O&&O.targetChanges.get(C.targetId),J=O&&O.targetMismatches.get(C.targetId)!=null,G=C.view.applyChanges(F,D.isPrimaryClient,B,J);return xI(D,C.targetId,G.wa),G.snapshot})}(n,f,g,m);let s=yield Hp(n.localStore,e,!0),o=new rg(e,s.Ts),a=o.ma(s.documents),c=xl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);xI(n,t,l.wa);let d=new TI(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function W3(n,e,t){return b(this,null,function*(){let r=Y(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!$l(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield tc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nc(r.remoteStore,i.targetId),ic(r,i.targetId)}).catch(us))):(ic(r,i.targetId),yield tc(r.localStore,i.targetId,!0))})}function K3(n,e){return b(this,null,function*(){let t=Y(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nc(t.remoteStore,r.targetId))})}function Q3(n,e,t){return b(this,null,function*(){let r=w0(n);try{let i=yield function(o,a){let c=Y(o),l=nt.now(),d=a.reduce((m,w)=>m.add(w.key),pe()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=hn(),D=pe();return c.cs.getEntries(m,d).next(C=>{w=C,w.forEach((P,O)=>{O.isValidDocument()||(D=D.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,w)).next(C=>{f=C;let P=[];for(let O of a){let F=u3(O,f.get(O.key).overlayedDocument);F!=null&&P.push(new nr(O.key,F,EN(F.value.mapValue),ot.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,P,a)}).next(C=>{g=C;let P=C.applyToLocalDocumentSet(f,D);return c.documentOverlayCache.saveOverlays(m,C.batchId,P)})}).then(()=>({batchId:g.batchId,changes:kN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ze(he)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield ui(r,i.changes),yield dc(r.remoteStore)}catch(i){let s=fc(i,"Failed to persist write");t.reject(s)}})}function C1(n,e){return b(this,null,function*(){let t=Y(n);try{let r=yield A3(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ie(o.va):i.removedDocuments.size>0&&(ie(o.va),o.va=!1))}),yield ui(t,r,e)}catch(r){yield us(r)}})}function Yk(n,e,t){let r=Y(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=Y(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&p0(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Y3(n,e,t){return b(this,null,function*(){let r=Y(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ze(Z.comparator);o=o.insert(s,vt.newNoDocument(s,ae.min()));let a=pe().add(s),c=new Al(ae.min(),new Map,new Ze(he),o,a);yield C1(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),v0(r)}else yield tc(r.localStore,e,!1).then(()=>ic(r,e,t)).catch(us)})}function Z3(n,e){return b(this,null,function*(){let t=Y(n),r=e.batch.batchId;try{let i=yield S3(t.localStore,e);y0(t,r,null),m0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ui(t,i)}catch(i){yield us(i)}})}function J3(n,e,t){return b(this,null,function*(){let r=Y(n);try{let i=yield function(o,a){let c=Y(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(ie(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);y0(r,e,t),m0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ui(r,i)}catch(i){yield us(i)}})}function X3(n,e){return b(this,null,function*(){let t=Y(n);ds(t.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=Y(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=fc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function m0(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function y0(n,e,t){let r=Y(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function ic(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||T1(n,r)})}function T1(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(nc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),v0(n))}function xI(n,e,t){for(let r of t)r instanceof tg?(n.La.addReference(r.key,e),eG(n,r)):r instanceof ng?(j("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||T1(n,r.key)):ne()}function eG(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(j("SyncEngine","New document in limbo: "+t),n.xa.add(r),v0(n))}function v0(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Z(Se.fromString(e)),r=n.qa.next();n.Na.set(r,new SI(t)),n.Oa=n.Oa.insert(t,r),yg(n.remoteStore,new Ja(Zt(uc(t.path)),r,"TargetPurposeLimboResolution",Dn.oe))}}function ui(n,e,t){return b(this,null,function*(){let r=Y(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=aI.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return b(this,null,function*(){let d=Y(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(l,g=>R.forEach(g.$i,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>R.forEach(g.Ui,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!ls(f))throw f;j("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.os.get(g),w=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,D)}}})}(r.localStore,s))})}function tG(n,e){return b(this,null,function*(){let t=Y(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield d1(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new V(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ui(t,r.hs)}})}function nG(n,e){let t=Y(n),r=t.Na.get(e);if(r&&r.va)return pe().add(r.key);{let i=pe(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function rG(n,e){return b(this,null,function*(){let t=Y(n),r=yield Hp(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&xI(t,e.targetId,i.wa),i})}function iG(n,e){return b(this,null,function*(){let t=Y(n);return g1(t.localStore,e).then(r=>ui(t,r))})}function sG(n,e,t,r){return b(this,null,function*(){let i=Y(n),s=yield function(a,c){let l=Y(a),d=Y(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):R.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield dc(i.remoteStore):t==="acknowledged"||t==="rejected"?(y0(i,e,r||null),m0(i,e),function(a,c){Y(Y(a).mutationQueue).On(c)}(i.localStore,e)):ne(),yield ui(i,s)):j("SyncEngine","Cannot apply mutation batch with id: "+e)})}function oG(n,e){return b(this,null,function*(){let t=Y(n);if(vg(t),w0(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Zk(t,r.toArray());t.Qa=!0,yield wI(t.remoteStore,!0);for(let s of i)yg(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(ic(t,o),tc(t.localStore,o,!0))),nc(t.remoteStore,o)}),yield i,yield Zk(t,r),function(o){let a=Y(o);a.Na.forEach((c,l)=>{nc(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ze(Z.comparator)}(t),t.Qa=!1,yield wI(t.remoteStore,!1)}})}function Zk(n,e,t){return b(this,null,function*(){let r=Y(n),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield ec(r.localStore,Zt(c[0]));for(let l of c){let d=r.Fa.get(l),f=yield rG(r,d);f.snapshot&&s.push(f.snapshot)}}else{let l=yield p1(r.localStore,o);a=yield ec(r.localStore,l),yield g0(r,S1(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function S1(n){return SN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function aG(n){return function(t){return Y(Y(t).persistence).Qi()}(Y(n).localStore)}function cG(n,e,t,r){return b(this,null,function*(){let i=Y(n);if(i.Qa)return void j("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield g1(i.localStore,xN(s[0])),a=Al.createSynthesizedRemoteEventForCurrentChange(e,t==="current",lt.EMPTY_BYTE_STRING);yield ui(i,o,a);break}case"rejected":yield tc(i.localStore,e,!0),ic(i,e,r);break;default:ne()}})}function uG(n,e,t){return b(this,null,function*(){let r=vg(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j("SyncEngine","Adding an already active target "+i);continue}let s=yield p1(r.localStore,i),o=yield ec(r.localStore,s);yield g0(r,S1(s),o.targetId,!1,o.resumeToken),yg(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield tc(r.localStore,i,!1).then(()=>{nc(r.remoteStore,i),ic(r,i)}).catch(us))}})}function vg(n){let e=Y(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=C1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y3.bind(null,e),e.Ca.d_=z3.bind(null,e.eventManager),e.Ca.$a=q3.bind(null,e.eventManager),e}function w0(n){let e=Y(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J3.bind(null,e),e}function lG(n,e,t){let r=Y(n);(function(s,o,a){return b(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,w){let D=Y(m),C=ut(w.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",P=>D.Gr.getBundleMetadata(P,w.id)).then(P=>!!P&&P.createTime.compareTo(C)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(b1(c));let l=new CI(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield o.Ua()}let f=yield l.complete();return yield ui(s,f.Ia,void 0),yield function(m,w){let D=Y(m);return D.persistence.runTransaction("Save bundle","readwrite",C=>D.Gr.saveBundleMetadata(C,w))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return er("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var MI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=ql(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return l1(this.persistence,new qp,t.initialUser,this.serializer)}Ga(t){return new $p(zp.Zr,this.serializer)}Wa(t){return new Kp}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var ig=class n extends MI{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){yield lm(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield w0(this.Ja.syncEngine),yield dc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return l1(this.persistence,new qp,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new HE(r,e.asyncQueue,t)}Ha(e,t){let r=new cE(t,this.persistence);return new aE(e.asyncQueue,r)}Ga(e){let t=c0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Ln.withCacheSize(this.cacheSizeBytes):Ln.DEFAULT;return new oI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,y1(),yp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Kp}},RI=class n extends ig{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return b(this,null,function*(){yield lm(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof vl&&(this.sharedClientState.syncEngine={no:sG.bind(null,t),ro:cG.bind(null,t),io:uG.bind(null,t),Qi:aG.bind(null,t),eo:iG.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>b(this,null,function*(){yield oG(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=y1();if(!vl.D(t))throw new V(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=c0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},_0=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Yk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=tG.bind(null,this.syncEngine),yield wI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new II}()}createDatastore(t){let r=ql(t.databaseInfo.databaseId),i=function(o){return new fI(o)}(t.databaseInfo);return function(o,a,c,l){return new mI(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new vI(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Yk(this.syncEngine,r,0),function(){return Qp.D()?new Qp:new dI}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,f){let g=new AI(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=Y(s);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield lc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function Jk(n,e=10240){let t=0;return{read(){return b(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return b(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var sc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):at("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var kI=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Ct,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return b(this,null,function*(){return this.metadata.promise})}Ua(){return b(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return b(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new DI(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return b(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return b(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return b(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var NI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new V(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return b(this,null,function*(){let o=Y(i),a={documents:s.map(f=>Ml(o.serializer,f))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Se.emptyPath(),a,s.length),l=new Map;c.forEach(f=>{let g=g3(o.serializer,f);l.set(g.key.toString(),g)});let d=[];return s.forEach(f=>{let g=l.get(f.toString());ie(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new as(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=Z.fromPath(r);this.mutations.push(new Cl(i,this.precondition(i)))}),yield function(r,i){return b(this,null,function*(){let s=Y(r),o={writes:i.map(a=>Rl(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Se.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ne();t=ae.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new V(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ae.min())?ot.exists(!1):ot.updateTime(t):ot.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ae.min()))throw new V(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ot.updateTime(t)}return ot.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var PI=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Ol(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>b(this,null,function*(){let e=new NI(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ul(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!$N(t)}return!1}};var OI=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=wp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){j("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ct;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=fc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Y_(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield d1(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Xk(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield E0(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Wk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Wk(e.remoteStore,i)),n._onlineComponents=e})}function E0(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Y_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;er("Error using user provided cache. Falling back to memory cache: "+t),yield Y_(n,new MI)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield Y_(n,new MI);return n._offlineComponents})}function wg(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield Xk(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield Xk(n,new _0))),n._onlineComponents})}function A1(n){return E0(n).then(e=>e.persistence)}function I0(n){return E0(n).then(e=>e.localStore)}function x1(n){return wg(n).then(e=>e.remoteStore)}function b0(n){return wg(n).then(e=>e.syncEngine)}function dG(n){return wg(n).then(e=>e.datastore)}function oc(n){return b(this,null,function*(){let e=yield wg(n),t=e.eventManager;return t.onListen=H3.bind(null,e.syncEngine),t.onUnlisten=W3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=G3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=K3.bind(null,e.syncEngine),t})}function hG(n){return n.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield A1(n),t=yield x1(n);return e.setNetworkEnabled(!0),function(i){let s=Y(i);return s.L_.delete(0),Hl(s)}(t)}))}function fG(n){return n.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield A1(n),t=yield x1(n);return e.setNetworkEnabled(!1),function(i){return b(this,null,function*(){let s=Y(i);s.L_.add(0),yield lc(s),s.q_.set("Offline")})}(t)}))}function pG(n,e){let t=new Ct;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s,o){return b(this,null,function*(){try{let a=yield function(l,d){let f=Y(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new V(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=fc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield I0(n),e,t)})),t.promise}function M1(n,e,t={}){let r=new Ct;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,l){let d=new sc({next:g=>{d.Za(),o.enqueueAndForget(()=>f0(s,f));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new V(N.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Fl(uc(a.path),d,{includeMetadataChanges:!0,_a:!0});return h0(s,f)}(yield oc(n),n.asyncQueue,e,t,r)})),r.promise}function gG(n,e){let t=new Ct;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s,o){return b(this,null,function*(){try{let a=yield Hp(i,s,!0),c=new rg(s,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=fc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield I0(n),e,t)})),t.promise}function R1(n,e,t={}){let r=new Ct;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,l){let d=new sc({next:g=>{d.Za(),o.enqueueAndForget(()=>f0(s,f)),g.fromCache&&c.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Fl(a,d,{includeMetadataChanges:!0,_a:!0});return h0(s,f)}(yield oc(n),n.asyncQueue,e,t,r)})),r.promise}function mG(n,e){let t=new sc(e);return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s){Y(i).Y_.add(s),s.next()}(yield oc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s){Y(i).Y_.delete(s)}(yield oc(n),t)}))}}function yG(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?qN().encode(o):o,function(d,f){return new kI(d,f)}(function(d,f){if(d instanceof Uint8Array)return Jk(d,f);if(d instanceof ArrayBuffer)return Jk(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,ql(e));n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){lG(yield b0(n),i,r)}))}function vG(n,e){return n.asyncQueue.enqueue(()=>b(this,null,function*(){return function(r,i){let s=Y(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield I0(n),e)}))}function k1(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eN=new Map;function D0(n,e,t){if(!t)throw new V(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function C0(n,e,t,r){if(e===!0&&r===!0)throw new V(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function tN(n){if(!Z.isDocumentKey(n))throw new V(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function nN(n){if(Z.isDocumentKey(n))throw new V(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function _g(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne()}function Me(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=_g(n);throw new V(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function N1(n,e){if(e<=0)throw new V(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var sg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}C0("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},io=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Z_;switch(r.type){case"firstParty":return new tE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=eN.get(t);r&&(j("ComponentProvider","Removing Datastore"),eN.delete(t),r.terminate())}(this),Promise.resolve()}};function P1(n,e,t,r={}){var i;let s=(n=Me(n,io))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=yt.MOCK_USER;else{a=mD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new yt(l)}n._authCredentials=new J_(new vp(a,c))}}var Nt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},We=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Cr=class n extends Nt{constructor(e,t,r){super(e,t,uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new We(this.firestore,null,new Z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function T0(n,e,...t){if(n=Xe(n),D0("collection","path",e),n instanceof io){let r=Se.fromString(e,...t);return nN(r),new Cr(n,null,r)}{if(!(n instanceof We||n instanceof Cr))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return nN(r),new Cr(n.firestore,null,r)}}function O1(n,e){if(n=Me(n,io),D0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Nt(n,null,function(r){return new tr(Se.emptyPath(),r)}(e))}function Gl(n,e,...t){if(n=Xe(n),arguments.length===1&&(e=wp.newId()),D0("doc","path",e),n instanceof io){let r=Se.fromString(e,...t);return tN(r),new We(n,null,new Z(r))}{if(!(n instanceof We||n instanceof Cr))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return tN(r),new We(n.firestore,n instanceof Cr?n.converter:null,new Z(r))}}function S0(n,e){return n=Xe(n),e=Xe(e),(n instanceof We||n instanceof Cr)&&(e instanceof We||e instanceof Cr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function A0(n,e){return n=Xe(n),e=Xe(e),n instanceof Nt&&e instanceof Nt&&n.firestore===e.firestore&&$l(n._query,e._query)&&n.converter===e.converter}var og=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ol(this,"async_queue_retry"),this.Vu=()=>{let r=yp();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=yp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=yp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Ct;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ls(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw at("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=_I.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function FI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var VI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ct,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var F1=-1,rt=class extends io{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new og,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new og(e),this._firestoreClient=void 0,yield e}})}};function Pt(n){if(n._terminated)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||V1(n),n._firestoreClient}function V1(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new uE(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,k1(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new OI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function L1(n,e){er("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return U1(n,_0.provider,{build:r=>new ig(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function j1(n){return b(this,null,function*(){er("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();U1(n,_0.provider,{build:t=>new RI(t,e.cacheSizeBytes)})})}function U1(n,e,t){if((n=Me(n,rt))._firestoreClient||n._terminated)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new V(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},V1(n)}function B1(n){if(n._initialized&&!n._terminated)throw new V(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ct;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{yield function(r){return b(this,null,function*(){if(!es.D())return Promise.resolve();let i=r+"main";yield es.delete(i)})}(c0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function $1(n){return function(t){let r=new Ct;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return X3(yield b0(t),r)})),r.promise}(Pt(n=Me(n,rt)))}function z1(n){return hG(Pt(n=Me(n,rt)))}function q1(n){return fG(Pt(n=Me(n,rt)))}function H1(n,e){let t=Pt(n=Me(n,rt)),r=new VI;return yG(t,n._databaseId,e,r),r}function G1(n,e){return vG(Pt(n=Me(n,rt)),e).then(t=>t?new Nt(n,null,t.query):null)}var xr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(lt.fromBase64String(e))}catch(t){throw new V(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var rr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ai=class{constructor(e){this._methodName=e}};var so=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}};var Vl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var wG=/^__.*__$/,LI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new nr(e,this.data,this.fieldMask,t,this.fieldTransforms):new os(e,this.data,t,this.fieldTransforms)}},ag=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new nr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function W1(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var cg=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ug(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(W1(this.Cu)&&wG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},jI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ql(e)}Qu(e,t,r,i=!1){return new cg({Cu:e,methodName:t,qu:r,path:ct.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function uo(n){let e=n._freezeSettings(),t=ql(n._databaseId);return new jI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Eg(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);R0("Data must be an object, but it was:",o,r);let a=Y1(r,o),c,l;if(s.merge)c=new Cn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=qI(e,f,t);if(!o.contains(g))throw new V(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);J1(d,g)||d.push(g)}c=new Cn(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new LI(new Bt(a),c,l)}var Ll=class n extends ai{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function K1(n,e,t){return new cg({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var UI=class n extends ai{_toFieldTransform(e){return new to(e.path,new is)}isEqual(e){return e instanceof n}},BI=class n extends ai{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=K1(this,e,!0),r=this.Ku.map(s=>lo(s,t)),i=new si(r);return new to(e.path,i)}isEqual(e){return e instanceof n&&fm(this.Ku,e.Ku)}},$I=class n extends ai{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=K1(this,e,!0),r=this.Ku.map(s=>lo(s,t)),i=new oi(r);return new to(e.path,i)}isEqual(e){return e instanceof n&&fm(this.Ku,e.Ku)}},zI=class n extends ai{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new ss(e.serializer,ON(e.serializer,this.$u));return new to(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function x0(n,e,t,r){let i=n.Qu(1,e,t);R0("Data must be an object, but it was:",i,r);let s=[],o=Bt.empty();co(r,(c,l)=>{let d=k0(e,c,t);l=Xe(l);let f=i.Nu(d);if(l instanceof Ll)s.push(d);else{let g=lo(l,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new Cn(s);return new ag(o,a,i.fieldTransforms)}function M0(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[qI(e,r,t)],c=[i];if(s.length%2!=0)throw new V(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(qI(e,s[g])),c.push(s[g+1]);let l=[],d=Bt.empty();for(let g=a.length-1;g>=0;--g)if(!J1(l,a[g])){let m=a[g],w=c[g];w=Xe(w);let D=o.Nu(m);if(w instanceof Ll)l.push(m);else{let C=lo(w,D);C!=null&&(l.push(m),d.set(m,C))}}let f=new Cn(l);return new ag(d,f,o.fieldTransforms)}function Q1(n,e,t,r=!1){return lo(t,n.Qu(r?4:3,e))}function lo(n,e){if(Z1(n=Xe(n)))return R0("Unsupported field value:",e,n),Y1(n,e);if(n instanceof ai)return function(r,i){if(!W1(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=lo(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return ON(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=nt.fromDate(r);return{timestampValue:Za(i.serializer,s)}}if(r instanceof nt){let s=new nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Za(i.serializer,s)}}if(r instanceof so)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xr)return{bytesValue:HN(i.serializer,r._byteString)};if(r instanceof We){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:s0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return i0(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${_g(r)}`)}(n,e)}function Y1(n,e){let t={};return yN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(n,(r,i)=>{let s=lo(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Z1(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof nt||n instanceof so||n instanceof xr||n instanceof We||n instanceof ai||n instanceof Vl)}function R0(n,e,t){if(!Z1(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=_g(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function qI(n,e,t){if((e=Xe(e))instanceof rr)return e._internalPath;if(typeof e=="string")return k0(n,e);throw ug("Field path arguments must be of type string or ",n,!1,void 0,t)}var _G=new RegExp("[~\\*/\\[\\]]");function k0(n,e,t){if(e.search(_G)>=0)throw ug(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new rr(...e.split("."))._internalPath}catch{throw ug(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ug(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new V(N.INVALID_ARGUMENT,a+n+c)}function J1(n,e){return n.some(t=>t.isEqual(e))}var oo=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new We(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new HI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ig("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},HI=class extends oo{data(){return super.data()}};function Ig(n,e){return typeof e=="string"?k0(n,e):e instanceof rr?e._internalPath:e._delegate._internalPath}function X1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var jl=class{},ao=class extends jl{};function li(n,e,...t){let r=[];e instanceof jl&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof GI).length,a=s.filter(c=>c instanceof lg).length;if(o>1||o>0&&a>0)throw new V(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var lg=class n extends ao{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return uP(e._query,t),new Nt(e.firestore,e.converter,IE(e._query,t))}_parse(e){let t=uo(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new V(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){iN(f,d);let m=[];for(let w of f)m.push(rN(c,s,w));g={arrayValue:{values:m}}}else g=rN(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||iN(f,d),g=Q1(a,o,f,d==="in"||d==="not-in");return be.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function eP(n,e,t){let r=e,i=Ig("where",n);return lg._create(i,r,t)}var GI=class n extends jl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ve.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)uP(o,c),o=IE(o,c)}(e._query,t),new Nt(e.firestore,e.converter,IE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var WI=class n extends ao{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new V(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xs(s,o)}(e._query,this._field,this._direction);return new Nt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new tr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function tP(n,e="asc"){let t=e,r=Ig("orderBy",n);return WI._create(r,t)}var dg=class n extends ao{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Nt(e.firestore,e.converter,xp(e._query,this._limit,this._limitType))}};function nP(n){return N1("limit",n),dg._create("limit",n,"F")}function rP(n){return N1("limitToLast",n),dg._create("limitToLast",n,"L")}var hg=class n extends ao{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=cP(e,this.type,this._docOrFields,this._inclusive);return new Nt(e.firestore,e.converter,function(i,s){return new tr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function iP(...n){return hg._create("startAt",n,!0)}function sP(...n){return hg._create("startAfter",n,!1)}var fg=class n extends ao{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=cP(e,this.type,this._docOrFields,this._inclusive);return new Nt(e.firestore,e.converter,function(i,s){return new tr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function oP(...n){return fg._create("endBefore",n,!1)}function aP(...n){return fg._create("endAt",n,!0)}function cP(n,e,t,r){if(t[0]=Xe(t[0]),t[0]instanceof oo)return function(s,o,a,c,l){if(!c)throw new V(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of za(s))if(f.field.isKeyField())d.push(Js(o,c.key));else{let g=c.data.field(f.field);if(gg(g))throw new V(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new V(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new Sr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=uo(n.firestore);return function(o,a,c,l,d,f){let g=o.explicitOrderBy;if(d.length>g.length)throw new V(N.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let w=0;w<d.length;w++){let D=d[w];if(g[w].field.isKeyField()){if(typeof D!="string")throw new V(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof D}`);if(!n0(o)&&D.indexOf("/")!==-1)throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${D}' contains a slash.`);let C=o.path.child(Se.fromString(D));if(!Z.isDocumentKey(C))throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let P=new Z(C);m.push(Js(a,P))}else{let C=Q1(c,l,D);m.push(C)}}return new Sr(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function rN(n,e,t){if(typeof(t=Xe(t))=="string"){if(t==="")throw new V(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!n0(e)&&t.indexOf("/")!==-1)throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Se.fromString(t));if(!Z.isDocumentKey(r))throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Js(n,new Z(r))}if(t instanceof We)return Js(n,t._key);throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_g(t)}.`)}function iN(n,e){if(!Array.isArray(n)||n.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uP(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ac=class{convertValue(e,t="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return co(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Je(o.doubleValue));return new Vl(s)}convertGeoPoint(e){return new so(Je(e.latitude),Je(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=e0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Il(e));default:return null}}convertTimestamp(e){let t=ii(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Se.fromString(e);ie(n1(r));let i=new ns(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(t)||at(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function bg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var KI=class extends ac{constructor(e){super(),this.firestore=e}convertBytes(e){return new xr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,t)}};var ri=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Un=class extends oo{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ji(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Ig("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ji=class extends Un{data(e={}){return super.data(e)}},ir=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ri(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ji(this._firestore,this._userDataWriter,r.key,r,new ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ji(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ji(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:EG(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function EG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}function N0(n,e){return n instanceof Un&&e instanceof Un?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof ir&&e instanceof ir&&n._firestore===e._firestore&&A0(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function lP(n){n=Me(n,We);let e=Me(n.firestore,rt);return M1(Pt(e),n._key).then(t=>V0(e,n,t))}var ci=class extends ac{constructor(e){super(),this.firestore=e}convertBytes(e){return new xr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new We(this.firestore,null,t)}};function dP(n){n=Me(n,We);let e=Me(n.firestore,rt),t=Pt(e),r=new ci(e);return pG(t,n._key).then(i=>new Un(e,r,n._key,i,new ri(i!==null&&i.hasLocalMutations,!0),n.converter))}function hP(n){n=Me(n,We);let e=Me(n.firestore,rt);return M1(Pt(e),n._key,{source:"server"}).then(t=>V0(e,n,t))}function fP(n){n=Me(n,Nt);let e=Me(n.firestore,rt),t=Pt(e),r=new ci(e);return X1(n._query),R1(t,n._query).then(i=>new ir(e,r,n,i))}function pP(n){n=Me(n,Nt);let e=Me(n.firestore,rt),t=Pt(e),r=new ci(e);return gG(t,n._query).then(i=>new ir(e,r,n,i))}function gP(n){n=Me(n,Nt);let e=Me(n.firestore,rt),t=Pt(e),r=new ci(e);return R1(t,n._query,{source:"server"}).then(i=>new ir(e,r,n,i))}function P0(n,e,t){n=Me(n,We);let r=Me(n.firestore,rt),i=bg(n.converter,e,t);return pc(r,[Eg(uo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ot.none())])}function O0(n,e,t,...r){n=Me(n,We);let i=Me(n.firestore,rt),s=uo(i),o;return o=typeof(e=Xe(e))=="string"||e instanceof rr?M0(s,"updateDoc",n._key,e,t,r):x0(s,"updateDoc",n._key,e),pc(i,[o.toMutation(n._key,ot.exists(!0))])}function mP(n){return pc(Me(n.firestore,rt),[new as(n._key,ot.none())])}function yP(n,e){let t=Me(n.firestore,rt),r=Gl(n),i=bg(n.converter,e);return pc(t,[Eg(uo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ot.exists(!1))]).then(()=>r)}function F0(n,...e){var t,r,i;n=Xe(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||FI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(FI(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof We)l=Me(n.firestore,rt),d=uc(n._key.path),c={next:f=>{e[o]&&e[o](V0(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=Me(n,Nt);l=Me(f.firestore,rt),d=f._query;let g=new ci(l);c={next:m=>{e[o]&&e[o](new ir(l,g,f,m))},error:e[o+1],complete:e[o+2]},X1(n._query)}return function(g,m,w,D){let C=new sc(D),P=new Fl(m,C,w);return g.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return h0(yield oc(g),P)})),()=>{C.Za(),g.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return f0(yield oc(g),P)}))}}(Pt(l),d,a,c)}function vP(n,e){return mG(Pt(n=Me(n,rt)),FI(e)?e:{next:e})}function pc(n,e){return function(r,i){let s=new Ct;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return Q3(yield b0(r),i,s)})),s.promise}(Pt(n),e)}function V0(n,e,t){let r=t.docs.get(e._key),i=new ci(n);return new Un(n,i,e._key,r,new ri(t.hasPendingWrites,t.fromCache),e.converter)}var IG={maxAttempts:5};var pg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=uo(e)}set(e,t,r){this._verifyNotCommitted();let i=Yi(e,this._firestore),s=bg(i.converter,t,r),o=Eg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ot.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=Yi(e,this._firestore),o;return o=typeof(t=Xe(t))=="string"||t instanceof rr?M0(this._dataReader,"WriteBatch.update",s._key,t,r,i):x0(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ot.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Yi(e,this._firestore);return this._mutations=this._mutations.concat(new as(t._key,ot.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Yi(n,e){if((n=Xe(n)).firestore!==e)throw new V(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var QI=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=uo(t)}get(t){let r=Yi(t,this._firestore),i=new KI(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return ne();let o=s[0];if(o.isFoundDocument())return new oo(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new oo(this._firestore,i,r._key,null,r.converter);throw ne()})}set(t,r,i){let s=Yi(t,this._firestore),o=bg(s.converter,r,i),a=Eg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=Yi(t,this._firestore),a;return a=typeof(r=Xe(r))=="string"||r instanceof rr?M0(this._dataReader,"Transaction.update",o._key,r,i,s):x0(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=Yi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Yi(e,this._firestore),r=new ci(this._firestore);return super.get(e).then(i=>new Un(this._firestore,r,t._key,i._document,new ri(!1,!1),t.converter))}};function wP(n,e,t){n=Me(n,rt);let r=Object.assign(Object.assign({},IG),t);return function(s){if(s.maxAttempts<1)throw new V(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new Ct;return s.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){let l=yield dG(s);new PI(s.asyncQueue,l,a,o,c).au()})),c.promise}(Pt(n),i=>e(new QI(n,i)),r)}function _P(){return new Ll("deleteField")}function EP(){return new UI("serverTimestamp")}function IP(...n){return new BI("arrayUnion",n)}function bP(...n){return new $I("arrayRemove",n)}function Dg(n){return new zI("increment",n)}(function(e,t=!0){(function(i){cc=i})(wD),jc(new ys("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new rt(new X_(r.getProvider("auth-internal")),new rE(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ns(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),gi(nk,"4.7.3",e),gi(nk,"4.7.3","esm2017")})();var bG="firebase",DG="10.14.1";gi(bG,DG,"app");var CG=(n,e)=>{let t=e?[e]:_D(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ho=class{constructor(){return CG(TG)}},TG="app-check";function L0(){}var Cg=class{zone;delegate;constructor(e,t=Rm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},j0=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",L0,{},L0,L0)),t.pipe(ht({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Tg=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Cg(Zone.current)),this.insideAngular=t.run(()=>new Cg(Zone.current,Mo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(_e))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function SG(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function fn(n){return AG(SG())(n)}function AG(n){return function(t){return t=t.lift(new j0(n.ngZone)),t.pipe(zn(n.outsideAngular),Tn(n.insideAngular))}}var xG=new Map,MG={activated:!1,tokenObservers:[]},RG={initialized:!1,enabled:!1};function sr(n){return xG.get(n)||Object.assign({},MG)}function xP(){return RG}var kG="https://content-firebaseappcheck.googleapis.com/v1";var NG="exchangeDebugToken",CP={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},tte=24*60*60*1e3;var B0=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new dm,this.pending.promise.catch(t=>{}),yield PG(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new dm,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function PG(n){return new Promise(e=>{setTimeout(e,n)})}var OG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},hs=new vD("appCheck","AppCheck",OG);function MP(n){if(!sr(n).activated)throw hs.create("use-before-activation",{appName:n.name})}function RP(r,i){return b(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw hs.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw hs.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw hs.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw hs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function kP(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${kG}/projects/${t}/apps/${r}:${NG}?key=${i}`,body:{debug_token:e}}}var FG="firebase-app-check-database",VG=1,$0="firebase-app-check-store";var Sg=null;function LG(){return Sg||(Sg=new Promise((n,e)=>{try{let t=indexedDB.open(FG,VG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(hs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore($0,{keyPath:"compositeKey"})}}}catch(t){e(hs.create("storage-open",{originalErrorMessage:t?.message}))}}),Sg)}function jG(n,e){return UG(BG(n),e)}function UG(n,e){return b(this,null,function*(){let r=(yield LG()).transaction($0,"readwrite"),s=r.objectStore($0).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(hs.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function BG(n){return`${n.options.appId}-${n.name}`}var z0=new gd("@firebase/app-check");function U0(n,e){return pd()?jG(n,e).catch(t=>{z0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function NP(){return xP().enabled}function PP(){return b(this,null,function*(){let n=xP();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var $G={error:"UNKNOWN_ERROR"};function zG(n){return gD.encodeString(JSON.stringify(n),!1)}function q0(n,e=!1){return b(this,null,function*(){let t=n.app;MP(t);let r=sr(t),i=r.token,s;if(i&&!Wl(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Wl(c)?i=c:yield U0(t,void 0))}if(!e&&i&&Wl(i))return{token:i.token};let o=!1;if(NP()){r.exchangeTokenPromise||(r.exchangeTokenPromise=RP(kP(t,yield PP()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield U0(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield sr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?z0.warn(c.message):z0.error(c),s=c}let a;return i?s?Wl(i)?a={token:i.token,internalError:s}:a=SP(s):(a={token:i.token},r.token=i,yield U0(t,i)):a=SP(s),o&&WG(t,a),a})}function qG(n){return b(this,null,function*(){let e=n.app;MP(e);let{provider:t}=sr(e);if(NP()){let r=yield PP(),{token:i}=yield RP(kP(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function HG(n,e,t,r){let{app:i}=n,s=sr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Wl(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),TP(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>TP(n))}function OP(n,e){let t=sr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function TP(n){let{app:e}=n,t=sr(e),r=t.tokenRefresher;r||(r=GG(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function GG(n){let{app:e}=n;return new B0(()=>b(this,null,function*(){let t=sr(e),r;if(t.token?r=yield q0(n,!0):r=yield q0(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},CP.RETRIAL_MIN_WAIT,CP.RETRIAL_MAX_WAIT)}function WG(n,e){let t=sr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Wl(n){return n.expireTimeMillis-Date.now()>0}function SP(n){return{token:zG($G),error:n}}var H0=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=sr(this.app);for(let t of e)OP(this.app,t.next);return Promise.resolve()}};function KG(n,e){return new H0(n,e)}function QG(n){return{getToken:e=>q0(n,e),getLimitedUseToken:()=>qG(n),addTokenListener:e=>HG(n,"INTERNAL",e),removeTokenListener:e=>OP(n.app,e)}}var YG="@firebase/app-check",ZG="0.8.8";var JG="app-check",AP="app-check-internal";function XG(){jc(new ys(JG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return KG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(AP).initialize()})),jc(new ys(AP,n=>{let e=n.getProvider("app-check").getImmediate();return QG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),gi(YG,ZG)}XG();var e9=["localhost","0.0.0.0","127.0.0.1"],fte=typeof window<"u"&&e9.includes(window.location.hostname);var t9="firebase",n9="10.14.1";ar.registerVersion(t9,n9,"app-compat");var r9=["ngOnDestroy"],LP=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(r9.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,f),f})})})});var G0=class{constructor(e){return e}},gc=new H("angularfire2.app.options"),Ag=new H("angularfire2.app.name");function xg(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=ar.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>ar.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;i9("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new G0(o)}var i9=(n,...e)=>{Bv()&&typeof console<"u"&&console[n](...e)};function Mg(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return s9(i,o)||(VP("error",`${e} was already initialized on the ${t} Firebase App with different settings.${o9?" You may need to reload as Firebase is not HMR aware.":""}`),VP("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function s9(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var o9=typeof module<"u"&&!!module.hot,VP=(n,...e)=>{Bv()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var W0=new H("angularfire2.auth.use-emulator"),K0=new H("angularfire2.auth.settings"),Q0=new H("angularfire2.auth.tenant-id"),Y0=new H("angularfire2.auth.langugage-code"),Z0=new H("angularfire2.auth.use-device-language"),J0=new H("angularfire.auth.persistence"),X0=(n,e,t,r,i,s,o,a)=>Mg(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]),jP=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,d,f,g,m){let w=new Ne,D=oe(void 0).pipe(Tn(o.outsideAngular),He(()=>s.runOutsideAngular(()=>import("./chunk-GA2XKJLQ.js"))),se(()=>xg(t,s,r)),se(C=>X0(C,s,a,l,d,f,c,g)),Po({bufferSize:1,refCount:!1}));if(Li(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=oe(null);else{D.pipe(gn()).subscribe();let C=D.pipe(He(F=>F.getRedirectResult().then(B=>B,()=>null)),fn,Po({bufferSize:1,refCount:!1})),P=D.pipe(He(F=>new fe(B=>({unsubscribe:s.runOutsideAngular(()=>F.onAuthStateChanged(J=>B.next(J),J=>B.error(J),()=>B.complete()))})))),O=D.pipe(He(F=>new fe(B=>({unsubscribe:s.runOutsideAngular(()=>F.onIdTokenChanged(J=>B.next(J),J=>B.error(J),()=>B.complete()))}))));this.authState=C.pipe(Kd(P),zn(o.outsideAngular),Tn(o.insideAngular)),this.user=C.pipe(Kd(O),zn(o.outsideAngular),Tn(o.insideAngular)),this.idToken=this.user.pipe(He(F=>F?De(F.getIdToken()):oe(null))),this.idTokenResult=this.user.pipe(He(F=>F?De(F.getIdTokenResult()):oe(null))),this.credential=Gc(C,w,this.authState.pipe(_t(F=>!F))).pipe(se(F=>F?.user?F:null),zn(o.outsideAngular),Tn(o.insideAngular))}return LP(this,D,s,{spy:{apply:(C,P,O)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&O.then(F=>w.next(F))}}})}static \u0275fac=function(r){return new(r||n)(L(gc),L(Ag,8),L(Mt),L(_e),L(Tg),L(W0,8),L(K0,8),L(Q0,8),L(Y0,8),L(Z0,8),L(J0,8),L(ho,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var u9="@firebase/firestore-compat",l9="0.3.38";function sb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new V("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function UP(){if(typeof Uint8Array>"u")throw new V("unimplemented","Uint8Arrays are not available in this environment.")}function BP(){if(!vN())throw new V("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Rg=class n{constructor(e){this._delegate=e}static fromBase64String(e){return BP(),new n(xr.fromBase64String(e))}static fromUint8Array(e){return UP(),new n(xr.fromUint8Array(e))}toBase64(){return BP(),this._delegate.toBase64()}toUint8Array(){return UP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function eb(n){return d9(n,["next","error","complete"])}function d9(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var tb=class{enableIndexedDbPersistence(e,t){return L1(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return j1(e._delegate)}clearIndexedDbPersistence(e){return B1(e._delegate)}},kg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ns||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&er("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){P1(this._delegate,e,t,r)}enableNetwork(){return z1(this._delegate)}disableNetwork(){return q1(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,C0("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $1(this._delegate)}onSnapshotsInSync(e){return vP(this._delegate,e)}get app(){if(!this._appCompat)throw new V("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new vc(this,T0(this._delegate,e))}catch(t){throw Jt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Mr(this,Gl(this._delegate,e))}catch(t){throw Jt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new mo(this,O1(this._delegate,e))}catch(t){throw Jt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return wP(this._delegate,t=>e(new Ng(this,t)))}batch(){return Pt(this._delegate),new Pg(new pg(this._delegate,e=>pc(this._delegate,e)))}loadBundle(e){return H1(this._delegate,e)}namedQuery(e){return G1(this._delegate,e).then(t=>t?new mo(this,t):null)}},mc=class extends ac{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rg(new xr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Mr.forKey(t,this.firestore,null)}};function h9(n){sN(n)}var Ng=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new mc(e)}get(e){let t=fo(e);return this._delegate.get(t).then(r=>new po(this._firestore,new Un(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=fo(e);return r?(sb("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=fo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=fo(e);return this._delegate.delete(t),this}},Pg=class{constructor(e){this._delegate=e}set(e,t,r){let i=fo(e);return r?(sb("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=fo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=fo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},yc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ji(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new go(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new mc(e),t),i.set(t,s)),s}};yc.INSTANCES=new WeakMap;var Mr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new V("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new We(t._delegate,r,new Z(e)))}static forKey(e,t,r){return new n(t,new We(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new vc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new vc(this.firestore,T0(this._delegate,e))}catch(t){throw Jt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Xe(e),e instanceof We?S0(this._delegate,e):!1}set(e,t){t=sb("DocumentReference.set",t);try{return t?P0(this._delegate,e,t):P0(this._delegate,e)}catch(r){throw Jt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?O0(this._delegate,e):O0(this._delegate,e,t,...r)}catch(i){throw Jt(i,"updateDoc()","DocumentReference.update()")}}delete(){return mP(this._delegate)}onSnapshot(...e){let t=$P(e),r=zP(e,i=>new po(this.firestore,new Un(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return F0(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=dP(this._delegate):e?.source==="server"?t=hP(this._delegate):t=lP(this._delegate),t.then(r=>new po(this.firestore,new Un(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(yc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Jt(n,e,t){return n.message=n.message.replace(e,t),n}function $P(n){for(let e of n)if(typeof e=="object"&&!eb(e))return e;return{}}function zP(n,e){var t,r;let i;return eb(n[0])?i=n[0]:eb(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var po=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Mr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return N0(this._delegate,e._delegate)}},go=class extends po{data(e){let t=this._delegate.data(e);return this._delegate._converter||oN(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},mo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new mc(e)}where(e,t,r){try{return new n(this.firestore,li(this._delegate,eP(e,t,r)))}catch(i){throw Jt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,li(this._delegate,tP(e,t)))}catch(r){throw Jt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,li(this._delegate,nP(e)))}catch(t){throw Jt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,li(this._delegate,rP(e)))}catch(t){throw Jt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,li(this._delegate,iP(...e)))}catch(t){throw Jt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,li(this._delegate,sP(...e)))}catch(t){throw Jt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,li(this._delegate,oP(...e)))}catch(t){throw Jt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,li(this._delegate,aP(...e)))}catch(t){throw Jt(t,"endAt()","Query.endAt()")}}isEqual(e){return A0(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=pP(this._delegate):e?.source==="server"?t=gP(this._delegate):t=fP(this._delegate),t.then(r=>new Kl(this.firestore,new ir(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=$P(e),r=zP(e,i=>new Kl(this.firestore,new ir(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return F0(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(yc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},nb=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new go(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Kl=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new mo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new go(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nb(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new go(this._firestore,r))})}isEqual(e){return N0(this._delegate,e._delegate)}},vc=class n extends mo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Mr(this.firestore,e):null}doc(e){try{return e===void 0?new Mr(this.firestore,Gl(this._delegate)):new Mr(this.firestore,Gl(this._delegate,e))}catch(t){throw Jt(t,"doc()","CollectionReference.doc()")}}add(e){return yP(this._delegate,e).then(t=>new Mr(this.firestore,t))}isEqual(e){return S0(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(yc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function fo(n){return Me(n,We)}var rb=class n{constructor(...e){this._delegate=new rr(...e)}static documentId(){return new n(ct.keyField().canonicalString())}isEqual(e){return e=Xe(e),e instanceof rr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var ib=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=EP();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=_P();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=IP(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=bP(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Dg(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var f9={Firestore:kg,GeoPoint:so,Timestamp:nt,Blob:Rg,Transaction:Ng,WriteBatch:Pg,DocumentReference:Mr,DocumentSnapshot:po,Query:mo,QueryDocumentSnapshot:go,QuerySnapshot:Kl,CollectionReference:vc,FieldPath:rb,FieldValue:ib,setLogLevel:h9,CACHE_SIZE_UNLIMITED:F1};function p9(n,e){n.INTERNAL.registerComponent(new ys("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},f9)))}function g9(n){p9(n,(e,t)=>new kg(e,t,new tb)),n.registerVersion(u9,l9)}g9(ar);function m9(n,e=Mo){return new fe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function qP(n,e){return m9(n,e)}function y9(n,e){return qP(n,e).pipe(Lr(void 0),Qc(),se(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function cb(n,e){return qP(n,e).pipe(se(t=>({payload:t,type:"query"})))}var Og=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=WP(r,t);return new Vg(i,s,this.afs)}snapshotChanges(){return y9(this.ref,this.afs.schedulers.outsideAngular).pipe(fn)}valueChanges(e={}){return this.snapshotChanges().pipe(se(({payload:t})=>e.idField?te(M({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return De(this.ref.get(e)).pipe(fn)}};function Fg(n,e){return cb(n,e).pipe(Lr(void 0),Qc(),se(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function HP(n,e,t){return Fg(n,t).pipe(Es((r,i)=>v9(r,i.map(s=>s.payload),e),[]),Kc(),se(r=>r.map(i=>({type:i.type,payload:i}))))}function v9(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=w9(n,r))}),n}function ob(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function w9(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return ob(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return ob(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ob(n,e.oldIndex,1);break}return n}function GP(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Vg=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Fg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(se(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Lr(void 0),Qc(),_t(([r,i])=>i.length>0||!r),se(([,r])=>r),fn)}auditTrail(e){return this.stateChanges(e).pipe(Es((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=GP(e);return HP(this.query,t,this.afs.schedulers.outsideAngular).pipe(fn)}valueChanges(e={}){return cb(this.query,this.afs.schedulers.outsideAngular).pipe(se(t=>t.payload.docs.map(r=>e.idField?te(M({},r.data()),{[e.idField]:r.id}):r.data())),fn)}get(e){return De(this.query.get(e)).pipe(fn)}add(e){return this.ref.add(e)}doc(e){return new Og(this.ref.doc(e),this.afs)}},ab=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Fg(this.query,this.afs.schedulers.outsideAngular).pipe(fn):Fg(this.query,this.afs.schedulers.outsideAngular).pipe(se(t=>t.filter(r=>e.indexOf(r.type)>-1)),_t(t=>t.length>0),fn)}auditTrail(e){return this.stateChanges(e).pipe(Es((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=GP(e);return HP(this.query,t,this.afs.schedulers.outsideAngular).pipe(fn)}valueChanges(e={}){return cb(this.query,this.afs.schedulers.outsideAngular).pipe(se(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),fn)}get(e){return De(this.query.get(e)).pipe(fn)}},_9=new H("angularfire2.enableFirestorePersistence"),E9=new H("angularfire2.firestore.persistenceSettings"),I9=new H("angularfire2.firestore.settings"),b9=new H("angularfire2.firestore.use-emulator");function WP(n,e=t=>t){return{query:e(n),ref:n}}var KP=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,d,f,g,m,w,D,C,P,O){this.schedulers=c;let F=xg(t,a,r),B=d;f&&X0(F,a,g,w,D,C,m,P),[this.firestore,this.persistenceEnabled$]=Mg(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let J=a.runOutsideAngular(()=>F.firestore());if(s&&J.settings(s),B&&J.useEmulator(...B),i&&!Li(o)){let G=()=>{try{return De(J.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),oe(!1)}};return[J,a.runOutsideAngular(G)]}else return[J,oe(!1)]},[s,B,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=WP(i,r),a=this.schedulers.ngZone.run(()=>s);return new Vg(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new ab(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Og(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(gc),L(Ag,8),L(_9,8),L(I9,8),L(Mt),L(_e),L(Tg),L(E9,8),L(b9,8),L(jP,8),L(W0,8),L(K0,8),L(Q0,8),L(Y0,8),L(Z0,8),L(J0,8),L(ho,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var QP=(()=>{let e=class e{constructor(r){this.store=r,this.TABLE_NAME="user_speech",this.uuid=j_()}setRecordUid(r){r&&(this.uuid=r)}getRecordUid(){return this.uuid}getRecord(r){return this.store.collection(this.TABLE_NAME).doc(r).valueChanges()}incrementHits(r="Navi"){return b(this,null,function*(){this.store.doc(`${r}/config`).set({numberOfHits:Dg(1)},{merge:!0}).catch(i=>console.error("Error incrementing hit counter : ",i))})}saveAppScore(r,i="Navi"){return b(this,null,function*(){r.updated_at=new Date,this.store.doc(`${i}/config`).set(r,{merge:!0}).catch(s=>(console.error("Error upserting : ",s),s))})}getAppdata(r="Navi"){return this.store.doc(`${r}/config`).valueChanges()}saveSpeech(r){return b(this,null,function*(){return r.id=this.uuid,r.updated_at=new Date,this.store.collection(this.TABLE_NAME).doc(this.uuid).set(r,{merge:!0}).then(()=>this.uuid).catch(i=>(console.error("Error upserting : ",i),i.status)),this.uuid})}};e.\u0275fac=function(i){return new(i||e)(L(KP))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var T9=(n,e)=>({"btn-success pulse-animation":n,"btn-danger":e});function S9(n,e){if(n&1){let t=ra();$(0,"p"),Q(1,"Try saying \u{1F5E3}\uFE0F "),$(2,"span",18),Q(3),z(),Q(4," or "),$(5,"span",14),Q(6),z(),Q(7,". Say "),$(8,"span",18),Q(9),z(),Q(10," to clean the board. "),$(11,"button",19),bt("click",function(){Mi(t);let i=Le();return Ri(i.toggleListening())}),Ie(12,"i",20),z(),Q(13,"\xA0 "),$(14,"a",21),bt("click",function(){Mi(t);let i=Le();return Ri(i.copyVoiceSmithLink())}),$(15,"i",22),bt("click",function(){Mi(t);let i=Le();return Ri(i.copyVoiceSmithLink())}),z(),Q(16,"\xA0 "),$(17,"span",23),Q(18),z()(),Q(19,"\xA0 "),$(20,"a",24),Ie(21,"i",25),z(),$(22,"span",26),Q(23,"Desktop-only / "),$(24,"span",27),Q(25,"Mobile-limited"),z()()()}if(n&2){let t=Le();q(3),Ge(t.START_COMMAND),q(3),Ge(t.STOP_COMMAND),q(3),Ge(t.CLEAR_COMMAND),q(2),ce("ngClass",af(7,T9,t.listening,!t.listening)),q(),ce("ngClass",t.listening?"fa-microphone":"fa-microphone-slash"),q(3),ce("ngClass",t.copied?"fa-solid":"fa-regular"),q(3),Ge(t.getRecordUid())}}function A9(n,e){n&1&&($(0,"span",29),Q(1,"Listening"),z())}function x9(n,e){n&1&&($(0,"span",29),Q(1,"Stopped"),z())}function M9(n,e){if(n&1&&($(0,"p"),Q(1,"Transcript will appear in the space below as your host speaks. "),Ye(2,A9,2,0,"span",28)(3,x9,2,0,"span",28),z()),n&2){let t=Le();q(2),ce("ngIf",t.listening),q(),ce("ngIf",!t.listening)}}function R9(n,e){if(n&1&&($(0,"span",30),Q(1),$(2,"span",13),Q(3),z()()),n&2){let t=e.$implicit,r=Le();ce("ngClass",r.isLeader(t.key)?"badge badge-border-success":"badge badge-border-danger"),q(),un("",t.key,"\xA0"),q(2),Ge(t.value)}}var Lg=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.zone=r,this.witaiService=i,this.messaging=s,this.database=o,this.route=a,this.router=c,this.START_COMMAND="start listening",this.STOP_COMMAND="stop listening",this.CLEAR_COMMAND="clear",this.MAX_SPEECH_TIME=5,this.test_command="start listening",this.fillerWords=["oh","ok","okay","um","uh","it's like","like","you know","basically","actually","so","right","I mean","well","just","er","anyway","now","let me think","haha","bla","really","and","well"],this.probableFillers=["fine","good","awesome"],this.unwantedVerbs=["am","is","are","were","do","did","done","doing","go","going","worked","work","working"],this.listening=!1,this.speaking=!1,this.fullTranscript=`Hi there! \u{1F44B} I am nA'vI
I would love to hear your story.
\u{1F3A4} Tell me something about yourself ..

Say "${this.START_COMMAND}" to begin \u{1F680}`,this.interimTranscript="",this.currentTerm="",this.verbsMap=new Map,this.leaderwordsMap=new Map,this.fillerWordsMap=new Map,this.goodbadwordsMap=new Map,this.sentenseClarity={good:0,bad:0},this.previousTime=0,this.totalWords=0,this.prevSentense="",this.isMobile=!1,this.minutes=this.MAX_SPEECH_TIME,this.seconds=0,this.speechTime="",this.voiceMode=!1,this.copied=!1,this.totalScore=0,this.appData={numberOfHits:0,highestScore:0},this.leadershipWords=["lead","vision","empower","collaborate","adapt","communicate","integrate","mentore","mentor","account","innovate","innovation","resilient","resilience","delegate","resolve","include","strategic","motivate","empower","encourage","impact","growth","deliver","delivering","collaboration"],this.createTimer=()=>{this.timerInterval=setInterval(()=>{this.updateTime()},1e3),this.speechTime=""},this.updateTime=()=>{this.seconds>0?this.seconds--:this.minutes>0?(this.minutes--,this.seconds=59):(console.debug("Time's up!"),this.stopListening()),this.speechTime=`${this.minutes}m ${this.seconds}s`},this.clearTimer=()=>{this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.minutes=this.MAX_SPEECH_TIME,this.seconds=0},this.myTask=()=>{let d=performance.now(),f=d-this.previousTime;f!=d&&f>5,requestAnimationFrame(this.myTask)},this.isMobile=Oe.isMobileBrowser();let l=Oe.getQueryParam(a,"vid");o.setRecordUid(l),this.initCompromiseNLP(),l?(this.voiceMode=!1,this.fullTranscript="",this.database.getRecord(l).subscribe(d=>{if(d){let f=d.message;this.updateFullText(f)}})):(this.voiceMode=!0,this.initAnnyang())}setStartCommand(r){this.START_COMMAND=r}setStopCommand(r){this.STOP_COMMAND=r}setClearCommand(r){this.CLEAR_COMMAND=r}getRecordUid(){return this.database.getRecordUid().split("-")[0]}getVoiceSmithLink(){return`${de.host}/voicesmith?vid=${this.database.getRecordUid()}`}copyVoiceSmithLink(){return b(this,null,function*(){try{yield navigator.clipboard.writeText(this.getVoiceSmithLink()),this.copied=!0}catch{console.error("Failed to copy the link")}})}isLeader(r){return this.leaderwordsMap.get(r)!=null}analyseClarity(r){return b(this,null,function*(){if(r){let i=r.trim().split(" ").length;i>=5&&i<=20?(this.sentenseClarity.good++,this.totalScore++):this.sentenseClarity.bad++,this.totalWords+=i}})}analyseVerbs(r){return b(this,null,function*(){let i=r.match("#Verb").out("array");return i.forEach(s=>{let o=s.toLowerCase();this.unwantedVerbs.includes(o)||(this.verbsMap.has(o)?this.verbsMap.set(o,this.verbsMap.get(o)+1):this.verbsMap.set(o,1),this.totalScore++)}),i.length})}analyseFillers(r){return b(this,null,function*(){let i=r.lookup(this.fillerWords).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.fillerWordsMap.has(o)?this.fillerWordsMap.set(o,this.fillerWordsMap.get(o)+1):this.fillerWordsMap.set(o,1),this.totalScore=this.totalScore-2,this.goodbadwordsMap.set(o,this.fillerWordsMap.get(o))}),i.length>0})}analyseLeaedershipQualities(r){return b(this,null,function*(){let i=r.compute("root").lookup(this.leadershipWords,{form:"root"}).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.leaderwordsMap.has(o)?this.leaderwordsMap.set(o,this.leaderwordsMap.get(o)+1):this.leaderwordsMap.set(o,1),this.totalScore=this.totalScore+3,this.goodbadwordsMap.set(o,this.leaderwordsMap.get(o))}),i.length})}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"SpeechToText":this.analyseClarity(i.payload);let s=this.nlp(i.payload);this.analyseFillers(s),this.analyseVerbs(s),this.analyseLeaedershipQualities(s),this.voiceMode&&(this.witaiService.getIntent(i.payload).then(o=>{}),this.database.saveSpeech({message:i.payload}));break;default:break}}),this.database.getAppdata().subscribe(r=>{this.appData=r})}initCompromiseNLP(){this.loadExternalScript("https://unpkg.com/compromise").then(()=>{this.nlp=window.nlp,this.nlp&&this.nlp.compile(this.leadershipWords)})}initAnnyang(){this.loadExternalScript("assets/annyang.js").then(()=>{this.initializeSpeechRecognition()})}stopListening(){this.listening&&this.voiceMode&&this.database.saveSpeech({message:this.STOP_COMMAND}),this.listening=!1,this.interimTranscript="",this.clearTimer(),this.totalScore>this.appData.highestScore&&this.database.saveAppScore({highestScore:this.totalScore})}startListening(){this.listening||this.database.incrementHits(),this.fullTranscript="",this.listening=!0,this.clearMaps(),this.createTimer(),this.totalScore=0}clearCommand(){this.fullTranscript="",this.interimTranscript="",this.clearMaps(),this.totalScore=0}toggleListening(){this.listening=!this.listening,this.listening?this.startListening():this.stopListening()}clearMaps(){this.leaderwordsMap.clear(),this.verbsMap.clear(),this.fillerWordsMap.clear(),this.goodbadwordsMap.clear(),this.previousTime=0,this.totalWords=0,this.sentenseClarity={good:0,bad:0},this.timerInterval&&(clearInterval(this.timerInterval),this.speechTime="")}initializeSpeechRecognition(){if(this.annyang=window.annyang,this.annyang){let r={"Stop listening":()=>{this.zone.run(()=>{this.stopListening()})},"Start listening":()=>{this.zone.run(()=>{this.startListening()})},Clear:()=>{this.zone.run(()=>{this.clearCommand()})}};this.annyang.addCallback("result",(i,s,o)=>{if(this.listening){let a=this.previousTime?o-this.previousTime>=300:!1;this.previousTime=o,this.zone.run(()=>{if(this.interimTranscript="",s&&i[0]){if(this.isMobile){let l=i[0].trim();if(this.prevSentense==l)return;this.prevSentense=l}let c=i[0]+(a?". ":" ");this.updateFullText(c)}else this.interimTranscript+=i})}}),this.annyang.addCallback("soundstart",()=>{console.debug("sound detected"),this.zone.run(()=>{this.speaking=!0})}),this.annyang.addCommands(r),this.recognition=this.annyang.getSpeechRecognizer(),this.recognition?(this.recognition.interimResults=!this.isMobile,this.annyang.start({autoRestart:!0,continuous:!0}),console.debug("Speech recognition started")):console.error("Voice is not supported in this browser.")}else console.error("Voice is not supported in this browser.")}loadExternalScript(r){return new Promise((i,s)=>{let o=document.createElement("script");o.src=r,o.type="application/javascript",o.onload=()=>{i()},o.onerror=()=>{s("Script load error")},document.body.appendChild(o)})}updateFullText(r){this.voiceMode?r.includes(this.START_COMMAND)||(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r):r.includes(this.CLEAR_COMMAND)?this.clearCommand():r.includes(this.STOP_COMMAND)?this.stopListening():(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r,this.listening=!0)}};e.\u0275fac=function(i){return new(i||e)(ee(_e),ee(JR),ee(wr),ee(QP),ee(ln),ee(bn))},e.\u0275cmp=Pe({type:e,selectors:[["app-voice-smith"]],decls:45,vars:16,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-8"],[4,"ngIf"],["id","voice-output"],[1,"float-end"],[1,"fa-regular","fa-clock"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"small"],[1,"badge","badge-border-info"],[1,"badge","text-bg-light"],[1,"badge","badge-border-danger"],[1,"badge","badge-border-primary"],[1,"card-text"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","badge-border-success"],[1,"btn","rounded-circle","justify-content-center","align-items-center",3,"click","ngClass"],[1,"fas",3,"ngClass"],["target","_blank",1,"text-decoration-none",3,"click"],[1,"fa-clipboard",3,"click","ngClass"],[1,"badge","rounded-pill","text-bg-primary"],["href","https://www.merriam-webster.com/word-of-the-day","target","_blank",1,""],[1,"fa-solid","fa-lightbulb",2,"color","#efbc06"],[1,"d-sm-none","badge","badge-border-success"],[1,"text-strike-black"],["class","badge text-bg-primary",4,"ngIf"],[1,"badge","text-bg-primary"],[3,"ngClass"]],template:function(i,s){i&1&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1),Ye(4,S9,26,10,"p",3)(5,M9,4,2,"p",3),z(),$(6,"div",4),Q(7),$(8,"em"),Q(9),z()(),$(10,"div",5),Q(11),$(12,"span"),Q(13),z(),Q(14,"\xA0"),Ie(15,"i",6),Q(16,"\xA0"),$(17,"span"),Q(18),z()()(),$(19,"div",7)(20,"div",8)(21,"div",9)(22,"h5",10),Q(23,"Strength Board : "),$(24,"span",11),Q(25),z()(),$(26,"p")(27,"span",12),Q(28,"Actions\xA0"),$(29,"span",13),Q(30),z()(),Q(31," | "),$(32,"span",14),Q(33,"Fillers\xA0"),$(34,"span",13),Q(35),z()(),Q(36," | "),$(37,"span",15),Q(38,"Clarity\xA0"),$(39,"span",13),Q(40),z()()(),Ie(41,"hr"),$(42,"div",16),Ye(43,R9,4,3,"span",17),Rt(44,"keyvalue"),z()()()()()()),i&2&&(q(4),ce("ngIf",s.voiceMode),q(),ce("ngIf",!s.voiceMode),q(2),un("",s.fullTranscript," "),q(2),Ge(s.interimTranscript),q(2),of("Highest : ",s.appData.highestScore," | Tried : ",s.appData.numberOfHits," | "),q(2),un("Words : ",s.totalWords,""),q(5),Ge(s.speechTime),q(7),Ge(s.totalScore),q(5),Ge(s.verbsMap.size),q(5),Ge(s.fillerWordsMap.size),q(5),of("",s.sentenseClarity.good,"/",s.sentenseClarity.bad,""),q(3),ce("ngForOf",wn(44,14,s.goodbadwordsMap)))},dependencies:[aa,Nn,yr,Fi],styles:["#voice-output[_ngcontent-%COMP%]{font-size:1.4em;line-height:1.6;border:1px solid #ccc;padding:20px;min-height:200px;background-color:#f9f9f9;margin-top:10px;white-space:pre-wrap}.typing-cursor[_ngcontent-%COMP%]{border-right:2px solid black;animation:_ngcontent-%COMP%_blink 1s steps(1) infinite}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #007bffb3}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 0 #007bffb3}50%{transform:scale(1.1);box-shadow:0 0 10px #00ff7bb3}to{transform:scale(1);box-shadow:0 0 #007bffb3}}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}.badge-border-primary[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-primary);color:var(--bs-primary)!important}.badge-border-danger[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-danger);color:var(--bs-danger)!important}.badge-border-info[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-info);color:var(--bs-info)!important}.text-strike-black[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#000}"]});let n=e;return n})();var ub=(()=>{let e=class e extends Vn{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=o,this.homePageContent="Loading..",this.imgLayout="LayoutMix",this.firstHeading=!1,this.firstPara=!1,this.loadNewWidget=!1,this.routerFileUrl&&this.githubService.getMdFileContent(this.basePath,this.routerFileUrl).then(a=>this.homePageContent=a).catch(a=>this.homePageContent=a),this.messaging.event$.subscribe(a=>{switch(a.cmd){case"ContextInit":this.titleService.setTitle(X.ghUser.name),X.YOUR_READ_ME?this.homePageContent=X.YOUR_READ_ME:this.githubService.getInstalledAccessToken()?this.githubService.getInstalledContent(X.ghUserLoaded).then(l=>{this.homePageContent=l}):this.githubService.getReadMeContent(X.ghUserLoaded).then(l=>{this.homePageContent=l}).catch(l=>{console.log(X.ghUserLoaded+" not available")});break;case"Directory":break;default:break}})}ngAfterViewInit(){}ngOnInit(){this.titleService.setTitle("John Doe"),this.markdownService.renderer.html=r=>(Oe.getFirstLine(r).includes("Widget")&&(this.loadNewWidget=!0),this.imgLayout=="<!-- Theme:Classic, ImgAlign:Left Widget:NAVI-->"||this.imgLayout,r),this.markdownService.renderer.heading=(r,i,s)=>i==1&&!this.firstHeading?(this.firstHeading=!0,`<h1 class="first-heading">${s}</h1>`):tt.prototype.heading.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.paragraph=r=>r.startsWith("<a")&&r.endsWith("</a>")?r:this.firstHeading&&!this.firstPara?(this.firstPara=!0,`<p class="first-para">${r}<p>`):`<p>${r}<p>`,this.markdownService.renderer.link=(r,i,s)=>tt.prototype.link.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.image=(r,i,s)=>`<img src="${r}" class="img-fluid mx-auto d-block" alt="${s}">`}onMarkdownReady(){if(this.applyLastHeadingStyle(),this.loadNewWidget){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(Lg);r.appendChild(i.location.nativeElement)}}}applyLastHeadingStyle(){let r=document.querySelectorAll("h1");if(r.length>1){let i=r[r.length-1];i.classList.add("cta");let s=i.nextElementSibling;for(;s;)s.classList.add("cta"),s=s.nextElementSibling}}fetchUserContent(r,i){i?this.githubService.getMdFileContent(r,i).then(s=>this.homePageContent=s).catch(s=>this.homePageContent=s):(this.initialiseHomeUserContext(r),X.YOUR_READ_ME?this.homePageContent=X.YOUR_READ_ME:this.githubService.getInstalledAccessToken()?this.githubService.getInstalledContent(r).then(s=>{this.homePageContent=s}):this.githubService.getReadMeContent(r).then(s=>{this.homePageContent=s}).catch(s=>{console.log(r+" not available")}))}initialiseHomeUserContext(r){this.githubService.get("users/"+r).then(i=>{X.ghUser=JSON.parse(i),X.userContext.username=r,this.titleService.setTitle(X.ghUser.name),this.githubService.getGhDirectoryContents(r).then(s=>{X.userContext.directory=s,X.ghUserLoaded=r,this.messaging.send({cmd:"page",file:"GHUser"})})})}};e.\u0275fac=function(i){return new(i||e)(ee(On),ee(dn),ee(Pn),ee(kn))},e.\u0275cmp=Pe({type:e,selectors:[["app-ghhome"]],features:[cn],decls:5,vars:1,consts:[["mdContent",""],[1,"container"],[1,"row","justify-content-center"],[1,"container",3,"ready","data"]],template:function(i,s){if(i&1){let o=ra();$(0,"div",1)(1,"div",2,0)(3,"markdown",3),bt("ready",function(){return Mi(o),Ri(s.onMarkdownReady())}),Q(4,`
        `),z()()()}i&2&&(q(3),ce("data",s.homePageContent))},dependencies:[vr],styles:[".badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}"]});let n=e;return n})();function k9(n,e){if(n&1&&($(0,"div",6)(1,"div",7)(2,"a",8),Ie(3,"img",9),z(),$(4,"div",10)(5,"a",11)(6,"h5",12),Q(7),z()()()()()),n&2){let t=e.$implicit,r=Le();q(2),ce("href",r.galaryLinks.get(t.key),It),q(),mr("alt",t.key),ce("src",t.value,It),q(2),ce("href",r.galaryLinks.get(t.key),It),q(2),Ge(t.key)}}var YP=(()=>{let e=class e extends Vn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.markdownContent="Loading..",this.galaryLinks=new Map,this.galaryImgs=new Map,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"ContextInit":this.titleService.setTitle(X.ghUser.name),this.githubService.getReadMeContent(this.routerFileUrl).then(c=>this.markdownContent=c);break;default:break}})}ngOnInit(){this.markdownService.renderer.link=(r,i,s)=>(this.galaryLinks.set(s,r),tt.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.image=(r,i,s)=>(this.galaryImgs.set(s,r),s)}onMarkdownReady(){}};e.\u0275fac=function(i){return new(i||e)(ee(On),ee(dn),ee(Pn))},e.\u0275cmp=Pe({type:e,selectors:[["app-crazy-coupons"]],features:[cn],decls:8,vars:4,consts:[[1,"container","mt-5"],[1,"row"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"container"],[1,"row","justify-content-center"],[3,"ready","data"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],["target","_blank","rel","noopener noreferrer",1,"text-decoration-none",3,"href"],[1,"card-title"]],template:function(i,s){i&1&&($(0,"div",0)(1,"div",1),Ye(2,k9,8,5,"div",2),Rt(3,"keyvalue"),z()(),$(4,"div",3)(5,"div",4)(6,"markdown",5),bt("ready",function(){return s.onMarkdownReady()}),Q(7,`
        `),z()()()),i&2&&(q(2),ce("ngForOf",wn(3,2,s.galaryImgs)),q(4),ce("data",s.markdownContent))},dependencies:[Nn,vr,Fi],styles:['@import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css";.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#333;margin-top:4px;text-align:left;line-height:1.2}.card-body[_ngcontent-%COMP%]{padding:8px}.card[_ngcontent-%COMP%]{border:none}']});let n=e;return n})();var ZP=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.el=i}ngOnInit(){let r=this.renderer.createElement("script");r.src="https://giscus.app/client.js",r.type="text/javascript",r.setAttribute("data-repo","publichomepage/discuss"),r.setAttribute("data-repo-id","R_kgDONHZY8A"),r.setAttribute("data-category","Announcements"),r.setAttribute("data-category-id","DIC_kwDONHZY8M4CjyZp"),r.setAttribute("data-reactions-enabled","1"),r.setAttribute("data-emit-metadata","0"),r.setAttribute("data-input-position","top"),r.setAttribute("data-theme","preferred_color_schemelight"),r.setAttribute("data-lang","en"),r.setAttribute("data-loading","lazy"),r.setAttribute("crossorigin","anonymous"),r.crossOrigin="anonymous",r.async=!0;let i=this.el.nativeElement.querySelector("#discuss-pane");this.renderer.appendChild(i,r)}};e.\u0275fac=function(i){return new(i||e)(ee(Os),ee(gr))},e.\u0275cmp=Pe({type:e,selectors:[["app-giscus-widget"]],decls:1,vars:0,consts:[["id","discuss-pane"]],template:function(i,s){i&1&&Ie(0,"div",0)}});let n=e;return n})();var Ql=(()=>{let e=class e{};e.NEW_USER_CHANNEL="https://discord.com/api/webhooks/1161881028474966077/1NlJyAYOMZbQTZmbVL_WAEm4S_whyKQ275RsOf3PHYqF7naHYmx9z9lFNW2kqzlLr0I-",e.WEB_ERROR_CHANNEL="https://discord.com/api/webhooks/1161880477750272000/I-DJecqOhonKLsy75jP6iVeGxpqxMuu8WZ8wgBd31o4rZzF49vXnjKo9Tv0p5S6HTm7j",e.PUBLISHING_HELP_CHANNEL="https://discord.com/api/webhooks/1161873930991190078/FHGUfffC-VfjGOrLv9OU0EAkmeqM0-3o6phOYtg3cGkjG1E57_CPSAhQ0_pJO6AYNLC7",e.INTERVIEW_ASSISTANCE_CHANNEL="https://discord.com/api/webhooks/1177388543023272059/Tqt3tk3Bm3tvd6aZksnQ9-crhr8qWTby6HEWguT3nb5DG-10Y7zV3vh84D7utAdTvL17",e.DEFAULT_PAGE_COUNT=777,e.DEFAULT_PAGE_LIKES=17,e.MAX_SIDE_PANEL_VIDEO_LINKS=5,e.MAX_QUESTION_TIMEOUT=2500,e.JUDGE_0_SUBMISSION_URL="https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=true&fields=*",e.DRAFT_HEADER="<!-- Draft -->",e.DRAFT_PAGE_LINK="/faqs/draft_content",e.CODING_QUESTIONS_CONTENT_HEADER="<!-- question -->",e.CODING_SOLUTIONS_CONTENT_HEADER="<!-- correct_solution -->",e.CODING_ONE_TEST_CASE_CONTENT_HEADER="<!-- runOneTestCaseHandler -->",e.CODING_ALL_TESTS_CONTENT_HEADER="<!-- runAllTestCases -->",e.SELECTIFY_ANSWER_CONTENT_HEADER="<!-- Answer[ ]?=(.*)-->",e.ASSESSMENT_FOLDER_HEADER="<!-- Assessment Folder : (?<name>\\S+) -->",e.ASSESSMENT_KNOWLEDGE_CHECK_HEADER=/<!-- Knowledge Check | (\w+) | (\S+) | (\w+) -->/g,e.ASSESSMENT_QUESTIONS_FILE_NAME_SYNTAX="(?<qId>\\d+)-(?<qName>\\S+).md",e.SELECT_OPTIONS_HEADER="<!-- Select options -->";let n=e;return n})();var JP=(()=>{let e=class e{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustResourceUrl(r)}};e.\u0275fac=function(i){return new(i||e)(ee(Tu,16))},e.\u0275pipe=Ns({name:"safe",type:e,pure:!0});let n=e;return n})();var O9=(n,e)=>({"fa-play":n,"fa-pause":e});function F9(n,e){if(n&1&&($(0,"li")(1,"a",21),Q(2),z()()),n&2){let t=e.$implicit,r=Le(2);q(),rf("href","/i/",t,"",It),q(),Ge(r.getFileName(t))}}function V9(n,e){if(n&1&&($(0,"div",14)(1,"div",15),Q(2),$(3,"a",16),Ie(4,"i",17),z()(),$(5,"div",18)(6,"div",19)(7,"div",8)(8,"ul",20),Ye(9,F9,3,3,"li",10),z()()()()()),n&2){let t=Le();q(2),un("",t.folderName," "),q(7),ce("ngForOf",t.filesAvailable)}}function L9(n,e){if(n&1&&($(0,"div",22)(1,"div",23)(2,"p"),Q(3,"Try these challenge questions and get better on this topic."),z(),$(4,"a",24),Ie(5,"i",25),Q(6,"\xA0Knowledge Check"),z()()()),n&2){let t=Le();q(4),mr("href",t.assementLink,It)}}function j9(n,e){n&1&&($(0,"div")(1,"b"),Q(2,"Practice questions"),z()())}function U9(n,e){if(n&1&&($(0,"li")(1,"a",26),Q(2),z()()),n&2){let t=e.$implicit;q(),mr("href",t,It),q(),Ge(t.split("problems")[1])}}function B9(n,e){n&1&&($(0,"div",27)(1,"b"),Q(2,"Video reference"),z()())}function $9(n,e){if(n&1&&($(0,"div",28),Ie(1,"iframe",29),Rt(2,"safe"),z()),n&2){let t=e.$implicit;q(),ce("src",wn(2,1,t),ES)}}function z9(n,e){if(n&1){let t=ra();$(0,"a",30),bt("click",function(){Mi(t);let i=Le();return Ri(i.speakText())}),Ie(1,"i",31),z()}if(n&2){let t=Le();q(),ce("ngClass",af(1,O9,!t.isPaused,t.isPaused))}}var lb=(()=>{let e=class e extends Vn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=U(kn),this.filesAvailable=[],this.availableYoutubeLinks=new Set,this.leetcodeLinks=new Set,this.folderName="",this.readmeFileUrl="",this.assementLink="",this.speechContent=null,this.isPaused=!1,this.isSpeaking=!1,this.isDraftArticle=!1,this.loadPlugin=!1,this.firstLineProcessed=!1,this.hasSelectOptionsHeader=!1,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"ContextInit":this.folderName=this.articleFolderName;let c=Oe.getRouterUrl(this.router,this.basePath+"/"+this.folderName);c.endsWith(".md")||(c=c+".md"),this.readmeFileUrl=Oe.getGhUserFilePath(X.ghUserLoaded,`${this.folderName}/${c}`,this.githubService.hasInstalledAccessToken());break;case"Directory":this.filesAvailable=X.userContext.directory.files.filter(l=>!l.includes("README.md"));break;default:break}}),this.speechSir=window.speechSynthesis}ngOnInit(){this.router.events.subscribe(r=>{r.type==15&&this.ngOnDestroy()}),this.markdownService.renderer.html=r=>{if(this.processFirstLine(r),this.isDraftArticle)return"";let i=r.match(Ql.ASSESSMENT_FOLDER_HEADER);if(i!=null&&i.groups&&i.groups.name){let s=i.groups.name;return this.assementLink=s.includes("http")?s:`/assessments/${s}`,""}return this.hasSelectOptionsHeader=r.includes(Ql.SELECT_OPTIONS_HEADER),r},this.markdownService.renderer.list=(r,i,s)=>{if(this.hasSelectOptionsHeader){let o=r.split(`
`).map(a=>`<option>${a.trim()}</option>`).join("");return this.hasSelectOptionsHeader=!1,`<select class="form-select form-select-lg mb-3">${o}</select>`}return tt.prototype.list.call(this.markdownService.renderer,r,i,s)}}processFirstLine(r){if(this.firstLineProcessed)return;let i=Oe.parseHtmlLine(r);switch(i.PageType){case Ql.DRAFT_HEADER:{this.isDraftArticle=!0;break}case"Assessment":break;default:break}i.Widget=="NAVI"&&(this.loadPlugin=!0),this.firstLineProcessed=!0}speakText(){this.isPaused?this.resumeSpeech():this.isSpeaking?this.pauseSpeech():this.startSpeech()}startSpeech(){!this.isSpeaking&&this.speechContent!=null&&(this.speechSir.speak(this.speechContent),this.isSpeaking=!0)}pauseSpeech(){!this.isPaused&&this.isSpeaking&&(this.speechSir.pause(),this.isPaused=!0)}resumeSpeech(){this.isPaused&&this.isSpeaking&&(this.speechSir.resume(),this.isPaused=!1)}onMarkdownReady(){if(this.availableYoutubeLinks=X.userContext.youtube_links,this.leetcodeLinks=X.userContext.leetcode_links,this.isDraftArticle)this.router.navigate([Ql.DRAFT_PAGE_LINK]);else if(this.router.navigate([this.router.url]),this.loadPlugin){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(Lg);r.appendChild(i.location.nativeElement)}}}speechReady(r){this.isDraftArticle||(this.speechContent=r?new SpeechSynthesisUtterance(r):null,this.speechContent!=null&&(this.speechContent.pitch=1,this.speechContent.rate=1,this.speechContent.volume=1,this.speechContent.lang="en-US"))}ngOnDestroy(){this.speechSir&&this.speechContent!=null&&this.speechSir.cancel()}getFileName(r){return this.folderName=="faqs"?Oe.getFileNameWithoutCurrentFolder(r,this.folderName):Oe.getFileName(r)}};e.\u0275fac=function(i){return new(i||e)(ee(On),ee(dn),ee(Pn))},e.\u0275cmp=Pe({type:e,selectors:[["app-internal-articles"]],features:[cn],decls:16,vars:8,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"container",3,"ready","load","src"],[1,"col-lg-4"],["class","card mb-4 my-3",4,"ngIf"],["class","card my-3 text-center border-success",4,"ngIf"],[4,"ngIf"],[1,"text-truncate"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],["class","text-capitalize my-2",4,"ngIf"],["class","card mb-4",4,"ngFor","ngForOf"],["class","float",3,"click",4,"ngIf"],[1,"card","mb-4","my-3"],[1,"card-header","text-capitalize"],["href","/articles"],[1,"fa-solid","fa-magnifying-glass","float-right",2,"color","darkorange"],[1,"card-body","scrollable-card"],[1,"row"],[1,"list-unstyled","mb-0","text-capitalize"],[3,"href"],[1,"card","my-3","text-center","border-success"],[1,"card-body"],[1,"btn","btn-warning",3,"href"],[1,"fa-regular","fa-lightbulb"],["target","_blank",3,"href"],[1,"text-capitalize","my-2"],[1,"card","mb-4"],["width","100%","height","200","allowfullscreen","",1,"rounded-2",3,"src"],[1,"float",3,"click"],[1,"fa","my-float",3,"ngClass"]],template:function(i,s){i&1&&($(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),bt("ready",function(){return s.onMarkdownReady()})("load",function(a){return s.speechReady(a)}),Q(4,`
            `),z()(),$(5,"div",4),Ye(6,V9,10,2,"div",5)(7,L9,7,1,"div",6)(8,j9,3,0,"div",7),$(9,"div",8)(10,"ul",9),Ye(11,U9,3,2,"li",10),z()(),Ye(12,B9,3,0,"div",11)(13,$9,3,3,"div",12),Ie(14,"app-giscus-widget"),z()()(),Ye(15,z9,2,4,"a",13)),i&2&&(q(3),ce("src",s.readmeFileUrl),q(3),ce("ngIf",s.folderName),q(),ce("ngIf",s.assementLink),q(),ce("ngIf",s.leetcodeLinks.size>0),q(3),ce("ngForOf",s.leetcodeLinks),q(),ce("ngIf",s.availableYoutubeLinks.size>0),q(),ce("ngForOf",s.availableYoutubeLinks),q(2),ce("ngIf",s.speechContent))},dependencies:[aa,Nn,yr,vr,ZP,JP],styles:[".scrollable-card[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto}"]});let n=e;return n})();var q9={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",enableTracing:!de.production},H9=[{path:"i/:folder/:id",component:lb,children:[{path:"**",component:lb}]},{path:"crazycoupons",component:YP},{path:"contacts",component:F_},{path:":ghUser/contacts",component:F_},{path:"",component:YR},{path:":ghUser",component:ub,children:[{path:"**",component:ub}]}],XP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e}),e.\u0275inj=ft({imports:[ua,w_.forRoot(H9,q9),w_]});let n=e;return n})();var eO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=pt({type:e,bootstrap:[X]}),e.\u0275inj=ft({providers:[uw(),{provide:gc,useValue:de.firebaseConfig}],imports:[Dx,sM,px,XP,qx.forRoot({loader:Vs,markedOptions:{provide:Tw,useValue:{gfm:!0,breaks:!1,pedantic:!1}},sanitize:an.NONE})]});let n=e;return n})();TA(X,function(){return[yr,f_,oM,ZR]},[]);bx().bootstrapModule(eO).catch(n=>console.error(n));
