import{k as cC}from"./chunk-PJR4UZTX.js";import{a as XD,b as Md,c as eC,d as tC}from"./chunk-POK7JWRX.js";import{D as et,E as Ss,F as gr,G as kd,I as iu,L as oC,M as aC,N as Ti,O as Qn,a as M,b as ee,c as un,d as Pm,e as C,f as nC,i as Om,j as rC,k as ru,r as Fm,s as Rd,u as iC,v as sC,x as Vm}from"./chunk-PODSCOGA.js";function uC(n,e){return Object.is(n,e)}var Ct=null,Nd=!1,Pd=1,Br=Symbol("SIGNAL");function Me(n){let e=Ct;return Ct=n,e}function lC(){return Ct}var ou={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Um(n){if(Nd)throw new Error("");if(Ct===null)return;Ct.consumerOnSignalRead(n);let e=Ct.nextProducerIndex++;if(Ld(Ct),e<Ct.producerNode.length&&Ct.producerNode[e]!==n&&su(Ct)){let t=Ct.producerNode[e];Vd(t,Ct.producerIndexOfThis[e])}Ct.producerNode[e]!==n&&(Ct.producerNode[e]=n,Ct.producerIndexOfThis[e]=su(Ct)?pC(n,Ct,e):0),Ct.producerLastReadVersion[e]=n.version}function AF(){Pd++}function dC(n){if(!(su(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Pd)){if(!n.producerMustRecompute(n)&&!$m(n)){n.dirty=!1,n.lastCleanEpoch=Pd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Pd}}function hC(n){if(n.liveConsumerNode===void 0)return;let e=Nd;Nd=!0;try{for(let t of n.liveConsumerNode)t.dirty||xF(t)}finally{Nd=e}}function fC(){return Ct?.consumerAllowSignalWrites!==!1}function xF(n){n.dirty=!0,hC(n),n.consumerMarkedDirty?.(n)}function Fd(n){return n&&(n.nextProducerIndex=0),Me(n)}function Bm(n,e){if(Me(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(su(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $m(n){Ld(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(dC(t),r!==t.version))return!0}return!1}function zm(n){if(Ld(n),su(n))for(let e=0;e<n.producerNode.length;e++)Vd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function pC(n,e,t){if(gC(n),n.liveConsumerNode.length===0&&mC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=pC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Vd(n,e){if(gC(n),n.liveConsumerNode.length===1&&mC(n))for(let r=0;r<n.producerNode.length;r++)Vd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ld(i),i.producerIndexOfThis[r]=e}}function su(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ld(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function gC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function mC(n){return n.producerNode!==void 0}function yC(n){let e=Object.create(MF);e.computation=n;let t=()=>{if(dC(e),Um(e),e.value===Od)throw e.error;return e.value};return t[Br]=e,t}var Lm=Symbol("UNSET"),jm=Symbol("COMPUTING"),Od=Symbol("ERRORED"),MF=ee(M({},ou),{value:Lm,dirty:!0,error:null,equal:uC,producerMustRecompute(n){return n.value===Lm||n.value===jm},producerRecomputeValue(n){if(n.value===jm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=jm;let t=Fd(n),r;try{r=n.computation()}catch(i){r=Od,n.error=i}finally{Bm(n,t)}if(e!==Lm&&e!==Od&&r!==Od&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function RF(){throw new Error}var vC=RF;function wC(){vC()}function _C(n){vC=n}var kF=null;function EC(n){let e=Object.create(bC);e.value=n;let t=()=>(Um(e),e.value);return t[Br]=e,t}function qm(n,e){fC()||wC(),n.equal(n.value,e)||(n.value=e,NF(n))}function IC(n,e){fC()||wC(),qm(n,e(n.value))}var bC=ee(M({},ou),{equal:uC,value:void 0});function NF(n){n.version++,AF(),hC(n),kF?.()}function de(n){return typeof n=="function"}function No(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jd=No(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function As(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ot=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(de(r))try{r()}catch(s){e=s instanceof jd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{DC(s)}catch(o){e=e??[],o instanceof jd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new jd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)DC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&As(t,e)}remove(e){let{_finalizers:t}=this;t&&As(t,e),e instanceof n&&e._removeParent(this)}};ot.EMPTY=(()=>{let n=new ot;return n.closed=!0,n})();var Hm=ot.EMPTY;function Ud(n){return n instanceof ot||n&&"closed"in n&&de(n.remove)&&de(n.add)&&de(n.unsubscribe)}function DC(n){de(n)?n():n.unsubscribe()}var Yn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Po={setTimeout(n,e,...t){let{delegate:r}=Po;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Po;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Bd(n){Po.setTimeout(()=>{let{onUnhandledError:e}=Yn;if(e)e(n);else throw n})}function xs(){}var CC=Gm("C",void 0,void 0);function TC(n){return Gm("E",void 0,n)}function SC(n){return Gm("N",n,void 0)}function Gm(n,e,t){return{kind:n,value:e,error:t}}var Ms=null;function Oo(n){if(Yn.useDeprecatedSynchronousErrorHandling){let e=!Ms;if(e&&(Ms={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ms;if(Ms=null,t)throw r}}else n()}function AC(n){Yn.useDeprecatedSynchronousErrorHandling&&Ms&&(Ms.errorThrown=!0,Ms.error=n)}var Rs=class extends ot{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ud(e)&&e.add(this)):this.destination=FF}static create(e,t,r){return new $r(e,t,r)}next(e){this.isStopped?Km(SC(e),this):this._next(e)}error(e){this.isStopped?Km(TC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Km(CC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},PF=Function.prototype.bind;function Wm(n,e){return PF.call(n,e)}var Qm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){$d(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){$d(r)}else $d(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){$d(t)}}},$r=class extends Rs{constructor(e,t,r){super();let i;if(de(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Yn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wm(e.next,s),error:e.error&&Wm(e.error,s),complete:e.complete&&Wm(e.complete,s)}):i=e}this.destination=new Qm(i)}};function $d(n){Yn.useDeprecatedSynchronousErrorHandling?AC(n):Bd(n)}function OF(n){throw n}function Km(n,e){let{onStoppedNotification:t}=Yn;t&&Po.setTimeout(()=>t(n,e))}var FF={closed:!0,next:xs,error:OF,complete:xs};var Fo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function kt(n){return n}function Vo(...n){return Ym(n)}function Ym(n){return n.length===0?kt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=LF(t)?t:new $r(t,r,i);return Oo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=xC(r),new r((i,s)=>{let o=new $r({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Fo](){return this}pipe(...t){return Ym(t)(this)}toPromise(t){return t=xC(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function xC(n){var e;return(e=n??Yn.Promise)!==null&&e!==void 0?e:Promise}function VF(n){return n&&de(n.next)&&de(n.error)&&de(n.complete)}function LF(n){return n&&n instanceof Rs||VF(n)&&Ud(n)}function Zm(n){return de(n?.lift)}function pe(n){return e=>{if(Zm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(n,e,t,r,i){return new au(n,e,t,r,i)}var au=class extends Rs{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Lo(){return pe((n,e)=>{let t=null;n._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var jo=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Zm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ot;let t=this.getSubject();e.add(this.source.subscribe(fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ot.EMPTY)}return e}refCount(){return Lo()(this)}};var MC=No(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Oe=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new zd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new MC}next(t){Oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Hm:(this.currentObservers=null,s.push(t),new ot(()=>{this.currentObservers=null,As(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new zd(e,t),n})(),zd=class extends Oe{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Hm}};var Nt=class extends Oe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var cu={now(){return(cu.delegate||Date).now()},delegate:void 0};var qd=class extends Oe{constructor(e=1/0,t=1/0,r=cu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Hd=class extends ot{constructor(e,t){super()}schedule(e,t=0){return this}};var uu={setInterval(n,e,...t){let{delegate:r}=uu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=uu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Uo=class extends Hd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return uu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&uu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,As(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Bo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Bo.now=cu.now;var $o=class extends Bo{constructor(e,t=Bo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var zo=new $o(Uo),Jm=zo;var Gd=class extends Uo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Wd=class extends $o{};var Xm=new Wd(Gd);var Pt=new he(n=>n.complete());function Kd(n){return n&&de(n.schedule)}function ey(n){return n[n.length-1]}function qo(n){return de(ey(n))?n.pop():void 0}function mr(n){return Kd(ey(n))?n.pop():void 0}function RC(n,e){return typeof ey(n)=="number"?n.pop():e}var Qd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Yd(n){return de(n?.then)}function Zd(n){return de(n[Fo])}function Jd(n){return Symbol.asyncIterator&&de(n?.[Symbol.asyncIterator])}function Xd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function jF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var eh=jF();function th(n){return de(n?.[eh])}function nh(n){return eC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Md(t.read());if(i)return yield Md(void 0);yield yield Md(r)}}finally{t.releaseLock()}})}function rh(n){return de(n?.getReader)}function Ue(n){if(n instanceof he)return n;if(n!=null){if(Zd(n))return UF(n);if(Qd(n))return BF(n);if(Yd(n))return $F(n);if(Jd(n))return kC(n);if(th(n))return zF(n);if(rh(n))return qF(n)}throw Xd(n)}function UF(n){return new he(e=>{let t=n[Fo]();if(de(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BF(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function $F(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Bd)})}function zF(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function kC(n){return new he(e=>{HF(n,e).catch(t=>e.error(t))})}function qF(n){return kC(nh(n))}function HF(n,e){var t,r,i,s;return XD(this,void 0,void 0,function*(){try{for(t=tC(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function ln(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function dn(n,e=0){return pe((t,r)=>{t.subscribe(fe(r,i=>ln(r,n,()=>r.next(i),e),()=>ln(r,n,()=>r.complete(),e),i=>ln(r,n,()=>r.error(i),e)))})}function Zn(n,e=0){return pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function NC(n,e){return Ue(n).pipe(Zn(e),dn(e))}function PC(n,e){return Ue(n).pipe(Zn(e),dn(e))}function OC(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function FC(n,e){return new he(t=>{let r;return ln(t,e,()=>{r=n[eh](),ln(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>de(r?.return)&&r.return()})}function ih(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{ln(t,e,()=>{let r=n[Symbol.asyncIterator]();ln(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function VC(n,e){return ih(nh(n),e)}function LC(n,e){if(n!=null){if(Zd(n))return NC(n,e);if(Qd(n))return OC(n,e);if(Yd(n))return PC(n,e);if(Jd(n))return ih(n,e);if(th(n))return FC(n,e);if(rh(n))return VC(n,e)}throw Xd(n)}function Te(n,e){return e?LC(n,e):Ue(n)}function se(...n){let e=mr(n);return Te(n,e)}function Ho(n,e){let t=de(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function ty(n){return!!n&&(n instanceof he||de(n.lift)&&de(n.subscribe))}var zr=No(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function jC(n){return n instanceof Date&&!isNaN(n)}function re(n,e){return pe((t,r)=>{let i=0;t.subscribe(fe(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:GF}=Array;function WF(n,e){return GF(e)?n(...e):n(e)}function sh(n){return re(e=>WF(n,e))}var{isArray:KF}=Array,{getPrototypeOf:QF,prototype:YF,keys:ZF}=Object;function oh(n){if(n.length===1){let e=n[0];if(KF(e))return{args:e,keys:null};if(JF(e)){let t=ZF(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function JF(n){return n&&typeof n=="object"&&QF(n)===YF}function ah(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function lu(...n){let e=mr(n),t=qo(n),{args:r,keys:i}=oh(n);if(r.length===0)return Te([],e);let s=new he(XF(r,e,i?o=>ah(i,o):kt));return t?s.pipe(sh(t)):s}function XF(n,e,t=kt){return r=>{UC(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)UC(e,()=>{let l=Te(n[c],e),d=!1;l.subscribe(fe(r,h=>{s[c]=h,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function UC(n,e,t){n?ln(t,n,e):e()}function BC(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,h=!1,p=()=>{h&&!c.length&&!l&&e.complete()},m=w=>l<r?_(w):c.push(w),_=w=>{s&&e.next(w),l++;let E=!1;Ue(t(w,d++)).subscribe(fe(e,R=>{i?.(R),s?m(R):e.next(R)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let R=c.shift();o?ln(e,o,()=>_(R)):_(R)}p()}catch(R){e.error(R)}}))};return n.subscribe(fe(e,m,()=>{h=!0,p()})),()=>{a?.()}}function at(n,e,t=1/0){return de(e)?at((r,i)=>re((s,o)=>e(r,s,i,o))(Ue(n(r,i))),t):(typeof e=="number"&&(t=e),pe((r,i)=>BC(r,i,n,t)))}function Si(n=1/0){return at(kt,n)}function $C(){return Si(1)}function Ai(...n){return $C()(Te(n,mr(n)))}function ch(n){return new he(e=>{Ue(n()).subscribe(e)})}function ny(...n){let e=qo(n),{args:t,keys:r}=oh(n),i=new he(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let h=!1;Ue(t[d]).subscribe(fe(s,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(r?ah(r,a):a),s.complete())}))}});return e?i.pipe(sh(e)):i}function ry(n=0,e,t=Jm){let r=-1;return e!=null&&(Kd(e)?t=e:r=e),new he(i=>{let s=jC(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function du(...n){let e=mr(n),t=RC(n,1/0),r=n;return r.length?r.length===1?Ue(r[0]):Si(t)(Te(r,e)):Pt}function lt(n,e){return pe((t,r)=>{let i=0;t.subscribe(fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function xi(n){return pe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(fe(t,void 0,void 0,o=>{s=Ue(n(o,xi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function zC(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(fe(o,d=>{let h=l++;c=a?n(c,d,h):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function qr(n,e){return de(e)?at(n,e,1):at(n,1)}function Mi(n){return pe((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Hr(n){return n<=0?()=>Pt:pe((e,t)=>{let r=0;e.subscribe(fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hu(n){return re(()=>n)}function Gr(n,e=kt){return n=n??eV,pe((t,r)=>{let i,s=!0;t.subscribe(fe(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function eV(n,e){return n===e}function uh(n=tV){return pe((e,t)=>{let r=!1;e.subscribe(fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tV(){return new zr}function ks(n){return pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Tn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,s)=>n(i,s,r)):kt,Hr(1),t?Mi(e):uh(()=>new zr))}function iy(n,e,t,r){return pe((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:t,element:o,connector:r}=e;let a=new Map,c=_=>{a.forEach(_),_(s)},l=_=>c(w=>w.error(_)),d=0,h=!1,p=new au(s,_=>{try{let w=n(_),E=a.get(w);if(!E){a.set(w,E=r?r():new Oe);let R=m(w,E);if(s.next(R),t){let O=fe(E,()=>{E.complete(),O?.unsubscribe()},void 0,void 0,()=>a.delete(w));p.add(Ue(t(R)).subscribe(O))}}E.next(o?o(_):_)}catch(w){l(w)}},()=>c(_=>_.complete()),l,()=>a.clear(),()=>(h=!0,d===0));i.subscribe(p);function m(_,w){let E=new he(R=>{d++;let O=w.subscribe(R);return()=>{O.unsubscribe(),--d===0&&h&&p.unsubscribe()}});return E.key=_,E}})}function Go(n){return n<=0?()=>Pt:pe((e,t)=>{let r=[];e.subscribe(fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function sy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?lt((i,s)=>n(i,s,r)):kt,Go(1),t?Mi(e):uh(()=>new zr))}function fu(){return pe((n,e)=>{let t,r=!1;n.subscribe(fe(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Wr(n,e){return pe(zC(n,e,arguments.length>=2,!0))}function qC(n={}){let{connector:e=()=>new Oe,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,d=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=c=void 0,d=h=!1},_=()=>{let w=o;m(),w?.unsubscribe()};return pe((w,E)=>{l++,!h&&!d&&p();let R=c=c??e();E.add(()=>{l--,l===0&&!h&&!d&&(a=oy(_,i))}),R.subscribe(E),!o&&l>0&&(o=new $r({next:O=>R.next(O),error:O=>{h=!0,p(),a=oy(m,t,O),R.error(O)},complete:()=>{d=!0,p(),a=oy(m,r),R.complete()}}),Ue(w).subscribe(o))})(s)}}function oy(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new $r({next:()=>{r.unsubscribe(),n()}});return Ue(e(...t)).subscribe(r)}function Kr(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,qC({connector:()=>new qd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Jn(...n){let e=mr(n);return pe((t,r)=>{(e?Ai(n,t,e):Ai(n,t)).subscribe(r)})}function Ne(n,e){return pe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(fe(r,c=>{i?.unsubscribe();let l=0,d=s++;Ue(n(c,d)).subscribe(i=fe(r,h=>r.next(e?e(c,h,d,l++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function lh(n,e){return de(e)?Ne(()=>n,e):Ne(()=>n)}function pu(n){return pe((e,t)=>{Ue(n).subscribe(fe(t,()=>t.complete(),xs)),!t.closed&&e.subscribe(t)})}function mt(n,e,t){let r=de(n)||e||t?{next:n,error:e,complete:t}:n;return r?pe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(fe(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):kt}function ay(...n){let e=qo(n);return pe((t,r)=>{let i=n.length,s=new Array(i),o=n.map(()=>!1),a=!1;for(let c=0;c<i;c++)Ue(n[c]).subscribe(fe(r,l=>{s[c]=l,!a&&!o[c]&&(o[c]=!0,(a=o.every(kt))&&(o=null))},xs));t.subscribe(fe(r,c=>{if(a){let l=[c,...s];r.next(e?e(...l):l)}}))})}var MT="https://g.co/ng/security#xss",ie=class extends Error{constructor(e,t){super(Yh(e,t)),this.code=e}};function Yh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Tu(n){return{toString:n}.toString()}var dh="__parameters__";function nV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function RT(n,e,t){return Tu(()=>{let r=nV(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let h=c.hasOwnProperty(dh)?c[dh]:Object.defineProperty(c,dh,{value:[]})[dh];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var An=globalThis;function We(n){for(let e in n)if(n[e]===We)return e;throw Error("Could not find renamed property on target object.")}function rV(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function tn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(tn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function Ey(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var iV=We({__forward_ref__:We});function la(n){return n.__forward_ref__=la,n.toString=function(){return tn(this())},n}function en(n){return kT(n)?n():n}function kT(n){return typeof n=="function"&&n.hasOwnProperty(iV)&&n.__forward_ref__===la}function W(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function yt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zh(n){return HC(n,PT)||HC(n,OT)}function NT(n){return Zh(n)!==null}function HC(n,e){return n.hasOwnProperty(e)?n[e]:null}function sV(n){let e=n&&(n[PT]||n[OT]);return e||null}function GC(n){return n&&(n.hasOwnProperty(WC)||n.hasOwnProperty(oV))?n[WC]:null}var PT=We({\u0275prov:We}),WC=We({\u0275inj:We}),OT=We({ngInjectableDef:We}),oV=We({ngInjectorDef:We}),K=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=W({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function FT(n){return n&&!!n.\u0275providers}var aV=We({\u0275cmp:We}),cV=We({\u0275dir:We}),uV=We({\u0275pipe:We}),lV=We({\u0275mod:We}),Dh=We({\u0275fac:We}),mu=We({__NG_ELEMENT_ID__:We}),KC=We({__NG_ENV_ID__:We});function vu(n){return typeof n=="string"?n:n==null?"":String(n)}function dV(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():vu(n)}function hV(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ie(-200,n)}function xv(n,e){throw new ie(-201,!1)}var Ie=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ie||{}),Iy;function VT(){return Iy}function hn(n){let e=Iy;return Iy=n,e}function LT(n,e,t){let r=Zh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ie.Optional)return null;if(e!==void 0)return e;xv(n,"Injector")}var fV={},wu=fV,by="__NG_DI_FLAG__",Ch="ngTempTokenPath",pV="ngTokenPath",gV=/\n/gm,mV="\u0275",QC="__source",Zo;function yV(){return Zo}function Ri(n){let e=Zo;return Zo=n,e}function vV(n,e=Ie.Default){if(Zo===void 0)throw new ie(-203,!1);return Zo===null?LT(n,void 0,e):Zo.get(n,e&Ie.Optional?null:void 0,e)}function V(n,e=Ie.Default){return(VT()||vV)(en(n),e)}function B(n,e=Ie.Default){return V(n,Jh(e))}function Jh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Dy(n){let e=[];for(let t=0;t<n.length;t++){let r=en(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,s=Ie.Default;for(let o=0;o<r.length;o++){let a=r[o],c=wV(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(V(i,s))}else e.push(V(r))}return e}function jT(n,e){return n[by]=e,n.prototype[by]=e,n}function wV(n){return n[by]}function _V(n,e,t,r){let i=n[Ch];throw e[QC]&&i.unshift(e[QC]),n.message=EV(`
`+n.message,i,t,r),n[pV]=i,n[Ch]=null,n}function EV(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==mV?n.slice(2):n;let i=tn(e);if(Array.isArray(e))i=e.map(tn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):tn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(gV,`
  `)}`}var da=jT(RT("Optional"),8);var Xh=jT(RT("SkipSelf"),4);function Fs(n,e){let t=n.hasOwnProperty(Dh);return t?n[Dh]:null}function IV(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function bV(n){return n.flat(Number.POSITIVE_INFINITY)}function Mv(n,e){n.forEach(t=>Array.isArray(t)?Mv(t,e):e(t))}function UT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Th(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function DV(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function CV(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function Rv(n,e,t){let r=Su(n,e);return r>=0?n[r|1]=t:(r=~r,CV(n,r,e,t)),r}function cy(n,e){let t=Su(n,e);if(t>=0)return n[t|1]}function Su(n,e){return TV(n,e,1)}function TV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Xo={},fn=[],ea=new K(""),BT=new K("",-1),$T=new K(""),Sh=class{get(e,t=wu){if(t===wu){let r=new Error(`NullInjectorError: No provider for ${tn(e)}!`);throw r.name="NullInjectorError",r}return t}},zT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(zT||{}),wr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(wr||{}),Pi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Pi||{});function SV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Cy(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];xV(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function AV(n){return n===3||n===4||n===6}function xV(n){return n.charCodeAt(0)===64}function _u(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?YC(n,t,i,null,e[++r]):YC(n,t,i,null,null))}}return n}function YC(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var qT="ng-template";function MV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&SV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(kv(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function kv(n){return n.type===4&&n.value!==qT}function RV(n,e,t){let r=n.type===4&&!t?qT:n.value;return e===r}function kV(n,e,t){let r=4,i=n.attrs,s=i!==null?OV(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Xn(r)&&!Xn(c))return!1;if(o&&Xn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!RV(n,c,t)||c===""&&e.length===1){if(Xn(r))return!1;o=!0}}else if(r&8){if(i===null||!MV(n,i,c,t)){if(Xn(r))return!1;o=!0}}else{let l=e[++a],d=NV(c,i,kv(n),t);if(d===-1){if(Xn(r))return!1;o=!0;continue}if(l!==""){let h;if(d>s?h="":h=i[d+1].toLowerCase(),r&2&&l!==h){if(Xn(r))return!1;o=!0}}}}return Xn(r)||o}function Xn(n){return(n&1)===0}function NV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return FV(e,n)}function HT(n,e,t=!1){for(let r=0;r<e.length;r++)if(kV(n,e[r],t))return!0;return!1}function PV(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function OV(n){for(let e=0;e<n.length;e++){let t=n[e];if(AV(t))return e}return n.length}function FV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function VV(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function ZC(n,e){return n?":not("+e.trim()+")":e}function LV(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Xn(o)&&(e+=ZC(s,i),i=""),r=o,s=s||!Xn(r);t++}return i!==""&&(e+=ZC(s,i)),e}function jV(n){return n.map(LV).join(",")}function UV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Xn(i))break;i=s}r++}return{attrs:e,classes:t}}function Fe(n){return Tu(()=>{let e=YT(n),t=ee(M({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===zT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||wr.Emulated,styles:n.styles||fn,_:null,schemas:n.schemas||null,tView:null,id:""});ZT(t);let r=n.dependencies;return t.directiveDefs=Ah(r,!1),t.pipeDefs=Ah(r,!0),t.id=zV(t),t})}function BV(n){return Oi(n)||GT(n)}function $V(n){return n!==null}function vt(n){return Tu(()=>({type:n.type,bootstrap:n.bootstrap||fn,declarations:n.declarations||fn,imports:n.imports||fn,exports:n.exports||fn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function JC(n,e){if(n==null)return Xo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Pi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Pi.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Ht(n){return Tu(()=>{let e=YT(n);return ZT(e),e})}function Gs(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Oi(n){return n[aV]||null}function GT(n){return n[cV]||null}function WT(n){return n[uV]||null}function KT(n){let e=Oi(n)||GT(n)||WT(n);return e!==null?e.standalone:!1}function QT(n,e){let t=n[lV]||null;if(!t&&e===!0)throw new Error(`Type ${tn(n)} does not have '\u0275mod' property.`);return t}function YT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Xo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||fn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:JC(n.inputs,e),outputs:JC(n.outputs),debugInfo:null}}function ZT(n){n.features?.forEach(e=>e(n))}function Ah(n,e){if(!n)return null;let t=e?WT:BV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter($V)}function zV(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ef(n){return{\u0275providers:n}}function qV(...n){return{\u0275providers:JT(!0,n),\u0275fromNgModule:!0}}function JT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Mv(e,o=>{let a=o;Ty(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&XT(i,s),t}function XT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Nv(i,s=>{e(s,r)})}}function Ty(n,e,t,r){if(n=en(n),!n)return!1;let i=null,s=GC(n),o=!s&&Oi(n);if(!s&&!o){let c=n.ngModule;if(s=GC(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Ty(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Mv(s.imports,d=>{Ty(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&XT(l,e)}if(!a){let l=Fs(i)||(()=>new i);e({provide:i,useFactory:l,deps:fn},i),e({provide:$T,useValue:i,multi:!0},i),e({provide:ea,useValue:()=>V(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Nv(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Nv(n,e){for(let t of n)FT(t)&&(t=t.\u0275providers),Array.isArray(t)?Nv(t,e):e(t)}var HV=We({provide:String,useValue:We});function eS(n){return n!==null&&typeof n=="object"&&HV in n}function GV(n){return!!(n&&n.useExisting)}function WV(n){return!!(n&&n.useFactory)}function ta(n){return typeof n=="function"}function KV(n){return!!n.useClass}var tf=new K(""),wh={},QV={},uy;function Pv(){return uy===void 0&&(uy=new Sh),uy}var nn=class{},Eu=class extends nn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ay(e,o=>this.processProvider(o)),this.records.set(BT,Wo(void 0,this)),i.has("environment")&&this.records.set(nn,Wo(void 0,this));let s=this.records.get(tf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get($T,fn,Ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Ri(this),r=hn(void 0),i;try{return e()}finally{Ri(t),hn(r)}}get(e,t=wu,r=Ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(KC))return e[KC](this);r=Jh(r);let i,s=Ri(this),o=hn(void 0);try{if(!(r&Ie.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=eL(e)&&Zh(e);l&&this.injectableDefInScope(l)?c=Wo(Sy(e),wh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ie.Self?Pv():this.parent;return t=r&Ie.Optional&&t===wu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Ch]=a[Ch]||[]).unshift(tn(e)),s)throw a;return _V(a,e,"R3InjectorError",this.source)}else throw a}finally{hn(o),Ri(s)}}resolveInjectorInitializers(){let e=Me(null),t=Ri(this),r=hn(void 0),i;try{let s=this.get(ea,fn,Ie.Self);for(let o of s)o()}finally{Ri(t),hn(r),Me(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(tn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(e){e=en(e);let t=ta(e)?e:en(e&&e.provide),r=ZV(e);if(!ta(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Wo(void 0,wh,!0),i.factory=()=>Dy(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Me(null);try{return t.value===wh&&(t.value=QV,t.value=t.factory()),typeof t.value=="object"&&t.value&&XV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=en(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Sy(n){let e=Zh(n),t=e!==null?e.factory:Fs(n);if(t!==null)return t;if(n instanceof K)throw new ie(204,!1);if(n instanceof Function)return YV(n);throw new ie(204,!1)}function YV(n){if(n.length>0)throw new ie(204,!1);let t=sV(n);return t!==null?()=>t.factory(n):()=>new n}function ZV(n){if(eS(n))return Wo(void 0,n.useValue);{let e=tS(n);return Wo(e,wh)}}function tS(n,e,t){let r;if(ta(n)){let i=en(n);return Fs(i)||Sy(i)}else if(eS(n))r=()=>en(n.useValue);else if(WV(n))r=()=>n.useFactory(...Dy(n.deps||[]));else if(GV(n))r=()=>V(en(n.useExisting));else{let i=en(n&&(n.useClass||n.provide));if(JV(n))r=()=>new i(...Dy(n.deps));else return Fs(i)||Sy(i)}return r}function Wo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function JV(n){return!!n.deps}function XV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function eL(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function Ay(n,e){for(let t of n)Array.isArray(t)?Ay(t,e):t&&FT(t)?Ay(t.\u0275providers,e):e(t)}function Un(n,e){n instanceof Eu&&n.assertNotDestroyed();let t,r=Ri(n),i=hn(void 0);try{return e()}finally{Ri(r),hn(i)}}function nS(){return VT()!==void 0||yV()!=null}function tL(n){if(!nS())throw new ie(-203,!1)}function nL(n){let e=An.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function rL(n){return typeof n=="function"}var Xr=0,ye=1,ue=2,qt=3,tr=4,pn=5,Iu=6,xh=7,nr=8,na=9,_r=10,ct=11,bu=12,XC=13,ha=14,jn=15,Vs=16,Ko=17,Qr=18,nf=19,rS=20,ki=21,ly=22,Ln=23,rn=25,iS=1;var Ls=7,Mh=8,ra=9,Sn=10,Rh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Rh||{});function Ni(n){return Array.isArray(n)&&typeof n[iS]=="object"}function ei(n){return Array.isArray(n)&&n[iS]===!0}function Ov(n){return(n.flags&4)!==0}function rf(n){return n.componentOffset>-1}function sf(n){return(n.flags&1)===1}function Fi(n){return!!n.template}function xy(n){return(n[ue]&512)!==0}var My=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function sS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ji(){return oS}function oS(n){return n.type.prototype.ngOnChanges&&(n.setInput=sL),iL}ji.ngInherit=!0;function iL(){let n=cS(this),e=n?.current;if(e){let t=n.previous;if(t===Xo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function sL(n,e,t,r,i){let s=this.declaredInputs[r],o=cS(n)||oL(n,{previous:Xo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new My(l&&l.currentValue,t,c===Xo),sS(n,e,i,t)}var aS="__ngSimpleChanges__";function cS(n){return n[aS]||null}function oL(n,e){return n[aS]=e}var eT=null;var yr=function(n,e,t){eT?.(n,e,t)},aL="svg",cL="math";function Er(n){for(;Array.isArray(n);)n=n[Xr];return n}function uS(n,e){return Er(e[n])}function rr(n,e){return Er(e[n.index])}function lS(n,e){return n.data[e]}function Fv(n,e){return n[e]}function Ui(n,e){let t=e[n];return Ni(t)?t:t[Xr]}function uL(n){return(n[ue]&4)===4}function Vv(n){return(n[ue]&128)===128}function lL(n){return ei(n[qt])}function ia(n,e){return e==null?null:n[e]}function dS(n){n[Ko]=0}function hS(n){n[ue]&1024||(n[ue]|=1024,Vv(n)&&af(n))}function dL(n,e){for(;n>0;)e=e[ha],n--;return e}function of(n){return!!(n[ue]&9216||n[Ln]?.dirty)}function Ry(n){n[_r].changeDetectionScheduler?.notify(8),n[ue]&64&&(n[ue]|=1024),of(n)&&af(n)}function af(n){n[_r].changeDetectionScheduler?.notify(0);let e=js(n);for(;e!==null&&!(e[ue]&8192||(e[ue]|=8192,!Vv(e)));)e=js(e)}function fS(n,e){if((n[ue]&256)===256)throw new ie(911,!1);n[ki]===null&&(n[ki]=[]),n[ki].push(e)}function hL(n,e){if(n[ki]===null)return;let t=n[ki].indexOf(e);t!==-1&&n[ki].splice(t,1)}function js(n){let e=n[qt];return ei(e)?e[qt]:e}var Ee={lFrame:IS(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var pS=!1;function fL(){return Ee.lFrame.elementDepthCount}function pL(){Ee.lFrame.elementDepthCount++}function gL(){Ee.lFrame.elementDepthCount--}function gS(){return Ee.bindingsEnabled}function mS(){return Ee.skipHydrationRootTNode!==null}function mL(n){return Ee.skipHydrationRootTNode===n}function yL(){Ee.skipHydrationRootTNode=null}function be(){return Ee.lFrame.lView}function wt(){return Ee.lFrame.tView}function gn(n){return Ee.lFrame.contextLView=n,n[nr]}function mn(n){return Ee.lFrame.contextLView=null,n}function sn(){let n=yS();for(;n!==null&&n.type===64;)n=n.parent;return n}function yS(){return Ee.lFrame.currentTNode}function vL(){let n=Ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ws(n,e){let t=Ee.lFrame;t.currentTNode=n,t.isParent=e}function Lv(){return Ee.lFrame.isParent}function jv(){Ee.lFrame.isParent=!1}function wL(){return Ee.lFrame.contextLView}function vS(){return pS}function tT(n){pS=n}function cf(){let n=Ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function _L(){return Ee.lFrame.bindingIndex}function EL(n){return Ee.lFrame.bindingIndex=n}function Uv(){return Ee.lFrame.bindingIndex++}function Bv(n){let e=Ee.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function IL(){return Ee.lFrame.inI18n}function bL(n,e){let t=Ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,ky(e)}function DL(){return Ee.lFrame.currentDirectiveIndex}function ky(n){Ee.lFrame.currentDirectiveIndex=n}function CL(n){let e=Ee.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function wS(){return Ee.lFrame.currentQueryIndex}function $v(n){Ee.lFrame.currentQueryIndex=n}function TL(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[pn]:null}function _S(n,e,t){if(t&Ie.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Ie.Host);)if(i=TL(s),i===null||(s=s[ha],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ee.lFrame=ES();return r.currentTNode=e,r.lView=n,!0}function zv(n){let e=ES(),t=n[ye];Ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ES(){let n=Ee.lFrame,e=n===null?null:n.child;return e===null?IS(n):e}function IS(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function bS(){let n=Ee.lFrame;return Ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var DS=bS;function qv(){let n=bS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function SL(n){return(Ee.lFrame.contextLView=dL(n,Ee.lFrame.contextLView))[nr]}function Bi(){return Ee.lFrame.selectedIndex}function Us(n){Ee.lFrame.selectedIndex=n}function Hv(){let n=Ee.lFrame;return lS(n.tView,n.selectedIndex)}function AL(){return Ee.lFrame.currentNamespace}var CS=!0;function uf(){return CS}function lf(n){CS=n}function xL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=oS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function df(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function _h(n,e,t){TS(n,e,3,t)}function Eh(n,e,t,r){(n[ue]&3)===t&&TS(n,e,t,r)}function dy(n,e){let t=n[ue];(t&3)===e&&(t&=16383,t+=1,n[ue]=t)}function TS(n,e,t,r){let i=r!==void 0?n[Ko]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ko]+=65536),(a<s||s==-1)&&(ML(n,t,e,c),n[Ko]=(n[Ko]&4294901760)+c+2),c++}function nT(n,e){yr(4,n,e);let t=Me(null);try{e.call(n)}finally{Me(t),yr(5,n,e)}}function ML(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ue]>>14<n[Ko]>>16&&(n[ue]&3)===e&&(n[ue]+=16384,nT(a,s)):nT(a,s)}var Jo=-1,Bs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function RL(n){return n instanceof Bs}function kL(n){return(n.flags&8)!==0}function NL(n){return(n.flags&16)!==0}var hy={},Ny=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Jh(r);let i=this.injector.get(e,hy,r);return i!==hy||t===hy?i:this.parentInjector.get(e,t,r)}};function SS(n){return n!==Jo}function kh(n){return n&32767}function PL(n){return n>>16}function Nh(n,e){let t=PL(n),r=e;for(;t>0;)r=r[ha],t--;return r}var Py=!0;function Ph(n){let e=Py;return Py=n,e}var OL=256,AS=OL-1,xS=5,FL=0,vr={};function VL(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(mu)&&(r=t[mu]),r==null&&(r=t[mu]=FL++);let i=r&AS,s=1<<i;e.data[n+(i>>xS)]|=s}function Oh(n,e){let t=MS(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,fy(r.data,n),fy(e,null),fy(r.blueprint,null));let i=Gv(n,e),s=n.injectorIndex;if(SS(i)){let o=kh(i),a=Nh(i,e),c=a[ye].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function fy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function MS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Gv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=OS(i),r===null)return Jo;if(t++,i=i[ha],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Jo}function Oy(n,e,t){VL(n,e,t)}function RS(n,e,t){if(t&Ie.Optional||n!==void 0)return n;xv(e,"NodeInjector")}function kS(n,e,t,r){if(t&Ie.Optional&&r===void 0&&(r=null),!(t&(Ie.Self|Ie.Host))){let i=n[na],s=hn(void 0);try{return i?i.get(e,r,t&Ie.Optional):LT(e,r,t&Ie.Optional)}finally{hn(s)}}return RS(r,e,t)}function NS(n,e,t,r=Ie.Default,i){if(n!==null){if(e[ue]&2048&&!(r&Ie.Self)){let o=BL(n,e,t,r,vr);if(o!==vr)return o}let s=PS(n,e,t,r,vr);if(s!==vr)return s}return kS(e,t,r,i)}function PS(n,e,t,r,i){let s=jL(t);if(typeof s=="function"){if(!_S(e,n,r))return r&Ie.Host?RS(i,t,r):kS(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Ie.Optional))xv(t);else return o}finally{DS()}}else if(typeof s=="number"){let o=null,a=MS(n,e),c=Jo,l=r&Ie.Host?e[jn][pn]:null;for((a===-1||r&Ie.SkipSelf)&&(c=a===-1?Gv(n,e):e[a+8],c===Jo||!iT(r,!1)?a=-1:(o=e[ye],a=kh(c),e=Nh(c,e)));a!==-1;){let d=e[ye];if(rT(s,a,d.data)){let h=LL(a,e,t,o,r,l);if(h!==vr)return h}c=e[a+8],c!==Jo&&iT(r,e[ye].data[a+8]===l)&&rT(s,a,e)?(o=d,a=kh(c),e=Nh(c,e)):a=-1}}return i}function LL(n,e,t,r,i,s){let o=e[ye],a=o.data[n+8],c=r==null?rf(a)&&Py:r!=o&&(a.type&3)!==0,l=i&Ie.Host&&s===a,d=Ih(a,o,t,c,l);return d!==null?$s(e,o,d,a):vr}function Ih(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,h=r?a:a+d,p=i?a+d:l;for(let m=h;m<p;m++){let _=o[m];if(m<c&&t===_||m>=c&&_.type===t)return m}if(i){let m=o[c];if(m&&Fi(m)&&m.type===t)return c}return null}function $s(n,e,t,r){let i=n[t],s=e.data;if(RL(i)){let o=i;o.resolving&&hV(dV(s[t]));let a=Ph(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?hn(o.injectImpl):null,d=_S(n,r,Ie.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&xL(t,s[t],e)}finally{l!==null&&hn(l),Ph(a),o.resolving=!1,DS()}}return i}function jL(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(mu)?n[mu]:void 0;return typeof e=="number"?e>=0?e&AS:UL:e}function rT(n,e,t){let r=1<<n;return!!(t[e+(n>>xS)]&r)}function iT(n,e){return!(n&Ie.Self)&&!(n&Ie.Host&&e)}var Os=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return NS(this._tNode,this._lView,e,Jh(r),t)}};function UL(){return new Os(sn(),be())}function Au(n){return Tu(()=>{let e=n.prototype.constructor,t=e[Dh]||Fy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Dh]||Fy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Fy(n){return kT(n)?()=>{let e=Fy(en(n));return e&&e()}:Fs(n)}function BL(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ue]&2048&&!(o[ue]&512);){let a=PS(s,o,t,r|Ie.Self,vr);if(a!==vr)return a;let c=s.parent;if(!c){let l=o[rS];if(l){let d=l.get(t,vr,r);if(d!==vr)return d}c=OS(o),o=o[ha]}s=c}return i}function OS(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[pn]:null}function sT(n,e=null,t=null,r){let i=FS(n,e,t,r);return i.resolveInjectorInitializers(),i}function FS(n,e=null,t=null,r,i=new Set){let s=[t||fn,qV(n)];return r=r||(typeof n=="object"?void 0:tn(n)),new Eu(s,e||Pv(),r||null,i)}var Ns=class Ns{static create(e,t){if(Array.isArray(e))return sT({name:""},t,e,"");{let r=e.name??"";return sT({name:r},e.parent,e.providers,r)}}};Ns.THROW_IF_NOT_FOUND=wu,Ns.NULL=new Sh,Ns.\u0275prov=W({token:Ns,providedIn:"any",factory:()=>V(BT)}),Ns.__NG_ELEMENT_ID__=-1;var xn=Ns;var $L=new K("");$L.__NG_ELEMENT_ID__=n=>{let e=sn();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(n&Ie.Optional)return null;throw new ie(204,!1)};var zL="ngOriginalError";function py(n){return n[zL]}var VS=!0,Wv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qL,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),Vy=class extends Wv{constructor(e){super(),this._lView=e}onDestroy(e){return fS(this._lView,e),()=>hL(this._lView,e)}};function qL(){return new Vy(be())}var $i=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Nt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var Ly=class extends Oe{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,nS()&&(this.destroyRef=B(Wv,{optional:!0})??void 0,this.pendingTasks=B($i,{optional:!0})??void 0)}emit(e){let t=Me(null);try{super.next(e)}finally{Me(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ot&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ze=Ly;function Fh(...n){}function LS(n){let e,t;function r(){n=Fh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function oT(n){return queueMicrotask(()=>n()),()=>{n=Fh}}var Kv="isAngularZone",Vh=Kv+"_ID",HL=0,_e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=VS}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,KL(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Kv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,GL,Fh,Fh);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},GL={};function Qv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function WL(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){LS(()=>{n.callbackScheduled=!1,jy(n),n.isCheckStableRunning=!0,Qv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),jy(n)}function KL(n){let e=()=>{WL(n)},t=HL++;n._inner=n._inner.fork({name:"angular",properties:{[Kv]:!0,[Vh]:t,[Vh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(QL(c))return r.invokeTask(s,o,a,c);try{return aT(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),cT(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return aT(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!YL(c)&&e(),cT(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,jy(n),Qv(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function jy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function aT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function cT(n){n._nesting--,Qv(n)}var Lh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ze,this.onMicrotaskEmpty=new Ze,this.onStable=new Ze,this.onError=new Ze}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function QL(n){return jS(n,"__ignore_ng_zone__")}function YL(n){return jS(n,"__scheduler_tick__")}function jS(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function ZL(n="zone.js",e){return n==="noop"?new Lh:n==="zone.js"?new _e(e):n}var Yr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&py(e);for(;t&&py(t);)t=py(t);return t||null}},JL=new K("",{providedIn:"root",factory:()=>{let n=B(_e),e=B(Yr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function XL(){return fa(sn(),be())}function fa(n,e){return new Gt(rr(n,e))}var Gt=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=XL;let n=e;return n})();function ej(n){return n instanceof Gt?n.nativeElement:n}function tj(){return this._results[Symbol.iterator]()}var Uy=class n{get changes(){return this._changes??=new Ze}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=tj)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=bV(e);(this._changesDetected=!IV(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function US(n){return(n.flags&128)===128}var BS=new Map,nj=0;function rj(){return nj++}function ij(n){BS.set(n[nf],n)}function By(n){BS.delete(n[nf])}var uT="__ngContext__";function Vi(n,e){Ni(e)?(n[uT]=e[nf],ij(e)):n[uT]=e}function $S(n){return qS(n[bu])}function zS(n){return qS(n[tr])}function qS(n){for(;n!==null&&!ei(n);)n=n[tr];return n}var $y;function HS(n){$y=n}function sj(){if($y!==void 0)return $y;if(typeof document<"u")return document;throw new ie(210,!1)}var hf=new K("",{providedIn:"root",factory:()=>oj}),oj="ng",Yv=new K(""),Tt=new K("",{providedIn:"platform",factory:()=>"unknown"});var Zv=new K("",{providedIn:"root",factory:()=>sj().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var aj="h",cj="b";var uj=()=>null;function Jv(n,e,t=!1){return uj(n,e,t)}var GS=!1,lj=new K("",{providedIn:"root",factory:()=>GS});var hh;function dj(){if(hh===void 0&&(hh=null,An.trustedTypes))try{hh=An.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return hh}function ff(n){return dj()?.createHTML(n)||n}var fh;function hj(){if(fh===void 0&&(fh=null,An.trustedTypes))try{fh=An.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return fh}function lT(n){return hj()?.createScriptURL(n)||n}var Zr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${MT})`}},zy=class extends Zr{getTypeName(){return"HTML"}},qy=class extends Zr{getTypeName(){return"Style"}},Hy=class extends Zr{getTypeName(){return"Script"}},Gy=class extends Zr{getTypeName(){return"URL"}},Wy=class extends Zr{getTypeName(){return"ResourceURL"}};function ir(n){return n instanceof Zr?n.changingThisBreaksApplicationSecurity:n}function zi(n,e){let t=fj(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${MT})`)}return t===e}function fj(n){return n instanceof Zr&&n.getTypeName()||null}function WS(n){return new zy(n)}function KS(n){return new qy(n)}function QS(n){return new Hy(n)}function YS(n){return new Gy(n)}function ZS(n){return new Wy(n)}function pj(n){let e=new Qy(n);return gj()?new Ky(e):e}var Ky=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(ff(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Qy=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=ff(e),t}};function gj(){try{return!!new window.DOMParser().parseFromString(ff(""),"text/html")}catch{return!1}}var mj=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function pf(n){return n=String(n),n.match(mj)?n:"unsafe:"+n}function ti(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function xu(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var JS=ti("area,br,col,hr,img,wbr"),XS=ti("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),eA=ti("rp,rt"),yj=xu(eA,XS),vj=xu(XS,ti("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wj=xu(eA,ti("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),dT=xu(JS,vj,wj,yj),tA=ti("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),_j=ti("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ej=ti("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Ij=xu(tA,_j,Ej),bj=ti("script,style,template"),Yy=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=Tj(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=Cj(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=hT(e).toLowerCase();if(!dT.hasOwnProperty(t))return this.sanitizedSomething=!0,!bj.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!Ij.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;tA[a]&&(c=pf(c)),this.buf.push(" ",o,'="',fT(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=hT(e).toLowerCase();dT.hasOwnProperty(t)&&!JS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(fT(e))}};function Dj(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Cj(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw nA(e);return e}function Tj(n){let e=n.firstChild;if(e&&Dj(n,e))throw nA(e);return e}function hT(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function nA(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var Sj=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Aj=/([^\#-~ |!])/g;function fT(n){return n.replace(/&/g,"&amp;").replace(Sj,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(Aj,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var ph;function rA(n,e){let t=null;try{ph=ph||pj(n);let r=e?String(e):"";t=ph.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=ph.getInertBodyElement(r)}while(r!==s);let a=new Yy().sanitizeChildren(pT(t)||t);return ff(a)}finally{if(t){let r=pT(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function pT(n){return"content"in n&&xj(n)?n.content:null}function xj(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var yn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(yn||{});function dt(n){let e=sA();return e?e.sanitize(yn.URL,n)||"":zi(n,"URL")?ir(n):pf(vu(n))}function iA(n){let e=sA();if(e)return lT(e.sanitize(yn.RESOURCE_URL,n)||"");if(zi(n,"ResourceURL"))return lT(ir(n));throw new ie(904,!1)}function sA(){let n=be();return n&&n[_r].sanitizer}var Mj=/^>|^->|<!--|-->|--!>|<!-$/g,Rj=/(<|>)/g,kj="\u200B$1\u200B";function Nj(n){return n.replace(Mj,e=>e.replace(Rj,kj))}function oA(n){return n instanceof Function?n():n}function Pj(n){return(n??B(xn)).get(Tt)==="browser"}var Ir=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ir||{}),Oj;function Xv(n,e){return Oj(n,e)}function Qo(n,e,t,r,i){if(r!=null){let s,o=!1;ei(r)?s=r:Ni(r)&&(o=!0,r=r[Xr]);let a=Er(r);n===0&&t!==null?i==null?hA(e,t,a):jh(e,t,a,i||null,!0):n===1&&t!==null?jh(e,t,a,i||null,!0):n===2?Qj(e,a,o):n===3&&e.destroyNode(a),s!=null&&Zj(e,n,s,t,i)}}function Fj(n,e){return n.createText(e)}function Vj(n,e,t){n.setValue(e,t)}function Lj(n,e){return n.createComment(Nj(e))}function aA(n,e,t){return n.createElement(e,t)}function jj(n,e){cA(n,e),e[Xr]=null,e[pn]=null}function Uj(n,e,t,r,i,s){r[Xr]=i,r[pn]=e,mf(n,r,t,1,i,s)}function cA(n,e){e[_r].changeDetectionScheduler?.notify(9),mf(n,e,e[ct],2,null,null)}function Bj(n){let e=n[bu];if(!e)return gy(n[ye],n);for(;e;){let t=null;if(Ni(e))t=e[bu];else{let r=e[Sn];r&&(t=r)}if(!t){for(;e&&!e[tr]&&e!==n;)Ni(e)&&gy(e[ye],e),e=e[qt];e===null&&(e=n),Ni(e)&&gy(e[ye],e),t=e&&e[tr]}e=t}}function $j(n,e,t,r){let i=Sn+r,s=t.length;r>0&&(t[i-1][tr]=e),r<s-Sn?(e[tr]=t[i],UT(t,Sn+r,e)):(t.push(e),e[tr]=null),e[qt]=t;let o=e[Vs];o!==null&&t!==o&&uA(o,e);let a=e[Qr];a!==null&&a.insertView(n),Ry(e),e[ue]|=128}function uA(n,e){let t=n[ra],r=e[qt];if(Ni(r))n[ue]|=Rh.HasTransplantedViews;else{let i=r[qt][jn];e[jn]!==i&&(n[ue]|=Rh.HasTransplantedViews)}t===null?n[ra]=[e]:t.push(e)}function ew(n,e){let t=n[ra],r=t.indexOf(e);t.splice(r,1)}function Zy(n,e){if(n.length<=Sn)return;let t=Sn+e,r=n[t];if(r){let i=r[Vs];i!==null&&i!==n&&ew(i,r),e>0&&(n[t-1][tr]=r[tr]);let s=Th(n,Sn+e);jj(r[ye],r);let o=s[Qr];o!==null&&o.detachView(s[ye]),r[qt]=null,r[tr]=null,r[ue]&=-129}return r}function lA(n,e){if(!(e[ue]&256)){let t=e[ct];t.destroyNode&&mf(n,e,t,3,null,null),Bj(e)}}function gy(n,e){if(e[ue]&256)return;let t=Me(null);try{e[ue]&=-129,e[ue]|=256,e[Ln]&&zm(e[Ln]),qj(n,e),zj(n,e),e[ye].type===1&&e[ct].destroy();let r=e[Vs];if(r!==null&&ei(e[qt])){r!==e[qt]&&ew(r,e);let i=e[Qr];i!==null&&i.detachView(n)}By(e)}finally{Me(t)}}function zj(n,e){let t=n.cleanup,r=e[xh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[xh]=null);let i=e[ki];if(i!==null){e[ki]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function qj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Bs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];yr(4,a,c);try{c.call(a)}finally{yr(5,a,c)}}else{yr(4,i,s);try{s.call(i)}finally{yr(5,i,s)}}}}}function dA(n,e,t){return Hj(n,e.parent,t)}function Hj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Xr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===wr.None||s===wr.Emulated)return null}return rr(r,t)}}function jh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function hA(n,e,t){n.appendChild(e,t)}function gT(n,e,t,r,i){r!==null?jh(n,e,t,r,i):hA(n,e,t)}function fA(n,e){return n.parentNode(e)}function Gj(n,e){return n.nextSibling(e)}function pA(n,e,t){return Kj(n,e,t)}function Wj(n,e,t){return n.type&40?rr(n,t):null}var Kj=Wj,mT;function gf(n,e,t,r){let i=dA(n,r,e),s=e[ct],o=r.parent||e[pn],a=pA(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)gT(s,i,t[c],a,!1);else gT(s,i,t,a,!1);mT!==void 0&&mT(s,r,e,t,i)}function gu(n,e){if(e!==null){let t=e.type;if(t&3)return rr(e,n);if(t&4)return Jy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return gu(n,r);{let i=n[e.index];return ei(i)?Jy(-1,i):Er(i)}}else{if(t&128)return gu(n,e.next);if(t&32)return Xv(e,n)()||Er(n[e.index]);{let r=gA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=js(n[jn]);return gu(i,r)}else return gu(n,e.next)}}}return null}function gA(n,e){if(e!==null){let r=n[jn][pn],i=e.projection;return r.projection[i]}return null}function Jy(n,e){let t=Sn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return gu(r,i)}return e[Ls]}function Qj(n,e,t){n.removeChild(null,e,t)}function tw(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Vi(Er(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)tw(n,e,t.child,r,i,s,!1),Qo(e,n,i,a,s);else if(c&32){let l=Xv(t,r),d;for(;d=l();)Qo(e,n,i,d,s);Qo(e,n,i,a,s)}else c&16?mA(n,e,r,t,i,s):Qo(e,n,i,a,s);t=o?t.projectionNext:t.next}}function mf(n,e,t,r,i,s){tw(t,r,n.firstChild,e,i,s,!1)}function Yj(n,e,t){let r=e[ct],i=dA(n,t,e),s=t.parent||e[pn],o=pA(s,t,e);mA(r,0,e,t,i,o)}function mA(n,e,t,r,i,s){let o=t[jn],c=o[pn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Qo(e,n,i,d,s)}else{let l=c,d=o[qt];US(r)&&(l.flags|=128),tw(n,e,l,d,i,s,!0)}}function Zj(n,e,t,r,i){let s=t[Ls],o=Er(t);s!==o&&Qo(e,n,r,s,i);for(let a=Sn;a<t.length;a++){let c=t[a];mf(c[ye],c,n,e,r,s)}}function Jj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Ir.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ir.Important),n.setStyle(t,r,i,s))}}function Xj(n,e,t){n.setAttribute(e,"style",t)}function yA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function vA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Cy(n,e,r),i!==null&&yA(n,e,i),s!==null&&Xj(n,e,s)}var Bn={};function q(n=1){wA(wt(),be(),Bi()+n,!1)}function wA(n,e,t,r){if(!r)if((e[ue]&3)===3){let s=n.preOrderCheckHooks;s!==null&&_h(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Eh(e,s,0,t)}Us(t)}function H(n,e=Ie.Default){let t=be();if(t===null)return V(n,e);let r=sn();return NS(r,t,en(n),e)}function _A(){let n="invalid";throw new Error(n)}function EA(n,e,t,r,i,s){let o=Me(null);try{let a=null;i&Pi.SignalBased&&(a=e[r][Br]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Pi.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):sS(e,a,r,s)}finally{Me(o)}}function e2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Us(~i);else{let s=i,o=t[++r],a=t[++r];bL(o,s);let c=e[s];a(2,c)}}}finally{Us(-1)}}function yf(n,e,t,r,i,s,o,a,c,l,d){let h=e.blueprint.slice();return h[Xr]=i,h[ue]=r|4|128|8|64,(l!==null||n&&n[ue]&2048)&&(h[ue]|=2048),dS(h),h[qt]=h[ha]=n,h[nr]=t,h[_r]=o||n&&n[_r],h[ct]=a||n&&n[ct],h[na]=c||n&&n[na]||null,h[pn]=s,h[nf]=rj(),h[Iu]=d,h[rS]=l,h[jn]=e.type==2?n[jn]:h,h}function pa(n,e,t,r,i){let s=n.data[e];if(s===null)s=t2(n,e,t,r,i),IL()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=vL();s.injectorIndex=o===null?-1:o.injectorIndex}return Ws(s,!0),s}function t2(n,e,t,r,i){let s=yS(),o=Lv(),a=o?s:s&&s.parent,c=n.data[e]=a2(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function IA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function bA(n,e,t,r,i){let s=Bi(),o=r&2;try{Us(-1),o&&e.length>rn&&wA(n,e,rn,!1),yr(o?2:0,i),t(r,i)}finally{Us(s),yr(o?3:1,i)}}function nw(n,e,t){if(Ov(e)){let r=Me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Me(r)}}}function rw(n,e,t){gS()&&(f2(n,e,t,rr(t,e)),(t.flags&64)===64&&TA(n,e,t))}function iw(n,e,t=rr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function DA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=sw(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function sw(n,e,t,r,i,s,o,a,c,l,d){let h=rn+r,p=h+i,m=n2(h,p),_=typeof l=="function"?l():l;return m[ye]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function n2(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Bn);return t}function r2(n,e,t,r){let s=r.get(lj,GS)||t===wr.ShadowDom,o=n.selectRootElement(e,s);return i2(o),o}function i2(n){s2(n)}var s2=()=>null;function o2(n,e,t,r){let i=xA(e);i.push(t),n.firstCreatePass&&MA(n).push(r,i.length-1)}function a2(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return mS()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function yT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Pi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?vT(r,t,l,a,c):vT(r,t,l,a)}return r}function vT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function c2(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let h=s[d],p=t?t.get(h):null,m=p?p.inputs:null,_=p?p.outputs:null;c=yT(0,h.inputs,d,c,m),l=yT(1,h.outputs,d,l,_);let w=c!==null&&o!==null&&!kv(e)?I2(c,d,o):null;a.push(w)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function u2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ow(n,e,t,r,i,s,o,a){let c=rr(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(cw(n,t,d,r,i),rf(e)&&l2(t,e.index)):e.type&3?(r=u2(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function l2(n,e){let t=Ui(e,n);t[ue]&16||(t[ue]|=64)}function aw(n,e,t,r){if(gS()){let i=r===null?null:{"":-1},s=g2(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&CA(n,e,t,o,i,a),i&&m2(t,r,i)}t.mergedAttrs=_u(t.mergedAttrs,t.attrs)}function CA(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Oy(Oh(t,e),n,r[l].type);v2(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=IA(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=_u(t.mergedAttrs,d.hostAttrs),w2(n,t,e,c,d),y2(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}c2(n,t,s)}function d2(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;h2(o)!=a&&o.push(a),o.push(t,r,s)}}function h2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function f2(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;rf(t)&&_2(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Oh(t,e),Vi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=$s(e,n,a,t);if(Vi(l,e),o!==null&&E2(e,a-i,l,c,t,o),Fi(c)){let d=Ui(t.index,e);d[nr]=$s(e,n,a,t)}}}function TA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=DL();try{Us(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];ky(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&p2(c,l)}}finally{Us(-1),ky(o)}}function p2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function g2(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(HT(e,o.selectors,!1))if(r||(r=[]),Fi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Xy(n,e,c)}else r.unshift(o),Xy(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Xy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function m2(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ie(-301,!1);r.push(e[i],s)}}}function y2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Fi(e)&&(t[""]=n)}}function v2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function w2(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Fs(i.type,!0)),o=new Bs(s,Fi(i),H);n.blueprint[r]=o,t[r]=o,d2(n,e,r,IA(n,t,i.hostVars,Bn),i)}function _2(n,e,t){let r=rr(e,n),i=DA(t),s=n[_r].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=vf(n,yf(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function E2(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],h=o[a++];EA(r,t,c,l,d,h)}}function I2(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function SA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function AA(n,e){let t=n.contentQueries;if(t!==null){let r=Me(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];$v(s),a.contentQueries(2,e[o],o)}}}finally{Me(r)}}}function vf(n,e){return n[bu]?n[XC][tr]=e:n[bu]=e,n[XC]=e,e}function ev(n,e,t){$v(0);let r=Me(null);try{e(n,t)}finally{Me(r)}}function xA(n){return n[xh]??=[]}function MA(n){return n.cleanup??=[]}function RA(n,e){let t=n[na],r=t?t.get(Yr,null):null;r&&r.handleError(e)}function cw(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];EA(d,l,r,a,c,i)}}function kA(n,e,t){let r=uS(e,n);Vj(n[ct],r,t)}function b2(n,e){let t=Ui(e,n),r=t[ye];D2(r,t);let i=t[Xr];i!==null&&t[Iu]===null&&(t[Iu]=Jv(i,t[na])),uw(r,t,t[nr])}function D2(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function uw(n,e,t){zv(e);try{let r=n.viewQuery;r!==null&&ev(1,r,t);let i=n.template;i!==null&&bA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Qr]?.finishViewCreation(n),n.staticContentQueries&&AA(n,e),n.staticViewQueries&&ev(2,n.viewQuery,t);let s=n.components;s!==null&&C2(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ue]&=-5,qv()}}function C2(n,e){for(let t=0;t<e.length;t++)b2(n,e[t])}function NA(n,e,t,r){let i=Me(null);try{let s=e.tView,a=n[ue]&4096?4096:16,c=yf(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[Vs]=l;let d=n[Qr];return d!==null&&(c[Qr]=d.createEmbeddedView(s)),uw(s,c,t),c}finally{Me(i)}}function tv(n,e){return!e||e.firstChild===null||US(n)}function PA(n,e,t,r=!0){let i=e[ye];if($j(i,e,n,t),r){let o=Jy(t,n),a=e[ct],c=fA(a,n[Ls]);c!==null&&Uj(i,n[pn],a,e,c,o)}let s=e[Iu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Uh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Er(s)),ei(s)&&T2(s,r);let o=t.type;if(o&8)Uh(n,e,t.child,r);else if(o&32){let a=Xv(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=gA(e,t);if(Array.isArray(a))r.push(...a);else{let c=js(e[jn]);Uh(c[ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function T2(n,e){for(let t=Sn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&Uh(r[ye],r,i,e)}n[Ls]!==n[Xr]&&e.push(n[Ls])}var OA=[];function S2(n){return n[Ln]??A2(n)}function A2(n){let e=OA.pop()??Object.create(M2);return e.lView=n,e}function x2(n){n.lView[Ln]!==n&&(n.lView=null,OA.push(n))}var M2=ee(M({},ou),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{af(n.lView)},consumerOnSignalRead(){this.lView[Ln]=this}});function R2(n){let e=n[Ln]??Object.create(k2);return e.lView=n,e}var k2=ee(M({},ou),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=js(n.lView);for(;e&&!FA(e[ye]);)e=js(e);e&&hS(e)},consumerOnSignalRead(){this.lView[Ln]=this}});function FA(n){return n.type!==2}var N2=100;function VA(n,e=!0,t=0){let r=n[_r],i=r.rendererFactory,s=!1;s||i.begin?.();try{P2(n,t)}catch(o){throw e&&RA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function P2(n,e){let t=vS();try{tT(!0),nv(n,e);let r=0;for(;of(n);){if(r===N2)throw new ie(103,!1);r++,nv(n,1)}}finally{tT(t)}}function O2(n,e,t,r){let i=e[ue];if((i&256)===256)return;let s=!1,o=!1;!s&&e[_r].inlineEffectRunner?.flush(),zv(e);let a=!0,c=null,l=null;s||(FA(n)?(l=S2(e),c=Fd(l)):lC()===null?(a=!1,l=R2(e),c=Fd(l)):e[Ln]&&(zm(e[Ln]),e[Ln]=null));try{dS(e),EL(n.bindingStartIndex),t!==null&&bA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&_h(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Eh(e,m,0,null),dy(e,0)}if(o||F2(e),LA(e,0),n.contentQueries!==null&&AA(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&_h(e,m)}else{let m=n.contentHooks;m!==null&&Eh(e,m,1),dy(e,1)}e2(n,e);let h=n.components;h!==null&&UA(e,h,0);let p=n.viewQuery;if(p!==null&&ev(2,p,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&_h(e,m)}else{let m=n.viewHooks;m!==null&&Eh(e,m,2),dy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ly]){for(let m of e[ly])m();e[ly]=null}s||(e[ue]&=-73)}catch(d){throw s||af(e),d}finally{l!==null&&(Bm(l,c),a&&x2(l)),qv()}}function LA(n,e){for(let t=$S(n);t!==null;t=zS(t))for(let r=Sn;r<t.length;r++){let i=t[r];jA(i,e)}}function F2(n){for(let e=$S(n);e!==null;e=zS(e)){if(!(e[ue]&Rh.HasTransplantedViews))continue;let t=e[ra];for(let r=0;r<t.length;r++){let i=t[r];hS(i)}}}function V2(n,e,t){let r=Ui(e,n);jA(r,t)}function jA(n,e){Vv(n)&&nv(n,e)}function nv(n,e){let r=n[ye],i=n[ue],s=n[Ln],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&$m(s)),o||=!1,s&&(s.dirty=!1),n[ue]&=-9217,o)O2(r,n,r.template,n[nr]);else if(i&8192){LA(n,1);let a=r.components;a!==null&&UA(n,a,1)}}function UA(n,e,t){for(let r=0;r<e.length;r++)V2(n,e[r],t)}function lw(n,e){let t=vS()?64:1088;for(n[_r].changeDetectionScheduler?.notify(e);n;){n[ue]|=t;let r=js(n);if(xy(n)&&!r)return n;n=r}return null}var zs=class{get rootNodes(){let e=this._lView,t=e[ye];return Uh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[nr]}set context(e){this._lView[nr]=e}get destroyed(){return(this._lView[ue]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[qt];if(ei(e)){let t=e[Mh],r=t?t.indexOf(this):-1;r>-1&&(Zy(e,r),Th(t,r))}this._attachedToViewContainer=!1}lA(this._lView[ye],this._lView)}onDestroy(e){fS(this._lView,e)}markForCheck(){lw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ue]&=-129}reattach(){Ry(this._lView),this._lView[ue]|=128}detectChanges(){this._lView[ue]|=1024,VA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=xy(this._lView),t=this._lView[Vs];t!==null&&!e&&ew(t,this._lView),cA(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=xy(this._lView),r=this._lView[Vs];r!==null&&!t&&uA(r,this._lView),Ry(this._lView)}},qs=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=U2;let n=e;return n})(),L2=qs,j2=class extends L2{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=NA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new zs(i)}};function U2(){return wf(sn(),be())}function wf(n,e){return n.type&4?new j2(e,n,fa(n,e)):null}var VZ=new RegExp(`^(\\d+)*(${cj}|${aj})*(.*)`);var B2=()=>null;function rv(n,e){return B2(n,e)}var sa=class{},BA=new K("",{providedIn:"root",factory:()=>!1});var $A=new K(""),zA=new K(""),iv=class{},Bh=class{};function $2(n){let e=Error(`No component factory found for ${tn(n)}.`);return e[z2]=n,e}var z2="ngComponent";var sv=class{resolveComponentFactory(e){throw $2(e)}},kw=class kw{};kw.NULL=new sv;var oa=kw,aa=class{},br=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>q2();let n=e;return n})();function q2(){let n=be(),e=sn(),t=Ui(e.index,n);return(Ni(t)?t:n)[ct]}var H2=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();function $h(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Ey(i,a);else if(s==2){let c=a,l=e[++o];r=Ey(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var zh=class extends oa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Oi(e);return new ca(t,this.ngModule)}};function wT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Pi.None;e?t.push({propName:o,templateName:r,isSignal:(a&Pi.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function G2(n){let e=n.toLowerCase();return e==="svg"?aL:e==="math"?cL:null}var ca=class extends Bh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=wT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return wT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=jV(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Me(null);try{i=i||this.ngModule;let o=i instanceof nn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Ny(e,o):e,c=a.get(aa,null);if(c===null)throw new ie(407,!1);let l=a.get(H2,null),d=a.get(sa,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=r?r2(p,r,this.componentDef.encapsulation,a):aA(p,m,G2(m)),w=512;this.componentDef.signals?w|=4096:this.componentDef.onPush||(w|=16);let E=null;_!==null&&(E=Jv(_,a,!0));let R=sw(0,null,null,1,0,null,null,null,null,null,null),O=yf(null,R,null,w,null,null,h,p,a,null,E);zv(O);let F,z,X=null;try{let Q=this.componentDef,D,v=null;Q.findHostDirectiveDefs?(D=[],v=new Map,Q.findHostDirectiveDefs(Q,D,v),D.push(Q)):D=[Q];let I=W2(O,_);X=K2(I,_,Q,D,O,h,p),z=lS(R,rn),_&&Z2(p,Q,_,r),t!==void 0&&J2(z,this.ngContentSelectors,t),F=Y2(X,Q,D,v,O,[X2]),uw(R,O,null)}catch(Q){throw X!==null&&By(X),By(O),Q}finally{qv()}return new ov(this.componentType,F,fa(z,O),O,z)}finally{Me(s)}}},ov=class extends iv{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new zs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;cw(s[ye],s,i,e,t),this.previousInputValues.set(e,t);let o=Ui(this._tNode.index,s);lw(o,1)}}get injector(){return new Os(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function W2(n,e){let t=n[ye],r=rn;return n[r]=e,pa(t,r,2,"#host",null)}function K2(n,e,t,r,i,s,o){let a=i[ye];Q2(r,n,e,o);let c=null;e!==null&&(c=Jv(e,i[na]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let h=yf(i,DA(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Xy(a,n,r.length-1),vf(i,h),i[n.index]=h}function Q2(n,e,t,r){for(let i of n)e.mergedAttrs=_u(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&($h(e,e.mergedAttrs,!0),t!==null&&vA(r,t,e))}function Y2(n,e,t,r,i,s){let o=sn(),a=i[ye],c=rr(o,i);CA(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let h=o.directiveStart+d,p=$s(i,a,h,o);Vi(p,i)}TA(a,i,o),c&&Vi(c,i);let l=$s(i,a,o.directiveStart+o.componentOffset,o);if(n[nr]=i[nr]=l,s!==null)for(let d of s)d(l,e);return nw(a,o,i),l}function Z2(n,e,t,r){if(r)Cy(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=UV(e.selectors[0]);i&&Cy(n,t,i),s&&s.length>0&&yA(n,t,s.join(" "))}}function J2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function X2(){let n=sn();df(be()[ye],n)}var vn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eU;let n=e;return n})();function eU(){let n=sn();return HA(n,be())}var tU=vn,qA=class extends tU{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return fa(this._hostTNode,this._hostLView)}get injector(){return new Os(this._hostTNode,this._hostLView)}get parentInjector(){let e=Gv(this._hostTNode,this._hostLView);if(SS(e)){let t=Nh(e,this._hostLView),r=kh(e),i=t[ye].data[r+8];return new Os(i,t)}else return new Os(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=_T(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Sn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=rv(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,tv(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!rL(e),a;if(o)a=t;else{let _=t||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let c=o?e:new ca(Oi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let w=(o?l:this.parentInjector).get(nn,null);w&&(s=w)}let d=Oi(c.componentType??{}),h=rv(this._lContainer,d?.id??null),p=h?.firstChild??null,m=c.create(l,i,p,s);return this.insertImpl(m.hostView,a,tv(this._hostTNode,h)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(lL(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[qt],l=new qA(c,c[pn],c[qt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return PA(o,i,s,r),e.attachToViewContainerRef(),UT(my(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=_T(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Zy(this._lContainer,t);r&&(Th(my(this._lContainer),t),lA(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=Zy(this._lContainer,t);return r&&Th(my(this._lContainer),t)!=null?new zs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function _T(n){return n[Mh]}function my(n){return n[Mh]||(n[Mh]=[])}function HA(n,e){let t,r=e[n.index];return ei(r)?t=r:(t=SA(r,e,null,n),e[n.index]=t,vf(e,t)),rU(t,e,n,r),new qA(t,n,e)}function nU(n,e){let t=n[ct],r=t.createComment(""),i=rr(e,n),s=fA(t,i);return jh(t,s,r,Gj(t,i),!1),r}var rU=oU,iU=()=>!1;function sU(n,e,t){return iU(n,e,t)}function oU(n,e,t,r){if(n[Ls])return;let i;t.type&8?i=Er(r):i=nU(e,t),n[Ls]=i}var av=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},cv=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)dw(e,t).matches!==null&&this.queries[t].setDirty()}},uv=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=pU(e):this.predicate=e}},lv=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},dv=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,aU(t,s)),this.matchTNodeWithReadOption(e,t,Ih(t,e,s,!1,!1))}else r===qs?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ih(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Gt||i===vn||i===qs&&t.type&4)this.addMatch(t.index,-2);else{let s=Ih(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function aU(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function cU(n,e){return n.type&11?fa(n,e):n.type&4?wf(n,e):null}function uU(n,e,t,r){return t===-1?cU(e,n):t===-2?lU(n,e,r):$s(n,n[ye],t,e)}function lU(n,e,t){if(t===Gt)return fa(e,n);if(t===qs)return wf(e,n);if(t===vn)return HA(e,n)}function GA(n,e,t,r){let i=e[Qr].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let d=s[l];a.push(uU(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function hv(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=GA(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],d=e[-c];for(let h=Sn;h<d.length;h++){let p=d[h];p[Vs]===p[qt]&&hv(p[ye],p,l,r)}if(d[ra]!==null){let h=d[ra];for(let p=0;p<h.length;p++){let m=h[p];hv(m[ye],m,l,r)}}}}}return r}function dU(n,e){return n[Qr].queries[e].queryList}function hU(n,e,t){let r=new Uy((t&4)===4);return o2(n,e,r,r.destroy),(e[Qr]??=new cv).queries.push(new av(r))-1}function fU(n,e,t){let r=wt();return r.firstCreatePass&&(gU(r,new uv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),hU(r,be(),e)}function pU(n){return n.split(",").map(e=>e.trim())}function gU(n,e,t){n.queries===null&&(n.queries=new lv),n.queries.track(new dv(e,t))}function dw(n,e){return n.queries.getByIndex(e)}function mU(n,e){let t=n[ye],r=dw(t,e);return r.crossesNgTemplate?hv(t,n,e,[]):GA(t,n,r,e)}var ET=new Set;function ga(n){ET.has(n)||(ET.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function yU(n){return typeof n=="function"&&n[Br]!==void 0}function Mu(n,e){ga("NgSignals");let t=EC(n),r=t[Br];return e?.equal&&(r.equal=e.equal),t.set=i=>qm(r,i),t.update=i=>IC(r,i),t.asReadonly=vU.bind(t),t}function vU(){let n=this[Br];if(n.readonlyFn===void 0){let e=()=>this();e[Br]=n,n.readonlyFn=e}return n.readonlyFn}function WA(n){return yU(n)&&typeof n.set=="function"}function wU(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(bU))}return s}return qh.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,p)=>{a.push(""),o.push(r(h).then(m=>{a[l+p]=m,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>DU(s));e.push(c)}),EU(),Promise.all(e).then(()=>{})}var qh=new Map,_U=new Set;function EU(){let n=qh;return qh=new Map,n}function IU(){return qh.size===0}function bU(n){return typeof n=="string"?n:n.text()}function DU(n){_U.delete(n)}function CU(n){return Object.getPrototypeOf(n.prototype).constructor}function _t(n){let e=CU(n.type),t=!0,r=[n];for(;e;){let i;if(Fi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=gh(n.inputs),o.inputTransforms=gh(n.inputTransforms),o.declaredInputs=gh(n.declaredInputs),o.outputs=gh(n.outputs);let a=i.hostBindings;a&&MU(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&AU(n,c),l&&xU(n,l),TU(n,i),rV(n.outputs,i.outputs),Fi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===_t&&(t=!1)}}e=Object.getPrototypeOf(e)}SU(r)}function TU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function SU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=_u(i.hostAttrs,t=_u(t,i.hostAttrs))}}function gh(n){return n===Xo?{}:n===fn?[]:n}function AU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function xU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function MU(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Li=class{},Du=class{};var Hh=class extends Li{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new zh(this);let s=QT(e);this._bootstrapComponents=oA(s.bootstrap),this._r3Injector=FS(e,t,[{provide:Li,useValue:this},{provide:oa,useValue:this.componentFactoryResolver},...r],tn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Gh=class extends Du{constructor(e){super(),this.moduleType=e}create(e){return new Hh(this.moduleType,e,[])}};function RU(n,e,t){return new Hh(n,e,t,!1)}var fv=class extends Li{constructor(e){super(),this.componentFactoryResolver=new zh(this),this.instance=null;let t=new Eu([...e.providers,{provide:Li,useValue:this},{provide:oa,useValue:this.componentFactoryResolver}],e.parent||Pv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _f(n,e,t=null){return new fv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function KA(n){return hw(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function kU(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function hw(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function fw(n,e,t){return n[e]=t}function Jr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function pw(n,e,t,r){let i=Jr(n,e,t);return Jr(n,e+1,r)||i}function NU(n,e,t,r,i){let s=pw(n,e,t,r);return Jr(n,e+2,i)||s}function PU(n){return(n.flags&32)===32}function OU(n,e,t,r,i,s,o,a,c){let l=e.consts,d=pa(e,n,4,o||null,a||null);aw(e,t,d,ia(l,c)),df(e,d);let h=d.tView=sw(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function QA(n,e,t,r,i,s,o,a,c,l){let d=t+rn,h=e.firstCreatePass?OU(d,e,n,r,i,s,o,a,c):e.data[d];Ws(h,!1);let p=FU(e,n,h,t);uf()&&gf(e,n,p,h),Vi(p,n);let m=SA(p,n,p,h);return n[d]=m,vf(n,m),sU(m,h,n),sf(h)&&rw(e,n,h),c!=null&&iw(n,h,l),h}function Ve(n,e,t,r,i,s,o,a){let c=be(),l=wt(),d=ia(l.consts,s);return QA(c,l,n,e,t,r,i,d,o,a),Ve}var FU=VU;function VU(n,e,t,r){return lf(!0),e[ct].createComment("")}var Yo=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Yo||{}),YA=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})(),Ps=class Ps{constructor(){this.ngZone=B(_e),this.scheduler=B(sa),this.errorHandler=B(Yr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Ps.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Ps.PHASES=[Yo.EarlyRead,Yo.Write,Yo.MixedReadWrite,Yo.Read],Ps.\u0275prov=W({token:Ps,providedIn:"root",factory:()=>new Ps});var pv=Ps,gv=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function gw(n,e){!e?.injector&&tL(gw);let t=e?.injector??B(xn);return Pj(t)?(ga("NgAfterNextRender"),jU(n,t,e,!0)):UU}function LU(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function jU(n,e,t,r){let i=e.get(YA);i.impl??=e.get(pv);let s=t?.phase??Yo.MixedReadWrite,o=new gv(i.impl,LU(n,s),r,e.get(Wv));return i.impl.register(o),o}var UU={destroy(){}};function mw(n,e,t,r){return Jr(n,Uv(),t)?e+vu(t)+r:Bn}function BU(n,e,t,r,i,s){let o=_L(),a=pw(n,o,t,i);return Bv(2),a?e+vu(t)+r+vu(i)+s:Bn}function mh(n,e){return n<<17|e<<2}function Hs(n){return n>>17&32767}function $U(n){return(n&2)==2}function zU(n,e){return n&131071|e<<17}function mv(n){return n|2}function ua(n){return(n&131068)>>2}function yy(n,e){return n&-131069|e<<2}function qU(n){return(n&1)===1}function yv(n){return n|1}function HU(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Hs(o),c=ua(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||Su(h,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let p=Hs(n[a+1]);n[r+1]=mh(p,a),p!==0&&(n[p+1]=yy(n[p+1],r)),n[a+1]=zU(n[a+1],r)}else n[r+1]=mh(a,0),a!==0&&(n[a+1]=yy(n[a+1],r)),a=r;else n[r+1]=mh(c,0),a===0?a=r:n[c+1]=yy(n[c+1],r),c=r;l&&(n[r+1]=mv(n[r+1])),IT(n,d,r,!0),IT(n,d,r,!1),GU(e,d,n,r,s),o=mh(a,c),s?e.classBindings=o:e.styleBindings=o}function GU(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Su(s,e)>=0&&(t[r+1]=yv(t[r+1]))}function IT(n,e,t,r){let i=n[t+1],s=e===null,o=r?Hs(i):ua(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];WU(c,e)&&(a=!0,n[o+1]=r?yv(l):mv(l)),o=r?Hs(l):ua(l)}a&&(n[t+1]=r?mv(i):yv(i))}function WU(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Su(n,e)>=0:!1}var er={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function KU(n){return n.substring(er.key,er.keyEnd)}function QU(n){return YU(n),ZA(n,JA(n,0,er.textEnd))}function ZA(n,e){let t=er.textEnd;return t===e?-1:(e=er.keyEnd=ZU(n,er.key=e,t),JA(n,e,t))}function YU(n){er.key=0,er.keyEnd=0,er.value=0,er.valueEnd=0,er.textEnd=n.length}function JA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function ZU(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function ae(n,e,t){let r=be(),i=Uv();if(Jr(r,i,e)){let s=wt(),o=Hv();ow(s,o,r,n,e,r[ct],t,!1)}return ae}function vv(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";cw(n,t,s[o],o,r)}function ma(n,e,t){return XA(n,e,t,!1),ma}function ya(n,e){return XA(n,e,null,!0),ya}function JU(n,e){for(let t=QU(e);t>=0;t=ZA(e,t))Rv(n,KU(e),!0)}function XA(n,e,t,r){let i=be(),s=wt(),o=Bv(2);if(s.firstUpdatePass&&tx(s,n,o,r),e!==Bn&&Jr(i,o,e)){let a=s.data[Bi()];nx(s,a,i,i[ct],n,i[o+1]=oB(e,t),r,o)}}function XU(n,e,t,r){let i=wt(),s=Bv(2);i.firstUpdatePass&&tx(i,null,s,r);let o=be();if(t!==Bn&&Jr(o,s,t)){let a=i.data[Bi()];if(rx(a,r)&&!ex(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=Ey(c,t||"")),vv(i,a,o,t,r)}else sB(i,a,o,o[ct],o[s+1],o[s+1]=iB(n,e,t),r,s)}}function ex(n,e){return e>=n.expandoStartIndex}function tx(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Bi()],o=ex(n,t);rx(s,r)&&e===null&&!o&&(e=!1),e=eB(i,s,e,r),HU(i,s,e,t,o,r)}}function eB(n,e,t,r){let i=CL(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=vy(null,n,e,t,r),t=Cu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=vy(i,n,e,t,r),s===null){let c=tB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=vy(null,n,e,c[1],r),c=Cu(c,e.attrs,r),nB(n,e,r,c))}else s=rB(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function tB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ua(r)!==0)return n[Hs(r)]}function nB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Hs(i)]=r}function rB(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Cu(r,o,t)}return Cu(r,e.attrs,t)}function vy(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Cu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Cu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Rv(n,o,t?!0:e[++s]))}return n===void 0?null:n}function iB(n,e,t){if(t==null||t==="")return fn;let r=[],i=ir(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function sB(n,e,t,r,i,s,o,a){i===Bn&&(i=fn);let c=0,l=0,d=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;d!==null||h!==null;){let p=c<i.length?i[c+1]:void 0,m=l<s.length?s[l+1]:void 0,_=null,w;d===h?(c+=2,l+=2,p!==m&&(_=h,w=m)):h===null||d!==null&&d<h?(c+=2,_=d):(l+=2,_=h,w=m),_!==null&&nx(n,e,t,r,_,w,o,a),d=c<i.length?i[c]:null,h=l<s.length?s[l]:null}}function nx(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=qU(l)?bT(c,e,t,i,ua(l),o):void 0;if(!Wh(d)){Wh(s)||$U(l)&&(s=bT(c,null,t,i,a,o));let h=uS(Bi(),t);Jj(r,o,h,i,s)}}function bT(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,h=d===null,p=t[i+1];p===Bn&&(p=h?fn:void 0);let m=h?cy(p,r):d===r?p:void 0;if(l&&!Wh(m)&&(m=cy(c,r)),Wh(m)&&(a=m,o))return a;let _=n[i+1];i=o?Hs(_):ua(_)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=cy(c,r))}return a}function Wh(n){return n!==void 0}function oB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=tn(ir(n)))),n}function rx(n,e){return(n.flags&(e?8:16))!==0}function Ef(n,e,t){let r=be(),i=mw(r,n,e,t);XU(Rv,JU,i,!0)}function aB(n,e,t,r,i,s){let o=e.consts,a=ia(o,i),c=pa(e,n,2,r,a);return aw(e,t,c,ia(o,s)),c.attrs!==null&&$h(c,c.attrs,!1),c.mergedAttrs!==null&&$h(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function L(n,e,t,r){let i=be(),s=wt(),o=rn+n,a=i[ct],c=s.firstCreatePass?aB(o,s,i,e,t,r):s.data[o],l=cB(s,i,c,a,e,n);i[o]=l;let d=sf(c);return Ws(c,!0),vA(a,l,c),!PU(c)&&uf()&&gf(s,i,l,c),fL()===0&&Vi(l,i),pL(),d&&(rw(s,i,c),nw(s,c,i)),r!==null&&iw(i,c),L}function $(){let n=sn();Lv()?jv():(n=n.parent,Ws(n,!1));let e=n;mL(e)&&yL(),gL();let t=wt();return t.firstCreatePass&&(df(t,n),Ov(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&kL(e)&&vv(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NL(e)&&vv(t,e,be(),e.stylesWithoutHost,!1),$}function ve(n,e,t,r){return L(n,e,t,r),$(),ve}var cB=(n,e,t,r,i,s)=>(lf(!0),aA(r,i,AL()));function uB(n,e,t,r,i){let s=e.consts,o=ia(s,r),a=pa(e,n,8,"ng-container",o);o!==null&&$h(a,o,!0);let c=ia(s,i);return aw(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function yw(n,e,t){let r=be(),i=wt(),s=n+rn,o=i.firstCreatePass?uB(s,i,r,e,t):i.data[s];Ws(o,!0);let a=lB(i,r,o,n);return r[s]=a,uf()&&gf(i,r,a,o),Vi(a,r),sf(o)&&(rw(i,r,o),nw(i,o,r)),t!=null&&iw(r,o),yw}function vw(){let n=sn(),e=wt();return Lv()?jv():(n=n.parent,Ws(n,!1)),e.firstCreatePass&&(df(e,n),Ov(n)&&e.queries.elementEnd(n)),vw}var lB=(n,e,t,r)=>(lf(!0),Lj(e[ct],""));function ni(){return be()}var Kh="en-US";var dB=Kh;function hB(n){typeof n=="string"&&(dB=n.toLowerCase().replace(/_/g,"-"))}var fB=(n,e,t)=>{};function tt(n,e,t,r){let i=be(),s=wt(),o=sn();return ix(s,i,i[ct],o,n,e,r),tt}function pB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[xh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function ix(n,e,t,r,i,s,o){let a=sf(r),l=n.firstCreatePass&&MA(n),d=e[nr],h=xA(e),p=!0;if(r.type&3||o){let w=rr(r,e),E=o?o(w):w,R=h.length,O=o?z=>o(Er(z[r.index])):r.index,F=null;if(!o&&a&&(F=pB(n,e,i,r.index)),F!==null){let z=F.__ngLastListenerFn__||F;z.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,p=!1}else{s=CT(r,e,d,s),fB(w,i,s);let z=t.listen(E,i,s);h.push(s,z),l&&l.push(i,O,R,R+1)}}else s=CT(r,e,d,s);let m=r.outputs,_;if(p&&m!==null&&(_=m[i])){let w=_.length;if(w)for(let E=0;E<w;E+=2){let R=_[E],O=_[E+1],X=e[R][O].subscribe(s),Q=h.length;h.push(s,X),l&&l.push(i,r.index,Q,-(Q+1))}}}function DT(n,e,t,r){let i=Me(null);try{return yr(6,e,t),t(r)!==!1}catch(s){return RA(n,s),!1}finally{yr(7,e,t),Me(i)}}function CT(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Ui(n.index,e):e;lw(o,5);let a=DT(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=DT(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function De(n=1){return SL(n)}function gB(n,e){let t=null,r=PV(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?HT(n,s,!0):VV(r,s))return i}return t}function sx(n){let e=be()[jn][pn];if(!e.projection){let t=n?n.length:1,r=e.projection=DV(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?gB(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function ox(n,e=0,t,r,i,s){let o=be(),a=wt(),c=r?n+1:null;c!==null&&QA(o,a,c,r,i,s,null,t);let l=pa(a,rn+n,16,null,t||null);l.projection===null&&(l.projection=e),jv();let h=!o[Iu]||mS();o[jn][pn].projection[l.projection]===null&&c!==null?mB(o,a,c):h&&(l.flags&32)!==32&&Yj(a,o,l)}function mB(n,e,t){let r=rn+t,i=e.data[r],s=n[r],o=rv(s,i.tView.ssrId),a=NA(n,i,void 0,{dehydratedView:o});PA(s,a,0,tv(i,o))}function Mn(n,e,t){return If(n,"",e,"",t),Mn}function If(n,e,t,r,i){let s=be(),o=mw(s,e,t,r);if(o!==Bn){let a=wt(),c=Hv();ow(a,c,s,n,o,s[ct],i,!1)}return If}function ax(n,e,t){fU(n,e,t)}function ww(n){let e=be(),t=wt(),r=wS();$v(r+1);let i=dw(t,r);if(n.dirty&&uL(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=mU(e,r);n.reset(s,ej),n.notifyOnChanges()}return!0}return!1}function _w(){return dU(be(),wS())}function yB(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function bf(n){let e=wL();return Fv(e,rn+n)}function G(n,e=""){let t=be(),r=wt(),i=n+rn,s=r.firstCreatePass?pa(r,i,1,e,null):r.data[i],o=vB(r,t,s,e,n);t[i]=o,uf()&&gf(r,t,o,s),Ws(s,!1)}var vB=(n,e,t,r,i)=>(lf(!0),Fj(e[ct],r));function ze(n){return Ot("",n,""),ze}function Ot(n,e,t){let r=be(),i=mw(r,n,e,t);return i!==Bn&&kA(r,Bi(),i),Ot}function Df(n,e,t,r,i){let s=be(),o=BU(s,n,e,t,r,i);return o!==Bn&&kA(s,Bi(),o),Df}function Ew(n,e,t){WA(e)&&(e=e());let r=be(),i=Uv();if(Jr(r,i,e)){let s=wt(),o=Hv();ow(s,o,r,n,e,r[ct],t,!1)}return Ew}function cx(n,e){let t=WA(n);return t&&n.set(e),t}function Iw(n,e){let t=be(),r=wt(),i=sn();return ix(r,t,t[ct],i,n,e),Iw}function wB(n,e,t){let r=wt();if(r.firstCreatePass){let i=Fi(n);wv(t,r.data,r.blueprint,i,!0),wv(e,r.data,r.blueprint,i,!1)}}function wv(n,e,t,r,i){if(n=en(n),Array.isArray(n))for(let s=0;s<n.length;s++)wv(n[s],e,t,r,i);else{let s=wt(),o=be(),a=sn(),c=ta(n)?n:en(n.provide),l=tS(n),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(ta(n)||!n.multi){let m=new Bs(l,i,H),_=_y(c,e,i?d:d+p,h);_===-1?(Oy(Oh(a,o),s,c),wy(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[_]=m,o[_]=m)}else{let m=_y(c,e,d+p,h),_=_y(c,e,d,d+p),w=m>=0&&t[m],E=_>=0&&t[_];if(i&&!E||!i&&!w){Oy(Oh(a,o),s,c);let R=IB(i?EB:_B,t.length,i,r,l);!i&&E&&(t[_].providerFactory=R),wy(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(R),o.push(R)}else{let R=ux(t[i?_:m],l,!i&&r);wy(s,n,m>-1?m:_,R)}!i&&r&&E&&t[_].componentProviders++}}}function wy(n,e,t,r){let i=ta(e),s=KV(e);if(i||s){let c=(s?en(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function ux(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function _y(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function _B(n,e,t,r){return _v(this.multi,[])}function EB(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=$s(t,t[ye],this.providerFactory.index,r);s=a.slice(0,o),_v(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],_v(i,s);return s}function _v(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function IB(n,e,t,r,i){let s=new Bs(n,t,H);return s.multi=[],s.index=e,s.componentProviders=0,ux(s,i,r&&!t),s}function Cf(n,e=[]){return t=>{t.providersResolver=(r,i)=>wB(r,i?i(n):n,e)}}var bB=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=JT(!1,r.type),s=i.length>0?_f([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=W({token:e,providedIn:"environment",factory:()=>new e(V(nn))});let n=e;return n})();function Ru(n){ga("NgStandalone"),n.getStandaloneInjector=e=>e.get(bB).getOrCreateStandaloneInjector(n)}function lx(n,e,t){let r=n.\u0275cmp;r.directiveDefs=Ah(e,!1),r.pipeDefs=Ah(t,!0)}function Tf(n,e,t,r){return dx(be(),cf(),n,e,t,r)}function Sf(n,e,t,r,i){return DB(be(),cf(),n,e,t,r,i)}function bw(n,e){let t=n[e];return t===Bn?void 0:t}function dx(n,e,t,r,i,s){let o=e+t;return Jr(n,o,i)?fw(n,o+1,s?r.call(s,i):r(i)):bw(n,o+1)}function DB(n,e,t,r,i,s,o){let a=e+t;return pw(n,a,i,s)?fw(n,a+2,o?r.call(o,i,s):r(i,s)):bw(n,a+2)}function CB(n,e,t,r,i,s,o,a){let c=e+t;return NU(n,c,i,s,o)?fw(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):bw(n,c+3)}function Ft(n,e){let t=wt(),r,i=n+rn;t.firstCreatePass?(r=TB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Fs(r.type,!0)),o,a=hn(H);try{let c=Ph(!1),l=s();return Ph(c),yB(t,be(),i,l),l}finally{hn(a)}}function TB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Rn(n,e,t){let r=n+rn,i=be(),s=Fv(i,r);return hx(i,r)?dx(i,cf(),e,s.transform,t,s):s.transform(t)}function va(n,e,t,r,i){let s=n+rn,o=be(),a=Fv(o,s);return hx(o,s)?CB(o,cf(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function hx(n,e){return n[ye].data[e].pure}function Af(n,e){return wf(n,e)}var yh=null;function SB(n){yh!==null&&(n.defaultEncapsulation!==yh.defaultEncapsulation||n.preserveWhitespaces!==yh.preserveWhitespaces)||(yh=n)}var xf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var Dw=new K(""),ku=new K(""),Mf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Cw||(AB(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(V(_e),V(Rf),V(ku))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Rf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Cw?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function AB(n){Cw=n}var Cw;function qi(n){return!!n&&typeof n.then=="function"}function Tw(n){return!!n&&typeof n.subscribe=="function"}var wa=new K(""),fx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=B(wa,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(qi(o))r.push(o);else if(Tw(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),kf=new K("");function xB(){_C(()=>{throw new ie(600,!1)})}function MB(n){return n.isBoundToModule}var RB=10;function kB(n,e,t){try{let r=t();return qi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function px(n,e){return Array.isArray(e)?e.reduce(px,n):M(M({},n),e)}var ri=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(JL),this.afterRenderManager=B(YA),this.zonelessEnabled=B(BA),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Oe,this.afterTick=new Oe,this.componentTypes=[],this.components=[],this.isStable=B($i).hasPendingTasks.pipe(re(r=>!r)),this._injector=B(nn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Bh;if(!this._injector.get(fx).done){let m=!s&&KT(r),_=!1;throw new ie(405,_)}let a;s?a=r:a=this._injector.get(oa).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=MB(a)?void 0:this._injector.get(Li),l=i||a.selector,d=a.create(xn.NULL,[],l,c),h=d.location.nativeElement,p=d.injector.get(Dw,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),bh(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ie(101,!1);let r=Me(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Me(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(aa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<RB;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)NB(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>of(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;bh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(kf,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>bh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ie(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function bh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function NB(n,e,t,r){if(!t&&!of(n))return;VA(n,e,t&&!r?0:1)}var Ev=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Nf=(()=>{let e=class e{compileModuleSync(r){return new Gh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=QT(r),o=oA(s.declarations).reduce((a,c)=>{let l=Oi(c);return l&&a.push(new ca(l)),a},[]);return new Ev(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),PB=new K("");function OB(n,e,t){let r=new Gh(t);return Promise.resolve(r)}function TT(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var FB=(()=>{let e=class e{constructor(){this.zone=B(_e),this.changeDetectionScheduler=B(sa),this.applicationRef=B(ri)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function VB({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _e(ee(M({},gx()),{scheduleInRootZone:t})),[{provide:_e,useFactory:n},{provide:ea,multi:!0,useFactory:()=>{let r=B(FB,{optional:!0});return()=>r.initialize()}},{provide:ea,multi:!0,useFactory:()=>{let r=B(LB);return()=>{r.initialize()}}},e===!0?{provide:$A,useValue:!0}:[],{provide:zA,useValue:t??VS}]}function gx(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var LB=(()=>{let e=class e{constructor(){this.subscription=new ot,this.initialized=!1,this.zone=B(_e),this.pendingTasks=B($i)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var jB=(()=>{let e=class e{constructor(){this.appRef=B(ri),this.taskService=B($i),this.ngZone=B(_e),this.zonelessEnabled=B(BA),this.disableScheduling=B($A,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ot,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(zA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Lh||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?oT:LS;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,oT(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function UB(){return typeof $localize<"u"&&$localize.locale||Kh}var Sw=new K("",{providedIn:"root",factory:()=>B(Sw,Ie.Optional|Ie.SkipSelf)||UB()});var Aw=new K("");function vh(n){return!!n.platformInjector}function BB(n){let e=vh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_e);return t.run(()=>{vh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Yr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),vh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Aw);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{bh(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return kB(r,t,()=>{let s=e.get(fx);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Sw,Kh);if(hB(o||Kh),vh(n)){let a=e.get(ri);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return $B(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function $B(n,e){let t=n.injector.get(ri);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ie(-403,!1);e.push(n)}var mx=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=i?.scheduleInRootZone,o=()=>ZL(i?.ngZone,ee(M({},gx({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:s})),a=i?.ignoreChangesOutsideZone,c=[VB({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:sa,useExisting:jB}],l=RU(r.moduleType,this.injector,c);return BB({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let s=px({},i);return OB(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Aw,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(V(xn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),yu=null,yx=new K("");function zB(n){if(yu&&!yu.get(yx,!1))throw new ie(400,!1);xB(),yu=n;let e=n.get(mx);return GB(n),e}function xw(n,e,t=[]){let r=`Platform: ${e}`,i=new K(r);return(s=[])=>{let o=vx();if(!o||o.injector.get(yx,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):zB(qB(a,r))}return HB(i)}}function qB(n=[],e){return xn.create({name:e,providers:[{provide:tf,useValue:"platform"},{provide:Aw,useValue:new Set([()=>yu=null])},...n]})}function HB(n){let e=vx();if(!e)throw new ie(401,!1);return e}function vx(){return yu?.get(mx)??null}function GB(n){n.get(Yv,null)?.forEach(t=>t())}function Mw(){return!1}var Dr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=WB;let n=e;return n})();function WB(n){return KB(sn(),be(),(n&16)===16)}function KB(n,e,t){if(rf(n)&&!t){let r=Ui(n.index,e);return new zs(r,r)}else if(n.type&175){let r=e[jn];return new zs(r,e)}return null}var Iv=class{constructor(){}supports(e){return KA(e)}create(e){return new bv(e)}},QB=(n,e)=>e,bv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||QB}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<ST(r,i,s)?t:r,a=ST(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let p=0;p<l;p++){let m=p<s.length?s[p]:s[p]=0,_=m+p;d<=_&&_<l&&(s[p]=m+1)}let h=o.previousIndex;s[h]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!KA(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,kU(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Dv(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Dv=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Cv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Qh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Cv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ST(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Tv=class{constructor(){}supports(e){return e instanceof Map||hw(e)}create(){return new Sv}},Sv=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||hw(e)))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Av(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Av=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function AT(){return new Rw([new Iv])}var Rw=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||AT()),deps:[[e,new Xh,new da]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new ie(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:AT});let n=e;return n})();function xT(){return new Pf([new Tv])}var Pf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||xT()),deps:[[e,new Xh,new da]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new ie(901,!1)}};e.\u0275prov=W({token:e,providedIn:"root",factory:xT});let n=e;return n})();var wx=xw(null,"core",[]),_x=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(V(ri))},e.\u0275mod=vt({type:e}),e.\u0275inj=yt({});let n=e;return n})();var Ex=new K("");function Of(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Nu(n,e){ga("NgSignals");let t=yC(n);return e?.equal&&(t[Br].equal=e.equal),t}function sr(n){let e=Me(null);try{return n()}finally{Me(e)}}function Ix(n){let e=Oi(n);if(!e)return null;let t=new ca(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var xx=null;function or(){return xx}function Mx(n){xx??=n}var Ff=class{};var St=new K(""),Bw=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>B(XB),providedIn:"platform"});let n=e;return n})(),Rx=new K(""),XB=(()=>{let e=class e extends Bw{constructor(){super(),this._doc=B(St),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return or().getBaseHref(this._doc)}onPopState(r){let i=or().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=or().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function $w(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function bx(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ii(n){return n&&n[0]!=="?"?"?"+n:n}var Ks=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>B(zw),providedIn:"root"});let n=e;return n})(),kx=new K(""),zw=(()=>{let e=class e extends Ks{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??B(St).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return $w(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ii(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+ii(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+ii(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(Bw),V(kx,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Nx=(()=>{let e=class e extends Ks{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=$w(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+ii(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+ii(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(V(Bw),V(kx,8))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Ea=(()=>{let e=class e{constructor(r){this._subject=new Ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=n$(bx(Dx(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ii(i))}normalize(r){return e.stripTrailingSlash(t$(this._basePath,Dx(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ii(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ii(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=ii,e.joinWithSlash=$w,e.stripTrailingSlash=bx,e.\u0275fac=function(i){return new(i||e)(V(Ks))},e.\u0275prov=W({token:e,factory:()=>e$(),providedIn:"root"});let n=e;return n})();function e$(){return new Ea(V(Ks))}function t$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Dx(n){return n.replace(/\/index.html$/,"")}function n$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function Vf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Nw=/\s+/,Cx=[],Ia=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Cx,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Nw):Cx}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Nw):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Nw).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(H(Gt),H(br))},e.\u0275dir=Ht({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var Pw=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wn=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Pw(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),Tx(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);Tx(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(H(vn),H(qs),H(Rw))},e.\u0275dir=Ht({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function Tx(n,e){n.context.$implicit=e.item}var $n=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Ow,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Sx("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Sx("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(H(vn),H(qs))},e.\u0275dir=Ht({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),Ow=class{constructor(){this.$implicit=null,this.ngIf=null}};function Sx(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${tn(e)}'.`)}var Px=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:Ir.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(H(Gt),H(Pf),H(br))},e.\u0275dir=Ht({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let n=e;return n})();function Ox(n,e){return new ie(2100,!1)}var Fw=class{createSubscription(e,t){return sr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){sr(()=>e.unsubscribe())}},Vw=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},r$=new Vw,i$=new Fw,Fx=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(qi(r))return r$;if(Tw(r))return i$;throw Ox(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(H(Dr,16))},e.\u0275pipe=Gs({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();function s$(n,e){return{key:n,value:e}}var Hi=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=Ax}transform(r,i=Ax){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let s=this.differ.diff(r),o=i!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(s$(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)(H(Pf,16))},e.\u0275pipe=Gs({name:"keyvalue",type:e,pure:!1,standalone:!0});let n=e;return n})();function Ax(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var ba=(()=>{let e=class e{transform(r,i,s){if(r==null)return null;if(!this.supports(r))throw Ox(e,r);return r.slice(i,s)}supports(r){return typeof r=="string"||Array.isArray(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=Gs({name:"slice",type:e,pure:!1,standalone:!0});let n=e;return n})();var Da=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=vt({type:e}),e.\u0275inj=yt({});let n=e;return n})(),qw="browser",o$="server";function Gi(n){return n===qw}function Wi(n){return n===o$}var Vx=(()=>{let e=class e{};e.\u0275prov=W({token:e,providedIn:"root",factory:()=>Gi(B(Tt))?new Lw(B(St),window):new jw});let n=e;return n})(),Lw=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=a$(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function a$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var jw=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},_a=class{};var Ou=class{},jf=class{},ar=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Gw=class{encodeKey(e){return Lx(e)}encodeValue(e){return Lx(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function c$(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var u$=/%(\d[a-f0-9])/gi,l$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Lx(n){return encodeURIComponent(n).replace(u$,(e,t)=>l$[t]??e)}function Lf(n){return`${n}`}var Qi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Gw,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=c$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Lf):[Lf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Lf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Lf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Ww=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function d$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function jx(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Ux(n){return typeof Blob<"u"&&n instanceof Blob}function Bx(n){return typeof FormData<"u"&&n instanceof FormData}function h$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Pu=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(d$(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new ar,this.context??=new Ww,!this.params)this.params=new Qi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||jx(this.body)||Ux(this.body)||Bx(this.body)||h$(this.body)?this.body:this.body instanceof Qi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Bx(this.body)?null:Ux(this.body)?this.body.type||null:jx(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Qi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,m)=>p.set(m,e.setHeaders[m]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,m)=>p.set(m,e.setParams[m]),d)),new n(t,r,o,{params:d,headers:l,context:h,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},Yi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Yi||{}),Fu=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new ar,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Uf=class n extends Fu{constructor(e={}){super(e),this.type=Yi.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Vu=class n extends Fu{constructor(e={}){super(e),this.type=Yi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ki=class extends Fu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Hx=200,f$=204;function Hw(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Qs=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Pu)o=r;else{let l;s.headers instanceof ar?l=s.headers:l=new ar(s.headers);let d;s.params&&(s.params instanceof Qi?d=s.params:d=new Qi({fromObject:s.params})),o=new Pu(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=se(o).pipe(qr(l=>this.handler.handle(l)));if(r instanceof Pu||s.observe==="events")return a;let c=a.pipe(lt(l=>l instanceof Vu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(re(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(re(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(re(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(re(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Qi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Hw(s,i))}post(r,i,s={}){return this.request("POST",r,Hw(s,i))}put(r,i,s={}){return this.request("PUT",r,Hw(s,i))}};e.\u0275fac=function(i){return new(i||e)(V(Ou))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),p$=/^\)\]\}',?\n/,g$="X-Request-URL";function $x(n){if(n.url)return n.url;let e=g$.toLocaleLowerCase();return n.headers.get(e)}var m$=(()=>{let e=class e{constructor(){this.fetchImpl=B(Kw,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=B(_e)}handle(r){return new he(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(Qw,o=>i.error(new Ki({error:o}))),()=>s.abort()})}doRequest(r,i,s){return C(this,null,function*(){let o=this.createRequestInit(r),a;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,M({signal:i},o)));y$(_),s.next({type:Yi.Sent}),a=yield _}catch(_){s.error(new Ki({error:_,status:_.status??0,statusText:_.statusText,url:r.urlWithParams,headers:_.headers}));return}let c=new ar(a.headers),l=a.statusText,d=$x(a)??r.urlWithParams,h=a.status,p=null;if(r.reportProgress&&s.next(new Uf({headers:c,status:h,statusText:l,url:d})),a.body){let _=a.headers.get("content-length"),w=[],E=a.body.getReader(),R=0,O,F,z=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>C(this,null,function*(){for(;;){let{done:Q,value:D}=yield E.read();if(Q)break;if(w.push(D),R+=D.length,r.reportProgress){F=r.responseType==="text"?(F??"")+(O??=new TextDecoder).decode(D,{stream:!0}):void 0;let v=()=>s.next({type:Yi.DownloadProgress,total:_?+_:void 0,loaded:R,partialText:F});z?z.run(v):v()}}}));let X=this.concatChunks(w,R);try{let Q=a.headers.get("Content-Type")??"";p=this.parseBody(r,X,Q)}catch(Q){s.error(new Ki({error:Q,headers:new ar(a.headers),status:a.status,statusText:a.statusText,url:$x(a)??r.urlWithParams}));return}}h===0&&(h=p?Hx:0),h>=200&&h<300?(s.next(new Vu({body:p,headers:c,status:h,statusText:l,url:d})),s.complete()):s.error(new Ki({error:p,headers:c,status:h,statusText:l,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(p$,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Kw=class{};function Qw(){}function y$(n){n.then(Qw,Qw)}function v$(n,e){return e(n)}function w$(n,e,t){return(r,i)=>Un(t,()=>e(r,s=>n(s,i)))}var Gx=new K(""),_$=new K(""),E$=new K("",{providedIn:"root",factory:()=>!0});var zx=(()=>{let e=class e extends Ou{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=B($i),this.contributeToStability=B(E$)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(Gx),...this.injector.get(_$,[])]));this.chain=i.reduceRight((s,o)=>w$(s,o,this.injector),v$)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(ks(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(V(jf),V(nn))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();var I$=/^\)\]\}',?\n/;function b$(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var qx=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ie(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Te(i.\u0275loadImpl()):se(null)).pipe(Ne(()=>new he(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((E,R)=>a.setRequestHeader(E,R.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let E=r.detectContentTypeHeader();E!==null&&a.setRequestHeader("Content-Type",E)}if(r.responseType){let E=r.responseType.toLowerCase();a.responseType=E!=="json"?E:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let E=a.statusText||"OK",R=new ar(a.getAllResponseHeaders()),O=b$(a)||r.url;return l=new Uf({headers:R,status:a.status,statusText:E,url:O}),l},h=()=>{let{headers:E,status:R,statusText:O,url:F}=d(),z=null;R!==f$&&(z=typeof a.response>"u"?a.responseText:a.response),R===0&&(R=z?Hx:0);let X=R>=200&&R<300;if(r.responseType==="json"&&typeof z=="string"){let Q=z;z=z.replace(I$,"");try{z=z!==""?JSON.parse(z):null}catch(D){z=Q,X&&(X=!1,z={error:D,text:z})}}X?(o.next(new Vu({body:z,headers:E,status:R,statusText:O,url:F||void 0})),o.complete()):o.error(new Ki({error:z,headers:E,status:R,statusText:O,url:F||void 0}))},p=E=>{let{url:R}=d(),O=new Ki({error:E,status:a.status||0,statusText:a.statusText||"Unknown Error",url:R||void 0});o.error(O)},m=!1,_=E=>{m||(o.next(d()),m=!0);let R={type:Yi.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(R.total=E.total),r.responseType==="text"&&a.responseText&&(R.partialText=a.responseText),o.next(R)},w=E=>{let R={type:Yi.UploadProgress,loaded:E.loaded};E.lengthComputable&&(R.total=E.total),o.next(R)};return a.addEventListener("load",h),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),r.reportProgress&&(a.addEventListener("progress",_),c!==null&&a.upload&&a.upload.addEventListener("progress",w)),a.send(c),o.next({type:Yi.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",h),a.removeEventListener("timeout",p),r.reportProgress&&(a.removeEventListener("progress",_),c!==null&&a.upload&&a.upload.removeEventListener("progress",w)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(V(_a))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Wx=new K(""),D$="XSRF-TOKEN",C$=new K("",{providedIn:"root",factory:()=>D$}),T$="X-XSRF-TOKEN",S$=new K("",{providedIn:"root",factory:()=>T$}),Bf=class{},A$=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Vf(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(V(St),V(Tt),V(C$))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function x$(n,e){let t=n.url.toLowerCase();if(!B(Wx)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=B(Bf).getToken(),i=B(S$);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function Kx(...n){let e=[Qs,qx,zx,{provide:Ou,useExisting:zx},{provide:jf,useFactory:()=>B(m$,{optional:!0})??B(qx)},{provide:Gx,useValue:x$,multi:!0},{provide:Wx,useValue:!0},{provide:Bf,useClass:A$}];for(let t of n)e.push(...t.\u0275providers);return ef(e)}var Jw=class extends Ff{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Xw=class n extends Jw{static makeCurrent(){Mx(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=M$();return t==null?null:R$(t)}resetBaseElement(){Lu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Vf(document.cookie,e)}},Lu=null;function M$(){return Lu=Lu||document.querySelector("base"),Lu?Lu.getAttribute("href"):null}function R$(n){return new URL(n,document.baseURI).pathname}var e_=class{addToWindow(e){An.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new ie(5103,!1);return s},An.getAllAngularTestabilities=()=>e.getAllTestabilities(),An.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=An.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};An.frameworkStabilizers||(An.frameworkStabilizers=[]),An.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?or().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},k$=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),$f=new K(""),Xx=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new ie(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(V($f),V(_e))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),ju=class{constructor(e){this._doc=e}},Yw="ng-app-id",eM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Wi(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Yw}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Yw),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Yw,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(V(St),V(hf),V(Zv,8),V(Tt))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Zw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},n_=/%COMP%/g,tM="%COMP%",N$=`_nghost-${tM}`,P$=`_ngcontent-${tM}`,O$=!0,F$=new K("",{providedIn:"root",factory:()=>O$});function V$(n){return P$.replace(n_,n)}function L$(n){return N$.replace(n_,n)}function nM(n,e){return e.map(t=>t.replace(n_,n))}var Yx=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Wi(c),this.defaultRenderer=new Uu(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===wr.ShadowDom&&(i=ee(M({},i),{encapsulation:wr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof zf?s.applyToHost(r):s instanceof Bu&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case wr.Emulated:o=new zf(l,d,i,this.appId,h,a,c,p);break;case wr.ShadowDom:return new t_(l,d,r,i,a,c,this.nonce,p);default:o=new Bu(l,d,i,h,a,c,p);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(V(Xx),V(eM),V(hf),V(F$),V(St),V(Tt),V(_e),V(Zv))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Uu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Zw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Zx(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Zx(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Zw[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Zw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(t,r,i&Ir.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ir.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=or().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Zx(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var t_=class extends Uu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=nM(i.id,i.styles);for(let d of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bu=class extends Uu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?nM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},zf=class extends Bu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=V$(l),this.hostAttr=L$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},j$=(()=>{let e=class e extends ju{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(V(St))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),U$=(()=>{let e=class e extends ju{constructor(r){super(r),this.delegate=B(Ex,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(V(St))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Jx=["alt","control","meta","shift"],B$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},z$=(()=>{let e=class e extends ju{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>or().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),Jx.forEach(d=>{let h=i.indexOf(d);h>-1&&(i.splice(h,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=B$[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Jx.forEach(a=>{if(a!==s){let c=$$[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(V(St))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function q$(){Xw.makeCurrent()}function H$(){return new Yr}function G$(){return HS(document),document}var W$=[{provide:Tt,useValue:qw},{provide:Yv,useValue:q$,multi:!0},{provide:St,useFactory:G$,deps:[]}],rM=xw(wx,"browser",W$),K$=new K(""),Q$=[{provide:ku,useClass:e_,deps:[]},{provide:Dw,useClass:Mf,deps:[_e,Rf,ku]},{provide:Mf,useClass:Mf,deps:[_e,Rf,ku]}],Y$=[{provide:tf,useValue:"root"},{provide:Yr,useFactory:H$,deps:[]},{provide:$f,useClass:j$,multi:!0,deps:[St,_e,Tt]},{provide:$f,useClass:z$,multi:!0,deps:[St]},{provide:$f,useClass:U$,multi:!0},Yx,eM,Xx,{provide:aa,useExisting:Yx},{provide:_a,useClass:k$,deps:[]},[]],iM=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:hf,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(V(K$,12))},e.\u0275mod=vt({type:e}),e.\u0275inj=yt({providers:[...Y$,...Q$],imports:[Da,_x]});let n=e;return n})(),sM=(()=>{let e=class e{constructor(r){this._doc=r,this._dom=or()}addTag(r,i=!1){return r?this._getOrCreateElement(r,i):null}addTags(r,i=!1){return r?r.reduce((s,o)=>(o&&s.push(this._getOrCreateElement(o,i)),s),[]):[]}getTag(r){return r&&this._doc.querySelector(`meta[${r}]`)||null}getTags(r){if(!r)return[];let i=this._doc.querySelectorAll(`meta[${r}]`);return i?[].slice.call(i):[]}updateTag(r,i){if(!r)return null;i=i||this._parseSelector(r);let s=this.getTag(i);return s?this._setMetaElementAttributes(r,s):this._getOrCreateElement(r,!0)}removeTag(r){this.removeTagElement(this.getTag(r))}removeTagElement(r){r&&this._dom.remove(r)}_getOrCreateElement(r,i=!1){if(!i){let a=this._parseSelector(r),c=this.getTags(a).filter(l=>this._containsAttributes(r,l))[0];if(c!==void 0)return c}let s=this._dom.createElement("meta");return this._setMetaElementAttributes(r,s),this._doc.getElementsByTagName("head")[0].appendChild(s),s}_setMetaElementAttributes(r,i){return Object.keys(r).forEach(s=>i.setAttribute(this._getMetaKeyMap(s),r[s])),i}_parseSelector(r){let i=r.name?"name":"property";return`${i}="${r[i]}"`}_containsAttributes(r,i){return Object.keys(r).every(s=>i.getAttribute(this._getMetaKeyMap(s))===r[s])}_getMetaKeyMap(r){return Z$[r]||r}};e.\u0275fac=function(i){return new(i||e)(V(St))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Z$={httpEquiv:"http-equiv"},_n=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(V(St))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var $u=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=V(J$),s},providedIn:"root"});let n=e;return n})(),J$=(()=>{let e=class e extends $u{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case yn.NONE:return i;case yn.HTML:return zi(i,"HTML")?ir(i):rA(this._doc,String(i)).toString();case yn.STYLE:return zi(i,"Style")?ir(i):i;case yn.SCRIPT:if(zi(i,"Script"))return ir(i);throw new ie(5200,!1);case yn.URL:return zi(i,"URL")?ir(i):pf(String(i));case yn.RESOURCE_URL:if(zi(i,"ResourceURL"))return ir(i);throw new ie(5201,!1);default:throw new ie(5202,!1)}}bypassSecurityTrustHtml(r){return WS(r)}bypassSecurityTrustStyle(r){return KS(r)}bypassSecurityTrustScript(r){return QS(r)}bypassSecurityTrustUrl(r){return YS(r)}bypassSecurityTrustResourceUrl(r){return ZS(r)}};e.\u0275fac=function(i){return new(i||e)(V(St))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function s_(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Zs=s_();function dM(n){Zs=n}var hM=/[&<>"']/,X$=new RegExp(hM.source,"g"),fM=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,ez=new RegExp(fM.source,"g"),tz={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oM=n=>tz[n];function kn(n,e){if(e){if(hM.test(n))return n.replace(X$,oM)}else if(fM.test(n))return n.replace(ez,oM);return n}var nz=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function rz(n){return n.replace(nz,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var iz=/(^|[^\[])\^/g;function qe(n,e){let t=typeof n=="string"?n:n.source;e=e||"";let r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(iz,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function aM(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var qu={exec:()=>null};function cM(n,e){let t=n.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=t.split(/ \|/),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function qf(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function sz(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function uM(n,e,t,r){let i=e.href,s=e.title?kn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:kn(o)}}function oz(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var Ta=class{options;rules;lexer;constructor(e){this.options=e||Zs}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:qf(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=oz(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let i=qf(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=qf(r.replace(/^ *>[ \t]?/gm,""),`
`);let i=this.lexer.state.top;this.lexer.state.top=!0;let s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",c="",l=!1;for(;e;){let d=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,R=>" ".repeat(3*R.length)),p=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,c=h.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=h.slice(m),m+=t[1].length);let _=!1;if(!h&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),d=!0),!d){let R=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),O=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),F=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),z=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){let X=e.split(`
`,1)[0];if(p=X,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),F.test(p)||z.test(p)||R.test(p)||O.test(e))break;if(p.search(/[^ ]/)>=m||!p.trim())c+=`
`+p.slice(m);else{if(_||h.search(/[^ ]/)>=4||F.test(h)||z.test(h)||O.test(h))break;c+=`
`+p}!_&&!p.trim()&&(_=!0),a+=X+`
`,e=e.substring(X.length+1),h=p.slice(m)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let w=null,E;this.options.gfm&&(w=/^\[[ xX]\] /.exec(c),w&&(E=w[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!w,checked:E,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){let h=s.items[d].tokens.filter(m=>m.type==="space"),p=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));s.loose=p}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=cM(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of s)o.rows.push(cM(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:kn(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let o=qf(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=sz(t[2],"()");if(o>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),uM(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return uM(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,c,l=o,d=0,h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(c=[...a].length,i[3]||i[4]){l+=c;continue}else if((i[5]||i[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);let p=[...i[0]][0].length,m=e.slice(0,o+i.index+p+c);if(Math.min(o,c)%2){let w=m.slice(1,-1);return{type:"em",raw:m,text:w,tokens:this.lexer.inlineTokens(w)}}let _=m.slice(2,-2);return{type:"strong",raw:m,text:_,tokens:this.lexer.inlineTokens(_)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=kn(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=kn(t[1]),i="mailto:"+r):(r=kn(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=kn(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=kn(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=kn(t[0]),{type:"text",raw:t[0],text:r}}}},az=/^(?: *(?:\n|$))+/,cz=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,uz=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Gu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,lz=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,pM=/(?:[*+-]|\d{1,9}[.)])/,gM=qe(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,pM).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),o_=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,dz=/^[^\n]+/,a_=/(?!\s*\])(?:\\.|[^\[\]\\])+/,hz=qe(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",a_).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),fz=qe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,pM).getRegex(),Wf="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",c_=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,pz=qe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",c_).replace("tag",Wf).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),mM=qe(o_).replace("hr",Gu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex(),gz=qe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",mM).getRegex(),u_={blockquote:gz,code:cz,def:hz,fences:uz,heading:lz,hr:Gu,html:pz,lheading:gM,list:fz,newline:az,paragraph:mM,table:qu,text:dz},lM=qe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Gu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex(),mz=ee(M({},u_),{table:lM,paragraph:qe(o_).replace("hr",Gu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",lM).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Wf).getRegex()}),yz=ee(M({},u_),{html:qe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",c_).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:qu,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:qe(o_).replace("hr",Gu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",gM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),yM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,vz=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,vM=/^( {2,}|\\)\n(?!\s*$)/,wz=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Wu="\\p{P}\\p{S}",_z=qe(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Wu).getRegex(),Ez=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Iz=qe(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Wu).getRegex(),bz=qe("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Wu).getRegex(),Dz=qe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Wu).getRegex(),Cz=qe(/\\([punct])/,"gu").replace(/punct/g,Wu).getRegex(),Tz=qe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Sz=qe(c_).replace("(?:-->|$)","-->").getRegex(),Az=qe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Sz).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Gf=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,xz=qe(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Gf).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),wM=qe(/^!?\[(label)\]\[(ref)\]/).replace("label",Gf).replace("ref",a_).getRegex(),_M=qe(/^!?\[(ref)\](?:\[\])?/).replace("ref",a_).getRegex(),Mz=qe("reflink|nolink(?!\\()","g").replace("reflink",wM).replace("nolink",_M).getRegex(),l_={_backpedal:qu,anyPunctuation:Cz,autolink:Tz,blockSkip:Ez,br:vM,code:vz,del:qu,emStrongLDelim:Iz,emStrongRDelimAst:bz,emStrongRDelimUnd:Dz,escape:yM,link:xz,nolink:_M,punctuation:_z,reflink:wM,reflinkSearch:Mz,tag:Az,text:wz,url:qu},Rz=ee(M({},l_),{link:qe(/^!?\[(label)\]\((.*?)\)/).replace("label",Gf).getRegex(),reflink:qe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Gf).getRegex()}),r_=ee(M({},l_),{escape:qe(yM).replace("])","~|])").getRegex(),url:qe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),kz=ee(M({},r_),{br:qe(vM).replace("{2,}","*").getRegex(),text:qe(r_.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),Hf={normal:u_,gfm:mz,pedantic:yz},zu={normal:l_,gfm:r_,breaks:kz,pedantic:Rz},oi=class n{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Zs,this.options.tokenizer=this.options.tokenizer||new Ta,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:Hf.normal,inline:zu.normal};this.options.pedantic?(t.block=Hf.pedantic,t.inline=zu.pedantic):this.options.gfm&&(t.block=Hf.gfm,this.options.breaks?t.inline=zu.breaks:t.inline=zu.gfm),this.tokenizer.rules=t}static get rules(){return{block:Hf,inline:zu}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,c=e.slice(1),l;this.options.extensions.startBlock.forEach(d=>{l=d.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,c,l;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,l)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},h),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},nt=class{options;constructor(e){this.options=e||Zs}code(e,t,r){let i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+kn(i)+'">'+(r?e:kn(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:kn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){let i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){let r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){let i=aM(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){let i=aM(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}},Hu=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},ai=class n{options;renderer;textRenderer;constructor(e){this.options=e||Zs,this.options.renderer=this.options.renderer||new nt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Hu}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{let o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,rz(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=s,a="",c="";for(let d=0;d<o.header.length;d++)c+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(c);let l="";for(let d=0;d<o.rows.length;d++){let h=o.rows[d];c="";for(let p=0;p<h.length;p++)c+=this.renderer.tablecell(this.parseInline(h[p].tokens),{header:!1,align:o.align[p]});l+=this.renderer.tablerow(c)}r+=this.renderer.table(a,l);continue}case"blockquote":{let o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{let o=s,a=o.ordered,c=o.start,l=o.loose,d="";for(let h=0;h<o.items.length;h++){let p=o.items[h],m=p.checked,_=p.task,w="";if(p.task){let E=this.renderer.checkbox(!!m);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=E+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=E+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:E+" "}):w+=E+" "}w+=this.parse(p.tokens,l),d+=this.renderer.listitem(w,_,!!m)}r+=this.renderer.list(d,a,c);continue}case"html":{let o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{let o=s;r+=t.text(o.text);break}case"html":{let o=s;r+=t.html(o.text);break}case"link":{let o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{let o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{let o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{let o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{let o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{let o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{let o=s;r+=t.text(o.text);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},Ca=class{options;constructor(e){this.options=e||Zs}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},i_=class{defaults=s_();options=this.setOptions;parse=this.#s(oi.lex,ai.parse);parseInline=this.#s(oi.lexInline,ai.parseInline);Parser=ai;Renderer=nt;TextRenderer=Hu;Lexer=oi;Tokenizer=Ta;Hooks=Ca;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i=M({},r);if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let c=s.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){let s=this.defaults.renderer||new nt(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.renderer[a],l=s[a];s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new Ta(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,c=r.tokenizer[a],l=s[a];s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Ca;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.hooks[a],l=s[a];Ca.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(c.call(s,d)).then(p=>l.call(s,p));let h=c.call(s,d);return l.call(s,h)}:s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults=M(M({},this.defaults),i)}),this}setOptions(e){return this.defaults=M(M({},this.defaults),e),this}lexer(e,t){return oi.lex(e,t??this.defaults)}parser(e,t){return ai.parse(e,t??this.defaults)}#s(e,t){return(r,i)=>{let s=M({},i),o=M(M({},this.defaults),s);this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let a=this.#u(!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#u(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+kn(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Ys=new i_;function Se(n,e){return Ys.parse(n,e)}Se.options=Se.setOptions=function(n){return Ys.setOptions(n),Se.defaults=Ys.defaults,dM(Se.defaults),Se};Se.getDefaults=s_;Se.defaults=Zs;Se.use=function(...n){return Ys.use(...n),Se.defaults=Ys.defaults,dM(Se.defaults),Se};Se.walkTokens=function(n,e){return Ys.walkTokens(n,e)};Se.parseInline=Ys.parseInline;Se.Parser=ai;Se.parser=ai.parse;Se.Renderer=nt;Se.TextRenderer=Hu;Se.Lexer=oi;Se.lexer=oi.lex;Se.Tokenizer=Ta;Se.Hooks=Ca;Se.parse=Se;var NJ=Se.options,PJ=Se.setOptions,OJ=Se.use,FJ=Se.walkTokens,VJ=Se.parseInline;var LJ=ai.parse,jJ=oi.lex;var Nz=["*"],Pz="Copy",Oz="Copied",Fz=(()=>{let e=class e{constructor(){this._buttonClick$=new Oe,this.copied$=this._buttonClick$.pipe(Ne(()=>du(se(!0),ry(3e3).pipe(hu(!1)))),Gr(),Kr(1)),this.copiedText$=this.copied$.pipe(Jn(!1),re(r=>r?Oz:Pz))}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Fe({type:e,selectors:[["markdown-clipboard"]],standalone:!0,features:[Ru],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,s){i&1&&(L(0,"button",0),Ft(1,"async"),tt("click",function(){return s.onCopyToClipboardClick()}),G(2),Ft(3,"async"),$()),i&2&&(ya("copied",Rn(1,3,s.copied$)),q(2),ze(Rn(3,5,s.copiedText$)))},dependencies:[Fx],encapsulation:2,changeDetection:0});let n=e;return n})(),Vz=new K("CLIPBOARD_OPTIONS");var d_=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(d_||{}),IM=new K("MARKED_EXTENSIONS"),h_=new K("MARKED_OPTIONS"),Lz="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",jz="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",Uz="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",Bz="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",$z="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",zz="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",bM=new K("SECURITY_CONTEXT");var En=(()=>{let e=class e{get options(){return this._options}set options(r){this._options=M(M({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,s,o,a,c,l){this.clipboardOptions=r,this.extensions=i,this.platform=o,this.securityContext=a,this.http=c,this.sanitizer=l,this.DEFAULT_MARKED_OPTIONS={renderer:new nt},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Oe,this.reload$=this._reload$.asObservable(),this.options=s}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:l}=i,d=M(M({},this.options),i.markedOptions),h=d.renderer||this.renderer||new nt;this.extensions&&(this.renderer=this.extendsRendererForExtensions(h)),c&&(this.renderer=this.extendsRendererForMermaid(h));let p=this.trimIndentation(r),m=s?this.decodeHtml(p):p,_=a?this.parseEmoji(m):m,w=this.parseMarked(_,d,o);return(l?w:this.sanitizer.sanitize(this.securityContext,w))||""}render(r,i=this.DEFAULT_RENDER_OPTIONS,s){let{clipboard:o,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=i;c&&this.renderKatex(r,M(M({},this.DEFAULT_KATEX_OPTIONS),l)),d&&this.renderMermaid(r,M(M({},this.DEFAULT_MERMAID_OPTIONS),h)),o&&this.renderClipboard(r,s,M(M(M({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(zz);return this.http.get(r,{responseType:"text"}).pipe(re(i=>this.handleExtension(r,i)))}highlight(r){if(!Gi(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,s=>s.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!Gi(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&Se.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let s=r.code;return r.code=function(o,a,c){return a==="mermaid"?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let s=r.lastIndexOf("://"),o=s>-1?r.substring(s+4):r,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&d!=="md"?"```"+d+`
`+i+"\n```":i}parseMarked(r,i,s=!1){if(i.renderer){let o=M({},i.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Se.use({renderer:o})}return s?Se.parseInline(r,i):Se.parse(r,i)}parseEmoji(r){if(!Gi(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(Lz);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(Gi(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(jz);renderMathInElement(r,i)}}renderClipboard(r,i,s){if(!Gi(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(Bz);if(!i)throw new Error($z);let{buttonComponent:o,buttonTemplate:a}=s,c=r.querySelectorAll("pre");for(let l=0;l<c.length;l++){let d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);let p=document.createElement("div");p.classList.add("markdown-clipboard-toolbar"),p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.zIndex="1",h.insertAdjacentElement("beforeend",p),h.onmouseenter=()=>p.classList.add("hover"),h.onmouseleave=()=>p.classList.remove("hover");let m;if(o){let w=i.createComponent(o);m=w.hostView,w.changeDetectorRef.markForCheck()}else if(a)m=i.createEmbeddedView(a);else{let w=i.createComponent(Fz);m=w.hostView,w.changeDetectorRef.markForCheck()}let _;m.rootNodes.forEach(w=>{p.appendChild(w),_=new ClipboardJS(w,{text:()=>d.innerText})}),m.onDestroy(()=>_.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!Gi(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(Uz);let s=r.querySelectorAll(".mermaid");s.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:s}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(s=>{let o=i;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(i)&&(i=o),o?s.substring(o):s}).join(`
`)}};e.\u0275fac=function(i){return new(i||e)(V(Vz,8),V(IM,8),V(h_,8),V(Tt),V(bM),V(Qs,8),V($u))},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})(),Tr=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,s){this.element=r,this.markdownService=i,this.viewContainerRef=s,this.error=new Ze,this.load=new Ze,this.ready=new Ze,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Oe}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(pu(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return C(this,null,function*(){let s={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,s);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,d_.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,d_.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++){let a=i instanceof Array?i:[i];s.item(o).classList.add(...a)}}setPluginOptions(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(i).forEach(a=>{let c=i[a];if(c){let l=this.toLispCase(a);s.item(o).setAttribute(l,c.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let s=r.toString();for(let o=0,a=i.length;o<a;o++)s=s.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return s.slice(0,1)==="-"&&(s=s.slice(1)),s}};e.\u0275fac=function(i){return new(i||e)(H(Gt),H(En),H(vn))},e.\u0275cmp=Fe({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[ji,Ru],ngContentSelectors:Nz,decls:1,vars:0,template:function(i,s){i&1&&(sx(),ox(0))},encapsulation:2});let n=e;return n})();function qz(n){return[En,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],{provide:IM,useValue:n?.markedExtensions??[]},{provide:bM,useValue:n?.sanitize??yn.HTML}]}var DM=(()=>{let e=class e{static forRoot(r){return{ngModule:e,providers:[qz(r)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=vt({type:e}),e.\u0275inj=yt({imports:[Da]});let n=e;return n})(),EM;(function(n){let e;(function(i){i.Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox"})(e=n.SecurityLevel||(n.SecurityLevel={}));let t;(function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"})(t=n.Theme||(n.Theme={}));let r;(function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(r=n.LogLevel||(n.LogLevel={}))})(EM||(EM={}));var kM=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(H(br),H(Gt))},e.\u0275dir=Ht({type:e});let n=e;return n})(),Gz=(()=>{let e=class e extends kM{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Au(e)))(s||e)}})(),e.\u0275dir=Ht({type:e,features:[_t]});let n=e;return n})(),NM=new K("");var Wz={provide:NM,useExisting:la(()=>tp),multi:!0};function Kz(){let n=or()?or().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Qz=new K(""),tp=(()=>{let e=class e extends kM{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Kz())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(H(br),H(Gt),H(Qz,8))},e.\u0275dir=Ht({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&tt("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Cf([Wz]),_t]});let n=e;return n})();var PM=new K(""),OM=new K("");function FM(n){return n!=null}function VM(n){return qi(n)?Te(n):n}function LM(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function jM(n,e){return e.map(t=>t(n))}function Yz(n){return!n.validate}function UM(n){return n.map(e=>Yz(e)?e:t=>e.validate(t))}function Zz(n){if(!n)return null;let e=n.filter(FM);return e.length==0?null:function(t){return LM(jM(t,e))}}function p_(n){return n!=null?Zz(UM(n)):null}function Jz(n){if(!n)return null;let e=n.filter(FM);return e.length==0?null:function(t){let r=jM(t,e).map(VM);return ny(r).pipe(re(LM))}}function g_(n){return n!=null?Jz(UM(n)):null}function CM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Xz(n){return n._rawValidators}function e4(n){return n._rawAsyncValidators}function f_(n){return n?Array.isArray(n)?n:[n]:[]}function Qf(n,e){return Array.isArray(n)?n.includes(e):n===e}function TM(n,e){let t=f_(e);return f_(n).forEach(i=>{Qf(t,i)||t.push(i)}),t}function SM(n,e){return f_(e).filter(t=>!Qf(n,t))}var Yf=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=p_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=g_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},xa=class extends Yf{get formDirective(){return null}get path(){return null}},Xu=class extends Yf{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zf=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},t4={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},wX=ee(M({},t4),{"[class.ng-submitted]":"isSubmitted"}),BM=(()=>{let e=class e extends Zf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(H(Xu,2))},e.\u0275dir=Ht({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&ya("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[_t]});let n=e;return n})(),$M=(()=>{let e=class e extends Zf{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(H(xa,10))},e.\u0275dir=Ht({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&ya("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[_t]});let n=e;return n})();var Ku="VALID",Kf="INVALID",Sa="PENDING",Qu="DISABLED",Ma=class{},Jf=class extends Ma{constructor(e,t){super(),this.value=e,this.source=t}},Zu=class extends Ma{constructor(e,t){super(),this.pristine=e,this.source=t}},Ju=class extends Ma{constructor(e,t){super(),this.touched=e,this.source=t}},Aa=class extends Ma{constructor(e,t){super(),this.status=e,this.source=t}};function zM(n){return(np(n)?n.validators:n)||null}function n4(n){return Array.isArray(n)?p_(n):n||null}function qM(n,e){return(np(e)?e.asyncValidators:n)||null}function r4(n){return Array.isArray(n)?g_(n):n||null}function np(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function i4(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ie(1e3,"");if(!r[t])throw new ie(1001,"")}function s4(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ie(1002,"")})}var Xf=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Nu(()=>this.statusReactive()),this.statusReactive=Mu(void 0),this._pristine=Nu(()=>this.pristineReactive()),this.pristineReactive=Mu(!0),this._touched=Nu(()=>this.touchedReactive()),this.touchedReactive=Mu(!1),this._events=new Oe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return sr(this.statusReactive)}set status(e){sr(()=>this.statusReactive.set(e))}get valid(){return this.status===Ku}get invalid(){return this.status===Kf}get pending(){return this.status==Sa}get disabled(){return this.status===Qu}get enabled(){return this.status!==Qu}get pristine(){return sr(this.pristineReactive)}set pristine(e){sr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return sr(this.touchedReactive)}set touched(e){sr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(TM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(TM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(SM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(SM(e,this._rawAsyncValidators))}hasValidator(e){return Qf(this._rawValidators,e)}hasAsyncValidator(e){return Qf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ee(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ju(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ju(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ee(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Zu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Zu(!0,r))}markAsPending(e={}){this.status=Sa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Aa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ee(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Qu,this.errors=null,this._forEachChild(i=>{i.disable(ee(M({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jf(this.value,r)),this._events.next(new Aa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ee(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ku,this._forEachChild(r=>{r.enable(ee(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ee(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ku||this.status===Sa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Jf(this.value,t)),this._events.next(new Aa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ee(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qu:Ku}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Sa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=VM(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Aa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?Qu:this.errors?Kf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sa)?Sa:this._anyControlsHaveStatus(Kf)?Kf:Ku}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Zu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ju(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){np(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=n4(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=r4(this._rawAsyncValidators)}},ep=class extends Xf{constructor(e,t,r){super(zM(t),qM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){s4(this,!0,e),Object.keys(e).forEach(r=>{i4(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var m_=new K("CallSetDisabledState",{providedIn:"root",factory:()=>y_}),y_="always";function o4(n,e){return[...e.path,n]}function HM(n,e,t=y_){GM(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),c4(n,e),l4(n,e),u4(n,e),a4(n,e)}function AM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function a4(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function GM(n,e){let t=Xz(n);e.validator!==null?n.setValidators(CM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=e4(n);e.asyncValidator!==null?n.setAsyncValidators(CM(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();AM(e._rawValidators,i),AM(e._rawAsyncValidators,i)}function c4(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&WM(n,e)})}function u4(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&WM(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function WM(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function l4(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function d4(n,e){n==null,GM(n,e)}function h4(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function f4(n){return Object.getPrototypeOf(n.constructor)===Gz}function p4(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function g4(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===tp?t=s:f4(s)?r=s:i=s}),i||r||t||null}var m4={provide:xa,useExisting:la(()=>v_)},Yu=Promise.resolve(),v_=(()=>{let e=class e extends xa{get submitted(){return sr(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Nu(()=>this.submittedReactive()),this.submittedReactive=Mu(!1),this._directives=new Set,this.ngSubmit=new Ze,this.form=new ep({},p_(r),g_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Yu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),HM(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Yu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Yu.then(()=>{let i=this._findContainer(r.path),s=new ep({});d4(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Yu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Yu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),p4(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(H(PM,10),H(OM,10),H(m_,8))},e.\u0275dir=Ht({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&tt("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Cf([m4]),_t]});let n=e;return n})();function xM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function MM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var y4=class extends Xf{constructor(e=null,t,r){super(zM(t),qM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),np(t)&&(t.nonNullable||t.initialValueIsDefault)&&(MM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){MM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var v4={provide:Xu,useExisting:la(()=>w_)},RM=Promise.resolve(),w_=(()=>{let e=class e extends Xu{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new y4,this._registered=!1,this.name="",this.update=new Ze,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=g4(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),h4(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){HM(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){RM.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Of(i);RM.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?o4(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(H(xa,9),H(PM,10),H(OM,10),H(NM,10),H(Dr,8),H(m_,8))},e.\u0275dir=Ht({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Cf([v4]),_t,ji]});let n=e;return n})(),KM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ht({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var w4=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=vt({type:e}),e.\u0275inj=yt({});let n=e;return n})();var QM=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:m_,useValue:r.callSetDisabledState??y_}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=vt({type:e}),e.\u0275inj=yt({imports:[w4]});let n=e;return n})();var le={production:!0,host:"https://publichome.page",port:"8888",eventBusURL:"https://publichome.page:8888/eventbus/",defaultFirm:"SS",redirect_url:"https://publichome.page/u",client_id:"8c987bdba61457c20417",client_secret:"DONT_SEND_FROM_FRONT_END",gh_default_user_repo:"publichomepage",gh_dr_folder:"my/main",gh_dr_url:"https://raw.githubusercontent.com",gh_api_url:"https://api.github.com",gh_auth_url:"https://github.com/login/oauth/authorize",gh_private_dr_folder:"my",supabaseUrl:"https://hnqbvkzmfdcshdgnhipy.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhucWJ2a3ptZmRjc2hkZ25oaXB5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjkyMjAwOTAsImV4cCI6MjA0NDc5NjA5MH0.3PlLXR6ljTwIWsrMO8QT2fvy0VIGKsXLfahjSgBIN7U",firebaseConfig:{apiKey:"AIzaSyBdEWJQNGtrtL88aX5sE2VGEqYpWLXtpFQ",authDomain:"publichomepage-b872d.firebaseapp.com",projectId:"publichomepage-b872d",storageBucket:"publichomepage-b872d.appspot.com",messagingSenderId:"850538578524",appId:"1:850538578524:web:56c70f38ac285bffd5dc99",measurementId:"G-TRBD0HQFWM"}};var In=(()=>{let e=class e{constructor(){this._event=new Oe,this.event$=this._event.asObservable()}send(r){this._event.next(r)}observable(){return this.event$}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function _4(n,e){n&1&&ve(0,"app-footer")}var He=class He{constructor(e){this.messaging=e,this.sponserVisible=!0,this.footerVisible=!0,localStorage.setItem("debug","true"),He.iconsColorByKey.set("facebook","#3b5998"),He.iconsColorByKey.set("youtube","#ed302f"),He.iconsColorByKey.set("discord","#7289DA"),He.iconsColorByKey.set("linkedin","#0082ca"),He.iconsColorByKey.set("github","#bcbcbc"),He.iconsColorByKey.set("link","green"),this.messaging.event$.subscribe(t=>{let r=t;switch(r.cmd){case"host":r.file=="IaComponent"&&(this.sponserVisible=!1,this.footerVisible=!1);break;case"UserContext":break;default:break}})}loadScript(e){let t=document.body,r=document.createElement("script");r.innerHTML="",r.src=e,r.async=!1,t.appendChild(r)}};He.title="Public Homepage",He.ghUserLoaded=le.gh_default_user_repo,He.readme_home=`${le.gh_dr_url}/${le.gh_default_user_repo}/${le.gh_dr_folder}/README.md`,He.user_contacts=`${le.gh_dr_url}/${le.gh_default_user_repo}/${le.gh_dr_folder}/contacts.md`,He.fab_questions_list2=`${le.gh_dr_url}/${le.gh_default_user_repo}/${le.gh_dr_folder}/questions/ds-list2.md`,He.YOUR_READ_ME="",He.ghUser={name:He.title,blog:"/"},He.userContext={username:"",status:"0",directory:{},youtube_links:new Set,leetcode_links:new Set,assessment:{}},He.INTERNAL_FOLDERS=["my","roadmap","questions","articles","faqs","coding","credits","README.md","contacts.md","assessments"],He.homeUser={name:He.title,blog:"/"},He.navLinks=[{link:"#about",text:"About"}],He.iconsColorByKey=new Map,He.contactLinksByKey=new Map,He.contactTextsByKey=new Map,He.\u0275fac=function(t){return new(t||He)(H(In))},He.\u0275cmp=Fe({type:He,selectors:[["app-root"]],decls:4,vars:1,consts:[["ondragstart","return false","onselectstart","return false"],[4,"ngIf"]],template:function(t,r){t&1&&(ve(0,"app-navbar"),L(1,"div",0),ve(2,"router-outlet"),$(),Ve(3,_4,1,0,"app-footer",1)),t&2&&(q(3),ae("ngIf",r.footerVisible))}});var te=He;function E4(n,e){if(n&1&&(L(0,"li",10)(1,"a",11),G(2),$()()),n&2){let t=e.$implicit;q(),ae("href",t.link,dt),q(),ze(t.text)}}var ZM=(()=>{let e=class e{constructor(r,i){this.cdRef=r,this.messaging=i,this.navUser=te.homeUser,this.photoUrl="",this.navLinks=te.navLinks,this.contactsFileFound=!1,this.userLoaded=te.ghUserLoaded,this.isHomeGHUser=!0,i.event$.subscribe(s=>{let o=s;switch(this.userLoaded=te.ghUserLoaded,this.isHomeGHUser=this.userLoaded==le.gh_default_user_repo,o.cmd){case"UserDirectory":this.isHomeGHUser?this.navLinks.push({link:"#projects",text:"Solutions"}):this.navLinks.forEach(c=>{let l=te.navLinks.indexOf(c);te.navLinks[l].link=te.ghUser.blog}),this.navUser=te.ghUser,te.userContext.directory.folders.forEach(c=>{let l=c.charAt(0).toUpperCase()+c.slice(1),d=c.toLowerCase();d.endsWith("contacts")||this.navLinks.push({link:this.getNavLink(d),text:l})}),this.addAContactLink();break;case"PageFile":switch(o.file){case"HomeGHUser":break;default:break}break;default:break}})}getNavLink(r){return this.isHomeGHUser?"/"+r:`/${te.userContext.username}/${r}`}addAContactLink(){let r=te.userContext.directory;r.files&&r.files.includes("contacts.md")?this.navLinks.push({link:this.getNavLink("contacts"),text:"Contacts"}):this.navLinks.push({link:"#about",text:"Contact"})}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(H(Dr),H(In))},e.\u0275cmp=Fe({type:e,selectors:[["app-navbar"]],decls:14,vars:7,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container"],["href","/"],[1,"fa-solid","fa-link",2,"color","green"],[1,"navbar-brand",3,"href"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav","navbar-nav","ml-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","js-scroll-trigger",3,"href"]],template:function(i,s){i&1&&(L(0,"nav",0)(1,"div",1)(2,"span")(3,"a",2),ve(4,"i",3),$(),L(5,"a",4)(6,"b"),G(7),$()()(),L(8,"button",5),ve(9,"span",6),$(),L(10,"div",7)(11,"ul",8),Ve(12,E4,3,2,"li",9),Ft(13,"slice"),$()()()()),i&2&&(q(5),ae("href",s.userLoaded,dt),q(2),Ot("\xA0",s.navUser.name,""),q(5),ae("ngForOf",va(13,3,s.navLinks,0,7)))},dependencies:[wn,ba]});let n=e;return n})();var we="primary",pl=Symbol("RouteTitle"),D_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Va(n){return new D_(n)}function I4(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function b4(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Sr(n[t],e[t]))return!1;return!0}function Sr(n,e){let t=n?C_(n):void 0,r=e?C_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!cR(n[i],e[i]))return!1;return!0}function C_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function cR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function uR(n){return n.length>0?n[n.length-1]:null}function Ji(n){return ty(n)?n:qi(n)?Te(Promise.resolve(n)):se(n)}var D4={exact:dR,subset:hR},lR={exact:C4,subset:T4,ignored:()=>!0};function JM(n,e,t){return D4[t.paths](n.root,e.root,t.matrixParams)&&lR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function C4(n,e){return Sr(n,e)}function dR(n,e,t){if(!eo(n.segments,e.segments)||!sp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!dR(n.children[r],e.children[r],t))return!1;return!0}function T4(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>cR(n[t],e[t]))}function hR(n,e,t){return fR(n,e,e.segments,t)}function fR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!eo(i,t)||e.hasChildren()||!sp(i,t,r))}else if(n.segments.length===t.length){if(!eo(n.segments,t)||!sp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!hR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!eo(n.segments,i)||!sp(n.segments,i,r)||!n.children[we]?!1:fR(n.children[we],e,s,r)}}function sp(n,e,t){return e.every((r,i)=>lR[t](n[i].parameters,r.parameters))}var ui=class{constructor(e=new je([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Va(this.queryParams),this._queryParamMap}toString(){return x4.serialize(this)}},je=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return op(this)}},Xs=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Va(this.parameters),this._parameterMap}toString(){return gR(this)}};function S4(n,e){return eo(n,e)&&n.every((t,r)=>Sr(t.parameters,e[r].parameters))}function eo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function A4(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var gl=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>new La,providedIn:"root"});let n=e;return n})(),La=class{parse(e){let t=new S_(e);return new ui(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${el(e.root,!0)}`,r=k4(e.queryParams),i=typeof e.fragment=="string"?`#${M4(e.fragment)}`:"";return`${t}${r}${i}`}},x4=new La;function op(n){return n.segments.map(e=>gR(e)).join("/")}function el(n,e){if(!n.hasChildren())return op(n);if(e){let t=n.children[we]?el(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==we&&r.push(`${i}:${el(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=A4(n,(r,i)=>i===we?[el(n.children[we],!1)]:[`${i}:${el(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${op(n)}/${t[0]}`:`${op(n)}/(${t.join("//")})`}}function pR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rp(n){return pR(n).replace(/%3B/gi,";")}function M4(n){return encodeURI(n)}function T_(n){return pR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ap(n){return decodeURIComponent(n)}function XM(n){return ap(n.replace(/\+/g,"%20"))}function gR(n){return`${T_(n.path)}${R4(n.parameters)}`}function R4(n){return Object.entries(n).map(([e,t])=>`;${T_(e)}=${T_(t)}`).join("")}function k4(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${rp(t)}=${rp(i)}`).join("&"):`${rp(t)}=${rp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var N4=/^[^\/()?;#]+/;function __(n){let e=n.match(N4);return e?e[0]:""}var P4=/^[^\/()?;=#]+/;function O4(n){let e=n.match(P4);return e?e[0]:""}var F4=/^[^=?&#]+/;function V4(n){let e=n.match(F4);return e?e[0]:""}var L4=/^[^&#]+/;function j4(n){let e=n.match(L4);return e?e[0]:""}var S_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new je(e,t)),r}parseSegment(){let e=__(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new Xs(ap(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=O4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=__(this.remaining);i&&(r=i,this.capture(r))}e[ap(t)]=ap(r)}parseQueryParam(e){let t=V4(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=j4(this.remaining);o&&(r=o,this.capture(r))}let i=XM(t),s=XM(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=__(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ie(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=we);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[we]:new je([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function mR(n){return n.segments.length>0?new je([],{[we]:n}):n}function yR(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=yR(i);if(r===we&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new je(n.segments,e);return U4(t)}function U4(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new je(n.segments.concat(e.segments),e.children)}return n}function ol(n){return n instanceof ui}function B4(n,e,t=null,r=null){let i=vR(n);return wR(i,e,t,r)}function vR(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new je(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=mR(r);return e??i}function wR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return E_(i,i,i,t,r);let s=$4(e);if(s.toRoot())return E_(i,i,new je([],{}),t,r);let o=z4(s,i,n),a=o.processChildren?rl(o.segmentGroup,o.index,s.commands):ER(o.segmentGroup,o.index,s.commands);return E_(i,o.segmentGroup,a,t,r)}function cp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function al(n){return typeof n=="object"&&n!=null&&n.outlets}function E_(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=_R(n,e,t);let a=mR(yR(o));return new ui(a,s,i)}function _R(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=_R(s,e,t)}),new je(n.segments,r)}var up=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&cp(r[0]))throw new ie(4003,!1);let i=r.find(al);if(i&&i!==uR(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function $4(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new up(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new up(t,e,r)}var Pa=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function z4(n,e,t){if(n.isAbsolute)return new Pa(e,!0,0);if(!t)return new Pa(e,!1,NaN);if(t.parent===null)return new Pa(t,!0,0);let r=cp(n.commands[0])?0:1,i=t.segments.length-1+r;return q4(t,i,n.numberOfDoubleDots)}function q4(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new Pa(r,!1,i-s)}function H4(n){return al(n[0])?n[0].outlets:{[we]:n}}function ER(n,e,t){if(n??=new je([],{}),n.segments.length===0&&n.hasChildren())return rl(n,e,t);let r=G4(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new je(n.segments.slice(0,r.pathIndex),{});return s.children[we]=new je(n.segments.slice(r.pathIndex),n.children),rl(s,0,i)}else return r.match&&i.length===0?new je(n.segments,{}):r.match&&!n.hasChildren()?A_(n,e,t):r.match?rl(n,0,i):A_(n,e,t)}function rl(n,e,t){if(t.length===0)return new je(n.segments,{});{let r=H4(t),i={};if(Object.keys(r).some(s=>s!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let s=rl(n.children[we],e,t);return new je(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=ER(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new je(n.segments,i)}}function G4(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(al(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!tR(c,l,o))return s;r+=2}else{if(!tR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function A_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(al(s)){let c=W4(s.outlets);return new je(r,c)}if(i===0&&cp(t[0])){let c=n.segments[e];r.push(new Xs(c.path,eR(t[0]))),i++;continue}let o=al(s)?s.outlets[we]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&cp(a)?(r.push(new Xs(o,eR(a))),i+=2):(r.push(new Xs(o,{})),i++)}return new je(r,{})}function W4(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=A_(new je([],{}),0,r))}),e}function eR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function tR(n,e,t){return n==t.path&&Sr(e,t.parameters)}var il="imperative",Mt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Mt||{}),zn=class{constructor(e,t){this.id=e,this.url=t}},ja=class extends zn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Mt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},li=class extends zn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Mt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Pn||{}),lp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(lp||{}),ci=class extends zn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Mt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zi=class extends zn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Mt.NavigationSkipped}},cl=class extends zn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Mt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},dp=class extends zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Mt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},x_=class extends zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Mt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},M_=class extends zn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Mt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},R_=class extends zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Mt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},k_=class extends zn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Mt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},N_=class{constructor(e){this.route=e,this.type=Mt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},P_=class{constructor(e){this.route=e,this.type=Mt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},O_=class{constructor(e){this.snapshot=e,this.type=Mt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},F_=class{constructor(e){this.snapshot=e,this.type=Mt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},V_=class{constructor(e){this.snapshot=e,this.type=Mt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},L_=class{constructor(e){this.snapshot=e,this.type=Mt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hp=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Mt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ul=class{},Ua=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function K4(n,e){return n.providers&&!n._injector&&(n._injector=_f(n.providers,e,`Route: ${n.path}`)),n._injector??e}function cr(n){return n.outlet||we}function Q4(n,e){let t=n.filter(r=>cr(r)===e);return t.push(...n.filter(r=>cr(r)!==e)),t}function ml(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var j_=class{get injector(){return ml(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new yl(this.rootInjector),this.attachRef=null}},yl=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new j_(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(V(nn))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),fp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=U_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=U_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=B_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return B_(e,this._root).map(t=>t.value)}};function U_(n,e){if(n===e.value)return e;for(let t of e.children){let r=U_(n,t);if(r)return r}return null}function B_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=B_(n,t);if(r.length)return r.unshift(e),r}return[]}var Nn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Na(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var pp=class extends fp{constructor(e,t){super(e),this.snapshot=t,Y_(this,e)}toString(){return this.snapshot.toString()}};function IR(n){let e=Y4(n),t=new Nt([new Xs("",{})]),r=new Nt({}),i=new Nt({}),s=new Nt({}),o=new Nt(""),a=new bn(t,r,s,o,i,we,n,e.root);return a.snapshot=e.root,new pp(new Nn(a,[]),e)}function Y4(n){let e={},t={},r={},i="",s=new Oa([],e,r,i,t,we,n,null,{});return new mp("",new Nn(s,[]))}var bn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(re(l=>l[pl]))??se(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>Va(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>Va(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function gp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),i?.data),n._resolvedData)}:r={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},i&&DR(i)&&(r.resolve[pl]=i.title),r}var Oa=class{get title(){return this.data?.[pl]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Va(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Va(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},mp=class extends fp{constructor(e,t){super(t),this.url=e,Y_(this,t)}toString(){return bR(this._root)}};function Y_(n,e){e.value._routerState=n,e.children.forEach(t=>Y_(n,t))}function bR(n){let e=n.children.length>0?` { ${n.children.map(bR).join(", ")} } `:"";return`${n.value}${e}`}function I_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Sr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Sr(e.params,t.params)||n.paramsSubject.next(t.params),b4(e.url,t.url)||n.urlSubject.next(t.url),Sr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function $_(n,e){let t=Sr(n.params,e.params)&&S4(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||$_(n.parent,e.parent))}function DR(n){return typeof n.title=="string"||n.title===null}var Z_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=we,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.attachEvents=new Ze,this.detachEvents=new Ze,this.parentContexts=B(yl),this.location=B(vn),this.changeDetector=B(Dr),this.inputBinder=B(Ep,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new z_(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Ht({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ji]});let n=e;return n})(),z_=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===bn?this.route:e===yl?this.childContexts:this.parent.get(e,t)}},Ep=new K(""),nR=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=lu([i.queryParams,i.params,i.data]).pipe(Ne(([o,a,c],l)=>(c=M(M(M({},o),a),c),l===0?se(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=Ix(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function Z4(n,e,t){let r=ll(n,e._root,t?t._root:void 0);return new pp(r,e)}function ll(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=J4(n,e,t);return new Nn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ll(n,a)),o}}let r=X4(e.value),i=e.children.map(s=>ll(n,s));return new Nn(r,i)}}function J4(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ll(n,r,i);return ll(n,r)})}function X4(n){return new bn(new Nt(n.url),new Nt(n.params),new Nt(n.queryParams),new Nt(n.fragment),new Nt(n.data),n.outlet,n.component,n)}var dl=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},CR="ngNavigationCancelingError";function yp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ol(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=TR(!1,Pn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function TR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[CR]=!0,t.cancellationCode=e,t}function eq(n){return SR(n)&&ol(n.url)}function SR(n){return!!n&&n[CR]}var tq=(n,e,t,r)=>re(i=>(new q_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),q_=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),I_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Na(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Na(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Na(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Na(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new L_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new F_(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(I_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),I_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},vp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Fa=class{constructor(e,t){this.component=e,this.route=t}};function nq(n,e,t){let r=n._root,i=e?e._root:null;return tl(r,i,t,[r.value])}function rq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function $a(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!NT(n)?n:e.get(n):r}function tl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Na(e);return n.children.forEach(o=>{iq(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>sl(a,t.getContext(o),i)),i}function iq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=sq(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new vp(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?tl(n,e,a?a.children:null,r,i):tl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Fa(a.outlet.component,o))}else o&&sl(e,a,i),i.canActivateChecks.push(new vp(r)),s.component?tl(n,null,a?a.children:null,r,i):tl(n,null,t,r,i);return i}function sq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!eo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!eo(n.url,e.url)||!Sr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!$_(n,e)||!Sr(n.queryParams,e.queryParams);case"paramsChange":default:return!$_(n,e)}}function sl(n,e,t){let r=Na(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?sl(o,e.children.getContext(s),t):sl(o,null,t):sl(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Fa(e.outlet.component,i)):t.canDeactivateChecks.push(new Fa(null,i)):t.canDeactivateChecks.push(new Fa(null,i))}function vl(n){return typeof n=="function"}function oq(n){return typeof n=="boolean"}function aq(n){return n&&vl(n.canLoad)}function cq(n){return n&&vl(n.canActivate)}function uq(n){return n&&vl(n.canActivateChild)}function lq(n){return n&&vl(n.canDeactivate)}function dq(n){return n&&vl(n.canMatch)}function AR(n){return n instanceof zr||n?.name==="EmptyError"}var ip=Symbol("INITIAL_VALUE");function Ba(){return Ne(n=>lu(n.map(e=>e.pipe(Hr(1),Jn(ip)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===ip)return ip;if(t===!1||hq(t))return t}return!0}),lt(e=>e!==ip),Hr(1)))}function hq(n){return ol(n)||n instanceof dl}function fq(n,e){return at(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?se(ee(M({},t),{guardsResult:!0})):pq(o,r,i,n).pipe(at(a=>a&&oq(a)?gq(r,s,n,e):se(a)),re(a=>ee(M({},t),{guardsResult:a})))})}function pq(n,e,t,r){return Te(n).pipe(at(i=>_q(i.component,i.route,t,e,r)),Tn(i=>i!==!0,!0))}function gq(n,e,t,r){return Te(e).pipe(qr(i=>Ai(yq(i.route.parent,r),mq(i.route,r),wq(n,i.path,t),vq(n,i.route,t))),Tn(i=>i!==!0,!0))}function mq(n,e){return n!==null&&e&&e(new V_(n)),se(!0)}function yq(n,e){return n!==null&&e&&e(new O_(n)),se(!0)}function vq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return se(!0);let i=r.map(s=>ch(()=>{let o=ml(e)??t,a=$a(s,o),c=cq(a)?a.canActivate(e,n):Un(o,()=>a(e,n));return Ji(c).pipe(Tn())}));return se(i).pipe(Ba())}function wq(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>rq(o)).filter(o=>o!==null).map(o=>ch(()=>{let a=o.guards.map(c=>{let l=ml(o.node)??t,d=$a(c,l),h=uq(d)?d.canActivateChild(r,n):Un(l,()=>d(r,n));return Ji(h).pipe(Tn())});return se(a).pipe(Ba())}));return se(s).pipe(Ba())}function _q(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return se(!0);let o=s.map(a=>{let c=ml(e)??i,l=$a(a,c),d=lq(l)?l.canDeactivate(n,e,t,r):Un(c,()=>l(n,e,t,r));return Ji(d).pipe(Tn())});return se(o).pipe(Ba())}function Eq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let s=i.map(o=>{let a=$a(o,n),c=aq(a)?a.canLoad(e,t):Un(n,()=>a(e,t));return Ji(c)});return se(s).pipe(Ba(),xR(r))}function xR(n){return Vo(mt(e=>{if(typeof e!="boolean")throw yp(n,e)}),re(e=>e===!0))}function Iq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return se(!0);let s=i.map(o=>{let a=$a(o,n),c=dq(a)?a.canMatch(e,t):Un(n,()=>a(e,t));return Ji(c)});return se(s).pipe(Ba(),xR(r))}var hl=class{constructor(e){this.segmentGroup=e||null}},fl=class extends Error{constructor(e){super(),this.urlTree=e}};function ka(n){return Ho(new hl(n))}function bq(n){return Ho(new ie(4e3,!1))}function Dq(n){return Ho(TR(!1,Pn.GuardRejected))}var H_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return se(r);if(i.numberOfChildren>1||!i.children[we])return bq(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,params:m,data:_,title:w}=i,E=Un(s,()=>a({params:m,data:_,queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,title:w}));if(E instanceof ui)throw new fl(E);t=E}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new fl(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ui(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new je(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},G_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Cq(n,e,t,r,i){let s=MR(n,e,t);return s.matched?(r=K4(e,r),Iq(r,e,t,i).pipe(re(o=>o===!0?s:M({},G_)))):se(s)}function MR(n,e,t){if(e.path==="**")return Tq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},G_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||I4)(t,n,e);if(!i)return M({},G_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?M(M({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Tq(n){return{matched:!0,parameters:n.length>0?uR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function rR(n,e,t,r){return t.length>0&&xq(n,t,r)?{segmentGroup:new je(e,Aq(r,new je(t,n.children))),slicedSegments:[]}:t.length===0&&Mq(n,t,r)?{segmentGroup:new je(n.segments,Sq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new je(n.segments,n.children),slicedSegments:t}}function Sq(n,e,t,r){let i={};for(let s of t)if(Ip(n,e,s)&&!r[cr(s)]){let o=new je([],{});i[cr(s)]=o}return M(M({},r),i)}function Aq(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&cr(r)!==we){let i=new je([],{});t[cr(r)]=i}return t}function xq(n,e,t){return t.some(r=>Ip(n,e,r)&&cr(r)!==we)}function Mq(n,e,t){return t.some(r=>Ip(n,e,r))}function Ip(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Rq(n,e,t){return e.length===0&&!n.children[t]}var W_=class{};function kq(n,e,t,r,i,s,o="emptyOnly"){return new K_(n,e,t,r,i,o,s).recognize()}var Nq=31,K_=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new H_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=rR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(({children:t,rootSnapshot:r})=>{let i=new Nn(r,t),s=new mp("",i),o=B4(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Oa([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,t).pipe(re(r=>({children:r,rootSnapshot:t})),xi(r=>{if(r instanceof fl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof hl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(re(o=>o instanceof Nn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Te(s).pipe(qr(o=>{let a=r.children[o],c=Q4(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Wr((o,a)=>(o.push(...a),o)),Mi(null),sy(),at(o=>{if(o===null)return ka(r);let a=RR(o);return Pq(a),se(a)}))}processSegment(e,t,r,i,s,o,a){return Te(t).pipe(qr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(xi(l=>{if(l instanceof hl)return se(null);throw l}))),Tn(c=>!!c),xi(c=>{if(AR(c))return Rq(r,i,s)?se(new W_):ka(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return cr(r)!==o&&(o===we||!Ip(i,s,r))?ka(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):ka(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=MR(t,i,s);if(!c)return ka(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Nq&&(this.allowRedirects=!1));let m=new Oa(s,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,iR(i),cr(i),i.component??i._loadedComponent??null,i,sR(i)),_=gp(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let w=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,m,e);return this.applyRedirects.lineralizeSegments(i,w).pipe(at(E=>this.processSegment(e,r,t,E.concat(p),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=Cq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ne(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ne(({routes:l})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=c,_=new Oa(p,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,iR(r),cr(r),r.component??r._loadedComponent??null,r,sR(r)),w=gp(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(w.params),_.data=Object.freeze(w.data);let{segmentGroup:E,slicedSegments:R}=rR(t,p,m,l);if(R.length===0&&E.hasChildren())return this.processChildren(d,l,E,_).pipe(re(F=>new Nn(_,F)));if(l.length===0&&R.length===0)return se(new Nn(_,[]));let O=cr(r)===s;return this.processSegment(d,l,E,R,O?we:s,!0,_).pipe(re(F=>new Nn(_,F instanceof Nn?[F]:[])))}))):ka(t)))}getChildConfig(e,t,r){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):Eq(e,t,r,this.urlSerializer).pipe(at(i=>i?this.configLoader.loadChildren(e,t).pipe(mt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Dq(t))):se({routes:[],injector:e})}};function Pq(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function Oq(n){let e=n.value.routeConfig;return e&&e.path===""}function RR(n){let e=[],t=new Set;for(let r of n){if(!Oq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=RR(r.children);e.push(new Nn(r.value,i))}return e.filter(r=>!t.has(r))}function iR(n){return n.data||{}}function sR(n){return n.resolve||{}}function Fq(n,e,t,r,i,s){return at(o=>kq(n,e,t,r,o.extractedUrl,i,s).pipe(re(({state:a,tree:c})=>ee(M({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Vq(n,e){return at(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of kR(c))o.add(l);let a=0;return Te(o).pipe(qr(c=>s.has(c)?Lq(c,r,n,e):(c.data=gp(c,c.parent,n).resolve,se(void 0))),mt(()=>a++),Go(1),at(c=>a===o.size?se(t):Pt))})}function kR(n){let e=n.children.map(t=>kR(t)).flat();return[n,...e]}function Lq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!DR(i)&&(s[pl]=i.title),jq(s,n,e,r).pipe(re(o=>(n._resolvedData=o,n.data=gp(n,n.parent,t).resolve,null)))}function jq(n,e,t,r){let i=C_(n);if(i.length===0)return se({});let s={};return Te(i).pipe(at(o=>Uq(n[o],e,t,r).pipe(Tn(),mt(a=>{if(a instanceof dl)throw yp(new La,a);s[o]=a}))),Go(1),hu(s),xi(o=>AR(o)?Pt:Ho(o)))}function Uq(n,e,t,r){let i=ml(e)??r,s=$a(n,i),o=s.resolve?s.resolve(e,t):Un(i,()=>s(e,t));return Ji(o)}function b_(n){return Ne(e=>{let t=n(e);return t?Te(t).pipe(re(()=>e)):se(e)})}var NR=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===we);return i}getResolvedTitleForRoute(r){return r.data[pl]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>B(Bq),providedIn:"root"});let n=e;return n})(),Bq=(()=>{let e=class e extends NR{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(V(_n))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),wl=new K("",{providedIn:"root",factory:()=>({})}),$q=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Fe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Ru],decls:1,vars:0,template:function(i,s){i&1&&ve(0,"router-outlet")},dependencies:[Z_],encapsulation:2});let n=e;return n})();function J_(n){let e=n.children&&n.children.map(J_),t=e?ee(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=$q),t}var wp=new K(""),X_=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Nf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return se(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ji(r.loadComponent()).pipe(re(PR),mt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),ks(()=>{this.componentLoaders.delete(r)})),s=new jo(i,()=>new Oe).pipe(Lo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return se({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=zq(i,this.compiler,r,this.onLoadEndListener).pipe(ks(()=>{this.childrenLoaders.delete(i)})),a=new jo(o,()=>new Oe).pipe(Lo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function zq(n,e,t,r){return Ji(n.loadChildren()).pipe(re(PR),at(i=>i instanceof Du||Array.isArray(i)?se(i):Te(e.compileModuleAsync(i))),re(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(wp,[],{optional:!0,self:!0}).flat()),{routes:o.map(J_),injector:s}}))}function qq(n){return n&&typeof n=="object"&&"default"in n}function PR(n){return qq(n)?n.default:n}var eE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>B(Hq),providedIn:"root"});let n=e;return n})(),Hq=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),OR=new K(""),FR=new K("");function Gq(n,e,t){let r=n.get(FR),i=n.get(St);return n.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),Wq(n))),{onViewTransitionCreated:c}=r;return c&&Un(n,()=>c({transition:a,from:e,to:t})),o})}function Wq(n){return new Promise(e=>{gw({read:()=>setTimeout(e)},{injector:n})})}var Kq=new K(""),tE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Oe,this.transitionAbortSubject=new Oe,this.configLoader=B(X_),this.environmentInjector=B(nn),this.urlSerializer=B(gl),this.rootContexts=B(yl),this.location=B(Ea),this.inputBindingEnabled=B(Ep,{optional:!0})!==null,this.titleStrategy=B(NR),this.options=B(wl,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(eE),this.createViewTransition=B(OR,{optional:!0}),this.navigationErrorHandler=B(Kq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let r=s=>this.events.next(new N_(s)),i=s=>this.events.next(new P_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ee(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Nt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:il,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(lt(o=>o.id!==0),re(o=>ee(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ne(o=>{let a=!1,c=!1;return se(o).pipe(Ne(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Pn.SupersededByNewNavigation),Pt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ee(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&h!=="reload"){let p="";return this.events.next(new Zi(l.id,this.urlSerializer.serialize(l.rawUrl),p,lp.IgnoredSameUrlNavigation)),l.resolve(!1),Pt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(Ne(p=>{let m=this.transitions?.getValue();return this.events.next(new ja(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Pt:Promise.resolve(p)}),Fq(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),mt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ee(M({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new dp(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:w,extras:E}=l,R=new ja(p,this.urlSerializer.serialize(m),_,w);this.events.next(R);let O=IR(this.rootComponentType).snapshot;return this.currentTransition=o=ee(M({},l),{targetSnapshot:O,urlAfterRedirects:m,extras:ee(M({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,se(o)}else{let p="";return this.events.next(new Zi(l.id,this.urlSerializer.serialize(l.extractedUrl),p,lp.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Pt}}),mt(l=>{let d=new x_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),re(l=>(this.currentTransition=o=ee(M({},l),{guards:nq(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),fq(this.environmentInjector,l=>this.events.next(l)),mt(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw yp(this.urlSerializer,l.guardsResult);let d=new M_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),lt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Pn.GuardRejected),!1)),b_(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(mt(d=>{let h=new R_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Ne(d=>{let h=!1;return se(d).pipe(Vq(this.paramsInheritanceStrategy,this.environmentInjector),mt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",Pn.NoDataFromResolver)}}))}),mt(d=>{let h=new k_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),b_(l=>{let d=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(mt(m=>{h.component=m}),re(()=>{})));for(let m of h.children)p.push(...d(m));return p};return lu(d(l.targetSnapshot.root)).pipe(Mi(null),Hr(1))}),b_(()=>this.afterPreactivation()),Ne(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return h?Te(h).pipe(re(()=>o)):se(o)}),re(l=>{let d=Z4(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ee(M({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),mt(()=>{this.events.next(new ul)}),tq(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Hr(1),mt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new li(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),pu(this.transitionAbortSubject.pipe(mt(l=>{throw l}))),ks(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Pn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),xi(l=>{if(c=!0,SR(l))this.events.next(new ci(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),eq(l)?this.events.next(new Ua(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new cl(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let h=Un(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof dl){let{message:p,cancellationCode:m}=yp(this.urlSerializer,h);this.events.next(new ci(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Ua(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let p=r.errorHandler(l);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Pt}))}))}cancelNavigationTransition(r,i,s){let o=new ci(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Qq(n){return n!==il}var Yq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>B(Zq),providedIn:"root"});let n=e;return n})(),Q_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Zq=(()=>{let e=class e extends Q_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Au(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),VR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:()=>B(Jq),providedIn:"root"});let n=e;return n})(),Jq=(()=>{let e=class e extends VR{constructor(){super(...arguments),this.location=B(Ea),this.urlSerializer=B(gl),this.options=B(wl,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(eE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ui,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=IR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ja)this.stateMemento=this.createStateMemento();else if(r instanceof Zi)this.rawUrlTree=i.initialUrl;else if(r instanceof dp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof ul?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof ci&&(r.code===Pn.GuardRejected||r.code===Pn.NoDataFromResolver)?this.restoreHistory(i):r instanceof cl?this.restoreHistory(i,!0):r instanceof li&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof ui?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Au(e)))(s||e)}})(),e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),nl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(nl||{});function LR(n,e){n.events.pipe(lt(t=>t instanceof li||t instanceof ci||t instanceof cl||t instanceof Zi),re(t=>t instanceof li||t instanceof Zi?nl.COMPLETE:(t instanceof ci?t.code===Pn.Redirect||t.code===Pn.SupersededByNewNavigation:!1)?nl.REDIRECTING:nl.FAILED),lt(t=>t!==nl.REDIRECTING),Hr(1)).subscribe(()=>{e()})}function Xq(n){throw n}var eH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},On=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(xf),this.stateManager=B(VR),this.options=B(wl,{optional:!0})||{},this.pendingTasks=B($i),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(tE),this.urlSerializer=B(gl),this.location=B(Ea),this.urlHandlingStrategy=B(eE),this._events=new Oe,this.errorHandler=this.options.errorHandler||Xq,this.navigated=!1,this.routeReuseStrategy=B(Yq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(wp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Ep,{optional:!0}),this.eventsSubscription=new ot,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ci&&i.code!==Pn.Redirect&&i.code!==Pn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof li)this.navigated=!0;else if(i instanceof Ua){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=M({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Qq(s.source)},a);this.scheduleNavigation(c,il,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}rH(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),il,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=M({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(J_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=s?s.snapshot:this.routerState.snapshot.root;p=vR(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return wR(p,r,h,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=ol(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,il,null,i)}navigate(r,i={skipLocationChange:!1}){return nH(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=M({},eH):i===!1?s=M({},tH):s=i,ol(r))return JM(this.currentUrlTree,r,s);let o=this.parseUrl(r);return JM(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((p,m)=>{c=p,l=m});let h=this.pendingTasks.add();return LR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function nH(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}function rH(n){return!(n instanceof ul)&&!(n instanceof Ua)}var _p=class{};var iH=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(lt(r=>r instanceof li),qr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=_f(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Te(s).pipe(Si())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=se(null);let o=s.pipe(at(a=>a===null?se(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Te([o,a]).pipe(Si())}else return o})}};e.\u0275fac=function(i){return new(i||e)(V(On),V(Nf),V(nn),V(_p),V(X_))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),jR=new K(""),sH=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ja?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof li?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Zi&&r.code===lp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof hp&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new hp(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){_A()},e.\u0275prov=W({token:e,factory:e.\u0275fac});let n=e;return n})();function oH(n){return n.routerState.root}function _l(n,e){return{\u0275kind:n,\u0275providers:e}}function aH(){let n=B(xn);return e=>{let t=n.get(ri);if(e!==t.components[0])return;let r=n.get(On),i=n.get(UR);n.get(nE)===1&&r.initialNavigation(),n.get(BR,null,Ie.Optional)?.setUpPreloading(),n.get(jR,null,Ie.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var UR=new K("",{factory:()=>new Oe}),nE=new K("",{providedIn:"root",factory:()=>1});function cH(){return _l(2,[{provide:nE,useValue:0},{provide:wa,multi:!0,deps:[xn],useFactory:e=>{let t=e.get(Rx,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(On),s=e.get(UR);LR(i,()=>{r(!0)}),e.get(tE).afterPreactivation=()=>(r(!0),s.closed?se(void 0):s),i.initialNavigation()}))}}])}function uH(){return _l(3,[{provide:wa,multi:!0,useFactory:()=>{let e=B(On);return()=>{e.setUpLocationChangeListener()}}},{provide:nE,useValue:2}])}var BR=new K("");function lH(n){return _l(0,[{provide:BR,useExisting:iH},{provide:_p,useExisting:n}])}function dH(){return _l(8,[nR,{provide:Ep,useExisting:nR}])}function hH(n){let e=[{provide:OR,useValue:Gq},{provide:FR,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return _l(9,e)}var oR=new K("ROUTER_FORROOT_GUARD"),fH=[Ea,{provide:gl,useClass:La},On,yl,{provide:bn,useFactory:oH,deps:[On]},X_,[]],rE=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[fH,[],{provide:wp,multi:!0,useValue:r},{provide:oR,useFactory:yH,deps:[[On,new da,new Xh]]},{provide:wl,useValue:i||{}},i?.useHash?gH():mH(),pH(),i?.preloadingStrategy?lH(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?vH(i):[],i?.bindToComponentInputs?dH().\u0275providers:[],i?.enableViewTransitions?hH().\u0275providers:[],wH()]}}static forChild(r){return{ngModule:e,providers:[{provide:wp,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(V(oR,8))},e.\u0275mod=vt({type:e}),e.\u0275inj=yt({});let n=e;return n})();function pH(){return{provide:jR,useFactory:()=>{let n=B(Vx),e=B(_e),t=B(wl),r=B(tE),i=B(gl);return t.scrollOffset&&n.setOffset(t.scrollOffset),new sH(i,r,n,e,t)}}}function gH(){return{provide:Ks,useClass:Nx}}function mH(){return{provide:Ks,useClass:zw}}function yH(n){return"guarded"}function vH(n){return[n.initialNavigation==="disabled"?uH().\u0275providers:[],n.initialNavigation==="enabledBlocking"?cH().\u0275providers:[]]}var aR=new K("");function wH(){return[{provide:aR,useFactory:aH},{provide:kf,multi:!0,useExisting:aR}]}var Le=class n{static parseHtmlLine(e){return e.includes("Widget:")?{Widget:"NAVI"}:{PageType:e}}static isMobileBrowser(){let e=navigator.userAgent||window.opera;return!!(/android/i.test(e)||/iPad|iPhone|iPod/.test(e)&&!window.MSStream)}static toString(e){return e==null?"":typeof e=="string"?e:String(e)}static unescape(e){return e=this.toString(e),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")}static getTodaysDate(e){let t=new Date().toUTCString();return t=t.replaceAll(" ",e),t.replace(",","")}static getBasePath(e){let t="",r=e.snapshot.url[0];return r&&r.path&&(t=r.path),r&&r.path?.toLocaleLowerCase()}static getUrl(e){let t=e.url.indexOf("?");return t>0?e.url.substring(0,t):e.url}static getRouterUrl(e,t){return this.getUrl(e).replace("/"+t,"")}static getRouteParam(e,t){return e.snapshot.paramMap.get(t)?.toLocaleLowerCase()}static getQueryParam(e,t){return e.snapshot.queryParamMap.get(t)}static getFirstLineEnd(e){return e.indexOf(`
`)}static getFirstLine(e){let t=e.indexOf(`
`);return t!==-1?e.substring(0,t):e}static getDataValueFromString(e){let t=e.charAt(0);return t=="["?(e=e.replace(/'/g,'"'),e=JSON.parse(e),e):t=="'"||t=="`"||t=='"'?(e=e.replace(/'/g,'"'),JSON.parse(e)):new Number(e)}static getFilesInFolder(e,t){return e.files.filter(r=>r.includes(t))}static getFileNameWithoutCurrentFolder(e,t){return n.getFileName(e.substring(e.indexOf(t)+t.length+1),!0)}static getFileName(e,t=!1){let i=(t?e:e.substring(e.lastIndexOf("/")+1)).replace(/[-_]/g," ");return i.substring(0,i.lastIndexOf("."))}static getFileNameWithCategory(e,t=!1){let r="",i=e.lastIndexOf("/");e.indexOf("/")!=-1&&(r=t?e.substring(0,e.indexOf("/")):e.substring(e.lastIndexOf("/",i-1)+1,i));let a=e.substring(i+1).replace(/[-_]/g," ");return{Category:r,File:a.substring(0,a.lastIndexOf("."))}}static closestHost(e){e=e.substring(e.indexOf("."));let t=new Map;return t.set("raw.githubusercontent","github"),t.set(".githubusercontent","github"),t.set("youtu","youtube"),t.set(".publichome","link"),t.has(e)?t.get(e):e}static getGhUserFilePath(e,t,r=!1){return r?`${le.gh_api_url}/repos/${e}/${le.gh_private_dr_folder}/contents/${t}`:`${le.gh_dr_url}/${e}/${le.gh_dr_folder}/${t}`}};var qn=class{constructor(e){if(this.githubService=e,this.router=B(On),this.route=B(bn),this.messaging=B(In),this.routerFileUrl="",this.hasPrivateAccess=!1,this.githubUser=le.gh_default_user_repo,this.basePath="",this.articleFolderName="",this.isHomePageGHUser=!1,this.basePath=Le.getBasePath(this.route),this.basePath=="i"||te.INTERNAL_FOLDERS.includes(this.basePath)){let t=Le.getRouteParam(this.route,"folder");t||(t=this.basePath),this.articleFolderName=t}else console.debug("It is a user's public article !!");this.githubUser=Le.getRouteParam(this.route,"ghUser"),this.githubUser||(this.githubUser=le.gh_default_user_repo,this.isHomePageGHUser=!0),this.routerFileUrl=Le.getRouterUrl(this.router,this.githubUser),this.githubUser&&this.githubService.getJwtToken(this.githubUser).then(t=>this.githubService.getAccessToken(t).then(r=>{this.hasPrivateAccess=r!=null})).finally(()=>this.initialiseUserContext(this.githubUser))}initialiseUserContext(e){return C(this,null,function*(){this.githubService.get("users/"+e).then(t=>{te.ghUser=JSON.parse(t),te.userContext.username=e,this.githubService.getGhDirectoryContents(e).then(r=>{te.userContext.directory=r,this.messaging.send({cmd:"UserDirectory"})})}).finally(()=>{te.ghUserLoaded=e,this.messaging.send({cmd:"UserContext"})})})}getFolderName(){return this.articleFolderName}};function Wt(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function Dp(n,e,t,r){if(typeof t!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>Dp.bind(null,n,s,i,r),t)():Promise.resolve().then(()=>n.registry[e]?n.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),t)():t(r))}function $R(n,e,t,r){let i=r;n.registry[t]||(n.registry[t]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(c=>(a=c,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),n.registry[t].push({hook:r,orig:i})}function zR(n,e,t){if(!n.registry[e])return;let r=n.registry[e].map(i=>i.orig).indexOf(t);r!==-1&&n.registry[e].splice(r,1)}var qR=Function.bind,HR=qR.bind(qR);function GR(n,e,t){let r=HR(zR,null).apply(null,t?[e,t]:[e]);n.api={remove:r},n.remove=r,["before","error","after","wrap"].forEach(i=>{let s=t?[e,i,t]:[e,i];n[i]=n.api[i]=HR($R,null).apply(null,s)})}function _H(){let n=Symbol("Singular"),e={registry:{}},t=Dp.bind(null,e,n);return GR(t,e,n),t}function EH(){let n={registry:{}},e=Dp.bind(null,n);return GR(e,n),e}var WR={Singular:_H,Collection:EH};var IH="0.0.0-development",bH=`octokit-endpoint.js/${IH} ${Wt()}`,DH={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":bH},mediaType:{format:""}};function CH(n){return n?Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=n[t],e),{}):{}}function TH(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function YR(n,e){let t=Object.assign({},n);return Object.keys(e).forEach(r=>{TH(e[r])?r in n?t[r]=YR(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function KR(n){for(let e in n)n[e]===void 0&&delete n[e];return n}function sE(n,e,t){if(typeof e=="string"){let[i,s]=e.split(" ");t=Object.assign(s?{method:i,url:s}:{url:i},t)}else t=Object.assign({},e);t.headers=CH(t.headers),KR(t),KR(t.headers);let r=YR(n||{},t);return t.url==="/graphql"&&(n&&n.mediaType.previews?.length&&(r.mediaType.previews=n.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function SH(n,e){let t=/\?/.test(n)?"&":"?",r=Object.keys(e);return r.length===0?n:n+t+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var AH=/\{[^}]+\}/g;function xH(n){return n.replace(/^\W+|\W+$/g,"").split(/,/)}function MH(n){let e=n.match(AH);return e?e.map(xH).reduce((t,r)=>t.concat(r),[]):[]}function QR(n,e){let t={__proto__:null};for(let r of Object.keys(n))e.indexOf(r)===-1&&(t[r]=n[r]);return t}function ZR(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function qa(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function El(n,e,t){return e=n==="+"||n==="#"?ZR(e):qa(e),t?qa(t)+"="+e:e}function za(n){return n!=null}function iE(n){return n===";"||n==="&"||n==="?"}function RH(n,e,t,r){var i=n[t],s=[];if(za(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(El(e,i,iE(e)?t:""));else if(r==="*")Array.isArray(i)?i.filter(za).forEach(function(o){s.push(El(e,o,iE(e)?t:""))}):Object.keys(i).forEach(function(o){za(i[o])&&s.push(El(e,i[o],o))});else{let o=[];Array.isArray(i)?i.filter(za).forEach(function(a){o.push(El(e,a))}):Object.keys(i).forEach(function(a){za(i[a])&&(o.push(qa(a)),o.push(El(e,i[a].toString())))}),iE(e)?s.push(qa(t)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?za(i)&&s.push(qa(t)):i===""&&(e==="&"||e==="?")?s.push(qa(t)+"="):i===""&&s.push("");return s}function kH(n){return{expand:NH.bind(null,n)}}function NH(n,e){var t=["+","#",".","/",";","?","&"];return n=n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="",c=[];if(t.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(l){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(l);c.push(RH(e,a,d[1],d[2]||d[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(c.length!==0?a:"")+c.join(o)}else return c.join(",")}else return ZR(s)}),n==="/"?n:n.replace(/\/$/,"")}function JR(n){let e=n.method.toUpperCase(),t=(n.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},n.headers),i,s=QR(n,["method","baseUrl","url","headers","request","mediaType"]),o=MH(t);t=kH(t).expand(s),/^http/.test(t)||(t=n.baseUrl+t);let a=Object.keys(n).filter(d=>o.includes(d)).concat("baseUrl"),c=QR(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(n.mediaType.format&&(r.accept=r.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${n.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&n.mediaType.previews?.length)){let d=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=d.concat(n.mediaType.previews).map(h=>{let p=n.mediaType.format?`.${n.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${p}`}).join(",")}return["GET","HEAD"].includes(e)?t=SH(t,c):"data"in c?i=c.data:Object.keys(c).length&&(i=c),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:t,headers:r},typeof i<"u"?{body:i}:null,n.request?{request:n.request}:null)}function PH(n,e,t){return JR(sE(n,e,t))}function XR(n,e){let t=sE(n,e),r=PH.bind(null,t);return Object.assign(r,{DEFAULTS:t,defaults:XR.bind(null,t),merge:sE.bind(null,t),parse:JR})}var ek=XR(null,DH);var di=class extends Error{name;status;request;response;constructor(e,t,r){super(e),this.name="HttpError",this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);let i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}};var OH="0.0.0-development",FH={headers:{"user-agent":`octokit-request.js/${OH} ${Wt()}`}};function VH(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function tk(n){return C(this,null,function*(){let e=n.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let t=n.request?.log||console,r=n.request?.parseSuccessResponseBody!==!1,i=VH(n.body)||Array.isArray(n.body)?JSON.stringify(n.body):n.body,s=Object.fromEntries(Object.entries(n.headers).map(([h,p])=>[h,String(p)])),o;try{o=yield e(n.url,M({method:n.method,body:i,redirect:n.request?.redirect,headers:s,signal:n.request?.signal},n.body&&{duplex:"half"}))}catch(h){let p="Unknown Error";if(h instanceof Error){if(h.name==="AbortError")throw h.status=500,h;p=h.message,h.name==="TypeError"&&"cause"in h&&(h.cause instanceof Error?p=h.cause.message:typeof h.cause=="string"&&(p=h.cause))}let m=new di(p,500,{request:n});throw m.cause=h,m}let a=o.status,c=o.url,l={};for(let[h,p]of o.headers)l[h]=p;let d={url:c,status:a,headers:l,data:""};if("deprecation"in l){let h=l.link&&l.link.match(/<([^>]+)>; rel="deprecation"/),p=h&&h.pop();t.warn(`[@octokit/request] "${n.method} ${n.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${p?`. See ${p}`:""}`)}if(a===204||a===205)return d;if(n.method==="HEAD"){if(a<400)return d;throw new di(o.statusText,a,{response:d,request:n})}if(a===304)throw d.data=yield oE(o),new di("Not modified",a,{response:d,request:n});if(a>=400)throw d.data=yield oE(o),new di(LH(d.data),a,{response:d,request:n});return d.data=r?yield oE(o):o.body,d})}function oE(n){return C(this,null,function*(){let e=n.headers.get("content-type");return/application\/json/.test(e)?n.json().catch(()=>n.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?n.text():n.arrayBuffer()})}function LH(n){if(typeof n=="string")return n;if(n instanceof ArrayBuffer)return"Unknown error";if("message"in n){let e="documentation_url"in n?` - ${n.documentation_url}`:"";return Array.isArray(n.errors)?`${n.message}: ${n.errors.map(t=>JSON.stringify(t)).join(", ")}${e}`:`${n.message}${e}`}return`Unknown error: ${JSON.stringify(n)}`}function aE(n,e){let t=n.defaults(e);return Object.assign(function(i,s){let o=t.merge(i,s);if(!o.request||!o.request.hook)return tk(t.parse(o));let a=(c,l)=>tk(t.parse(t.merge(c,l)));return Object.assign(a,{endpoint:t,defaults:aE.bind(null,t)}),o.request.hook(a,o)},{endpoint:t,defaults:aE.bind(null,t)})}var Be=aE(ek,FH);var jH="0.0.0-development";function UH(n){return`Request failed due to following response errors:
`+n.errors.map(e=>` - ${e.message}`).join(`
`)}var BH=class extends Error{constructor(n,e,t){super(UH(t)),this.request=n,this.headers=e,this.response=t,this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},$H=["method","baseUrl","url","headers","request","query","mediaType"],zH=["query","method","url"],nk=/\/api\/v3\/?$/;function qH(n,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in t)if(zH.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let r=typeof e=="string"?Object.assign({query:e},t):e,i=Object.keys(r).reduce((o,a)=>$H.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||n.endpoint.DEFAULTS.baseUrl;return nk.test(s)&&(i.url=s.replace(nk,"/api/graphql")),n(i).then(o=>{if(o.data.errors){let a={};for(let c of Object.keys(o.headers))a[c]=o.headers[c];throw new BH(i,a,o.data)}return o.data.data})}function cE(n,e){let t=n.defaults(e);return Object.assign((i,s)=>qH(t,i,s),{defaults:cE.bind(null,t),endpoint:t.endpoint})}var Iee=cE(Be,{headers:{"user-agent":`octokit-graphql.js/${jH} ${Wt()}`},method:"POST",url:"/graphql"});function rk(n){return cE(n,{method:"POST",url:"/graphql"})}var HH=/^v1\./,GH=/^ghs_/,WH=/^ghu_/;function KH(n){return C(this,null,function*(){let e=n.split(/\./).length===3,t=HH.test(n)||GH.test(n),r=WH.test(n);return{type:"token",token:n,tokenType:e?"app":t?"installation":r?"user-to-server":"oauth"}})}function QH(n){return n.split(/\./).length===3?`bearer ${n}`:`token ${n}`}function YH(n,e,t,r){return C(this,null,function*(){let i=e.endpoint.merge(t,r);return i.headers.authorization=QH(n),e(i)})}var ik=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(KH.bind(null,e),{hook:YH.bind(null,e)})};var uE="6.1.2";var sk=()=>{},ZH=console.warn.bind(console),JH=console.error.bind(console),ok=`octokit-core.js/${uE} ${Wt()}`,lE=(()=>{class n{static VERSION=uE;static defaults(t){return class extends this{constructor(...i){let s=i[0]||{};if(typeof t=="function"){super(t(s));return}super(Object.assign({},t,s,s.userAgent&&t.userAgent?{userAgent:`${s.userAgent} ${t.userAgent}`}:null))}}}static plugins=[];static plugin(...t){let r=this.plugins;return class extends this{static plugins=r.concat(t.filter(s=>!r.includes(s)))}}constructor(t={}){let r=new WR.Collection,i={baseUrl:Be.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(i.headers["user-agent"]=t.userAgent?`${t.userAgent} ${ok}`:ok,t.baseUrl&&(i.baseUrl=t.baseUrl),t.previews&&(i.mediaType.previews=t.previews),t.timeZone&&(i.headers["time-zone"]=t.timeZone),this.request=Be.defaults(i),this.graphql=rk(this.request).defaults(i),this.log=Object.assign({debug:sk,info:sk,warn:ZH,error:JH},t.log),this.hook=r,t.authStrategy){let o=t,{authStrategy:a}=o,c=un(o,["authStrategy"]),l=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:c},t.auth));r.wrap("request",l.hook),this.auth=l}else if(!t.auth)this.auth=()=>C(this,null,function*(){return{type:"unauthenticated"}});else{let a=ik(t.auth);r.wrap("request",a.hook),this.auth=a}let s=this.constructor;for(let a=0;a<s.plugins.length;++a)Object.assign(this,s.plugins[a](this,t))}request;graphql;log;hook;auth}return n})();function XH(n){let e=n.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(e.baseUrl)?"https://github.com":e.baseUrl.replace("/api/v3","")}function Cp(n,e,t){return C(this,null,function*(){let r=M({baseUrl:XH(n),headers:{accept:"application/json"}},t),i=yield n(e,r);if("error"in i.data){let s=new di(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:n.endpoint.merge(e,r)});throw s.response=i,s}return i})}function lk(n){return C(this,null,function*(){let e=n.request||Be,t=yield Cp(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,code:n.code,redirect_uri:n.redirectUrl}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=ak(i,t.data.expires_in),r.refreshTokenExpiresAt=ak(i,t.data.refresh_token_expires_in)}delete r.scopes}return ee(M({},t),{authentication:r})})}function ak(n,e){return new Date(n+e*1e3).toISOString()}function dk(n){return C(this,null,function*(){let e=n.request||Be,t={client_id:n.clientId};return"scopes"in n&&Array.isArray(n.scopes)&&(t.scope=n.scopes.join(" ")),Cp(e,"POST /login/device/code",t)})}function dE(n){return C(this,null,function*(){let e=n.request||Be,t=yield Cp(e,"POST /login/oauth/access_token",{client_id:n.clientId,device_code:n.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),r={clientType:n.clientType,clientId:n.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in n&&(r.clientSecret=n.clientSecret),n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=ck(i,t.data.expires_in),r.refreshTokenExpiresAt=ck(i,t.data.refresh_token_expires_in)}delete r.scopes}return ee(M({},t),{authentication:r})})}function ck(n,e){return new Date(n+e*1e3).toISOString()}function hk(n){return C(this,null,function*(){let t=yield(n.request||Be)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`},client_id:n.clientId,access_token:n.token}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.token,scopes:t.data.scopes};return t.data.expires_at&&(r.expiresAt=t.data.expires_at),n.clientType==="github-app"&&delete r.scopes,ee(M({},t),{authentication:r})})}function fk(n){return C(this,null,function*(){let e=n.request||Be,t=yield Cp(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,grant_type:"refresh_token",refresh_token:n.refreshToken}),r=new Date(t.headers.date).getTime(),i={clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:uk(r,t.data.expires_in),refreshTokenExpiresAt:uk(r,t.data.refresh_token_expires_in)};return ee(M({},t),{authentication:i})})}function uk(n,e){return new Date(n+e*1e3).toISOString()}function pk(n){return C(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`),r=yield e("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token}),i={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:r.data.token,scopes:r.data.scopes};return r.data.expires_at&&(i.expiresAt=r.data.expires_at),n.clientType==="github-app"&&delete i.scopes,ee(M({},r),{authentication:i})})}function gk(n){return C(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function mk(n){return C(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function vk(n,e){return C(this,null,function*(){let t=e3(n,e.auth);if(t)return t;let{data:r}=yield dk({clientType:n.clientType,clientId:n.clientId,request:e.request||n.request,scopes:e.auth.scopes||n.scopes});yield n.onVerification(r);let i=yield hE(e.request||n.request,n.clientId,n.clientType,r);return n.authentication=i,i})}function e3(n,e){if(e.refresh===!0||!n.authentication)return!1;if(n.clientType==="github-app")return n.authentication;let t=n.authentication,r=("scopes"in e&&e.scopes||n.scopes).join(" "),i=t.scopes.join(" ");return r===i?t:!1}function yk(n){return C(this,null,function*(){yield new Promise(e=>setTimeout(e,n*1e3))})}function hE(n,e,t,r){return C(this,null,function*(){try{let i={clientId:e,request:n,code:r.device_code},{authentication:s}=t==="oauth-app"?yield dE(ee(M({},i),{clientType:"oauth-app"})):yield dE(ee(M({},i),{clientType:"github-app"}));return M({type:"token",tokenType:"oauth"},s)}catch(i){if(!i.response)throw i;let s=i.response.data.error;if(s==="authorization_pending")return yield yk(r.interval),hE(n,e,t,r);if(s==="slow_down")return yield yk(r.interval+5),hE(n,e,t,r);throw i}})}function t3(n,e){return C(this,null,function*(){return vk(n,{auth:e})})}function n3(n,e,t,r){return C(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);let{token:s}=yield vk(n,{request:e,auth:{type:"oauth"}});return i.headers.authorization=`token ${s}`,e(i)})}var r3="0.0.0-development";function wk(n){let e=n.request||Be.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${r3} ${Wt()}`}}),s=n,{request:t=e}=s,r=un(s,["request"]),i=n.clientType==="github-app"?ee(M({},r),{clientType:"github-app",request:t}):ee(M({},r),{clientType:"oauth-app",request:t,scopes:n.scopes||[]});if(!n.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!n.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(t3.bind(null,i),{hook:n3.bind(null,i)})}var Ek="0.0.0-development";function _k(n){return C(this,null,function*(){if("code"in n.strategyOptions){let{authentication:e}=yield lk(ee(M({clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}));return M({type:"token",tokenType:"oauth"},e)}if("onVerification"in n.strategyOptions){let t=yield wk(ee(M({clientType:n.clientType,clientId:n.clientId,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}))({type:"oauth"});return M({clientSecret:n.clientSecret},t)}if("token"in n.strategyOptions)return M({type:"token",tokenType:"oauth",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions);throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")})}function fE(t){return C(this,arguments,function*(n,e={}){if(n.authentication||(n.authentication=n.clientType==="oauth-app"?yield _k(n):yield _k(n)),n.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");let r=n.authentication;if("expiresAt"in r&&(e.type==="refresh"||new Date(r.expiresAt)<new Date)){let{authentication:i}=yield fk({clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,refreshToken:r.refreshToken,request:n.request});n.authentication=M({tokenType:"oauth",type:"token"},i)}if(e.type==="refresh"){if(n.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!r.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");yield n.onTokenCreated?.(n.authentication,{type:e.type})}if(e.type==="check"||e.type==="reset"){let i=e.type==="check"?hk:pk;try{let{authentication:s}=yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request});return n.authentication=M({tokenType:"oauth",type:"token"},s),e.type==="reset"&&(yield n.onTokenCreated?.(n.authentication,{type:e.type})),n.authentication}catch(s){throw s.status===404&&(s.message="[@octokit/auth-oauth-user] Token is invalid",n.authentication.invalid=!0),s}}if(e.type==="delete"||e.type==="deleteAuthorization"){let i=e.type==="delete"?gk:mk;try{yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request})}catch(s){if(s.status!==404)throw s}return n.authentication.invalid=!0,n.authentication}return n.authentication})}var i3=/\/applications\/[^/]+\/(token|grant)s?/;function Il(n){return n&&i3.test(n)}function s3(i,s,o){return C(this,arguments,function*(n,e,t,r={}){let a=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(a.url))return e(a);if(Il(a.url)){let l=btoa(`${n.clientId}:${n.clientSecret}`);return a.headers.authorization=`basic ${l}`,e(a)}let{token:c}=n.clientType==="oauth-app"?yield fE(ee(M({},n),{request:e})):yield fE(ee(M({},n),{request:e}));return a.headers.authorization="token "+c,e(a)})}function Tp(o){var a=o,{clientId:n,clientSecret:e,clientType:t="oauth-app",request:r=Be.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${Ek} ${Wt()}`}}),onTokenCreated:i}=a,s=un(a,["clientId","clientSecret","clientType","request","onTokenCreated"]);let c=Object.assign({clientType:t,clientId:n,clientSecret:e,onTokenCreated:i,strategyOptions:s,request:r});return Object.assign(fE.bind(null,c),{hook:s3.bind(null,c)})}Tp.VERSION=Ek;function o3(n,e){return C(this,null,function*(){if(e.type==="oauth-app")return{type:"oauth-app",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`}};if("factory"in e){let i=M(M({},e),n),{type:s}=i,o=un(i,["type"]);return e.factory(o)}let t=M({clientId:n.clientId,clientSecret:n.clientSecret,request:n.request},e);return(n.clientType==="oauth-app"?yield Tp(ee(M({},t),{clientType:n.clientType})):yield Tp(ee(M({},t),{clientType:n.clientType})))()})}function a3(n,e,t,r){return C(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);if(n.clientType==="github-app"&&!Il(i.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let s=btoa(`${n.clientId}:${n.clientSecret}`);i.headers.authorization=`basic ${s}`;try{return yield e(i)}catch(o){throw o.status!==401||(o.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),o}})}var c3="0.0.0-development";function Ik(n){let e=Object.assign({request:Be.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${c3} ${Wt()}`}}),clientType:"oauth-app"},n);return Object.assign(o3.bind(null,e),{hook:a3.bind(null,e)})}function Dk(n){return n.includes("-----BEGIN RSA PRIVATE KEY-----")}function Ck(n){return n.includes("-----BEGIN OPENSSH PRIVATE KEY-----")}function pE(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function Tk(n){let e=n.trim().split(`
`).slice(1,-1).join(""),t=atob(e);return pE(t)}function Sk(n,e){return`${bk(n)}.${bk(e)}`}function Ak(n){for(var e="",t=new Uint8Array(n),r=t.byteLength,i=0;i<r;i++)e+=String.fromCharCode(t[i]);return xk(btoa(e))}function xk(n){return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function bk(n){return xk(btoa(JSON.stringify(n)))}var{subtle:gE}=globalThis.crypto;function Mk(t){return C(this,arguments,function*({privateKey:n,payload:e}){let r=n;if(Dk(r))throw new Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");if(Ck(r))throw new Error("[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s={alg:"RS256",typ:"JWT"},o=Tk(r),a=yield gE.importKey("pkcs8",o,i,!1,["sign"]),c=Sk(s,e),l=pE(c),d=yield gE.sign(i.name,a,l),h=Ak(d);return`${c}.${h}`})}function mE(r){return C(this,arguments,function*({id:n,privateKey:e,now:t=Math.floor(Date.now()/1e3)}){let i=e.replace(/\\n/g,`
`),s=t-30,o=s+60*10,c=yield Mk({privateKey:i,payload:{iat:s,exp:o,iss:n}});return{appId:n,expiration:o,token:c}})}var Ha=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,kk=new Set,yE=typeof process=="object"&&process?process:{},Nk=(n,e,t,r)=>{typeof yE.emitWarning=="function"?yE.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)},Sp=globalThis.AbortController,Rk=globalThis.AbortSignal;if(typeof Sp>"u"){Rk=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},Sp=class{constructor(){e()}signal=new Rk;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let n=yE.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{n&&(n=!1,Nk("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var u3=n=>!kk.has(n),Cte=Symbol("type"),Xi=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),Pk=n=>Xi(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Ga:null:null,Ga=class extends Array{constructor(e){super(e),this.fill(0)}},vE=class n{heap;length;static#s=!1;static create(e){let t=Pk(e);if(!t)return[];n.#s=!0;let r=new n(e,t);return n.#s=!1,r}constructor(e,t){if(!n.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Ap=class n{#s;#u;#g;#m;#M;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#r;#n;#e;#l;#h;#c;#o;#v;#a;#w;#_;#f;#E;#T;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#f,sizes:e.#w,keyMap:e.#r,keyList:e.#n,valList:e.#e,next:e.#l,prev:e.#h,get head(){return e.#c},get tail(){return e.#o},free:e.#v,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,r,i,s)=>e.#P(t,r,i,s),moveToTail:t=>e.#x(t),indexes:t=>e.#I(t),rindexes:t=>e.#b(t),isStale:t=>e.#p(t)}}get max(){return this.#s}get maxSize(){return this.#u}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#M}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(e){let{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:p,maxSize:m=0,maxEntrySize:_=0,sizeCalculation:w,fetchMethod:E,memoMethod:R,noDeleteOnFetchRejection:O,noDeleteOnStaleGet:F,allowStaleOnFetchRejection:z,allowStaleOnFetchAbort:X,ignoreFetchAbort:Q}=e;if(t!==0&&!Xi(t))throw new TypeError("max option must be a nonnegative integer");let D=t?Pk(t):Array;if(!D)throw new Error("invalid max value: "+t);if(this.#s=t,this.#u=m,this.maxEntrySize=_||this.#u,this.sizeCalculation=w,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(R!==void 0&&typeof R!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=R,E!==void 0&&typeof E!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#M=E,this.#T=!!E,this.#r=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#l=new D(t),this.#h=new D(t),this.#c=0,this.#o=0,this.#v=vE.create(t),this.#i=0,this.#y=0,typeof l=="function"&&(this.#g=l),typeof d=="function"?(this.#m=d,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#E=!!this.#g,this.#d=!!this.#m,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!O,this.allowStaleOnFetchRejection=!!z,this.allowStaleOnFetchAbort=!!X,this.ignoreFetchAbort=!!Q,this.maxEntrySize!==0){if(this.#u!==0&&!Xi(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!Xi(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!F,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Xi(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Xi(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#s===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#u){let v="LRU_CACHE_UNBOUNDED";u3(v)&&(kk.add(v),Nk("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",v,n))}}getRemainingTTL(e){return this.#r.has(e)?1/0:0}#O(){let e=new Ga(this.#s),t=new Ga(this.#s);this.#f=e,this.#_=t,this.#F=(s,o,a=Ha.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#p(s)&&this.#D(this.#n[s],"expire")},o+1);c.unref&&c.unref()}},this.#S=s=>{t[s]=e[s]!==0?Ha.now():0},this.#C=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();let l=s.now-c;s.remainingTTL=a-l}};let r=0,i=()=>{let s=Ha.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#r.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let l=(r||i())-c;return a-l},this.#p=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#S=()=>{};#C=()=>{};#F=()=>{};#p=()=>!1;#B(){let e=new Ga(this.#s);this.#y=0,this.#w=e,this.#A=t=>{this.#y-=e[t],e[t]=0},this.#V=(t,r,i,s)=>{if(this.#t(r))return 0;if(!Xi(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!Xi(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#k=(t,r,i)=>{if(e[t]=r,this.#u){let s=this.#u-e[t];for(;this.#y>s;)this.#N(!0)}this.#y+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#y)}}#A=e=>{};#k=(e,t,r)=>{};#V=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#c));)t=this.#h[t]}*#b({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#c;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#o));)t=this.#l[t]}#L(e){return e!==void 0&&this.#r.get(this.#n[e])===e}*entries(){for(let e of this.#I())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#I()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#b()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#I())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#n[r],this))return this.get(this.#n[r],t)}}forEach(e,t=this){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}rforEach(e,t=this){for(let r of this.#b()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}purgeStale(){let e=!1;for(let t of this.#b({allowStale:!0}))this.#p(t)&&(this.#D(this.#n[t],"expire"),e=!0);return e}info(e){let t=this.#r.get(e);if(t===void 0)return;let r=this.#e[t],i=this.#t(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#f&&this.#_){let o=this.#f[t],a=this.#_[t];if(o&&a){let c=o-(Ha.now()-a);s.ttl=c,s.start=Date.now()}}return this.#w&&(s.size=this.#w[t]),s}dump(){let e=[];for(let t of this.#I({allowStale:!0})){let r=this.#n[t],i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#f&&this.#_){o.ttl=this.#f[t];let a=Ha.now()-this.#_[t];o.start=Math.floor(Date.now()-a)}this.#w&&(o.size=this.#w[t]),e.unshift([r,o])}return e}load(e){this.clear();for(let[t,r]of e){if(r.start){let i=Date.now()-r.start;r.start=Ha.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,d=this.#V(e,t,r.size||0,a);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#i===0?void 0:this.#r.get(e);if(h===void 0)h=this.#i===0?this.#o:this.#v.length!==0?this.#v.pop():this.#i===this.#s?this.#N(!1):this.#i,this.#n[h]=e,this.#e[h]=t,this.#r.set(e,h),this.#l[this.#o]=h,this.#h[h]=this.#o,this.#o=h,this.#i++,this.#k(h,d,c),c&&(c.set="add"),l=!1;else{this.#x(h);let p=this.#e[h];if(t!==p){if(this.#T&&this.#t(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=p;m!==void 0&&!o&&(this.#E&&this.#g?.(m,e,"set"),this.#d&&this.#a?.push([m,e,"set"]))}else o||(this.#E&&this.#g?.(p,e,"set"),this.#d&&this.#a?.push([p,e,"set"]));if(this.#A(h),this.#k(h,d,c),this.#e[h]=t,c){c.set="replace";let m=p&&this.#t(p)?p.__staleWhileFetching:p;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#f&&this.#O(),this.#f&&(l||this.#F(h,i,s),c&&this.#C(c,h)),!o&&this.#d&&this.#a){let p=this.#a,m;for(;m=p?.shift();)this.#m?.(...m)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#c];if(this.#N(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}}#N(e){let t=this.#c,r=this.#n[t],i=this.#e[t];return this.#T&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(i,r,"evict"),this.#d&&this.#a?.push([i,r,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#v.push(t)),this.#i===1?(this.#c=this.#o=0,this.#v.length=0):this.#c=this.#l[t],this.#r.delete(r),this.#i--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#r.get(e);if(s!==void 0){let o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(s))i&&(i.has="stale",this.#C(i,s));else return r&&this.#S(s),i&&(i.has="hit",this.#C(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#r.get(e);if(i===void 0||!r&&this.#p(i))return;let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#P(e,t,r,i){let s=t===void 0?void 0:this.#e[t];if(this.#t(s))return s;let o=new Sp,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:r,context:i},l=(w,E=!1)=>{let{aborted:R}=o.signal,O=r.ignoreFetchAbort&&w!==void 0;if(r.status&&(R&&!E?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,O&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),R&&!O&&!E)return h(o.signal.reason);let F=m;return this.#e[t]===m&&(w===void 0?F.__staleWhileFetching?this.#e[t]=F.__staleWhileFetching:this.#D(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,w,c.options))),w},d=w=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=w),h(w)),h=w=>{let{aborted:E}=o.signal,R=E&&r.allowStaleOnFetchAbort,O=R||r.allowStaleOnFetchRejection,F=O||r.noDeleteOnFetchRejection,z=m;if(this.#e[t]===m&&(!F||z.__staleWhileFetching===void 0?this.#D(e,"fetch"):R||(this.#e[t]=z.__staleWhileFetching)),O)return r.status&&z.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),z.__staleWhileFetching;if(z.__returned===z)throw w},p=(w,E)=>{let R=this.#M?.(e,s,c);R&&R instanceof Promise&&R.then(O=>w(O===void 0?void 0:O),E),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(w(void 0),r.allowStaleOnFetchAbort&&(w=O=>l(O,!0)))})};r.status&&(r.status.fetchDispatched=!0);let m=new Promise(p).then(l,d),_=Object.assign(m,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,_,ee(M({},c.options),{status:void 0})),t=this.#r.get(e)):this.#e[t]=_,_}#t(e){if(!this.#T)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Sp}fetch(r){return C(this,arguments,function*(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:l=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:_=this.ignoreFetchAbort,allowStaleOnFetchAbort:w=this.allowStaleOnFetchAbort,context:E,forceRefresh:R=!1,status:O,signal:F}=t;if(!this.#T)return O&&(O.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:O});let z={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:c,size:l,sizeCalculation:d,noUpdateTTL:h,noDeleteOnFetchRejection:p,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:w,ignoreFetchAbort:_,status:O,signal:F},X=this.#r.get(e);if(X===void 0){O&&(O.fetch="miss");let Q=this.#P(e,X,z,E);return Q.__returned=Q}else{let Q=this.#e[X];if(this.#t(Q)){let S=i&&Q.__staleWhileFetching!==void 0;return O&&(O.fetch="inflight",S&&(O.returnedStale=!0)),S?Q.__staleWhileFetching:Q.__returned=Q}let D=this.#p(X);if(!R&&!D)return O&&(O.fetch="hit"),this.#x(X),s&&this.#S(X),O&&this.#C(O,X),Q;let v=this.#P(e,X,z,E),T=v.__staleWhileFetching!==void 0&&i;return O&&(O.fetch=D?"stale":"refresh",T&&D&&(O.returnedStale=!0)),T?v.__staleWhileFetching:v.__returned=v}})}forceFetch(r){return C(this,arguments,function*(e,t={}){let i=yield this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i})}memo(e,t={}){let r=this.#R;if(!r)throw new Error("no memoMethod provided to constructor");let l=t,{context:i,forceRefresh:s}=l,o=un(l,["context","forceRefresh"]),a=this.get(e,o);if(!s&&a!==void 0)return a;let c=r(e,a,{options:o,context:i});return this.set(e,c,o),c}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#r.get(e);if(a!==void 0){let c=this.#e[a],l=this.#t(c);return o&&this.#C(o,a),this.#p(a)?(o&&(o.get="stale"),l?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#x(a),i&&this.#S(a),c))}else o&&(o.get="miss")}#j(e,t){this.#h[t]=e,this.#l[e]=t}#x(e){e!==this.#o&&(e===this.#c?this.#c=this.#l[e]:this.#j(this.#h[e],this.#l[e]),this.#j(this.#o,e),this.#o=e)}delete(e){return this.#D(e,"delete")}#D(e,t){let r=!1;if(this.#i!==0){let i=this.#r.get(e);if(i!==void 0)if(r=!0,this.#i===1)this.#U(t);else{this.#A(i);let s=this.#e[i];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(s,e,t),this.#d&&this.#a?.push([s,e,t])),this.#r.delete(e),this.#n[i]=void 0,this.#e[i]=void 0,i===this.#o)this.#o=this.#h[i];else if(i===this.#c)this.#c=this.#l[i];else{let o=this.#h[i];this.#l[o]=this.#l[i];let a=this.#l[i];this.#h[a]=this.#h[i]}this.#i--,this.#v.push(i)}}if(this.#d&&this.#a?.length){let i=this.#a,s;for(;s=i?.shift();)this.#m?.(...s)}return r}clear(){return this.#U("delete")}#U(e){for(let t of this.#b({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#n[t];this.#E&&this.#g?.(r,i,e),this.#d&&this.#a?.push([r,i,e])}}if(this.#r.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#f&&this.#_&&(this.#f.fill(0),this.#_.fill(0)),this.#w&&this.#w.fill(0),this.#c=0,this.#o=0,this.#v.length=0,this.#y=0,this.#i=0,this.#d&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#m?.(...r)}}};function xp(r){return C(this,arguments,function*({appId:n,privateKey:e,timeDifference:t}){try{let i=yield mE({id:n,privateKey:e,now:t&&Math.floor(Date.now()/1e3)+t});return{type:"app",token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(i){throw e==="-----BEGIN RSA PRIVATE KEY-----"?new Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):i}})}function l3(){return new Ap({max:15e3,ttl:1e3*60*59})}function d3(n,e){return C(this,null,function*(){let t=Fk(e),r=yield n.get(t);if(!r)return;let[i,s,o,a,c,l]=r.split("|"),d=e.permissions||c.split(/,/).reduce((h,p)=>(/!$/.test(p)?h[p.slice(0,-1)]="write":h[p]="read",h),{});return{token:i,createdAt:s,expiresAt:o,permissions:d,repositoryIds:e.repositoryIds,repositoryNames:e.repositoryNames,singleFileName:l,repositorySelection:a}})}function h3(n,e,t){return C(this,null,function*(){let r=Fk(e),i=e.permissions?"":Object.keys(t.permissions).map(o=>`${o}${t.permissions[o]==="write"?"!":""}`).join(","),s=[t.token,t.createdAt,t.expiresAt,t.repositorySelection,i,t.singleFileName].join("|");yield n.set(r,s)})}function Fk({installationId:n,permissions:e={},repositoryIds:t=[],repositoryNames:r=[]}){let i=Object.keys(e).sort().map(a=>e[a]==="read"?a:`${a}!`).join(","),s=t.sort().join(","),o=r.join(",");return[n,s,o,i].filter(Boolean).join("|")}function Ok({installationId:n,token:e,createdAt:t,expiresAt:r,repositorySelection:i,permissions:s,repositoryIds:o,repositoryNames:a,singleFileName:c}){return Object.assign({type:"token",tokenType:"installation",token:e,installationId:n,permissions:s,createdAt:t,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,a?{repositoryNames:a}:null,c?{singleFileName:c}:null)}function Vk(n,e,t){return C(this,null,function*(){let r=Number(e.installationId||n.installationId);if(!r)throw new Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(e.factory){let O=M(M({},n),e),{type:F,factory:z,oauthApp:X}=O,Q=un(O,["type","factory","oauthApp"]);return z(Q)}let i=Object.assign({installationId:r},e);if(!e.refresh){let F=yield d3(n.cache,i);if(F){let{token:z,createdAt:X,expiresAt:Q,permissions:D,repositoryIds:v,repositoryNames:I,singleFileName:T,repositorySelection:S}=F;return Ok({installationId:r,token:z,createdAt:X,expiresAt:Q,permissions:D,repositorySelection:S,repositoryIds:v,repositoryNames:I,singleFileName:T})}}let s=yield xp(n),o=t||n.request,{data:{token:a,expires_at:c,repositories:l,permissions:d,repository_selection:h,single_file:p}}=yield o("POST /app/installations/{installation_id}/access_tokens",{installation_id:r,repository_ids:e.repositoryIds,repositories:e.repositoryNames,permissions:e.permissions,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${s.token}`}}),m=d||{},_=h||"all",w=l?l.map(F=>F.id):void 0,E=l?l.map(F=>F.name):void 0,R=new Date().toISOString();return yield h3(n.cache,i,{token:a,createdAt:R,expiresAt:c,repositorySelection:_,permissions:m,repositoryIds:w,repositoryNames:E,singleFileName:p}),Ok({installationId:r,token:a,createdAt:R,expiresAt:c,repositorySelection:_,permissions:m,repositoryIds:w,repositoryNames:E,singleFileName:p})})}function f3(n,e){return C(this,null,function*(){switch(e.type){case"app":return xp(n);case"oauth-app":return n.oauthApp({type:"oauth-app"});case"installation":return Vk(n,ee(M({},e),{type:"installation"}));case"oauth-user":return n.oauthApp(e);default:throw new Error(`Invalid auth type: ${e.type}`)}})}var p3=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/app/installation-requests","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"];function g3(n){let t=`^(?:${n.map(r=>r.split("/").map(i=>i.startsWith("{")?"(?:.+?)":i).join("/")).map(r=>`(?:${r})`).join("|")})$`;return new RegExp(t,"i")}var m3=g3(p3);function y3(n){return!!n&&m3.test(n.split("?")[0])}var v3=5*1e3;function w3(n){return!(n.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||n.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}function _3(n,e,t,r){return C(this,null,function*(){let i=e.endpoint.merge(t,r),s=i.url;if(/\/login\/oauth\/access_token$/.test(s))return e(i);if(y3(s.replace(e.endpoint.DEFAULTS.baseUrl,""))){let{token:c}=yield xp(n);i.headers.authorization=`bearer ${c}`;let l;try{l=yield e(i)}catch(d){if(w3(d)||typeof d.response.headers.date>"u")throw d;let h=Math.floor((Date.parse(d.response.headers.date)-Date.parse(new Date().toString()))/1e3);n.log.warn(d.message),n.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${h} seconds. Retrying request with the difference accounted for.`);let{token:p}=yield xp(ee(M({},n),{timeDifference:h}));return i.headers.authorization=`bearer ${p}`,e(i)}return l}if(Il(s)){let c=yield n.oauthApp({type:"oauth-app"});return i.headers.authorization=c.headers.authorization,e(i)}let{token:o,createdAt:a}=yield Vk(n,{},e.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,Lk(n,e,i,a)})}function Lk(n,e,t,r,i=0){return C(this,null,function*(){let s=+new Date-+new Date(r);try{return yield e(t)}catch(o){if(o.status!==401)throw o;if(s>=v3)throw i>0&&(o.message=`After ${i} retries within ${s/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let a=i*1e3;return n.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${a/1e3}s)`),yield new Promise(c=>setTimeout(c,a)),Lk(n,e,t,r,i)}})}var E3="7.1.1";function wE(n){if(!n.appId)throw new Error("[@octokit/auth-app] appId option is required");if(!n.privateKey)throw new Error("[@octokit/auth-app] privateKey option is required");if("installationId"in n&&!n.installationId)throw new Error("[@octokit/auth-app] installationId is set to a falsy value");let e=Object.assign({warn:console.warn.bind(console)},n.log),t=n.request||Be.defaults({headers:{"user-agent":`octokit-auth-app.js/${E3} ${Wt()}`}}),r=Object.assign({request:t,cache:l3()},n,n.installationId?{installationId:Number(n.installationId)}:{},{log:e,oauthApp:Ik({clientType:"github-app",clientId:n.clientId||"",clientSecret:n.clientSecret||"",request:t})});return Object.assign(f3.bind(null,r),{hook:_3.bind(null,r)})}var I3="firebase",b3="10.14.1";Ti(I3,b3,"app");var D3=(n,e)=>{let t=e?[e]:aC(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},to=class{constructor(){return D3(C3)}},C3="app-check";function _E(){}var Mp=class{zone;delegate;constructor(e,t=Xm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},EE=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",_E,{},_E,_E)),t.pipe(mt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Wa=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Mp(Zone.current)),this.insideAngular=t.run(()=>new Mp(Zone.current,zo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(V(_e))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function T3(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Kt(n){return S3(T3())(n)}function S3(n){return function(t){return t=t.lift(new EE(n.ngZone)),t.pipe(Zn(n.outsideAngular),dn(n.insideAngular))}}var A3="firebase",x3="10.14.1";Qn.registerVersion(A3,x3,"app-compat");var M3=["ngOnDestroy"],Rp=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(M3.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let h=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,h),h})})})});var bE=class{constructor(e){return e}},es=new K("angularfire2.app.options"),Ka=new K("angularfire2.app.name");function Qa(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=Qn.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Qn.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;R3("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new bE(o)}var R3=(n,...e)=>{Mw()&&typeof console<"u"&&console[n](...e)};function Ya(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return k3(i,o)||(jk("error",`${e} was already initialized on the ${t} Firebase App with different settings.${N3?" You may need to reload as Firebase is not HMR aware.":""}`),jk("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function k3(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var N3=typeof module<"u"&&!!module.hot,jk=(n,...e)=>{Mw()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var O3=new K("angularfire2.remoteConfig.settings"),F3=new K("angularfire2.remoteConfig.defaultConfig"),Bk={strings:"asString",numbers:"asNumber",booleans:"asBoolean"},V3={numbers:0,booleans:!1,strings:void 0},DE=(n,e)=>new Proxy(n.pipe(U3(e)),{get:(t,r)=>t[r]||n.pipe(re(i=>i.find(s=>s.key===r)),re(i=>i?i[Bk[e]]():V3[e]),Gr())}),kp=class{_source;_value;asBoolean(){return["1","true","t","y","yes","on"].indexOf(this._value.toLowerCase())>-1}asString(){return this._value}asNumber(){return Number(this._value)||0}getSource(){return this._source}constructor(e,t){this._source=e,this._value=t}},CE=class extends kp{key;fetchTimeMillis;constructor(e,t,r,i){super(r,i),this.key=e,this.fetchTimeMillis=t}};var L3=n=>Vo(ay(n),Wr((e,[t,r])=>[...e.map(s=>s.key),...Object.keys(t)].filter((s,o,a)=>a.indexOf(s)===o).map(s=>{let o=t[s];return o?new CE(s,r?r.fetchTimeMillis:-1,o.getSource(),o.asString()):e.find(a=>a.key===s)}),[])),$k=(()=>{class n{zone;changes;parameters;numbers;booleans;strings;constructor(t,r,i,s,o,a,c){this.zone=o;let l=se(void 0).pipe(dn(a.outsideAngular),Ne(()=>cC()),Ne(w=>w?import("./chunk-33QDDZV7.js"):Pt),re(()=>Qa(t,o,r)),re(w=>Ya(`${w.name}.remote-config`,"AngularFireRemoteConfig",w.name,()=>{let E=w.remoteConfig();return i&&(E.settings=i),s&&(E.defaultConfig=s),E},[i,s])),Jn(void 0),Kr({bufferSize:1,refCount:!1})),d=l.pipe(lt(w=>!!w)),h=se(Object.keys(s||{}).reduce((w,E)=>ee(M({},w),{[E]:new kp("default",s[E].toString())}),{})),p=re(w=>Object.keys(w).filter(E=>w[E].getSource()!=="default").reduce((E,R)=>ee(M({},E),{[R]:w[R]}),{})),m=d.pipe(Ne(w=>w.activate().then(()=>w.ensureInitialized()).then(()=>w.getAll())),p),_=d.pipe(Ne(w=>o.runOutsideAngular(()=>w.fetchAndActivate().then(()=>w.ensureInitialized()).then(()=>w.getAll()))),p);return this.parameters=Ai(h,m,_).pipe(L3(l),Kt,Kr({bufferSize:1,refCount:!0})),this.changes=this.parameters.pipe(Ne(w=>se(...w)),iy(w=>w.key),at(w=>w.pipe(Gr()))),this.strings=DE(this.parameters,"strings"),this.booleans=DE(this.parameters,"booleans"),this.numbers=DE(this.parameters,"numbers"),Rp(this,d,o)}static \u0275fac=function(r){return new(r||n)(V(es),V(Ka,8),V(O3,8),V(F3,8),V(_e),V(Wa),V(Tt))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var j3=n=>{switch(typeof n){case"string":return"asString";case"boolean":return"asBoolean";case"number":return"asNumber";default:return"asString"}};function U3(n="strings"){return Vo(re(e=>e.reduce((t,r)=>ee(M({},t),{[r.key]:typeof n=="object"?r[j3(n[r.key])]():r[Bk[n]]()}),typeof n=="object"?n:{})),Gr((e,t)=>JSON.stringify(e)===JSON.stringify(t)))}var Np=(()=>{let e=class e{setGithubUserProperty(r){}constructor(r){this.remoteConfig=r,this.configInitialized=!1,this.privateGhKey=""}initializeRemoteConfig(){return this.remoteConfig.fetch().then(()=>{this.configInitialized=!0}).catch(r=>{console.error("Error fetching Config:",r)}).finally(()=>C(this,null,function*(){this.privateGhKey=(yield this.remoteConfig.getValue("private_gh_key")).asString(),Promise.resolve()}))}getRemoteConfigValue(r){return C(this,null,function*(){return this.remoteConfig.getValue(r)})}};e.\u0275fac=function(i){return new(i||e)(V($k))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Qt=(()=>{let e=class e{constructor(r){this._http=r,this.remoteConfig=B(Np),this.applicationId="1012063",this.privateKey="",this.installationId="Iv23li7aCJeV1yPt8rcr",this.accessToken=null,this.fetchOptions={},this.httpHeaders=new ar({Accept:"application/json"}),this.ghUser={authenticated:!1,name:"",login:"",avatar_url:"/assets/github-logo.png",email:""},this.token={access_token:"",scope:"",token_type:""},this.privateKey=this.remoteConfig.privateGhKey,this.octokit=this.octokit=new lE({authStrategy:wE,auth:{appId:this.applicationId,privateKey:this.privateKey}})}getInstallationId(r){return C(this,null,function*(){this.installationId="";try{let i=yield this.octokit.request("GET /repos/{owner}/my/installation",{owner:r,repo:"my"});return i.status==200?(this.installationId=i.data.id,this.octokit=new lE({authStrategy:wE,auth:{appId:this.applicationId,privateKey:this.privateKey,installationId:this.installationId}}),this.installationId):null}catch(i){console.debug("Error fetching InstallationId :",i)}return null})}getJwtToken(r,i=""){return C(this,null,function*(){let s=null;if(r)try{yield this.getInstallationId(r)}catch(o){console.debug("Error fetching InstallationId :",o)}if(this.installationId)try{let o=yield this.octokit.auth({type:"app"});o.token&&(this.fetchOptions={headers:{Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${o.token}`,"X-GitHub-Api-Version":"2022-11-28"}},s=o.token)}catch(o){throw console.error("Error fetching JWT:",o),o}return s})}getAccessToken(r){return C(this,null,function*(){if(this.accessToken=null,this.installationId)try{let i=yield fetch(`https://api.github.com/app/installations/${this.installationId}/access_tokens`,ee(M({},this.fetchOptions),{method:"POST"}));if(i.ok){let s=yield i.json();this.fetchOptions={headers:{"X-GitHub-Api-Version":"2022-11-28",Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${s.token}`}},this.accessToken=s.token}return this.accessToken}catch(i){throw console.error("Error fetching AccessToken:",i),i}return this.accessToken})}getInstalledContent(r,i="README.md"){return C(this,null,function*(){let s="Resource not Found";try{s=yield this.get(`repos/${r}/my/contents/${i}`)}catch(o){console.error("Error fetching repository:",o)}return s})}setToken(r){this.token=r}getSavedToken(){return this.ghUser.authenticated?this.token.access_token:""}getSavedUser(){return this.ghUser}isAuthenticated(){return this.ghUser.authenticated}setUserAuthenticated(r){this.ghUser.authenticated=r}setEmail(r){this.ghUser.email=r}getEmail(){return this.ghUser.email}setName(r){this.ghUser.name=r}setUserId(r){this.ghUser.login=r}getUserId(){return this.ghUser.login}setAvatar(r){return this.ghUser.avatar_url=r}creatHttpHeaders(r){return this.httpHeaders.append("Authorization","Bearer "+r)}getAuthUrl(){return`${le.gh_auth_url}?client_id=${le.client_id}`}getInstalledAccessToken(){return this.accessToken}hasInstalledAccessToken(){return this.accessToken!=null}getToken(r){return le.production?this._http.get(`${le.host}/ghproxy.php?code=${r}`):this._http.get(`${le.host}/token/ghproxy.php?code=${r}`)}getUser(r){return this._http.get(`${le.gh_api_url}/user`,{headers:this.creatHttpHeaders(r)})}getInternalArticleContent(r,i=""){return r=i?`${i}/${r}`:r,this.getMdFileContent(le.gh_default_user_repo,r)}getReadMeContent(r){let i=`${le.gh_dr_url}/${r}/${le.gh_dr_folder}/README.md`;return fetch(i,this.fetchOptions).then(s=>s.ok?s.text():Promise.reject("Resource not found"))}getMdFileContent(r,i){i=i.replace(/^\/?/,"")+(i.endsWith(".md")?"":".md");let s=Le.getGhUserFilePath(r,i,this.accessToken!=null);return fetch(s,this.fetchOptions).then(o=>o.ok?o.text():Promise.reject("Resource not found"))}getFileContent(r,i,s){return s=i?`${i}/${s}`:s,this.getMdFileContent(r,s)}getLocalFileContent(r){return fetch(r,this.fetchOptions).then(i=>i.ok?i:Promise.reject("Resource not found"))}getGhDirectoryContents(r,i=!0,s=""){let o=`${le.gh_api_url}/repos/${r}/my/git/trees/main`;i||(o=`${le.gh_api_url}/repos/${r}/my/contents/${s}?ref=main`),o+=i?"?recursive=1":"";let a={root:"/",files:[],folders:[]};return fetch(o,this.fetchOptions).then(c=>c.ok?c.json():Promise.reject("Directory not found")).then(c=>{let l;if(c.tree?l=c.tree:l=c,l&&l.forEach(d=>{if(d.type==="tree"||d.type==="dir"){let h=d.path.split("/")[0];a.folders.includes(h)||a.folders.push(h)}else(d.type==="file"||d.type==="blob"&&d.path!=".DS_Store")&&a.files.push(d.path)}),s){let d=Le.getFilesInFolder(a,s);a.root=s,a.files=d}return Promise.resolve(a)}).catch(c=>Promise.reject("Folder not found"))}getFirstCertificate(r="certificates"){return this.getGhDirectoryContents(le.gh_default_user_repo,!1,r).then(i=>{let s=i;return s.files&&s.files.length==0?Promise.reject(""):Promise.resolve(`${le.gh_dr_url}/${le.gh_default_user_repo}/${le.gh_dr_folder}/${s.files[0]}`)})}get(r){return fetch(`${le.gh_api_url}/${r}`,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("Resource not found"))}};e.\u0275fac=function(i){return new(i||e)(V(Qs))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var zk=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Fe({type:e,selectors:[["app-webfront-jumbotron"]],decls:39,vars:0,consts:[[1,"masthead"],[1,"container","px-4","px-lg-5","d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","justify-content-center"],[1,"text-center"],[1,"mx-auto","my-0","text-uppercase"],[1,"text-white-50","mx-auto","mt-2","mb-5"],["href","#about",1,"btn","btn-primary"],["id","about",1,"about-section","text-center"],[1,"container","px-lg-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"text-white","mb-4"],[1,"text-white-50"],[1,"row","py-4","justify-content-center"],["id","contactForm","data-sb-form-api-token","API_TOKEN",1,"form-signup"],[1,"row","input-group-newsletter","justify-content-center"],[1,"col-6"],["id","emailAddress","type","email","placeholder","Enter email address...","aria-label","Enter email address...","data-sb-validations","required,email",1,"form-control"],[1,"col-auto"],["id","submitButton","type","Submit","onclick","sendMessage()",1,"btn","btn-primary"],["data-sb-feedback","emailAddress:required",1,"invalid-feedback","mt-2"],["data-sb-feedback","emailAddress:email",1,"invalid-feedback","mt-2"],["id","submitSuccessMessage",1,"d-none"],[1,"text-center","mb-3","mt-2","text-white"],[1,"fw-bolder"],["href",""],["id","submitErrorMessage",1,"d-none"],[1,"text-center","text-danger","mb-3","mt-2"]],template:function(i,s){i&1&&(L(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),G(5,"Own your own Homepage"),$(),L(6,"h2",5),G(7,"Want to Own a Public Homepage ?"),$(),L(8,"a",6),G(9,"Get Started"),$()()()()(),L(10,"section",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2",11),G(15,"Your PublicHome.Page is Your secret sauce!"),$(),L(16,"div",12),G(17," Boost your business or portfolio's visibility to millions with a strong public presence. It's easy to get started ! Contact us today and elevate your brand. "),$()()(),L(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16),ve(22,"input",17),$(),L(23,"div",18)(24,"button",19),G(25,"Notify"),$()()(),L(26,"div",20),G(27,"An email is required."),$(),L(28,"div",21),G(29,"Email is not valid."),$(),L(30,"div",22)(31,"div",23)(32,"div",24),G(33,"Thank you for your interest!"),$(),ve(34,"br")(35,"a",25),$()(),L(36,"div",26)(37,"div",27),G(38,"Error sending message!"),$()()()()()())},dependencies:[KM,$M,v_]});let n=e;return n})();var qk=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.homePageFile=te.readme_home;let o=s.snapshot.url[0];o&&o.path=="questions"&&(this.homePageFile=te.fab_questions_list2)}};e.\u0275fac=function(i){return new(i||e)(H(Qt),H(On),H(bn))},e.\u0275cmp=Fe({type:e,selectors:[["app-webfront-main"]],decls:5,vars:1,consts:[[1,"container"],["id","questions",1,"row","justify-content-center"],[1,""],[1,"container",3,"src"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),G(4,`
            `),$()()()()),i&2&&(q(3),ae("src",s.homePageFile))},dependencies:[Tr]});let n=e;return n})();var Hk=(()=>{let e=class e extends qn{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.metaService=o,this.messaging.event$.subscribe(a=>{switch(a.cmd){case"UserContext":te.homeUser=te.ghUser;break;case"UserDirectory":this.messaging.send({cmd:"PageFile",file:"HomeGHUser"});break;default:break}})}ngOnInit(){this.metaService.addTag({name:"keywords",content:"My Brand, Your brand, Your landing page, Resume Builder, Resume"}),this.metaService.addTag({name:"description",content:"Own your Own page ! Create your brand, Reach millions"})}ngOnDestroy(){}};e.\u0275fac=function(i){return new(i||e)(H(En),H(Qt),H(_n),H(sM))},e.\u0275cmp=Fe({type:e,selectors:[["home"]],features:[_t],decls:2,vars:0,template:function(i,s){i&1&&ve(0,"app-webfront-jumbotron")(1,"app-webfront-main")},dependencies:[zk,qk]});let n=e;return n})();var q3=n=>({"text-center":n});function H3(n,e){if(n&1&&(L(0,"h2"),G(1),$()),n&2){let t=De(2);q(),ze(t.contacts_title)}}function G3(n,e){if(n&1&&(L(0,"a",15),ve(1,"i"),G(2),$()),n&2){let t=De().$implicit,r=De(2);Mn("href",r.availableLinks.get(t.key),dt),q(),Ef("fa-brands fa-",t.key,""),ma("color",r.iconsByKey.get(t.key)),q(),Ot(" ",r.availableTexts.get(t.key),"")}}function W3(n,e){if(n&1&&(L(0,"a",15),G(1),$()),n&2){let t=De().$implicit,r=De(2);ae("href",r.availableLinks.get(t.key),dt),q(),ze(r.availableLinks.get(t.key))}}function K3(n,e){if(n&1&&(L(0,"div"),Ve(1,G3,3,7,"a",14)(2,W3,2,2,"ng-template",null,0,Af),$()),n&2){let t=e.$implicit,r=bf(3);q(),ae("ngIf",t.key!="link")("ngIfElse",r)}}function Q3(n,e){if(n&1&&(L(0,"div",9)(1,"div",10),ve(2,"img",11),L(3,"h5"),G(4),$(),L(5,"p"),G(6),$(),Ve(7,H3,2,1,"h2",12)(8,K3,4,2,"div",13),Ft(9,"keyvalue"),Ft(10,"slice"),$()()),n&2){let t=De();q(2),Mn("src",t.userData.avatar_url,dt),q(2),ze(t.userData.name||t.userData.login),q(2),ze(t.userData.bio),q(),ae("ngIf",t.contacts_title),q(),ae("ngForOf",va(10,7,Rn(9,5,t.availableLinks),0,7))}}function Y3(n,e){if(n&1&&(L(0,"a",16),ve(1,"img",17),$()),n&2){let t=e.$implicit;q(),Mn("src",t,dt)}}var TE=(()=>{let e=class e extends qn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.badgesAvailable=[],this.contactPageContent="Loading..",this.contactsContent="",this.availableLinks=new Map,this.availableTexts=new Map,this.iconsByKey=te.iconsColorByKey,this.useUsersContent=!1,this.firstList=!0,this.firstHtml=!0,this.contacts_title="",this.userData={},this.certificateLink="",this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.titleService.setTitle(te.ghUser.name),this.userData=te.ghUser,this.githubService.getMdFileContent(te.ghUserLoaded,this.routerFileUrl).then(l=>this.contactPageContent=l);break;case"UserDirectory":let c=Le.getFilesInFolder(te.userContext.directory,"certificates/badges");for(let l of c){let d=Le.getGhUserFilePath(te.ghUserLoaded,l,this.githubService.hasInstalledAccessToken());this.badgesAvailable.push(d),this.badgesAvailable.length==1&&(this.certificateLink=this.badgesAvailable[0])}break;default:break}})}ngOnInit(){te.contactLinksByKey.clear(),this.markdownService.renderer.html=r=>(this.useUsersContent=this.firstHtml?Le.getFirstLine(r)=="<!-- My Contacts -->":this.useUsersContent,this.firstHtml=!1,r),this.markdownService.renderer.list=(r,i,s)=>this.firstList||!this.useUsersContent?(this.firstList=!1,""):nt.prototype.list.call(this.markdownService.renderer,r,i,s)}onMarkdownReady(){this.firstHtml,this.iconsByKey=te.iconsColorByKey,this.availableLinks=te.contactLinksByKey,this.availableTexts=te.contactTextsByKey,this.messaging.send({cmd:"PageFile",file:"Contacts"})}};e.\u0275fac=function(i){return new(i||e)(H(En),H(Qt),H(_n))},e.\u0275cmp=Fe({type:e,selectors:[["app-contact"]],features:[_t],decls:9,vars:6,consts:[["nonbrandLink",""],[1,"container"],[1,"row","justify-content-center",3,"ngClass"],[1,"col-lg-8"],[1,"container",3,"ready","data"],["class","row justify-content-center",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-center"],["href","/certificates",4,"ngFor","ngForOf"],[1,"row","justify-content-center"],[1,"col-lg-6"],["alt","Passport Pic",1,"col-4","rounded-circle",3,"src"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","btn btn-outline-secondary my-2","style","width:100%","target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",1,"btn","btn-outline-secondary","my-2",2,"width","100%",3,"href"],["href","/certificates"],["alt","Thumbnail Image",3,"src"]],template:function(i,s){i&1&&(L(0,"div",1)(1,"div",2)(2,"div",3)(3,"markdown",4),tt("ready",function(){return s.onMarkdownReady()}),G(4,`
            `),$()(),Ve(5,Q3,11,11,"div",5),L(6,"div",6)(7,"div",7),Ve(8,Y3,2,1,"a",8),$()()()()),i&2&&(q(),ae("ngClass",Tf(4,q3,!s.useUsersContent)),q(2),ae("data",s.contactPageContent),q(2),ae("ngIf",!s.useUsersContent),q(3),ae("ngForOf",s.badgesAvailable))},dependencies:[Ia,wn,$n,Tr,ba,Hi]});let n=e;return n})();function Z3(n,e){if(n&1&&(L(0,"a",9),ve(1,"i"),$()),n&2){let t=De().$implicit,r=De();ae("href",r.availableLinks.get(t.key),dt),q(),Ef("fa-brands fa-",t.key,""),ma("color",r.iconsByKey.get(t.key))}}function J3(n,e){if(n&1&&(L(0,"a",9),ve(1,"i",10),$()),n&2){let t=De().$implicit,r=De();ae("href",r.availableLinks.get(t.key),dt)}}function X3(n,e){if(n&1&&(L(0,"li"),Ve(1,Z3,2,6,"a",8)(2,J3,2,1,"ng-template",null,0,Af),$()),n&2){let t=e.$implicit,r=bf(3),i=De();q(),ae("ngIf",i.hasBrandLink(t.key))("ngIfElse",r)}}var Gk=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.messaging=i,this.route=s,this.footerNote="Copyright",this.contactsFileUrl=te.user_contacts,this.availableLinks=new Map,this.iconsByKey=te.iconsColorByKey,this.oldRender={}}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"UserDirectory":this.footerNote="Powered By",this.loadContacts(te.userContext.username);break;case"PageFile":switch(i.file){case"HomeGHUser":this.footerNote="Copyright";break;case"Contacts":this.availableLinks=te.contactLinksByKey;break;default:break}break;default:break}}),this.loadContacts(le.gh_default_user_repo)}availableKeys(){return this.availableLinks.keys()}loadContacts(r){this.githubService.getMdFileContent(r,"contacts.md").then(i=>{te.contactLinksByKey.clear(),this.parseMarkdownWithCustomRenderer(i)}).catch(i=>{console.log("Contacts not available")}).finally(()=>{this.availableLinks=te.contactLinksByKey})}parseMarkdownWithCustomRenderer(r){let i=new nt;return i.link=(s,o,a)=>{try{if(s){let l=new URL(s).hostname.replace("www.","");l=l.substring(0,l.lastIndexOf(".")),l=Le.closestHost(l),te.contactLinksByKey.set(l,s),te.iconsColorByKey.has(l)?te.contactTextsByKey.set(l,this.getHostText(l)):te.contactTextsByKey.set(l,a!=s?Le.unescape(a):this.getHostText(l))}}catch{}return nt.prototype.link.call(i,s,o,a)},Se(r,{renderer:i})}hasBrandLink(r){return r!="link"&&te.iconsColorByKey.get(r)}ngAfterViewInit(){}getHostText(r){switch(r){case"youtube":return"YouTube";case"github":return"Github";case"linkedin":return"Linkedin";default:break}return r}};e.\u0275fac=function(i){return new(i||e)(H(Qt),H(In),H(bn))},e.\u0275cmp=Fe({type:e,selectors:[["app-footer"]],decls:12,vars:8,consts:[["nonbrandLink",""],["id","contact",1,"text-center"],[1,"container"],[1,"socials-media","text-center"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"credits"],["href","/"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"fa-solid","fa-link"]],template:function(i,s){i&1&&(L(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4),Ve(4,X3,4,2,"li",5),Ft(5,"keyvalue"),Ft(6,"slice"),$()(),L(7,"div",6),G(8),L(9,"a",7),G(10,"www.publichome.page"),$(),G(11," All rights reserved. "),$()()()),i&2&&(q(4),ae("ngForOf",va(6,4,Rn(5,2,s.availableLinks),0,7)),q(4),Ot(" ",s.footerNote," \xA9 "))},dependencies:[wn,$n,ba,Hi],styles:['#contact[_ngcontent-%COMP%]{background:#f7f7f7;padding-top:25px;padding-bottom:25px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]{width:100%}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;float:none;margin:0}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-right:10px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:24px;color:#999;letter-spacing:.1em;font-weight:500;background:transparent;text-transform:uppercase;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8a07e;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.1em;font-weight:500;margin-top:0;text-transform:uppercase}.credits[_ngcontent-%COMP%]{font-size:13px}pre.code[_ngcontent-%COMP%]{white-space:pre-wrap}pre.code[_ngcontent-%COMP%]:before{counter-reset:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";width:8em;padding-left:auto;margin-left:auto;text-align:right}']});let n=e;return n})();var Wk=(()=>{let e=class e{constructor(){this.WIT_URL="https://api.wit.ai/message?v=20211010&q=",this.WIT_TOKEN="GLM547LWVQYPHR6QWS5ADO3YYTB6ZRI3"}getIntent(r){return C(this,null,function*(){return fetch(`https://api.wit.ai/message?v=20211010&q=${encodeURIComponent(r.substring(0,250))}`,{headers:{Authorization:`Bearer ${this.WIT_TOKEN}`}}).then(i=>i.ok?i.json():Promise.reject(i.statusText))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Vt=[];for(Pp=0;Pp<256;++Pp)Vt.push((Pp+256).toString(16).slice(1));var Pp;function Kk(n,e=0){return(Vt[n[e+0]]+Vt[n[e+1]]+Vt[n[e+2]]+Vt[n[e+3]]+"-"+Vt[n[e+4]]+Vt[n[e+5]]+"-"+Vt[n[e+6]]+Vt[n[e+7]]+"-"+Vt[n[e+8]]+Vt[n[e+9]]+"-"+Vt[n[e+10]]+Vt[n[e+11]]+Vt[n[e+12]]+Vt[n[e+13]]+Vt[n[e+14]]+Vt[n[e+15]]).toLowerCase()}var Op,tG=new Uint8Array(16);function SE(){if(!Op&&(Op=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Op))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Op(tG)}var nG=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),AE={randomUUID:nG};function rG(n,e,t){if(AE.randomUUID&&!e&&!n)return AE.randomUUID();n=n||{};var r=n.random||(n.rng||SE)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return Kk(r)}var xE=rG;var Qk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yk={};var ns,ME;(function(){var n;function e(D,v){function I(){}I.prototype=v.prototype,D.D=v.prototype,D.prototype=new I,D.prototype.constructor=D,D.C=function(T,S,x){for(var b=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)b[Lr-2]=arguments[Lr];return v.prototype[S].apply(T,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(S=0;16>S;++S)T[S]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=D.g[0],I=D.g[1],S=D.g[2];var x=D.g[3],b=v+(x^I&(S^x))+T[0]+3614090360&4294967295;v=I+(b<<7&4294967295|b>>>25),b=x+(S^v&(I^S))+T[1]+3905402710&4294967295,x=v+(b<<12&4294967295|b>>>20),b=S+(I^x&(v^I))+T[2]+606105819&4294967295,S=x+(b<<17&4294967295|b>>>15),b=I+(v^S&(x^v))+T[3]+3250441966&4294967295,I=S+(b<<22&4294967295|b>>>10),b=v+(x^I&(S^x))+T[4]+4118548399&4294967295,v=I+(b<<7&4294967295|b>>>25),b=x+(S^v&(I^S))+T[5]+1200080426&4294967295,x=v+(b<<12&4294967295|b>>>20),b=S+(I^x&(v^I))+T[6]+2821735955&4294967295,S=x+(b<<17&4294967295|b>>>15),b=I+(v^S&(x^v))+T[7]+4249261313&4294967295,I=S+(b<<22&4294967295|b>>>10),b=v+(x^I&(S^x))+T[8]+1770035416&4294967295,v=I+(b<<7&4294967295|b>>>25),b=x+(S^v&(I^S))+T[9]+2336552879&4294967295,x=v+(b<<12&4294967295|b>>>20),b=S+(I^x&(v^I))+T[10]+4294925233&4294967295,S=x+(b<<17&4294967295|b>>>15),b=I+(v^S&(x^v))+T[11]+2304563134&4294967295,I=S+(b<<22&4294967295|b>>>10),b=v+(x^I&(S^x))+T[12]+1804603682&4294967295,v=I+(b<<7&4294967295|b>>>25),b=x+(S^v&(I^S))+T[13]+4254626195&4294967295,x=v+(b<<12&4294967295|b>>>20),b=S+(I^x&(v^I))+T[14]+2792965006&4294967295,S=x+(b<<17&4294967295|b>>>15),b=I+(v^S&(x^v))+T[15]+1236535329&4294967295,I=S+(b<<22&4294967295|b>>>10),b=v+(S^x&(I^S))+T[1]+4129170786&4294967295,v=I+(b<<5&4294967295|b>>>27),b=x+(I^S&(v^I))+T[6]+3225465664&4294967295,x=v+(b<<9&4294967295|b>>>23),b=S+(v^I&(x^v))+T[11]+643717713&4294967295,S=x+(b<<14&4294967295|b>>>18),b=I+(x^v&(S^x))+T[0]+3921069994&4294967295,I=S+(b<<20&4294967295|b>>>12),b=v+(S^x&(I^S))+T[5]+3593408605&4294967295,v=I+(b<<5&4294967295|b>>>27),b=x+(I^S&(v^I))+T[10]+38016083&4294967295,x=v+(b<<9&4294967295|b>>>23),b=S+(v^I&(x^v))+T[15]+3634488961&4294967295,S=x+(b<<14&4294967295|b>>>18),b=I+(x^v&(S^x))+T[4]+3889429448&4294967295,I=S+(b<<20&4294967295|b>>>12),b=v+(S^x&(I^S))+T[9]+568446438&4294967295,v=I+(b<<5&4294967295|b>>>27),b=x+(I^S&(v^I))+T[14]+3275163606&4294967295,x=v+(b<<9&4294967295|b>>>23),b=S+(v^I&(x^v))+T[3]+4107603335&4294967295,S=x+(b<<14&4294967295|b>>>18),b=I+(x^v&(S^x))+T[8]+1163531501&4294967295,I=S+(b<<20&4294967295|b>>>12),b=v+(S^x&(I^S))+T[13]+2850285829&4294967295,v=I+(b<<5&4294967295|b>>>27),b=x+(I^S&(v^I))+T[2]+4243563512&4294967295,x=v+(b<<9&4294967295|b>>>23),b=S+(v^I&(x^v))+T[7]+1735328473&4294967295,S=x+(b<<14&4294967295|b>>>18),b=I+(x^v&(S^x))+T[12]+2368359562&4294967295,I=S+(b<<20&4294967295|b>>>12),b=v+(I^S^x)+T[5]+4294588738&4294967295,v=I+(b<<4&4294967295|b>>>28),b=x+(v^I^S)+T[8]+2272392833&4294967295,x=v+(b<<11&4294967295|b>>>21),b=S+(x^v^I)+T[11]+1839030562&4294967295,S=x+(b<<16&4294967295|b>>>16),b=I+(S^x^v)+T[14]+4259657740&4294967295,I=S+(b<<23&4294967295|b>>>9),b=v+(I^S^x)+T[1]+2763975236&4294967295,v=I+(b<<4&4294967295|b>>>28),b=x+(v^I^S)+T[4]+1272893353&4294967295,x=v+(b<<11&4294967295|b>>>21),b=S+(x^v^I)+T[7]+4139469664&4294967295,S=x+(b<<16&4294967295|b>>>16),b=I+(S^x^v)+T[10]+3200236656&4294967295,I=S+(b<<23&4294967295|b>>>9),b=v+(I^S^x)+T[13]+681279174&4294967295,v=I+(b<<4&4294967295|b>>>28),b=x+(v^I^S)+T[0]+3936430074&4294967295,x=v+(b<<11&4294967295|b>>>21),b=S+(x^v^I)+T[3]+3572445317&4294967295,S=x+(b<<16&4294967295|b>>>16),b=I+(S^x^v)+T[6]+76029189&4294967295,I=S+(b<<23&4294967295|b>>>9),b=v+(I^S^x)+T[9]+3654602809&4294967295,v=I+(b<<4&4294967295|b>>>28),b=x+(v^I^S)+T[12]+3873151461&4294967295,x=v+(b<<11&4294967295|b>>>21),b=S+(x^v^I)+T[15]+530742520&4294967295,S=x+(b<<16&4294967295|b>>>16),b=I+(S^x^v)+T[2]+3299628645&4294967295,I=S+(b<<23&4294967295|b>>>9),b=v+(S^(I|~x))+T[0]+4096336452&4294967295,v=I+(b<<6&4294967295|b>>>26),b=x+(I^(v|~S))+T[7]+1126891415&4294967295,x=v+(b<<10&4294967295|b>>>22),b=S+(v^(x|~I))+T[14]+2878612391&4294967295,S=x+(b<<15&4294967295|b>>>17),b=I+(x^(S|~v))+T[5]+4237533241&4294967295,I=S+(b<<21&4294967295|b>>>11),b=v+(S^(I|~x))+T[12]+1700485571&4294967295,v=I+(b<<6&4294967295|b>>>26),b=x+(I^(v|~S))+T[3]+2399980690&4294967295,x=v+(b<<10&4294967295|b>>>22),b=S+(v^(x|~I))+T[10]+4293915773&4294967295,S=x+(b<<15&4294967295|b>>>17),b=I+(x^(S|~v))+T[1]+2240044497&4294967295,I=S+(b<<21&4294967295|b>>>11),b=v+(S^(I|~x))+T[8]+1873313359&4294967295,v=I+(b<<6&4294967295|b>>>26),b=x+(I^(v|~S))+T[15]+4264355552&4294967295,x=v+(b<<10&4294967295|b>>>22),b=S+(v^(x|~I))+T[6]+2734768916&4294967295,S=x+(b<<15&4294967295|b>>>17),b=I+(x^(S|~v))+T[13]+1309151649&4294967295,I=S+(b<<21&4294967295|b>>>11),b=v+(S^(I|~x))+T[4]+4149444226&4294967295,v=I+(b<<6&4294967295|b>>>26),b=x+(I^(v|~S))+T[11]+3174756917&4294967295,x=v+(b<<10&4294967295|b>>>22),b=S+(v^(x|~I))+T[2]+718787259&4294967295,S=x+(b<<15&4294967295|b>>>17),b=I+(x^(S|~v))+T[9]+3951481745&4294967295,D.g[0]=D.g[0]+v&4294967295,D.g[1]=D.g[1]+(S+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+S&4294967295,D.g[3]=D.g[3]+x&4294967295}r.prototype.u=function(D,v){v===void 0&&(v=D.length);for(var I=v-this.blockSize,T=this.B,S=this.h,x=0;x<v;){if(S==0)for(;x<=I;)i(this,D,x),x+=this.blockSize;if(typeof D=="string"){for(;x<v;)if(T[S++]=D.charCodeAt(x++),S==this.blockSize){i(this,T),S=0;break}}else for(;x<v;)if(T[S++]=D[x++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var v=1;v<D.length-8;++v)D[v]=0;var I=8*this.o;for(v=D.length-8;v<D.length;++v)D[v]=I&255,I/=256;for(this.u(D),D=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)D[I++]=this.g[v]>>>T&255;return D};function s(D,v){var I=a;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=v(D)}function o(D,v){this.h=v;for(var I=[],T=!0,S=D.length-1;0<=S;S--){var x=D[S]|0;T&&x==v||(I[S]=x,T=!1)}this.g=I}var a={};function c(D){return-128<=D&&128>D?s(D,function(v){return new o([v|0],0>v?-1:0)}):new o([D|0],0>D?-1:0)}function l(D){if(isNaN(D)||!isFinite(D))return h;if(0>D)return E(l(-D));for(var v=[],I=1,T=0;D>=I;T++)v[T]=D/I|0,I*=4294967296;return new o(v,0)}function d(D,v){if(D.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(D.charAt(0)=="-")return E(d(D.substring(1),v));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=h,S=0;S<D.length;S+=8){var x=Math.min(8,D.length-S),b=parseInt(D.substring(S,S+x),v);8>x?(x=l(Math.pow(v,x)),T=T.j(x).add(l(b))):(T=T.j(I),T=T.add(l(b)))}return T}var h=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(w(this))return-E(this).m();for(var D=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);D+=(0<=T?T:4294967296+T)*v,v*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(_(this))return"0";if(w(this))return"-"+E(this).toString(D);for(var v=l(Math.pow(D,6)),I=this,T="";;){var S=z(I,v).g;I=R(I,S.j(v));var x=((0<I.g.length?I.g[0]:I.h)>>>0).toString(D);if(I=S,_(I))return x+T;for(;6>x.length;)x="0"+x;T=x+T}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function _(D){if(D.h!=0)return!1;for(var v=0;v<D.g.length;v++)if(D.g[v]!=0)return!1;return!0}function w(D){return D.h==-1}n.l=function(D){return D=R(this,D),w(D)?-1:_(D)?0:1};function E(D){for(var v=D.g.length,I=[],T=0;T<v;T++)I[T]=~D.g[T];return new o(I,~D.h).add(p)}n.abs=function(){return w(this)?E(this):this},n.add=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0,S=0;S<=v;S++){var x=T+(this.i(S)&65535)+(D.i(S)&65535),b=(x>>>16)+(this.i(S)>>>16)+(D.i(S)>>>16);T=b>>>16,x&=65535,b&=65535,I[S]=b<<16|x}return new o(I,I[I.length-1]&-2147483648?-1:0)};function R(D,v){return D.add(E(v))}n.j=function(D){if(_(this)||_(D))return h;if(w(this))return w(D)?E(this).j(E(D)):E(E(this).j(D));if(w(D))return E(this.j(E(D)));if(0>this.l(m)&&0>D.l(m))return l(this.m()*D.m());for(var v=this.g.length+D.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<D.g.length;S++){var x=this.i(T)>>>16,b=this.i(T)&65535,Lr=D.i(S)>>>16,Lc=D.i(S)&65535;I[2*T+2*S]+=b*Lc,O(I,2*T+2*S),I[2*T+2*S+1]+=x*Lc,O(I,2*T+2*S+1),I[2*T+2*S+1]+=b*Lr,O(I,2*T+2*S+1),I[2*T+2*S+2]+=x*Lr,O(I,2*T+2*S+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function O(D,v){for(;(D[v]&65535)!=D[v];)D[v+1]+=D[v]>>>16,D[v]&=65535,v++}function F(D,v){this.g=D,this.h=v}function z(D,v){if(_(v))throw Error("division by zero");if(_(D))return new F(h,h);if(w(D))return v=z(E(D),v),new F(E(v.g),E(v.h));if(w(v))return v=z(D,E(v)),new F(E(v.g),v.h);if(30<D.g.length){if(w(D)||w(v))throw Error("slowDivide_ only works with positive integers.");for(var I=p,T=v;0>=T.l(D);)I=X(I),T=X(T);var S=Q(I,1),x=Q(T,1);for(T=Q(T,2),I=Q(I,2);!_(T);){var b=x.add(T);0>=b.l(D)&&(S=S.add(I),x=b),T=Q(T,1),I=Q(I,1)}return v=R(D,S.j(v)),new F(S,v)}for(S=h;0<=D.l(v);){for(I=Math.max(1,Math.floor(D.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),x=l(I),b=x.j(v);w(b)||0<b.l(D);)I-=T,x=l(I),b=x.j(v);_(x)&&(x=p),S=S.add(x),D=R(D,b)}return new F(S,D)}n.A=function(D){return z(this,D).h},n.and=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&D.i(T);return new o(I,this.h&D.h)},n.or=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|D.i(T);return new o(I,this.h|D.h)},n.xor=function(D){for(var v=Math.max(this.g.length,D.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^D.i(T);return new o(I,this.h^D.h)};function X(D){for(var v=D.g.length+1,I=[],T=0;T<v;T++)I[T]=D.i(T)<<1|D.i(T-1)>>>31;return new o(I,D.h)}function Q(D,v){var I=v>>5;v%=32;for(var T=D.g.length-I,S=[],x=0;x<T;x++)S[x]=0<v?D.i(x+I)>>>v|D.i(x+I+1)<<32-v:D.i(x+I);return new o(S,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ME=Yk.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,ns=Yk.Integer=o}).apply(typeof Qk<"u"?Qk:typeof self<"u"?self:typeof window<"u"?window:{});var Fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hi={};var RE,iG,Za,kE,bl,Vp,NE,PE,OE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fp=="object"&&Fp];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var A=u[y];if(!(A in g))break e;g=g[A]}u=u[u.length-1],y=g[u],f=f(y),f!=y&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,y=!1,A={next:function(){if(!y&&g<u.length){var N=g++;return{value:f(N,u[N]),done:!1}}return y=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,g){return u.call.apply(u.bind,arguments)}function h(u,f,g){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,y),u.apply(f,A)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function _(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(y,A,N){for(var Y=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)Y[Ge-2]=arguments[Ge];return f.prototype[A].apply(y,Y)}}function w(u){let f=u.length;if(0<f){let g=Array(f);for(let y=0;y<f;y++)g[y]=u[y];return g}return[]}function E(u,f){for(let g=1;g<arguments.length;g++){let y=arguments[g];if(c(y)){let A=u.length||0,N=y.length||0;u.length=A+N;for(let Y=0;Y<N;Y++)u[A+Y]=y[Y]}else u.push(y)}}class R{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function O(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function z(u){return z[" "](u),u}z[" "]=function(){};var X=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Q(u,f,g){for(let y in u)f.call(g,u[y],y,u)}function D(u,f){for(let g in u)f.call(void 0,u[g],g,u)}function v(u){let f={};for(let g in u)f[g]=u[g];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,f){let g,y;for(let A=1;A<arguments.length;A++){y=arguments[A];for(g in y)u[g]=y[g];for(let N=0;N<I.length;N++)g=I[N],Object.prototype.hasOwnProperty.call(y,g)&&(u[g]=y[g])}}function S(u){var f=1;u=u.split(":");let g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function x(u){a.setTimeout(()=>{throw u},0)}function b(){var u=um;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Lr{constructor(){this.h=this.g=null}add(f,g){let y=Lc.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}}var Lc=new R(()=>new KO,u=>u.reset());class KO{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let jc,Uc=!1,um=new Lr,Jb=()=>{let u=a.Promise.resolve(void 0);jc=()=>{u.then(QO)}};var QO=()=>{for(var u;u=b();){try{u.h.call(u.g)}catch(g){x(g)}var f=Lc;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Uc=!1};function Ii(){this.s=this.s,this.C=this.C}Ii.prototype.s=!1,Ii.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ii.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ut(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Ut.prototype.h=function(){this.defaultPrevented=!0};var YO=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Bc(u,f){if(Ut.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(X){e:{try{z(f.nodeName);var A=!0;break e}catch{}A=!1}A||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:ZO[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Bc.aa.h.call(this)}}_(Bc,Ut);var ZO={2:"touch",3:"pen",4:"mouse"};Bc.prototype.h=function(){Bc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $c="closure_listenable_"+(1e6*Math.random()|0),JO=0;function XO(u,f,g,y,A){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=A,this.key=++JO,this.da=this.fa=!1}function fd(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function pd(u){this.src=u,this.g={},this.h=0}pd.prototype.add=function(u,f,g,y,A){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var Y=dm(u,f,y,A);return-1<Y?(f=u[Y],g||(f.fa=!1)):(f=new XO(f,this.src,N,!!y,A),f.fa=g,u.push(f)),f};function lm(u,f){var g=f.type;if(g in u.g){var y=u.g[g],A=Array.prototype.indexOf.call(y,f,void 0),N;(N=0<=A)&&Array.prototype.splice.call(y,A,1),N&&(fd(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function dm(u,f,g,y){for(var A=0;A<u.length;++A){var N=u[A];if(!N.da&&N.listener==f&&N.capture==!!g&&N.ha==y)return A}return-1}var hm="closure_lm_"+(1e6*Math.random()|0),fm={};function Xb(u,f,g,y,A){if(y&&y.once)return tD(u,f,g,y,A);if(Array.isArray(f)){for(var N=0;N<f.length;N++)Xb(u,f[N],g,y,A);return null}return g=ym(g),u&&u[$c]?u.K(f,g,l(y)?!!y.capture:!!y,A):eD(u,f,g,!1,y,A)}function eD(u,f,g,y,A,N){if(!f)throw Error("Invalid event type");var Y=l(A)?!!A.capture:!!A,Ge=gm(u);if(Ge||(u[hm]=Ge=new pd(u)),g=Ge.add(f,g,y,Y,N),g.proxy)return g;if(y=eF(),g.proxy=y,y.src=u,y.listener=g,u.addEventListener)YO||(A=Y),A===void 0&&(A=!1),u.addEventListener(f.toString(),y,A);else if(u.attachEvent)u.attachEvent(rD(f.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function eF(){function u(g){return f.call(u.src,u.listener,g)}let f=tF;return u}function tD(u,f,g,y,A){if(Array.isArray(f)){for(var N=0;N<f.length;N++)tD(u,f[N],g,y,A);return null}return g=ym(g),u&&u[$c]?u.L(f,g,l(y)?!!y.capture:!!y,A):eD(u,f,g,!0,y,A)}function nD(u,f,g,y,A){if(Array.isArray(f))for(var N=0;N<f.length;N++)nD(u,f[N],g,y,A);else y=l(y)?!!y.capture:!!y,g=ym(g),u&&u[$c]?(u=u.i,f=String(f).toString(),f in u.g&&(N=u.g[f],g=dm(N,g,y,A),-1<g&&(fd(N[g]),Array.prototype.splice.call(N,g,1),N.length==0&&(delete u.g[f],u.h--)))):u&&(u=gm(u))&&(f=u.g[f.toString()],u=-1,f&&(u=dm(f,g,y,A)),(g=-1<u?f[u]:null)&&pm(g))}function pm(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[$c])lm(f.i,u);else{var g=u.type,y=u.proxy;f.removeEventListener?f.removeEventListener(g,y,u.capture):f.detachEvent?f.detachEvent(rD(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=gm(f))?(lm(g,u),g.h==0&&(g.src=null,f[hm]=null)):fd(u)}}}function rD(u){return u in fm?fm[u]:fm[u]="on"+u}function tF(u,f){if(u.da)u=!0;else{f=new Bc(f,this);var g=u.listener,y=u.ha||u.src;u.fa&&pm(u),u=g.call(y,f)}return u}function gm(u){return u=u[hm],u instanceof pd?u:null}var mm="__closure_events_fn_"+(1e9*Math.random()>>>0);function ym(u){return typeof u=="function"?u:(u[mm]||(u[mm]=function(f){return u.handleEvent(f)}),u[mm])}function Bt(){Ii.call(this),this.i=new pd(this),this.M=this,this.F=null}_(Bt,Ii),Bt.prototype[$c]=!0,Bt.prototype.removeEventListener=function(u,f,g,y){nD(this,u,f,g,y)};function Jt(u,f){var g,y=u.F;if(y)for(g=[];y;y=y.F)g.push(y);if(u=u.M,y=f.type||f,typeof f=="string")f=new Ut(f,u);else if(f instanceof Ut)f.target=f.target||u;else{var A=f;f=new Ut(y,u),T(f,A)}if(A=!0,g)for(var N=g.length-1;0<=N;N--){var Y=f.g=g[N];A=gd(Y,y,!0,f)&&A}if(Y=f.g=u,A=gd(Y,y,!0,f)&&A,A=gd(Y,y,!1,f)&&A,g)for(N=0;N<g.length;N++)Y=f.g=g[N],A=gd(Y,y,!1,f)&&A}Bt.prototype.N=function(){if(Bt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],y=0;y<g.length;y++)fd(g[y]);delete u.g[f],u.h--}}this.F=null},Bt.prototype.K=function(u,f,g,y){return this.i.add(String(u),f,!1,g,y)},Bt.prototype.L=function(u,f,g,y){return this.i.add(String(u),f,!0,g,y)};function gd(u,f,g,y){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var A=!0,N=0;N<f.length;++N){var Y=f[N];if(Y&&!Y.da&&Y.capture==g){var Ge=Y.listener,Rt=Y.ha||Y.src;Y.fa&&lm(u.i,Y),A=Ge.call(Rt,y)!==!1&&A}}return A&&!y.defaultPrevented}function iD(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function sD(u){u.g=iD(()=>{u.g=null,u.i&&(u.i=!1,sD(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class nF extends Ii{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:sD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zc(u){Ii.call(this),this.h=u,this.g={}}_(zc,Ii);var oD=[];function aD(u){Q(u.g,function(f,g){this.g.hasOwnProperty(g)&&pm(f)},u),u.g={}}zc.prototype.N=function(){zc.aa.N.call(this),aD(this)},zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vm=a.JSON.stringify,rF=a.JSON.parse,iF=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function wm(){}wm.prototype.h=null;function cD(u){return u.h||(u.h=u.i())}function uD(){}var qc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _m(){Ut.call(this,"d")}_(_m,Ut);function Em(){Ut.call(this,"c")}_(Em,Ut);var bs={},lD=null;function md(){return lD=lD||new Bt}bs.La="serverreachability";function dD(u){Ut.call(this,bs.La,u)}_(dD,Ut);function Hc(u){let f=md();Jt(f,new dD(f))}bs.STAT_EVENT="statevent";function hD(u,f){Ut.call(this,bs.STAT_EVENT,u),this.stat=f}_(hD,Ut);function Xt(u){let f=md();Jt(f,new hD(f,u))}bs.Ma="timingevent";function fD(u,f){Ut.call(this,bs.Ma,u),this.size=f}_(fD,Ut);function Gc(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function Wc(){this.g=!0}Wc.prototype.xa=function(){this.g=!1};function sF(u,f,g,y,A,N){u.info(function(){if(u.g)if(N)for(var Y="",Ge=N.split("&"),Rt=0;Rt<Ge.length;Rt++){var ke=Ge[Rt].split("=");if(1<ke.length){var $t=ke[0];ke=ke[1];var zt=$t.split("_");Y=2<=zt.length&&zt[1]=="type"?Y+($t+"="+ke+"&"):Y+($t+"=redacted&")}}else Y=null;else Y=N;return"XMLHTTP REQ ("+y+") [attempt "+A+"]: "+f+`
`+g+`
`+Y})}function oF(u,f,g,y,A,N,Y){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+A+"]: "+f+`
`+g+`
`+N+" "+Y})}function xo(u,f,g,y){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+cF(u,g)+(y?" "+y:"")})}function aF(u,f){u.info(function(){return"TIMEOUT: "+f})}Wc.prototype.info=function(){};function cF(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var y=g[u];if(!(2>y.length)){var A=y[1];if(Array.isArray(A)&&!(1>A.length)){var N=A[0];if(N!="noop"&&N!="stop"&&N!="close")for(var Y=1;Y<A.length;Y++)A[Y]=""}}}}return vm(g)}catch{return f}}var yd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},pD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Im;function vd(){}_(vd,wm),vd.prototype.g=function(){return new XMLHttpRequest},vd.prototype.i=function(){return{}},Im=new vd;function bi(u,f,g,y){this.j=u,this.i=f,this.l=g,this.R=y||1,this.U=new zc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gD}function gD(){this.i=null,this.g="",this.h=!1}var mD={},bm={};function Dm(u,f,g){u.L=1,u.v=Id(jr(f)),u.m=g,u.P=!0,yD(u,null)}function yD(u,f){u.F=Date.now(),wd(u),u.A=jr(u.v);var g=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),RD(g.i,"t",y),u.C=0,g=u.j.J,u.h=new gD,u.g=QD(u.j,g?f:null,!u.m),0<u.O&&(u.M=new nF(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,y=u.ca;var A="readystatechange";Array.isArray(A)||(A&&(oD[0]=A.toString()),A=oD);for(var N=0;N<A.length;N++){var Y=Xb(g,A[N],y||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Hc(),sF(u.i,u.u,u.A,u.l,u.R,u.m)}bi.prototype.ca=function(u){u=u.target;let f=this.M;f&&Ur(u)==3?f.j():this.Y(u)},bi.prototype.Y=function(u){try{if(u==this.g)e:{let zt=Ur(this.g);var f=this.g.Ba();let ko=this.g.Z();if(!(3>zt)&&(zt!=3||this.g&&(this.h.h||this.g.oa()||LD(this.g)))){this.J||zt!=4||f==7||(f==8||0>=ko?Hc(3):Hc(2)),Cm(this);var g=this.g.Z();this.X=g;t:if(vD(this)){var y=LD(this.g);u="";var A=y.length,N=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ds(this),Kc(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<A;f++)this.h.h=!0,u+=this.h.i.decode(y[f],{stream:!(N&&f==A-1)});y.length=0,this.h.g+=u,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,oF(this.i,this.u,this.A,this.l,this.R,zt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ge,Rt=this.g;if((Ge=Rt.g?Rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(Ge)){var ke=Ge;break t}}ke=null}if(g=ke)xo(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tm(this,g);else{this.o=!1,this.s=3,Xt(12),Ds(this),Kc(this);break e}}if(this.P){g=!0;let Kn;for(;!this.J&&this.C<Y.length;)if(Kn=uF(this,Y),Kn==bm){zt==4&&(this.s=4,Xt(14),g=!1),xo(this.i,this.l,null,"[Incomplete Response]");break}else if(Kn==mD){this.s=4,Xt(15),xo(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else xo(this.i,this.l,Kn,null),Tm(this,Kn);if(vD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zt!=4||Y.length!=0||this.h.h||(this.s=1,Xt(16),g=!1),this.o=this.o&&g,!g)xo(this.i,this.l,Y,"[Invalid Chunked Response]"),Ds(this),Kc(this);else if(0<Y.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),km($t),$t.M=!0,Xt(11))}}else xo(this.i,this.l,Y,null),Tm(this,Y);zt==4&&Ds(this),this.o&&!this.J&&(zt==4?HD(this.j,this):(this.o=!1,wd(this)))}else TF(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),Ds(this),Kc(this)}}}catch{}finally{}};function vD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function uF(u,f){var g=u.C,y=f.indexOf(`
`,g);return y==-1?bm:(g=Number(f.substring(g,y)),isNaN(g)?mD:(y+=1,y+g>f.length?bm:(f=f.slice(y,y+g),u.C=y+g,f)))}bi.prototype.cancel=function(){this.J=!0,Ds(this)};function wd(u){u.S=Date.now()+u.I,wD(u,u.I)}function wD(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Gc(p(u.ba,u),f)}function Cm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}bi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(aF(this.i,this.A),this.L!=2&&(Hc(),Xt(17)),Ds(this),this.s=2,Kc(this)):wD(this,this.S-u)};function Kc(u){u.j.G==0||u.J||HD(u.j,u)}function Ds(u){Cm(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,aD(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Tm(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Sm(g.h,u))){if(!u.K&&Sm(g.h,u)&&g.G==3){try{var y=g.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var A=y;if(A[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Sd(g),Cd(g);else break e;Rm(g),Xt(18)}}else g.za=A[1],0<g.za-g.T&&37500>A[2]&&g.F&&g.v==0&&!g.C&&(g.C=Gc(p(g.Za,g),6e3));if(1>=ID(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ts(g,11)}else if((u.K||g.g==u)&&Sd(g),!O(f))for(A=g.Da.g.parse(f),f=0;f<A.length;f++){let ke=A[f];if(g.T=ke[0],ke=ke[1],g.G==2)if(ke[0]=="c"){g.K=ke[1],g.ia=ke[2];let $t=ke[3];$t!=null&&(g.la=$t,g.j.info("VER="+g.la));let zt=ke[4];zt!=null&&(g.Aa=zt,g.j.info("SVER="+g.Aa));let ko=ke[5];ko!=null&&typeof ko=="number"&&0<ko&&(y=1.5*ko,g.L=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;let Kn=u.g;if(Kn){let xd=Kn.g?Kn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xd){var N=y.h;N.g||xd.indexOf("spdy")==-1&&xd.indexOf("quic")==-1&&xd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Am(N,N.h),N.h=null))}if(y.D){let Nm=Kn.g?Kn.g.getResponseHeader("X-HTTP-Session-Id"):null;Nm&&(y.ya=Nm,Ye(y.I,y.D,Nm))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),y=g;var Y=u;if(y.qa=KD(y,y.J?y.ia:null,y.W),Y.K){bD(y.h,Y);var Ge=Y,Rt=y.L;Rt&&(Ge.I=Rt),Ge.B&&(Cm(Ge),wd(Ge)),y.g=Y}else zD(y);0<g.i.length&&Td(g)}else ke[0]!="stop"&&ke[0]!="close"||Ts(g,7);else g.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?Ts(g,7):Mm(g):ke[0]!="noop"&&g.l&&g.l.ta(ke),g.v=0)}}Hc(4)}catch{}}var lF=class{constructor(u,f){this.g=u,this.map=f}};function _D(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ED(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ID(u){return u.h?1:u.g?u.g.size:0}function Sm(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Am(u,f){u.g?u.g.add(f):u.h=f}function bD(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}_D.prototype.cancel=function(){if(this.i=DD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function DD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let g of u.g.values())f=f.concat(g.D);return f}return w(u.i)}function dF(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],g=u.length,y=0;y<g;y++)f.push(u[y]);return f}f=[],g=0;for(y in u)f[g++]=u[y];return f}function hF(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(let y in u)f[g++]=y;return f}}}function CD(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=hF(u),y=dF(u),A=y.length,N=0;N<A;N++)f.call(void 0,y[N],g&&g[N],u)}var TD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fF(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var y=u[g].indexOf("="),A=null;if(0<=y){var N=u[g].substring(0,y);A=u[g].substring(y+1)}else N=u[g];f(N,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Cs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Cs){this.h=u.h,_d(this,u.j),this.o=u.o,this.g=u.g,Ed(this,u.s),this.l=u.l;var f=u.i,g=new Zc;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),SD(this,g),this.m=u.m}else u&&(f=String(u).match(TD))?(this.h=!1,_d(this,f[1]||"",!0),this.o=Qc(f[2]||""),this.g=Qc(f[3]||"",!0),Ed(this,f[4]),this.l=Qc(f[5]||"",!0),SD(this,f[6]||"",!0),this.m=Qc(f[7]||"")):(this.h=!1,this.i=new Zc(null,this.h))}Cs.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Yc(f,AD,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Yc(f,AD,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Yc(g,g.charAt(0)=="/"?mF:gF,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Yc(g,vF)),u.join("")};function jr(u){return new Cs(u)}function _d(u,f,g){u.j=g?Qc(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Ed(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function SD(u,f,g){f instanceof Zc?(u.i=f,wF(u.i,u.h)):(g||(f=Yc(f,yF)),u.i=new Zc(f,u.h))}function Ye(u,f,g){u.i.set(f,g)}function Id(u){return Ye(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Qc(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Yc(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,pF),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pF(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var AD=/[#\/\?@]/g,gF=/[#\?:]/g,mF=/[#\?]/g,yF=/[#\?@]/g,vF=/#/g;function Zc(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Di(u){u.g||(u.g=new Map,u.h=0,u.i&&fF(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Zc.prototype,n.add=function(u,f){Di(this),this.i=null,u=Mo(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function xD(u,f){Di(u),f=Mo(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function MD(u,f){return Di(u),f=Mo(u,f),u.g.has(f)}n.forEach=function(u,f){Di(this),this.g.forEach(function(g,y){g.forEach(function(A){u.call(f,A,y,this)},this)},this)},n.na=function(){Di(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let y=0;y<f.length;y++){let A=u[y];for(let N=0;N<A.length;N++)g.push(f[y])}return g},n.V=function(u){Di(this);let f=[];if(typeof u=="string")MD(this,u)&&(f=f.concat(this.g.get(Mo(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},n.set=function(u,f){return Di(this),this.i=null,u=Mo(this,u),MD(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function RD(u,f,g){xD(u,f),0<g.length&&(u.i=null,u.g.set(Mo(u,f),w(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var y=f[g];let N=encodeURIComponent(String(y)),Y=this.V(y);for(y=0;y<Y.length;y++){var A=N;Y[y]!==""&&(A+="="+encodeURIComponent(String(Y[y]))),u.push(A)}}return this.i=u.join("&")};function Mo(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function wF(u,f){f&&!u.j&&(Di(u),u.i=null,u.g.forEach(function(g,y){var A=y.toLowerCase();y!=A&&(xD(this,y),RD(this,A,g))},u)),u.j=f}function _F(u,f){let g=new Wc;if(a.Image){let y=new Image;y.onload=m(Ci,g,"TestLoadImage: loaded",!0,f,y),y.onerror=m(Ci,g,"TestLoadImage: error",!1,f,y),y.onabort=m(Ci,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=m(Ci,g,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else f(!1)}function EF(u,f){let g=new Wc,y=new AbortController,A=setTimeout(()=>{y.abort(),Ci(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:y.signal}).then(N=>{clearTimeout(A),N.ok?Ci(g,"TestPingServer: ok",!0,f):Ci(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(A),Ci(g,"TestPingServer: error",!1,f)})}function Ci(u,f,g,y,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),y(g)}catch{}}function IF(){this.g=new iF}function bF(u,f,g){let y=g||"";try{CD(u,function(A,N){let Y=A;l(A)&&(Y=vm(A)),f.push(y+N+"="+encodeURIComponent(Y))})}catch(A){throw f.push(y+"type="+encodeURIComponent("_badmap")),A}}function Jc(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Jc,wm),Jc.prototype.g=function(){return new bd(this.l,this.j)},Jc.prototype.i=function(u){return function(){return u}}({});function bd(u,f){Bt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(bd,Bt),n=bd.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,eu(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,eu(this)),this.g&&(this.readyState=3,eu(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function kD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Xc(this):eu(this),this.readyState==3&&kD(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Xc(this))},n.Qa=function(u){this.g&&(this.response=u,Xc(this))},n.ga=function(){this.g&&Xc(this)};function Xc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,eu(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function eu(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ND(u){let f="";return Q(u,function(g,y){f+=y,f+=":",f+=g,f+=`\r
`}),f}function xm(u,f,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=ND(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):Ye(u,f,g))}function st(u){Bt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(st,Bt);var DF=/^https?$/i,CF=["POST","PUT"];n=st.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Im.g(),this.v=this.o?cD(this.o):cD(Im),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(N){PD(this,N);return}if(u=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var A in y)g.set(A,y[A]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let N of y.keys())g.set(N,y.get(N));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(N=>N.toLowerCase()=="content-type"),A=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(CF,f,void 0))||y||A||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,Y]of g)this.g.setRequestHeader(N,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{VD(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){PD(this,N)}};function PD(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,OD(u),Dd(u)}function OD(u){u.A||(u.A=!0,Jt(u,"complete"),Jt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Jt(this,"complete"),Jt(this,"abort"),Dd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Dd(this,!0)),st.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?FD(this):this.bb())},n.bb=function(){FD(this)};function FD(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ur(u)!=4||u.Z()!=2)){if(u.u&&Ur(u)==4)iD(u.Ea,0,u);else if(Jt(u,"readystatechange"),Ur(u)==4){u.h=!1;try{let Y=u.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var y;if(y=Y===0){var A=String(u.D).match(TD)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),y=!DF.test(A?A.toLowerCase():"")}g=y}if(g)Jt(u,"complete"),Jt(u,"success");else{u.m=6;try{var N=2<Ur(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",OD(u)}}finally{Dd(u)}}}}function Dd(u,f){if(u.g){VD(u);let g=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Jt(u,"ready");try{g.onreadystatechange=y}catch{}}}function VD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Ur(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),rF(f)}};function LD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function TF(u){let f={};u=(u.g&&2<=Ur(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(O(u[y]))continue;var g=S(u[y]);let A=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let N=f[A]||[];f[A]=N,N.push(g)}D(f,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tu(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function jD(u){this.Aa=0,this.i=[],this.j=new Wc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tu("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tu("baseRetryDelayMs",5e3,u),this.cb=tu("retryDelaySeedMs",1e4,u),this.Wa=tu("forwardChannelMaxRetries",2,u),this.wa=tu("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new _D(u&&u.concurrentRequestLimit),this.Da=new IF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=jD.prototype,n.la=8,n.G=1,n.connect=function(u,f,g,y){Xt(0),this.W=u,this.H=f||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=KD(this,null,this.W),Td(this)};function Mm(u){if(UD(u),u.G==3){var f=u.U++,g=jr(u.I);if(Ye(g,"SID",u.K),Ye(g,"RID",f),Ye(g,"TYPE","terminate"),nu(u,g),f=new bi(u,u.j,f),f.L=2,f.v=Id(jr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=QD(f.j,null),f.g.ea(f.v)),f.F=Date.now(),wd(f)}WD(u)}function Cd(u){u.g&&(km(u),u.g.cancel(),u.g=null)}function UD(u){Cd(u),u.u&&(a.clearTimeout(u.u),u.u=null),Sd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Td(u){if(!ED(u.h)&&!u.s){u.s=!0;var f=u.Ga;jc||Jb(),Uc||(jc(),Uc=!0),um.add(f,u),u.B=0}}function SF(u,f){return ID(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Gc(p(u.Ga,u,f),GD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let A=new bi(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(A.H=N,N=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=$D(this,A,f),g=jr(this.I),Ye(g,"RID",u),Ye(g,"CVER",22),this.D&&Ye(g,"X-HTTP-Session-Id",this.D),nu(this,g),N&&(this.O?f="headers="+encodeURIComponent(String(ND(N)))+"&"+f:this.m&&xm(g,this.m,N)),Am(this.h,A),this.Ua&&Ye(g,"TYPE","init"),this.P?(Ye(g,"$req",f),Ye(g,"SID","null"),A.T=!0,Dm(A,g,null)):Dm(A,g,f),this.G=2}}else this.G==3&&(u?BD(this,u):this.i.length==0||ED(this.h)||BD(this))};function BD(u,f){var g;f?g=f.l:g=u.U++;let y=jr(u.I);Ye(y,"SID",u.K),Ye(y,"RID",g),Ye(y,"AID",u.T),nu(u,y),u.m&&u.o&&xm(y,u.m,u.o),g=new bi(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=$D(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Am(u.h,g),Dm(g,y,f)}function nu(u,f){u.H&&Q(u.H,function(g,y){Ye(f,y,g)}),u.l&&CD({},function(g,y){Ye(f,y,g)})}function $D(u,f,g){g=Math.min(u.i.length,g);var y=u.l?p(u.l.Na,u.l,u):null;e:{var A=u.i;let N=-1;for(;;){let Y=["count="+g];N==-1?0<g?(N=A[0].g,Y.push("ofs="+N)):N=0:Y.push("ofs="+N);let Ge=!0;for(let Rt=0;Rt<g;Rt++){let ke=A[Rt].g,$t=A[Rt].map;if(ke-=N,0>ke)N=Math.max(0,A[Rt].g-100),Ge=!1;else try{bF($t,Y,"req"+ke+"_")}catch{y&&y($t)}}if(Ge){y=Y.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,y}function zD(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;jc||Jb(),Uc||(jc(),Uc=!0),um.add(f,u),u.v=0}}function Rm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Gc(p(u.Fa,u),GD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,qD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Gc(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),Cd(this),qD(this))};function km(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function qD(u){u.g=new bi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=jr(u.qa);Ye(f,"RID","rpc"),Ye(f,"SID",u.K),Ye(f,"AID",u.T),Ye(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ye(f,"TO",u.ja),Ye(f,"TYPE","xmlhttp"),nu(u,f),u.m&&u.o&&xm(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=Id(jr(f)),g.m=null,g.P=!0,yD(g,u)}n.Za=function(){this.C!=null&&(this.C=null,Cd(this),Rm(this),Xt(19))};function Sd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function HD(u,f){var g=null;if(u.g==f){Sd(u),km(u),u.g=null;var y=2}else if(Sm(u.h,f))g=f.D,bD(u.h,f),y=1;else return;if(u.G!=0){if(f.o)if(y==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var A=u.B;y=md(),Jt(y,new fD(y,g)),Td(u)}else zD(u);else if(A=f.s,A==3||A==0&&0<f.X||!(y==1&&SF(u,f)||y==2&&Rm(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),A){case 1:Ts(u,5);break;case 4:Ts(u,10);break;case 3:Ts(u,6);break;default:Ts(u,2)}}}function GD(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function Ts(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),y=u.Xa;let A=!y;y=new Cs(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_d(y,"https"),Id(y),A?_F(y.toString(),g):EF(y.toString(),g)}else Xt(2);u.G=0,u.l&&u.l.sa(f),WD(u),UD(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function WD(u){if(u.G=0,u.ka=[],u.l){let f=DD(u.h);(f.length!=0||u.i.length!=0)&&(E(u.ka,f),E(u.ka,u.i),u.h.i.length=0,w(u.i),u.i.length=0),u.l.ra()}}function KD(u,f,g){var y=g instanceof Cs?jr(g):new Cs(g);if(y.g!="")f&&(y.g=f+"."+y.g),Ed(y,y.s);else{var A=a.location;y=A.protocol,f=f?f+"."+A.hostname:A.hostname,A=+A.port;var N=new Cs(null);y&&_d(N,y),f&&(N.g=f),A&&Ed(N,A),g&&(N.l=g),y=N}return g=u.D,f=u.ya,g&&f&&Ye(y,g,f),Ye(y,"VER",u.la),nu(u,y),y}function QD(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new st(new Jc({eb:g})):new st(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function YD(){}n=YD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ad(){}Ad.prototype.g=function(u,f){return new Cn(u,f)};function Cn(u,f){Bt.call(this),this.g=new jD(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!O(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!O(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Ro(this)}_(Cn,Bt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Mm(this.g)},Cn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=vm(u),u=g);f.i.push(new lF(f.Ya++,u)),f.G==3&&Td(f)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Mm(this.g),delete this.g,Cn.aa.N.call(this)};function ZD(u){_m.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}_(ZD,_m);function JD(){Em.call(this),this.status=1}_(JD,Em);function Ro(u){this.g=u}_(Ro,YD),Ro.prototype.ua=function(){Jt(this.g,"a")},Ro.prototype.ta=function(u){Jt(this.g,new ZD(u))},Ro.prototype.sa=function(u){Jt(this.g,new JD)},Ro.prototype.ra=function(){Jt(this.g,"b")},Ad.prototype.createWebChannel=Ad.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,OE=hi.createWebChannelTransport=function(){return new Ad},PE=hi.getStatEventTarget=function(){return md()},NE=hi.Event=bs,Vp=hi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yd.NO_ERROR=0,yd.TIMEOUT=8,yd.HTTP_ERROR=6,bl=hi.ErrorCode=yd,pD.COMPLETE="complete",kE=hi.EventType=pD,uD.EventType=qc,qc.OPEN="a",qc.CLOSE="b",qc.ERROR="c",qc.MESSAGE="d",Bt.prototype.listen=Bt.prototype.K,Za=hi.WebChannel=uD,iG=hi.FetchXmlHttpFactory=Jc,st.prototype.listenOnce=st.prototype.L,st.prototype.getLastError=st.prototype.Ka,st.prototype.getLastErrorCode=st.prototype.Ba,st.prototype.getStatus=st.prototype.Z,st.prototype.getResponseJson=st.prototype.Oa,st.prototype.getResponseText=st.prototype.oa,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Ha,RE=hi.XhrIo=st}).apply(typeof Fp<"u"?Fp:typeof self<"u"?self:typeof window<"u"?window:{});var Zk="@firebase/firestore";var bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");var Ac="10.14.0";var us=new kd("@firebase/firestore");function nc(){return us.logLevel}function e1(n){us.setLogLevel(n)}function U(n,...e){if(us.logLevel<=gr.DEBUG){let t=e.map(UI);us.debug(`Firestore (${Ac}): ${n}`,...t)}}function ht(n,...e){if(us.logLevel<=gr.ERROR){let t=e.map(UI);us.error(`Firestore (${Ac}): ${n}`,...t)}}function ur(n,...e){if(us.logLevel<=gr.WARN){let t=e.map(UI);us.warn(`Firestore (${Ac}): ${n}`,...t)}}function UI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n="Unexpected state"){let e=`FIRESTORE (${Ac}) INTERNAL ASSERTION FAILED: `+n;throw ht(e),new Error(e)}function oe(n,e){n||ne()}function t1(n,e){n||ne()}function Z(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends iC{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var At=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Wp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},BE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(bt.UNAUTHENTICATED))}shutdown(){}},$E=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},zE=class{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){oe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new At;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new At,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>C(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new At)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new Wp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new bt(e)}},qE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},HE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new qE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},GE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},WE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){oe(this.o===void 0);let r=s=>{s.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(oe(typeof t.token=="string"),this.R=t.token,new GE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function aG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Kp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=aG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function dc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function n1(n){return n+"\0"}var rt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new j(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ce=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new rt(0,0))}static max(){return new n(new rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(),r===void 0?r=e.length-t:r>e.length-t&&ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},xe=class n extends Qp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},cG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ft=class n extends Qp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return cG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new j(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var J=class n{constructor(e){this.path=e}static fromPath(e){return new n(xe.fromString(e))}static fromName(e){return new n(xe.fromString(e).popFirst(5))}static empty(){return new n(xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return xe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new xe(e.slice()))}};var hc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function KE(n){return n.fields.find(e=>e.kind===2)}function ro(n){return n.fields.filter(e=>e.kind!==2)}hc.UNKNOWN_ID=-1;var cc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Ol=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Gn.min())}};function r1(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ce.fromTimestamp(r===1e9?new rt(t+1,0):new rt(t,r));return new Gn(i,J.empty(),e)}function i1(n){return new Gn(n.readTime,n.key,-1)}var Gn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ce.min(),J.empty(),-1)}static max(){return new n(ce.max(),J.empty(),-1)}};function BI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=J.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var s1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yp=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ws(n){return C(this,null,function*(){if(n.code!==P.FAILED_PRECONDITION||n.message!==s1)throw n;U("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Zp=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new At,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new uo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=$I(r.target.error);this.V.reject(new uo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new uo(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(U("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new YE(t)}},ls=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ru())===12.2&&ht("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return U("SimpleDb","Removing database:",e),io(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Rd())return!1;if(n.v())return!0;let e=ru(),t=n.S(e),r=0<t&&t<10,i=o1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return C(this,null,function*(){return this.db||(U("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new uo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new j(P.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(P.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new uo(e,o))},i.onupgradeneeded=s=>{U("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{U("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return C(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Zp.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),k.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(U("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function o1(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var QE=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return io(this.B.delete())}},uo=class extends j{constructor(e,t){super(P.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function _s(n){return n.name==="IndexedDbTransactionError"}var YE=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(U("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(U("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),io(r)}add(e){return U("SimpleDb","ADD",this.store.name,e,e),io(this.store.add(e))}get(e){return io(this.store.get(e)).next(t=>(t===void 0&&(t=null),U("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return U("SimpleDb","DELETE",this.store.name,e),io(this.store.delete(e))}count(){return U("SimpleDb","COUNT",this.store.name),io(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new k((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new k((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){U("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new k((r,i)=>{t.onerror=s=>{let o=$I(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new k((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new QE(a),l=t(a.primaryKey,a.value,c);if(l instanceof k){let d=l.catch(h=>(c.done(),k.reject(h)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>k.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function io(n){return new k((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=$I(r.target.error);t(i)}})}var Jk=!1;function $I(n){let e=ls.S(ru());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jk||(Jk=!0,setTimeout(()=>{throw r},0)),r}}return n}var ZE=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){U("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>C(this,null,function*(){this.task=null;try{U("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){_s(t)?U("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ws(t)}yield this.X(6e4)}))}},JE=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return C(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return k.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return U("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(U("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=i1(s);BI(o,r)>0&&(r=o)}),new Gn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Fn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function nd(n){return n==null}function Fl(n){return n===0&&1/n==-1/0}function a1(n){return typeof n=="number"&&Number.isInteger(n)&&!Fl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function on(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Xk(e)),e=uG(n.get(t),e);return Xk(e)}function uG(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function Xk(n){return n+""}function Ar(n){let e=n.length;if(oe(e>=2),e===2)return oe(n.charAt(0)===""&&n.charAt(1)===""),xe.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&ne(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:ne()}s=o+2}return new xe(r)}var eN=["userId","batchId"];function $p(n,e){return[n,on(e)]}function c1(n,e,t){return[n,on(e),t]}var lG={},dG=["prefixPath","collectionGroup","readTime","documentId"],hG=["prefixPath","collectionGroup","documentId"],fG=["collectionGroup","readTime","prefixPath","documentId"],pG=["canonicalId","targetId"],gG=["targetId","path"],mG=["path","targetId"],yG=["collectionId","parent"],vG=["indexId","uid"],wG=["uid","sequenceNumber"],_G=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EG=["indexId","uid","orderedDocumentKey"],IG=["userId","collectionPath","documentId"],bG=["userId","collectionPath","largestBatchId"],DG=["userId","collectionGroup","largestBatchId"],u1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CG=[...u1,"documentOverlays"],l1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],d1=l1,zI=[...d1,"indexConfiguration","indexState","indexEntries"],TG=zI,SG=[...zI,"globals"];var Vl=class extends Yp{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function xt(n,e){let t=Z(n);return ls.F(t._e,e)}function tN(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Io(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function h1(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Je=class n{constructor(e,t){this.comparator=e,this.root=t||Mr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ac(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ac(this.root,e,this.comparator,!1)}getReverseIterator(){return new ac(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ac(this.root,e,this.comparator,!0)}},ac=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1;Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Mr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ke=class n{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jp(this.data.getIterator())}getIteratorFrom(e){return new Jp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Jp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Ja(n){return n.hasNext()?n.getNext():void 0}var Vn=class n{constructor(e){this.fields=e,e.sort(ft.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ke(ft.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return dc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Xp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function f1(){return typeof atob<"u"}var gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Xp("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};gt.EMPTY_BYTE_STRING=new gt("");var AG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(n){if(oe(!!n),typeof n=="string"){let e=0,t=AG.exec(n);if(oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(n.seconds),nanos:Xe(n.nanos)}}function Xe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ds(n){return typeof n=="string"?gt.fromBase64String(n):gt.fromUint8Array(n)}function qg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function qI(n){let e=n.mapValue.fields.__previous_value__;return qg(e)?qI(e):e}function Ll(n){let e=gi(n.mapValue.fields.__local_write_time__.timestampValue);return new rt(e.seconds,e.nanos)}var XE=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},hs=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var as={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},zp={nullValue:"NULL_VALUE"};function lo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qg(n)?4:p1(n)?9007199254740991:Hg(n)?10:11:ne()}function Nr(n,e){if(n===e)return!0;let t=lo(n);if(t!==lo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ll(n).isEqual(Ll(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=gi(i.timestampValue),a=gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ds(i.bytesValue).isEqual(ds(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Xe(i.doubleValue),a=Xe(s.doubleValue);return o===a?Fl(o)===Fl(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return dc(n.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(tN(o)!==tN(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Nr(o[c],a[c])))return!1;return!0}(n,e);default:return ne()}}function jl(n,e){return(n.values||[]).find(t=>Nr(t,e))!==void 0}function fs(n,e){if(n===e)return 0;let t=lo(n),r=lo(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Xe(s.integerValue||s.doubleValue),c=Xe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return nN(n.timestampValue,e.timestampValue);case 4:return nN(Ll(n),Ll(e));case 5:return ge(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ds(s),c=ds(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ge(a[l],c[l]);if(d!==0)return d}return ge(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(Xe(s.latitude),Xe(o.latitude));return a!==0?a:ge(Xe(s.longitude),Xe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return rN(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let h=s.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,w=ge(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=_?.values)===null||d===void 0?void 0:d.length)||0);return w!==0?w:rN(m,_)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===as.mapValue&&o===as.mapValue)return 0;if(s===as.mapValue)return 1;if(o===as.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let p=ge(c[h],d[h]);if(p!==0)return p;let m=fs(a[c[h]],l[d[h]]);if(m!==0)return m}return ge(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ne()}}function nN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=gi(n),r=gi(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function rN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=fs(t[i],r[i]);if(s)return s}return ge(t.length,r.length)}function fc(n){return e0(n)}function e0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ds(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return J.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=e0(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${e0(t.fields[o])}`;return i+"}"}(n.mapValue):ne()}function ho(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function t0(n){return!!n&&"integerValue"in n}function Ul(n){return!!n&&"arrayValue"in n}function iN(n){return!!n&&"nullValue"in n}function sN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function qp(n){return!!n&&"mapValue"in n}function Hg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ml(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Io(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Ml(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ml(n.arrayValue.values[t]);return e}return Object.assign({},n)}function p1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var g1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function xG(n){return"nullValue"in n?zp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ho(hs.empty(),J.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Hg(n)?g1:{mapValue:{}}:ne()}function MG(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ho(hs.empty(),J.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?g1:"mapValue"in n?Hg(n)?{mapValue:{}}:as:ne()}function oN(n,e){let t=fs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function aN(n,e){let t=fs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Zt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!qp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ml(t)}setAll(e){let t=ft.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Ml(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());qp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];qp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Io(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Ml(this.value))}};function m1(n){let e=[];return Io(n.fields,(t,r)=>{let i=new ft([t]);if(qp(r)){let s=m1(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Vn(e)}var Dt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ce.min(),ce.min(),ce.min(),Zt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ce.min(),ce.min(),Zt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ce.min(),ce.min(),Zt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Pr=class{constructor(e,t){this.position=e,this.inclusive=t}};function cN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=J.comparator(J.fromName(o.referenceValue),t.key):r=fs(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function uN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nr(n.position[t],e.position[t]))return!1;return!0}var fo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function RG(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var eg=class{},Ce=class n extends eg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new i0(e,t,r):t==="array-contains"?new a0(e,r):t==="in"?new tg(e,r):t==="not-in"?new c0(e,r):t==="array-contains-any"?new u0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new s0(e,r):new o0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(fs(t,this.value)):t!==null&&lo(this.value)===lo(t)&&this.matchesComparison(fs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class n extends eg{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return pc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function pc(n){return n.op==="and"}function n0(n){return n.op==="or"}function HI(n){return y1(n)&&pc(n)}function y1(n){for(let e of n.filters)if(e instanceof $e)return!1;return!0}function r0(n){if(n instanceof Ce)return n.field.canonicalString()+n.op.toString()+fc(n.value);if(HI(n))return n.filters.map(e=>r0(e)).join(",");{let e=n.filters.map(t=>r0(t)).join(",");return`${n.op}(${e})`}}function v1(n,e){return n instanceof Ce?function(r,i){return i instanceof Ce&&r.op===i.op&&r.field.isEqual(i.field)&&Nr(r.value,i.value)}(n,e):n instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&v1(o,i.filters[a]),!0):!1}(n,e):void ne()}function w1(n,e){let t=n.filters.concat(e);return $e.create(t,n.op)}function _1(n){return n instanceof Ce?function(t){return`${t.field.canonicalString()} ${t.op} ${fc(t.value)}`}(n):n instanceof $e?function(t){return t.op.toString()+" {"+t.getFilters().map(_1).join(" ,")+"}"}(n):"Filter"}var i0=class extends Ce{constructor(e,t,r){super(e,t,r),this.key=J.fromName(r.referenceValue)}matches(e){let t=J.comparator(e.key,this.key);return this.matchesComparison(t)}},s0=class extends Ce{constructor(e,t){super(e,"in",t),this.keys=E1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},o0=class extends Ce{constructor(e,t){super(e,"not-in",t),this.keys=E1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function E1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>J.fromName(r.referenceValue))}var a0=class extends Ce{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ul(t)&&jl(t.arrayValue,this.value)}},tg=class extends Ce{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&jl(this.value.arrayValue,t)}},c0=class extends Ce{constructor(e,t){super(e,"not-in",t)}matches(e){if(jl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!jl(this.value.arrayValue,t)}},u0=class extends Ce{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ul(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jl(this.value.arrayValue,r))}};var l0=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function d0(n,e=null,t=[],r=[],i=null,s=null,o=null){return new l0(n,e,t,r,i,s,o)}function po(n){let e=Z(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>r0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),nd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>fc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>fc(r)).join(",")),e.ue=t}return e.ue}function rd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!RG(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!v1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!uN(n.startAt,e.startAt)&&uN(n.endAt,e.endAt)}function ng(n){return J.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function rg(n,e){return n.filters.filter(t=>t instanceof Ce&&t.field.isEqual(e))}function lN(n,e,t){let r=zp,i=!0;for(let s of rg(n,e)){let o=zp,a=!0;switch(s.op){case"<":case"<=":o=xG(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=zp}oN({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];oN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function dN(n,e,t){let r=as,i=!0;for(let s of rg(n,e)){let o=as,a=!0;switch(s.op){case">=":case">":o=MG(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=as}aN({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];aN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var lr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function I1(n,e,t,r,i,s,o,a){return new lr(n,e,t,r,i,s,o,a)}function xc(n){return new lr(n)}function hN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function GI(n){return n.collectionGroup!==null}function uc(n){let e=Z(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ke(ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new fo(s,r))}),t.has(ft.keyField().canonicalString())||e.ce.push(new fo(ft.keyField(),r))}return e.ce}function an(n){let e=Z(n);return e.le||(e.le=kG(e,uc(n))),e.le}function kG(n,e){if(n.limitType==="F")return d0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new fo(i.field,s)});let t=n.endAt?new Pr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Pr(n.startAt.position,n.startAt.inclusive):null;return d0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function h0(n,e){let t=n.filters.concat([e]);return new lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function ig(n,e,t){return new lr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function id(n,e){return rd(an(n),an(e))&&n.limitType===e.limitType}function b1(n){return`${po(an(n))}|lt:${n.limitType}`}function rc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>_1(i)).join(", ")}]`),nd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>fc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>fc(i)).join(",")),`Target(${r})`}(an(n))}; limitType=${n.limitType})`}function sd(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):J.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of uc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=cN(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,uc(r),i)||r.endAt&&!function(o,a,c){let l=cN(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,uc(r),i))}(n,e)}function D1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function C1(n){return(e,t)=>{let r=!1;for(let i of uc(n)){let s=NG(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function NG(n,e,t){let r=n.field.isKeyField()?J.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?fs(c,l):ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var Or=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Io(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return h1(this.inner)}size(){return this.innerSize}};var PG=new Je(J.comparator);function Dn(){return PG}var T1=new Je(J.comparator);function Al(...n){let e=T1;for(let t of n)e=e.insert(t.key,t);return e}function S1(n){let e=T1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xr(){return Rl()}function A1(){return Rl()}function Rl(){return new Or(n=>n.toString(),(n,e)=>n.isEqual(e))}var OG=new Je(J.comparator),FG=new Ke(J.comparator);function me(...n){let e=FG;for(let t of n)e=e.add(t);return e}var VG=new Ke(ge);function WI(){return VG}function KI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fl(e)?"-0":e}}function x1(n){return{integerValue:""+n}}function M1(n,e){return a1(e)?x1(e):KI(n,e)}var gc=class{constructor(){this._=void 0}};function LG(n,e,t){return n instanceof ps?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qg(s)&&(s=qI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof mi?k1(n,e):n instanceof yi?N1(n,e):function(i,s){let o=R1(i,s),a=fN(o)+fN(i.Pe);return t0(o)&&t0(i.Pe)?x1(a):KI(i.serializer,a)}(n,e)}function jG(n,e,t){return n instanceof mi?k1(n,e):n instanceof yi?N1(n,e):t}function R1(n,e){return n instanceof gs?function(r){return t0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ps=class extends gc{},mi=class extends gc{constructor(e){super(),this.elements=e}};function k1(n,e){let t=P1(e);for(let r of n.elements)t.some(i=>Nr(i,r))||t.push(r);return{arrayValue:{values:t}}}var yi=class extends gc{constructor(e){super(),this.elements=e}};function N1(n,e){let t=P1(e);for(let r of n.elements)t=t.filter(i=>!Nr(i,r));return{arrayValue:{values:t}}}var gs=class extends gc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function fN(n){return Xe(n.integerValue||n.doubleValue)}function P1(n){return Ul(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var go=class{constructor(e,t){this.field=e,this.transform=t}};function UG(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mi&&i instanceof mi||r instanceof yi&&i instanceof yi?dc(r.elements,i.elements,Nr):r instanceof gs&&i instanceof gs?Nr(r.Pe,i.Pe):r instanceof ps&&i instanceof ps}(n.transform,e.transform)}var f0=class{constructor(e,t){this.version=e,this.transformResults=t}},ut=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Hp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var mc=class{};function O1(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ys(n.key,ut.none()):new ms(n.key,n.data,ut.none());{let t=n.data,r=Zt.empty(),i=new Ke(ft.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new dr(n.key,r,new Vn(i.toArray()),ut.none())}}function BG(n,e,t){n instanceof ms?function(i,s,o){let a=i.value.clone(),c=gN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof dr?function(i,s,o){if(!Hp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=gN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(F1(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function kl(n,e,t,r){return n instanceof ms?function(s,o,a,c){if(!Hp(s.precondition,o))return a;let l=s.value.clone(),d=mN(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof dr?function(s,o,a,c){if(!Hp(s.precondition,o))return a;let l=mN(s.fieldTransforms,c,o),d=o.data;return d.setAll(F1(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return Hp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function $G(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=R1(r.transform,i||null);s!=null&&(t===null&&(t=Zt.empty()),t.set(r.field,s))}return t||null}function pN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dc(r,i,(s,o)=>UG(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ms=class extends mc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},dr=class extends mc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function F1(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function gN(n,e,t){let r=new Map;oe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,jG(o,a,t[i]))}return r}function mN(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,LG(s,o,e))}return r}var ys=class extends mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Bl=class extends mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var $l=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&BG(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=kl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=kl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=A1();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=O1(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&dc(this.mutations,e.mutations,(t,r)=>pN(t,r))&&dc(this.baseMutations,e.baseMutations,(t,r)=>pN(t,r))}},p0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){oe(e.mutations.length===r.length);let i=function(){return OG}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var zl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var g0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Et,Ae;function V1(n){switch(n){default:return ne();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function L1(n){if(n===void 0)return ht("GRPC error has no .code"),P.UNKNOWN;switch(n){case Et.OK:return P.OK;case Et.CANCELLED:return P.CANCELLED;case Et.UNKNOWN:return P.UNKNOWN;case Et.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case Et.INTERNAL:return P.INTERNAL;case Et.UNAVAILABLE:return P.UNAVAILABLE;case Et.UNAUTHENTICATED:return P.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case Et.NOT_FOUND:return P.NOT_FOUND;case Et.ALREADY_EXISTS:return P.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return P.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case Et.ABORTED:return P.ABORTED;case Et.OUT_OF_RANGE:return P.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return P.UNIMPLEMENTED;case Et.DATA_LOSS:return P.DATA_LOSS;default:return ne()}}(Ae=Et||(Et={}))[Ae.OK=0]="OK",Ae[Ae.CANCELLED=1]="CANCELLED",Ae[Ae.UNKNOWN=2]="UNKNOWN",Ae[Ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ae[Ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ae[Ae.NOT_FOUND=5]="NOT_FOUND",Ae[Ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ae[Ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ae[Ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ae[Ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ae[Ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ae[Ae.ABORTED=10]="ABORTED",Ae[Ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ae[Ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ae[Ae.INTERNAL=13]="INTERNAL",Ae[Ae.UNAVAILABLE=14]="UNAVAILABLE",Ae[Ae.DATA_LOSS=15]="DATA_LOSS";var yN=null;function j1(){return new TextEncoder}var zG=new ns([4294967295,4294967295],0);function vN(n){let e=j1().encode(n),t=new ME;return t.update(e),new Uint8Array(t.digest())}function wN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ns([t,r],0),new ns([i,s],0)]}var m0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new co(`Invalid padding: ${t}`);if(r<0)throw new co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new co(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new co(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ns.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ns.fromNumber(r)));return i.compare(zG)===1&&(i=new ns([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=vN(e),[r,i]=wN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=vN(e),[r,i]=wN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},co=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ql=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ce.min(),i,new Je(ge),Dn(),me())}},Hl=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,me(),me(),me())}};var lc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},sg=class{constructor(e,t){this.targetId=e,this.me=t}},og=class{constructor(e,t,r=gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ag=class{constructor(){this.fe=0,this.ge=EN(),this.pe=gt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),t=me(),r=me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new Hl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=EN()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},y0=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Dn(),this.qe=_N(),this.Qe=new Je(ge)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(ng(s))if(r===0){let o=new J(s.path);this.Ue(t,o,Dt.newNoDocument(o,ce.min()))}else oe(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}yN?.et(function(d,h,p,m,_){var w,E,R,O,F,z;let X={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},Q=h.unchangedNames;return Q&&(X.bloomFilter={applied:_===0,hashCount:(w=Q?.hashCount)!==null&&w!==void 0?w:0,bitmapLength:(O=(R=(E=Q?.bits)===null||E===void 0?void 0:E.bitmap)===null||R===void 0?void 0:R.length)!==null&&O!==void 0?O:0,padding:(z=(F=Q?.bits)===null||F===void 0?void 0:F.padding)!==null&&z!==void 0?z:0,mightContain:D=>{var v;return(v=m?.mightContain(D))!==null&&v!==void 0&&v}}),X}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ds(r).toUint8Array()}catch(c){if(c instanceof Xp)return ur("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new m0(o,i,s)}catch(c){return ur(c instanceof co?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&ng(a.target)){let c=new J(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Dt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=me();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ql(e,t,this.Qe,this.ke,r);return this.ke=Dn(),this.qe=_N(),this.Qe=new Je(ge),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ag,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ke(ge),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ag),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function _N(){return new Je(J.comparator)}function EN(){return new Je(J.comparator)}var qG={asc:"ASCENDING",desc:"DESCENDING"},HG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GG={and:"AND",or:"OR"},v0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function w0(n,e){return n.useProto3Json||nd(e)?e:{value:e}}function yc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function U1(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function WG(n,e){return yc(n,e.toTimestamp())}function pt(n){return oe(!!n),ce.fromTimestamp(function(t){let r=gi(t);return new rt(r.seconds,r.nanos)}(n))}function QI(n,e){return _0(n,e).canonicalString()}function _0(n,e){let t=function(i){return new xe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function B1(n){let e=xe.fromString(n);return oe(Z1(e)),e}function Gl(n,e){return QI(n.databaseId,e.path)}function Rr(n,e){let t=B1(e);if(t.get(1)!==n.databaseId.projectId)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new j(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new J(q1(t))}function $1(n,e){return QI(n.databaseId,e)}function z1(n){let e=B1(n);return e.length===4?xe.emptyPath():q1(e)}function E0(n){return new xe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function q1(n){return oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function IN(n,e,t){return{name:Gl(n,e),fields:t.value.mapValue.fields}}function H1(n,e,t){let r=Rr(n,e.name),i=pt(e.updateTime),s=e.createTime?pt(e.createTime):ce.min(),o=new Zt({mapValue:{fields:e.fields}}),a=Dt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function KG(n,e){return"found"in e?function(r,i){oe(!!i.found),i.found.name,i.found.updateTime;let s=Rr(r,i.found.name),o=pt(i.found.updateTime),a=i.found.createTime?pt(i.found.createTime):ce.min(),c=new Zt({mapValue:{fields:i.found.fields}});return Dt.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){oe(!!i.missing),oe(!!i.readTime);let s=Rr(r,i.missing),o=pt(i.readTime);return Dt.newNoDocument(s,o)}(n,e):ne()}function QG(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(oe(d===void 0||typeof d=="string"),gt.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),gt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?P.UNKNOWN:L1(l.code);return new j(d,l.message||"")}(o);t=new og(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Rr(n,r.document.name),s=pt(r.document.updateTime),o=r.document.createTime?pt(r.document.createTime):ce.min(),a=new Zt({mapValue:{fields:r.document.fields}}),c=Dt.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new lc(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Rr(n,r.document),s=r.readTime?pt(r.readTime):ce.min(),o=Dt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new lc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Rr(n,r.document),s=r.removedTargetIds||[];t=new lc([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new g0(i,s),a=r.targetId;t=new sg(a,o)}}return t}function Wl(n,e){let t;if(e instanceof ms)t={update:IN(n,e.key,e.value)};else if(e instanceof ys)t={delete:Gl(n,e.key)};else if(e instanceof dr)t={update:IN(n,e.key,e.data),updateMask:t9(e.fieldMask)};else{if(!(e instanceof Bl))return ne();t={verify:Gl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ps)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:WG(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(n,e.precondition)),t}function I0(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?ut.updateTime(pt(s.updateTime)):s.exists!==void 0?ut.exists(s.exists):ut.none()}(e.currentDocument):ut.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME"),c=new ps;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new mi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new yi(d)}else"increment"in a?c=new gs(o,a.increment):ne();let l=ft.fromServerFormat(a.fieldPath);return new go(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Rr(n,e.update.name),s=new Zt({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new Vn(l.map(d=>ft.fromServerFormat(d)))}(e.updateMask);return new dr(i,s,o,t,r)}return new ms(i,s,t,r)}if(e.delete){let i=Rr(n,e.delete);return new ys(i,t)}if(e.verify){let i=Rr(n,e.verify);return new Bl(i,t)}return ne()}function YG(n,e){return n&&n.length>0?(oe(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?pt(i.updateTime):pt(s);return o.isEqual(ce.min())&&(o=pt(s)),new f0(o,i.transformResults||[])}(t,e))):[]}function G1(n,e){return{documents:[$1(n,e.path)]}}function W1(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=$1(n,i);let s=function(l){if(l.length!==0)return Y1($e.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(p){return{field:ic(p.field),direction:JG(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=w0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function K1(n){let e=z1(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){oe(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){let p=Q1(h);return p instanceof $e&&HI(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(_){return new fo(sc(_.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,nd(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(h){let p=!!h.before,m=h.values||[];return new Pr(m,p)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let p=!h.before,m=h.values||[];return new Pr(m,p)}(t.endAt)),I1(e,i,o,s,a,"F",c,l)}function ZG(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Q1(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=sc(t.unaryFilter.field);return Ce.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=sc(t.unaryFilter.field);return Ce.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=sc(t.unaryFilter.field);return Ce.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=sc(t.unaryFilter.field);return Ce.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(n):n.fieldFilter!==void 0?function(t){return Ce.create(sc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $e.create(t.compositeFilter.filters.map(r=>Q1(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(t.compositeFilter.op))}(n):ne()}function JG(n){return qG[n]}function XG(n){return HG[n]}function e9(n){return GG[n]}function ic(n){return{fieldPath:n.canonicalString()}}function sc(n){return ft.fromServerFormat(n.fieldPath)}function Y1(n){return n instanceof Ce?function(t){if(t.op==="=="){if(sN(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NAN"}};if(iN(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(sN(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NOT_NAN"}};if(iN(t.value))return{unaryFilter:{field:ic(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ic(t.field),op:XG(t.op),value:t.value}}}(n):n instanceof $e?function(t){let r=t.getFilters().map(i=>Y1(i));return r.length===1?r[0]:{compositeFilter:{op:e9(t.op),filters:r}}}(n):ne()}function t9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Z1(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var vc=class n{constructor(e,t,r,i,s=ce.min(),o=ce.min(),a=gt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cg=class{constructor(e){this.ct=e}};function n9(n,e){let t;if(e.document)t=H1(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=J.fromSegments(e.noDocument.path),i=yo(e.noDocument.readTime);t=Dt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ne();{let r=J.fromSegments(e.unknownDocument.path),i=yo(e.unknownDocument.version);t=Dt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new rt(i[0],i[1]);return ce.fromTimestamp(s)}(e.readTime)),t}function bN(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ug(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Gl(s,o.key),fields:o.data.value.mapValue.fields,updateTime:yc(s,o.version.toTimestamp()),createTime:yc(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:mo(e.version)};else{if(!e.isUnknownDocument())return ne();r.unknownDocument={path:t.path.toArray(),version:mo(e.version)}}return r}function ug(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function mo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yo(n){let e=new rt(n.seconds,n.nanoseconds);return ce.fromTimestamp(e)}function so(n,e){let t=(e.baseMutations||[]).map(s=>I0(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>I0(n.ct,s)),i=rt.fromMillis(e.localWriteTimeMs);return new $l(e.batchId,i,t,r)}function xl(n){let e=yo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?yo(n.lastLimboFreeSnapshotVersion):ce.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return oe(s.documents.length===1),an(xc(z1(s.documents[0])))}(n.query):function(s){return an(K1(s))}(n.query),new vc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,gt.fromBase64String(n.resumeToken))}function J1(n,e){let t=mo(e.snapshotVersion),r=mo(e.lastLimboFreeSnapshotVersion),i;i=ng(e.target)?G1(n.ct,e.target):W1(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:po(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function YI(n){let e=K1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ig(e,e.limit,"L"):e}function FE(n,e){return new zl(e.largestBatchId,I0(n.ct,e.overlayMutation))}function DN(n,e){let t=e.path.lastSegment();return[n,on(e.path.popLast()),t]}function CN(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:mo(r.readTime),documentKey:on(r.documentKey.path),largestBatchId:r.largestBatchId}}var b0=class{getBundleMetadata(e,t){return TN(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:yo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return TN(e).put(function(i){return{bundleId:i.id,createTime:mo(pt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return SN(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:YI(s.bundledQuery),readTime:yo(s.readTime)}}(r)})}saveNamedQuery(e,t){return SN(e).put(function(i){return{name:i.name,readTime:mo(pt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function TN(n){return xt(n,"bundles")}function SN(n){return xt(n,"namedQueries")}var lg=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Dl(e).get(DN(this.userId,t)).next(r=>r?FE(this.serializer,r):null)}getOverlays(e,t){let r=xr();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new zl(t,o);i.push(this.ht(e,a))}),k.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(on(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Dl(e).j("collectionPathOverlayIndex",a))}),k.waitFor(s)}getOverlaysForCollection(e,t,r){let i=xr(),s=on(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Dl(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=FE(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=xr(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Dl(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let h=FE(this.serializer,l);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Dl(e).put(function(i,s,o){let[a,c,l]=DN(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Wl(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Dl(n){return xt(n,"documentOverlays")}var D0=class{Pt(e){return xt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?gt.fromUint8Array(r):gt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var fi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Xe(e.integerValue));else if("doubleValue"in e){let r=Xe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Fl(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=gi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ds(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?p1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Hg(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ne()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Xe(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),J.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};fi.vt=new fi;function r9(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function AN(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=r9(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var C0=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=AN(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=AN(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},T0=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},S0=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},oo=class{constructor(){this.jt=new C0,this.Ht=new T0(this.jt),this.Jt=new S0(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var ao=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function rs(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=xN(n.arrayValue,e.arrayValue),t!==0?t:(t=xN(n.directionalValue,e.directionalValue),t!==0?t:J.comparator(n.documentKey,e.documentKey)))}function xN(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var dg=class{constructor(e){this.Xt=new Ke((t,r)=>ft.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(oe(e.collectionGroup===this.collectionId),this.nn)return!1;let t=KE(e);if(t!==void 0&&!this.sn(t))return!1;let r=ro(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ke(ft.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new cc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new cc(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new cc(r.field,r.dir==="asc"?0:1)));return new hc(hc.UNKNOWN_ID,this.collectionId,t,Ol.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function X1(n){var e,t;if(oe(n instanceof Ce||n instanceof $e),n instanceof Ce){if(n instanceof tg){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ce.create(n.field,"==",s)))||[];return $e.create(i,"or")}return n}let r=n.filters.map(i=>X1(i));return $e.create(r,n.op)}function i9(n){if(n.getFilters().length===0)return[];let e=M0(X1(n));return oe(eP(e)),A0(e)||x0(e)?[e]:e.getFilters()}function A0(n){return n instanceof Ce}function x0(n){return n instanceof $e&&HI(n)}function eP(n){return A0(n)||x0(n)||function(t){if(t instanceof $e&&n0(t)){for(let r of t.getFilters())if(!A0(r)&&!x0(r))return!1;return!0}return!1}(n)}function M0(n){if(oe(n instanceof Ce||n instanceof $e),n instanceof Ce)return n;if(n.filters.length===1)return M0(n.filters[0]);let e=n.filters.map(r=>M0(r)),t=$e.create(e,n.op);return t=hg(t),eP(t)?t:(oe(t instanceof $e),oe(pc(t)),oe(t.filters.length>1),t.filters.reduce((r,i)=>ZI(r,i)))}function ZI(n,e){let t;return oe(n instanceof Ce||n instanceof $e),oe(e instanceof Ce||e instanceof $e),t=n instanceof Ce?e instanceof Ce?function(i,s){return $e.create([i,s],"and")}(n,e):MN(n,e):e instanceof Ce?MN(e,n):function(i,s){if(oe(i.filters.length>0&&s.filters.length>0),pc(i)&&pc(s))return w1(i,s.getFilters());let o=n0(i)?i:s,a=n0(i)?s:i,c=o.filters.map(l=>ZI(l,a));return $e.create(c,"or")}(n,e),hg(t)}function MN(n,e){if(pc(e))return w1(e,n.getFilters());{let t=e.filters.map(r=>ZI(n,r));return $e.create(t,"or")}}function hg(n){if(oe(n instanceof Ce||n instanceof $e),n instanceof Ce)return n;let e=n.getFilters();if(e.length===1)return hg(e[0]);if(y1(n))return n;let t=e.map(i=>hg(i)),r=[];return t.forEach(i=>{i instanceof Ce?r.push(i):i instanceof $e&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:$e.create(r,n.op)}var R0=class{constructor(){this.un=new Kl}addToCollectionParentIndex(e,t){return this.un.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Gn.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Gn.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},Kl=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ke(xe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ke(xe.comparator)).toArray()}};var Lp=new Uint8Array(0),k0=class{constructor(e,t){this.databaseId=t,this.cn=new Kl,this.ln=new Or(r=>po(r),(r,i)=>rd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:on(i)};return RN(e).put(s)}return k.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[n1(t),""],!1,!0);return RN(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Ar(o.parent))}return r})}addFieldIndex(e,t){let r=Cl(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=ec(e);return s.next(a=>{o.put(CN(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=Cl(e),i=ec(e),s=Xa(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Cl(e),r=Xa(e),i=ec(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return k.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new dg(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Xa(e),i=!0,s=new Map;return k.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=me(),a=[];return k.forEach(s,(c,l)=>{U("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(z=>`${z.fieldPath}:${z.kind}`).join(",")}`}(c)} to execute ${po(t)}`);let d=function(F,z){let X=KE(z);if(X===void 0)return null;for(let Q of rg(F,X.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(l,c),h=function(F,z){let X=new Map;for(let Q of ro(z))for(let D of rg(F,Q.fieldPath))switch(D.op){case"==":case"in":X.set(Q.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return X.set(Q.fieldPath.canonicalString(),D.value),Array.from(X.values())}return null}(l,c),p=function(F,z){let X=[],Q=!0;for(let D of ro(z)){let v=D.kind===0?lN(F,D.fieldPath,F.startAt):dN(F,D.fieldPath,F.startAt);X.push(v.value),Q&&(Q=v.inclusive)}return new Pr(X,Q)}(l,c),m=function(F,z){let X=[],Q=!0;for(let D of ro(z)){let v=D.kind===0?dN(F,D.fieldPath,F.endAt):lN(F,D.fieldPath,F.endAt);X.push(v.value),Q&&(Q=v.inclusive)}return new Pr(X,Q)}(l,c),_=this.In(c,l,p),w=this.In(c,l,m),E=this.Tn(c,l,h),R=this.En(c.indexId,d,_,p.inclusive,w,m.inclusive,E);return k.forEach(R,O=>r.G(O,t.limit).next(F=>{F.forEach(z=>{let X=J.fromSegments(z.documentKey);o.has(X)||(o=o.add(X),a.push(X))})}))}).next(()=>a)}return k.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=i9($e.create(e.filters,"and")).map(r=>d0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),d=[];for(let h=0;h<c;++h){let p=t?this.dn(t[h/l]):Lp,m=this.An(e,p,r[h%l],i),_=this.Rn(e,p,s[h%l],o),w=a.map(E=>this.An(e,p,E,!0));d.push(...this.createRange(m,_,w))}return d}An(e,t,r,i){let s=new ao(e,J.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new ao(e,J.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new dg(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return k.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ke(ft.comparator),d=!1;for(let h of c.filters)for(let p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:l=l.add(p.field));for(let h of c.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new oo;for(let i of ro(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);fi.vt.It(s,o)}return r.zt()}dn(e){let t=new oo;return fi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new oo;return fi.vt.It(ho(this.databaseId,t),r.Yt(function(s){let o=ro(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new oo);let s=0;for(let o of ro(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&Ul(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);fi.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new oo;c.seed(a.zt()),fi.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Ce&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Cl(e),i=ec(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return k.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,h){let p=h?new Ol(h.sequenceNumber,new Gn(yo(h.readTime),new J(Ar(h.documentKey)),h.largestBatchId)):Ol.empty(),m=d.fields.map(([_,w])=>new cc(ft.fromServerFormat(_),w));return new hc(d.indexId,d.collectionGroup,m,p)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ge(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Cl(e),s=ec(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>k.forEach(a,c=>s.put(CN(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return k.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?k.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),k.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(s,c);return l.isEqual(d)?k.resolve():this.bn(e,s,c,l,d)}))))})}Dn(e,t,r,i){return Xa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Xa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Xa(e),s=new Ke(rs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new ao(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Ke(rs),i=this.Vn(t,e);if(i==null)return r;let s=KE(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Ul(o))for(let a of o.arrayValue.values||[])r=r.add(new ao(t.indexId,e.key,this.dn(a),i))}else r=r.add(new ao(t.indexId,e.key,Lp,i));return r}bn(e,t,r,i,s){U("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,d,h,p){let m=c.getIterator(),_=l.getIterator(),w=Ja(m),E=Ja(_);for(;w||E;){let R=!1,O=!1;if(w&&E){let F=d(w,E);F<0?O=!0:F>0&&(R=!0)}else w!=null?O=!0:R=!0;R?(h(E),E=Ja(_)):O?(p(w),w=Ja(m)):(w=Ja(m),E=Ja(_))}}(i,s,rs,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),k.waitFor(o)}yn(e){let t=1;return ec(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>rs(o,a)).filter((o,a,c)=>!a||rs(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=rs(o,e),c=rs(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Lp,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Lp,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return rs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kN)}getMinOffset(e,t){return k.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ne())).next(kN)}};function RN(n){return xt(n,"collectionParents")}function Xa(n){return xt(n,"indexEntries")}function Cl(n){return xt(n,"indexConfiguration")}function ec(n){return xt(n,"indexState")}function kN(n){oe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;BI(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Gn(e.readTime,e.documentKey,t)}var NN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function tP(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(c.next(()=>{oe(a===1)}));let l=[];for(let d of t.mutations){let h=c1(e,d.key.path,t.batchId);s.push(i.delete(h)),l.push(d.key)}return k.waitFor(s).next(()=>l)}function fg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ne();e=n.noDocument}return JSON.stringify(e).length}Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(41943040,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);var pg=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){oe(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return is(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=oc(e),o=is(e);return o.add({}).next(a=>{oe(typeof a=="number");let c=new $l(a,t,r,i),l=function(m,_,w){let E=w.baseMutations.map(O=>Wl(m.ct,O)),R=w.mutations.map(O=>Wl(m.ct,O));return{userId:_,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:E,mutations:R}}(this.serializer,this.userId,c),d=[],h=new Ke((p,m)=>ge(p.canonicalString(),m.canonicalString()));for(let p of i){let m=c1(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(l)),d.push(s.put(m,lG))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),k.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return is(e).get(t).next(r=>r?(oe(r.userId===this.userId),so(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?k.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return is(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=r),s=so(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return is(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return is(e).U("userMutationsIndex",t).next(r=>r.map(i=>so(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=$p(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return oc(e).J({range:i},(o,a,c)=>{let[l,d,h]=o,p=Ar(d);if(l===this.userId&&t.path.isEqual(p))return is(e).get(h).next(m=>{if(!m)throw ne();oe(m.userId===this.userId),s.push(so(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ke(ge),i=[];return t.forEach(s=>{let o=$p(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=oc(e).J({range:a},(l,d,h)=>{let[p,m,_]=l,w=Ar(m);p===this.userId&&s.path.isEqual(w)?r=r.add(_):h.done()});i.push(c)}),k.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=$p(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ke(ge);return oc(e).J({range:o},(c,l,d)=>{let[h,p,m]=c,_=Ar(p);h===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(is(e).get(s).next(o=>{if(o===null)throw ne();oe(o.userId===this.userId),r.push(so(this.serializer,o))}))}),k.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return tP(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),k.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return k.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return oc(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Ar(s[1]);i.push(c)}else a.done()}).next(()=>{oe(i.length===0)})})}containsKey(e,t){return nP(e,this.userId,t)}Nn(e){return rP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function nP(n,e,t){let r=$p(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return oc(n).J({range:s,H:!0},(a,c,l)=>{let[d,h,p]=a;d===e&&h===i&&(o=!0),l.done()}).next(()=>o)}function is(n){return xt(n,"mutations")}function oc(n){return xt(n,"documentMutations")}function rP(n){return xt(n,"mutationQueues")}var wc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var N0=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new wc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ce.fromTimestamp(new rt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tc(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(oe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return tc(e).J((o,a)=>{let c=xl(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>k.waitFor(s)).next(()=>i)}forEachTarget(e,t){return tc(e).J((r,i)=>{let s=xl(i);t(s)})}qn(e){return PN(e).get("targetGlobalKey").next(t=>(oe(t!==null),t))}Qn(e,t){return PN(e).put("targetGlobalKey",t)}Kn(e,t){return tc(e).put(J1(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=po(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return tc(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=xl(a);rd(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=ss(e);return t.forEach(o=>{let a=on(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),k.waitFor(i)}removeMatchingKeys(e,t,r){let i=ss(e);return k.forEach(t,s=>{let o=on(s.path);return k.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=ss(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=ss(e),s=me();return i.J({range:r,H:!0},(o,a,c)=>{let l=Ar(o[1]),d=new J(l);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=on(t.path),i=IDBKeyRange.bound([r],[n1(r)],!1,!0),s=0;return ss(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return tc(e).get(t).next(r=>r?xl(r):null)}};function tc(n){return xt(n,"targets")}function PN(n){return xt(n,"targetGlobal")}function ss(n){return xt(n,"targetDocuments")}function ON([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var P0=class{constructor(e){this.Un=e,this.buffer=new Ke(ON),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();ON(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},O0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){U("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>C(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){_s(t)?U("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ws(t)}yield this.Hn(3e5)}))}},F0=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(Fn.oe);let r=new P0(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(NN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NN):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),nc()<=gr.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}};function s9(n,e){return new F0(n,e)}var V0=class{constructor(e,t){this.db=e,this.garbageCollector=s9(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return jp(e,r)}removeReference(e,t,r){return jp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return jp(e,t)}nr(e,t){return function(i,s){let o=!1;return rP(i).Y(a=>nP(i,a,s).next(c=>(c&&(o=!0),k.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ce.min()),ss(e).delete(function(h){return[0,on(h.path)]}(o))))});i.push(c)}}).next(()=>k.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return jp(e,t)}tr(e,t){let r=ss(e),i,s=Fn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==Fn.oe&&t(new J(Ar(i)),s),s=l,i=c):s=Fn.oe}).next(()=>{s!==Fn.oe&&t(new J(Ar(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function jp(n,e){return ss(n).put(function(r,i){return{targetId:0,path:on(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var gg=class{constructor(){this.changes=new Or(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var L0=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return no(e).put(r)}removeEntry(e,t,r){return no(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ug(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Dt.newInvalidDocument(t);return no(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Tl(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Dt.newInvalidDocument(t)};return no(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Tl(t))},(i,s)=>{r={document:this.ir(t,s),size:fg(s)}}).next(()=>r)}getEntries(e,t){let r=Dn();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Dn(),i=new Je(J.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,fg(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return k.resolve();let i=new Ke(LN);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(Tl(i.first()),Tl(i.last())),o=i.getIterator(),a=o.getNext();return no(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{let h=J.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&LN(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(Tl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ug(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return no(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=Dn();for(let h of l){let p=this.ir(J.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(sd(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Dn(),o=VN(t,r),a=VN(t,Gn.max());return no(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let h=this.ir(J.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new j0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return FN(e).get("remoteDocumentGlobalKey").next(t=>(oe(!!t),t))}rr(e,t){return FN(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=n9(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ce.min())))return r}return Dt.newInvalidDocument(e)}};function iP(n){return new L0(n)}var j0=class extends gg{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Or(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ke((s,o)=>ge(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=bN(this.cr.serializer,o);i=i.add(s.path.popLast());let l=fg(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=bN(this.cr.serializer,o.convertToNoDocument(ce.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),k.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function FN(n){return xt(n,"remoteDocumentGlobal")}function no(n){return xt(n,"remoteDocumentsV14")}function Tl(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function VN(n,e){let t=e.documentKey.path.toArray();return[n,ug(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function LN(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ge(t[s],r[s]),i)return i;return i=ge(t.length,r.length),i||(i=ge(t[t.length-2],r[r.length-2]),i||ge(t[t.length-1],r[r.length-1]))}var U0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var mg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&kl(r.mutation,i,Vn.empty(),rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=me()){let i=xr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Al();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=xr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,me()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Dn(),o=Rl(),a=function(){return Rl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof dr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),kl(d.mutation,l,d.mutation.getFieldMask(),rt.now())):o.set(l.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var h;return a.set(l,new U0(d,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Rl(),i=new Je((o,a)=>o-a),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Vn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let h=(i.get(a.batchId)||me()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=A1();d.forEach(p=>{if(!s.has(p)){let m=O1(t.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return J.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):GI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):k.resolve(xr()),a=-1,c=s;return o.next(l=>k.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,me())).next(d=>({batchId:a,changes:S1(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(r=>{let i=Al();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Al();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let l=function(h,p){return new lr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Dt.newInvalidDocument(d)))});let a=Al();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&kl(d.mutation,l,Vn.empty(),rt.now()),sd(t,l)&&(a=a.insert(c,l))}),a})}};var B0=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return k.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:pt(i.createTime)}}(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:YI(i.bundledQuery),readTime:pt(i.readTime)}}(t)),k.resolve()}};var $0=class{constructor(){this.overlays=new Je(J.comparator),this.Ir=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=xr();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=xr(),s=t.length+1,o=new J(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Je((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=xr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=xr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new zl(t,r));let s=this.Ir.get(t);s===void 0&&(s=me(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var z0=class{constructor(){this.sessionToken=gt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var Ql=class{constructor(){this.Tr=new Ke(It.Er),this.dr=new Ke(It.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new It(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new It(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new J(new xe([])),r=new It(t,e),i=new It(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new J(new xe([])),r=new It(t,e),i=new It(t,e+1),s=me();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new It(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},It=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return J.comparator(e.key,t.key)||ge(e.wr,t.wr)}static Ar(e,t){return ge(e.wr,t.wr)||J.comparator(e.key,t.key)}};var q0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ke(It.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new $l(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new It(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,t){return k.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new It(t,0),i=new It(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ke(ge);return t.forEach(i=>{let s=new It(i,0),o=new It(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;J.isDocumentKey(s)||(s=s.child(""));let o=new It(new J(s),0),a=new Ke(ge);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(t.mutations,i=>{let s=new It(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new It(t,0),i=this.br.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var H0=class{constructor(e){this.Mr=e,this.docs=function(){return new Je(J.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():Dt.newInvalidDocument(t))}getEntries(e,t){let r=Dn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Dt.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Dn(),o=t.path,a=new J(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||BI(i1(d),r)<=0||(i.has(d.key)||sd(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ne()}Or(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new G0(this)}getSize(e){return k.resolve(this.size)}},G0=class extends gg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var W0=class{constructor(e){this.persistence=e,this.Nr=new Or(t=>po(t),rd),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Ql,this.targetCount=0,this.kr=wc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),k.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new wc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Kn(t),k.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.Br.containsKey(t))}};var yg=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Fn(0),this.Kr=!1,this.Kr=!0,this.$r=new z0,this.referenceDelegate=e(this),this.Ur=new W0(this),this.indexManager=new R0,this.remoteDocumentCache=function(i){return new H0(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cg(t),this.Gr=new B0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new q0(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);let i=new K0(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},K0=class extends Yp{constructor(e){super(),this.currentSequenceNumber=e}},vg=class n{constructor(e){this.persistence=e,this.Jr=new Ql,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),k.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=J.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ce.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return k.or([()=>k.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var Q0=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new Zp("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eN,{unique:!0}),c.createObjectStore("documentMutations")}(e),jN(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=k.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),jN(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ce.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",eN,{unique:!0});let h=l.store("mutations"),p=d.map(m=>h.put(m));return k.waitFor(p)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:IG});l.createIndex("collectionPathOverlayIndex",bG,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",DG,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:dG});l.createIndex("documentKeyIndex",hG),l.createIndex("collectionGroupIndex",fG)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:vG}).createIndex("sequenceNumberIndex",wG,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:_G}).createIndex("documentKeyIndex",EG,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=fg(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>k.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>k.forEach(a,c=>{oe(c.userId===s.userId);let l=so(this.serializer,c);return tP(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new xe(o),l=function(h){return[0,on(h)]}(c);s.push(t.get(l).next(d=>d?k.resolve():(h=>t.put({targetId:0,path:on(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>k.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:yG});let r=t.store("collectionParents"),i=new Kl,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:on(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new xe(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=Ar(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=xl(i),o=J1(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(h){return h.document?new J(xe.fromString(h.document.name).popFirst(5)):h.noDocument?J.fromSegments(h.noDocument.path):h.unknownDocument?J.fromSegments(h.unknownDocument.path):ne()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>k.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=iP(this.serializer),s=new yg(vg.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:me();so(this.serializer,c).keys().forEach(h=>d=d.add(h)),a.set(c.userId,d)}),k.forEach(a,(c,l)=>{let d=new bt(l),h=lg.lt(this.serializer,d),p=s.getIndexManager(d),m=pg.lt(d,this.serializer,p,s.referenceDelegate);return new mg(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Vl(t,Fn.oe),c).next()})})}};function jN(n){n.createObjectStore("targetDocuments",{keyPath:gG}).createIndex("documentTargetsIndex",mG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pG,{unique:!0}),n.createObjectStore("targetGlobal")}var VE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Y0=class n{constructor(e,t,r,i,s,o,a,c,l,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!n.D())throw new j(P.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new V0(this,i),this.Ai=t+"main",this.serializer=new cg(c),this.Ri=new ls(this.Ai,this.hi,new Q0(this.serializer)),this.$r=new D0,this.Ur=new N0(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iP(this.serializer),this.Gr=new b0,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&ht("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(P.FAILED_PRECONDITION,VE);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Fn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>C(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>C(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>C(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Up(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(_s(e))return U("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return U("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Sl(e).get("owner").next(t=>k.resolve(this.vi(t)))}Ci(e){return Up(e).delete(this.clientId)}Fi(){return C(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=xt(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return k.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?k.resolve(!0):Sl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new j(P.FAILED_PRECONDITION,VE);return!1}}return!(!this.networkEnabled||!this.inForeground)||Up(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&U("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return C(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Vl(e,Fn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Up(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return pg.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new k0(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return lg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){U("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?SG:c===16?TG:c===15?zI:c===14?d1:c===13?l1:c===12?CG:c===11?u1:void ne()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Vl(a,this.Qr?this.Qr.next():Fn.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw ht(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new j(P.FAILED_PRECONDITION,s1);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Sl(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new j(P.FAILED_PRECONDITION,VE)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Sl(e).put("owner",t)}static D(){return ls.D()}bi(e){let t=Sl(e);return t.get("owner").next(r=>this.vi(r)?(U("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):k.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(ht(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Fm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return U("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ht("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){ht("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Sl(n){return xt(n,"owner")}function Up(n){return xt(n,"clientMetadata")}function JI(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var Z0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=me(),i=me();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var J0=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var wg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Fm()?8:o1(ru())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new J0;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(nc()<=gr.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",rc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(nc()<=gr.DEBUG&&U("QueryEngine","Query:",rc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(nc()<=gr.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",rc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,an(t))):k.resolve())}Yi(e,t){if(hN(t))return k.resolve(null);let r=an(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ig(t,null,"F"),r=an(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=me(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,ig(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return hN(t)||i.isEqual(ce.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?k.resolve(null):(nc()<=gr.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),rc(t)),this.rs(e,o,t,r1(i,-1)).next(a=>a))})}ts(e,t){let r=new Ke(C1(e));return t.forEach((i,s)=>{sd(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return nc()<=gr.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",rc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Gn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var X0=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Je(ge),this._s=new Or(s=>po(s),rd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function sP(n,e,t,r){return new X0(n,e,t,r)}function oP(n,e){return C(this,null,function*(){let t=Z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=me();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function o9(n,e){let t=Z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let h=l.batch,p=h.keys(),m=k.resolve();return p.forEach(_=>{m=m.next(()=>d.getEntry(c,_)).next(w=>{let E=l.docVersions.get(_);oe(E!==null),w.version.compareTo(E)<0&&(h.applyToRemoteDocument(w,l),w.isValidDocument()&&(w.setReadTime(l.commitVersion),d.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=me();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function aP(n){let e=Z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function a9(n,e){let t=Z(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,h)=>{let p=i.get(h);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(gt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(w,E,R){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(p,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let c=Dn(),l=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(cP(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(ce.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function cP(n,e,t){let r=me(),i=me();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Dn();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ce.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):U("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function c9(n,e){let t=Z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _c(n,e){let t=Z(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new vc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ec(n,e,t){return C(this,null,function*(){let r=Z(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!_s(o))throw o;U("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function _g(n,e,t){let r=Z(n),i=ce.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let h=Z(c),p=h._s.get(d);return p!==void 0?k.resolve(h.os.get(p)):h.Ur.getTargetData(l,d)}(r,o,an(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ce.min(),t?s:me())).next(a=>(dP(r,D1(e),a),{documents:a,Ts:s})))}function uP(n,e){let t=Z(n),r=Z(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function lP(n,e){let t=Z(n),r=t.us.get(e)||ce.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,r1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(dP(t,e,i),i))}function dP(n,e,t){let r=n.us.get(e)||ce.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function u9(n,e,t,r){return C(this,null,function*(){let i=Z(n),s=me(),o=Dn();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(s=s.add(d));let h=e.ds(l);h.setReadTime(e.As(l.metadata.readTime)),o=o.insert(d,h)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield _c(i,function(d){return an(xc(xe.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>cP(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function l9(r,i){return C(this,arguments,function*(n,e,t=me()){let s=yield _c(n,an(YI(e.bundledQuery))),o=Z(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=pt(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let l=s.withResumeToken(gt.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(l.targetId,l),o.Ur.updateTargetData(a,l).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function UN(n,e){return`firestore_clients_${n}_${e}`}function BN(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function LE(n,e){return`firestore_targets_${n}_${e}`}var Eg=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new j(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(ht("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Nl=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new j(r.error.code,r.error.message))),s?new n(e,r.state,i):(ht("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ig=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=WI();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=a1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(ht("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},eI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(ht("SharedClientState",`Failed to parse online state: ${e}`),null)}},Yl=class{constructor(){this.activeTargetIds=WI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Pl=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Je(ge),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=UN(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Yl),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return C(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(UN(this.persistenceKey,r));if(i){let s=Ig.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(LE(this.persistenceKey,e));if(i){let s=Nl.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(LE(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return U("SharedClientState","READ",e,t),t}setItem(e,t){U("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){U("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(U("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void ht("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>C(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=Fn.oe;if(s!=null)try{let a=JSON.parse(s);oe(typeof a=="number"),o=a}catch(a){ht("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Fn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Eg(this.currentUser,e,t,r),s=BN(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=BN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=LE(this.persistenceKey,e),s=new Nl(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Ig.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Eg.Rs(new bt(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Nl.Rs(i,t)}Ls(e){return eI.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return C(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);U("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=WI();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},bg=class{constructor(){this.so=new Yl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Yl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var tI=class{_o(e){}shutdown(){}};var Dg=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){U("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){U("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bp=null;function jE(){return Bp===null?Bp=function(){return 268435456+Math.round(2147483648*Math.random())}():Bp++,"0x"+Bp.toString(16)}var d9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var nI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Yt="WebChannelConnection",rI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=jE(),c=this.xo(t,r.toUriEncodedString());U("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(U("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw ur("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ac}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=d9[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=jE();return new Promise((o,a)=>{let c=new RE;c.setWithCredentials(!0),c.listenOnce(kE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case bl.NO_ERROR:let d=c.getResponseJson();U(Yt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case bl.TIMEOUT:U(Yt,`RPC '${e}' ${s} timed out`),a(new j(P.DEADLINE_EXCEEDED,"Request time out"));break;case bl.HTTP_ERROR:let h=c.getStatus();if(U(Yt,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let m=p?.error;if(m&&m.status&&m.message){let _=function(E){let R=E.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(R)>=0?R:P.UNKNOWN}(m.status);a(new j(_,m.message))}else a(new j(P.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new j(P.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{U(Yt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);U(Yt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=jE(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OE(),a=PE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");U(Yt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=o.createWebChannel(d,c),p=!1,m=!1,_=new nI({Io:E=>{m?U(Yt,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(U(Yt,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),U(Yt,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),w=(E,R,O)=>{E.listen(R,F=>{try{O(F)}catch(z){setTimeout(()=>{throw z},0)}})};return w(h,Za.EventType.OPEN,()=>{m||(U(Yt,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),w(h,Za.EventType.CLOSE,()=>{m||(m=!0,U(Yt,`RPC '${e}' stream ${i} transport closed`),_.So())}),w(h,Za.EventType.ERROR,E=>{m||(m=!0,ur(Yt,`RPC '${e}' stream ${i} transport errored:`,E),_.So(new j(P.UNAVAILABLE,"The operation could not be completed")))}),w(h,Za.EventType.MESSAGE,E=>{var R;if(!m){let O=E.data[0];oe(!!O);let F=O,z=F.error||((R=F[0])===null||R===void 0?void 0:R.error);if(z){U(Yt,`RPC '${e}' stream ${i} received error:`,z);let X=z.status,Q=function(I){let T=Et[I];if(T!==void 0)return L1(T)}(X),D=z.message;Q===void 0&&(Q=P.INTERNAL,D="Unknown error status: "+X+" with message "+z.message),m=!0,_.So(new j(Q,D)),h.close()}else U(Yt,`RPC '${e}' stream ${i} received:`,O),_.bo(O)}}),w(a,NE.STAT_EVENT,E=>{E.stat===Vp.PROXY?U(Yt,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Vp.NOPROXY&&U(Yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}};function hP(){return typeof window<"u"?window:null}function Gp(){return typeof document<"u"?document:null}function od(n){return new v0(n,!0)}var Zl=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&U("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Cg=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return C(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return C(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return C(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(ht(t.toString()),ht("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new j(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>C(this,null,function*(){this.state=0,this.start()}))}I_(e){return U("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(U("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},iI=class extends Cg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=QG(this.serializer,e),r=function(s){if(!("targetChange"in s))return ce.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?pt(o.readTime):ce.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=E0(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=ng(c)?{documents:G1(s,c)}:{query:W1(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=U1(s,o.resumeToken);let l=w0(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ce.min())>0){a.readTime=yc(s,o.snapshotVersion.toTimestamp());let l=w0(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=ZG(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=E0(this.serializer),t.removeTarget=e,this.a_(t)}},sI=class extends Cg{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return oe(!!e.streamToken),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=YG(e.writeResults,e.commitTime),r=pt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=E0(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Wl(this.serializer,r))};this.a_(t)}};var oI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,_0(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(P.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,_0(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(P.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},aI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ht(t),this.D_=!1):U("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var cI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>C(this,null,function*(){Es(this)&&(U("RemoteStore","Restarting streams for network reachability change."),yield function(c){return C(this,null,function*(){let l=Z(c);l.L_.add(4),yield Mc(l),l.q_.set("Unknown"),l.L_.delete(4),yield ad(l)})}(this))}))}),this.q_=new aI(r,i)}};function ad(n){return C(this,null,function*(){if(Es(n))for(let e of n.B_)yield e(!0)})}function Mc(n){return C(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Gg(n,e){let t=Z(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),tb(t)?eb(t):kc(t).r_()&&XI(t,e))}function Ic(n,e){let t=Z(n),r=kc(t);t.N_.delete(e),r.r_()&&fP(t,e),t.N_.size===0&&(r.r_()?r.o_():Es(t)&&t.q_.set("Unknown"))}function XI(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}kc(n).A_(e)}function fP(n,e){n.Q_.xe(e),kc(n).R_(e)}function eb(n){n.Q_=new y0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),kc(n).start(),n.q_.v_()}function tb(n){return Es(n)&&!kc(n).n_()&&n.N_.size>0}function Es(n){return Z(n).L_.size===0}function pP(n){n.Q_=void 0}function h9(n){return C(this,null,function*(){n.q_.set("Online")})}function f9(n){return C(this,null,function*(){n.N_.forEach((e,t)=>{XI(n,e)})})}function p9(n,e){return C(this,null,function*(){pP(n),tb(n)?(n.q_.M_(e),eb(n)):n.q_.set("Unknown")})}function g9(n,e,t){return C(this,null,function*(){if(n.q_.set("Online"),e instanceof og&&e.state===2&&e.cause)try{yield function(i,s){return C(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){U("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tg(n,r)}else if(e instanceof lc?n.Q_.Ke(e):e instanceof sg?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ce.min()))try{let r=yield aP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(gt.EMPTY_BYTE_STRING,d.snapshotVersion)),fP(s,c);let h=new vc(d.target,c,l,d.sequenceNumber);XI(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){U("RemoteStore","Failed to raise snapshot:",r),yield Tg(n,r)}})}function Tg(n,e,t){return C(this,null,function*(){if(!_s(e))throw e;n.L_.add(1),yield Mc(n),n.q_.set("Offline"),t||(t=()=>aP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>C(this,null,function*(){U("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield ad(n)}))})}function gP(n,e){return e().catch(t=>Tg(n,t,e))}function Rc(n){return C(this,null,function*(){let e=Z(n),t=vs(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;m9(e);)try{let i=yield c9(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,y9(e,i)}catch(i){yield Tg(e,i)}mP(e)&&yP(e)})}function m9(n){return Es(n)&&n.O_.length<10}function y9(n,e){n.O_.push(e);let t=vs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function mP(n){return Es(n)&&!vs(n).n_()&&n.O_.length>0}function yP(n){vs(n).start()}function v9(n){return C(this,null,function*(){vs(n).p_()})}function w9(n){return C(this,null,function*(){let e=vs(n);for(let t of n.O_)e.m_(t.mutations)})}function _9(n,e,t){return C(this,null,function*(){let r=n.O_.shift(),i=p0.from(r,e,t);yield gP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Rc(n)})}function E9(n,e){return C(this,null,function*(){e&&vs(n).V_&&(yield function(r,i){return C(this,null,function*(){if(function(o){return V1(o)&&o!==P.ABORTED}(i.code)){let s=r.O_.shift();vs(r).s_(),yield gP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Rc(r)}})}(n,e)),mP(n)&&yP(n)})}function $N(n,e){return C(this,null,function*(){let t=Z(n);t.asyncQueue.verifyOperationInProgress(),U("RemoteStore","RemoteStore received new credentials");let r=Es(t);t.L_.add(3),yield Mc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield ad(t)})}function uI(n,e){return C(this,null,function*(){let t=Z(n);e?(t.L_.delete(2),yield ad(t)):e||(t.L_.add(2),yield Mc(t),t.q_.set("Unknown"))})}function kc(n){return n.K_||(n.K_=function(t,r,i){let s=Z(t);return s.w_(),new iI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:h9.bind(null,n),Ro:f9.bind(null,n),mo:p9.bind(null,n),d_:g9.bind(null,n)}),n.B_.push(e=>C(this,null,function*(){e?(n.K_.s_(),tb(n)?eb(n):n.q_.set("Unknown")):(yield n.K_.stop(),pP(n))}))),n.K_}function vs(n){return n.U_||(n.U_=function(t,r,i){let s=Z(t);return s.w_(),new sI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:v9.bind(null,n),mo:E9.bind(null,n),f_:w9.bind(null,n),g_:_9.bind(null,n)}),n.B_.push(e=>C(this,null,function*(){e?(n.U_.s_(),yield Rc(n)):(yield n.U_.stop(),n.O_.length>0&&(U("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var lI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new At,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Nc(n,e){if(ht("AsyncQueue",`${e}: ${n}`),_s(n))return new j(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Sg=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||J.comparator(t.key,r.key):(t,r)=>J.comparator(t.key,r.key),this.keyedMap=Al(),this.sortedSet=new Je(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ag=class{constructor(){this.W_=new Je(J.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},bc=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Sg.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&id(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var dI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},hI=class{constructor(){this.queries=zN(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Z(t),s=i.queries;i.queries=zN(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new j(P.ABORTED,"Firestore shutting down"))}};function zN(){return new Or(n=>b1(n),id)}function nb(n,e){return C(this,null,function*(){let t=Z(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new dI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=Nc(o,`Initialization of query '${rc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&ib(t)})}function rb(n,e){return C(this,null,function*(){let t=Z(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function I9(n,e){let t=Z(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ib(t)}function b9(n,e,t){let r=Z(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function ib(n){n.Y_.forEach(e=>{e.next()})}var fI,qN;(qN=fI||(fI={})).ea="default",qN.Cache="cache";var Jl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new bc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=bc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==fI.Cache}};var pI=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var xg=class{constructor(e){this.serializer=e}Es(e){return Rr(this.serializer,e)}ds(e){return e.metadata.exists?H1(this.serializer,e.document,!1):Dt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return pt(e)}},gI=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=xe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new xg(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||me()).add(s);t.set(o,a)}}return t}complete(){return C(this,null,function*(){let e=yield u9(this.localStore,new xg(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield l9(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function vP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Mg=class{constructor(e){this.key=e}},Rg=class{constructor(e){this.key=e}},kg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=C1(e),this.Ra=new Sg(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Ag,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let p=i.get(d),m=sd(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),E=!1;p&&m?p.data.isEqual(m.data)?_!==w&&(r.track({type:3,doc:m}),E=!0):this.ga(p,m)||(r.track({type:2,doc:m}),E=!0,(c&&this.Aa(m,c)>0||l&&this.Aa(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),E=!0):p&&!m&&(r.track({type:1,doc:p}),E=!0,(c||l)&&(a=!0)),E&&(m?(o=o.add(m),s=w?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,h)=>function(m,_){let w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return w(m)-w(_)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new bc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ag,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Rg(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Mg(r))}),t}ba(e){this.Ta=e.Ts,this.da=me();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return bc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},mI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},yI=class{constructor(e){this.key=e,this.va=!1}},vI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Or(a=>b1(a),id),this.Ma=new Map,this.xa=new Set,this.Oa=new Je(J.comparator),this.Na=new Map,this.La=new Ql,this.Ba={},this.ka=new Map,this.qa=wc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function D9(n,e,t=!0){return C(this,null,function*(){let r=Wg(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield wP(r,e,t,!0),i})}function C9(n,e){return C(this,null,function*(){let t=Wg(n);yield wP(t,e,!0,!1)})}function wP(n,e,t,r){return C(this,null,function*(){let i=yield _c(n.localStore,an(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield sb(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Gg(n.remoteStore,i),a})}function sb(n,e,t,r,i){return C(this,null,function*(){n.Ka=(h,p,m)=>function(w,E,R,O){return C(this,null,function*(){let F=E.view.ma(R);F.ns&&(F=yield _g(w.localStore,E.query,!1).then(({documents:D})=>E.view.ma(D,F)));let z=O&&O.targetChanges.get(E.targetId),X=O&&O.targetMismatches.get(E.targetId)!=null,Q=E.view.applyChanges(F,w.isPrimaryClient,z,X);return wI(w,E.targetId,Q.wa),Q.snapshot})}(n,h,p,m);let s=yield _g(n.localStore,e,!0),o=new kg(e,s.Ts),a=o.ma(s.documents),c=Hl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);wI(n,t,l.wa);let d=new mI(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function T9(n,e,t){return C(this,null,function*(){let r=Z(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!id(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ec(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Ic(r.remoteStore,i.targetId),Dc(r,i.targetId)}).catch(ws))):(Dc(r,i.targetId),yield Ec(r.localStore,i.targetId,!0))})}function S9(n,e){return C(this,null,function*(){let t=Z(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Ic(t.remoteStore,r.targetId))})}function A9(n,e,t){return C(this,null,function*(){let r=ub(n);try{let i=yield function(o,a){let c=Z(o),l=rt.now(),d=a.reduce((m,_)=>m.add(_.key),me()),h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Dn(),w=me();return c.cs.getEntries(m,d).next(E=>{_=E,_.forEach((R,O)=>{O.isValidDocument()||(w=w.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,_)).next(E=>{h=E;let R=[];for(let O of a){let F=$G(O,h.get(O.key).overlayedDocument);F!=null&&R.push(new dr(O.key,F,m1(F.value.mapValue),ut.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,R,a)}).next(E=>{p=E;let R=E.applyToLocalDocumentSet(h,w);return c.documentOverlayCache.saveOverlays(m,E.batchId,R)})}).then(()=>({batchId:p.batchId,changes:S1(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Je(ge)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield _i(r,i.changes),yield Rc(r.remoteStore)}catch(i){let s=Nc(i,"Failed to persist write");t.reject(s)}})}function _P(n,e){return C(this,null,function*(){let t=Z(n);try{let r=yield a9(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?oe(o.va):i.removedDocuments.size>0&&(oe(o.va),o.va=!1))}),yield _i(t,r,e)}catch(r){yield ws(r)}})}function HN(n,e,t){let r=Z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=Z(o);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let p of h.j_)p.Z_(a)&&(l=!0)}),l&&ib(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function x9(n,e,t){return C(this,null,function*(){let r=Z(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Je(J.comparator);o=o.insert(s,Dt.newNoDocument(s,ce.min()));let a=me().add(s),c=new ql(ce.min(),new Map,new Je(ge),o,a);yield _P(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),cb(r)}else yield Ec(r.localStore,e,!1).then(()=>Dc(r,e,t)).catch(ws)})}function M9(n,e){return C(this,null,function*(){let t=Z(n),r=e.batch.batchId;try{let i=yield o9(t.localStore,e);ab(t,r,null),ob(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _i(t,i)}catch(i){yield ws(i)}})}function R9(n,e,t){return C(this,null,function*(){let r=Z(n);try{let i=yield function(o,a){let c=Z(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(oe(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);ab(r,e,t),ob(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _i(r,i)}catch(i){yield ws(i)}})}function k9(n,e){return C(this,null,function*(){let t=Z(n);Es(t.remoteStore)||U("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=Z(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Nc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function ob(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function ab(n,e,t){let r=Z(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Dc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||EP(n,r)})}function EP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Ic(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),cb(n))}function wI(n,e,t){for(let r of t)r instanceof Mg?(n.La.addReference(r.key,e),N9(n,r)):r instanceof Rg?(U("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||EP(n,r.key)):ne()}function N9(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(U("SyncEngine","New document in limbo: "+t),n.xa.add(r),cb(n))}function cb(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new J(xe.fromString(e)),r=n.qa.next();n.Na.set(r,new yI(t)),n.Oa=n.Oa.insert(t,r),Gg(n.remoteStore,new vc(an(xc(t.path)),r,"TargetPurposeLimboResolution",Fn.oe))}}function _i(n,e,t){return C(this,null,function*(){let r=Z(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=Z0.Wi(c.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return C(this,null,function*(){let d=Z(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>k.forEach(l,p=>k.forEach(p.$i,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>k.forEach(p.Ui,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!_s(h))throw h;U("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let p=h.targetId;if(!h.fromCache){let m=d.os.get(p),_=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(_);d.os=d.os.insert(p,w)}}})}(r.localStore,s))})}function P9(n,e){return C(this,null,function*(){let t=Z(n);if(!t.currentUser.isEqual(e)){U("SyncEngine","User change. New user:",e.toKey());let r=yield oP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new j(P.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _i(t,r.hs)}})}function O9(n,e){let t=Z(n),r=t.Na.get(e);if(r&&r.va)return me().add(r.key);{let i=me(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function F9(n,e){return C(this,null,function*(){let t=Z(n),r=yield _g(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&wI(t,e.targetId,i.wa),i})}function V9(n,e){return C(this,null,function*(){let t=Z(n);return lP(t.localStore,e).then(r=>_i(t,r))})}function L9(n,e,t,r){return C(this,null,function*(){let i=Z(n),s=yield function(a,c){let l=Z(a),d=Z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,c).next(p=>p?l.localDocuments.getDocuments(h,p):k.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield Rc(i.remoteStore):t==="acknowledged"||t==="rejected"?(ab(i,e,r||null),ob(i,e),function(a,c){Z(Z(a).mutationQueue).On(c)}(i.localStore,e)):ne(),yield _i(i,s)):U("SyncEngine","Cannot apply mutation batch with id: "+e)})}function j9(n,e){return C(this,null,function*(){let t=Z(n);if(Wg(t),ub(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield GN(t,r.toArray());t.Qa=!0,yield uI(t.remoteStore,!0);for(let s of i)Gg(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Dc(t,o),Ec(t.localStore,o,!0))),Ic(t.remoteStore,o)}),yield i,yield GN(t,r),function(o){let a=Z(o);a.Na.forEach((c,l)=>{Ic(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Je(J.comparator)}(t),t.Qa=!1,yield uI(t.remoteStore,!1)}})}function GN(n,e,t){return C(this,null,function*(){let r=Z(n),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield _c(r.localStore,an(c[0]));for(let l of c){let d=r.Fa.get(l),h=yield F9(r,d);h.snapshot&&s.push(h.snapshot)}}else{let l=yield uP(r.localStore,o);a=yield _c(r.localStore,l),yield sb(r,IP(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function IP(n){return I1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function U9(n){return function(t){return Z(Z(t).persistence).Qi()}(Z(n).localStore)}function B9(n,e,t,r){return C(this,null,function*(){let i=Z(n);if(i.Qa)return void U("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield lP(i.localStore,D1(s[0])),a=ql.createSynthesizedRemoteEventForCurrentChange(e,t==="current",gt.EMPTY_BYTE_STRING);yield _i(i,o,a);break}case"rejected":yield Ec(i.localStore,e,!0),Dc(i,e,r);break;default:ne()}})}function $9(n,e,t){return C(this,null,function*(){let r=Wg(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){U("SyncEngine","Adding an already active target "+i);continue}let s=yield uP(r.localStore,i),o=yield _c(r.localStore,s);yield sb(r,IP(s),o.targetId,!1,o.resumeToken),Gg(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield Ec(r.localStore,i,!1).then(()=>{Ic(r.remoteStore,i),Dc(r,i)}).catch(ws))}})}function Wg(n){let e=Z(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_P.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=x9.bind(null,e),e.Ca.d_=I9.bind(null,e.eventManager),e.Ca.$a=b9.bind(null,e.eventManager),e}function ub(n){let e=Z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=M9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=R9.bind(null,e),e}function z9(n,e,t){let r=Z(n);(function(s,o,a){return C(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,_){let w=Z(m),E=pt(_.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",R=>w.Gr.getBundleMetadata(R,_.id)).then(R=>!!R&&R.createTime.compareTo(E)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(vP(c));let l=new gI(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let p=yield l.la(d);p&&a._updateProgress(p),d=yield o.Ua()}let h=yield l.complete();return yield _i(s,h.Ia,void 0),yield function(m,_){let w=Z(m);return w.persistence.runTransaction("Save bundle","readwrite",E=>w.Gr.saveBundleMetadata(E,_))}(s.localStore,c),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(c){return ur("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var _I=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return C(this,null,function*(){this.serializer=od(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return sP(this.persistence,new wg,t.initialUser,this.serializer)}Ga(t){return new yg(vg.Zr,this.serializer)}Wa(t){return new bg}terminate(){return C(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Ng=class n extends _I{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return C(this,null,function*(){yield Pm(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield ub(this.Ja.syncEngine),yield Rc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return sP(this.persistence,new wg,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new O0(r,e.asyncQueue,t)}Ha(e,t){let r=new JE(t,this.persistence);return new ZE(e.asyncQueue,r)}Ga(e){let t=JI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new Y0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,hP(),Gp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new bg}},EI=class n extends Ng{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return C(this,null,function*(){yield Pm(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Pl&&(this.sharedClientState.syncEngine={no:L9.bind(null,t),ro:B9.bind(null,t),io:$9.bind(null,t),Qi:U9.bind(null,t),eo:V9.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>C(this,null,function*(){yield j9(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=hP();if(!Pl.D(t))throw new j(P.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=JI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Pl(t,e.asyncQueue,r,e.clientId,e.initialUser)}},lb=(()=>{class n{initialize(t,r){return C(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>HN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=P9.bind(null,this.syncEngine),yield uI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new hI}()}createDatastore(t){let r=od(t.databaseInfo.databaseId),i=function(o){return new rI(o)}(t.databaseInfo);return function(o,a,c,l){return new oI(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new cI(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>HN(this.syncEngine,r,0),function(){return Dg.D()?new Dg:new tI}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,h){let p=new vI(s,o,a,c,l,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return C(this,null,function*(){var t,r;yield function(s){return C(this,null,function*(){let o=Z(s);U("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Mc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function WN(n,e=10240){let t=0;return{read(){return C(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return C(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Cc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ht("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var II=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new At,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return C(this,null,function*(){return this.metadata.promise})}Ua(){return C(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return C(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new pI(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return C(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return C(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return C(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var bI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return C(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new j(P.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return C(this,null,function*(){let o=Z(i),a={documents:s.map(h=>Gl(o.serializer,h))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,xe.emptyPath(),a,s.length),l=new Map;c.forEach(h=>{let p=KG(o.serializer,h);l.set(p.key.toString(),p)});let d=[];return s.forEach(h=>{let p=l.get(h.toString());oe(!!p),d.push(p)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ys(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return C(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=J.fromPath(r);this.mutations.push(new Bl(i,this.precondition(i)))}),yield function(r,i){return C(this,null,function*(){let s=Z(r),o={writes:i.map(a=>Wl(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,xe.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ne();t=ce.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new j(P.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ce.min())?ut.exists(!1):ut.updateTime(t):ut.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ce.min()))throw new j(P.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var DI=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Zl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>C(this,null,function*(){let e=new bI(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!nd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!V1(t)}return!1}};var CI=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=bt.UNAUTHENTICATED,this.clientId=Kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>C(this,null,function*(){U("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(U("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new At;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Nc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function UE(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),U("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>C(this,null,function*(){r.isEqual(i)||(yield oP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function KN(n,e){return C(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield db(n);U("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$N(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>$N(e.remoteStore,i)),n._onlineComponents=e})}function db(n){return C(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U("FirestoreClient","Using user provided OfflineComponentProvider");try{yield UE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ur("Error using user provided cache. Falling back to memory cache: "+t),yield UE(n,new _I)}}else U("FirestoreClient","Using default OfflineComponentProvider"),yield UE(n,new _I);return n._offlineComponents})}function Kg(n){return C(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(U("FirestoreClient","Using user provided OnlineComponentProvider"),yield KN(n,n._uninitializedComponentsProvider._online)):(U("FirestoreClient","Using default OnlineComponentProvider"),yield KN(n,new lb))),n._onlineComponents})}function bP(n){return db(n).then(e=>e.persistence)}function hb(n){return db(n).then(e=>e.localStore)}function DP(n){return Kg(n).then(e=>e.remoteStore)}function fb(n){return Kg(n).then(e=>e.syncEngine)}function q9(n){return Kg(n).then(e=>e.datastore)}function Tc(n){return C(this,null,function*(){let e=yield Kg(n),t=e.eventManager;return t.onListen=D9.bind(null,e.syncEngine),t.onUnlisten=T9.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=C9.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=S9.bind(null,e.syncEngine),t})}function H9(n){return n.asyncQueue.enqueue(()=>C(this,null,function*(){let e=yield bP(n),t=yield DP(n);return e.setNetworkEnabled(!0),function(i){let s=Z(i);return s.L_.delete(0),ad(s)}(t)}))}function G9(n){return n.asyncQueue.enqueue(()=>C(this,null,function*(){let e=yield bP(n),t=yield DP(n);return e.setNetworkEnabled(!1),function(i){return C(this,null,function*(){let s=Z(i);s.L_.add(0),yield Mc(s),s.q_.set("Offline")})}(t)}))}function W9(n,e){let t=new At;return n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(i,s,o){return C(this,null,function*(){try{let a=yield function(l,d){let h=Z(l);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new j(P.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Nc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield hb(n),e,t)})),t.promise}function CP(n,e,t={}){let r=new At;return n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(s,o,a,c,l){let d=new Cc({next:p=>{d.Za(),o.enqueueAndForget(()=>rb(s,h));let m=p.docs.has(a);!m&&p.fromCache?l.reject(new j(P.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new j(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new Jl(xc(a.path),d,{includeMetadataChanges:!0,_a:!0});return nb(s,h)}(yield Tc(n),n.asyncQueue,e,t,r)})),r.promise}function K9(n,e){let t=new At;return n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(i,s,o){return C(this,null,function*(){try{let a=yield _g(i,s,!0),c=new kg(s,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=Nc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield hb(n),e,t)})),t.promise}function TP(n,e,t={}){let r=new At;return n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(s,o,a,c,l){let d=new Cc({next:p=>{d.Za(),o.enqueueAndForget(()=>rb(s,h)),p.fromCache&&c.source==="server"?l.reject(new j(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new Jl(a,d,{includeMetadataChanges:!0,_a:!0});return nb(s,h)}(yield Tc(n),n.asyncQueue,e,t,r)})),r.promise}function Q9(n,e){let t=new Cc(e);return n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(i,s){Z(i).Y_.add(s),s.next()}(yield Tc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return function(i,s){Z(i).Y_.delete(s)}(yield Tc(n),t)}))}}function Y9(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?j1().encode(o):o,function(d,h){return new II(d,h)}(function(d,h){if(d instanceof Uint8Array)return WN(d,h);if(d instanceof ArrayBuffer)return WN(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,od(e));n.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){z9(yield fb(n),i,r)}))}function Z9(n,e){return n.asyncQueue.enqueue(()=>C(this,null,function*(){return function(r,i){let s=Z(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield hb(n),e)}))}function SP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var QN=new Map;function pb(n,e,t){if(!t)throw new j(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gb(n,e,t,r){if(e===!0&&r===!0)throw new j(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function YN(n){if(!J.isDocumentKey(n))throw new j(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function ZN(n){if(J.isDocumentKey(n))throw new j(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Qg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne()}function Re(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new j(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Qg(n);throw new j(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AP(n,e){if(e<=0)throw new j(P.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Pg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BE;switch(r.type){case"firstParty":return new HE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return C(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=QN.get(t);r&&(U("ComponentProvider","Removing Datastore"),QN.delete(t),r.terminate())}(this),Promise.resolve()}};function xP(n,e,t,r={}){var i;let s=(n=Re(n,vo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ur("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=bt.MOCK_USER;else{a=rC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new bt(l)}n._authCredentials=new $E(new Wp(a,c))}}var Lt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Qe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},kr=class n extends Lt{constructor(e,t,r){super(e,t,xc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new J(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function mb(n,e,...t){if(n=et(n),pb("collection","path",e),n instanceof vo){let r=xe.fromString(e,...t);return ZN(r),new kr(n,null,r)}{if(!(n instanceof Qe||n instanceof kr))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return ZN(r),new kr(n.firestore,null,r)}}function MP(n,e){if(n=Re(n,vo),pb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(P.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Lt(n,null,function(r){return new lr(xe.emptyPath(),r)}(e))}function cd(n,e,...t){if(n=et(n),arguments.length===1&&(e=Kp.newId()),pb("doc","path",e),n instanceof vo){let r=xe.fromString(e,...t);return YN(r),new Qe(n,null,new J(r))}{if(!(n instanceof Qe||n instanceof kr))throw new j(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(xe.fromString(e,...t));return YN(r),new Qe(n.firestore,n instanceof kr?n.converter:null,new J(r))}}function yb(n,e){return n=et(n),e=et(e),(n instanceof Qe||n instanceof kr)&&(e instanceof Qe||e instanceof kr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function vb(n,e){return n=et(n),e=et(e),n instanceof Lt&&e instanceof Lt&&n.firestore===e.firestore&&id(n._query,e._query)&&n.converter===e.converter}var Og=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zl(this,"async_queue_retry"),this.Vu=()=>{let r=Gp();r&&U("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Gp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Gp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new At;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return C(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!_s(e))throw e;U("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ht("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=lI.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}wu(){return C(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function TI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var SI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new At,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var RP=-1,it=class extends vo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Og,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return C(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Og(e),this._firestoreClient=void 0,yield e}})}};function jt(n){if(n._terminated)throw new j(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||kP(n),n._firestoreClient}function kP(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new XE(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,SP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new CI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function NP(n,e){ur("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return OP(n,lb.provider,{build:r=>new Ng(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function PP(n){return C(this,null,function*(){ur("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();OP(n,lb.provider,{build:t=>new EI(t,e.cacheSizeBytes)})})}function OP(n,e,t){if((n=Re(n,it))._firestoreClient||n._terminated)throw new j(P.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new j(P.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},kP(n)}function FP(n){if(n._initialized&&!n._terminated)throw new j(P.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new At;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>C(this,null,function*(){try{yield function(r){return C(this,null,function*(){if(!ls.D())return Promise.resolve();let i=r+"main";yield ls.delete(i)})}(JI(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function VP(n){return function(t){let r=new At;return t.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return k9(yield fb(t),r)})),r.promise}(jt(n=Re(n,it)))}function LP(n){return H9(jt(n=Re(n,it)))}function jP(n){return G9(jt(n=Re(n,it)))}function UP(n,e){let t=jt(n=Re(n,it)),r=new SI;return Y9(t,n._databaseId,e,r),r}function BP(n,e){return Z9(jt(n=Re(n,it)),e).then(t=>t?new Lt(n,null,t.query):null)}var Fr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(gt.fromBase64String(e))}catch(t){throw new j(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var hr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new j(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vi=class{constructor(e){this._methodName=e}};var wo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new j(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new j(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var Xl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var J9=/^__.*__$/,AI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new dr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ms(e,this.data,t,this.fieldTransforms)}},Fg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new dr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function $P(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var Vg=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Lg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($P(this.Cu)&&J9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},xI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||od(e)}Qu(e,t,r,i=!1){return new Vg({Cu:e,methodName:t,qu:r,path:ft.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function bo(n){let e=n._freezeSettings(),t=od(n._databaseId);return new xI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Yg(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Eb("Data must be an object, but it was:",o,r);let a=HP(r,o),c,l;if(s.merge)c=new Vn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let p=PI(e,h,t);if(!o.contains(p))throw new j(P.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);WP(d,p)||d.push(p)}c=new Vn(d),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new AI(new Zt(a),c,l)}var ed=class n extends vi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function zP(n,e,t){return new Vg({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var MI=class n extends vi{_toFieldTransform(e){return new go(e.path,new ps)}isEqual(e){return e instanceof n}},RI=class n extends vi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=zP(this,e,!0),r=this.Ku.map(s=>Do(s,t)),i=new mi(r);return new go(e.path,i)}isEqual(e){return e instanceof n&&Vm(this.Ku,e.Ku)}},kI=class n extends vi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=zP(this,e,!0),r=this.Ku.map(s=>Do(s,t)),i=new yi(r);return new go(e.path,i)}isEqual(e){return e instanceof n&&Vm(this.Ku,e.Ku)}},NI=class n extends vi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new gs(e.serializer,M1(e.serializer,this.$u));return new go(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function wb(n,e,t,r){let i=n.Qu(1,e,t);Eb("Data must be an object, but it was:",i,r);let s=[],o=Zt.empty();Io(r,(c,l)=>{let d=Ib(e,c,t);l=et(l);let h=i.Nu(d);if(l instanceof ed)s.push(d);else{let p=Do(l,h);p!=null&&(s.push(d),o.set(d,p))}});let a=new Vn(s);return new Fg(o,a,i.fieldTransforms)}function _b(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[PI(e,r,t)],c=[i];if(s.length%2!=0)throw new j(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(PI(e,s[p])),c.push(s[p+1]);let l=[],d=Zt.empty();for(let p=a.length-1;p>=0;--p)if(!WP(l,a[p])){let m=a[p],_=c[p];_=et(_);let w=o.Nu(m);if(_ instanceof ed)l.push(m);else{let E=Do(_,w);E!=null&&(l.push(m),d.set(m,E))}}let h=new Vn(l);return new Fg(d,h,o.fieldTransforms)}function qP(n,e,t,r=!1){return Do(t,n.Qu(r?4:3,e))}function Do(n,e){if(GP(n=et(n)))return Eb("Unsupported field value:",e,n),HP(n,e);if(n instanceof vi)return function(r,i){if(!$P(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=Do(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=et(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=rt.fromDate(r);return{timestampValue:yc(i.serializer,s)}}if(r instanceof rt){let s=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yc(i.serializer,s)}}if(r instanceof wo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fr)return{bytesValue:U1(i.serializer,r._byteString)};if(r instanceof Qe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:QI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return KI(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Qg(r)}`)}(n,e)}function HP(n,e){let t={};return h1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Io(n,(r,i)=>{let s=Do(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function GP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof wo||n instanceof Fr||n instanceof Qe||n instanceof vi||n instanceof Xl)}function Eb(n,e,t){if(!GP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Qg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function PI(n,e,t){if((e=et(e))instanceof hr)return e._internalPath;if(typeof e=="string")return Ib(n,e);throw Lg("Field path arguments must be of type string or ",n,!1,void 0,t)}var X9=new RegExp("[~\\*/\\[\\]]");function Ib(n,e,t){if(e.search(X9)>=0)throw Lg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hr(...e.split("."))._internalPath}catch{throw Lg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lg(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new j(P.INVALID_ARGUMENT,a+n+c)}function WP(n,e){return n.some(t=>t.isEqual(e))}var _o=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new OI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Zg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},OI=class extends _o{data(){return super.data()}};function Zg(n,e){return typeof e=="string"?Ib(n,e):e instanceof hr?e._internalPath:e._delegate._internalPath}function KP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new j(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var td=class{},Eo=class extends td{};function Ei(n,e,...t){let r=[];e instanceof td&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof FI).length,a=s.filter(c=>c instanceof jg).length;if(o>1||o>0&&a>0)throw new j(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var jg=class n extends Eo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return iO(e._query,t),new Lt(e.firestore,e.converter,h0(e._query,t))}_parse(e){let t=bo(e.firestore);return function(s,o,a,c,l,d,h){let p;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){XN(h,d);let m=[];for(let _ of h)m.push(JN(c,s,_));p={arrayValue:{values:m}}}else p=JN(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||XN(h,d),p=qP(a,o,h,d==="in"||d==="not-in");return Ce.create(l,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function QP(n,e,t){let r=e,i=Zg("where",n);return jg._create(i,r,t)}var FI=class n extends td{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:$e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)iO(o,c),o=h0(o,c)}(e._query,t),new Lt(e.firestore,e.converter,h0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var VI=class n extends Eo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new j(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new j(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fo(s,o)}(e._query,this._field,this._direction);return new Lt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new lr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function YP(n,e="asc"){let t=e,r=Zg("orderBy",n);return VI._create(r,t)}var Ug=class n extends Eo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Lt(e.firestore,e.converter,ig(e._query,this._limit,this._limitType))}};function ZP(n){return AP("limit",n),Ug._create("limit",n,"F")}function JP(n){return AP("limitToLast",n),Ug._create("limitToLast",n,"L")}var Bg=class n extends Eo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=rO(e,this.type,this._docOrFields,this._inclusive);return new Lt(e.firestore,e.converter,function(i,s){return new lr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function XP(...n){return Bg._create("startAt",n,!0)}function eO(...n){return Bg._create("startAfter",n,!1)}var $g=class n extends Eo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=rO(e,this.type,this._docOrFields,this._inclusive);return new Lt(e.firestore,e.converter,function(i,s){return new lr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function tO(...n){return $g._create("endBefore",n,!1)}function nO(...n){return $g._create("endAt",n,!0)}function rO(n,e,t,r){if(t[0]=et(t[0]),t[0]instanceof _o)return function(s,o,a,c,l){if(!c)throw new j(P.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of uc(s))if(h.field.isKeyField())d.push(ho(o,c.key));else{let p=c.data.field(h.field);if(qg(p))throw new j(P.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let m=h.field.canonicalString();throw new j(P.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Pr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=bo(n.firestore);return function(o,a,c,l,d,h){let p=o.explicitOrderBy;if(d.length>p.length)throw new j(P.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let _=0;_<d.length;_++){let w=d[_];if(p[_].field.isKeyField()){if(typeof w!="string")throw new j(P.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof w}`);if(!GI(o)&&w.indexOf("/")!==-1)throw new j(P.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${w}' contains a slash.`);let E=o.path.child(xe.fromString(w));if(!J.isDocumentKey(E))throw new j(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);let R=new J(E);m.push(ho(a,R))}else{let E=qP(c,l,w);m.push(E)}}return new Pr(m,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function JN(n,e,t){if(typeof(t=et(t))=="string"){if(t==="")throw new j(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!GI(e)&&t.indexOf("/")!==-1)throw new j(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(xe.fromString(t));if(!J.isDocumentKey(r))throw new j(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ho(n,new J(r))}if(t instanceof Qe)return ho(n,t._key);throw new j(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qg(t)}.`)}function XN(n,e){if(!Array.isArray(n)||n.length===0)throw new j(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function iO(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new j(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var Sc=class{convertValue(e,t="none"){switch(lo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Io(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Xe(o.doubleValue));return new Xl(s)}convertGeoPoint(e){return new wo(Xe(e.latitude),Xe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=qI(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){let t=gi(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=xe.fromString(e);oe(Z1(r));let i=new hs(r.get(1),r.get(3)),s=new J(r.popFirst(5));return i.isEqual(t)||ht(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Jg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var LI=class extends Sc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,t)}};var pi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Wn=class extends _o{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new cs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Zg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},cs=class extends Wn{data(e={}){return super.data(e)}},fr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new cs(this._firestore,this._userDataWriter,r.key,r,new pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new j(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new cs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new cs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:e5(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function e5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}function bb(n,e){return n instanceof Wn&&e instanceof Wn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fr&&e instanceof fr&&n._firestore===e._firestore&&vb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function sO(n){n=Re(n,Qe);let e=Re(n.firestore,it);return CP(jt(e),n._key).then(t=>Sb(e,n,t))}var wi=class extends Sc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,t)}};function oO(n){n=Re(n,Qe);let e=Re(n.firestore,it),t=jt(e),r=new wi(e);return W9(t,n._key).then(i=>new Wn(e,r,n._key,i,new pi(i!==null&&i.hasLocalMutations,!0),n.converter))}function aO(n){n=Re(n,Qe);let e=Re(n.firestore,it);return CP(jt(e),n._key,{source:"server"}).then(t=>Sb(e,n,t))}function cO(n){n=Re(n,Lt);let e=Re(n.firestore,it),t=jt(e),r=new wi(e);return KP(n._query),TP(t,n._query).then(i=>new fr(e,r,n,i))}function uO(n){n=Re(n,Lt);let e=Re(n.firestore,it),t=jt(e),r=new wi(e);return K9(t,n._query).then(i=>new fr(e,r,n,i))}function lO(n){n=Re(n,Lt);let e=Re(n.firestore,it),t=jt(e),r=new wi(e);return TP(t,n._query,{source:"server"}).then(i=>new fr(e,r,n,i))}function Db(n,e,t){n=Re(n,Qe);let r=Re(n.firestore,it),i=Jg(n.converter,e,t);return Pc(r,[Yg(bo(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,ut.none())])}function Cb(n,e,t,...r){n=Re(n,Qe);let i=Re(n.firestore,it),s=bo(i),o;return o=typeof(e=et(e))=="string"||e instanceof hr?_b(s,"updateDoc",n._key,e,t,r):wb(s,"updateDoc",n._key,e),Pc(i,[o.toMutation(n._key,ut.exists(!0))])}function dO(n){return Pc(Re(n.firestore,it),[new ys(n._key,ut.none())])}function hO(n,e){let t=Re(n.firestore,it),r=cd(n),i=Jg(n.converter,e);return Pc(t,[Yg(bo(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,ut.exists(!1))]).then(()=>r)}function Tb(n,...e){var t,r,i;n=et(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||TI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(TI(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,d;if(n instanceof Qe)l=Re(n.firestore,it),d=xc(n._key.path),c={next:h=>{e[o]&&e[o](Sb(l,n,h))},error:e[o+1],complete:e[o+2]};else{let h=Re(n,Lt);l=Re(h.firestore,it),d=h._query;let p=new wi(l);c={next:m=>{e[o]&&e[o](new fr(l,p,h,m))},error:e[o+1],complete:e[o+2]},KP(n._query)}return function(p,m,_,w){let E=new Cc(w),R=new Jl(m,E,_);return p.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return nb(yield Tc(p),R)})),()=>{E.Za(),p.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return rb(yield Tc(p),R)}))}}(jt(l),d,a,c)}function fO(n,e){return Q9(jt(n=Re(n,it)),TI(e)?e:{next:e})}function Pc(n,e){return function(r,i){let s=new At;return r.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){return A9(yield fb(r),i,s)})),s.promise}(jt(n),e)}function Sb(n,e,t){let r=t.docs.get(e._key),i=new wi(n);return new Wn(n,i,e._key,r,new pi(t.hasPendingWrites,t.fromCache),e.converter)}var t5={maxAttempts:5};var zg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bo(e)}set(e,t,r){this._verifyNotCommitted();let i=os(e,this._firestore),s=Jg(i.converter,t,r),o=Yg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ut.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=os(e,this._firestore),o;return o=typeof(t=et(t))=="string"||t instanceof hr?_b(this._dataReader,"WriteBatch.update",s._key,t,r,i):wb(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,ut.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=os(e,this._firestore);return this._mutations=this._mutations.concat(new ys(t._key,ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(P.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function os(n,e){if((n=et(n)).firestore!==e)throw new j(P.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var jI=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=bo(t)}get(t){let r=os(t,this._firestore),i=new LI(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return ne();let o=s[0];if(o.isFoundDocument())return new _o(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new _o(this._firestore,i,r._key,null,r.converter);throw ne()})}set(t,r,i){let s=os(t,this._firestore),o=Jg(s.converter,r,i),a=Yg(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=os(t,this._firestore),a;return a=typeof(r=et(r))=="string"||r instanceof hr?_b(this._dataReader,"Transaction.update",o._key,r,i,s):wb(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=os(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=os(e,this._firestore),r=new wi(this._firestore);return super.get(e).then(i=>new Wn(this._firestore,r,t._key,i._document,new pi(!1,!1),t.converter))}};function pO(n,e,t){n=Re(n,it);let r=Object.assign(Object.assign({},t5),t);return function(s){if(s.maxAttempts<1)throw new j(P.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new At;return s.asyncQueue.enqueueAndForget(()=>C(this,null,function*(){let l=yield q9(s);new DI(s.asyncQueue,l,a,o,c).au()})),c.promise}(jt(n),i=>e(new jI(n,i)),r)}function gO(){return new ed("deleteField")}function mO(){return new MI("serverTimestamp")}function yO(...n){return new RI("arrayUnion",n)}function vO(...n){return new kI("arrayRemove",n)}function Xg(n){return new NI("increment",n)}(function(e,t=!0){(function(i){Ac=i})(oC),iu(new Ss("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new it(new zE(r.getProvider("auth-internal")),new WE(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hs(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ti(Zk,"4.7.3",e),Ti(Zk,"4.7.3","esm2017")})();var n5=new Map,r5={activated:!1,tokenObservers:[]},i5={initialized:!1,enabled:!1};function pr(n){return n5.get(n)||Object.assign({},r5)}function bO(){return i5}var s5="https://content-firebaseappcheck.googleapis.com/v1";var o5="exchangeDebugToken",wO={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Ere=24*60*60*1e3;var xb=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return C(this,null,function*(){this.stop();try{this.pending=new Om,this.pending.promise.catch(t=>{}),yield a5(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Om,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function a5(n){return new Promise(e=>{setTimeout(e,n)})}var c5={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Is=new sC("appCheck","AppCheck",c5);function DO(n){if(!pr(n).activated)throw Is.create("use-before-activation",{appName:n.name})}function CO(r,i){return C(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw Is.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Is.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw Is.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Is.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(d[1])*1e3,p=Date.now();return{token:l.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}})}function TO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${s5}/projects/${t}/apps/${r}:${o5}?key=${i}`,body:{debug_token:e}}}var u5="firebase-app-check-database",l5=1,Mb="firebase-app-check-store";var em=null;function d5(){return em||(em=new Promise((n,e)=>{try{let t=indexedDB.open(u5,l5);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Is.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Mb,{keyPath:"compositeKey"})}}}catch(t){e(Is.create("storage-open",{originalErrorMessage:t?.message}))}}),em)}function h5(n,e){return f5(p5(n),e)}function f5(n,e){return C(this,null,function*(){let r=(yield d5()).transaction(Mb,"readwrite"),s=r.objectStore(Mb).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Is.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function p5(n){return`${n.options.appId}-${n.name}`}var Rb=new kd("@firebase/app-check");function Ab(n,e){return Rd()?h5(n,e).catch(t=>{Rb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function SO(){return bO().enabled}function AO(){return C(this,null,function*(){let n=bO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var g5={error:"UNKNOWN_ERROR"};function m5(n){return nC.encodeString(JSON.stringify(n),!1)}function kb(n,e=!1){return C(this,null,function*(){let t=n.app;DO(t);let r=pr(t),i=r.token,s;if(i&&!ud(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(ud(c)?i=c:yield Ab(t,void 0))}if(!e&&i&&ud(i))return{token:i.token};let o=!1;if(SO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=CO(TO(t,yield AO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield Ab(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield pr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Rb.warn(c.message):Rb.error(c),s=c}let a;return i?s?ud(i)?a={token:i.token,internalError:s}:a=EO(s):(a={token:i.token},r.token=i,yield Ab(t,i)):a=EO(s),o&&_5(t,a),a})}function y5(n){return C(this,null,function*(){let e=n.app;DO(e);let{provider:t}=pr(e);if(SO()){let r=yield AO(),{token:i}=yield CO(TO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function v5(n,e,t,r){let{app:i}=n,s=pr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ud(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),_O(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>_O(n))}function xO(n,e){let t=pr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function _O(n){let{app:e}=n,t=pr(e),r=t.tokenRefresher;r||(r=w5(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function w5(n){let{app:e}=n;return new xb(()=>C(this,null,function*(){let t=pr(e),r;if(t.token?r=yield kb(n,!0):r=yield kb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},wO.RETRIAL_MIN_WAIT,wO.RETRIAL_MAX_WAIT)}function _5(n,e){let t=pr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function ud(n){return n.expireTimeMillis-Date.now()>0}function EO(n){return{token:m5(g5),error:n}}var Nb=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=pr(this.app);for(let t of e)xO(this.app,t.next);return Promise.resolve()}};function E5(n,e){return new Nb(n,e)}function I5(n){return{getToken:e=>kb(n,e),getLimitedUseToken:()=>y5(n),addTokenListener:e=>v5(n,"INTERNAL",e),removeTokenListener:e=>xO(n.app,e)}}var b5="@firebase/app-check",D5="0.8.8";var C5="app-check",IO="app-check-internal";function T5(){iu(new Ss(C5,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return E5(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(IO).initialize()})),iu(new Ss(IO,n=>{let e=n.getProvider("app-check").getImmediate();return I5(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ti(b5,D5)}T5();var S5=["localhost","0.0.0.0","127.0.0.1"],Nre=typeof window<"u"&&S5.includes(window.location.hostname);var Pb=new K("angularfire2.auth.use-emulator"),Ob=new K("angularfire2.auth.settings"),Fb=new K("angularfire2.auth.tenant-id"),Vb=new K("angularfire2.auth.langugage-code"),Lb=new K("angularfire2.auth.use-device-language"),jb=new K("angularfire.auth.persistence"),Ub=(n,e,t,r,i,s,o,a)=>Ya(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]),RO=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,d,h,p,m){let _=new Oe,w=se(void 0).pipe(dn(o.outsideAngular),Ne(()=>s.runOutsideAngular(()=>import("./chunk-ILDA44P3.js"))),re(()=>Qa(t,s,r)),re(E=>Ub(E,s,a,l,d,h,c,p)),Kr({bufferSize:1,refCount:!1}));if(Wi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=se(null);else{w.pipe(Tn()).subscribe();let E=w.pipe(Ne(F=>F.getRedirectResult().then(z=>z,()=>null)),Kt,Kr({bufferSize:1,refCount:!1})),R=w.pipe(Ne(F=>new he(z=>({unsubscribe:s.runOutsideAngular(()=>F.onAuthStateChanged(X=>z.next(X),X=>z.error(X),()=>z.complete()))})))),O=w.pipe(Ne(F=>new he(z=>({unsubscribe:s.runOutsideAngular(()=>F.onIdTokenChanged(X=>z.next(X),X=>z.error(X),()=>z.complete()))}))));this.authState=E.pipe(lh(R),Zn(o.outsideAngular),dn(o.insideAngular)),this.user=E.pipe(lh(O),Zn(o.outsideAngular),dn(o.insideAngular)),this.idToken=this.user.pipe(Ne(F=>F?Te(F.getIdToken()):se(null))),this.idTokenResult=this.user.pipe(Ne(F=>F?Te(F.getIdTokenResult()):se(null))),this.credential=du(E,_,this.authState.pipe(lt(F=>!F))).pipe(re(F=>F?.user?F:null),Zn(o.outsideAngular),dn(o.insideAngular))}return Rp(this,w,s,{spy:{apply:(E,R,O)=>{(E.startsWith("signIn")||E.startsWith("createUser"))&&O.then(F=>_.next(F))}}})}static \u0275fac=function(r){return new(r||n)(V(es),V(Ka,8),V(Tt),V(_e),V(Wa),V(Pb,8),V(Ob,8),V(Fb,8),V(Vb,8),V(Lb,8),V(jb,8),V(to,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var x5="@firebase/firestore-compat",M5="0.3.38";function Gb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kO(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function NO(){if(!f1())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}var tm=class n{constructor(e){this._delegate=e}static fromBase64String(e){return NO(),new n(Fr.fromBase64String(e))}static fromUint8Array(e){return kO(),new n(Fr.fromUint8Array(e))}toBase64(){return NO(),this._delegate.toBase64()}toUint8Array(){return kO(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Bb(n){return R5(n,["next","error","complete"])}function R5(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var $b=class{enableIndexedDbPersistence(e,t){return NP(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return PP(e._delegate)}clearIndexedDbPersistence(e){return FP(e._delegate)}},nm=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof hs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ur("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){xP(this._delegate,e,t,r)}enableNetwork(){return LP(this._delegate)}disableNetwork(){return jP(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return VP(this._delegate)}onSnapshotsInSync(e){return fO(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vc(this,mb(this._delegate,e))}catch(t){throw cn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Vr(this,cd(this._delegate,e))}catch(t){throw cn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ao(this,MP(this._delegate,e))}catch(t){throw cn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return pO(this._delegate,t=>e(new rm(this,t)))}batch(){return jt(this._delegate),new im(new zg(this._delegate,e=>Pc(this._delegate,e)))}loadBundle(e){return UP(this._delegate,e)}namedQuery(e){return BP(this._delegate,e).then(t=>t?new Ao(this,t):null)}},Oc=class extends Sc{constructor(e){super(),this.firestore=e}convertBytes(e){return new tm(new Fr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Vr.forKey(t,this.firestore,null)}};function k5(n){e1(n)}var rm=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Oc(e)}get(e){let t=Co(e);return this._delegate.get(t).then(r=>new To(this._firestore,new Wn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Co(e);return r?(Gb("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=Co(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=Co(e);return this._delegate.delete(t),this}},im=class{constructor(e){this._delegate=e}set(e,t,r){let i=Co(e);return r?(Gb("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=Co(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=Co(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Fc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new cs(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new So(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new Oc(e),t),i.set(t,s)),s}};Fc.INSTANCES=new WeakMap;var Vr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Oc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Qe(t._delegate,r,new J(e)))}static forKey(e,t,r){return new n(t,new Qe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vc(this.firestore,mb(this._delegate,e))}catch(t){throw cn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=et(e),e instanceof Qe?yb(this._delegate,e):!1}set(e,t){t=Gb("DocumentReference.set",t);try{return t?Db(this._delegate,e,t):Db(this._delegate,e)}catch(r){throw cn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Cb(this._delegate,e):Cb(this._delegate,e,t,...r)}catch(i){throw cn(i,"updateDoc()","DocumentReference.update()")}}delete(){return dO(this._delegate)}onSnapshot(...e){let t=PO(e),r=OO(e,i=>new To(this.firestore,new Wn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Tb(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=oO(this._delegate):e?.source==="server"?t=aO(this._delegate):t=sO(this._delegate),t.then(r=>new To(this.firestore,new Wn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function cn(n,e,t){return n.message=n.message.replace(e,t),n}function PO(n){for(let e of n)if(typeof e=="object"&&!Bb(e))return e;return{}}function OO(n,e){var t,r;let i;return Bb(n[0])?i=n[0]:Bb(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var To=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Vr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return bb(this._delegate,e._delegate)}},So=class extends To{data(e){let t=this._delegate.data(e);return this._delegate._converter||t1(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Ao=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Oc(e)}where(e,t,r){try{return new n(this.firestore,Ei(this._delegate,QP(e,t,r)))}catch(i){throw cn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Ei(this._delegate,YP(e,t)))}catch(r){throw cn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Ei(this._delegate,ZP(e)))}catch(t){throw cn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Ei(this._delegate,JP(e)))}catch(t){throw cn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Ei(this._delegate,XP(...e)))}catch(t){throw cn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Ei(this._delegate,eO(...e)))}catch(t){throw cn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Ei(this._delegate,tO(...e)))}catch(t){throw cn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Ei(this._delegate,nO(...e)))}catch(t){throw cn(t,"endAt()","Query.endAt()")}}isEqual(e){return vb(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=uO(this._delegate):e?.source==="server"?t=lO(this._delegate):t=cO(this._delegate),t.then(r=>new ld(this.firestore,new fr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=PO(e),r=OO(e,i=>new ld(this.firestore,new fr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Tb(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},zb=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new So(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},ld=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ao(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new So(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new zb(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new So(this._firestore,r))})}isEqual(e){return bb(this._delegate,e._delegate)}},Vc=class n extends Ao{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Vr(this.firestore,e):null}doc(e){try{return e===void 0?new Vr(this.firestore,cd(this._delegate)):new Vr(this.firestore,cd(this._delegate,e))}catch(t){throw cn(t,"doc()","CollectionReference.doc()")}}add(e){return hO(this._delegate,e).then(t=>new Vr(this.firestore,t))}isEqual(e){return yb(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Fc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Co(n){return Re(n,Qe)}var qb=class n{constructor(...e){this._delegate=new hr(...e)}static documentId(){return new n(ft.keyField().canonicalString())}isEqual(e){return e=et(e),e instanceof hr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Hb=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=mO();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=gO();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=yO(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=vO(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Xg(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var N5={Firestore:nm,GeoPoint:wo,Timestamp:rt,Blob:tm,Transaction:rm,WriteBatch:im,DocumentReference:Vr,DocumentSnapshot:To,Query:Ao,QueryDocumentSnapshot:So,QuerySnapshot:ld,CollectionReference:Vc,FieldPath:qb,FieldValue:Hb,setLogLevel:k5,CACHE_SIZE_UNLIMITED:RP};function P5(n,e){n.INTERNAL.registerComponent(new Ss("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},N5)))}function O5(n){P5(n,(e,t)=>new nm(e,t,new $b)),n.registerVersion(x5,M5)}O5(Qn);function F5(n,e=zo){return new he(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function FO(n,e){return F5(n,e)}function V5(n,e){return FO(n,e).pipe(Jn(void 0),fu(),re(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Qb(n,e){return FO(n,e).pipe(re(t=>({payload:t,type:"query"})))}var sm=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=jO(r,t);return new am(i,s,this.afs)}snapshotChanges(){return V5(this.ref,this.afs.schedulers.outsideAngular).pipe(Kt)}valueChanges(e={}){return this.snapshotChanges().pipe(re(({payload:t})=>e.idField?ee(M({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Te(this.ref.get(e)).pipe(Kt)}};function om(n,e){return Qb(n,e).pipe(Jn(void 0),fu(),re(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(h=>h.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function VO(n,e,t){return om(n,t).pipe(Wr((r,i)=>L5(r,i.map(s=>s.payload),e),[]),Gr(),re(r=>r.map(i=>({type:i.type,payload:i}))))}function L5(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=j5(n,r))}),n}function Wb(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function j5(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Wb(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Wb(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Wb(n,e.oldIndex,1);break}return n}function LO(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var am=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=om(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(re(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Jn(void 0),fu(),lt(([r,i])=>i.length>0||!r),re(([,r])=>r),Kt)}auditTrail(e){return this.stateChanges(e).pipe(Wr((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=LO(e);return VO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kt)}valueChanges(e={}){return Qb(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.payload.docs.map(r=>e.idField?ee(M({},r.data()),{[e.idField]:r.id}):r.data())),Kt)}get(e){return Te(this.query.get(e)).pipe(Kt)}add(e){return this.ref.add(e)}doc(e){return new sm(this.ref.doc(e),this.afs)}},Kb=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?om(this.query,this.afs.schedulers.outsideAngular).pipe(Kt):om(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.filter(r=>e.indexOf(r.type)>-1)),lt(t=>t.length>0),Kt)}auditTrail(e){return this.stateChanges(e).pipe(Wr((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=LO(e);return VO(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kt)}valueChanges(e={}){return Qb(this.query,this.afs.schedulers.outsideAngular).pipe(re(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),Kt)}get(e){return Te(this.query.get(e)).pipe(Kt)}},U5=new K("angularfire2.enableFirestorePersistence"),B5=new K("angularfire2.firestore.persistenceSettings"),$5=new K("angularfire2.firestore.settings"),z5=new K("angularfire2.firestore.use-emulator");function jO(n,e=t=>t){return{query:e(n),ref:n}}var UO=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,d,h,p,m,_,w,E,R,O){this.schedulers=c;let F=Qa(t,a,r),z=d;h&&Ub(F,a,p,_,w,E,m,R),[this.firestore,this.persistenceEnabled$]=Ya(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let X=a.runOutsideAngular(()=>F.firestore());if(s&&X.settings(s),z&&X.useEmulator(...z),i&&!Wi(o)){let Q=()=>{try{return Te(X.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(D){return typeof console<"u"&&console.warn(D),se(!1)}};return[X,a.runOutsideAngular(Q)]}else return[X,se(!1)]},[s,z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=jO(i,r),a=this.schedulers.ngZone.run(()=>s);return new am(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Kb(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new sm(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(V(es),V(Ka,8),V(U5,8),V($5,8),V(Tt),V(_e),V(Wa),V(B5,8),V(z5,8),V(RO,8),V(Pb,8),V(Ob,8),V(Fb,8),V(Vb,8),V(Lb,8),V(jb,8),V(to,8))};static \u0275prov=W({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var BO=(()=>{let e=class e{constructor(r){this.store=r,this.TABLE_NAME="user_speech",this.uuid=xE()}setRecordUid(r){r&&(this.uuid=r)}getRecordUid(){return this.uuid}getRecord(r){return this.store.collection(this.TABLE_NAME).doc(r).valueChanges()}incrementHits(r="Navi"){return C(this,null,function*(){this.store.doc(`${r}/config`).set({numberOfHits:Xg(1)},{merge:!0}).catch(i=>console.error("Error incrementing hit counter : ",i))})}saveAppScore(r,i="Navi"){return C(this,null,function*(){r.updated_at=new Date,this.store.doc(`${i}/config`).set(r,{merge:!0}).catch(s=>(console.error("Error upserting : ",s),s))})}getAppdata(r="Navi"){return this.store.doc(`${r}/config`).valueChanges()}saveSpeech(r){return C(this,null,function*(){return r.id=this.uuid,r.updated_at=new Date,this.store.collection(this.TABLE_NAME).doc(this.uuid).set(r,{merge:!0}).then(()=>this.uuid).catch(i=>(console.error("Error upserting : ",i),i.status)),this.uuid})}};e.\u0275fac=function(i){return new(i||e)(V(UO))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var G5=(n,e)=>({"btn-success pulse-animation":n,"btn-danger":e});function W5(n,e){if(n&1){let t=ni();L(0,"p"),G(1,"Try saying \u{1F5E3}\uFE0F "),L(2,"span",18),G(3),$(),G(4," or "),L(5,"span",14),G(6),$(),G(7,". Say "),L(8,"span",18),G(9),$(),G(10," to clean the board. "),L(11,"button",19),tt("click",function(){gn(t);let i=De();return mn(i.toggleListening())}),ve(12,"i",20),$(),G(13,"\xA0 "),L(14,"a",21),tt("click",function(){gn(t);let i=De();return mn(i.copyVoiceSmithLink())}),L(15,"i",22),tt("click",function(){gn(t);let i=De();return mn(i.copyVoiceSmithLink())}),$(),G(16,"\xA0 "),L(17,"span",23),G(18),$()(),G(19,"\xA0 "),L(20,"a",24),ve(21,"i",25),$(),L(22,"span",26),G(23,"Desktop-only / "),L(24,"span",27),G(25,"Mobile-limited"),$()()()}if(n&2){let t=De();q(3),ze(t.START_COMMAND),q(3),ze(t.STOP_COMMAND),q(3),ze(t.CLEAR_COMMAND),q(2),ae("ngClass",Sf(7,G5,t.listening,!t.listening)),q(),ae("ngClass",t.listening?"fa-microphone":"fa-microphone-slash"),q(3),ae("ngClass",t.copied?"fa-solid":"fa-regular"),q(3),ze(t.getRecordUid())}}function K5(n,e){n&1&&(L(0,"span",29),G(1,"Listening"),$())}function Q5(n,e){n&1&&(L(0,"span",29),G(1,"Stopped"),$())}function Y5(n,e){if(n&1&&(L(0,"p"),G(1,"Transcript will appear in the space below as your host speaks. "),Ve(2,K5,2,0,"span",28)(3,Q5,2,0,"span",28),$()),n&2){let t=De();q(2),ae("ngIf",t.listening),q(),ae("ngIf",!t.listening)}}function Z5(n,e){if(n&1&&(L(0,"span",30),G(1),L(2,"span",13),G(3),$()()),n&2){let t=e.$implicit,r=De();ae("ngClass",r.isLeader(t.key)?"badge badge-border-success":"badge badge-border-danger"),q(),Ot("",t.key,"\xA0"),q(2),ze(t.value)}}var cm=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.zone=r,this.witaiService=i,this.messaging=s,this.database=o,this.route=a,this.router=c,this.START_COMMAND="start listening",this.STOP_COMMAND="stop listening",this.CLEAR_COMMAND="clear",this.MAX_SPEECH_TIME=5,this.test_command="start listening",this.fillerWords=["oh","ok","okay","um","uh","it's like","like","you know","basically","actually","so","right","I mean","well","just","er","anyway","now","let me think","haha","bla","really","and","well"],this.probableFillers=["fine","good","awesome"],this.unwantedVerbs=["am","is","are","were","do","did","done","doing","go","going","worked","work","working"],this.listening=!1,this.speaking=!1,this.fullTranscript=`Hi there! \u{1F44B} I am nA'vI
I would love to hear your story.
\u{1F3A4} Tell me something about yourself ..

Say "${this.START_COMMAND}" to begin \u{1F680}`,this.interimTranscript="",this.currentTerm="",this.verbsMap=new Map,this.leaderwordsMap=new Map,this.fillerWordsMap=new Map,this.goodbadwordsMap=new Map,this.sentenseClarity={good:0,bad:0},this.previousTime=0,this.totalWords=0,this.prevSentense="",this.isMobile=!1,this.minutes=this.MAX_SPEECH_TIME,this.seconds=0,this.speechTime="",this.voiceMode=!1,this.copied=!1,this.totalScore=0,this.appData={numberOfHits:0,highestScore:0},this.leadershipWords=["lead","vision","empower","collaborate","adapt","communicate","integrate","mentore","mentor","account","innovate","innovation","resilient","resilience","delegate","resolve","include","strategic","motivate","empower","encourage","impact","growth","deliver","delivering","collaboration"],this.createTimer=()=>{this.timerInterval=setInterval(()=>{this.updateTime()},1e3),this.speechTime=""},this.updateTime=()=>{this.seconds>0?this.seconds--:this.minutes>0?(this.minutes--,this.seconds=59):(console.debug("Time's up!"),this.stopListening()),this.speechTime=`${this.minutes}m ${this.seconds}s`},this.clearTimer=()=>{this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.minutes=this.MAX_SPEECH_TIME,this.seconds=0},this.myTask=()=>{let d=performance.now(),h=d-this.previousTime;h!=d&&h>5,requestAnimationFrame(this.myTask)},this.isMobile=Le.isMobileBrowser();let l=Le.getQueryParam(a,"vid");o.setRecordUid(l),this.initCompromiseNLP(),l?(this.voiceMode=!1,this.fullTranscript="",this.database.getRecord(l).subscribe(d=>{if(d){let h=d.message;this.updateFullText(h)}})):(this.voiceMode=!0,this.initAnnyang())}setStartCommand(r){this.START_COMMAND=r}setStopCommand(r){this.STOP_COMMAND=r}setClearCommand(r){this.CLEAR_COMMAND=r}getRecordUid(){return this.database.getRecordUid().split("-")[0]}getVoiceSmithLink(){return`${le.host}/voicesmith?vid=${this.database.getRecordUid()}`}copyVoiceSmithLink(){return C(this,null,function*(){try{yield navigator.clipboard.writeText(this.getVoiceSmithLink()),this.copied=!0}catch{console.error("Failed to copy the link")}})}isLeader(r){return this.leaderwordsMap.get(r)!=null}analyseClarity(r){return C(this,null,function*(){if(r){let i=r.trim().split(" ").length;i>=5&&i<=20?(this.sentenseClarity.good++,this.totalScore++):this.sentenseClarity.bad++,this.totalWords+=i}})}analyseVerbs(r){return C(this,null,function*(){let i=r.match("#Verb").out("array");return i.forEach(s=>{let o=s.toLowerCase();this.unwantedVerbs.includes(o)||(this.verbsMap.has(o)?this.verbsMap.set(o,this.verbsMap.get(o)+1):this.verbsMap.set(o,1),this.totalScore++)}),i.length})}analyseFillers(r){return C(this,null,function*(){let i=r.lookup(this.fillerWords).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.fillerWordsMap.has(o)?this.fillerWordsMap.set(o,this.fillerWordsMap.get(o)+1):this.fillerWordsMap.set(o,1),this.totalScore=this.totalScore-2,this.goodbadwordsMap.set(o,this.fillerWordsMap.get(o))}),i.length>0})}analyseLeaedershipQualities(r){return C(this,null,function*(){let i=r.compute("root").lookup(this.leadershipWords,{form:"root"}).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.leaderwordsMap.has(o)?this.leaderwordsMap.set(o,this.leaderwordsMap.get(o)+1):this.leaderwordsMap.set(o,1),this.totalScore=this.totalScore+3,this.goodbadwordsMap.set(o,this.leaderwordsMap.get(o))}),i.length})}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"SpeechToText":this.analyseClarity(i.payload);let s=this.nlp(i.payload);this.analyseFillers(s),this.analyseVerbs(s),this.analyseLeaedershipQualities(s),this.voiceMode&&(this.witaiService.getIntent(i.payload).then(o=>{}),this.database.saveSpeech({message:i.payload}));break;default:break}}),this.database.getAppdata().subscribe(r=>{this.appData=r})}initCompromiseNLP(){this.loadExternalScript("https://unpkg.com/compromise").then(()=>{this.nlp=window.nlp,this.nlp&&this.nlp.compile(this.leadershipWords)})}initAnnyang(){this.loadExternalScript("assets/annyang.js").then(()=>{this.initializeSpeechRecognition()})}stopListening(){this.listening&&this.voiceMode&&this.database.saveSpeech({message:this.STOP_COMMAND}),this.listening=!1,this.interimTranscript="",this.clearTimer(),this.totalScore>this.appData.highestScore&&this.database.saveAppScore({highestScore:this.totalScore})}startListening(){this.listening||this.database.incrementHits(),this.fullTranscript="",this.listening=!0,this.clearMaps(),this.createTimer(),this.totalScore=0}clearCommand(){this.fullTranscript="",this.interimTranscript="",this.clearMaps(),this.totalScore=0}toggleListening(){this.listening=!this.listening,this.listening?this.startListening():this.stopListening()}clearMaps(){this.leaderwordsMap.clear(),this.verbsMap.clear(),this.fillerWordsMap.clear(),this.goodbadwordsMap.clear(),this.previousTime=0,this.totalWords=0,this.sentenseClarity={good:0,bad:0},this.timerInterval&&(clearInterval(this.timerInterval),this.speechTime="")}initializeSpeechRecognition(){if(this.annyang=window.annyang,this.annyang){let r={"Stop listening":()=>{this.zone.run(()=>{this.stopListening()})},"Start listening":()=>{this.zone.run(()=>{this.startListening()})},Clear:()=>{this.zone.run(()=>{this.clearCommand()})}};this.annyang.addCallback("result",(i,s,o)=>{if(this.listening){let a=this.previousTime?o-this.previousTime>=300:!1;this.previousTime=o,this.zone.run(()=>{if(this.interimTranscript="",s&&i[0]){if(this.isMobile){let l=i[0].trim();if(this.prevSentense==l)return;this.prevSentense=l}let c=i[0]+(a?". ":" ");this.updateFullText(c)}else this.interimTranscript+=i})}}),this.annyang.addCallback("soundstart",()=>{console.debug("sound detected"),this.zone.run(()=>{this.speaking=!0})}),this.annyang.addCommands(r),this.recognition=this.annyang.getSpeechRecognizer(),this.recognition?(this.recognition.interimResults=!this.isMobile,this.annyang.start({autoRestart:!0,continuous:!0}),console.debug("Speech recognition started")):console.error("Voice is not supported in this browser.")}else console.error("Voice is not supported in this browser.")}loadExternalScript(r){return new Promise((i,s)=>{let o=document.createElement("script");o.src=r,o.type="application/javascript",o.onload=()=>{i()},o.onerror=()=>{s("Script load error")},document.body.appendChild(o)})}updateFullText(r){this.voiceMode?r.includes(this.START_COMMAND)||(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r):r.includes(this.CLEAR_COMMAND)?this.clearCommand():r.includes(this.STOP_COMMAND)?this.stopListening():(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r,this.listening=!0)}};e.\u0275fac=function(i){return new(i||e)(H(_e),H(Wk),H(In),H(BO),H(bn),H(On))},e.\u0275cmp=Fe({type:e,selectors:[["app-voice-smith"]],decls:45,vars:16,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-8"],[4,"ngIf"],["id","voice-output"],[1,"float-end"],[1,"fa-regular","fa-clock"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"small"],[1,"badge","badge-border-info"],[1,"badge","text-bg-light"],[1,"badge","badge-border-danger"],[1,"badge","badge-border-primary"],[1,"card-text"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","badge-border-success"],[1,"btn","rounded-circle","justify-content-center","align-items-center",3,"click","ngClass"],[1,"fas",3,"ngClass"],["target","_blank",1,"text-decoration-none",3,"click"],[1,"fa-clipboard",3,"click","ngClass"],[1,"badge","rounded-pill","text-bg-primary"],["href","https://www.merriam-webster.com/word-of-the-day","target","_blank",1,""],[1,"fa-solid","fa-lightbulb",2,"color","#efbc06"],[1,"d-sm-none","badge","badge-border-success"],[1,"text-strike-black"],["class","badge text-bg-primary",4,"ngIf"],[1,"badge","text-bg-primary"],[3,"ngClass"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1),Ve(4,W5,26,10,"p",3)(5,Y5,4,2,"p",3),$(),L(6,"div",4),G(7),L(8,"em"),G(9),$()(),L(10,"div",5),G(11),L(12,"span"),G(13),$(),G(14,"\xA0"),ve(15,"i",6),G(16,"\xA0"),L(17,"span"),G(18),$()()(),L(19,"div",7)(20,"div",8)(21,"div",9)(22,"h5",10),G(23,"Strength Board : "),L(24,"span",11),G(25),$()(),L(26,"p")(27,"span",12),G(28,"Actions\xA0"),L(29,"span",13),G(30),$()(),G(31," | "),L(32,"span",14),G(33,"Fillers\xA0"),L(34,"span",13),G(35),$()(),G(36," | "),L(37,"span",15),G(38,"Clarity\xA0"),L(39,"span",13),G(40),$()()(),ve(41,"hr"),L(42,"div",16),Ve(43,Z5,4,3,"span",17),Ft(44,"keyvalue"),$()()()()()()),i&2&&(q(4),ae("ngIf",s.voiceMode),q(),ae("ngIf",!s.voiceMode),q(2),Ot("",s.fullTranscript," "),q(2),ze(s.interimTranscript),q(2),Df("Highest : ",s.appData.highestScore," | Tried : ",s.appData.numberOfHits," | "),q(2),Ot("Words : ",s.totalWords,""),q(5),ze(s.speechTime),q(7),ze(s.totalScore),q(5),ze(s.verbsMap.size),q(5),ze(s.fillerWordsMap.size),q(5),Df("",s.sentenseClarity.good,"/",s.sentenseClarity.bad,""),q(3),ae("ngForOf",Rn(44,14,s.goodbadwordsMap)))},dependencies:[Ia,wn,$n,Hi],styles:["#voice-output[_ngcontent-%COMP%]{font-size:1.4em;line-height:1.6;border:1px solid #ccc;padding:20px;min-height:200px;background-color:#f9f9f9;margin-top:10px;white-space:pre-wrap}.typing-cursor[_ngcontent-%COMP%]{border-right:2px solid black;animation:_ngcontent-%COMP%_blink 1s steps(1) infinite}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #007bffb3}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 0 #007bffb3}50%{transform:scale(1.1);box-shadow:0 0 10px #00ff7bb3}to{transform:scale(1);box-shadow:0 0 #007bffb3}}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}.badge-border-primary[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-primary);color:var(--bs-primary)!important}.badge-border-danger[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-danger);color:var(--bs-danger)!important}.badge-border-info[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-info);color:var(--bs-info)!important}.text-strike-black[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#000}"]});let n=e;return n})();var Yb=(()=>{let e=class e extends qn{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=o,this.homePageContent="Loading..",this.imgLayout="LayoutMix",this.firstHeading=!1,this.firstPara=!1,this.loadNewWidget=!1,this.usersFileAlreadyLoaded=!1,this.messaging.event$.subscribe(a=>{switch(a.cmd){case"UserContext":this.titleService.setTitle(te.ghUser.name),this.usersFileAlreadyLoaded||(te.YOUR_READ_ME?this.homePageContent=te.YOUR_READ_ME:this.githubService.getInstalledAccessToken()?this.githubService.getInstalledContent(te.ghUserLoaded).then(l=>{this.homePageContent=l}):this.githubService.getReadMeContent(te.ghUserLoaded).then(l=>{this.homePageContent=l}).catch(l=>{console.log(te.ghUserLoaded+" not available")}));break;case"UserDirectory":break;default:break}})}ngAfterViewInit(){}ngOnInit(){if(te.INTERNAL_FOLDERS.includes(this.basePath)){this.router.navigate(["/i"+Le.getUrl(this.router)]);return}this.routerFileUrl&&this.githubService.getMdFileContent(this.basePath,this.routerFileUrl).then(r=>{this.homePageContent=r,this.usersFileAlreadyLoaded=!0}).catch(r=>this.homePageContent=r),this.titleService.setTitle("John Doe"),this.markdownService.renderer.html=r=>(Le.getFirstLine(r).includes("Widget")&&(this.loadNewWidget=!0),this.imgLayout=="<!-- Theme:Classic, ImgAlign:Left Widget:NAVI-->"||this.imgLayout,r),this.markdownService.renderer.heading=(r,i,s)=>i==1&&!this.firstHeading?(this.firstHeading=!0,`<h1 class="first-heading">${s}</h1>`):nt.prototype.heading.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.paragraph=r=>r.startsWith("<a")&&r.endsWith("</a>")?r:this.firstHeading&&!this.firstPara?(this.firstPara=!0,`<p class="first-para">${r}<p>`):`<p>${r}<p>`,this.markdownService.renderer.link=(r,i,s)=>nt.prototype.link.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.image=(r,i,s)=>`<img src="${r}" class="img-fluid mx-auto d-block" alt="${s}">`}onMarkdownReady(){if(this.applyLastHeadingStyle(),this.loadNewWidget){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(cm);r.appendChild(i.location.nativeElement)}}}applyLastHeadingStyle(){let r=document.querySelectorAll("h1");if(r.length>1){let i=r[r.length-1];i.classList.add("cta");let s=i.nextElementSibling;for(;s;)s.classList.add("cta"),s=s.nextElementSibling}}};e.\u0275fac=function(i){return new(i||e)(H(En),H(Qt),H(_n),H(vn))},e.\u0275cmp=Fe({type:e,selectors:[["app-ghhome"]],features:[_t],decls:5,vars:1,consts:[["mdContent",""],[1,"container"],[1,"row","justify-content-center"],[1,"container",3,"ready","data"]],template:function(i,s){if(i&1){let o=ni();L(0,"div",1)(1,"div",2,0)(3,"markdown",3),tt("ready",function(){return gn(o),mn(s.onMarkdownReady())}),G(4,`
        `),$()()()}i&2&&(q(3),ae("data",s.homePageContent))},dependencies:[Tr],styles:[".badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}"]});let n=e;return n})();function J5(n,e){if(n&1&&(L(0,"div",6)(1,"div",7)(2,"a",8),ve(3,"img",9),$(),L(4,"div",10)(5,"a",11)(6,"h5",12),G(7),$()()()()()),n&2){let t=e.$implicit,r=De();q(2),ae("href",r.galaryLinks.get(t.key),dt),q(),Mn("alt",t.key),ae("src",t.value,dt),q(2),ae("href",r.galaryLinks.get(t.key),dt),q(2),ze(t.key)}}var $O=(()=>{let e=class e extends qn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.markdownContent="Loading..",this.galaryLinks=new Map,this.galaryImgs=new Map,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.titleService.setTitle(te.ghUser.name),this.githubService.getReadMeContent(this.routerFileUrl).then(c=>this.markdownContent=c);break;default:break}})}ngOnInit(){this.markdownService.renderer.link=(r,i,s)=>(this.galaryLinks.set(s,r),nt.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.image=(r,i,s)=>(this.galaryImgs.set(s,r),s)}onMarkdownReady(){}};e.\u0275fac=function(i){return new(i||e)(H(En),H(Qt),H(_n))},e.\u0275cmp=Fe({type:e,selectors:[["app-crazy-coupons"]],features:[_t],decls:8,vars:4,consts:[[1,"container","mt-5"],[1,"row"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"container"],[1,"row","justify-content-center"],[3,"ready","data"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],["target","_blank","rel","noopener noreferrer",1,"text-decoration-none",3,"href"],[1,"card-title"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1),Ve(2,J5,8,5,"div",2),Ft(3,"keyvalue"),$()(),L(4,"div",3)(5,"div",4)(6,"markdown",5),tt("ready",function(){return s.onMarkdownReady()}),G(7,`
        `),$()()()),i&2&&(q(2),ae("ngForOf",Rn(3,2,s.galaryImgs)),q(4),ae("data",s.markdownContent))},dependencies:[wn,Tr,Hi],styles:['@import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css";.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#333;margin-top:4px;text-align:left;line-height:1.2}.card-body[_ngcontent-%COMP%]{padding:8px}.card[_ngcontent-%COMP%]{border:none}']});let n=e;return n})();var zO=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.el=i}ngOnInit(){let r=this.renderer.createElement("script");r.src="https://giscus.app/client.js",r.type="text/javascript",r.setAttribute("data-repo","publichomepage/discuss"),r.setAttribute("data-repo-id","R_kgDONHZY8A"),r.setAttribute("data-category","Announcements"),r.setAttribute("data-category-id","DIC_kwDONHZY8M4CjyZp"),r.setAttribute("data-reactions-enabled","1"),r.setAttribute("data-emit-metadata","0"),r.setAttribute("data-input-position","top"),r.setAttribute("data-theme","preferred_color_schemelight"),r.setAttribute("data-lang","en"),r.setAttribute("data-loading","lazy"),r.setAttribute("crossorigin","anonymous"),r.crossOrigin="anonymous",r.async=!0;let i=this.el.nativeElement.querySelector("#discuss-pane");this.renderer.appendChild(i,r)}};e.\u0275fac=function(i){return new(i||e)(H(br),H(Gt))},e.\u0275cmp=Fe({type:e,selectors:[["app-giscus-widget"]],decls:1,vars:0,consts:[["id","discuss-pane"]],template:function(i,s){i&1&&ve(0,"div",0)}});let n=e;return n})();var dd=(()=>{let e=class e{};e.NEW_USER_CHANNEL="https://discord.com/api/webhooks/1161881028474966077/1NlJyAYOMZbQTZmbVL_WAEm4S_whyKQ275RsOf3PHYqF7naHYmx9z9lFNW2kqzlLr0I-",e.WEB_ERROR_CHANNEL="https://discord.com/api/webhooks/1161880477750272000/I-DJecqOhonKLsy75jP6iVeGxpqxMuu8WZ8wgBd31o4rZzF49vXnjKo9Tv0p5S6HTm7j",e.PUBLISHING_HELP_CHANNEL="https://discord.com/api/webhooks/1161873930991190078/FHGUfffC-VfjGOrLv9OU0EAkmeqM0-3o6phOYtg3cGkjG1E57_CPSAhQ0_pJO6AYNLC7",e.INTERVIEW_ASSISTANCE_CHANNEL="https://discord.com/api/webhooks/1177388543023272059/Tqt3tk3Bm3tvd6aZksnQ9-crhr8qWTby6HEWguT3nb5DG-10Y7zV3vh84D7utAdTvL17",e.DEFAULT_PAGE_COUNT=777,e.DEFAULT_PAGE_LIKES=17,e.MAX_SIDE_PANEL_VIDEO_LINKS=5,e.MAX_QUESTION_TIMEOUT=2500,e.JUDGE_0_SUBMISSION_URL="https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=true&fields=*",e.DRAFT_HEADER="<!-- Draft -->",e.DRAFT_PAGE_LINK="/faqs/draft_content",e.CODING_QUESTIONS_CONTENT_HEADER="<!-- question -->",e.CODING_SOLUTIONS_CONTENT_HEADER="<!-- correct_solution -->",e.CODING_ONE_TEST_CASE_CONTENT_HEADER="<!-- runOneTestCaseHandler -->",e.CODING_ALL_TESTS_CONTENT_HEADER="<!-- runAllTestCases -->",e.SELECTIFY_ANSWER_CONTENT_HEADER="<!-- Answer[ ]?=(.*)-->",e.ASSESSMENT_FOLDER_HEADER="<!-- Assessment Folder : (?<name>\\S+) -->",e.ASSESSMENT_KNOWLEDGE_CHECK_HEADER=/<!-- Knowledge Check | (\w+) | (\S+) | (\w+) -->/g,e.ASSESSMENT_QUESTIONS_FILE_NAME_SYNTAX="(?<qId>\\d+)-(?<qName>\\S+).md",e.SELECT_OPTIONS_HEADER="<!-- Select options -->";let n=e;return n})();var qO=(()=>{let e=class e{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustResourceUrl(r)}};e.\u0275fac=function(i){return new(i||e)(H($u,16))},e.\u0275pipe=Gs({name:"safe",type:e,pure:!0});let n=e;return n})();var t8=(n,e)=>({"fa-play":n,"fa-pause":e});function n8(n,e){if(n&1&&(L(0,"li")(1,"a",21),G(2),$()()),n&2){let t=e.$implicit,r=De(2);q(),If("href","/i/",t,"",dt),q(),ze(r.getFileName(t))}}function r8(n,e){if(n&1&&(L(0,"div",14)(1,"div",15),G(2),L(3,"a",16),ve(4,"i",17),$()(),L(5,"div",18)(6,"div",19)(7,"div",8)(8,"ul",20),Ve(9,n8,3,3,"li",10),$()()()()()),n&2){let t=De();q(2),Ot("",t.folderName," "),q(7),ae("ngForOf",t.filesAvailable)}}function i8(n,e){if(n&1&&(L(0,"div",22)(1,"div",23)(2,"p"),G(3,"Try these challenge questions and get better on this topic."),$(),L(4,"a",24),ve(5,"i",25),G(6,"\xA0Knowledge Check"),$()()()),n&2){let t=De();q(4),Mn("href",t.assementLink,dt)}}function s8(n,e){n&1&&(L(0,"div")(1,"b"),G(2,"Practice questions"),$()())}function o8(n,e){if(n&1&&(L(0,"li")(1,"a",26),G(2),$()()),n&2){let t=e.$implicit;q(),Mn("href",t,dt),q(),ze(t.split("problems")[1])}}function a8(n,e){n&1&&(L(0,"div",27)(1,"b"),G(2,"Video reference"),$()())}function c8(n,e){if(n&1&&(L(0,"div",28),ve(1,"iframe",29),Ft(2,"safe"),$()),n&2){let t=e.$implicit;q(),ae("src",Rn(2,1,t),iA)}}function u8(n,e){if(n&1){let t=ni();L(0,"a",30),tt("click",function(){gn(t);let i=De();return mn(i.speakText())}),ve(1,"i",31),$()}if(n&2){let t=De();q(),ae("ngClass",Sf(1,t8,!t.isPaused,t.isPaused))}}var hd=(()=>{let e=class e extends qn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=B(vn),this.filesAvailable=[],this.availableYoutubeLinks=new Set,this.leetcodeLinks=new Set,this.folderName="",this.readmeFileUrl="",this.assementLink="",this.speechContent=null,this.isPaused=!1,this.isSpeaking=!1,this.isDraftArticle=!1,this.loadPlugin=!1,this.firstLineProcessed=!1,this.hasSelectOptionsHeader=!1,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.folderName=this.articleFolderName;let c=Le.getRouterUrl(this.router,this.basePath+"/"+this.folderName);c.endsWith(".md")||(c=c+".md"),this.readmeFileUrl=Le.getGhUserFilePath(te.ghUserLoaded,`${this.folderName}/${c}`,this.githubService.hasInstalledAccessToken());break;case"UserDirectory":this.githubService.getGhDirectoryContents(this.githubUser,!0,this.getFolderName()).then(l=>{this.filesAvailable=l.files.filter(d=>!d.includes("README.md"))});break;default:break}}),this.speechSir=window.speechSynthesis}getFolderName(){let r=this.routerFileUrl.substring(this.routerFileUrl.lastIndexOf("/")+1);return r.endsWith("md")?super.getFolderName():r}ngOnInit(){this.router.events.subscribe(r=>{r.type==15&&this.ngOnDestroy()}),this.markdownService.renderer.html=r=>{if(this.processFirstLine(r),this.isDraftArticle)return"";let i=r.match(dd.ASSESSMENT_FOLDER_HEADER);if(i!=null&&i.groups&&i.groups.name){let s=i.groups.name;return this.assementLink=s.includes("http")?s:`/assessments/${s}`,""}return this.hasSelectOptionsHeader=r.includes(dd.SELECT_OPTIONS_HEADER),r},this.markdownService.renderer.list=(r,i,s)=>{if(this.hasSelectOptionsHeader){let o=r.split(`
`).map(a=>`<option>${a.trim()}</option>`).join("");return this.hasSelectOptionsHeader=!1,`<select class="form-select form-select-lg mb-3">${o}</select>`}return nt.prototype.list.call(this.markdownService.renderer,r,i,s)}}processFirstLine(r){if(this.firstLineProcessed)return;let i=Le.parseHtmlLine(r);switch(i.PageType){case dd.DRAFT_HEADER:{this.isDraftArticle=!0;break}case"Assessment":break;default:break}i.Widget=="NAVI"&&(this.loadPlugin=!0),this.firstLineProcessed=!0}speakText(){this.isPaused?this.resumeSpeech():this.isSpeaking?this.pauseSpeech():this.startSpeech()}startSpeech(){!this.isSpeaking&&this.speechContent!=null&&(this.speechSir.speak(this.speechContent),this.isSpeaking=!0)}pauseSpeech(){!this.isPaused&&this.isSpeaking&&(this.speechSir.pause(),this.isPaused=!0)}resumeSpeech(){this.isPaused&&this.isSpeaking&&(this.speechSir.resume(),this.isPaused=!1)}onMarkdownReady(){if(this.availableYoutubeLinks=te.userContext.youtube_links,this.leetcodeLinks=te.userContext.leetcode_links,this.isDraftArticle)this.router.navigate([dd.DRAFT_PAGE_LINK]);else if(this.router.navigate([this.router.url]),this.loadPlugin){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(cm);r.appendChild(i.location.nativeElement)}}}speechReady(r){this.isDraftArticle||(this.speechContent=r?new SpeechSynthesisUtterance(r):null,this.speechContent!=null&&(this.speechContent.pitch=1,this.speechContent.rate=1,this.speechContent.volume=1,this.speechContent.lang="en-US"))}ngOnDestroy(){this.speechSir&&this.speechContent!=null&&this.speechSir.cancel()}getFileName(r){return this.folderName=="faqs"?Le.getFileNameWithoutCurrentFolder(r,this.folderName):Le.getFileName(r)}};e.\u0275fac=function(i){return new(i||e)(H(En),H(Qt),H(_n))},e.\u0275cmp=Fe({type:e,selectors:[["app-internal-articles"]],features:[_t],decls:16,vars:8,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"container",3,"ready","load","src"],[1,"col-lg-4"],["class","card mb-4 my-3",4,"ngIf"],["class","card my-3 text-center border-success",4,"ngIf"],[4,"ngIf"],[1,"text-truncate"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],["class","text-capitalize my-2",4,"ngIf"],["class","card mb-4",4,"ngFor","ngForOf"],["class","float",3,"click",4,"ngIf"],[1,"card","mb-4","my-3"],[1,"card-header","text-capitalize"],["href","/articles"],[1,"fa-solid","fa-magnifying-glass","float-right",2,"color","darkorange"],[1,"card-body","scrollable-card"],[1,"row"],[1,"list-unstyled","mb-0","text-capitalize"],[3,"href"],[1,"card","my-3","text-center","border-success"],[1,"card-body"],[1,"btn","btn-warning",3,"href"],[1,"fa-regular","fa-lightbulb"],["target","_blank",3,"href"],[1,"text-capitalize","my-2"],[1,"card","mb-4"],["width","100%","height","200","allowfullscreen","",1,"rounded-2",3,"src"],[1,"float",3,"click"],[1,"fa","my-float",3,"ngClass"]],template:function(i,s){i&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),tt("ready",function(){return s.onMarkdownReady()})("load",function(a){return s.speechReady(a)}),G(4,`
            `),$()(),L(5,"div",4),Ve(6,r8,10,2,"div",5)(7,i8,7,1,"div",6)(8,s8,3,0,"div",7),L(9,"div",8)(10,"ul",9),Ve(11,o8,3,2,"li",10),$()(),Ve(12,a8,3,0,"div",11)(13,c8,3,3,"div",12),ve(14,"app-giscus-widget"),$()()(),Ve(15,u8,2,4,"a",13)),i&2&&(q(3),ae("src",s.readmeFileUrl),q(3),ae("ngIf",s.folderName),q(),ae("ngIf",s.assementLink),q(),ae("ngIf",s.leetcodeLinks.size>0),q(3),ae("ngForOf",s.leetcodeLinks),q(),ae("ngIf",s.availableYoutubeLinks.size>0),q(),ae("ngForOf",s.availableYoutubeLinks),q(2),ae("ngIf",s.speechContent))},dependencies:[Ia,wn,$n,Tr,zO,qO],styles:[".scrollable-card[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto}"]});let n=e;return n})();var HO=(()=>{let e=class e{constructor(r){this.messaging=r,this.recognition=new webkitSpeechRecognition,this.isStoppedSpeechRecog=!1,this.text="",this.tempWords=""}init(){this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.addEventListener("result",r=>{var i=r.results[0][0].transcript;if(this.tempWords=i,i){let s={cmd:"speech",payload:i};this.messaging.send(s)}})}start(){this.isStoppedSpeechRecog=!1,this.recognition.start(),console.log("Speech recognition started"),this.recognition.addEventListener("end",()=>{this.isStoppedSpeechRecog?(this.recognition.stop(),console.log("End speech recognition")):(this.wordConcat(),this.recognition.start())})}stop(){this.isStoppedSpeechRecog=!0,this.wordConcat(),this.recognition.stop(),console.log("End speech recognition")}wordConcat(){this.text=this.text+" "+this.tempWords+".",this.tempWords=""}};e.\u0275fac=function(i){return new(i||e)(V(In))},e.\u0275prov=W({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var d8=["searchInput"],h8=n=>({transform:n});function f8(n,e){n&1&&(L(0,"div",12),G(1,"Listening... "),L(2,"div",13)(3,"span",14),G(4,"Loading..."),$()()())}function p8(n,e){n&1&&(L(0,"div",12),G(1,"Listening "),ve(2,"i",15),$())}function g8(n,e){if(n&1&&(L(0,"div",16),ve(1,"i",17),G(2),$()),n&2){let t=De();q(2),Ot("\xA0",t.lastSpeechText,"")}}function m8(n,e){if(n&1&&(L(0,"h6",25),G(1),$()),n&2){let t=De().ngIf;q(),Ot(" ~ ",t.Category,"")}}function y8(n,e){if(n&1&&(yw(0),L(1,"h2",22),G(2),$(),L(3,"i"),Ve(4,m8,2,1,"h6",23),$(),ve(5,"a",24),vw()),n&2){let t=e.ngIf,r=De().$implicit,i=De();q(2),ze(t.File),q(2),ae("ngIf",t.Category),q(),Mn("href",i.createClickableLink(r),dt)}}function v8(n,e){if(n&1){let t=ni();L(0,"div",18)(1,"div",19),tt("mouseenter",function(){let i=gn(t).$implicit,s=De();return mn(s.onCardHover(!0,i))})("mouseleave",function(){let i=gn(t).$implicit,s=De();return mn(s.onCardHover(!1,i))}),L(2,"div",20),Ve(3,y8,6,3,"ng-container",21),$()()()}if(n&2){let t=e.$implicit,r=De();q(),Mn("id",t),ae("ngStyle",Tf(3,h8,r.getRandomRotation(t))),q(2),ae("ngIf",r.getFileNameWithCategory(t))}}var Zb=(()=>{let e=class e extends hd{constructor(r,i,s,o,a){super(i,r,s),this.filterText="",this.lastSpeechText="",this.articleFound=!1,this.filteredFiles=[],this.cachedRotations={},this.userTyping=!1,this.ghuserName="",a.event$.subscribe(c=>{let l=c;switch(l.cmd){case"speech":this.articleFound=!1,this.filterText=l.payload?l.payload:"",this.lastSpeechText=this.filterText.substring(0,25),this.searchKey(),this.articleFound||(this.filterText="",this.filteredFiles=this.filesAvailable);break;case"UserDirectory":setTimeout(()=>{this.filteredFiles=this.filesAvailable},1e3);break;default:break}}),o.init(),o.start()}ngOnInit(){this.ghuserName=te.ghUserLoaded}onUserInput(){this.userTyping=!0}clickArticle(r){this.router.navigate(["/i"+r])}searchKey(){let r=this.filterText.trim().split(/\s+/).map(s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),i=new RegExp(r.join("|"),"i");this.filteredFiles=this.filterText===""?this.filesAvailable:this.filesAvailable.filter(s=>i.test(s)?(this.articleFound=!0,this.userTyping||this.searchInput.nativeElement.select(),!0):!1)}getRandomRotation(r){if(!this.cachedRotations[r]){let o=Math.random()*4+-2;this.cachedRotations[r]=`rotate(${o}deg)`}return this.cachedRotations[r]}onCardHover(r,i){let s=document.getElementById(i);s&&(r?s.style.transform="":s.style.transform=this.cachedRotations[i])}getFileNameWithCategory(r,i=!1){return Le.getFileNameWithCategory(r,i)}createClickableLink(r){let i=r.lastIndexOf(".md");return i!=-1&&(r=r.substring(0,i)),this.isHomePageGHUser?`/i/${r}`:`/${this.githubUser}/${r}`}};e.\u0275fac=function(i){return new(i||e)(H(Qt),H(En),H(_n),H(HO),H(In))},e.\u0275cmp=Fe({type:e,selectors:[["app-search-articles"]],viewQuery:function(i,s){if(i&1&&ax(d8,7),i&2){let o;ww(o=_w())&&(s.searchInput=o.first)}},features:[_t],decls:14,vars:5,consts:[["searchInput",""],[1,"container","px-5"],[1,"row","mx-auto","mb-4","rounded-3","align-items-center","justify-content-center"],[1,"container-fluid","py-3","text-center"],[1,"display-4","fw-bold"],[1,"col-lg-6"],["class","fs-6 text-muted float-end",4,"ngIf"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type or Speak to search ...",1,"form-control","border","border-success",3,"ngModelChange","input","ngModel"],["class","fs-6 text-muted text-center",4,"ngIf"],[1,"row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"fs-6","text-muted","float-end"],["role","status",1,"spinner-border","spinner-border-sm","text-secondary"],[1,"sr-only"],[1,"fa-solid","fa-check",2,"color","#63E6BE"],[1,"fs-6","text-muted","text-center"],[1,"fa-brands","fa-searchengin"],[1,"col-md-3"],[1,"card","mb-4","border-primary","card-hover",3,"mouseenter","mouseleave","id","ngStyle"],[1,"card-body","text-success"],[4,"ngIf"],[1,"card-title","text-capitalize"],["class","card-subtitle text-muted text-end",4,"ngIf"],[1,"stretched-link",3,"href"],[1,"card-subtitle","text-muted","text-end"]],template:function(i,s){if(i&1){let o=ni();L(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),G(4,"Search Articles"),$()(),L(5,"div",5),Ve(6,f8,5,0,"div",6)(7,p8,3,0,"div",6),L(8,"div",7)(9,"input",8,0),Iw("ngModelChange",function(c){return gn(o),cx(s.filterText,c)||(s.filterText=c),mn(c)}),tt("ngModelChange",function(){return gn(o),mn(s.searchKey())})("input",function(){return gn(o),mn(s.onUserInput())}),$()(),Ve(11,g8,3,1,"div",9),$()(),L(12,"div",10),Ve(13,v8,4,5,"div",11),$()()}i&2&&(q(6),ae("ngIf",!s.articleFound),q(),ae("ngIf",s.articleFound),q(2),Ew("ngModel",s.filterText),q(2),ae("ngIf",!s.articleFound),q(2),ae("ngForOf",s.filteredFiles))},dependencies:[wn,$n,Px,tp,BM,w_],styles:[".card-hover[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease,background-color .3s ease}.card-hover[_ngcontent-%COMP%]:hover{box-shadow:0 10px 20px #0000004d;background-color:silver}"]});let n=e;return n})();var w8={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",enableTracing:!le.production},_8=[{path:"i/:folder/:id",component:hd,children:[{path:"**",component:hd}]},{path:":ghUser/articles",component:Zb},{path:"articles",component:Zb},{path:"crazycoupons",component:$O},{path:"contacts",component:TE},{path:":ghUser/contacts",component:TE},{path:"",component:Hk},{path:":ghUser",component:Yb,children:[{path:"**",component:Yb}]}],GO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=vt({type:e}),e.\u0275inj=yt({imports:[Da,rE.forRoot(_8,w8),rE]});let n=e;return n})();function E8(n){return()=>n.initializeRemoteConfig()}var WO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=vt({type:e,bootstrap:[te]}),e.\u0275inj=yt({providers:[Kx(),{provide:es,useValue:le.firebaseConfig},{provide:wa,useFactory:E8,deps:[Np],multi:!0}],imports:[iM,QM,GO,DM.forRoot({loader:Qs,markedOptions:{provide:h_,useValue:{gfm:!0,breaks:!1,pedantic:!1}},sanitize:yn.NONE})]});let n=e;return n})();lx(te,function(){return[$n,Z_,ZM,Gk]},[]);rM().bootstrapModule(WO).catch(n=>console.error(n));
