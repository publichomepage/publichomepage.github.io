import{b as IS,c as TS,f as _2,g as CS}from"./chunk-E4ERW3Q5.js";import{a as wS,b as Qh,c as bS,d as ES,e as DS,f as Rv,g as SS,h as Ql,i as Mv,j as Yh,k as AS,l as xS,m as Nv,n as at,o as Ks,p as Ar,q as Zh,r as Yl,s as kS,t as RS,u as qi,v as xr}from"./chunk-75BEUDPJ.js";import{a as N,b as ne,c as In,e as ti,g as y2,h as v2,i as kv,j as y}from"./chunk-4ZZIO3ZI.js";var bb=ti(wb=>{"use strict";Object.defineProperty(wb,"__esModule",{value:!0});var _b=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};wb.default=_b});var Ib=ti(Ju=>{"use strict";var x1=Ju&&Ju.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Ju,"__esModule",{value:!0});var NG=x1((CS(),v2(_2))),PG=x1(bb()),Eb=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=NG.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>y(this,null,function*(){var o,a,c;let l=null,d=null,h=null,p=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){let k=yield s.text();k===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=k:d=JSON.parse(k))}let b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),E=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&E&&E.length>1&&(h=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(l={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,p=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let b=yield s.text();try{l=JSON.parse(b),Array.isArray(l)&&s.status===404&&(d=[],l=null,p=200,m="OK")}catch{s.status===404&&b===""?(p=204,m="No Content"):l={message:b}}if(l&&this.isMaybeSingle&&(!((c=l?.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,p=200,m="OK"),l&&this.shouldThrowOnError)throw new PG.default(l)}return{error:l,data:d,count:h,status:p,statusText:m}}));return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,c;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=s?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Ju.default=Eb});var Cb=ti(Xu=>{"use strict";var OG=Xu&&Xu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Xu,"__esModule",{value:!0});var FG=OG(Ib()),Tb=class extends FG.default{select(e){let t=!1,r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){let o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;let c=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Xu.default=Tb});var kg=ti(ed=>{"use strict";var LG=ed&&ed.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ed,"__esModule",{value:!0});var VG=LG(Cb()),Db=class extends VG.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};ed.default=Db});var Ab=ti(nd=>{"use strict";var jG=nd&&nd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(nd,"__esModule",{value:!0});var td=jG(kg()),Sb=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){let i=t?"HEAD":"GET",s=!1,o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new td.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){let o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){let a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new td.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let c=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(c.length>0){let l=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new td.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new td.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new td.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};nd.default=Sb});var k1=ti(Rg=>{"use strict";Object.defineProperty(Rg,"__esModule",{value:!0});Rg.version=void 0;Rg.version="0.0.0-automated"});var R1=ti(Mg=>{"use strict";Object.defineProperty(Mg,"__esModule",{value:!0});Mg.DEFAULT_HEADERS=void 0;var UG=k1();Mg.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${UG.version}`}});var N1=ti(rd=>{"use strict";var M1=rd&&rd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(rd,"__esModule",{value:!0});var $G=M1(Ab()),BG=M1(kg()),qG=R1(),xb=class n{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},qG.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=i}from(e){let t=new URL(`${this.url}/${e}`);return new $G.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){let o,a=new URL(`${this.url}/rpc/${e}`),c;r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",c=t);let l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new BG.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};rd.default=xb});var U1=ti(Kt=>{"use strict";var gc=Kt&&Kt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kt,"__esModule",{value:!0});Kt.PostgrestError=Kt.PostgrestBuilder=Kt.PostgrestTransformBuilder=Kt.PostgrestFilterBuilder=Kt.PostgrestQueryBuilder=Kt.PostgrestClient=void 0;var P1=gc(N1());Kt.PostgrestClient=P1.default;var O1=gc(Ab());Kt.PostgrestQueryBuilder=O1.default;var F1=gc(kg());Kt.PostgrestFilterBuilder=F1.default;var L1=gc(Cb());Kt.PostgrestTransformBuilder=L1.default;var V1=gc(Ib());Kt.PostgrestBuilder=V1.default;var j1=gc(bb());Kt.PostgrestError=j1.default;Kt.default={PostgrestClient:P1.default,PostgrestQueryBuilder:O1.default,PostgrestFilterBuilder:F1.default,PostgrestTransformBuilder:L1.default,PostgrestBuilder:V1.default,PostgrestError:j1.default}});function MS(n,e){return Object.is(n,e)}var Mt=null,Jh=!1,Xh=1,ni=Symbol("SIGNAL");function Le(n){let e=Mt;return Mt=n,e}function NS(){return Mt}var Jl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fv(n){if(Jh)throw new Error("");if(Mt===null)return;Mt.consumerOnSignalRead(n);let e=Mt.nextProducerIndex++;if(rf(Mt),e<Mt.producerNode.length&&Mt.producerNode[e]!==n&&Zl(Mt)){let t=Mt.producerNode[e];nf(t,Mt.producerIndexOfThis[e])}Mt.producerNode[e]!==n&&(Mt.producerNode[e]=n,Mt.producerIndexOfThis[e]=Zl(Mt)?LS(n,Mt,e):0),Mt.producerLastReadVersion[e]=n.version}function w2(){Xh++}function PS(n){if(!(Zl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Xh)){if(!n.producerMustRecompute(n)&&!Vv(n)){n.dirty=!1,n.lastCleanEpoch=Xh;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Xh}}function OS(n){if(n.liveConsumerNode===void 0)return;let e=Jh;Jh=!0;try{for(let t of n.liveConsumerNode)t.dirty||b2(t)}finally{Jh=e}}function FS(){return Mt?.consumerAllowSignalWrites!==!1}function b2(n){n.dirty=!0,OS(n),n.consumerMarkedDirty?.(n)}function tf(n){return n&&(n.nextProducerIndex=0),Le(n)}function Lv(n,e){if(Le(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Zl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)nf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Vv(n){rf(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(PS(t),r!==t.version))return!0}return!1}function jv(n){if(rf(n),Zl(n))for(let e=0;e<n.producerNode.length;e++)nf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function LS(n,e,t){if(VS(n),n.liveConsumerNode.length===0&&jS(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=LS(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function nf(n,e){if(VS(n),n.liveConsumerNode.length===1&&jS(n))for(let r=0;r<n.producerNode.length;r++)nf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];rf(i),i.producerIndexOfThis[r]=e}}function Zl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function rf(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function VS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function jS(n){return n.producerNode!==void 0}function US(n){let e=Object.create(E2);e.computation=n;let t=()=>{if(PS(e),Fv(e),e.value===ef)throw e.error;return e.value};return t[ni]=e,t}var Pv=Symbol("UNSET"),Ov=Symbol("COMPUTING"),ef=Symbol("ERRORED"),E2=ne(N({},Jl),{value:Pv,dirty:!0,error:null,equal:MS,producerMustRecompute(n){return n.value===Pv||n.value===Ov},producerRecomputeValue(n){if(n.value===Ov)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Ov;let t=tf(n),r;try{r=n.computation()}catch(i){r=ef,n.error=i}finally{Lv(n,t)}if(e!==Pv&&e!==ef&&r!==ef&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function I2(){throw new Error}var $S=I2;function BS(){$S()}function qS(n){$S=n}var T2=null;function zS(n){let e=Object.create(GS);e.value=n;let t=()=>(Fv(e),e.value);return t[ni]=e,t}function Uv(n,e){FS()||BS(),n.equal(n.value,e)||(n.value=e,C2(n))}function HS(n,e){FS()||BS(),Uv(n,e(n.value))}var GS=ne(N({},Jl),{equal:MS,value:void 0});function C2(n){n.version++,w2(),OS(n),T2?.()}function pe(n){return typeof n=="function"}function pa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var sf=pa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var dt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(s){e=s instanceof sf?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{WS(s)}catch(o){e=e??[],o instanceof sf?e=[...e,...o.errors]:e.push(o)}}if(e)throw new sf(e)}}add(e){var t;if(e&&e!==this)if(this.closed)WS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qs(t,e)}remove(e){let{_finalizers:t}=this;t&&Qs(t,e),e instanceof n&&e._removeParent(this)}};dt.EMPTY=(()=>{let n=new dt;return n.closed=!0,n})();var $v=dt.EMPTY;function of(n){return n instanceof dt||n&&"closed"in n&&pe(n.remove)&&pe(n.add)&&pe(n.unsubscribe)}function WS(n){pe(n)?n():n.unsubscribe()}var ur={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ga={setTimeout(n,e,...t){let{delegate:r}=ga;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ga;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function af(n){ga.setTimeout(()=>{let{onUnhandledError:e}=ur;if(e)e(n);else throw n})}function Xl(){}var KS=Bv("C",void 0,void 0);function QS(n){return Bv("E",void 0,n)}function YS(n){return Bv("N",n,void 0)}function Bv(n,e,t){return{kind:n,value:e,error:t}}var Ys=null;function ma(n){if(ur.useDeprecatedSynchronousErrorHandling){let e=!Ys;if(e&&(Ys={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ys;if(Ys=null,t)throw r}}else n()}function ZS(n){ur.useDeprecatedSynchronousErrorHandling&&Ys&&(Ys.errorThrown=!0,Ys.error=n)}var Zs=class extends dt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,of(e)&&e.add(this)):this.destination=A2}static create(e,t,r){return new ri(e,t,r)}next(e){this.isStopped?zv(YS(e),this):this._next(e)}error(e){this.isStopped?zv(QS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?zv(KS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},D2=Function.prototype.bind;function qv(n,e){return D2.call(n,e)}var Hv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){cf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){cf(r)}else cf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){cf(t)}}},ri=class extends Zs{constructor(e,t,r){super();let i;if(pe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ur.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&qv(e.next,s),error:e.error&&qv(e.error,s),complete:e.complete&&qv(e.complete,s)}):i=e}this.destination=new Hv(i)}};function cf(n){ur.useDeprecatedSynchronousErrorHandling?ZS(n):af(n)}function S2(n){throw n}function zv(n,e){let{onStoppedNotification:t}=ur;t&&ga.setTimeout(()=>t(n,e))}var A2={closed:!0,next:Xl,error:S2,complete:Xl};var ya=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fn(n){return n}function Gv(...n){return Wv(n)}function Wv(n){return n.length===0?fn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=k2(t)?t:new ri(t,r,i);return ma(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=JS(r),new r((i,s)=>{let o=new ri({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ya](){return this}pipe(...t){return Wv(t)(this)}toPromise(t){return t=JS(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function JS(n){var e;return(e=n??ur.Promise)!==null&&e!==void 0?e:Promise}function x2(n){return n&&pe(n.next)&&pe(n.error)&&pe(n.complete)}function k2(n){return n&&n instanceof Zs||x2(n)&&of(n)}function Kv(n){return pe(n?.lift)}function be(n){return e=>{if(Kv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,r,i){return new Qv(n,e,t,r,i)}var Qv=class extends Zs{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function va(){return be((n,e)=>{let t=null;n._refCount++;let r=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _a=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Kv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new dt;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=dt.EMPTY)}return e}refCount(){return va()(this)}};var XS=pa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var He=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new lf(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new XS}next(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ma(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?$v:(this.currentObservers=null,s.push(t),new dt(()=>{this.currentObservers=null,Qs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new lf(e,t),n})(),lf=class extends He{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:$v}};var Ht=class extends He{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var eu={now(){return(eu.delegate||Date).now()},delegate:void 0};var uf=class extends He{constructor(e=1/0,t=1/0,r=eu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var df=class extends dt{constructor(e,t){super()}schedule(e,t=0){return this}};var tu={setInterval(n,e,...t){let{delegate:r}=tu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=tu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var wa=class extends df{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return tu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&tu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ba=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ba.now=eu.now;var Ea=class extends ba{constructor(e,t=ba.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ia=new Ea(wa),Yv=Ia;var hf=class extends wa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ff=class extends Ea{};var Zv=new ff(hf);var pn=new ye(n=>n.complete());function pf(n){return n&&pe(n.schedule)}function Jv(n){return n[n.length-1]}function gf(n){return pe(Jv(n))?n.pop():void 0}function kr(n){return pf(Jv(n))?n.pop():void 0}function eA(n,e){return typeof Jv(n)=="number"?n.pop():e}var mf=n=>n&&typeof n.length=="number"&&typeof n!="function";function yf(n){return pe(n?.then)}function vf(n){return pe(n[ya])}function _f(n){return Symbol.asyncIterator&&pe(n?.[Symbol.asyncIterator])}function wf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function R2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bf=R2();function Ef(n){return pe(n?.[bf])}function If(n){return bS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Qh(t.read());if(i)return yield Qh(void 0);yield yield Qh(r)}}finally{t.releaseLock()}})}function Tf(n){return pe(n?.getReader)}function tt(n){if(n instanceof ye)return n;if(n!=null){if(vf(n))return M2(n);if(mf(n))return N2(n);if(yf(n))return P2(n);if(_f(n))return tA(n);if(Ef(n))return O2(n);if(Tf(n))return F2(n)}throw wf(n)}function M2(n){return new ye(e=>{let t=n[ya]();if(pe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function N2(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function P2(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,af)})}function O2(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function tA(n){return new ye(e=>{L2(n,e).catch(t=>e.error(t))})}function F2(n){return tA(If(n))}function L2(n,e){var t,r,i,s;return wS(this,void 0,void 0,function*(){try{for(t=ES(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Tn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Qn(n,e=0){return be((t,r)=>{t.subscribe(Ee(r,i=>Tn(r,n,()=>r.next(i),e),()=>Tn(r,n,()=>r.complete(),e),i=>Tn(r,n,()=>r.error(i),e)))})}function dr(n,e=0){return be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function nA(n,e){return tt(n).pipe(dr(e),Qn(e))}function rA(n,e){return tt(n).pipe(dr(e),Qn(e))}function iA(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function sA(n,e){return new ye(t=>{let r;return Tn(t,e,()=>{r=n[bf](),Tn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>pe(r?.return)&&r.return()})}function Cf(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{Tn(t,e,()=>{let r=n[Symbol.asyncIterator]();Tn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function oA(n,e){return Cf(If(n),e)}function aA(n,e){if(n!=null){if(vf(n))return nA(n,e);if(mf(n))return iA(n,e);if(yf(n))return rA(n,e);if(_f(n))return Cf(n,e);if(Ef(n))return sA(n,e);if(Tf(n))return oA(n,e)}throw wf(n)}function Me(n,e){return e?aA(n,e):tt(n)}function ce(...n){let e=kr(n);return Me(n,e)}function Ta(n,e){let t=pe(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function Xv(n){return!!n&&(n instanceof ye||pe(n.lift)&&pe(n.subscribe))}var ii=pa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function cA(n){return n instanceof Date&&!isNaN(n)}function ae(n,e){return be((t,r)=>{let i=0;t.subscribe(Ee(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:V2}=Array;function j2(n,e){return V2(e)?n(...e):n(e)}function Df(n){return ae(e=>j2(n,e))}var{isArray:U2}=Array,{getPrototypeOf:$2,prototype:B2,keys:q2}=Object;function Sf(n){if(n.length===1){let e=n[0];if(U2(e))return{args:e,keys:null};if(z2(e)){let t=q2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function z2(n){return n&&typeof n=="object"&&$2(n)===B2}function Af(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function nu(...n){let e=kr(n),t=gf(n),{args:r,keys:i}=Sf(n);if(r.length===0)return Me([],e);let s=new ye(H2(r,e,i?o=>Af(i,o):fn));return t?s.pipe(Df(t)):s}function H2(n,e,t=fn){return r=>{lA(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)lA(e,()=>{let l=Me(n[c],e),d=!1;l.subscribe(Ee(r,h=>{s[c]=h,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function lA(n,e,t){n?Tn(t,n,e):e()}function uA(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,h=!1,p=()=>{h&&!c.length&&!l&&e.complete()},m=b=>l<r?_(b):c.push(b),_=b=>{s&&e.next(b),l++;let E=!1;tt(t(b,d++)).subscribe(Ee(e,k=>{i?.(k),s?m(k):e.next(k)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let k=c.shift();o?Tn(e,o,()=>_(k)):_(k)}p()}catch(k){e.error(k)}}))};return n.subscribe(Ee(e,m,()=>{h=!0,p()})),()=>{a?.()}}function bt(n,e,t=1/0){return pe(e)?bt((r,i)=>ae((s,o)=>e(r,s,i,o))(tt(n(r,i))),t):(typeof e=="number"&&(t=e),be((r,i)=>uA(r,i,n,t)))}function zi(n=1/0){return bt(fn,n)}function dA(){return zi(1)}function Ca(...n){return dA()(Me(n,kr(n)))}function xf(n){return new ye(e=>{tt(n()).subscribe(e)})}function e_(...n){let e=gf(n),{args:t,keys:r}=Sf(n),i=new ye(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let h=!1;tt(t[d]).subscribe(Ee(s,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(r?Af(r,a):a),s.complete())}))}});return e?i.pipe(Df(e)):i}function t_(n=0,e,t=Yv){let r=-1;return e!=null&&(pf(e)?t=e:r=e),new ye(i=>{let s=cA(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function ru(...n){let e=kr(n),t=eA(n,1/0),r=n;return r.length?r.length===1?tt(r[0]):zi(t)(Me(r,e)):pn}function Nt(n,e){return be((t,r)=>{let i=0;t.subscribe(Ee(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Hi(n){return be((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ee(t,void 0,void 0,o=>{s=tt(n(o,Hi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function hA(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Ee(o,d=>{let h=l++;c=a?n(c,d,h):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function si(n,e){return pe(e)?bt(n,e,1):bt(n,1)}function Gi(n){return be((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function oi(n){return n<=0?()=>pn:be((e,t)=>{let r=0;e.subscribe(Ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function iu(n){return ae(()=>n)}function su(n,e=fn){return n=n??G2,be((t,r)=>{let i,s=!0;t.subscribe(Ee(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function G2(n,e){return n===e}function kf(n=W2){return be((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function W2(){return new ii}function Js(n){return be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Un(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Nt((i,s)=>n(i,s,r)):fn,oi(1),t?Gi(e):kf(()=>new ii))}function Da(n){return n<=0?()=>pn:be((e,t)=>{let r=[];e.subscribe(Ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function n_(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Nt((i,s)=>n(i,s,r)):fn,Da(1),t?Gi(e):kf(()=>new ii))}function ou(){return be((n,e)=>{let t,r=!1;n.subscribe(Ee(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Xs(n,e){return be(hA(n,e,arguments.length>=2,!0))}function fA(n={}){let{connector:e=()=>new He,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,d=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=c=void 0,d=h=!1},_=()=>{let b=o;m(),b?.unsubscribe()};return be((b,E)=>{l++,!h&&!d&&p();let k=c=c??e();E.add(()=>{l--,l===0&&!h&&!d&&(a=r_(_,i))}),k.subscribe(E),!o&&l>0&&(o=new ri({next:L=>k.next(L),error:L=>{h=!0,p(),a=r_(m,t,L),k.error(L)},complete:()=>{d=!0,p(),a=r_(m,r),k.complete()}}),tt(b).subscribe(o))})(s)}}function r_(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new ri({next:()=>{r.unsubscribe(),n()}});return tt(e(...t)).subscribe(r)}function Sa(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,fA({connector:()=>new uf(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function ai(...n){let e=kr(n);return be((t,r)=>{(e?Ca(n,t,e):Ca(n,t)).subscribe(r)})}function Je(n,e){return be((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ee(r,c=>{i?.unsubscribe();let l=0,d=s++;tt(n(c,d)).subscribe(i=Ee(r,h=>r.next(e?e(c,h,d,l++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Rf(n,e){return pe(e)?Je(()=>n,e):Je(()=>n)}function au(n){return be((e,t)=>{tt(n).subscribe(Ee(t,()=>t.complete(),Xl)),!t.closed&&e.subscribe(t)})}function Et(n,e,t){let r=pe(n)||e||t?{next:n,error:e,complete:t}:n;return r?be((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ee(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):fn}var nx="https://g.co/ng/security#xss",re=class extends Error{constructor(e,t){super(yp(e,t)),this.code=e}};function yp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function _u(n){return{toString:n}.toString()}var Mf="__parameters__";function K2(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function rx(n,e,t){return _u(()=>{let r=K2(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let h=c.hasOwnProperty(Mf)?c[Mf]:Object.defineProperty(c,Mf,{value:[]})[Mf];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Gt=globalThis;function Ye(n){for(let e in n)if(n[e]===Ye)return e;throw Error("Could not find renamed property on target object.")}function Q2(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function mn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(mn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function v_(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var Y2=Ye({__forward_ref__:Ye});function ts(n){return n.__forward_ref__=ts,n.toString=function(){return mn(this())},n}function gn(n){return ix(n)?n():n}function ix(n){return typeof n=="function"&&n.hasOwnProperty(Y2)&&n.__forward_ref__===ts}function Y(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ot(n){return{providers:n.providers||[],imports:n.imports||[]}}function vp(n){return pA(n,ox)||pA(n,ax)}function sx(n){return vp(n)!==null}function pA(n,e){return n.hasOwnProperty(e)?n[e]:null}function Z2(n){let e=n&&(n[ox]||n[ax]);return e||null}function gA(n){return n&&(n.hasOwnProperty(mA)||n.hasOwnProperty(J2))?n[mA]:null}var ox=Ye({\u0275prov:Ye}),mA=Ye({\u0275inj:Ye}),ax=Ye({ngInjectableDef:Ye}),J2=Ye({ngInjectorDef:Ye}),J=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Y({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cx(n){return n&&!!n.\u0275providers}var X2=Ye({\u0275cmp:Ye}),eU=Ye({\u0275dir:Ye}),tU=Ye({\u0275pipe:Ye}),nU=Ye({\u0275mod:Ye}),Hf=Ye({\u0275fac:Ye}),lu=Ye({__NG_ELEMENT_ID__:Ye}),yA=Ye({__NG_ENV_ID__:Ye});function du(n){return typeof n=="string"?n:n==null?"":String(n)}function rU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():du(n)}function iU(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new re(-200,n)}function Dw(n,e){throw new re(-201,!1)}var De=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(De||{}),__;function lx(){return __}function Cn(n){let e=__;return __=n,e}function ux(n,e,t){let r=vp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&De.Optional)return null;if(e!==void 0)return e;Dw(n,"Injector")}var sU={},hu=sU,w_="__NG_DI_FLAG__",Gf="ngTempTokenPath",oU="ngTokenPath",aU=/\n/gm,cU="\u0275",vA="__source",Ma;function lU(){return Ma}function Wi(n){let e=Ma;return Ma=n,e}function uU(n,e=De.Default){if(Ma===void 0)throw new re(-203,!1);return Ma===null?ux(n,void 0,e):Ma.get(n,e&De.Optional?null:void 0,e)}function q(n,e=De.Default){return(lx()||uU)(gn(n),e)}function G(n,e=De.Default){return q(n,_p(e))}function _p(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function b_(n){let e=[];for(let t=0;t<n.length;t++){let r=gn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new re(900,!1);let i,s=De.Default;for(let o=0;o<r.length;o++){let a=r[o],c=dU(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(q(i,s))}else e.push(q(r))}return e}function dx(n,e){return n[w_]=e,n.prototype[w_]=e,n}function dU(n){return n[w_]}function hU(n,e,t,r){let i=n[Gf];throw e[vA]&&i.unshift(e[vA]),n.message=fU(`
`+n.message,i,t,r),n[oU]=i,n[Gf]=null,n}function fU(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==cU?n.slice(2):n;let i=mn(e);if(Array.isArray(e))i=e.map(mn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):mn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(aU,`
  `)}`}var Ga=dx(rx("Optional"),8);var wp=dx(rx("SkipSelf"),4);function io(n,e){let t=n.hasOwnProperty(Hf);return t?n[Hf]:null}function pU(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function gU(n){return n.flat(Number.POSITIVE_INFINITY)}function Sw(n,e){n.forEach(t=>Array.isArray(t)?Sw(t,e):e(t))}function hx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Wf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function mU(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function yU(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function bp(n,e,t){let r=wu(n,e);return r>=0?n[r|1]=t:(r=~r,yU(n,r,e,t)),r}function i_(n,e){let t=wu(n,e);if(t>=0)return n[t|1]}function wu(n,e){return vU(n,e,1)}function vU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Pa={},Dn=[],Oa=new J(""),fx=new J("",-1),px=new J(""),Kf=class{get(e,t=hu){if(t===hu){let r=new Error(`NullInjectorError: No provider for ${mn(e)}!`);throw r.name="NullInjectorError",r}return t}},gx=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(gx||{}),Nr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Nr||{}),Yi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Yi||{});function _U(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function E_(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];bU(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function wU(n){return n===3||n===4||n===6}function bU(n){return n.charCodeAt(0)===64}function fu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?_A(n,t,i,null,e[++r]):_A(n,t,i,null,null))}}return n}function _A(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var mx="ng-template";function EU(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&_U(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Aw(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Aw(n){return n.type===4&&n.value!==mx}function IU(n,e,t){let r=n.type===4&&!t?mx:n.value;return e===r}function TU(n,e,t){let r=4,i=n.attrs,s=i!==null?SU(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!hr(r)&&!hr(c))return!1;if(o&&hr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!IU(n,c,t)||c===""&&e.length===1){if(hr(r))return!1;o=!0}}else if(r&8){if(i===null||!EU(n,i,c,t)){if(hr(r))return!1;o=!0}}else{let l=e[++a],d=CU(c,i,Aw(n),t);if(d===-1){if(hr(r))return!1;o=!0;continue}if(l!==""){let h;if(d>s?h="":h=i[d+1].toLowerCase(),r&2&&l!==h){if(hr(r))return!1;o=!0}}}}return hr(r)||o}function hr(n){return(n&1)===0}function CU(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return AU(e,n)}function yx(n,e,t=!1){for(let r=0;r<e.length;r++)if(TU(n,e[r],t))return!0;return!1}function DU(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function SU(n){for(let e=0;e<n.length;e++){let t=n[e];if(wU(t))return e}return n.length}function AU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function xU(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function wA(n,e){return n?":not("+e.trim()+")":e}function kU(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!hr(o)&&(e+=wA(s,i),i=""),r=o,s=s||!hr(r);t++}return i!==""&&(e+=wA(s,i)),e}function RU(n){return n.map(kU).join(",")}function MU(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!hr(i))break;i=s}r++}return{attrs:e,classes:t}}function xe(n){return _u(()=>{let e=Ex(n),t=ne(N({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Nr.Emulated,styles:n.styles||Dn,_:null,schemas:n.schemas||null,tView:null,id:""});Ix(t);let r=n.dependencies;return t.directiveDefs=Qf(r,!1),t.pipeDefs=Qf(r,!0),t.id=OU(t),t})}function NU(n){return Zi(n)||vx(n)}function PU(n){return n!==null}function Ft(n){return _u(()=>({type:n.type,bootstrap:n.bootstrap||Dn,declarations:n.declarations||Dn,imports:n.imports||Dn,exports:n.exports||Dn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function bA(n,e){if(n==null)return Pa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Yi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Yi.None?[r,a]:r,e[s]=o):t[s]=r}return t}function It(n){return _u(()=>{let e=Ex(n);return Ix(e),e})}function ns(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Zi(n){return n[X2]||null}function vx(n){return n[eU]||null}function _x(n){return n[tU]||null}function wx(n){let e=Zi(n)||vx(n)||_x(n);return e!==null?e.standalone:!1}function bx(n,e){let t=n[nU]||null;if(!t&&e===!0)throw new Error(`Type ${mn(n)} does not have '\u0275mod' property.`);return t}function Ex(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Pa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Dn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:bA(n.inputs,e),outputs:bA(n.outputs),debugInfo:null}}function Ix(n){n.features?.forEach(e=>e(n))}function Qf(n,e){if(!n)return null;let t=e?_x:NU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(PU)}function OU(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ep(n){return{\u0275providers:n}}function FU(...n){return{\u0275providers:Tx(!0,n),\u0275fromNgModule:!0}}function Tx(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Sw(e,o=>{let a=o;I_(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Cx(i,s),t}function Cx(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];xw(i,s=>{e(s,r)})}}function I_(n,e,t,r){if(n=gn(n),!n)return!1;let i=null,s=gA(n),o=!s&&Zi(n);if(!s&&!o){let c=n.ngModule;if(s=gA(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)I_(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Sw(s.imports,d=>{I_(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Cx(l,e)}if(!a){let l=io(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dn},i),e({provide:px,useValue:i,multi:!0},i),e({provide:Oa,useValue:()=>q(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;xw(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function xw(n,e){for(let t of n)cx(t)&&(t=t.\u0275providers),Array.isArray(t)?xw(t,e):e(t)}var LU=Ye({provide:String,useValue:Ye});function Dx(n){return n!==null&&typeof n=="object"&&LU in n}function VU(n){return!!(n&&n.useExisting)}function jU(n){return!!(n&&n.useFactory)}function Fa(n){return typeof n=="function"}function UU(n){return!!n.useClass}var Ip=new J(""),Uf={},$U={},s_;function kw(){return s_===void 0&&(s_=new Kf),s_}var yn=class{},pu=class extends yn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,C_(e,o=>this.processProvider(o)),this.records.set(fx,Aa(void 0,this)),i.has("environment")&&this.records.set(yn,Aa(void 0,this));let s=this.records.get(Ip);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(px,Dn,De.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Le(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Le(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Wi(this),r=Cn(void 0),i;try{return e()}finally{Wi(t),Cn(r)}}get(e,t=hu,r=De.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(yA))return e[yA](this);r=_p(r);let i,s=Wi(this),o=Cn(void 0);try{if(!(r&De.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=GU(e)&&vp(e);l&&this.injectableDefInScope(l)?c=Aa(T_(e),Uf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&De.Self?kw():this.parent;return t=r&De.Optional&&t===hu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Gf]=a[Gf]||[]).unshift(mn(e)),s)throw a;return hU(a,e,"R3InjectorError",this.source)}else throw a}finally{Cn(o),Wi(s)}}resolveInjectorInitializers(){let e=Le(null),t=Wi(this),r=Cn(void 0),i;try{let s=this.get(Oa,Dn,De.Self);for(let o of s)o()}finally{Wi(t),Cn(r),Le(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(mn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new re(205,!1)}processProvider(e){e=gn(e);let t=Fa(e)?e:gn(e&&e.provide),r=qU(e);if(!Fa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Aa(void 0,Uf,!0),i.factory=()=>b_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Le(null);try{return t.value===Uf&&(t.value=$U,t.value=t.factory()),typeof t.value=="object"&&t.value&&HU(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Le(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=gn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function T_(n){let e=vp(n),t=e!==null?e.factory:io(n);if(t!==null)return t;if(n instanceof J)throw new re(204,!1);if(n instanceof Function)return BU(n);throw new re(204,!1)}function BU(n){if(n.length>0)throw new re(204,!1);let t=Z2(n);return t!==null?()=>t.factory(n):()=>new n}function qU(n){if(Dx(n))return Aa(void 0,n.useValue);{let e=Sx(n);return Aa(e,Uf)}}function Sx(n,e,t){let r;if(Fa(n)){let i=gn(n);return io(i)||T_(i)}else if(Dx(n))r=()=>gn(n.useValue);else if(jU(n))r=()=>n.useFactory(...b_(n.deps||[]));else if(VU(n))r=()=>q(gn(n.useExisting));else{let i=gn(n&&(n.useClass||n.provide));if(zU(n))r=()=>new i(...b_(n.deps));else return io(i)||T_(i)}return r}function Aa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function zU(n){return!!n.deps}function HU(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function GU(n){return typeof n=="function"||typeof n=="object"&&n instanceof J}function C_(n,e){for(let t of n)Array.isArray(t)?C_(t,e):t&&cx(t)?C_(t.\u0275providers,e):e(t)}function Jn(n,e){n instanceof pu&&n.assertNotDestroyed();let t,r=Wi(n),i=Cn(void 0);try{return e()}finally{Wi(r),Cn(i)}}function Ax(){return lx()!==void 0||lU()!=null}function WU(n){if(!Ax())throw new re(-203,!1)}function KU(n){let e=Gt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function QU(n){return typeof n=="function"}var hi=0,_e=1,he=2,nn=3,fr=4,Sn=5,gu=6,Yf=7,pr=8,La=9,Pr=10,ht=11,mu=12,EA=13,Wa=14,Zn=15,so=16,xa=17,ci=18,Tp=19,xx=20,Ki=21,o_=22,Yn=23,rn=25,kx=1;var oo=7,Zf=8,Va=9,$n=10,Jf=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Jf||{});function Qi(n){return Array.isArray(n)&&typeof n[kx]=="object"}function fi(n){return Array.isArray(n)&&n[kx]===!0}function Rw(n){return(n.flags&4)!==0}function Cp(n){return n.componentOffset>-1}function Dp(n){return(n.flags&1)===1}function Ji(n){return!!n.template}function D_(n){return(n[he]&512)!==0}var S_=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Rx(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function rs(){return Mx}function Mx(n){return n.type.prototype.ngOnChanges&&(n.setInput=ZU),YU}rs.ngInherit=!0;function YU(){let n=Px(this),e=n?.current;if(e){let t=n.previous;if(t===Pa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ZU(n,e,t,r,i){let s=this.declaredInputs[r],o=Px(n)||JU(n,{previous:Pa,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new S_(l&&l.currentValue,t,c===Pa),Rx(n,e,i,t)}var Nx="__ngSimpleChanges__";function Px(n){return n[Nx]||null}function JU(n,e){return n[Nx]=e}var IA=null;var Rr=function(n,e,t){IA?.(n,e,t)},XU="svg",e$="math";function Or(n){for(;Array.isArray(n);)n=n[hi];return n}function Ox(n,e){return Or(e[n])}function gr(n,e){return Or(e[n.index])}function Fx(n,e){return n.data[e]}function Sp(n,e){return n[e]}function is(n,e){let t=e[n];return Qi(t)?t:t[hi]}function t$(n){return(n[he]&4)===4}function Mw(n){return(n[he]&128)===128}function n$(n){return fi(n[nn])}function ja(n,e){return e==null?null:n[e]}function Lx(n){n[xa]=0}function Vx(n){n[he]&1024||(n[he]|=1024,Mw(n)&&xp(n))}function r$(n,e){for(;n>0;)e=e[Wa],n--;return e}function Ap(n){return!!(n[he]&9216||n[Yn]?.dirty)}function A_(n){n[Pr].changeDetectionScheduler?.notify(8),n[he]&64&&(n[he]|=1024),Ap(n)&&xp(n)}function xp(n){n[Pr].changeDetectionScheduler?.notify(0);let e=ao(n);for(;e!==null&&!(e[he]&8192||(e[he]|=8192,!Mw(e)));)e=ao(e)}function jx(n,e){if((n[he]&256)===256)throw new re(911,!1);n[Ki]===null&&(n[Ki]=[]),n[Ki].push(e)}function i$(n,e){if(n[Ki]===null)return;let t=n[Ki].indexOf(e);t!==-1&&n[Ki].splice(t,1)}function ao(n){let e=n[nn];return fi(e)?e[nn]:e}var Te={lFrame:Kx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ux=!1;function s$(){return Te.lFrame.elementDepthCount}function o$(){Te.lFrame.elementDepthCount++}function a$(){Te.lFrame.elementDepthCount--}function $x(){return Te.bindingsEnabled}function Bx(){return Te.skipHydrationRootTNode!==null}function c$(n){return Te.skipHydrationRootTNode===n}function l$(){Te.skipHydrationRootTNode=null}function Ce(){return Te.lFrame.lView}function Tt(){return Te.lFrame.tView}function Ue(n){return Te.lFrame.contextLView=n,n[pr]}function $e(n){return Te.lFrame.contextLView=null,n}function vn(){let n=qx();for(;n!==null&&n.type===64;)n=n.parent;return n}function qx(){return Te.lFrame.currentTNode}function u$(){let n=Te.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function go(n,e){let t=Te.lFrame;t.currentTNode=n,t.isParent=e}function Nw(){return Te.lFrame.isParent}function Pw(){Te.lFrame.isParent=!1}function d$(){return Te.lFrame.contextLView}function zx(){return Ux}function TA(n){Ux=n}function bu(){let n=Te.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function h$(){return Te.lFrame.bindingIndex}function f$(n){return Te.lFrame.bindingIndex=n}function Ow(){return Te.lFrame.bindingIndex++}function Fw(n){let e=Te.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function p$(){return Te.lFrame.inI18n}function g$(n,e){let t=Te.lFrame;t.bindingIndex=t.bindingRootIndex=n,x_(e)}function m$(){return Te.lFrame.currentDirectiveIndex}function x_(n){Te.lFrame.currentDirectiveIndex=n}function y$(n){let e=Te.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Hx(){return Te.lFrame.currentQueryIndex}function Lw(n){Te.lFrame.currentQueryIndex=n}function v$(n){let e=n[_e];return e.type===2?e.declTNode:e.type===1?n[Sn]:null}function Gx(n,e,t){if(t&De.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&De.Host);)if(i=v$(s),i===null||(s=s[Wa],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Te.lFrame=Wx();return r.currentTNode=e,r.lView=n,!0}function Vw(n){let e=Wx(),t=n[_e];Te.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Wx(){let n=Te.lFrame,e=n===null?null:n.child;return e===null?Kx(n):e}function Kx(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Qx(){let n=Te.lFrame;return Te.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Yx=Qx;function jw(){let n=Qx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _$(n){return(Te.lFrame.contextLView=r$(n,Te.lFrame.contextLView))[pr]}function ss(){return Te.lFrame.selectedIndex}function co(n){Te.lFrame.selectedIndex=n}function Uw(){let n=Te.lFrame;return Fx(n.tView,n.selectedIndex)}function w$(){return Te.lFrame.currentNamespace}var Zx=!0;function kp(){return Zx}function Rp(n){Zx=n}function b$(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Mx(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Mp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function $f(n,e,t){Jx(n,e,3,t)}function Bf(n,e,t,r){(n[he]&3)===t&&Jx(n,e,t,r)}function a_(n,e){let t=n[he];(t&3)===e&&(t&=16383,t+=1,n[he]=t)}function Jx(n,e,t,r){let i=r!==void 0?n[xa]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[xa]+=65536),(a<s||s==-1)&&(E$(n,t,e,c),n[xa]=(n[xa]&4294901760)+c+2),c++}function CA(n,e){Rr(4,n,e);let t=Le(null);try{e.call(n)}finally{Le(t),Rr(5,n,e)}}function E$(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[he]>>14<n[xa]>>16&&(n[he]&3)===e&&(n[he]+=16384,CA(a,s)):CA(a,s)}var Na=-1,lo=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function I$(n){return n instanceof lo}function T$(n){return(n.flags&8)!==0}function C$(n){return(n.flags&16)!==0}var c_={},k_=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=_p(r);let i=this.injector.get(e,c_,r);return i!==c_||t===c_?i:this.parentInjector.get(e,t,r)}};function Xx(n){return n!==Na}function Xf(n){return n&32767}function D$(n){return n>>16}function ep(n,e){let t=D$(n),r=e;for(;t>0;)r=r[Wa],t--;return r}var R_=!0;function tp(n){let e=R_;return R_=n,e}var S$=256,ek=S$-1,tk=5,A$=0,Mr={};function x$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(lu)&&(r=t[lu]),r==null&&(r=t[lu]=A$++);let i=r&ek,s=1<<i;e.data[n+(i>>tk)]|=s}function np(n,e){let t=nk(n,e);if(t!==-1)return t;let r=e[_e];r.firstCreatePass&&(n.injectorIndex=e.length,l_(r.data,n),l_(e,null),l_(r.blueprint,null));let i=$w(n,e),s=n.injectorIndex;if(Xx(i)){let o=Xf(i),a=ep(i,e),c=a[_e].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function l_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function nk(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function $w(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ak(i),r===null)return Na;if(t++,i=i[Wa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Na}function M_(n,e,t){x$(n,e,t)}function rk(n,e,t){if(t&De.Optional||n!==void 0)return n;Dw(e,"NodeInjector")}function ik(n,e,t,r){if(t&De.Optional&&r===void 0&&(r=null),!(t&(De.Self|De.Host))){let i=n[La],s=Cn(void 0);try{return i?i.get(e,r,t&De.Optional):ux(e,r,t&De.Optional)}finally{Cn(s)}}return rk(r,e,t)}function sk(n,e,t,r=De.Default,i){if(n!==null){if(e[he]&2048&&!(r&De.Self)){let o=N$(n,e,t,r,Mr);if(o!==Mr)return o}let s=ok(n,e,t,r,Mr);if(s!==Mr)return s}return ik(e,t,r,i)}function ok(n,e,t,r,i){let s=R$(t);if(typeof s=="function"){if(!Gx(e,n,r))return r&De.Host?rk(i,t,r):ik(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&De.Optional))Dw(t);else return o}finally{Yx()}}else if(typeof s=="number"){let o=null,a=nk(n,e),c=Na,l=r&De.Host?e[Zn][Sn]:null;for((a===-1||r&De.SkipSelf)&&(c=a===-1?$w(n,e):e[a+8],c===Na||!SA(r,!1)?a=-1:(o=e[_e],a=Xf(c),e=ep(c,e)));a!==-1;){let d=e[_e];if(DA(s,a,d.data)){let h=k$(a,e,t,o,r,l);if(h!==Mr)return h}c=e[a+8],c!==Na&&SA(r,e[_e].data[a+8]===l)&&DA(s,a,e)?(o=d,a=Xf(c),e=ep(c,e)):a=-1}}return i}function k$(n,e,t,r,i,s){let o=e[_e],a=o.data[n+8],c=r==null?Cp(a)&&R_:r!=o&&(a.type&3)!==0,l=i&De.Host&&s===a,d=qf(a,o,t,c,l);return d!==null?uo(e,o,d,a):Mr}function qf(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,h=r?a:a+d,p=i?a+d:l;for(let m=h;m<p;m++){let _=o[m];if(m<c&&t===_||m>=c&&_.type===t)return m}if(i){let m=o[c];if(m&&Ji(m)&&m.type===t)return c}return null}function uo(n,e,t,r){let i=n[t],s=e.data;if(I$(i)){let o=i;o.resolving&&iU(rU(s[t]));let a=tp(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Cn(o.injectImpl):null,d=Gx(n,r,De.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&b$(t,s[t],e)}finally{l!==null&&Cn(l),tp(a),o.resolving=!1,Yx()}}return i}function R$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(lu)?n[lu]:void 0;return typeof e=="number"?e>=0?e&ek:M$:e}function DA(n,e,t){let r=1<<n;return!!(t[e+(n>>tk)]&r)}function SA(n,e){return!(n&De.Self)&&!(n&De.Host&&e)}var ro=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return sk(this._tNode,this._lView,e,_p(r),t)}};function M$(){return new ro(vn(),Ce())}function mo(n){return _u(()=>{let e=n.prototype.constructor,t=e[Hf]||N_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Hf]||N_(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function N_(n){return ix(n)?()=>{let e=N_(gn(n));return e&&e()}:io(n)}function N$(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[he]&2048&&!(o[he]&512);){let a=ok(s,o,t,r|De.Self,Mr);if(a!==Mr)return a;let c=s.parent;if(!c){let l=o[xx];if(l){let d=l.get(t,Mr,r);if(d!==Mr)return d}c=ak(o),o=o[Wa]}s=c}return i}function ak(n){let e=n[_e],t=e.type;return t===2?e.declTNode:t===1?n[Sn]:null}function AA(n,e=null,t=null,r){let i=ck(n,e,t,r);return i.resolveInjectorInitializers(),i}function ck(n,e=null,t=null,r,i=new Set){let s=[t||Dn,FU(n)];return r=r||(typeof n=="object"?void 0:mn(n)),new pu(s,e||kw(),r||null,i)}var to=class to{static create(e,t){if(Array.isArray(e))return AA({name:""},t,e,"");{let r=e.name??"";return AA({name:r},e.parent,e.providers,r)}}};to.THROW_IF_NOT_FOUND=hu,to.NULL=new Kf,to.\u0275prov=Y({token:to,providedIn:"any",factory:()=>q(fx)}),to.__NG_ELEMENT_ID__=-1;var Bn=to;var P$=new J("");P$.__NG_ELEMENT_ID__=n=>{let e=vn();if(e===null)throw new re(204,!1);if(e.type&2)return e.value;if(n&De.Optional)return null;throw new re(204,!1)};var O$="ngOriginalError";function u_(n){return n[O$]}var lk=!0,Bw=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=F$,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),P_=class extends Bw{constructor(e){super(),this._lView=e}onDestroy(e){return jx(this._lView,e),()=>i$(this._lView,e)}};function F$(){return new P_(Ce())}var os=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ht(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var O_=class extends He{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Ax()&&(this.destroyRef=G(Bw,{optional:!0})??void 0,this.pendingTasks=G(os,{optional:!0})??void 0)}emit(e){let t=Le(null);try{super.next(e)}finally{Le(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof dt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=O_;function rp(...n){}function uk(n){let e,t;function r(){n=rp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function xA(n){return queueMicrotask(()=>n()),()=>{n=rp}}var qw="isAngularZone",ip=qw+"_ID",L$=0,Ie=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=lk}=e;if(typeof Zone>"u")throw new re(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,U$(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(qw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new re(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new re(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,V$,rp,rp);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},V$={};function zw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function j$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uk(()=>{n.callbackScheduled=!1,F_(n),n.isCheckStableRunning=!0,zw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),F_(n)}function U$(n){let e=()=>{j$(n)},t=L$++;n._inner=n._inner.fork({name:"angular",properties:{[qw]:!0,[ip]:t,[ip+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if($$(c))return r.invokeTask(s,o,a,c);try{return kA(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),RA(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return kA(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!B$(c)&&e(),RA(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,F_(n),zw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function F_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function kA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function RA(n){n._nesting--,zw(n)}var sp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function $$(n){return dk(n,"__ignore_ng_zone__")}function B$(n){return dk(n,"__scheduler_tick__")}function dk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function q$(n="zone.js",e){return n==="noop"?new sp:n==="zone.js"?new Ie(e):n}var li=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&u_(e);for(;t&&u_(t);)t=u_(t);return t||null}},z$=new J("",{providedIn:"root",factory:()=>{let n=G(Ie),e=G(li);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function H$(){return Ka(vn(),Ce())}function Ka(n,e){return new Ct(gr(n,e))}var Ct=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=H$;let n=e;return n})();function G$(n){return n instanceof Ct?n.nativeElement:n}function W$(){return this._results[Symbol.iterator]()}var L_=class n{get changes(){return this._changes??=new nt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=W$)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=gU(e);(this._changesDetected=!pU(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function hk(n){return(n.flags&128)===128}var fk=new Map,K$=0;function Q$(){return K$++}function Y$(n){fk.set(n[Tp],n)}function V_(n){fk.delete(n[Tp])}var MA="__ngContext__";function Xi(n,e){Qi(e)?(n[MA]=e[Tp],Y$(e)):n[MA]=e}function pk(n){return mk(n[mu])}function gk(n){return mk(n[fr])}function mk(n){for(;n!==null&&!fi(n);)n=n[fr];return n}var j_;function yk(n){j_=n}function Z$(){if(j_!==void 0)return j_;if(typeof document<"u")return document;throw new re(210,!1)}var Np=new J("",{providedIn:"root",factory:()=>J$}),J$="ng",Hw=new J(""),Wt=new J("",{providedIn:"platform",factory:()=>"unknown"});var Gw=new J("",{providedIn:"root",factory:()=>Z$().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var X$="h",eB="b";var tB=()=>null;function Ww(n,e,t=!1){return tB(n,e,t)}var vk=!1,nB=new J("",{providedIn:"root",factory:()=>vk});var Nf;function rB(){if(Nf===void 0&&(Nf=null,Gt.trustedTypes))try{Nf=Gt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Nf}function Pp(n){return rB()?.createHTML(n)||n}var Pf;function iB(){if(Pf===void 0&&(Pf=null,Gt.trustedTypes))try{Pf=Gt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Pf}function NA(n){return iB()?.createScriptURL(n)||n}var ui=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nx})`}},U_=class extends ui{getTypeName(){return"HTML"}},$_=class extends ui{getTypeName(){return"Style"}},B_=class extends ui{getTypeName(){return"Script"}},q_=class extends ui{getTypeName(){return"URL"}},z_=class extends ui{getTypeName(){return"ResourceURL"}};function Xn(n){return n instanceof ui?n.changingThisBreaksApplicationSecurity:n}function as(n,e){let t=sB(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${nx})`)}return t===e}function sB(n){return n instanceof ui&&n.getTypeName()||null}function _k(n){return new U_(n)}function wk(n){return new $_(n)}function bk(n){return new B_(n)}function Ek(n){return new q_(n)}function Ik(n){return new z_(n)}function oB(n){let e=new G_(n);return aB()?new H_(e):e}var H_=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Pp(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},G_=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Pp(e),t}};function aB(){try{return!!new window.DOMParser().parseFromString(Pp(""),"text/html")}catch{return!1}}var cB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Op(n){return n=String(n),n.match(cB)?n:"unsafe:"+n}function pi(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Eu(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var Tk=pi("area,br,col,hr,img,wbr"),Ck=pi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dk=pi("rp,rt"),lB=Eu(Dk,Ck),uB=Eu(Ck,pi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),dB=Eu(Dk,pi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),PA=Eu(Tk,uB,dB,lB),Sk=pi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),hB=pi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),fB=pi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),pB=Eu(Sk,hB,fB),gB=pi("script,style,template"),W_=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=vB(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=yB(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=OA(e).toLowerCase();if(!PA.hasOwnProperty(t))return this.sanitizedSomething=!0,!gB.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!pB.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;Sk[a]&&(c=Op(c)),this.buf.push(" ",o,'="',FA(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=OA(e).toLowerCase();PA.hasOwnProperty(t)&&!Tk.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(FA(e))}};function mB(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function yB(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw Ak(e);return e}function vB(n){let e=n.firstChild;if(e&&mB(n,e))throw Ak(e);return e}function OA(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function Ak(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var _B=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wB=/([^\#-~ |!])/g;function FA(n){return n.replace(/&/g,"&amp;").replace(_B,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(wB,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Of;function xk(n,e){let t=null;try{Of=Of||oB(n);let r=e?String(e):"";t=Of.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Of.getInertBodyElement(r)}while(r!==s);let a=new W_().sanitizeChildren(LA(t)||t);return Pp(a)}finally{if(t){let r=LA(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function LA(n){return"content"in n&&bB(n)?n.content:null}function bB(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var An=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(An||{});function ft(n){let e=kk();return e?e.sanitize(An.URL,n)||"":as(n,"URL")?Xn(n):Op(du(n))}function Fp(n){let e=kk();if(e)return NA(e.sanitize(An.RESOURCE_URL,n)||"");if(as(n,"ResourceURL"))return NA(Xn(n));throw new re(904,!1)}function kk(){let n=Ce();return n&&n[Pr].sanitizer}var EB=/^>|^->|<!--|-->|--!>|<!-$/g,IB=/(<|>)/g,TB="\u200B$1\u200B";function CB(n){return n.replace(EB,e=>e.replace(IB,TB))}function Rk(n){return n instanceof Function?n():n}function DB(n){return(n??G(Bn)).get(Wt)==="browser"}var Fr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Fr||{}),SB;function Kw(n,e){return SB(n,e)}function ka(n,e,t,r,i){if(r!=null){let s,o=!1;fi(r)?s=r:Qi(r)&&(o=!0,r=r[hi]);let a=Or(r);n===0&&t!==null?i==null?Lk(e,t,a):op(e,t,a,i||null,!0):n===1&&t!==null?op(e,t,a,i||null,!0):n===2?$B(e,a,o):n===3&&e.destroyNode(a),s!=null&&qB(e,n,s,t,i)}}function AB(n,e){return n.createText(e)}function xB(n,e,t){n.setValue(e,t)}function kB(n,e){return n.createComment(CB(e))}function Mk(n,e,t){return n.createElement(e,t)}function RB(n,e){Nk(n,e),e[hi]=null,e[Sn]=null}function MB(n,e,t,r,i,s){r[hi]=i,r[Sn]=e,Vp(n,r,t,1,i,s)}function Nk(n,e){e[Pr].changeDetectionScheduler?.notify(9),Vp(n,e,e[ht],2,null,null)}function NB(n){let e=n[mu];if(!e)return d_(n[_e],n);for(;e;){let t=null;if(Qi(e))t=e[mu];else{let r=e[$n];r&&(t=r)}if(!t){for(;e&&!e[fr]&&e!==n;)Qi(e)&&d_(e[_e],e),e=e[nn];e===null&&(e=n),Qi(e)&&d_(e[_e],e),t=e&&e[fr]}e=t}}function PB(n,e,t,r){let i=$n+r,s=t.length;r>0&&(t[i-1][fr]=e),r<s-$n?(e[fr]=t[i],hx(t,$n+r,e)):(t.push(e),e[fr]=null),e[nn]=t;let o=e[so];o!==null&&t!==o&&Pk(o,e);let a=e[ci];a!==null&&a.insertView(n),A_(e),e[he]|=128}function Pk(n,e){let t=n[Va],r=e[nn];if(Qi(r))n[he]|=Jf.HasTransplantedViews;else{let i=r[nn][Zn];e[Zn]!==i&&(n[he]|=Jf.HasTransplantedViews)}t===null?n[Va]=[e]:t.push(e)}function Qw(n,e){let t=n[Va],r=t.indexOf(e);t.splice(r,1)}function K_(n,e){if(n.length<=$n)return;let t=$n+e,r=n[t];if(r){let i=r[so];i!==null&&i!==n&&Qw(i,r),e>0&&(n[t-1][fr]=r[fr]);let s=Wf(n,$n+e);RB(r[_e],r);let o=s[ci];o!==null&&o.detachView(s[_e]),r[nn]=null,r[fr]=null,r[he]&=-129}return r}function Ok(n,e){if(!(e[he]&256)){let t=e[ht];t.destroyNode&&Vp(n,e,t,3,null,null),NB(e)}}function d_(n,e){if(e[he]&256)return;let t=Le(null);try{e[he]&=-129,e[he]|=256,e[Yn]&&jv(e[Yn]),FB(n,e),OB(n,e),e[_e].type===1&&e[ht].destroy();let r=e[so];if(r!==null&&fi(e[nn])){r!==e[nn]&&Qw(r,e);let i=e[ci];i!==null&&i.detachView(n)}V_(e)}finally{Le(t)}}function OB(n,e){let t=n.cleanup,r=e[Yf];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Yf]=null);let i=e[Ki];if(i!==null){e[Ki]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function FB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof lo)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Rr(4,a,c);try{c.call(a)}finally{Rr(5,a,c)}}else{Rr(4,i,s);try{s.call(i)}finally{Rr(5,i,s)}}}}}function Fk(n,e,t){return LB(n,e.parent,t)}function LB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[hi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Nr.None||s===Nr.Emulated)return null}return gr(r,t)}}function op(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Lk(n,e,t){n.appendChild(e,t)}function VA(n,e,t,r,i){r!==null?op(n,e,t,r,i):Lk(n,e,t)}function Vk(n,e){return n.parentNode(e)}function VB(n,e){return n.nextSibling(e)}function jk(n,e,t){return UB(n,e,t)}function jB(n,e,t){return n.type&40?gr(n,t):null}var UB=jB,jA;function Lp(n,e,t,r){let i=Fk(n,r,e),s=e[ht],o=r.parent||e[Sn],a=jk(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)VA(s,i,t[c],a,!1);else VA(s,i,t,a,!1);jA!==void 0&&jA(s,r,e,t,i)}function cu(n,e){if(e!==null){let t=e.type;if(t&3)return gr(e,n);if(t&4)return Q_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return cu(n,r);{let i=n[e.index];return fi(i)?Q_(-1,i):Or(i)}}else{if(t&128)return cu(n,e.next);if(t&32)return Kw(e,n)()||Or(n[e.index]);{let r=Uk(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ao(n[Zn]);return cu(i,r)}else return cu(n,e.next)}}}return null}function Uk(n,e){if(e!==null){let r=n[Zn][Sn],i=e.projection;return r.projection[i]}return null}function Q_(n,e){let t=$n+n+1;if(t<e.length){let r=e[t],i=r[_e].firstChild;if(i!==null)return cu(r,i)}return e[oo]}function $B(n,e,t){n.removeChild(null,e,t)}function Yw(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Xi(Or(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Yw(n,e,t.child,r,i,s,!1),ka(e,n,i,a,s);else if(c&32){let l=Kw(t,r),d;for(;d=l();)ka(e,n,i,d,s);ka(e,n,i,a,s)}else c&16?$k(n,e,r,t,i,s):ka(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Vp(n,e,t,r,i,s){Yw(t,r,n.firstChild,e,i,s,!1)}function BB(n,e,t){let r=e[ht],i=Fk(n,t,e),s=t.parent||e[Sn],o=jk(s,t,e);$k(r,0,e,t,i,o)}function $k(n,e,t,r,i,s){let o=t[Zn],c=o[Sn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];ka(e,n,i,d,s)}else{let l=c,d=o[nn];hk(r)&&(l.flags|=128),Yw(n,e,l,d,i,s,!0)}}function qB(n,e,t,r,i){let s=t[oo],o=Or(t);s!==o&&ka(e,n,r,s,i);for(let a=$n;a<t.length;a++){let c=t[a];Vp(c[_e],c,n,e,r,s)}}function zB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Fr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Fr.Important),n.setStyle(t,r,i,s))}}function HB(n,e,t){n.setAttribute(e,"style",t)}function Bk(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function qk(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&E_(n,e,r),i!==null&&Bk(n,e,i),s!==null&&HB(n,e,s)}var er={};function j(n=1){zk(Tt(),Ce(),ss()+n,!1)}function zk(n,e,t,r){if(!r)if((e[he]&3)===3){let s=n.preOrderCheckHooks;s!==null&&$f(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Bf(e,s,0,t)}co(t)}function B(n,e=De.Default){let t=Ce();if(t===null)return q(n,e);let r=vn();return sk(r,t,gn(n),e)}function Hk(){let n="invalid";throw new Error(n)}function Gk(n,e,t,r,i,s){let o=Le(null);try{let a=null;i&Yi.SignalBased&&(a=e[r][ni]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Yi.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):Rx(e,a,r,s)}finally{Le(o)}}function GB(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)co(~i);else{let s=i,o=t[++r],a=t[++r];g$(o,s);let c=e[s];a(2,c)}}}finally{co(-1)}}function jp(n,e,t,r,i,s,o,a,c,l,d){let h=e.blueprint.slice();return h[hi]=i,h[he]=r|4|128|8|64,(l!==null||n&&n[he]&2048)&&(h[he]|=2048),Lx(h),h[nn]=h[Wa]=n,h[pr]=t,h[Pr]=o||n&&n[Pr],h[ht]=a||n&&n[ht],h[La]=c||n&&n[La]||null,h[Sn]=s,h[Tp]=Q$(),h[gu]=d,h[xx]=l,h[Zn]=e.type==2?n[Zn]:h,h}function Qa(n,e,t,r,i){let s=n.data[e];if(s===null)s=WB(n,e,t,r,i),p$()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=u$();s.injectorIndex=o===null?-1:o.injectorIndex}return go(s,!0),s}function WB(n,e,t,r,i){let s=qx(),o=Nw(),a=o?s:s&&s.parent,c=n.data[e]=XB(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Wk(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Kk(n,e,t,r,i){let s=ss(),o=r&2;try{co(-1),o&&e.length>rn&&zk(n,e,rn,!1),Rr(o?2:0,i),t(r,i)}finally{co(s),Rr(o?3:1,i)}}function Zw(n,e,t){if(Rw(e)){let r=Le(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Le(r)}}}function Jw(n,e,t){$x()&&(s4(n,e,t,gr(t,e)),(t.flags&64)===64&&Zk(n,e,t))}function Xw(n,e,t=gr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function Qk(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=e0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function e0(n,e,t,r,i,s,o,a,c,l,d){let h=rn+r,p=h+i,m=KB(h,p),_=typeof l=="function"?l():l;return m[_e]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function KB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:er);return t}function QB(n,e,t,r){let s=r.get(nB,vk)||t===Nr.ShadowDom,o=n.selectRootElement(e,s);return YB(o),o}function YB(n){ZB(n)}var ZB=()=>null;function JB(n,e,t,r){let i=eR(e);i.push(t),n.firstCreatePass&&tR(n).push(r,i.length-1)}function XB(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Bx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function UA(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Yi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?$A(r,t,l,a,c):$A(r,t,l,a)}return r}function $A(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function e4(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let h=s[d],p=t?t.get(h):null,m=p?p.inputs:null,_=p?p.outputs:null;c=UA(0,h.inputs,d,c,m),l=UA(1,h.outputs,d,l,_);let b=c!==null&&o!==null&&!Aw(e)?p4(c,d,o):null;a.push(b)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function t4(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function t0(n,e,t,r,i,s,o,a){let c=gr(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(r0(n,t,d,r,i),Cp(e)&&n4(t,e.index)):e.type&3?(r=t4(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function n4(n,e){let t=is(e,n);t[he]&16||(t[he]|=64)}function n0(n,e,t,r){if($x()){let i=r===null?null:{"":-1},s=a4(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Yk(n,e,t,o,i,a),i&&c4(t,r,i)}t.mergedAttrs=fu(t.mergedAttrs,t.attrs)}function Yk(n,e,t,r,i,s){for(let l=0;l<r.length;l++)M_(np(t,e),n,r[l].type);u4(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=Wk(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=fu(t.mergedAttrs,d.hostAttrs),d4(n,t,e,c,d),l4(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}e4(n,t,s)}function r4(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;i4(o)!=a&&o.push(a),o.push(t,r,s)}}function i4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function s4(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Cp(t)&&h4(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||np(t,e),Xi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=uo(e,n,a,t);if(Xi(l,e),o!==null&&f4(e,a-i,l,c,t,o),Ji(c)){let d=is(t.index,e);d[pr]=uo(e,n,a,t)}}}function Zk(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=m$();try{co(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];x_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&o4(c,l)}}finally{co(-1),x_(o)}}function o4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function a4(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(yx(e,o.selectors,!1))if(r||(r=[]),Ji(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Y_(n,e,c)}else r.unshift(o),Y_(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Y_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function c4(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new re(-301,!1);r.push(e[i],s)}}}function l4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ji(e)&&(t[""]=n)}}function u4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function d4(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=io(i.type,!0)),o=new lo(s,Ji(i),B);n.blueprint[r]=o,t[r]=o,r4(n,e,r,Wk(n,t,i.hostVars,er),i)}function h4(n,e,t){let r=gr(e,n),i=Qk(t),s=n[Pr].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Up(n,jp(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function f4(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],h=o[a++];Gk(r,t,c,l,d,h)}}function p4(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function Jk(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Xk(n,e){let t=n.contentQueries;if(t!==null){let r=Le(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Lw(s),a.contentQueries(2,e[o],o)}}}finally{Le(r)}}}function Up(n,e){return n[mu]?n[EA][fr]=e:n[mu]=e,n[EA]=e,e}function Z_(n,e,t){Lw(0);let r=Le(null);try{e(n,t)}finally{Le(r)}}function eR(n){return n[Yf]??=[]}function tR(n){return n.cleanup??=[]}function nR(n,e){let t=n[La],r=t?t.get(li,null):null;r&&r.handleError(e)}function r0(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];Gk(d,l,r,a,c,i)}}function rR(n,e,t){let r=Ox(e,n);xB(n[ht],r,t)}function g4(n,e){let t=is(e,n),r=t[_e];m4(r,t);let i=t[hi];i!==null&&t[gu]===null&&(t[gu]=Ww(i,t[La])),i0(r,t,t[pr])}function m4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function i0(n,e,t){Vw(e);try{let r=n.viewQuery;r!==null&&Z_(1,r,t);let i=n.template;i!==null&&Kk(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ci]?.finishViewCreation(n),n.staticContentQueries&&Xk(n,e),n.staticViewQueries&&Z_(2,n.viewQuery,t);let s=n.components;s!==null&&y4(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[he]&=-5,jw()}}function y4(n,e){for(let t=0;t<e.length;t++)g4(n,e[t])}function iR(n,e,t,r){let i=Le(null);try{let s=e.tView,a=n[he]&4096?4096:16,c=jp(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[so]=l;let d=n[ci];return d!==null&&(c[ci]=d.createEmbeddedView(s)),i0(s,c,t),c}finally{Le(i)}}function J_(n,e){return!e||e.firstChild===null||hk(n)}function sR(n,e,t,r=!0){let i=e[_e];if(PB(i,e,n,t),r){let o=Q_(t,n),a=e[ht],c=Vk(a,n[oo]);c!==null&&MB(i,n[Sn],a,e,c,o)}let s=e[gu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function ap(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Or(s)),fi(s)&&v4(s,r);let o=t.type;if(o&8)ap(n,e,t.child,r);else if(o&32){let a=Kw(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Uk(e,t);if(Array.isArray(a))r.push(...a);else{let c=ao(e[Zn]);ap(c[_e],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function v4(n,e){for(let t=$n;t<n.length;t++){let r=n[t],i=r[_e].firstChild;i!==null&&ap(r[_e],r,i,e)}n[oo]!==n[hi]&&e.push(n[oo])}var oR=[];function _4(n){return n[Yn]??w4(n)}function w4(n){let e=oR.pop()??Object.create(E4);return e.lView=n,e}function b4(n){n.lView[Yn]!==n&&(n.lView=null,oR.push(n))}var E4=ne(N({},Jl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{xp(n.lView)},consumerOnSignalRead(){this.lView[Yn]=this}});function I4(n){let e=n[Yn]??Object.create(T4);return e.lView=n,e}var T4=ne(N({},Jl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ao(n.lView);for(;e&&!aR(e[_e]);)e=ao(e);e&&Vx(e)},consumerOnSignalRead(){this.lView[Yn]=this}});function aR(n){return n.type!==2}var C4=100;function cR(n,e=!0,t=0){let r=n[Pr],i=r.rendererFactory,s=!1;s||i.begin?.();try{D4(n,t)}catch(o){throw e&&nR(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function D4(n,e){let t=zx();try{TA(!0),X_(n,e);let r=0;for(;Ap(n);){if(r===C4)throw new re(103,!1);r++,X_(n,1)}}finally{TA(t)}}function S4(n,e,t,r){let i=e[he];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Pr].inlineEffectRunner?.flush(),Vw(e);let a=!0,c=null,l=null;s||(aR(n)?(l=_4(e),c=tf(l)):NS()===null?(a=!1,l=I4(e),c=tf(l)):e[Yn]&&(jv(e[Yn]),e[Yn]=null));try{Lx(e),f$(n.bindingStartIndex),t!==null&&Kk(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&$f(e,m,null)}else{let m=n.preOrderHooks;m!==null&&Bf(e,m,0,null),a_(e,0)}if(o||A4(e),lR(e,0),n.contentQueries!==null&&Xk(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&$f(e,m)}else{let m=n.contentHooks;m!==null&&Bf(e,m,1),a_(e,1)}GB(n,e);let h=n.components;h!==null&&dR(e,h,0);let p=n.viewQuery;if(p!==null&&Z_(2,p,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&$f(e,m)}else{let m=n.viewHooks;m!==null&&Bf(e,m,2),a_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[o_]){for(let m of e[o_])m();e[o_]=null}s||(e[he]&=-73)}catch(d){throw s||xp(e),d}finally{l!==null&&(Lv(l,c),a&&b4(l)),jw()}}function lR(n,e){for(let t=pk(n);t!==null;t=gk(t))for(let r=$n;r<t.length;r++){let i=t[r];uR(i,e)}}function A4(n){for(let e=pk(n);e!==null;e=gk(e)){if(!(e[he]&Jf.HasTransplantedViews))continue;let t=e[Va];for(let r=0;r<t.length;r++){let i=t[r];Vx(i)}}}function x4(n,e,t){let r=is(e,n);uR(r,t)}function uR(n,e){Mw(n)&&X_(n,e)}function X_(n,e){let r=n[_e],i=n[he],s=n[Yn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Vv(s)),o||=!1,s&&(s.dirty=!1),n[he]&=-9217,o)S4(r,n,r.template,n[pr]);else if(i&8192){lR(n,1);let a=r.components;a!==null&&dR(n,a,1)}}function dR(n,e,t){for(let r=0;r<e.length;r++)x4(n,e[r],t)}function s0(n,e){let t=zx()?64:1088;for(n[Pr].changeDetectionScheduler?.notify(e);n;){n[he]|=t;let r=ao(n);if(D_(n)&&!r)return n;n=r}return null}var ho=class{get rootNodes(){let e=this._lView,t=e[_e];return ap(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pr]}set context(e){this._lView[pr]=e}get destroyed(){return(this._lView[he]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nn];if(fi(e)){let t=e[Zf],r=t?t.indexOf(this):-1;r>-1&&(K_(e,r),Wf(t,r))}this._attachedToViewContainer=!1}Ok(this._lView[_e],this._lView)}onDestroy(e){jx(this._lView,e)}markForCheck(){s0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[he]&=-129}reattach(){A_(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,cR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new re(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=D_(this._lView),t=this._lView[so];t!==null&&!e&&Qw(t,this._lView),Nk(this._lView[_e],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new re(902,!1);this._appRef=e;let t=D_(this._lView),r=this._lView[so];r!==null&&!t&&Pk(r,this._lView),A_(this._lView)}},fo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=M4;let n=e;return n})(),k4=fo,R4=class extends k4{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=iR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ho(i)}};function M4(){return $p(vn(),Ce())}function $p(n,e){return n.type&4?new R4(e,n,Ka(n,e)):null}var jne=new RegExp(`^(\\d+)*(${eB}|${X$})*(.*)`);var N4=()=>null;function ew(n,e){return N4(n,e)}var Ua=class{},hR=new J("",{providedIn:"root",factory:()=>!1});var fR=new J(""),pR=new J(""),tw=class{},cp=class{};function P4(n){let e=Error(`No component factory found for ${mn(n)}.`);return e[O4]=n,e}var O4="ngComponent";var nw=class{resolveComponentFactory(e){throw P4(e)}},C0=class C0{};C0.NULL=new nw;var $a=C0,Ba=class{},xn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>F4();let n=e;return n})();function F4(){let n=Ce(),e=vn(),t=is(e.index,n);return(Qi(t)?t:n)[ht]}var L4=(()=>{let e=class e{};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();function lp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=v_(i,a);else if(s==2){let c=a,l=e[++o];r=v_(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var up=class extends $a{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Zi(e);return new qa(t,this.ngModule)}};function BA(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Yi.None;e?t.push({propName:o,templateName:r,isSignal:(a&Yi.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function V4(n){let e=n.toLowerCase();return e==="svg"?XU:e==="math"?e$:null}var qa=class extends cp{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=BA(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return BA(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=RU(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Le(null);try{i=i||this.ngModule;let o=i instanceof yn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new k_(e,o):e,c=a.get(Ba,null);if(c===null)throw new re(407,!1);let l=a.get(L4,null),d=a.get(Ua,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=r?QB(p,r,this.componentDef.encapsulation,a):Mk(p,m,V4(m)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let E=null;_!==null&&(E=Ww(_,a,!0));let k=e0(0,null,null,1,0,null,null,null,null,null,null),L=jp(null,k,null,b,null,null,h,p,a,null,E);Vw(L);let V,$,W=null;try{let K=this.componentDef,C,w=null;K.findHostDirectiveDefs?(C=[],w=new Map,K.findHostDirectiveDefs(K,C,w),C.push(K)):C=[K];let I=j4(L,_);W=U4(I,_,K,C,L,h,p),$=Fx(k,rn),_&&q4(p,K,_,r),t!==void 0&&z4($,this.ngContentSelectors,t),V=B4(W,K,C,w,L,[H4]),i0(k,L,null)}catch(K){throw W!==null&&V_(W),V_(L),K}finally{jw()}return new rw(this.componentType,V,Ka($,L),L,$)}finally{Le(s)}}},rw=class extends tw{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ho(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;r0(s[_e],s,i,e,t),this.previousInputValues.set(e,t);let o=is(this._tNode.index,s);s0(o,1)}}get injector(){return new ro(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function j4(n,e){let t=n[_e],r=rn;return n[r]=e,Qa(t,r,2,"#host",null)}function U4(n,e,t,r,i,s,o){let a=i[_e];$4(r,n,e,o);let c=null;e!==null&&(c=Ww(e,i[La]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let h=jp(i,Qk(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Y_(a,n,r.length-1),Up(i,h),i[n.index]=h}function $4(n,e,t,r){for(let i of n)e.mergedAttrs=fu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(lp(e,e.mergedAttrs,!0),t!==null&&qk(r,t,e))}function B4(n,e,t,r,i,s){let o=vn(),a=i[_e],c=gr(o,i);Yk(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let h=o.directiveStart+d,p=uo(i,a,h,o);Xi(p,i)}Zk(a,i,o),c&&Xi(c,i);let l=uo(i,a,o.directiveStart+o.componentOffset,o);if(n[pr]=i[pr]=l,s!==null)for(let d of s)d(l,e);return Zw(a,o,i),l}function q4(n,e,t,r){if(r)E_(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=MU(e.selectors[0]);i&&E_(n,t,i),s&&s.length>0&&Bk(n,t,s.join(" "))}}function z4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function H4(){let n=vn();Mp(Ce()[_e],n)}var kn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=G4;let n=e;return n})();function G4(){let n=vn();return mR(n,Ce())}var W4=kn,gR=class extends W4{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Ka(this._hostTNode,this._hostLView)}get injector(){return new ro(this._hostTNode,this._hostLView)}get parentInjector(){let e=$w(this._hostTNode,this._hostLView);if(Xx(e)){let t=ep(e,this._hostLView),r=Xf(e),i=t[_e].data[r+8];return new ro(i,t)}else return new ro(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=qA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-$n}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=ew(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,J_(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!QU(e),a;if(o)a=t;else{let _=t||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let c=o?e:new qa(Zi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let b=(o?l:this.parentInjector).get(yn,null);b&&(s=b)}let d=Zi(c.componentType??{}),h=ew(this._lContainer,d?.id??null),p=h?.firstChild??null,m=c.create(l,i,p,s);return this.insertImpl(m.hostView,a,J_(this._hostTNode,h)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(n$(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[nn],l=new gR(c,c[Sn],c[nn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return sR(o,i,s,r),e.attachToViewContainerRef(),hx(h_(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=qA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=K_(this._lContainer,t);r&&(Wf(h_(this._lContainer),t),Ok(r[_e],r))}detach(e){let t=this._adjustIndex(e,-1),r=K_(this._lContainer,t);return r&&Wf(h_(this._lContainer),t)!=null?new ho(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function qA(n){return n[Zf]}function h_(n){return n[Zf]||(n[Zf]=[])}function mR(n,e){let t,r=e[n.index];return fi(r)?t=r:(t=Jk(r,e,null,n),e[n.index]=t,Up(e,t)),Q4(t,e,n,r),new gR(t,n,e)}function K4(n,e){let t=n[ht],r=t.createComment(""),i=gr(e,n),s=Vk(t,i);return op(t,s,r,VB(t,i),!1),r}var Q4=J4,Y4=()=>!1;function Z4(n,e,t){return Y4(n,e,t)}function J4(n,e,t,r){if(n[oo])return;let i;t.type&8?i=Or(r):i=K4(e,t),n[oo]=i}var iw=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},sw=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)o0(e,t).matches!==null&&this.queries[t].setDirty()}},ow=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=oq(e):this.predicate=e}},aw=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},cw=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,X4(t,s)),this.matchTNodeWithReadOption(e,t,qf(t,e,s,!1,!1))}else r===fo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,qf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ct||i===kn||i===fo&&t.type&4)this.addMatch(t.index,-2);else{let s=qf(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function X4(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function eq(n,e){return n.type&11?Ka(n,e):n.type&4?$p(n,e):null}function tq(n,e,t,r){return t===-1?eq(e,n):t===-2?nq(n,e,r):uo(n,n[_e],t,e)}function nq(n,e,t){if(t===Ct)return Ka(e,n);if(t===fo)return $p(e,n);if(t===kn)return mR(e,n)}function yR(n,e,t,r){let i=e[ci].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let d=s[l];a.push(tq(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function lw(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=yR(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],d=e[-c];for(let h=$n;h<d.length;h++){let p=d[h];p[so]===p[nn]&&lw(p[_e],p,l,r)}if(d[Va]!==null){let h=d[Va];for(let p=0;p<h.length;p++){let m=h[p];lw(m[_e],m,l,r)}}}}}return r}function rq(n,e){return n[ci].queries[e].queryList}function iq(n,e,t){let r=new L_((t&4)===4);return JB(n,e,r,r.destroy),(e[ci]??=new sw).queries.push(new iw(r))-1}function sq(n,e,t){let r=Tt();return r.firstCreatePass&&(aq(r,new ow(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),iq(r,Ce(),e)}function oq(n){return n.split(",").map(e=>e.trim())}function aq(n,e,t){n.queries===null&&(n.queries=new aw),n.queries.track(new cw(e,t))}function o0(n,e){return n.queries.getByIndex(e)}function cq(n,e){let t=n[_e],r=o0(t,e);return r.crossesNgTemplate?lw(t,n,e,[]):yR(t,n,r,e)}var zA=new Set;function Ya(n){zA.has(n)||(zA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function lq(n){return typeof n=="function"&&n[ni]!==void 0}function Iu(n,e){Ya("NgSignals");let t=zS(n),r=t[ni];return e?.equal&&(r.equal=e.equal),t.set=i=>Uv(r,i),t.update=i=>HS(r,i),t.asReadonly=uq.bind(t),t}function uq(){let n=this[ni];if(n.readonlyFn===void 0){let e=()=>this();e[ni]=n,n.readonlyFn=e}return n.readonlyFn}function vR(n){return lq(n)&&typeof n.set=="function"}function dq(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(gq))}return s}return dp.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,p)=>{a.push(""),o.push(r(h).then(m=>{a[l+p]=m,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>mq(s));e.push(c)}),fq(),Promise.all(e).then(()=>{})}var dp=new Map,hq=new Set;function fq(){let n=dp;return dp=new Map,n}function pq(){return dp.size===0}function gq(n){return typeof n=="string"?n:n.text()}function mq(n){hq.delete(n)}function yq(n){return Object.getPrototypeOf(n.prototype).constructor}function pt(n){let e=yq(n.type),t=!0,r=[n];for(;e;){let i;if(Ji(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new re(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Ff(n.inputs),o.inputTransforms=Ff(n.inputTransforms),o.declaredInputs=Ff(n.declaredInputs),o.outputs=Ff(n.outputs);let a=i.hostBindings;a&&Eq(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&wq(n,c),l&&bq(n,l),vq(n,i),Q2(n.outputs,i.outputs),Ji(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===pt&&(t=!1)}}e=Object.getPrototypeOf(e)}_q(r)}function vq(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function _q(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=fu(i.hostAttrs,t=fu(t,i.hostAttrs))}}function Ff(n){return n===Pa?{}:n===Dn?[]:n}function wq(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function bq(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function Eq(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var es=class{},yu=class{};var hp=class extends es{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new up(this);let s=bx(e);this._bootstrapComponents=Rk(s.bootstrap),this._r3Injector=ck(e,t,[{provide:es,useValue:this},{provide:$a,useValue:this.componentFactoryResolver},...r],mn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},fp=class extends yu{constructor(e){super(),this.moduleType=e}create(e){return new hp(this.moduleType,e,[])}};function Iq(n,e,t){return new hp(n,e,t,!1)}var uw=class extends es{constructor(e){super(),this.componentFactoryResolver=new up(this),this.instance=null;let t=new pu([...e.providers,{provide:es,useValue:this},{provide:$a,useValue:this.componentFactoryResolver}],e.parent||kw(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Bp(n,e,t=null){return new uw({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function _R(n){return a0(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Tq(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function a0(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function c0(n,e,t){return n[e]=t}function di(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function l0(n,e,t,r){let i=di(n,e,t);return di(n,e+1,r)||i}function Cq(n,e,t,r,i){let s=l0(n,e,t,r);return di(n,e+2,i)||s}function Dq(n){return(n.flags&32)===32}function Sq(n,e,t,r,i,s,o,a,c){let l=e.consts,d=Qa(e,n,4,o||null,a||null);n0(e,t,d,ja(l,c)),Mp(e,d);let h=d.tView=e0(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function wR(n,e,t,r,i,s,o,a,c,l){let d=t+rn,h=e.firstCreatePass?Sq(d,e,n,r,i,s,o,a,c):e.data[d];go(h,!1);let p=Aq(e,n,h,t);kp()&&Lp(e,n,p,h),Xi(p,n);let m=Jk(p,n,p,h);return n[d]=m,Up(n,m),Z4(m,h,n),Dp(h)&&Jw(e,n,h),c!=null&&Xw(n,h,l),h}function fe(n,e,t,r,i,s,o,a){let c=Ce(),l=Tt(),d=ja(l.consts,s);return wR(c,l,n,e,t,r,i,d,o,a),fe}var Aq=xq;function xq(n,e,t,r){return Rp(!0),e[ht].createComment("")}var Ra=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ra||{}),bR=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})(),no=class no{constructor(){this.ngZone=G(Ie),this.scheduler=G(Ua),this.errorHandler=G(li,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of no.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};no.PHASES=[Ra.EarlyRead,Ra.Write,Ra.MixedReadWrite,Ra.Read],no.\u0275prov=Y({token:no,providedIn:"root",factory:()=>new no});var dw=no,hw=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function u0(n,e){!e?.injector&&WU(u0);let t=e?.injector??G(Bn);return DB(t)?(Ya("NgAfterNextRender"),Rq(n,t,e,!0)):Mq}function kq(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function Rq(n,e,t,r){let i=e.get(bR);i.impl??=e.get(dw);let s=t?.phase??Ra.MixedReadWrite,o=new hw(i.impl,kq(n,s),r,e.get(Bw));return i.impl.register(o),o}var Mq={destroy(){}};function d0(n,e,t,r){return di(n,Ow(),t)?e+du(t)+r:er}function Nq(n,e,t,r,i,s){let o=h$(),a=l0(n,o,t,i);return Fw(2),a?e+du(t)+r+du(i)+s:er}function Lf(n,e){return n<<17|e<<2}function po(n){return n>>17&32767}function Pq(n){return(n&2)==2}function Oq(n,e){return n&131071|e<<17}function fw(n){return n|2}function za(n){return(n&131068)>>2}function f_(n,e){return n&-131069|e<<2}function Fq(n){return(n&1)===1}function pw(n){return n|1}function Lq(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=po(o),c=za(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||wu(h,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let p=po(n[a+1]);n[r+1]=Lf(p,a),p!==0&&(n[p+1]=f_(n[p+1],r)),n[a+1]=Oq(n[a+1],r)}else n[r+1]=Lf(a,0),a!==0&&(n[a+1]=f_(n[a+1],r)),a=r;else n[r+1]=Lf(c,0),a===0?a=r:n[c+1]=f_(n[c+1],r),c=r;l&&(n[r+1]=fw(n[r+1])),HA(n,d,r,!0),HA(n,d,r,!1),Vq(e,d,n,r,s),o=Lf(a,c),s?e.classBindings=o:e.styleBindings=o}function Vq(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&wu(s,e)>=0&&(t[r+1]=pw(t[r+1]))}function HA(n,e,t,r){let i=n[t+1],s=e===null,o=r?po(i):za(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];jq(c,e)&&(a=!0,n[o+1]=r?pw(l):fw(l)),o=r?po(l):za(l)}a&&(n[t+1]=r?fw(i):pw(i))}function jq(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?wu(n,e)>=0:!1}var Pt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ER(n){return n.substring(Pt.key,Pt.keyEnd)}function Uq(n){return n.substring(Pt.value,Pt.valueEnd)}function $q(n){return CR(n),IR(n,Ha(n,0,Pt.textEnd))}function IR(n,e){let t=Pt.textEnd;return t===e?-1:(e=Pt.keyEnd=qq(n,Pt.key=e,t),Ha(n,e,t))}function Bq(n){return CR(n),TR(n,Ha(n,0,Pt.textEnd))}function TR(n,e){let t=Pt.textEnd,r=Pt.key=Ha(n,e,t);return t===r?-1:(r=Pt.keyEnd=zq(n,r,t),r=GA(n,r,t,58),r=Pt.value=Ha(n,r,t),r=Pt.valueEnd=Hq(n,r,t),GA(n,r,t,59))}function CR(n){Pt.key=0,Pt.keyEnd=0,Pt.value=0,Pt.valueEnd=0,Pt.textEnd=n.length}function Ha(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function qq(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function zq(n,e,t){let r;for(;e<t&&((r=n.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function GA(n,e,t,r){return e=Ha(n,e,t),e<t&&e++,e}function Hq(n,e,t){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<t;){let c=n.charCodeAt(o++);if(c===59)return a;c===34||c===39?a=o=WA(n,c,o,t):e===o-4&&s===85&&i===82&&r===76&&c===40?a=o=WA(n,41,o,t):c>32&&(a=o),s=i,i=r,r=c&-33}return a}function WA(n,e,t,r){let i=-1,s=t;for(;s<r;){let o=n.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function Q(n,e,t){let r=Ce(),i=Ow();if(di(r,i,e)){let s=Tt(),o=Uw();t0(s,o,r,n,e,r[ht],t,!1)}return Q}function gw(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";r0(n,t,s[o],o,r)}function cs(n,e,t){return DR(n,e,t,!1),cs}function Za(n,e){return DR(n,e,null,!0),Za}function h0(n){SR(kR,Gq,n,!1)}function Gq(n,e){for(let t=Bq(e);t>=0;t=TR(e,t))kR(n,ER(e),Uq(e))}function Wq(n,e){for(let t=$q(e);t>=0;t=IR(e,t))bp(n,ER(e),!0)}function DR(n,e,t,r){let i=Ce(),s=Tt(),o=Fw(2);if(s.firstUpdatePass&&xR(s,n,o,r),e!==er&&di(i,o,e)){let a=s.data[ss()];RR(s,a,i,i[ht],n,i[o+1]=ez(e,t),r,o)}}function SR(n,e,t,r){let i=Tt(),s=Fw(2);i.firstUpdatePass&&xR(i,null,s,r);let o=Ce();if(t!==er&&di(o,s,t)){let a=i.data[ss()];if(MR(a,r)&&!AR(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=v_(c,t||"")),gw(i,a,o,t,r)}else Xq(i,a,o,o[ht],o[s+1],o[s+1]=Jq(n,e,t),r,s)}}function AR(n,e){return e>=n.expandoStartIndex}function xR(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ss()],o=AR(n,t);MR(s,r)&&e===null&&!o&&(e=!1),e=Kq(i,s,e,r),Lq(i,s,e,t,o,r)}}function Kq(n,e,t,r){let i=y$(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=p_(null,n,e,t,r),t=vu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=p_(i,n,e,t,r),s===null){let c=Qq(n,e,r);c!==void 0&&Array.isArray(c)&&(c=p_(null,n,e,c[1],r),c=vu(c,e.attrs,r),Yq(n,e,r,c))}else s=Zq(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function Qq(n,e,t){let r=t?e.classBindings:e.styleBindings;if(za(r)!==0)return n[po(r)]}function Yq(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[po(i)]=r}function Zq(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=vu(r,o,t)}return vu(r,e.attrs,t)}function p_(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=vu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function vu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),bp(n,o,t?!0:e[++s]))}return n===void 0?null:n}function Jq(n,e,t){if(t==null||t==="")return Dn;let r=[],i=Xn(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function kR(n,e,t){bp(n,e,Xn(t))}function Xq(n,e,t,r,i,s,o,a){i===er&&(i=Dn);let c=0,l=0,d=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;d!==null||h!==null;){let p=c<i.length?i[c+1]:void 0,m=l<s.length?s[l+1]:void 0,_=null,b;d===h?(c+=2,l+=2,p!==m&&(_=h,b=m)):h===null||d!==null&&d<h?(c+=2,_=d):(l+=2,_=h,b=m),_!==null&&RR(n,e,t,r,_,b,o,a),d=c<i.length?i[c]:null,h=l<s.length?s[l]:null}}function RR(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=Fq(l)?KA(c,e,t,i,za(l),o):void 0;if(!pp(d)){pp(s)||Pq(l)&&(s=KA(c,null,t,i,a,o));let h=Ox(ss(),t);zB(r,o,h,i,s)}}function KA(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,h=d===null,p=t[i+1];p===er&&(p=h?Dn:void 0);let m=h?i_(p,r):d===r?p:void 0;if(l&&!pp(m)&&(m=i_(c,r)),pp(m)&&(a=m,o))return a;let _=n[i+1];i=o?po(_):za(_)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=i_(c,r))}return a}function pp(n){return n!==void 0}function ez(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=mn(Xn(n)))),n}function MR(n,e){return(n.flags&(e?8:16))!==0}function qp(n,e,t){let r=Ce(),i=d0(r,n,e,t);SR(bp,Wq,i,!0)}function tz(n,e,t,r,i,s){let o=e.consts,a=ja(o,i),c=Qa(e,n,2,r,a);return n0(e,t,c,ja(o,s)),c.attrs!==null&&lp(c,c.attrs,!1),c.mergedAttrs!==null&&lp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function x(n,e,t,r){let i=Ce(),s=Tt(),o=rn+n,a=i[ht],c=s.firstCreatePass?tz(o,s,i,e,t,r):s.data[o],l=nz(s,i,c,a,e,n);i[o]=l;let d=Dp(c);return go(c,!0),qk(a,l,c),!Dq(c)&&kp()&&Lp(s,i,l,c),s$()===0&&Xi(l,i),o$(),d&&(Jw(s,i,c),Zw(s,c,i)),r!==null&&Xw(i,c),x}function M(){let n=vn();Nw()?Pw():(n=n.parent,go(n,!1));let e=n;c$(e)&&l$(),a$();let t=Tt();return t.firstCreatePass&&(Mp(t,n),Rw(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&T$(e)&&gw(t,e,Ce(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&C$(e)&&gw(t,e,Ce(),e.stylesWithoutHost,!1),M}function se(n,e,t,r){return x(n,e,t,r),M(),se}var nz=(n,e,t,r,i,s)=>(Rp(!0),Mk(r,i,w$()));function rz(n,e,t,r,i){let s=e.consts,o=ja(s,r),a=Qa(e,n,8,"ng-container",o);o!==null&&lp(a,o,!0);let c=ja(s,i);return n0(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function f0(n,e,t){let r=Ce(),i=Tt(),s=n+rn,o=i.firstCreatePass?rz(s,i,r,e,t):i.data[s];go(o,!0);let a=iz(i,r,o,n);return r[s]=a,kp()&&Lp(i,r,a,o),Xi(a,r),Dp(o)&&(Jw(i,r,o),Zw(i,o,r)),t!=null&&Xw(r,o),f0}function p0(){let n=vn(),e=Tt();return Nw()?Pw():(n=n.parent,go(n,!1)),e.firstCreatePass&&(Mp(e,n),Rw(n)&&e.queries.elementEnd(n)),p0}var iz=(n,e,t,r)=>(Rp(!0),kB(e[ht],""));function Lt(){return Ce()}var eo=void 0;function sz(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var oz=["en",[["a","p"],["AM","PM"],eo],[["AM","PM"],eo,eo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],eo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],eo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",eo,"{1} 'at' {0}",eo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",sz],g_={};function g0(n){let e=az(n),t=QA(e);if(t)return t;let r=e.split("-")[0];if(t=QA(r),t)return t;if(r==="en")return oz;throw new re(701,!1)}function QA(n){return n in g_||(g_[n]=Gt.ng&&Gt.ng.common&&Gt.ng.common.locales&&Gt.ng.common.locales[n]),g_[n]}var Ja=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ja||{});function az(n){return n.toLowerCase().replace(/_/g,"-")}var gp="en-US";var cz=gp;function lz(n){typeof n=="string"&&(cz=n.toLowerCase().replace(/_/g,"-"))}var uz=(n,e,t)=>{};function Se(n,e,t,r){let i=Ce(),s=Tt(),o=vn();return NR(s,i,i[ht],o,n,e,r),Se}function dz(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Yf],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function NR(n,e,t,r,i,s,o){let a=Dp(r),l=n.firstCreatePass&&tR(n),d=e[pr],h=eR(e),p=!0;if(r.type&3||o){let b=gr(r,e),E=o?o(b):b,k=h.length,L=o?$=>o(Or($[r.index])):r.index,V=null;if(!o&&a&&(V=dz(n,e,i,r.index)),V!==null){let $=V.__ngLastListenerFn__||V;$.__ngNextListenerFn__=s,V.__ngLastListenerFn__=s,p=!1}else{s=ZA(r,e,d,s),uz(b,i,s);let $=t.listen(E,i,s);h.push(s,$),l&&l.push(i,L,k,k+1)}}else s=ZA(r,e,d,s);let m=r.outputs,_;if(p&&m!==null&&(_=m[i])){let b=_.length;if(b)for(let E=0;E<b;E+=2){let k=_[E],L=_[E+1],W=e[k][L].subscribe(s),K=h.length;h.push(s,W),l&&l.push(i,r.index,K,-(K+1))}}}function YA(n,e,t,r){let i=Le(null);try{return Rr(6,e,t),t(r)!==!1}catch(s){return nR(n,s),!1}finally{Rr(7,e,t),Le(i)}}function ZA(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?is(n.index,e):e;s0(o,5);let a=YA(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=YA(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function de(n=1){return _$(n)}function hz(n,e){let t=null,r=DU(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?yx(n,s,!0):xU(r,s))return i}return t}function PR(n){let e=Ce()[Zn][Sn];if(!e.projection){let t=n?n.length:1,r=e.projection=mU(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?hz(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function OR(n,e=0,t,r,i,s){let o=Ce(),a=Tt(),c=r?n+1:null;c!==null&&wR(o,a,c,r,i,s,null,t);let l=Qa(a,rn+n,16,null,t||null);l.projection===null&&(l.projection=e),Pw();let h=!o[gu]||Bx();o[Zn][Sn].projection[l.projection]===null&&c!==null?fz(o,a,c):h&&(l.flags&32)!==32&&BB(a,o,l)}function fz(n,e,t){let r=rn+t,i=e.data[r],s=n[r],o=ew(s,i.tView.ssrId),a=iR(n,i,void 0,{dehydratedView:o});sR(s,a,0,J_(i,o))}function Rn(n,e,t){return zp(n,"",e,"",t),Rn}function zp(n,e,t,r,i){let s=Ce(),o=d0(s,e,t,r);if(o!==er){let a=Tt(),c=Uw();t0(a,c,s,n,o,s[ht],i,!1)}return zp}function Tu(n,e,t){sq(n,e,t)}function Xa(n){let e=Ce(),t=Tt(),r=Hx();Lw(r+1);let i=o0(t,r);if(n.dirty&&t$(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=cq(e,r);n.reset(s,G$),n.notifyOnChanges()}return!0}return!1}function ec(){return rq(Ce(),Hx())}function pz(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function yo(n){let e=d$();return Sp(e,rn+n)}function U(n,e=""){let t=Ce(),r=Tt(),i=n+rn,s=r.firstCreatePass?Qa(r,i,1,e,null):r.data[i],o=gz(r,t,s,e,n);t[i]=o,kp()&&Lp(r,t,o,s),go(s,!1)}var gz=(n,e,t,r,i)=>(Rp(!0),AB(e[ht],r));function qe(n){return mt("",n,""),qe}function mt(n,e,t){let r=Ce(),i=d0(r,n,e,t);return i!==er&&rR(r,ss(),i),mt}function Hp(n,e,t,r,i){let s=Ce(),o=Nq(s,n,e,t,r,i);return o!==er&&rR(s,ss(),o),Hp}function ls(n,e,t){vR(e)&&(e=e());let r=Ce(),i=Ow();if(di(r,i,e)){let s=Tt(),o=Uw();t0(s,o,r,n,e,r[ht],t,!1)}return ls}function vo(n,e){let t=vR(n);return t&&n.set(e),t}function us(n,e){let t=Ce(),r=Tt(),i=vn();return NR(r,t,t[ht],i,n,e),us}function mz(n,e,t){let r=Tt();if(r.firstCreatePass){let i=Ji(n);mw(t,r.data,r.blueprint,i,!0),mw(e,r.data,r.blueprint,i,!1)}}function mw(n,e,t,r,i){if(n=gn(n),Array.isArray(n))for(let s=0;s<n.length;s++)mw(n[s],e,t,r,i);else{let s=Tt(),o=Ce(),a=vn(),c=Fa(n)?n:gn(n.provide),l=Sx(n),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(Fa(n)||!n.multi){let m=new lo(l,i,B),_=y_(c,e,i?d:d+p,h);_===-1?(M_(np(a,o),s,c),m_(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[_]=m,o[_]=m)}else{let m=y_(c,e,d+p,h),_=y_(c,e,d,d+p),b=m>=0&&t[m],E=_>=0&&t[_];if(i&&!E||!i&&!b){M_(np(a,o),s,c);let k=_z(i?vz:yz,t.length,i,r,l);!i&&E&&(t[_].providerFactory=k),m_(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(k),o.push(k)}else{let k=FR(t[i?_:m],l,!i&&r);m_(s,n,m>-1?m:_,k)}!i&&r&&E&&t[_].componentProviders++}}}function m_(n,e,t,r){let i=Fa(e),s=UU(e);if(i||s){let c=(s?gn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function FR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function y_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function yz(n,e,t,r){return yw(this.multi,[])}function vz(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=uo(t,t[_e],this.providerFactory.index,r);s=a.slice(0,o),yw(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],yw(i,s);return s}function yw(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function _z(n,e,t,r,i){let s=new lo(n,t,B);return s.multi=[],s.index=e,s.componentProviders=0,FR(s,i,r&&!t),s}function tc(n,e=[]){return t=>{t.providersResolver=(r,i)=>mz(r,i?i(n):n,e)}}var wz=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Tx(!1,r.type),s=i.length>0?Bp([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Y({token:e,providedIn:"environment",factory:()=>new e(q(yn))});let n=e;return n})();function Cu(n){Ya("NgStandalone"),n.getStandaloneInjector=e=>e.get(wz).getOrCreateStandaloneInjector(n)}function LR(n,e,t){let r=n.\u0275cmp;r.directiveDefs=Qf(e,!1),r.pipeDefs=Qf(t,!0)}function Gp(n,e,t,r){return VR(Ce(),bu(),n,e,t,r)}function Wp(n,e,t,r,i){return jR(Ce(),bu(),n,e,t,r,i)}function m0(n,e){let t=n[e];return t===er?void 0:t}function VR(n,e,t,r,i,s){let o=e+t;return di(n,o,i)?c0(n,o+1,s?r.call(s,i):r(i)):m0(n,o+1)}function jR(n,e,t,r,i,s,o){let a=e+t;return l0(n,a,i,s)?c0(n,a+2,o?r.call(o,i,s):r(i,s)):m0(n,a+2)}function bz(n,e,t,r,i,s,o,a){let c=e+t;return Cq(n,c,i,s,o)?c0(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):m0(n,c+3)}function Dt(n,e){let t=Tt(),r,i=n+rn;t.firstCreatePass?(r=Ez(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=io(r.type,!0)),o,a=Cn(B);try{let c=tp(!1),l=s();return tp(c),pz(t,Ce(),i,l),l}finally{Cn(a)}}function Ez(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Mn(n,e,t){let r=n+rn,i=Ce(),s=Sp(i,r);return y0(i,r)?VR(i,bu(),e,s.transform,t,s):s.transform(t)}function UR(n,e,t,r){let i=n+rn,s=Ce(),o=Sp(s,i);return y0(s,i)?jR(s,bu(),e,o.transform,t,r,o):o.transform(t,r)}function nc(n,e,t,r,i){let s=n+rn,o=Ce(),a=Sp(o,s);return y0(o,s)?bz(o,bu(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function y0(n,e){return n[_e].data[e].pure}function _o(n,e){return $p(n,e)}var Vf=null;function Iz(n){Vf!==null&&(n.defaultEncapsulation!==Vf.defaultEncapsulation||n.preserveWhitespaces!==Vf.preserveWhitespaces)||(Vf=n)}var Kp=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var v0=new J(""),Du=new J(""),Qp=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,_0||(Tz(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(q(Ie),q(Yp),q(Du))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Yp=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return _0?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function Tz(n){_0=n}var _0;function ds(n){return!!n&&typeof n.then=="function"}function w0(n){return!!n&&typeof n.subscribe=="function"}var Zp=new J(""),$R=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=G(Zp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(ds(o))r.push(o);else if(w0(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Jp=new J("");function Cz(){qS(()=>{throw new re(600,!1)})}function Dz(n){return n.isBoundToModule}var Sz=10;function Az(n,e,t){try{let r=t();return ds(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function BR(n,e){return Array.isArray(e)?e.reduce(BR,n):N(N({},n),e)}var gi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(z$),this.afterRenderManager=G(bR),this.zonelessEnabled=G(hR),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new He,this.afterTick=new He,this.componentTypes=[],this.components=[],this.isStable=G(os).hasPendingTasks.pipe(ae(r=>!r)),this._injector=G(yn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof cp;if(!this._injector.get($R).done){let m=!s&&wx(r),_=!1;throw new re(405,_)}let a;s?a=r:a=this._injector.get($a).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Dz(a)?void 0:this._injector.get(es),l=i||a.selector,d=a.create(Bn.NULL,[],l,c),h=d.location.nativeElement,p=d.injector.get(v0,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),zf(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new re(101,!1);let r=Le(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Le(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Ba,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<Sz;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)xz(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Ap(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;zf(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Jp,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>zf(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new re(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function zf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function xz(n,e,t,r){if(!t&&!Ap(n))return;cR(n,e,t&&!r?0:1)}var vw=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Xp=(()=>{let e=class e{compileModuleSync(r){return new fp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=bx(r),o=Rk(s.declarations).reduce((a,c)=>{let l=Zi(c);return l&&a.push(new qa(l)),a},[]);return new vw(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),kz=new J("");function Rz(n,e,t){let r=new fp(t);return Promise.resolve(r)}function JA(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var Mz=(()=>{let e=class e{constructor(){this.zone=G(Ie),this.changeDetectionScheduler=G(Ua),this.applicationRef=G(gi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Nz({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ie(ne(N({},qR()),{scheduleInRootZone:t})),[{provide:Ie,useFactory:n},{provide:Oa,multi:!0,useFactory:()=>{let r=G(Mz,{optional:!0});return()=>r.initialize()}},{provide:Oa,multi:!0,useFactory:()=>{let r=G(Pz);return()=>{r.initialize()}}},e===!0?{provide:fR,useValue:!0}:[],{provide:pR,useValue:t??lk}]}function qR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Pz=(()=>{let e=class e{constructor(){this.subscription=new dt,this.initialized=!1,this.zone=G(Ie),this.pendingTasks=G(os)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ie.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Oz=(()=>{let e=class e{constructor(){this.appRef=G(gi),this.taskService=G(os),this.ngZone=G(Ie),this.zonelessEnabled=G(hR),this.disableScheduling=G(fR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new dt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ip):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(pR,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof sp||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?xA:uk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ip+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,xA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Fz(){return typeof $localize<"u"&&$localize.locale||gp}var eg=new J("",{providedIn:"root",factory:()=>G(eg,De.Optional|De.SkipSelf)||Fz()});var b0=new J("");function jf(n){return!!n.platformInjector}function Lz(n){let e=jf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ie);return t.run(()=>{jf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(li,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),jf(n)){let s=()=>e.destroy(),o=n.platformInjector.get(b0);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{zf(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return Az(r,t,()=>{let s=e.get($R);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(eg,gp);if(lz(o||gp),jf(n)){let a=e.get(gi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Vz(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Vz(n,e){let t=n.injector.get(gi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new re(-403,!1);e.push(n)}var zR=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=i?.scheduleInRootZone,o=()=>q$(i?.ngZone,ne(N({},qR({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:s})),a=i?.ignoreChangesOutsideZone,c=[Nz({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:Ua,useExisting:Oz}],l=Iq(r.moduleType,this.injector,c);return Lz({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let s=BR({},i);return Rz(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new re(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(b0,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(q(Bn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),uu=null,HR=new J("");function jz(n){if(uu&&!uu.get(HR,!1))throw new re(400,!1);Cz(),uu=n;let e=n.get(zR);return Bz(n),e}function E0(n,e,t=[]){let r=`Platform: ${e}`,i=new J(r);return(s=[])=>{let o=GR();if(!o||o.injector.get(HR,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):jz(Uz(a,r))}return $z(i)}}function Uz(n=[],e){return Bn.create({name:e,providers:[{provide:Ip,useValue:"platform"},{provide:b0,useValue:new Set([()=>uu=null])},...n]})}function $z(n){let e=GR();if(!e)throw new re(401,!1);return e}function GR(){return uu?.get(zR)??null}function Bz(n){n.get(Hw,null)?.forEach(t=>t())}function I0(){return!1}var Lr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=qz;let n=e;return n})();function qz(n){return zz(vn(),Ce(),(n&16)===16)}function zz(n,e,t){if(Cp(n)&&!t){let r=is(n.index,e);return new ho(r,r)}else if(n.type&175){let r=e[Zn];return new ho(r,e)}return null}var _w=class{constructor(){}supports(e){return _R(e)}create(e){return new ww(e)}},Hz=(n,e)=>e,ww=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||Hz}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<XA(r,i,s)?t:r,a=XA(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let p=0;p<l;p++){let m=p<s.length?s[p]:s[p]=0,_=m+p;d<=_&&_<l&&(s[p]=m+1)}let h=o.previousIndex;s[h]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!_R(e))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Tq(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new bw(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new mp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new mp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},bw=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ew=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},mp=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Ew,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function XA(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Iw=class{constructor(){}supports(e){return e instanceof Map||a0(e)}create(){return new Tw}},Tw=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||a0(e)))throw new re(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Cw(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Cw=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function ex(){return new T0([new _w])}var T0=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||ex()),deps:[[e,new wp,new Ga]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new re(901,!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:ex});let n=e;return n})();function tx(){return new tg([new Iw])}var tg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||tx()),deps:[[e,new wp,new Ga]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new re(901,!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:tx});let n=e;return n})();var WR=E0(null,"core",[]),KR=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(q(gi))},e.\u0275mod=Ft({type:e}),e.\u0275inj=Ot({});let n=e;return n})();var QR=new J("");function ng(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Su(n,e){Ya("NgSignals");let t=US(n);return e?.equal&&(t[ni].equal=e.equal),t}function mr(n){let e=Le(null);try{return n()}finally{Le(e)}}function YR(n){let e=Zi(n);if(!e)return null;let t=new qa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var iM=null;function yr(){return iM}function sM(n){iM??=n}var rg=class{};var Vt=new J(""),F0=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(Qz),providedIn:"platform"});let n=e;return n})(),oM=new J(""),Qz=(()=>{let e=class e extends F0{constructor(){super(),this._doc=G(Vt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yr().getBaseHref(this._doc)}onPopState(r){let i=yr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=yr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function L0(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function ZR(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function mi(n){return n&&n[0]!=="?"?"?"+n:n}var wo=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(V0),providedIn:"root"});let n=e;return n})(),aM=new J(""),V0=(()=>{let e=class e extends wo{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??G(Vt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return L0(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+mi(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+mi(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+mi(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(q(F0),q(aM,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),cM=(()=>{let e=class e extends wo{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=L0(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+mi(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+mi(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(q(F0),q(aM,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),ic=(()=>{let e=class e{constructor(r){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=Jz(ZR(JR(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+mi(i))}normalize(r){return e.stripTrailingSlash(Zz(this._basePath,JR(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+mi(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+mi(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=mi,e.joinWithSlash=L0,e.stripTrailingSlash=ZR,e.\u0275fac=function(i){return new(i||e)(q(wo))},e.\u0275prov=Y({token:e,factory:()=>Yz(),providedIn:"root"});let n=e;return n})();function Yz(){return new ic(q(wo))}function Zz(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function JR(n){return n.replace(/\/index.html$/,"")}function Jz(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var lM=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(lM||{});var yi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Au(n,e){let t=g0(n),r=t[Ja.NumberSymbols][e];if(typeof r>"u"){if(e===yi.CurrencyDecimal)return t[Ja.NumberSymbols][yi.Decimal];if(e===yi.CurrencyGroup)return t[Ja.NumberSymbols][yi.Group]}return r}function Xz(n,e){return g0(n)[Ja.NumberFormats][e]}var e3=/^(\d+)?\.((\d+)(-(\d+))?)?$/,XR=22,ig=".",xu="0",t3=";",n3=",",D0="#";function r3(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=Au(t,yi.Infinity);else{let l=a3(n);o&&(l=o3(l));let d=e.minInt,h=e.minFrac,p=e.maxFrac;if(s){let L=s.match(e3);if(L===null)throw new Error(`${s} is not a valid digit info`);let V=L[1],$=L[3],W=L[5];V!=null&&(d=S0(V)),$!=null&&(h=S0($)),W!=null?p=S0(W):$!=null&&h>p&&(p=h)}c3(l,h,p);let m=l.digits,_=l.integerLen,b=l.exponent,E=[];for(c=m.every(L=>!L);_<d;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?E=m.splice(_,m.length):(E=m,m=[0]);let k=[];for(m.length>=e.lgSize&&k.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)k.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&k.unshift(m.join("")),a=k.join(Au(t,r)),E.length&&(a+=Au(t,i)+E.join("")),b&&(a+=Au(t,yi.Exponential)+"+"+b)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function i3(n,e,t){let r=Xz(e,lM.Decimal),i=s3(r,Au(e,yi.MinusSign));return r3(n,i,e,yi.Group,yi.Decimal,t)}function s3(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(t3),i=r[0],s=r[1],o=i.indexOf(ig)!==-1?i.split(ig):[i.substring(0,i.lastIndexOf(xu)+1),i.substring(i.lastIndexOf(xu)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(D0));for(let d=0;d<c.length;d++){let h=c.charAt(d);h===xu?t.minFrac=t.maxFrac=d+1:h===D0?t.maxFrac=d+1:t.posSuf+=h}let l=a.split(n3);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,h=s.indexOf(D0);t.negPre=s.substring(0,h).replace(/'/g,""),t.negSuf=s.slice(h+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function o3(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function a3(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(ig))>-1&&(e=e.replace(ig,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===xu;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===xu;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>XR&&(r=r.splice(0,XR-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function c3(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let h=o;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let h=1;h<o;h++)r[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+n.integerLen,d=r.reduceRight(function(h,p,m,_){return p=p+h,_[m]=p<10?p:p-10,c&&(_[m]===0&&m>=l?_.pop():c=!1),p>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function S0(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function sg(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var A0=/\s+/,eM=[],sc=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=eM,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(A0):eM}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(A0):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(A0).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(B(Ct),B(xn))},e.\u0275dir=It({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var x0=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},sn=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new x0(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),tM(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);tM(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(B(kn),B(fo),B(T0))},e.\u0275dir=It({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function tM(n,e){n.context.$implicit=e.item}var $t=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new k0,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){nM("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){nM("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(B(kn),B(fo))},e.\u0275dir=It({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),k0=class{constructor(){this.$implicit=null,this.ngIf=null}};function nM(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${mn(e)}'.`)}var uM=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:Fr.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)(B(Ct),B(tg),B(xn))},e.\u0275dir=It({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let n=e;return n})();function j0(n,e){return new re(2100,!1)}var R0=class{createSubscription(e,t){return mr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){mr(()=>e.unsubscribe())}},M0=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},l3=new M0,u3=new R0,dM=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(ds(r))return l3;if(w0(r))return u3;throw j0(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(B(Lr,16))},e.\u0275pipe=ns({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();function d3(n,e){return{key:n,value:e}}var hs=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=rM}transform(r,i=rM){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let s=this.differ.diff(r),o=i!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(d3(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)(B(tg,16))},e.\u0275pipe=ns({name:"keyvalue",type:e,pure:!1,standalone:!0});let n=e;return n})();function rM(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var hM=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,s){if(!h3(r))return null;s||=this._locale;try{let o=f3(r);return i3(o,s,i)}catch(o){throw j0(e,o.message)}}};e.\u0275fac=function(i){return new(i||e)(B(eg,16))},e.\u0275pipe=ns({name:"number",type:e,pure:!0,standalone:!0});let n=e;return n})();function h3(n){return!(n==null||n===""||n!==n)}function f3(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var oc=(()=>{let e=class e{transform(r,i,s){if(r==null)return null;if(!this.supports(r))throw j0(e,r);return r.slice(i,s)}supports(r){return typeof r=="string"||Array.isArray(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=ns({name:"slice",type:e,pure:!1,standalone:!0});let n=e;return n})();var ac=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ft({type:e}),e.\u0275inj=Ot({});let n=e;return n})(),U0="browser",p3="server";function fs(n){return n===U0}function ps(n){return n===p3}var fM=(()=>{let e=class e{};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>fs(G(Wt))?new N0(G(Vt),window):new P0});let n=e;return n})(),N0=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=g3(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function g3(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var P0=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},rc=class{};var Ru=class{},ag=class{},Nn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var B0=class{encodeKey(e){return pM(e)}encodeValue(e){return pM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function m3(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var y3=/%(\d[a-f0-9])/gi,v3={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function pM(n){return encodeURIComponent(n).replace(y3,(e,t)=>v3[t]??e)}function og(n){return`${n}`}var ms=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new B0,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=m3(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(og):[og(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(og(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(og(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var q0=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function _3(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function gM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function mM(n){return typeof Blob<"u"&&n instanceof Blob}function yM(n){return typeof FormData<"u"&&n instanceof FormData}function w3(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ku=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(_3(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Nn,this.context??=new q0,!this.params)this.params=new ms,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||gM(this.body)||mM(this.body)||yM(this.body)||w3(this.body)?this.body:this.body instanceof ms?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||yM(this.body)?null:mM(this.body)?this.body.type||null:gM(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ms?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,m)=>p.set(m,e.setHeaders[m]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,m)=>p.set(m,e.setParams[m]),d)),new n(t,r,o,{params:d,headers:l,context:h,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},ys=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ys||{}),Mu=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Nn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},cg=class n extends Mu{constructor(e={}){super(e),this.type=ys.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Nu=class n extends Mu{constructor(e={}){super(e),this.type=ys.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},gs=class extends Mu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},bM=200,b3=204;function $0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var vi=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof ku)o=r;else{let l;s.headers instanceof Nn?l=s.headers:l=new Nn(s.headers);let d;s.params&&(s.params instanceof ms?d=s.params:d=new ms({fromObject:s.params})),o=new ku(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=ce(o).pipe(si(l=>this.handler.handle(l)));if(r instanceof ku||s.observe==="events")return a;let c=a.pipe(Nt(l=>l instanceof Nu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ae(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ae(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ae(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new ms().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,$0(s,i))}post(r,i,s={}){return this.request("POST",r,$0(s,i))}put(r,i,s={}){return this.request("PUT",r,$0(s,i))}};e.\u0275fac=function(i){return new(i||e)(q(Ru))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),E3=/^\)\]\}',?\n/,I3="X-Request-URL";function vM(n){if(n.url)return n.url;let e=I3.toLocaleLowerCase();return n.headers.get(e)}var T3=(()=>{let e=class e{constructor(){this.fetchImpl=G(z0,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=G(Ie)}handle(r){return new ye(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(H0,o=>i.error(new gs({error:o}))),()=>s.abort()})}doRequest(r,i,s){return y(this,null,function*(){let o=this.createRequestInit(r),a;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,N({signal:i},o)));C3(_),s.next({type:ys.Sent}),a=yield _}catch(_){s.error(new gs({error:_,status:_.status??0,statusText:_.statusText,url:r.urlWithParams,headers:_.headers}));return}let c=new Nn(a.headers),l=a.statusText,d=vM(a)??r.urlWithParams,h=a.status,p=null;if(r.reportProgress&&s.next(new cg({headers:c,status:h,statusText:l,url:d})),a.body){let _=a.headers.get("content-length"),b=[],E=a.body.getReader(),k=0,L,V,$=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>y(this,null,function*(){for(;;){let{done:K,value:C}=yield E.read();if(K)break;if(b.push(C),k+=C.length,r.reportProgress){V=r.responseType==="text"?(V??"")+(L??=new TextDecoder).decode(C,{stream:!0}):void 0;let w=()=>s.next({type:ys.DownloadProgress,total:_?+_:void 0,loaded:k,partialText:V});$?$.run(w):w()}}}));let W=this.concatChunks(b,k);try{let K=a.headers.get("Content-Type")??"";p=this.parseBody(r,W,K)}catch(K){s.error(new gs({error:K,headers:new Nn(a.headers),status:a.status,statusText:a.statusText,url:vM(a)??r.urlWithParams}));return}}h===0&&(h=p?bM:0),h>=200&&h<300?(s.next(new Nu({body:p,headers:c,status:h,statusText:l,url:d})),s.complete()):s.error(new gs({error:p,headers:c,status:h,statusText:l,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(E3,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),z0=class{};function H0(){}function C3(n){n.then(H0,H0)}function D3(n,e){return e(n)}function S3(n,e,t){return(r,i)=>Jn(t,()=>e(r,s=>n(s,i)))}var EM=new J(""),A3=new J(""),x3=new J("",{providedIn:"root",factory:()=>!0});var _M=(()=>{let e=class e extends Ru{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=G(os),this.contributeToStability=G(x3)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(EM),...this.injector.get(A3,[])]));this.chain=i.reduceRight((s,o)=>S3(s,o,this.injector),D3)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Js(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(q(ag),q(yn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();var k3=/^\)\]\}',?\n/;function R3(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var wM=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new re(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Me(i.\u0275loadImpl()):ce(null)).pipe(Je(()=>new ye(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((E,k)=>a.setRequestHeader(E,k.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let E=r.detectContentTypeHeader();E!==null&&a.setRequestHeader("Content-Type",E)}if(r.responseType){let E=r.responseType.toLowerCase();a.responseType=E!=="json"?E:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let E=a.statusText||"OK",k=new Nn(a.getAllResponseHeaders()),L=R3(a)||r.url;return l=new cg({headers:k,status:a.status,statusText:E,url:L}),l},h=()=>{let{headers:E,status:k,statusText:L,url:V}=d(),$=null;k!==b3&&($=typeof a.response>"u"?a.responseText:a.response),k===0&&(k=$?bM:0);let W=k>=200&&k<300;if(r.responseType==="json"&&typeof $=="string"){let K=$;$=$.replace(k3,"");try{$=$!==""?JSON.parse($):null}catch(C){$=K,W&&(W=!1,$={error:C,text:$})}}W?(o.next(new Nu({body:$,headers:E,status:k,statusText:L,url:V||void 0})),o.complete()):o.error(new gs({error:$,headers:E,status:k,statusText:L,url:V||void 0}))},p=E=>{let{url:k}=d(),L=new gs({error:E,status:a.status||0,statusText:a.statusText||"Unknown Error",url:k||void 0});o.error(L)},m=!1,_=E=>{m||(o.next(d()),m=!0);let k={type:ys.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(k.total=E.total),r.responseType==="text"&&a.responseText&&(k.partialText=a.responseText),o.next(k)},b=E=>{let k={type:ys.UploadProgress,loaded:E.loaded};E.lengthComputable&&(k.total=E.total),o.next(k)};return a.addEventListener("load",h),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),r.reportProgress&&(a.addEventListener("progress",_),c!==null&&a.upload&&a.upload.addEventListener("progress",b)),a.send(c),o.next({type:ys.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",h),a.removeEventListener("timeout",p),r.reportProgress&&(a.removeEventListener("progress",_),c!==null&&a.upload&&a.upload.removeEventListener("progress",b)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(q(rc))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),IM=new J(""),M3="XSRF-TOKEN",N3=new J("",{providedIn:"root",factory:()=>M3}),P3="X-XSRF-TOKEN",O3=new J("",{providedIn:"root",factory:()=>P3}),lg=class{},F3=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=sg(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(q(Vt),q(Wt),q(N3))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function L3(n,e){let t=n.url.toLowerCase();if(!G(IM)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=G(lg).getToken(),i=G(O3);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function TM(...n){let e=[vi,wM,_M,{provide:Ru,useExisting:_M},{provide:ag,useFactory:()=>G(T3,{optional:!0})??G(wM)},{provide:EM,useValue:L3,multi:!0},{provide:IM,useValue:!0},{provide:lg,useClass:F3}];for(let t of n)e.push(...t.\u0275providers);return Ep(e)}var Q0=class extends rg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Y0=class n extends Q0{static makeCurrent(){sM(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=V3();return t==null?null:j3(t)}resetBaseElement(){Pu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sg(document.cookie,e)}},Pu=null;function V3(){return Pu=Pu||document.querySelector("base"),Pu?Pu.getAttribute("href"):null}function j3(n){return new URL(n,document.baseURI).pathname}var Z0=class{addToWindow(e){Gt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new re(5103,!1);return s},Gt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Gt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Gt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Gt.frameworkStabilizers||(Gt.frameworkStabilizers=[]),Gt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?yr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},U3=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),ug=new J(""),AM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new re(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(q(ug),q(Ie))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Ou=class{constructor(e){this._doc=e}},W0="ng-app-id",xM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ps(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${W0}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(W0),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(W0,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(q(Vt),q(Np),q(Gw,8),q(Wt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),K0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},X0=/%COMP%/g,kM="%COMP%",$3=`_nghost-${kM}`,B3=`_ngcontent-${kM}`,q3=!0,z3=new J("",{providedIn:"root",factory:()=>q3});function H3(n){return B3.replace(X0,n)}function G3(n){return $3.replace(X0,n)}function RM(n,e){return e.map(t=>t.replace(X0,n))}var CM=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=ps(c),this.defaultRenderer=new Fu(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Nr.ShadowDom&&(i=ne(N({},i),{encapsulation:Nr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof dg?s.applyToHost(r):s instanceof Lu&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Nr.Emulated:o=new dg(l,d,i,this.appId,h,a,c,p);break;case Nr.ShadowDom:return new J0(l,d,r,i,a,c,this.nonce,p);default:o=new Lu(l,d,i,h,a,c,p);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(q(AM),q(xM),q(Np),q(z3),q(Vt),q(Wt),q(Ie),q(Gw))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Fu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(K0[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(DM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(DM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new re(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=K0[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=K0[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Fr.DashCase|Fr.Important)?e.style.setProperty(t,r,i&Fr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Fr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=yr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function DM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var J0=class extends Fu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=RM(i.id,i.styles);for(let d of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Lu=class extends Fu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?RM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},dg=class extends Lu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=H3(l),this.hostAttr=G3(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},W3=(()=>{let e=class e extends Ou{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(q(Vt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),K3=(()=>{let e=class e extends Ou{constructor(r){super(r),this.delegate=G(QR,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(q(Vt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),SM=["alt","control","meta","shift"],Q3={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Y3={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Z3=(()=>{let e=class e extends Ou{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),SM.forEach(d=>{let h=i.indexOf(d);h>-1&&(i.splice(h,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=Q3[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),SM.forEach(a=>{if(a!==s){let c=Y3[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(q(Vt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function J3(){Y0.makeCurrent()}function X3(){return new li}function eH(){return yk(document),document}var tH=[{provide:Wt,useValue:U0},{provide:Hw,useValue:J3,multi:!0},{provide:Vt,useFactory:eH,deps:[]}],MM=E0(WR,"browser",tH),nH=new J(""),rH=[{provide:Du,useClass:Z0,deps:[]},{provide:v0,useClass:Qp,deps:[Ie,Yp,Du]},{provide:Qp,useClass:Qp,deps:[Ie,Yp,Du]}],iH=[{provide:Ip,useValue:"root"},{provide:li,useFactory:X3,deps:[]},{provide:ug,useClass:W3,multi:!0,deps:[Vt,Ie,Wt]},{provide:ug,useClass:Z3,multi:!0,deps:[Vt]},{provide:ug,useClass:K3,multi:!0},CM,xM,AM,{provide:Ba,useExisting:CM},{provide:rc,useClass:U3,deps:[]},[]],NM=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Np,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(q(nH,12))},e.\u0275mod=Ft({type:e}),e.\u0275inj=Ot({providers:[...iH,...rH],imports:[ac,KR]});let n=e;return n})(),PM=(()=>{let e=class e{constructor(r){this._doc=r,this._dom=yr()}addTag(r,i=!1){return r?this._getOrCreateElement(r,i):null}addTags(r,i=!1){return r?r.reduce((s,o)=>(o&&s.push(this._getOrCreateElement(o,i)),s),[]):[]}getTag(r){return r&&this._doc.querySelector(`meta[${r}]`)||null}getTags(r){if(!r)return[];let i=this._doc.querySelectorAll(`meta[${r}]`);return i?[].slice.call(i):[]}updateTag(r,i){if(!r)return null;i=i||this._parseSelector(r);let s=this.getTag(i);return s?this._setMetaElementAttributes(r,s):this._getOrCreateElement(r,!0)}removeTag(r){this.removeTagElement(this.getTag(r))}removeTagElement(r){r&&this._dom.remove(r)}_getOrCreateElement(r,i=!1){if(!i){let a=this._parseSelector(r),c=this.getTags(a).filter(l=>this._containsAttributes(r,l))[0];if(c!==void 0)return c}let s=this._dom.createElement("meta");return this._setMetaElementAttributes(r,s),this._doc.getElementsByTagName("head")[0].appendChild(s),s}_setMetaElementAttributes(r,i){return Object.keys(r).forEach(s=>i.setAttribute(this._getMetaKeyMap(s),r[s])),i}_parseSelector(r){let i=r.name?"name":"property";return`${i}="${r[i]}"`}_containsAttributes(r,i){return Object.keys(r).every(s=>i.getAttribute(this._getMetaKeyMap(s))===r[s])}_getMetaKeyMap(r){return sH[r]||r}};e.\u0275fac=function(i){return new(i||e)(q(Vt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),sH={httpEquiv:"http-equiv"},Pn=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(q(Vt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var bo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=q(oH),s},providedIn:"root"});let n=e;return n})(),oH=(()=>{let e=class e extends bo{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case An.NONE:return i;case An.HTML:return as(i,"HTML")?Xn(i):xk(this._doc,String(i)).toString();case An.STYLE:return as(i,"Style")?Xn(i):i;case An.SCRIPT:if(as(i,"Script"))return Xn(i);throw new re(5200,!1);case An.URL:return as(i,"URL")?Xn(i):Op(String(i));case An.RESOURCE_URL:if(as(i,"ResourceURL"))return Xn(i);throw new re(5201,!1);default:throw new re(5202,!1)}}bypassSecurityTrustHtml(r){return _k(r)}bypassSecurityTrustStyle(r){return wk(r)}bypassSecurityTrustScript(r){return bk(r)}bypassSecurityTrustUrl(r){return Ek(r)}bypassSecurityTrustResourceUrl(r){return Ik(r)}};e.\u0275fac=function(i){return new(i||e)(q(Vt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function nb(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Io=nb();function UM(n){Io=n}var $M=/[&<>"']/,aH=new RegExp($M.source,"g"),BM=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,cH=new RegExp(BM.source,"g"),lH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},OM=n=>lH[n];function qn(n,e){if(e){if($M.test(n))return n.replace(aH,OM)}else if(BM.test(n))return n.replace(cH,OM);return n}var uH=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function dH(n){return n.replace(uH,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var hH=/(^|[^\[])\^/g;function Ke(n,e){let t=typeof n=="string"?n:n.source;e=e||"";let r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(hH,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function FM(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var ju={exec:()=>null};function LM(n,e){let t=n.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=t.split(/ \|/),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function hg(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function fH(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function VM(n,e,t,r){let i=e.href,s=e.title?qn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:qn(o)}}function pH(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var lc=class{options;rules;lexer;constructor(e){this.options=e||Io}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:hg(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=pH(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let i=hg(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=hg(r.replace(/^ *>[ \t]?/gm,""),`
`);let i=this.lexer.state.top;this.lexer.state.top=!0;let s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",c="",l=!1;for(;e;){let d=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,k=>" ".repeat(3*k.length)),p=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,c=h.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=h.slice(m),m+=t[1].length);let _=!1;if(!h&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),d=!0),!d){let k=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),L=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),V=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),$=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){let W=e.split(`
`,1)[0];if(p=W,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),V.test(p)||$.test(p)||k.test(p)||L.test(e))break;if(p.search(/[^ ]/)>=m||!p.trim())c+=`
`+p.slice(m);else{if(_||h.search(/[^ ]/)>=4||V.test(h)||$.test(h)||L.test(h))break;c+=`
`+p}!_&&!p.trim()&&(_=!0),a+=W+`
`,e=e.substring(W.length+1),h=p.slice(m)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let b=null,E;this.options.gfm&&(b=/^\[[ xX]\] /.exec(c),b&&(E=b[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!b,checked:E,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){let h=s.items[d].tokens.filter(m=>m.type==="space"),p=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));s.loose=p}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=LM(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of s)o.rows.push(LM(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:qn(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let o=hg(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=fH(t[2],"()");if(o>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),VM(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return VM(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,c,l=o,d=0,h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(c=[...a].length,i[3]||i[4]){l+=c;continue}else if((i[5]||i[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);let p=[...i[0]][0].length,m=e.slice(0,o+i.index+p+c);if(Math.min(o,c)%2){let b=m.slice(1,-1);return{type:"em",raw:m,text:b,tokens:this.lexer.inlineTokens(b)}}let _=m.slice(2,-2);return{type:"strong",raw:m,text:_,tokens:this.lexer.inlineTokens(_)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=qn(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=qn(t[1]),i="mailto:"+r):(r=qn(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=qn(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=qn(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=qn(t[0]),{type:"text",raw:t[0],text:r}}}},gH=/^(?: *(?:\n|$))+/,mH=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,yH=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,$u=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,vH=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,qM=/(?:[*+-]|\d{1,9}[.)])/,zM=Ke(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,qM).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),rb=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_H=/^[^\n]+/,ib=/(?!\s*\])(?:\\.|[^\[\]\\])+/,wH=Ke(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ib).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),bH=Ke(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,qM).getRegex(),gg="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",sb=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,EH=Ke("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",sb).replace("tag",gg).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),HM=Ke(rb).replace("hr",$u).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gg).getRegex(),IH=Ke(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",HM).getRegex(),ob={blockquote:IH,code:mH,def:wH,fences:yH,heading:vH,hr:$u,html:EH,lheading:zM,list:bH,newline:gH,paragraph:HM,table:ju,text:_H},jM=Ke("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",$u).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gg).getRegex(),TH=ne(N({},ob),{table:jM,paragraph:Ke(rb).replace("hr",$u).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",jM).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gg).getRegex()}),CH=ne(N({},ob),{html:Ke(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",sb).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ju,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ke(rb).replace("hr",$u).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),GM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,DH=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,WM=/^( {2,}|\\)\n(?!\s*$)/,SH=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Bu="\\p{P}\\p{S}",AH=Ke(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Bu).getRegex(),xH=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,kH=Ke(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Bu).getRegex(),RH=Ke("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Bu).getRegex(),MH=Ke("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Bu).getRegex(),NH=Ke(/\\([punct])/,"gu").replace(/punct/g,Bu).getRegex(),PH=Ke(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),OH=Ke(sb).replace("(?:-->|$)","-->").getRegex(),FH=Ke("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",OH).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),pg=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,LH=Ke(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",pg).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),KM=Ke(/^!?\[(label)\]\[(ref)\]/).replace("label",pg).replace("ref",ib).getRegex(),QM=Ke(/^!?\[(ref)\](?:\[\])?/).replace("ref",ib).getRegex(),VH=Ke("reflink|nolink(?!\\()","g").replace("reflink",KM).replace("nolink",QM).getRegex(),ab={_backpedal:ju,anyPunctuation:NH,autolink:PH,blockSkip:xH,br:WM,code:DH,del:ju,emStrongLDelim:kH,emStrongRDelimAst:RH,emStrongRDelimUnd:MH,escape:GM,link:LH,nolink:QM,punctuation:AH,reflink:KM,reflinkSearch:VH,tag:FH,text:SH,url:ju},jH=ne(N({},ab),{link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",pg).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",pg).getRegex()}),eb=ne(N({},ab),{escape:Ke(GM).replace("])","~|])").getRegex(),url:Ke(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),UH=ne(N({},eb),{br:Ke(WM).replace("{2,}","*").getRegex(),text:Ke(eb.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),fg={normal:ob,gfm:TH,pedantic:CH},Vu={normal:ab,gfm:eb,breaks:UH,pedantic:jH},_i=class n{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Io,this.options.tokenizer=this.options.tokenizer||new lc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:fg.normal,inline:Vu.normal};this.options.pedantic?(t.block=fg.pedantic,t.inline=Vu.pedantic):this.options.gfm&&(t.block=fg.gfm,this.options.breaks?t.inline=Vu.breaks:t.inline=Vu.gfm),this.tokenizer.rules=t}static get rules(){return{block:fg,inline:Vu}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,c=e.slice(1),l;this.options.extensions.startBlock.forEach(d=>{l=d.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,c,l;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,l)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},h),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},st=class{options;constructor(e){this.options=e||Io}code(e,t,r){let i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+qn(i)+'">'+(r?e:qn(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:qn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){let i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){let r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){let i=FM(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){let i=FM(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}},Uu=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},wi=class n{options;renderer;textRenderer;constructor(e){this.options=e||Io,this.options.renderer=this.options.renderer||new st,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Uu}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{let o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,dH(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=s,a="",c="";for(let d=0;d<o.header.length;d++)c+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(c);let l="";for(let d=0;d<o.rows.length;d++){let h=o.rows[d];c="";for(let p=0;p<h.length;p++)c+=this.renderer.tablecell(this.parseInline(h[p].tokens),{header:!1,align:o.align[p]});l+=this.renderer.tablerow(c)}r+=this.renderer.table(a,l);continue}case"blockquote":{let o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{let o=s,a=o.ordered,c=o.start,l=o.loose,d="";for(let h=0;h<o.items.length;h++){let p=o.items[h],m=p.checked,_=p.task,b="";if(p.task){let E=this.renderer.checkbox(!!m);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=E+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=E+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:E+" "}):b+=E+" "}b+=this.parse(p.tokens,l),d+=this.renderer.listitem(b,_,!!m)}r+=this.renderer.list(d,a,c);continue}case"html":{let o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{let o=s;r+=t.text(o.text);break}case"html":{let o=s;r+=t.html(o.text);break}case"link":{let o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{let o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{let o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{let o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{let o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{let o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{let o=s;r+=t.text(o.text);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},cc=class{options;constructor(e){this.options=e||Io}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},tb=class{defaults=nb();options=this.setOptions;parse=this.#s(_i.lex,wi.parse);parseInline=this.#s(_i.lexInline,wi.parseInline);Parser=wi;Renderer=st;TextRenderer=Uu;Lexer=_i;Tokenizer=lc;Hooks=cc;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i=N({},r);if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let c=s.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){let s=this.defaults.renderer||new st(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.renderer[a],l=s[a];s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new lc(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,c=r.tokenizer[a],l=s[a];s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new cc;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.hooks[a],l=s[a];cc.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(c.call(s,d)).then(p=>l.call(s,p));let h=c.call(s,d);return l.call(s,h)}:s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults=N(N({},this.defaults),i)}),this}setOptions(e){return this.defaults=N(N({},this.defaults),e),this}lexer(e,t){return _i.lex(e,t??this.defaults)}parser(e,t){return wi.parse(e,t??this.defaults)}#s(e,t){return(r,i)=>{let s=N({},i),o=N(N({},this.defaults),s);this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let a=this.#l(!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#l(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+qn(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Eo=new tb;function Ne(n,e){return Eo.parse(n,e)}Ne.options=Ne.setOptions=function(n){return Eo.setOptions(n),Ne.defaults=Eo.defaults,UM(Ne.defaults),Ne};Ne.getDefaults=nb;Ne.defaults=Io;Ne.use=function(...n){return Eo.use(...n),Ne.defaults=Eo.defaults,UM(Ne.defaults),Ne};Ne.walkTokens=function(n,e){return Eo.walkTokens(n,e)};Ne.parseInline=Eo.parseInline;Ne.Parser=wi;Ne.parser=wi.parse;Ne.Renderer=st;Ne.TextRenderer=Uu;Ne.Lexer=_i;Ne.lexer=_i.lex;Ne.Tokenizer=lc;Ne.Hooks=cc;Ne.parse=Ne;var Nre=Ne.options,Pre=Ne.setOptions,Ore=Ne.use,Fre=Ne.walkTokens,Lre=Ne.parseInline;var Vre=wi.parse,jre=_i.lex;var $H=["*"],BH="Copy",qH="Copied",zH=(()=>{let e=class e{constructor(){this._buttonClick$=new He,this.copied$=this._buttonClick$.pipe(Je(()=>ru(ce(!0),t_(3e3).pipe(iu(!1)))),su(),Sa(1)),this.copiedText$=this.copied$.pipe(ai(!1),ae(r=>r?qH:BH))}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=xe({type:e,selectors:[["markdown-clipboard"]],standalone:!0,features:[Cu],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,s){i&1&&(x(0,"button",0),Dt(1,"async"),Se("click",function(){return s.onCopyToClipboardClick()}),U(2),Dt(3,"async"),M()),i&2&&(Za("copied",Mn(1,3,s.copied$)),j(2),qe(Mn(3,5,s.copiedText$)))},dependencies:[dM],encapsulation:2,changeDetection:0});let n=e;return n})(),HH=new J("CLIPBOARD_OPTIONS");var cb=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(cb||{}),ZM=new J("MARKED_EXTENSIONS"),lb=new J("MARKED_OPTIONS"),GH="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",WH="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",KH="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",QH="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",YH="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",ZH="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",JM=new J("SECURITY_CONTEXT");var on=(()=>{let e=class e{get options(){return this._options}set options(r){this._options=N(N({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,s,o,a,c,l){this.clipboardOptions=r,this.extensions=i,this.platform=o,this.securityContext=a,this.http=c,this.sanitizer=l,this.DEFAULT_MARKED_OPTIONS={renderer:new st},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new He,this.reload$=this._reload$.asObservable(),this.options=s}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:l}=i,d=N(N({},this.options),i.markedOptions),h=d.renderer||this.renderer||new st;this.extensions&&(this.renderer=this.extendsRendererForExtensions(h)),c&&(this.renderer=this.extendsRendererForMermaid(h));let p=this.trimIndentation(r),m=s?this.decodeHtml(p):p,_=a?this.parseEmoji(m):m,b=this.parseMarked(_,d,o);return(l?b:this.sanitizer.sanitize(this.securityContext,b))||""}render(r,i=this.DEFAULT_RENDER_OPTIONS,s){let{clipboard:o,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=i;c&&this.renderKatex(r,N(N({},this.DEFAULT_KATEX_OPTIONS),l)),d&&this.renderMermaid(r,N(N({},this.DEFAULT_MERMAID_OPTIONS),h)),o&&this.renderClipboard(r,s,N(N(N({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(ZH);return this.http.get(r,{responseType:"text"}).pipe(ae(i=>this.handleExtension(r,i)))}highlight(r){if(!fs(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,s=>s.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!fs(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&Ne.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let s=r.code;return r.code=function(o,a,c){return a==="mermaid"?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let s=r.lastIndexOf("://"),o=s>-1?r.substring(s+4):r,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&d!=="md"?"```"+d+`
`+i+"\n```":i}parseMarked(r,i,s=!1){if(i.renderer){let o=N({},i.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Ne.use({renderer:o})}return s?Ne.parseInline(r,i):Ne.parse(r,i)}parseEmoji(r){if(!fs(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(GH);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(fs(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(WH);renderMathInElement(r,i)}}renderClipboard(r,i,s){if(!fs(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(QH);if(!i)throw new Error(YH);let{buttonComponent:o,buttonTemplate:a}=s,c=r.querySelectorAll("pre");for(let l=0;l<c.length;l++){let d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);let p=document.createElement("div");p.classList.add("markdown-clipboard-toolbar"),p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.zIndex="1",h.insertAdjacentElement("beforeend",p),h.onmouseenter=()=>p.classList.add("hover"),h.onmouseleave=()=>p.classList.remove("hover");let m;if(o){let b=i.createComponent(o);m=b.hostView,b.changeDetectorRef.markForCheck()}else if(a)m=i.createEmbeddedView(a);else{let b=i.createComponent(zH);m=b.hostView,b.changeDetectorRef.markForCheck()}let _;m.rootNodes.forEach(b=>{p.appendChild(b),_=new ClipboardJS(b,{text:()=>d.innerText})}),m.onDestroy(()=>_.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!fs(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(KH);let s=r.querySelectorAll(".mermaid");s.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:s}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(s=>{let o=i;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(i)&&(i=o),o?s.substring(o):s}).join(`
`)}};e.\u0275fac=function(i){return new(i||e)(q(HH,8),q(ZM,8),q(lb,8),q(Wt),q(JM),q(vi,8),q(bo))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),tr=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,s){this.element=r,this.markdownService=i,this.viewContainerRef=s,this.error=new nt,this.load=new nt,this.ready=new nt,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new He}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(au(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return y(this,null,function*(){let s={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,s);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,cb.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,cb.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++){let a=i instanceof Array?i:[i];s.item(o).classList.add(...a)}}setPluginOptions(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(i).forEach(a=>{let c=i[a];if(c){let l=this.toLispCase(a);s.item(o).setAttribute(l,c.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let s=r.toString();for(let o=0,a=i.length;o<a;o++)s=s.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return s.slice(0,1)==="-"&&(s=s.slice(1)),s}};e.\u0275fac=function(i){return new(i||e)(B(Ct),B(on),B(kn))},e.\u0275cmp=xe({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[rs,Cu],ngContentSelectors:$H,decls:1,vars:0,template:function(i,s){i&1&&(PR(),OR(0))},encapsulation:2});let n=e;return n})();function JH(n){return[on,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],{provide:ZM,useValue:n?.markedExtensions??[]},{provide:JM,useValue:n?.sanitize??An.HTML}]}var XM=(()=>{let e=class e{static forRoot(r){return{ngModule:e,providers:[JH(r)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ft({type:e}),e.\u0275inj=Ot({imports:[ac]});let n=e;return n})(),YM;(function(n){let e;(function(i){i.Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox"})(e=n.SecurityLevel||(n.SecurityLevel={}));let t;(function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"})(t=n.Theme||(n.Theme={}));let r;(function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(r=n.LogLevel||(n.LogLevel={}))})(YM||(YM={}));var c1=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(B(xn),B(Ct))},e.\u0275dir=It({type:e});let n=e;return n})(),db=(()=>{let e=class e extends c1{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=mo(e)))(s||e)}})(),e.\u0275dir=It({type:e,features:[pt]});let n=e;return n})(),Ig=new J("");var eG={provide:Ig,useExisting:ts(()=>pc),multi:!0};function tG(){let n=yr()?yr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var nG=new J(""),pc=(()=>{let e=class e extends c1{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!tG())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(B(xn),B(Ct),B(nG,8))},e.\u0275dir=It({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Se("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[tc([eG]),pt]});let n=e;return n})();var l1=new J(""),u1=new J("");function d1(n){return n!=null}function h1(n){return ds(n)?Me(n):n}function f1(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function p1(n,e){return e.map(t=>t(n))}function rG(n){return!n.validate}function g1(n){return n.map(e=>rG(e)?e:t=>e.validate(t))}function iG(n){if(!n)return null;let e=n.filter(d1);return e.length==0?null:function(t){return f1(p1(t,e))}}function hb(n){return n!=null?iG(g1(n)):null}function sG(n){if(!n)return null;let e=n.filter(d1);return e.length==0?null:function(t){let r=p1(t,e).map(h1);return e_(r).pipe(ae(f1))}}function fb(n){return n!=null?sG(g1(n)):null}function e1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function oG(n){return n._rawValidators}function aG(n){return n._rawAsyncValidators}function ub(n){return n?Array.isArray(n)?n:[n]:[]}function yg(n,e){return Array.isArray(n)?n.includes(e):n===e}function t1(n,e){let t=ub(e);return ub(n).forEach(i=>{yg(t,i)||t.push(i)}),t}function n1(n,e){return ub(e).filter(t=>!yg(n,t))}var vg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},hc=class extends vg{get formDirective(){return null}get path(){return null}},Ku=class extends vg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},_g=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},cG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},_ie=ne(N({},cG),{"[class.ng-submitted]":"isSubmitted"}),Tg=(()=>{let e=class e extends _g{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(B(Ku,2))},e.\u0275dir=It({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Za("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[pt]});let n=e;return n})(),m1=(()=>{let e=class e extends _g{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(B(hc,10))},e.\u0275dir=It({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Za("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[pt]});let n=e;return n})();var qu="VALID",mg="INVALID",uc="PENDING",zu="DISABLED",fc=class{},wg=class extends fc{constructor(e,t){super(),this.value=e,this.source=t}},Gu=class extends fc{constructor(e,t){super(),this.pristine=e,this.source=t}},Wu=class extends fc{constructor(e,t){super(),this.touched=e,this.source=t}},dc=class extends fc{constructor(e,t){super(),this.status=e,this.source=t}};function y1(n){return(Cg(n)?n.validators:n)||null}function lG(n){return Array.isArray(n)?hb(n):n||null}function v1(n,e){return(Cg(e)?e.asyncValidators:n)||null}function uG(n){return Array.isArray(n)?fb(n):n||null}function Cg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function dG(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new re(1e3,"");if(!r[t])throw new re(1001,"")}function hG(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new re(1002,"")})}var bg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Su(()=>this.statusReactive()),this.statusReactive=Iu(void 0),this._pristine=Su(()=>this.pristineReactive()),this.pristineReactive=Iu(!0),this._touched=Su(()=>this.touchedReactive()),this.touchedReactive=Iu(!1),this._events=new He,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return mr(this.statusReactive)}set status(e){mr(()=>this.statusReactive.set(e))}get valid(){return this.status===qu}get invalid(){return this.status===mg}get pending(){return this.status==uc}get disabled(){return this.status===zu}get enabled(){return this.status!==zu}get pristine(){return mr(this.pristineReactive)}set pristine(e){mr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return mr(this.touchedReactive)}set touched(e){mr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(t1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(t1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(n1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(n1(e,this._rawAsyncValidators))}hasValidator(e){return yg(this._rawValidators,e)}hasAsyncValidator(e){return yg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Wu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Wu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(N({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Gu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Gu(!0,r))}markAsPending(e={}){this.status=uc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(N({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=zu,this.errors=null,this._forEachChild(i=>{i.disable(ne(N({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wg(this.value,r)),this._events.next(new dc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=qu,this._forEachChild(r=>{r.enable(ne(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(N({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qu||this.status===uc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new wg(this.value,t)),this._events.next(new dc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(N({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zu:qu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=uc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=h1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new dc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?zu:this.errors?mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(uc)?uc:this._anyControlsHaveStatus(mg)?mg:qu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Gu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Wu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Cg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=lG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=uG(this._rawAsyncValidators)}},Eg=class extends bg{constructor(e,t,r){super(y1(t),v1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){hG(this,!0,e),Object.keys(e).forEach(r=>{dG(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var pb=new J("CallSetDisabledState",{providedIn:"root",factory:()=>gb}),gb="always";function fG(n,e){return[...e.path,n]}function _1(n,e,t=gb){w1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),gG(n,e),yG(n,e),mG(n,e),pG(n,e)}function r1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function w1(n,e){let t=oG(n);e.validator!==null?n.setValidators(e1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=aG(n);e.asyncValidator!==null?n.setAsyncValidators(e1(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();r1(e._rawValidators,i),r1(e._rawAsyncValidators,i)}function gG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&b1(n,e)})}function mG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&b1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function b1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function yG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function vG(n,e){n==null,w1(n,e)}function _G(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function wG(n){return Object.getPrototypeOf(n.constructor)===db}function bG(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function EG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===pc?t=s:wG(s)?r=s:i=s}),i||r||t||null}var IG={provide:hc,useExisting:ts(()=>mb)},Hu=Promise.resolve(),mb=(()=>{let e=class e extends hc{get submitted(){return mr(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Su(()=>this.submittedReactive()),this.submittedReactive=Iu(!1),this._directives=new Set,this.ngSubmit=new nt,this.form=new Eg({},hb(r),fb(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Hu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),_1(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Hu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Hu.then(()=>{let i=this._findContainer(r.path),s=new Eg({});vG(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Hu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Hu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),bG(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(B(l1,10),B(u1,10),B(pb,8))},e.\u0275dir=It({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Se("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[tc([IG]),pt]});let n=e;return n})();function i1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function s1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var TG=class extends bg{constructor(e=null,t,r){super(y1(t),v1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Cg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(s1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){i1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){i1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){s1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var CG={provide:Ku,useExisting:ts(()=>Qu)},o1=Promise.resolve(),Qu=(()=>{let e=class e extends Ku{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new TG,this._registered=!1,this.name="",this.update=new nt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=EG(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),_G(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){_1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){o1.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&ng(i);o1.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?fG(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(B(hc,9),B(l1,10),B(u1,10),B(Ig,10),B(Lr,8),B(pb,8))},e.\u0275dir=It({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[tc([CG]),pt,rs]});let n=e;return n})(),E1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=It({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var DG={provide:Ig,useExisting:ts(()=>Dg),multi:!0};function I1(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function SG(n){return n.split(":")[0]}var Dg=(()=>{let e=class e extends db{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=I1(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=SG(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=mo(e)))(s||e)}})(),e.\u0275dir=It({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Se("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[tc([DG]),pt]});let n=e;return n})(),T1=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(I1(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(B(Ct),B(xn),B(Dg,9))},e.\u0275dir=It({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),AG={provide:Ig,useExisting:ts(()=>C1),multi:!0};function a1(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function xG(n){return n.split(":")[0]}var C1=(()=>{let e=class e extends db{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],d=this._getOptionValue(l.value);s.push(d)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let d=this._getOptionValue(l.value);s.push(d)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=xG(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=mo(e)))(s||e)}})(),e.\u0275dir=It({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Se("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[tc([AG]),pt]});let n=e;return n})(),D1=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(a1(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(a1(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(B(Ct),B(xn),B(C1,9))},e.\u0275dir=It({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var kG=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ft({type:e}),e.\u0275inj=Ot({});let n=e;return n})();var S1=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:pb,useValue:r.callSetDisabledState??gb}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ft({type:e}),e.\u0275inj=Ot({imports:[kG]});let n=e;return n})();var le={production:!0,host:"https://publichome.page",port:"8888",eventBusURL:"https://publichome.page:8888/eventbus/",defaultFirm:"SS",redirect_url:"https://publichome.page/u",client_id:"8c987bdba61457c20417",client_secret:"DONT_SEND_FROM_FRONT_END",gh_default_user_repo:"publichomepage",gh_dr_folder:"my/main",gh_dr_url:"https://raw.githubusercontent.com",gh_api_url:"https://api.github.com",gh_auth_url:"https://github.com/login/oauth/authorize",gh_private_dr_folder:"my",js_deliver:{enabled:!0,url:"https://cdn.jsdelivr.net/gh",version:"my@main"},supabase:{url:"https://typxscdilfdoojpvltpu.supabase.co",key:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR5cHhzY2RpbGZkb29qcHZsdHB1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc1MTAxNjUsImV4cCI6MjA2MzA4NjE2NX0.iGs-gu6YFWvidGZjpLNQRh2rOBz_SP7dIoEPnX2sLTQ"},paypal:{clientId:"AT0mPVwfaTYBL98tGhMDLAC1xipOay7r4XRsgPIupHCbqYdJtb4V37CwRjnlfgnTBIR5WODmtFvJjIun",planId:"P-8U0801659U631744PNATP3PA",planIdWithCoupon:"P-XYZ",couponCode:"SOLOPRENEUR"},pineconeConfig:{apiKey:"pcsk_3Akhgu_3pS3hHzA7fBJmnHNVg9e7grZFj8pjvPtiQ9uCVA2n2UURFEmrZjXy1fi4XQSwEP",index:"example-index"},openApiKey:"ABCD",firebaseConfig:{apiKey:"AIzaSyBdEWJQNGtrtL88aX5sE2VGEqYpWLXtpFQ",authDomain:"publichomepage-b872d.firebaseapp.com",projectId:"publichomepage-b872d",storageBucket:"publichomepage-b872d.appspot.com",messagingSenderId:"850538578524",appId:"1:850538578524:web:56c70f38ac285bffd5dc99",measurementId:"G-TRBD0HQFWM"}};var an=(()=>{let e=class e{constructor(){this._event=new He,this.event$=this._event.asObservable()}send(r){this._event.next(r)}observable(){return this.event$}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function RG(n,e){n&1&&se(0,"app-footer")}var Be=class Be{constructor(e){this.messaging=e,this.sponserVisible=!0,this.footerVisible=!0,localStorage.setItem("debug","true"),Be.iconsColorByBrandKey.set("facebook","#3b5998"),Be.iconsColorByBrandKey.set("youtube","#ed302f"),Be.iconsColorByBrandKey.set("discord","#7289DA"),Be.iconsColorByBrandKey.set("linkedin","#0082ca"),Be.iconsColorByBrandKey.set("github","#bcbcbc"),Be.iconsColorByBrandKey.set("link","green"),Be.iconsColorByBrandKey.set("self","green"),Be.iconsColorByBrandKey.set("whatsapp","green"),Be.iconsColorByBrandKey.set("instagram","blue"),this.messaging.event$.subscribe(t=>{let r=t;switch(r.cmd){case"host":r.file=="IaComponent"&&(this.sponserVisible=!1,this.footerVisible=!1);break;case"UserContext":break;default:break}})}loadScript(e){let t=document.body,r=document.createElement("script");r.innerHTML="",r.src=e,r.async=!1,t.appendChild(r)}};Be.title="Public Homepage",Be.ghUserLoaded=le.gh_default_user_repo,Be.readme_home=`${le.gh_dr_url}/${le.gh_default_user_repo}/${le.gh_dr_folder}/README.md`,Be.user_contacts=`${le.gh_dr_url}/${le.gh_default_user_repo}/${le.gh_dr_folder}/contacts.md`,Be.fab_questions_list2=`${le.gh_dr_url}/${le.gh_default_user_repo}/${le.gh_dr_folder}/questions/ds-list2.md`,Be.YOUR_READ_ME="",Be.ghUser={name:Be.title,blog:"/"},Be.userContext={username:"",status:"0",directory:{},youtube_links:new Set,leetcode_links:new Set,assessment:{}},Be.INTERNAL_FOLDERS=["my","roadmap","questions","articles","faqs","coding","credits","README.md","contacts.md","assessments"],Be.homeUser={name:Be.title,blog:"/"},Be.navLinks=[{link:"#about",text:"About"}],Be.contactLinksByKey=new Map,Be.contactTextsByKey=new Map,Be.contactHostNameByKeys=new Map,Be.iconsColorByBrandKey=new Map,Be.\u0275fac=function(t){return new(t||Be)(B(an))},Be.\u0275cmp=xe({type:Be,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,r){t&1&&(se(0,"app-navbar")(1,"router-outlet"),fe(2,RG,1,0,"app-footer",0)),t&2&&(j(2),Q("ngIf",r.footerVisible))}});var Z=Be;var A1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-O6E4JZHF.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};var Yu=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},Sg=class extends Yu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Ag=class extends Yu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},xg=class extends Yu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},vb=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(vb||{});var MG=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Zu=class{constructor(e,{headers:t={},customFetch:r,region:i=vb.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=A1(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return MG(this,void 0,void 0,function*(){try{let{headers:i,method:s,body:o}=t,a={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));let d=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(_=>{throw new Sg(_)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Ag(d);if(!d.ok)throw new xg(d);let p=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield d.json():p==="application/octet-stream"?m=yield d.blob():p==="text/event-stream"?m=d:p==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(i){return{data:null,error:i}}})}};var $1=y2(U1(),1),{PostgrestClient:B1,PostgrestQueryBuilder:qie,PostgrestFilterBuilder:zie,PostgrestTransformBuilder:Hie,PostgrestBuilder:Gie,PostgrestError:zG}=$1.default;var q1="2.11.2";var z1={"X-Client-Info":`realtime-js/${q1}`},H1="1.0.0",Ng=1e4,G1=1e3,mc=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(mc||{}),zn=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(zn||{}),nr=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(nr||{}),kb=function(n){return n.websocket="websocket",n}(kb||{}),Co=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Co||{});var Pg=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let i=t.getUint8(1),s=t.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(e.slice(o,o+i));o=o+i;let c=r.decode(e.slice(o,o+s));o=o+s;let l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}};var yc=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var rt=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(rt||{}),Mb=(n,e,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=HG(o,n,e,i),s),{})},HG=(n,e,t,r)=>{let i=e.find(a=>a.name===n),s=i?.type,o=t[n];return s&&!r.includes(s)?W1(s,o):Rb(o)},W1=(n,e)=>{if(n.charAt(0)==="_"){let t=n.slice(1,n.length);return QG(e,t)}switch(n){case rt.bool:return GG(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return WG(e);case rt.json:case rt.jsonb:return KG(e);case rt.timestamp:return YG(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return Rb(e);default:return Rb(e)}},Rb=n=>n,GG=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},WG=n=>{if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return e}return n},KG=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},QG=(n,e)=>{if(typeof n!="string")return n;let t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s,o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>W1(e,a))}return n},YG=n=>typeof n=="string"?n.replace(" ","T"):n,Og=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var vc=class{constructor(e,t,r={},i=Ng){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var id=class n{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let s=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(s,(l,d)=>{o[l]||(c[l]=d)}),this.map(o,(l,d)=>{let h=s[l];if(h){let p=d.map(E=>E.presence_ref),m=h.map(E=>E.presence_ref),_=d.filter(E=>m.indexOf(E.presence_ref)<0),b=h.filter(E=>p.indexOf(E.presence_ref)<0);_.length>0&&(a[l]=_),b.length>0&&(c[l]=b)}else a[l]=d}),this.syncDiff(s,{joins:a,leaves:c},r,i)}static syncDiff(e,t,r,i){let{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,c)=>{var l;let d=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),d.length>0){let h=e[a].map(m=>m.presence_ref),p=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,d,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;let d=c.map(h=>h.presence_ref);l=l.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=l,i(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var bi=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(bi||{});var sd=class n{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=zn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new vc(this,nr.join,this.params,this.timeout),this.rejoinTimer=new yc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=zn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nr.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new id(this),this.broadcastEndpointURL=Og(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(d=>e?.(bi.CHANNEL_ERROR,d)),this._onClose(()=>e?.(bi.CLOSED));let c={},l={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",h=>y(this,[h],function*({postgres_changes:d}){var p;if(this.socket.setAuth(),d===void 0){e?.(bi.SUBSCRIBED);return}else{let m=this.bindings.postgres_changes,_=(p=m?.length)!==null&&p!==void 0?p:0,b=[];for(let E=0;E<_;E++){let k=m[E],{filter:{event:L,schema:V,table:$,filter:W}}=k,K=d&&d[E];if(K&&K.event===L&&K.schema===V&&K.table===$&&K.filter===W)b.push(Object.assign(Object.assign({},k),{id:K.id}));else{this.unsubscribe(),e?.(bi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(bi.SUBSCRIBED);return}})).receive("error",d=>{e?.(bi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e?.(bi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return y(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return y(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(r){return y(this,arguments,function*(e,t={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){let{event:o,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let d=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return yield(s=d.body)===null||s===void 0?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,l;let d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=zn.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new vc(this,nr.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_fetchWithTimeout(e,t,r){return y(this,null,function*(){let i=new AbortController,s=setTimeout(()=>i.abort(),r),o=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new vc(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;let o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:d}=nr;if(r&&[a,c,l,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var _,b,E;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(b=m.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var _,b,E,k,L,V;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){let $=m.id,W=(_=m.filter)===null||_===void 0?void 0:_.event;return $&&((b=t.ids)===null||b===void 0?void 0:b.includes($))&&(W==="*"||W?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let $=(L=(k=m?.filter)===null||k===void 0?void 0:k.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return $==="*"||$===((V=t?.event)===null||V===void 0?void 0:V.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){let _=p.data,{schema:b,table:E,commit_timestamp:k,type:L,errors:V}=_;p=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:k,eventType:L,new:{},old:{},errors:V}),this._getPayloadRecords(_))}m.callback(p,r)})}_isClosed(){return this.state===zn.closed}_isJoined(){return this.state===zn.joined}_isJoining(){return this.state===zn.joining}_isLeaving(){return this.state===zn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&n.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nr.close,{},e)}_onError(e){this._on(nr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Mb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Mb(e.columns,e.old_record)),t}};var JG=()=>{},XG=typeof WebSocket<"u",e5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,od=class{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=z1,this.params={},this.timeout=Ng,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=JG,this.conn=null,this.sendBuffer=[],this.serializer=new Pg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>import("./chunk-O6E4JZHF.js").then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${kb.websocket}`,this.httpEndpoint=Og(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let i=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new yc(()=>y(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(XG){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Nb(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-EBX5AHPI.js").then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:H1}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return y(this,null,function*(){let t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return y(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case mc.connecting:return Co.Connecting;case mc.open:return Co.Open;case mc.closing:return Co.Closing;default:return Co.Closed}}isConnected(){return this.connectionState()===Co.Open}channel(e,t={config:{}}){let r=new sd(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){let{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e=null){return y(this,null,function*(){let t=e||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(nr.access_token,{access_token:t})})}})}sendHeartbeat(){return y(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(G1,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){return y(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(nr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([e5],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}};var Nb=class{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=mc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}};var _c=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function St(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Fg=class extends _c{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Do=class extends _c{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var t5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Vg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-O6E4JZHF.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},K1=()=>t5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-O6E4JZHF.js")).Response:Response}),Lg=n=>{if(Array.isArray(n))return n.map(t=>Lg(t));if(typeof n=="function"||n!==Object(n))return n;let e={};return Object.entries(n).forEach(([t,r])=>{let i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Lg(r)}),e};var So=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Pb=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),n5=(n,e,t)=>So(void 0,void 0,void 0,function*(){let r=yield K1();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{e(new Fg(Pb(i),n.status||500))}).catch(i=>{e(new Do(Pb(i),i))}):e(new Do(Pb(n),n))}),r5=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function ad(n,e,t,r,i,s){return So(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,r5(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>n5(c,a,r))})})}function wc(n,e,t,r){return So(this,void 0,void 0,function*(){return ad(n,"GET",e,t,r)})}function Vr(n,e,t,r,i){return So(this,void 0,void 0,function*(){return ad(n,"POST",e,r,i,t)})}function Q1(n,e,t,r,i){return So(this,void 0,void 0,function*(){return ad(n,"PUT",e,r,i,t)})}function Y1(n,e,t,r){return So(this,void 0,void 0,function*(){return ad(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function jg(n,e,t,r,i){return So(this,void 0,void 0,function*(){return ad(n,"DELETE",e,r,i,t)})}var On=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},i5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Z1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Ug=class{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Vg(i)}uploadOrUpdate(e,t,r,i){return On(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},Z1),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)}),c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let l=this._removeEmptyFolders(t),d=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield h.json();return h.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(s){if(St(s))return{data:null,error:s};throw s}})}upload(e,t,r){return On(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return On(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c,l=Object.assign({upsert:Z1.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType);let h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:d}),p=yield h.json();return h.ok?{data:{path:s,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(St(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return On(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");let s=yield Vr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new _c("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}})}update(e,t,r){return On(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return On(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(St(i))return{data:null,error:i};throw i}})}copy(e,t,r){return On(this,void 0,void 0,function*(){try{return{data:{path:(yield Vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(St(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return On(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Vr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(St(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return On(this,void 0,void 0,function*(){try{let i=yield Vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(St(i))return{data:null,error:i};throw i}})}download(e,t){return On(this,void 0,void 0,function*(){let i=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield wc(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(St(a))return{data:null,error:a};throw a}})}info(e){return On(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield wc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Lg(r),error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}})}exists(e){return On(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield Y1(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(St(r)&&r instanceof Do){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);let a=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return On(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(St(t))return{data:null,error:t};throw t}})}list(e,t,r){return On(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},i5),t),{prefix:e||""});return{data:yield Vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(St(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var J1="2.7.1";var X1={"X-Client-Info":`storage-js/${J1}`};var bc=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},$g=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},X1),t),this.fetch=Vg(r)}listBuckets(){return bc(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(St(e))return{data:null,error:e};throw e}})}getBucket(e){return bc(this,void 0,void 0,function*(){try{return{data:yield wc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(St(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return bc(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return bc(this,void 0,void 0,function*(){try{return{data:yield Q1(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(St(r))return{data:null,error:r};throw r}})}emptyBucket(e){return bc(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(St(t))return{data:null,error:t};throw t}})}deleteBucket(e){return bc(this,void 0,void 0,function*(){try{return{data:yield jg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(St(t))return{data:null,error:t};throw t}})}};var cd=class extends $g{constructor(e,t={},r){super(e,t,r)}from(e){return new Ug(this.url,this.headers,e,this.fetch)}};var eN="2.49.4";var ld="";typeof Deno<"u"?ld="deno":typeof document<"u"?ld="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ld="react-native":ld="node";var s5={"X-Client-Info":`supabase-js-${ld}/${eN}`},tN={headers:s5},nN={schema:"public"},rN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},iN={};CS();var o5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},a5=n=>{let e;return n?e=n:typeof fetch>"u"?e=IS:e=fetch,(...t)=>e(...t)},c5=()=>typeof Headers>"u"?TS:Headers,sN=(n,e,t)=>{let r=a5(t),i=c5();return(s,o)=>o5(void 0,void 0,void 0,function*(){var a;let c=(a=yield e())!==null&&a!==void 0?a:n,l=new i(o?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:l}))})};var l5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function oN(n){return n.replace(/\/$/,"")}function aN(n,e){let{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:c,global:l}=e,d={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},l),s),accessToken:()=>l5(this,void 0,void 0,function*(){return""})};return n.accessToken?d.accessToken=n.accessToken:delete d.accessToken,d}var Bg="2.69.1";var Ao=30*1e3,qg=3,zg=qg*Ao,cN="http://localhost:9999",lN="supabase.auth.token";var uN={"X-Client-Info":`gotrue-js/${Bg}`};var ud="X-Supabase-Api-Version",Ob={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},dN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,hN=6e5;var dd=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function me(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Hg=class extends dd{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function fN(n){return me(n)&&n.name==="AuthApiError"}var Ec=class extends dd{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},jr=class extends dd{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}},rr=class extends jr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function pN(n){return me(n)&&n.name==="AuthSessionMissingError"}var Ic=class extends jr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},xo=class extends jr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},ko=class extends jr{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function gN(n){return me(n)&&n.name==="AuthImplicitGrantRedirectError"}var hd=class extends jr{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Tc=class extends jr{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function Gg(n){return me(n)&&n.name==="AuthRetryableFetchError"}var fd=class extends jr{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var Ei=class extends jr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var mN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yN=` 	
\r=`.split(""),u5=(()=>{let n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<yN.length;e+=1)n[yN[e].charCodeAt(0)]=-2;for(let e=0;e<mN.length;e+=1)n[mN[e].charCodeAt(0)]=e;return n})();function vN(n,e,t){let r=u5[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Fb(n){let e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{f5(o,r,t)};for(let o=0;o<n.length;o+=1)vN(n.charCodeAt(o),i,s);return e.join("")}function d5(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function h5(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}d5(r,e)}}function f5(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function _N(n){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)vN(n.charCodeAt(i),t,r);return new Uint8Array(e)}function wN(n){let e=[];return h5(n,t=>e.push(t)),new Uint8Array(e)}function bN(n){return Math.round(Date.now()/1e3)+n}function EN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}var wr=()=>typeof window<"u"&&typeof document<"u",Ro={tested:!1,writable:!1},_s=()=>{if(!wr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ro.tested)return Ro.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ro.tested=!0,Ro.writable=!0}catch{Ro.tested=!0,Ro.writable=!1}return Ro.writable};function IN(n){let e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}var Wg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-O6E4JZHF.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},TN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Lb=(n,e,t)=>y(void 0,null,function*(){yield n.setItem(e,JSON.stringify(t))}),gd=(n,e)=>y(void 0,null,function*(){let t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),md=(n,e)=>y(void 0,null,function*(){yield n.removeItem(e)}),pd=class n{constructor(){this.promise=new n.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};pd.promiseConstructor=Promise;function Kg(n){let e=n.split(".");if(e.length!==3)throw new Ei("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!dN.test(e[r]))throw new Ei("JWT not in base64url format");return{header:JSON.parse(Fb(e[0])),payload:JSON.parse(Fb(e[1])),signature:_N(e[2]),raw:{header:e[0],payload:e[1]}}}function CN(n){return y(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})}function DN(n,e){return new Promise((r,i)=>{y(this,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})})}function p5(n){return("0"+n.toString(16)).substr(-2)}function g5(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,p5).join("")}function m5(n){return y(this,null,function*(){let t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})}function y5(n){return y(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let t=yield m5(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function Mo(n,e,t=!1){return y(this,null,function*(){let r=g5(),i=r;t&&(i+="/PASSWORD_RECOVERY"),yield Lb(n,`${e}-code-verifier`,i);let s=yield y5(r);return[s,r===s?"plain":"s256"]})}var v5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function SN(n){let e=n.headers.get(ud);if(!e||!e.match(v5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function AN(n){if(!n)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function xN(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var _5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},No=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),w5=[502,503,504];function kN(n){return y(this,null,function*(){var e;if(!TN(n))throw new Tc(No(n),0);if(w5.includes(n.status))throw new Tc(No(n),n.status);let t;try{t=yield n.json()}catch(s){throw new Ec(No(s),s)}let r,i=SN(n);if(i&&i.getTime()>=Ob["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new fd(No(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new rr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new fd(No(t),n.status,t.weak_password.reasons);throw new Hg(No(t),n.status||500,r)})}var b5=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function Ae(n,e,t,r){return y(this,null,function*(){var i;let s=Object.assign({},r?.headers);s[ud]||(s[ud]=Ob["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield E5(n,e,t+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function E5(n,e,t,r,i,s){return y(this,null,function*(){let o=b5(e,r,i,s),a;try{a=yield n(t,Object.assign({},o))}catch(c){throw console.error(c),new Tc(No(c),0)}if(a.ok||(yield kN(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield kN(c)}})}function Ii(n){var e;let t=null;I5(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=bN(n.expires_in)));let r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Vb(n){let e=Ii(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Ur(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function RN(n){return{data:n,error:null}}function MN(n){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=_5(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function NN(n){return n}function I5(n){return n.access_token&&n.refresh_token&&n.expires_in}var T5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Cc=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Wg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,t="global"){return y(this,null,function*(){try{return yield Ae(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return y(this,arguments,function*(e,t={}){try{return yield Ae(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Ur})}catch(i){if(me(i))return{data:{user:null},error:i};throw i}})}generateLink(e){return y(this,null,function*(){try{let{options:t}=e,r=T5(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield Ae(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:MN,redirectTo:t?.redirectTo})}catch(t){if(me(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return y(this,null,function*(){try{return yield Ae(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ur})}catch(t){if(me(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return y(this,null,function*(){var t,r,i,s,o,a,c;try{let l={nextPage:null,lastPage:0,total:0},d=yield Ae(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:NN});if(d.error)throw d.error;let h=yield d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(_=>{let b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);l[`${E}Page`]=b}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(me(l))return{data:{users:[]},error:l};throw l}})}getUserById(e){return y(this,null,function*(){try{return yield Ae(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ur})}catch(t){if(me(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return y(this,null,function*(){try{return yield Ae(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Ur})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return y(this,null,function*(){try{return yield Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Ur})}catch(r){if(me(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return y(this,null,function*(){try{let{data:t,error:r}=yield Ae(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(me(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return y(this,null,function*(){try{return{data:yield Ae(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(me(t))return{data:null,error:t};throw t}})}};var PN={getItem:n=>_s()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{_s()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{_s()&&globalThis.localStorage.removeItem(n)}};function jb(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function ON(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Po={debug:!!(globalThis&&_s()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},yd=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Qg=class extends yd{};function Ub(n,e,t){return y(this,null,function*(){Po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Po.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>y(this,null,function*(){if(i){Po.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield t()}finally{Po.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw Po.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Qg(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(Po.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}ON();var C5={url:cN,storageKey:lN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function FN(n,e,t){return y(this,null,function*(){return yield t()})}var $b=(()=>{class n{constructor(t){var r,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&wr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},C5),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Cc({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Wg(s.fetch),this.lock=s.lock||FN,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:wr()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=Ub:this.lock=FN,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:_s()?this.storage=PN:(this.memoryStorage={},this.storage=jb(this.memoryStorage)):(this.memoryStorage={},this.storage=jb(this.memoryStorage)),wr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",o=>y(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Bg}) ${new Date().toISOString()}`,...t),this}initialize(){return y(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=y(this,null,function*(){return yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return y(this,null,function*(){var t;try{let r=IN(window.location.href),i="none";if(this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce"),wr()&&this.detectSessionInUrl&&i!=="none"){let{data:s,error:o}=yield this._getSessionFromURL(r,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),gN(o)){let l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:a,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),yield this._saveSession(a),setTimeout(()=>y(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return me(r)?{error:r}:{error:new Ec("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return y(this,null,function*(){var r,i,s;try{let o=yield Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ii}),{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,d=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(t){return y(this,null,function*(){var r,i,s;try{let o;if("email"in t){let{email:h,password:p,options:m}=t,_=null,b=null;this.flowType==="pkce"&&([_,b]=yield Mo(this.storage,this.storageKey)),o=yield Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:h,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:_,code_challenge_method:b},xform:Ii})}else if("phone"in t){let{phone:h,password:p,options:m}=t;o=yield Ae(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(i=m?.data)!==null&&i!==void 0?i:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Ii})}else throw new xo("You must provide either an email or phone number and a password");let{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,d=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(me(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(t){return y(this,null,function*(){try{let r;if("email"in t){let{email:o,password:a,options:c}=t;r=yield Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Vb})}else if("phone"in t){let{phone:o,password:a,options:c}=t;r=yield Ae(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Vb})}else throw new xo("You must provide either an email or phone number and a password");let{data:i,error:s}=r;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Ic}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(t){return y(this,null,function*(){var r,i,s,o;return yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(t){return y(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>y(this,null,function*(){return this._exchangeCodeForSession(t)}))})}_exchangeCodeForSession(t){return y(this,null,function*(){let r=yield gd(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(r??"").split("/");try{let{data:o,error:a}=yield Ae(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Ii});if(yield md(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Ic}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(me(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(t){return y(this,null,function*(){try{let{options:r,provider:i,token:s,access_token:o,nonce:a}=t,c=yield Ae(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:Ii}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Ic}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(t){return y(this,null,function*(){var r,i,s,o,a;try{if("email"in t){let{email:c,options:l}=t,d=null,h=null;this.flowType==="pkce"&&([d,h]=yield Mo(this.storage,this.storageKey));let{error:p}=yield Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){let{phone:c,options:l}=t,{data:d,error:h}=yield Ae(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new xo("You must provide either an email or phone number.")}catch(c){if(me(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(t){return y(this,null,function*(){var r,i;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(i=t.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=yield Ae(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Ii});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,d=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(s){if(me(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(t){return y(this,null,function*(){var r,i,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield Mo(this.storage,this.storageKey)),yield Ae(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:RN})}catch(o){if(me(o))return{data:null,error:o};throw o}})}reauthenticate(){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return y(this,null,function*(){try{return yield this._useSession(t=>y(this,null,function*(){let{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new rr;let{error:s}=yield Ae(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}}))}catch(t){if(me(t))return{data:{user:null,session:null},error:t};throw t}})}resend(t){return y(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in t){let{email:i,type:s,options:o}=t,{error:a}=yield Ae(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){let{phone:i,type:s,options:o}=t,{data:a,error:c}=yield Ae(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:c}}throw new xo("You must provide either an email or phone number and a type")}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return this._useSession(r=>y(this,null,function*(){return r}))}))})}_acquireLock(t,r){return y(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=y(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(y(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,t,()=>y(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(y(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return y(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return y(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,r=yield gd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let i=t.expires_at?t.expires_at*1e3-Date.now()<zg:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,h))})}return{data:{session:t},error:null}}let{session:s,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(t){return y(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return y(this,null,function*(){try{return t?yield Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ur}):yield this._useSession(r=>y(this,null,function*(){var i,s,o;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rr}:yield Ae(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Ur})}))}catch(r){if(me(r))return pN(r)&&(yield this._removeSession(),yield md(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(i){return y(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(i){return y(this,arguments,function*(t,r={}){try{return yield this._useSession(s=>y(this,null,function*(){let{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new rr;let c=o.session,l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=yield Mo(this.storage,this.storageKey));let{data:h,error:p}=yield Ae(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:c.access_token,xform:Ur});if(p)throw p;return c.user=h.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}}))}catch(s){if(me(s))return{data:{user:null},error:s};throw s}})}setSession(t){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return y(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new rr;let r=Date.now()/1e3,i=r,s=!0,o=null,{payload:a}=Kg(t.access_token);if(a.exp&&(i=a.exp,s=i<=r),s){let{session:c,error:l}=yield this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{let{data:c,error:l}=yield this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(me(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(t){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;if(!t){let{data:a,error:c}=r;if(c)throw c;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new rr;let{session:s,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(me(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(t,r){return y(this,null,function*(){try{if(!wr())throw new ko("No browser detected.");if(t.error||t.error_description||t.error_code)throw new ko(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new hd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ko("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new hd("No code detected.");let{data:V,error:$}=yield this._exchangeCodeForSession(t.code);if($)throw $;let W=new URL(window.location.href);return W.searchParams.delete("code"),window.history.replaceState(window.history.state,"",W.toString()),{data:{session:V.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:c,expires_at:l,token_type:d}=t;if(!o||!c||!a||!d)throw new ko("No session defined in URL");let h=Math.round(Date.now()/1e3),p=parseInt(c),m=h+p;l&&(m=parseInt(l));let _=m-h;_*1e3<=Ao&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${p}s`);let b=m-p;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,m,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,m,h);let{data:E,error:k}=yield this._getUser(o);if(k)throw k;let L={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:p,expires_at:m,refresh_token:a,token_type:d,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:L,redirectType:t.type},error:null}}catch(i){if(me(i))return{data:{session:null,redirectType:null},error:i};throw i}})}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}_isPKCECallback(t){return y(this,null,function*(){let r=yield gd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return y(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return y(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>y(this,null,function*(){var i;let{data:s,error:o}=r;if(o)return{error:o};let a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=yield this.admin.signOut(a,t);if(c&&!(fN(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(yield this._removeSession(),yield md(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(t){let r=EN(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),y(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(t){return y(this,null,function*(){return yield this._useSession(r=>y(this,null,function*(){var i,s;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}}))})}resetPasswordForEmail(i){return y(this,arguments,function*(t,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield Mo(this.storage,this.storageKey,!0));try{return yield Ae(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(me(a))return{data:null,error:a};throw a}})}getUserIdentities(){return y(this,null,function*(){var t;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(me(r))return{data:null,error:r};throw r}})}linkIdentity(t){return y(this,null,function*(){var r;try{let{data:i,error:s}=yield this._useSession(o=>y(this,null,function*(){var a,c,l,d,h;let{data:p,error:m}=o;if(m)throw m;let _=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield Ae(this.fetch,"GET",_,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})}));if(s)throw s;return wr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:t.provider,url:i?.url},error:null}}catch(i){if(me(i))return{data:{provider:t.provider,url:null},error:i};throw i}})}unlinkIdentity(t){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)throw a;return yield Ae(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})}))}catch(r){if(me(r))return{data:null,error:r};throw r}})}_refreshAccessToken(t){return y(this,null,function*(){let r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield DN(s=>y(this,null,function*(){return s>0&&(yield CN(200*Math.pow(2,s-1))),this._debug(r,"refreshing attempt",s),yield Ae(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ii})}),(s,o)=>{let a=200*Math.pow(2,s);return o&&Gg(o)&&Date.now()+a-i<Ao})}catch(i){if(this._debug(r,"error",i),me(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return y(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),wr()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}})}_recoverAndRefresh(){return y(this,null,function*(){var t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=yield gd(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&(yield this._removeSession());return}let s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<zg;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${zg}s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:o}=yield this._callRefreshToken(i.refresh_token);o&&(console.error(o),Gg(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}})}_callRefreshToken(t){return y(this,null,function*(){var r,i;if(!t)throw new rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new pd;let{data:o,error:a}=yield this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new rr;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(s,"error",o),me(o)){let a={session:null,error:o};return Gg(o)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(t,r,i=!0){return y(this,null,function*(){let s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>y(this,null,function*(){try{yield c.callback(t,r)}catch(l){o.push(l)}}));if(yield Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(t){return y(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield Lb(this.storage,this.storageKey,t)})}_removeSession(){return y(this,null,function*(){this._debug("#_removeSession()"),yield md(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&wr()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return y(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),Ao);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>y(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return y(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return y(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return y(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return y(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>y(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(r=>y(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((i.expires_at*1e3-t)/Ao);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ao}ms, refresh threshold is ${qg} ticks`),s<=qg&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof yd)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return y(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!wr()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>y(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return y(this,null,function*(){let r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,i){return y(this,null,function*(){let s=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[o,a]=yield Mo(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(c.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${s.join("&")}`})}_unenroll(t){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:s,error:o}=r;return o?{data:null,error:o}:yield Ae(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(me(r))return{data:null,error:r};throw r}})}_enroll(t){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)return{data:null,error:a};let c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:d}=yield Ae(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((s=l?.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(r){if(me(r))return{data:null,error:r};throw r}})}_verify(t){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:s,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:c}=yield Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})}))}catch(r){if(me(r))return{data:null,error:r};throw r}}))})}_challenge(t){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:s,error:o}=r;return o?{data:null,error:o}:yield Ae(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(me(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(t){return y(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:t.factorId});return i?{data:null,error:i}:yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return y(this,null,function*(){let{data:{user:t},error:r}=yield this.getUser();if(r)return{data:null,error:r};let i=t?.factors||[],s=i.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=i.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:i,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){return yield this._useSession(t=>y(this,null,function*(){var r,i;let{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=Kg(s.access_token),c=null;a.aal&&(c=a.aal);let l=c;((i=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");let h=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}))})}fetchJwk(i){return y(this,arguments,function*(t,r={keys:[]}){let s=r.keys.find(c=>c.kid===t);if(s||(s=this.jwks.keys.find(c=>c.kid===t),s&&this.jwks_cached_at+hN>Date.now()))return s;let{data:o,error:a}=yield Ae(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!o.keys||o.keys.length===0)throw new Ei("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),s=o.keys.find(c=>c.kid===t),!s)throw new Ei("No matching signing key found in JWKS");return s})}getClaims(i){return y(this,arguments,function*(t,r={keys:[]}){try{let s=t;if(!s){let{data:b,error:E}=yield this.getSession();if(E||!b.session)return{data:null,error:E};s=b.session.access_token}let{header:o,payload:a,signature:c,raw:{header:l,payload:d}}=Kg(s);if(AN(a.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:b}=yield this.getUser(s);if(b)throw b;return{data:{claims:a,header:o,signature:c},error:null}}let h=xN(o.alg),p=yield this.fetchJwk(o.kid,r),m=yield crypto.subtle.importKey("jwk",p,h,!0,["verify"]);if(!(yield crypto.subtle.verify(h,m,c,wN(`${l}.${d}`))))throw new Ei("Invalid JWT signature");return{data:{claims:a,header:o,signature:c},error:null}}catch(s){if(me(s))return{data:null,error:s};throw s}})}}return n.nextInstanceID=0,n})();var D5=$b,Bb=D5;var Yg=class extends Bb{constructor(e){super(e)}};var S5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Zg=class{constructor(e,t,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let a=oN(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l={db:nN,realtime:iN,auth:Object.assign(Object.assign({},rN),{storageKey:c}),global:tN},d=aN(r??{},l);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=sN(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new B1(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Zu(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new cd(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return S5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:c},l,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yg({url:this.authUrl,headers:Object.assign(Object.assign({},h),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new od(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var LN=(n,e,t)=>new Zg(n,e,t);var Dc=(()=>{let e=class e{constructor(){this.session=null,this.supabase=LN(le.supabase.url,le.supabase.key)}getSupabaseClient(){return this.supabase}signInWithGitHub(r=""){return y(this,null,function*(){return this.supabase.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin+r}})})}getSession(){return y(this,null,function*(){let{data:{session:r},error:i}=yield this.supabase.auth.getSession();if(!r)throw i;return this.session=r,r})}getUserDataProperty(r){if(this.session&&this.session.user&&this.session.user.user_metadata){let i=this.session.user.user_metadata;return i.hasOwnProperty(r)?i[r]:null}return null}getChannelSubscriptionId(r,i){let s=r.filter(o=>o.channel===i);return s.length>0&&s[0].channel===i?s[0].paypal:""}signoutSession(){return y(this,null,function*(){yield this.supabase.auth.signOut(),this.session=null})}isLoggedIn(){return this.session!==null}updateUserData(r){return y(this,null,function*(){return this.supabase.auth.updateUser({data:r})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var we="primary",Md=Symbol("RouteTitle"),Kb=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Mc(n){return new Kb(n)}function A5(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function x5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!$r(n[t],e[t]))return!1;return!0}function $r(n,e){let t=n?Qb(n):void 0,r=e?Qb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!KN(n[i],e[i]))return!1;return!0}function Qb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function KN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function QN(n){return n.length>0?n[n.length-1]:null}function bs(n){return Xv(n)?n:ds(n)?Me(Promise.resolve(n)):ce(n)}var k5={exact:ZN,subset:JN},YN={exact:R5,subset:M5,ignored:()=>!0};function VN(n,e,t){return k5[t.paths](n.root,e.root,t.matrixParams)&&YN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function R5(n,e){return $r(n,e)}function ZN(n,e,t){if(!Fo(n.segments,e.segments)||!em(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!ZN(n.children[r],e.children[r],t))return!1;return!0}function M5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>KN(n[t],e[t]))}function JN(n,e,t){return XN(n,e,e.segments,t)}function XN(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fo(i,t)||e.hasChildren()||!em(i,t,r))}else if(n.segments.length===t.length){if(!Fo(n.segments,t)||!em(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!JN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Fo(n.segments,i)||!em(n.segments,i,r)||!n.children[we]?!1:XN(n.children[we],e,s,r)}}function em(n,e,t){return e.every((r,i)=>YN[t](n[i].parameters,r.parameters))}var Ci=class{constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Mc(this.queryParams),this._queryParamMap}toString(){return O5.serialize(this)}},ze=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tm(this)}},Oo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Mc(this.parameters),this._parameterMap}toString(){return tP(this)}};function N5(n,e){return Fo(n,e)&&n.every((t,r)=>$r(t.parameters,e[r].parameters))}function Fo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function P5(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var Nd=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>new Nc,providedIn:"root"});let n=e;return n})(),Nc=class{parse(e){let t=new Zb(e);return new Ci(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${vd(e.root,!0)}`,r=V5(e.queryParams),i=typeof e.fragment=="string"?`#${F5(e.fragment)}`:"";return`${t}${r}${i}`}},O5=new Nc;function tm(n){return n.segments.map(e=>tP(e)).join("/")}function vd(n,e){if(!n.hasChildren())return tm(n);if(e){let t=n.children[we]?vd(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==we&&r.push(`${i}:${vd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=P5(n,(r,i)=>i===we?[vd(n.children[we],!1)]:[`${i}:${vd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${tm(n)}/${t[0]}`:`${tm(n)}/(${t.join("//")})`}}function eP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jg(n){return eP(n).replace(/%3B/gi,";")}function F5(n){return encodeURI(n)}function Yb(n){return eP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nm(n){return decodeURIComponent(n)}function jN(n){return nm(n.replace(/\+/g,"%20"))}function tP(n){return`${Yb(n.path)}${L5(n.parameters)}`}function L5(n){return Object.entries(n).map(([e,t])=>`;${Yb(e)}=${Yb(t)}`).join("")}function V5(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Jg(t)}=${Jg(i)}`).join("&"):`${Jg(t)}=${Jg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var j5=/^[^\/()?;#]+/;function zb(n){let e=n.match(j5);return e?e[0]:""}var U5=/^[^\/()?;=#]+/;function $5(n){let e=n.match(U5);return e?e[0]:""}var B5=/^[^=?&#]+/;function q5(n){let e=n.match(B5);return e?e[0]:""}var z5=/^[^&#]+/;function H5(n){let e=n.match(z5);return e?e[0]:""}var Zb=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new ze(e,t)),r}parseSegment(){let e=zb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new re(4009,!1);return this.capture(e),new Oo(nm(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=$5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=zb(this.remaining);i&&(r=i,this.capture(r))}e[nm(t)]=nm(r)}parseQueryParam(e){let t=q5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=H5(this.remaining);o&&(r=o,this.capture(r))}let i=jN(t),s=jN(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=zb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new re(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=we);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[we]:new ze([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new re(4011,!1)}};function nP(n){return n.segments.length>0?new ze([],{[we]:n}):n}function rP(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=rP(i);if(r===we&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ze(n.segments,e);return G5(t)}function G5(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new ze(n.segments.concat(e.segments),e.children)}return n}function Td(n){return n instanceof Ci}function W5(n,e,t=null,r=null){let i=iP(n);return sP(i,e,t,r)}function iP(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new ze(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=nP(r);return e??i}function sP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Hb(i,i,i,t,r);let s=K5(e);if(s.toRoot())return Hb(i,i,new ze([],{}),t,r);let o=Q5(s,i,n),a=o.processChildren?bd(o.segmentGroup,o.index,s.commands):aP(o.segmentGroup,o.index,s.commands);return Hb(i,o.segmentGroup,a,t,r)}function rm(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Cd(n){return typeof n=="object"&&n!=null&&n.outlets}function Hb(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=oP(n,e,t);let a=nP(rP(o));return new Ci(a,s,i)}function oP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=oP(s,e,t)}),new ze(n.segments,r)}var im=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rm(r[0]))throw new re(4003,!1);let i=r.find(Cd);if(i&&i!==QN(r))throw new re(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function K5(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new im(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new im(t,e,r)}var xc=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Q5(n,e,t){if(n.isAbsolute)return new xc(e,!0,0);if(!t)return new xc(e,!1,NaN);if(t.parent===null)return new xc(t,!0,0);let r=rm(n.commands[0])?0:1,i=t.segments.length-1+r;return Y5(t,i,n.numberOfDoubleDots)}function Y5(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new re(4005,!1);i=r.segments.length}return new xc(r,!1,i-s)}function Z5(n){return Cd(n[0])?n[0].outlets:{[we]:n}}function aP(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return bd(n,e,t);let r=J5(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ze(n.segments.slice(0,r.pathIndex),{});return s.children[we]=new ze(n.segments.slice(r.pathIndex),n.children),bd(s,0,i)}else return r.match&&i.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?Jb(n,e,t):r.match?bd(n,0,i):Jb(n,e,t)}function bd(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=Z5(t),i={};if(Object.keys(r).some(s=>s!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let s=bd(n.children[we],e,t);return new ze(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=aP(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ze(n.segments,i)}}function J5(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Cd(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!$N(c,l,o))return s;r+=2}else{if(!$N(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Jb(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Cd(s)){let c=X5(s.outlets);return new ze(r,c)}if(i===0&&rm(t[0])){let c=n.segments[e];r.push(new Oo(c.path,UN(t[0]))),i++;continue}let o=Cd(s)?s.outlets[we]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&rm(a)?(r.push(new Oo(o,UN(a))),i+=2):(r.push(new Oo(o,{})),i++)}return new ze(r,{})}function X5(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Jb(new ze([],{}),0,r))}),e}function UN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function $N(n,e,t){return n==t.path&&$r(e,t.parameters)}var Ed="imperative",Bt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Bt||{}),ir=class{constructor(e,t){this.id=e,this.url=t}},Pc=class extends ir{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Bt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Di=class extends ir{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Gn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Gn||{}),sm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sm||{}),Ti=class extends ir{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ws=class extends ir{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Bt.NavigationSkipped}},Dd=class extends ir{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},om=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xb=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eE=class extends ir{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tE=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nE=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rE=class{constructor(e){this.route=e,this.type=Bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},iE=class{constructor(e){this.route=e,this.type=Bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},sE=class{constructor(e){this.snapshot=e,this.type=Bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oE=class{constructor(e){this.snapshot=e,this.type=Bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},aE=class{constructor(e){this.snapshot=e,this.type=Bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cE=class{constructor(e){this.snapshot=e,this.type=Bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},am=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Bt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Sd=class{},Oc=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function e9(n,e){return n.providers&&!n._injector&&(n._injector=Bp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function br(n){return n.outlet||we}function t9(n,e){let t=n.filter(r=>br(r)===e);return t.push(...n.filter(r=>br(r)!==e)),t}function Pd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var lE=class{get injector(){return Pd(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Od(this.rootInjector),this.attachRef=null}},Od=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new lE(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(q(yn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),cm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=uE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=uE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=dE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return dE(e,this._root).map(t=>t.value)}};function uE(n,e){if(n===e.value)return e;for(let t of e.children){let r=uE(n,t);if(r)return r}return null}function dE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=dE(n,t);if(r.length)return r.unshift(e),r}return[]}var Hn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ac(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var lm=class extends cm{constructor(e,t){super(e),this.snapshot=t,wE(this,e)}toString(){return this.snapshot.toString()}};function cP(n){let e=n9(n),t=new Ht([new Oo("",{})]),r=new Ht({}),i=new Ht({}),s=new Ht({}),o=new Ht(""),a=new Fn(t,r,s,o,i,we,n,e.root);return a.snapshot=e.root,new lm(new Hn(a,[]),e)}function n9(n){let e={},t={},r={},i="",s=new kc([],e,r,i,t,we,n,null,{});return new dm("",new Hn(s,[]))}var Fn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ae(l=>l[Md]))??ce(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Mc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Mc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function um(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),i?.data),n._resolvedData)}:r={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&uP(i)&&(r.resolve[Md]=i.title),r}var kc=class{get title(){return this.data?.[Md]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},dm=class extends cm{constructor(e,t){super(t),this.url=e,wE(this,t)}toString(){return lP(this._root)}};function wE(n,e){e.value._routerState=n,e.children.forEach(t=>wE(n,t))}function lP(n){let e=n.children.length>0?` { ${n.children.map(lP).join(", ")} } `:"";return`${n.value}${e}`}function Gb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,$r(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),$r(e.params,t.params)||n.paramsSubject.next(t.params),x5(e.url,t.url)||n.urlSubject.next(t.url),$r(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function hE(n,e){let t=$r(n.params,e.params)&&N5(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||hE(n.parent,e.parent))}function uP(n){return typeof n.title=="string"||n.title===null}var bE=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=we,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=G(Od),this.location=G(kn),this.changeDetector=G(Lr),this.inputBinder=G(mm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new re(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new re(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new re(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new re(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new fE(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=It({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[rs]});let n=e;return n})(),fE=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Fn?this.route:e===Od?this.childContexts:this.parent.get(e,t)}},mm=new J(""),BN=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=nu([i.queryParams,i.params,i.data]).pipe(Je(([o,a,c],l)=>(c=N(N(N({},o),a),c),l===0?ce(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=YR(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function r9(n,e,t){let r=Ad(n,e._root,t?t._root:void 0);return new lm(r,e)}function Ad(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=i9(n,e,t);return new Hn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ad(n,a)),o}}let r=s9(e.value),i=e.children.map(s=>Ad(n,s));return new Hn(r,i)}}function i9(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ad(n,r,i);return Ad(n,r)})}function s9(n){return new Fn(new Ht(n.url),new Ht(n.params),new Ht(n.queryParams),new Ht(n.fragment),new Ht(n.data),n.outlet,n.component,n)}var xd=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},dP="ngNavigationCancelingError";function hm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Td(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=hP(!1,Gn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function hP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[dP]=!0,t.cancellationCode=e,t}function o9(n){return fP(n)&&Td(n.url)}function fP(n){return!!n&&n[dP]}var a9=(n,e,t,r)=>ae(i=>(new pE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),pE=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Gb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ac(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ac(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ac(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ac(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new cE(s.value.snapshot))}),e.children.length&&this.forwardEvent(new oE(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Gb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Gb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},fm=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Rc=class{constructor(e,t){this.component=e,this.route=t}};function c9(n,e,t){let r=n._root,i=e?e._root:null;return _d(r,i,t,[r.value])}function l9(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Lc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!sx(n)?n:e.get(n):r}function _d(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ac(e);return n.children.forEach(o=>{u9(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Id(a,t.getContext(o),i)),i}function u9(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=d9(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new fm(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?_d(n,e,a?a.children:null,r,i):_d(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Rc(a.outlet.component,o))}else o&&Id(e,a,i),i.canActivateChecks.push(new fm(r)),s.component?_d(n,null,a?a.children:null,r,i):_d(n,null,t,r,i);return i}function d9(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Fo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fo(n.url,e.url)||!$r(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hE(n,e)||!$r(n.queryParams,e.queryParams);case"paramsChange":default:return!hE(n,e)}}function Id(n,e,t){let r=Ac(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Id(o,e.children.getContext(s),t):Id(o,null,t):Id(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Rc(e.outlet.component,i)):t.canDeactivateChecks.push(new Rc(null,i)):t.canDeactivateChecks.push(new Rc(null,i))}function Fd(n){return typeof n=="function"}function h9(n){return typeof n=="boolean"}function f9(n){return n&&Fd(n.canLoad)}function p9(n){return n&&Fd(n.canActivate)}function g9(n){return n&&Fd(n.canActivateChild)}function m9(n){return n&&Fd(n.canDeactivate)}function y9(n){return n&&Fd(n.canMatch)}function pP(n){return n instanceof ii||n?.name==="EmptyError"}var Xg=Symbol("INITIAL_VALUE");function Fc(){return Je(n=>nu(n.map(e=>e.pipe(oi(1),ai(Xg)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===Xg)return Xg;if(t===!1||v9(t))return t}return!0}),Nt(e=>e!==Xg),oi(1)))}function v9(n){return Td(n)||n instanceof xd}function _9(n,e){return bt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ce(ne(N({},t),{guardsResult:!0})):w9(o,r,i,n).pipe(bt(a=>a&&h9(a)?b9(r,s,n,e):ce(a)),ae(a=>ne(N({},t),{guardsResult:a})))})}function w9(n,e,t,r){return Me(n).pipe(bt(i=>D9(i.component,i.route,t,e,r)),Un(i=>i!==!0,!0))}function b9(n,e,t,r){return Me(e).pipe(si(i=>Ca(I9(i.route.parent,r),E9(i.route,r),C9(n,i.path,t),T9(n,i.route,t))),Un(i=>i!==!0,!0))}function E9(n,e){return n!==null&&e&&e(new aE(n)),ce(!0)}function I9(n,e){return n!==null&&e&&e(new sE(n)),ce(!0)}function T9(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ce(!0);let i=r.map(s=>xf(()=>{let o=Pd(e)??t,a=Lc(s,o),c=p9(a)?a.canActivate(e,n):Jn(o,()=>a(e,n));return bs(c).pipe(Un())}));return ce(i).pipe(Fc())}function C9(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>l9(o)).filter(o=>o!==null).map(o=>xf(()=>{let a=o.guards.map(c=>{let l=Pd(o.node)??t,d=Lc(c,l),h=g9(d)?d.canActivateChild(r,n):Jn(l,()=>d(r,n));return bs(h).pipe(Un())});return ce(a).pipe(Fc())}));return ce(s).pipe(Fc())}function D9(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ce(!0);let o=s.map(a=>{let c=Pd(e)??i,l=Lc(a,c),d=m9(l)?l.canDeactivate(n,e,t,r):Jn(c,()=>l(n,e,t,r));return bs(d).pipe(Un())});return ce(o).pipe(Fc())}function S9(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ce(!0);let s=i.map(o=>{let a=Lc(o,n),c=f9(a)?a.canLoad(e,t):Jn(n,()=>a(e,t));return bs(c)});return ce(s).pipe(Fc(),gP(r))}function gP(n){return Gv(Et(e=>{if(typeof e!="boolean")throw hm(n,e)}),ae(e=>e===!0))}function A9(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ce(!0);let s=i.map(o=>{let a=Lc(o,n),c=y9(a)?a.canMatch(e,t):Jn(n,()=>a(e,t));return bs(c)});return ce(s).pipe(Fc(),gP(r))}var kd=class{constructor(e){this.segmentGroup=e||null}},Rd=class extends Error{constructor(e){super(),this.urlTree=e}};function Sc(n){return Ta(new kd(n))}function x9(n){return Ta(new re(4e3,!1))}function k9(n){return Ta(hP(!1,Gn.GuardRejected))}var gE=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ce(r);if(i.numberOfChildren>1||!i.children[we])return x9(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,params:m,data:_,title:b}=i,E=Jn(s,()=>a({params:m,data:_,queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,title:b}));if(E instanceof Ci)throw new Rd(E);t=E}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Rd(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ci(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ze(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new re(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},mE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R9(n,e,t,r,i){let s=mP(n,e,t);return s.matched?(r=e9(e,r),A9(r,e,t,i).pipe(ae(o=>o===!0?s:N({},mE)))):ce(s)}function mP(n,e,t){if(e.path==="**")return M9(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},mE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||A5)(t,n,e);if(!i)return N({},mE);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?N(N({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function M9(n){return{matched:!0,parameters:n.length>0?QN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function qN(n,e,t,r){return t.length>0&&O9(n,t,r)?{segmentGroup:new ze(e,P9(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&F9(n,t,r)?{segmentGroup:new ze(n.segments,N9(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function N9(n,e,t,r){let i={};for(let s of t)if(ym(n,e,s)&&!r[br(s)]){let o=new ze([],{});i[br(s)]=o}return N(N({},r),i)}function P9(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&br(r)!==we){let i=new ze([],{});t[br(r)]=i}return t}function O9(n,e,t){return t.some(r=>ym(n,e,r)&&br(r)!==we)}function F9(n,e,t){return t.some(r=>ym(n,e,r))}function ym(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function L9(n,e,t){return e.length===0&&!n.children[t]}var yE=class{};function V9(n,e,t,r,i,s,o="emptyOnly"){return new vE(n,e,t,r,i,o,s).recognize()}var j9=31,vE=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new gE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new re(4002,`'${e.segmentGroup}'`)}recognize(){let e=qN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let i=new Hn(r,t),s=new dm("",i),o=W5(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new kc([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,t).pipe(ae(r=>({children:r,rootSnapshot:t})),Hi(r=>{if(r instanceof Rd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof kd?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(ae(o=>o instanceof Hn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Me(s).pipe(si(o=>{let a=r.children[o],c=t9(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Xs((o,a)=>(o.push(...a),o)),Gi(null),n_(),bt(o=>{if(o===null)return Sc(r);let a=yP(o);return U9(a),ce(a)}))}processSegment(e,t,r,i,s,o,a){return Me(t).pipe(si(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Hi(l=>{if(l instanceof kd)return ce(null);throw l}))),Un(c=>!!c),Hi(c=>{if(pP(c))return L9(r,i,s)?ce(new yE):Sc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return br(r)!==o&&(o===we||!ym(i,s,r))?Sc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Sc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=mP(t,i,s);if(!c)return Sc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>j9&&(this.allowRedirects=!1));let m=new kc(s,l,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,zN(i),br(i),i.component??i._loadedComponent??null,i,HN(i)),_=um(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let b=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,m,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(bt(E=>this.processSegment(e,r,t,E.concat(p),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=R9(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Je(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Je(({routes:l})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=c,_=new kc(p,h,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,zN(r),br(r),r.component??r._loadedComponent??null,r,HN(r)),b=um(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(b.params),_.data=Object.freeze(b.data);let{segmentGroup:E,slicedSegments:k}=qN(t,p,m,l);if(k.length===0&&E.hasChildren())return this.processChildren(d,l,E,_).pipe(ae(V=>new Hn(_,V)));if(l.length===0&&k.length===0)return ce(new Hn(_,[]));let L=br(r)===s;return this.processSegment(d,l,E,k,L?we:s,!0,_).pipe(ae(V=>new Hn(_,V instanceof Hn?[V]:[])))}))):Sc(t)))}getChildConfig(e,t,r){return t.children?ce({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ce({routes:t._loadedRoutes,injector:t._loadedInjector}):S9(e,t,r,this.urlSerializer).pipe(bt(i=>i?this.configLoader.loadChildren(e,t).pipe(Et(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):k9(t))):ce({routes:[],injector:e})}};function U9(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function $9(n){let e=n.value.routeConfig;return e&&e.path===""}function yP(n){let e=[],t=new Set;for(let r of n){if(!$9(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=yP(r.children);e.push(new Hn(r.value,i))}return e.filter(r=>!t.has(r))}function zN(n){return n.data||{}}function HN(n){return n.resolve||{}}function B9(n,e,t,r,i,s){return bt(o=>V9(n,e,t,r,o.extractedUrl,i,s).pipe(ae(({state:a,tree:c})=>ne(N({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function q9(n,e){return bt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ce(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of vP(c))o.add(l);let a=0;return Me(o).pipe(si(c=>s.has(c)?z9(c,r,n,e):(c.data=um(c,c.parent,n).resolve,ce(void 0))),Et(()=>a++),Da(1),bt(c=>a===o.size?ce(t):pn))})}function vP(n){let e=n.children.map(t=>vP(t)).flat();return[n,...e]}function z9(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!uP(i)&&(s[Md]=i.title),H9(s,n,e,r).pipe(ae(o=>(n._resolvedData=o,n.data=um(n,n.parent,t).resolve,null)))}function H9(n,e,t,r){let i=Qb(n);if(i.length===0)return ce({});let s={};return Me(i).pipe(bt(o=>G9(n[o],e,t,r).pipe(Un(),Et(a=>{if(a instanceof xd)throw hm(new Nc,a);s[o]=a}))),Da(1),iu(s),Hi(o=>pP(o)?pn:Ta(o)))}function G9(n,e,t,r){let i=Pd(e)??r,s=Lc(n,i),o=s.resolve?s.resolve(e,t):Jn(i,()=>s(e,t));return bs(o)}function Wb(n){return Je(e=>{let t=n(e);return t?Me(t).pipe(ae(()=>e)):ce(e)})}var _P=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===we);return i}getResolvedTitleForRoute(r){return r.data[Md]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(W9),providedIn:"root"});let n=e;return n})(),W9=(()=>{let e=class e extends _P{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(q(Pn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ld=new J("",{providedIn:"root",factory:()=>({})}),K9=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=xe({type:e,selectors:[["ng-component"]],standalone:!0,features:[Cu],decls:1,vars:0,template:function(i,s){i&1&&se(0,"router-outlet")},dependencies:[bE],encapsulation:2});let n=e;return n})();function EE(n){let e=n.children&&n.children.map(EE),t=e?ne(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=K9),t}var pm=new J(""),IE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(Xp)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ce(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=bs(r.loadComponent()).pipe(ae(wP),Et(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Js(()=>{this.componentLoaders.delete(r)})),s=new _a(i,()=>new He).pipe(va());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ce({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Q9(i,this.compiler,r,this.onLoadEndListener).pipe(Js(()=>{this.childrenLoaders.delete(i)})),a=new _a(o,()=>new He).pipe(va());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Q9(n,e,t,r){return bs(n.loadChildren()).pipe(ae(wP),bt(i=>i instanceof yu||Array.isArray(i)?ce(i):Me(e.compileModuleAsync(i))),ae(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(pm,[],{optional:!0,self:!0}).flat()),{routes:o.map(EE),injector:s}}))}function Y9(n){return n&&typeof n=="object"&&"default"in n}function wP(n){return Y9(n)?n.default:n}var TE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(Z9),providedIn:"root"});let n=e;return n})(),Z9=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),bP=new J(""),EP=new J("");function J9(n,e,t){let r=n.get(EP),i=n.get(Vt);return n.get(Ie).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),X9(n))),{onViewTransitionCreated:c}=r;return c&&Jn(n,()=>c({transition:a,from:e,to:t})),o})}function X9(n){return new Promise(e=>{u0({read:()=>setTimeout(e)},{injector:n})})}var e6=new J(""),CE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new He,this.transitionAbortSubject=new He,this.configLoader=G(IE),this.environmentInjector=G(yn),this.urlSerializer=G(Nd),this.rootContexts=G(Od),this.location=G(ic),this.inputBindingEnabled=G(mm,{optional:!0})!==null,this.titleStrategy=G(_P),this.options=G(Ld,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(TE),this.createViewTransition=G(bP,{optional:!0}),this.navigationErrorHandler=G(e6,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ce(void 0),this.rootComponentType=null;let r=s=>this.events.next(new rE(s)),i=s=>this.events.next(new iE(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ne(N(N({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ht({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ed,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Nt(o=>o.id!==0),ae(o=>ne(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Je(o=>{let a=!1,c=!1;return ce(o).pipe(Je(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Gn.SupersededByNewNavigation),pn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ne(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&h!=="reload"){let p="";return this.events.next(new ws(l.id,this.urlSerializer.serialize(l.rawUrl),p,sm.IgnoredSameUrlNavigation)),l.resolve(!1),pn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ce(l).pipe(Je(p=>{let m=this.transitions?.getValue();return this.events.next(new Pc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?pn:Promise.resolve(p)}),B9(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Et(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ne(N({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new om(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:b,extras:E}=l,k=new Pc(p,this.urlSerializer.serialize(m),_,b);this.events.next(k);let L=cP(this.rootComponentType).snapshot;return this.currentTransition=o=ne(N({},l),{targetSnapshot:L,urlAfterRedirects:m,extras:ne(N({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ce(o)}else{let p="";return this.events.next(new ws(l.id,this.urlSerializer.serialize(l.extractedUrl),p,sm.IgnoredByUrlHandlingStrategy)),l.resolve(!1),pn}}),Et(l=>{let d=new Xb(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ae(l=>(this.currentTransition=o=ne(N({},l),{guards:c9(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),_9(this.environmentInjector,l=>this.events.next(l)),Et(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw hm(this.urlSerializer,l.guardsResult);let d=new eE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Nt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Gn.GuardRejected),!1)),Wb(l=>{if(l.guards.canActivateChecks.length)return ce(l).pipe(Et(d=>{let h=new tE(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Je(d=>{let h=!1;return ce(d).pipe(q9(this.paramsInheritanceStrategy,this.environmentInjector),Et({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",Gn.NoDataFromResolver)}}))}),Et(d=>{let h=new nE(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),Wb(l=>{let d=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(Et(m=>{h.component=m}),ae(()=>{})));for(let m of h.children)p.push(...d(m));return p};return nu(d(l.targetSnapshot.root)).pipe(Gi(null),oi(1))}),Wb(()=>this.afterPreactivation()),Je(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return h?Me(h).pipe(ae(()=>o)):ce(o)}),ae(l=>{let d=r9(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ne(N({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),Et(()=>{this.events.next(new Sd)}),a9(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),oi(1),Et({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Di(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),au(this.transitionAbortSubject.pipe(Et(l=>{throw l}))),Js(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Gn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Hi(l=>{if(c=!0,fP(l))this.events.next(new Ti(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),o9(l)?this.events.next(new Oc(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Dd(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let h=Jn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof xd){let{message:p,cancellationCode:m}=hm(this.urlSerializer,h);this.events.next(new Ti(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Oc(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let p=r.errorHandler(l);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return pn}))}))}cancelNavigationTransition(r,i,s){let o=new Ti(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function t6(n){return n!==Ed}var n6=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(r6),providedIn:"root"});let n=e;return n})(),_E=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},r6=(()=>{let e=class e extends _E{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=mo(e)))(s||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),IP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(i6),providedIn:"root"});let n=e;return n})(),i6=(()=>{let e=class e extends IP{constructor(){super(...arguments),this.location=G(ic),this.urlSerializer=G(Nd),this.options=G(Ld,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(TE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ci,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=cP(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Pc)this.stateMemento=this.createStateMemento();else if(r instanceof ws)this.rawUrlTree=i.initialUrl;else if(r instanceof om){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof Sd?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Ti&&(r.code===Gn.GuardRejected||r.code===Gn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Dd?this.restoreHistory(i,!0):r instanceof Di&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Ci?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=N(N({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=N(N({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=mo(e)))(s||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),wd=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(wd||{});function TP(n,e){n.events.pipe(Nt(t=>t instanceof Di||t instanceof Ti||t instanceof Dd||t instanceof ws),ae(t=>t instanceof Di||t instanceof ws?wd.COMPLETE:(t instanceof Ti?t.code===Gn.Redirect||t.code===Gn.SupersededByNewNavigation:!1)?wd.REDIRECTING:wd.FAILED),Nt(t=>t!==wd.REDIRECTING),oi(1)).subscribe(()=>{e()})}function s6(n){throw n}var o6={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},a6={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_n=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(Kp),this.stateManager=G(IP),this.options=G(Ld,{optional:!0})||{},this.pendingTasks=G(os),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(CE),this.urlSerializer=G(Nd),this.location=G(ic),this.urlHandlingStrategy=G(TE),this._events=new He,this.errorHandler=this.options.errorHandler||s6,this.navigated=!1,this.routeReuseStrategy=G(n6),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(pm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(mm,{optional:!0}),this.eventsSubscription=new dt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Ti&&i.code!==Gn.Redirect&&i.code!==Gn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Di)this.navigated=!0;else if(i instanceof Oc){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=N({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||t6(s.source)},a);this.scheduleNavigation(c,Ed,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}l6(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ed,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=N({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(EE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=s?s.snapshot:this.routerState.snapshot.root;p=iP(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return sP(p,r,h,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Td(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ed,null,i)}navigate(r,i={skipLocationChange:!1}){return c6(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=N({},o6):i===!1?s=N({},a6):s=i,Td(r))return VN(this.currentUrlTree,r,s);let o=this.parseUrl(r);return VN(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((p,m)=>{c=p,l=m});let h=this.pendingTasks.add();return TP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function c6(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new re(4008,!1)}function l6(n){return!(n instanceof Sd)&&!(n instanceof Oc)}var gm=class{};var u6=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Nt(r=>r instanceof Di),si(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Bp(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Me(s).pipe(zi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=ce(null);let o=s.pipe(bt(a=>a===null?ce(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Me([o,a]).pipe(zi())}else return o})}};e.\u0275fac=function(i){return new(i||e)(q(_n),q(Xp),q(yn),q(gm),q(IE))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),CP=new J(""),d6=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Pc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Di?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof ws&&r.code===sm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof am&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new am(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Hk()},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function h6(n){return n.routerState.root}function Vd(n,e){return{\u0275kind:n,\u0275providers:e}}function f6(){let n=G(Bn);return e=>{let t=n.get(gi);if(e!==t.components[0])return;let r=n.get(_n),i=n.get(DP);n.get(DE)===1&&r.initialNavigation(),n.get(SP,null,De.Optional)?.setUpPreloading(),n.get(CP,null,De.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var DP=new J("",{factory:()=>new He}),DE=new J("",{providedIn:"root",factory:()=>1});function p6(){return Vd(2,[{provide:DE,useValue:0},{provide:Zp,multi:!0,deps:[Bn],useFactory:e=>{let t=e.get(oM,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(_n),s=e.get(DP);TP(i,()=>{r(!0)}),e.get(CE).afterPreactivation=()=>(r(!0),s.closed?ce(void 0):s),i.initialNavigation()}))}}])}function g6(){return Vd(3,[{provide:Zp,multi:!0,useFactory:()=>{let e=G(_n);return()=>{e.setUpLocationChangeListener()}}},{provide:DE,useValue:2}])}var SP=new J("");function m6(n){return Vd(0,[{provide:SP,useExisting:u6},{provide:gm,useExisting:n}])}function y6(){return Vd(8,[BN,{provide:mm,useExisting:BN}])}function v6(n){let e=[{provide:bP,useValue:J9},{provide:EP,useValue:N({skipNextTransition:!!n?.skipInitialTransition},n)}];return Vd(9,e)}var GN=new J("ROUTER_FORROOT_GUARD"),_6=[ic,{provide:Nd,useClass:Nc},_n,Od,{provide:Fn,useFactory:h6,deps:[_n]},IE,[]],SE=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[_6,[],{provide:pm,multi:!0,useValue:r},{provide:GN,useFactory:I6,deps:[[_n,new Ga,new wp]]},{provide:Ld,useValue:i||{}},i?.useHash?b6():E6(),w6(),i?.preloadingStrategy?m6(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?T6(i):[],i?.bindToComponentInputs?y6().\u0275providers:[],i?.enableViewTransitions?v6().\u0275providers:[],C6()]}}static forChild(r){return{ngModule:e,providers:[{provide:pm,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(q(GN,8))},e.\u0275mod=Ft({type:e}),e.\u0275inj=Ot({});let n=e;return n})();function w6(){return{provide:CP,useFactory:()=>{let n=G(fM),e=G(Ie),t=G(Ld),r=G(CE),i=G(Nd);return t.scrollOffset&&n.setOffset(t.scrollOffset),new d6(i,r,n,e,t)}}}function b6(){return{provide:wo,useClass:cM}}function E6(){return{provide:wo,useClass:V0}}function I6(n){return"guarded"}function T6(n){return[n.initialNavigation==="disabled"?g6().\u0275providers:[],n.initialNavigation==="enabledBlocking"?p6().\u0275providers:[]]}var WN=new J("");function C6(){return[{provide:WN,useFactory:f6},{provide:Jp,multi:!0,useExisting:WN}]}function D6(n,e){n&1&&(x(0,"a",14)(1,"i",15),U(2,"\xA0Chat"),M()())}function S6(n,e){if(n&1&&(x(0,"li",11)(1,"a",16),U(2),M()()),n&2){let t=e.$implicit;j(),Q("href",t.link,ft),j(),qe(t.text)}}var AP=(()=>{let e=class e{constructor(r,i,s,o){this.cdRef=r,this.messaging=i,this.supabaseService=s,this.router=o,this.navUser=Z.homeUser,this.photoUrl="",this.navLinks=Z.navLinks,this.contactsFileFound=!1,this.userLoaded=Z.ghUserLoaded,this.isHomeGHUser=!0,i.event$.subscribe(a=>{let c=a;switch(this.userLoaded=Z.ghUserLoaded,this.isHomeGHUser=this.userLoaded==le.gh_default_user_repo,c.cmd){case"UserDirectory":this.isHomeGHUser?this.navLinks.push({link:"#projects",text:"Solutions"}):this.navLinks.forEach(d=>{let h=Z.navLinks.indexOf(d);Z.navLinks[h].link=Z.ghUser.blog}),this.navUser=Z.ghUser,Z.userContext.directory.folders.forEach(d=>{let h=d.charAt(0).toUpperCase()+d.slice(1),p=d.toLowerCase();p.endsWith("contacts")||this.navLinks.push({link:this.getNavLink(p),text:h})}),this.addAContactLink();break;case"PageFile":switch(c.file){case"HomeGHUser":break;default:break}break;default:break}})}getNavLink(r){return this.isHomeGHUser?"/"+r:`/${Z.userContext.username}/${r}`}addAContactLink(){let r=Z.userContext.directory;r.files&&r.files.includes("contacts.md")?this.navLinks.push({link:this.getNavLink("contacts"),text:"Contacts"}):this.navLinks.push({link:"#about",text:"Contact"})}ngOnInit(){this.supabaseService.getSupabaseClient().auth.onAuthStateChange((r,i)=>{if(r==="SIGNED_IN"&&(this.cdRef.detectChanges(),i&&i.user&&i.user.user_metadata)){let s=i.user.user_metadata.preferred_username;this.router.navigate([`/${s}/contacts`])}})}isLoggedIn(){return this.supabaseService.isLoggedIn()}signinWithGitHub(){return y(this,null,function*(){let r=window.location.pathname,{data:i,error:s}=yield this.supabaseService.signInWithGitHub(r);s&&console.error("Login error:",s.message)})}};e.\u0275fac=function(i){return new(i||e)(B(Lr),B(an),B(Dc),B(_n))},e.\u0275cmp=xe({type:e,selectors:[["app-navbar"]],decls:18,vars:10,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container"],["href","/"],[1,"fa-solid","fa-link",2,"color","green"],[1,"navbar-brand",3,"href"],["href","/chat",4,"ngIf"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav","navbar-nav","ml-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","js-scroll-trigger",3,"click"],[1,"fa-solid","fa-crown"],["href","/chat"],[1,"fa-solid","fa-bolt","lightning-text"],[1,"nav-link","js-scroll-trigger",3,"href"]],template:function(i,s){i&1&&(x(0,"nav",0)(1,"div",1)(2,"span")(3,"a",2),se(4,"i",3),M(),x(5,"a",4)(6,"b"),U(7),M(),fe(8,D6,3,0,"a",5),M()(),x(9,"button",6),se(10,"span",7),M(),x(11,"div",8)(12,"ul",9),fe(13,S6,3,2,"li",10),Dt(14,"slice"),x(15,"li",11)(16,"a",12),Se("click",function(){return s.signinWithGitHub()}),se(17,"i",13),M()()()()()()),i&2&&(j(5),Q("href",s.userLoaded,ft),j(2),mt("\xA0",s.navUser.name,""),j(),Q("ngIf",s.isHomeGHUser),j(5),Q("ngForOf",nc(14,6,s.navLinks,0,7)),j(4),cs("color",s.isLoggedIn()?"green":"#FFD43B"))},dependencies:[sn,$t,oc],styles:["@keyframes _ngcontent-%COMP%_blink{0%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.2)}to{opacity:1;transform:scale(1)}}.lightning-text[_ngcontent-%COMP%]{font-size:.5em;color:#ff4500;text-transform:lowercase;margin-left:5px;animation:_ngcontent-%COMP%_blink 2s infinite}"]});let n=e;return n})();var ke=class n{static parseHtmlLine(e){return e.includes("Widget:")?{Widget:"NAVI"}:{PageType:e}}static isMobileBrowser(){let e=navigator.userAgent||window.opera;return!!(/android/i.test(e)||/iPad|iPhone|iPod/.test(e)&&!window.MSStream)}static toString(e){return e==null?"":typeof e=="string"?e:String(e)}static unescape(e){return e=this.toString(e),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")}static getTodaysDate(e){let t=new Date().toUTCString();return t=t.replaceAll(" ",e),t.replace(",","")}static getBasePath(e){let t="",r=e.snapshot.url[0];return r&&r.path&&(t=r.path),r&&r.path?.toLocaleLowerCase()}static getUrl(e){let t=e.url;for(;t!==decodeURIComponent(t);)t=decodeURIComponent(t);let r=t.indexOf("?");return r>0?e.url.substring(0,r):e.url}static getRouterUrl(e,t){return this.getUrl(e).replace("/"+t,"")}static getRouteParam(e,t){return e.snapshot.paramMap.get(t)?.toLocaleLowerCase()}static getQueryParam(e,t){return e.snapshot.queryParamMap.get(t)}static getFirstLineEnd(e){return e.indexOf(`
`)}static getFirstLine(e){let t=e.indexOf(`
`);return t!==-1?e.substring(0,t):e}static getDataValueFromString(e){let t=e.charAt(0);return t=="["?(e=e.replace(/'/g,'"'),e=JSON.parse(e),e):t=="'"||t=="`"||t=='"'?(e=e.replace(/'/g,'"'),JSON.parse(e)):new Number(e)}static getFilesInFolder(e,t){return e.files.filter(r=>r.includes(t))}static getFileNameWithoutCurrentFolder(e,t){return n.getFileName(e.substring(e.indexOf(t)+t.length+1),!0)}static getFileName(e,t=!1){let i=(t?e:e.substring(e.lastIndexOf("/")+1)).replace(/[-_]/g," ");return i.substring(0,i.lastIndexOf("."))}static getFileNameWithCategory(e,t=!1){let r="",i=e.lastIndexOf("/");e.indexOf("/")!=-1&&(r=t?e.substring(0,e.indexOf("/")):e.substring(e.lastIndexOf("/",i-1)+1,i));let a=e.substring(i+1).replace(/[-_]/g," ");return{Category:r,File:a.substring(0,a.lastIndexOf("."))}}static closestHost(e){let t=e.replace("www.",""),r=t.substring(0,t.lastIndexOf("."));r!=""&&(t=r);let i=t.substring(t.indexOf("."));i!=""&&(t=i);let s=new Map;return s.set("raw.githubusercontent","github"),s.set(".githubusercontent","github"),s.set("youtu","youtube"),s.set(".publichome","publichome"),s.has(t)?s.get(t):t}static getHostText(e){switch(e){case"youtube":return"YouTube";case"github":return"Github";case"linkedin":return"Linkedin";default:break}return e}static getFontAwesomeIconByKey(e){let t=this.closestHost(e),r=t;switch(t){case"subscribe":return"bell";case"payment":return"credit-card";case"self":return"handshake";default:break}return r}static getIconForKeyWithColor(e){let t="link",r=Z.contactHostNameByKeys.get(e);r&&(t=this.getFontAwesomeIconByKey(r.toLocaleLowerCase()));let i=Z.iconsColorByBrandKey.get(t.toLowerCase());return[t,i]}static getGhUserFilePath(e,t,r=!1){let i=`${le.gh_dr_url}/${e}/${le.gh_dr_folder}/${t}`;return le.js_deliver.enabled&&(i=`${le.js_deliver.url}/${e}/${le.js_deliver.version}/${t}`),r?`${le.gh_api_url}/repos/${e}/${le.gh_private_dr_folder}/contents/${t}`:i}static getActionByService(e){let t=new Map;t.set("self","notificationhook"),t.set("payment","pagehook");let r=t.get(e);return r||"notificationhook"}};var sr=class{constructor(e){if(this.githubService=e,this.router=G(_n),this.route=G(Fn),this.messaging=G(an),this.routerFileUrl="",this.hasPrivateAccess=!1,this.githubUser=le.gh_default_user_repo,this.basePath="",this.articleFolderName="",this.isHomePageGHUser=!1,this.basePath=ke.getBasePath(this.route),this.basePath=="i"||Z.INTERNAL_FOLDERS.includes(this.basePath)){let t=ke.getRouteParam(this.route,"folder");t||(t=this.basePath),this.articleFolderName=t}else console.debug("It is a user's public article !!");this.githubUser=ke.getRouteParam(this.route,"ghUser"),this.githubUser||(this.githubUser=le.gh_default_user_repo,this.isHomePageGHUser=!0),this.routerFileUrl=ke.getRouterUrl(this.router,this.githubUser),this.githubUser&&this.githubService.getJwtToken(this.githubUser).then(t=>this.githubService.getAccessToken(t).then(r=>{this.hasPrivateAccess=r!=null})).finally(()=>{this.userInitialised(),this.initialiseUserContext(this.githubUser)})}initialiseUserContext(e){return y(this,null,function*(){this.githubService.get("users/"+e).then(t=>{Z.ghUser=JSON.parse(t),Z.userContext.username=e,this.githubService.getGhDirectoryContents(e).then(r=>{Z.userContext.directory=r,this.messaging.send({cmd:"UserDirectory"})})}).finally(()=>{Z.ghUserLoaded=e,this.messaging.send({cmd:"UserContext"})})})}getFolderName(){return this.articleFolderName}};function cn(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function vm(n,e,t,r){if(typeof t!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>vm.bind(null,n,s,i,r),t)():Promise.resolve().then(()=>n.registry[e]?n.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),t)():t(r))}function xP(n,e,t,r){let i=r;n.registry[t]||(n.registry[t]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(c=>(a=c,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),n.registry[t].push({hook:r,orig:i})}function kP(n,e,t){if(!n.registry[e])return;let r=n.registry[e].map(i=>i.orig).indexOf(t);r!==-1&&n.registry[e].splice(r,1)}var RP=Function.bind,MP=RP.bind(RP);function NP(n,e,t){let r=MP(kP,null).apply(null,t?[e,t]:[e]);n.api={remove:r},n.remove=r,["before","error","after","wrap"].forEach(i=>{let s=t?[e,i,t]:[e,i];n[i]=n.api[i]=MP(xP,null).apply(null,s)})}function A6(){let n=Symbol("Singular"),e={registry:{}},t=vm.bind(null,e,n);return NP(t,e,n),t}function x6(){let n={registry:{}},e=vm.bind(null,n);return NP(e,n),e}var PP={Singular:A6,Collection:x6};var k6="0.0.0-development",R6=`octokit-endpoint.js/${k6} ${cn()}`,M6={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":R6},mediaType:{format:""}};function N6(n){return n?Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=n[t],e),{}):{}}function P6(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function LP(n,e){let t=Object.assign({},n);return Object.keys(e).forEach(r=>{P6(e[r])?r in n?t[r]=LP(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function OP(n){for(let e in n)n[e]===void 0&&delete n[e];return n}function xE(n,e,t){if(typeof e=="string"){let[i,s]=e.split(" ");t=Object.assign(s?{method:i,url:s}:{url:i},t)}else t=Object.assign({},e);t.headers=N6(t.headers),OP(t),OP(t.headers);let r=LP(n||{},t);return t.url==="/graphql"&&(n&&n.mediaType.previews?.length&&(r.mediaType.previews=n.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function O6(n,e){let t=/\?/.test(n)?"&":"?",r=Object.keys(e);return r.length===0?n:n+t+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var F6=/\{[^}]+\}/g;function L6(n){return n.replace(/^\W+|\W+$/g,"").split(/,/)}function V6(n){let e=n.match(F6);return e?e.map(L6).reduce((t,r)=>t.concat(r),[]):[]}function FP(n,e){let t={__proto__:null};for(let r of Object.keys(n))e.indexOf(r)===-1&&(t[r]=n[r]);return t}function VP(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function jc(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ud(n,e,t){return e=n==="+"||n==="#"?VP(e):jc(e),t?jc(t)+"="+e:e}function Vc(n){return n!=null}function AE(n){return n===";"||n==="&"||n==="?"}function j6(n,e,t,r){var i=n[t],s=[];if(Vc(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(Ud(e,i,AE(e)?t:""));else if(r==="*")Array.isArray(i)?i.filter(Vc).forEach(function(o){s.push(Ud(e,o,AE(e)?t:""))}):Object.keys(i).forEach(function(o){Vc(i[o])&&s.push(Ud(e,i[o],o))});else{let o=[];Array.isArray(i)?i.filter(Vc).forEach(function(a){o.push(Ud(e,a))}):Object.keys(i).forEach(function(a){Vc(i[a])&&(o.push(jc(a)),o.push(Ud(e,i[a].toString())))}),AE(e)?s.push(jc(t)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?Vc(i)&&s.push(jc(t)):i===""&&(e==="&"||e==="?")?s.push(jc(t)+"="):i===""&&s.push("");return s}function U6(n){return{expand:$6.bind(null,n)}}function $6(n,e){var t=["+","#",".","/",";","?","&"];return n=n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="",c=[];if(t.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(l){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(l);c.push(j6(e,a,d[1],d[2]||d[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(c.length!==0?a:"")+c.join(o)}else return c.join(",")}else return VP(s)}),n==="/"?n:n.replace(/\/$/,"")}function jP(n){let e=n.method.toUpperCase(),t=(n.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},n.headers),i,s=FP(n,["method","baseUrl","url","headers","request","mediaType"]),o=V6(t);t=U6(t).expand(s),/^http/.test(t)||(t=n.baseUrl+t);let a=Object.keys(n).filter(d=>o.includes(d)).concat("baseUrl"),c=FP(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(n.mediaType.format&&(r.accept=r.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${n.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&n.mediaType.previews?.length)){let d=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=d.concat(n.mediaType.previews).map(h=>{let p=n.mediaType.format?`.${n.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${p}`}).join(",")}return["GET","HEAD"].includes(e)?t=O6(t,c):"data"in c?i=c.data:Object.keys(c).length&&(i=c),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:t,headers:r},typeof i<"u"?{body:i}:null,n.request?{request:n.request}:null)}function B6(n,e,t){return jP(xE(n,e,t))}function UP(n,e){let t=xE(n,e),r=B6.bind(null,t);return Object.assign(r,{DEFAULTS:t,defaults:UP.bind(null,t),merge:xE.bind(null,t),parse:jP})}var $P=UP(null,M6);var Si=class extends Error{name;status;request;response;constructor(e,t,r){super(e),this.name="HttpError",this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);let i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}};var q6="0.0.0-development",z6={headers:{"user-agent":`octokit-request.js/${q6} ${cn()}`}};function H6(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function BP(n){return y(this,null,function*(){let e=n.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let t=n.request?.log||console,r=n.request?.parseSuccessResponseBody!==!1,i=H6(n.body)||Array.isArray(n.body)?JSON.stringify(n.body):n.body,s=Object.fromEntries(Object.entries(n.headers).map(([h,p])=>[h,String(p)])),o;try{o=yield e(n.url,N({method:n.method,body:i,redirect:n.request?.redirect,headers:s,signal:n.request?.signal},n.body&&{duplex:"half"}))}catch(h){let p="Unknown Error";if(h instanceof Error){if(h.name==="AbortError")throw h.status=500,h;p=h.message,h.name==="TypeError"&&"cause"in h&&(h.cause instanceof Error?p=h.cause.message:typeof h.cause=="string"&&(p=h.cause))}let m=new Si(p,500,{request:n});throw m.cause=h,m}let a=o.status,c=o.url,l={};for(let[h,p]of o.headers)l[h]=p;let d={url:c,status:a,headers:l,data:""};if("deprecation"in l){let h=l.link&&l.link.match(/<([^>]+)>; rel="deprecation"/),p=h&&h.pop();t.warn(`[@octokit/request] "${n.method} ${n.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${p?`. See ${p}`:""}`)}if(a===204||a===205)return d;if(n.method==="HEAD"){if(a<400)return d;throw new Si(o.statusText,a,{response:d,request:n})}if(a===304)throw d.data=yield kE(o),new Si("Not modified",a,{response:d,request:n});if(a>=400)throw d.data=yield kE(o),new Si(G6(d.data),a,{response:d,request:n});return d.data=r?yield kE(o):o.body,d})}function kE(n){return y(this,null,function*(){let e=n.headers.get("content-type");return/application\/json/.test(e)?n.json().catch(()=>n.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?n.text():n.arrayBuffer()})}function G6(n){if(typeof n=="string")return n;if(n instanceof ArrayBuffer)return"Unknown error";if("message"in n){let e="documentation_url"in n?` - ${n.documentation_url}`:"";return Array.isArray(n.errors)?`${n.message}: ${n.errors.map(t=>JSON.stringify(t)).join(", ")}${e}`:`${n.message}${e}`}return`Unknown error: ${JSON.stringify(n)}`}function RE(n,e){let t=n.defaults(e);return Object.assign(function(i,s){let o=t.merge(i,s);if(!o.request||!o.request.hook)return BP(t.parse(o));let a=(c,l)=>BP(t.parse(t.merge(c,l)));return Object.assign(a,{endpoint:t,defaults:RE.bind(null,t)}),o.request.hook(a,o)},{endpoint:t,defaults:RE.bind(null,t)})}var Ge=RE($P,z6);var W6="0.0.0-development";function K6(n){return`Request failed due to following response errors:
`+n.errors.map(e=>` - ${e.message}`).join(`
`)}var Q6=class extends Error{constructor(n,e,t){super(K6(t)),this.request=n,this.headers=e,this.response=t,this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},Y6=["method","baseUrl","url","headers","request","query","mediaType"],Z6=["query","method","url"],qP=/\/api\/v3\/?$/;function J6(n,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in t)if(Z6.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let r=typeof e=="string"?Object.assign({query:e},t):e,i=Object.keys(r).reduce((o,a)=>Y6.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||n.endpoint.DEFAULTS.baseUrl;return qP.test(s)&&(i.url=s.replace(qP,"/api/graphql")),n(i).then(o=>{if(o.data.errors){let a={};for(let c of Object.keys(o.headers))a[c]=o.headers[c];throw new Q6(i,a,o.data)}return o.data.data})}function ME(n,e){let t=n.defaults(e);return Object.assign((i,s)=>J6(t,i,s),{defaults:ME.bind(null,t),endpoint:t.endpoint})}var pce=ME(Ge,{headers:{"user-agent":`octokit-graphql.js/${W6} ${cn()}`},method:"POST",url:"/graphql"});function zP(n){return ME(n,{method:"POST",url:"/graphql"})}var X6=/^v1\./,e8=/^ghs_/,t8=/^ghu_/;function n8(n){return y(this,null,function*(){let e=n.split(/\./).length===3,t=X6.test(n)||e8.test(n),r=t8.test(n);return{type:"token",token:n,tokenType:e?"app":t?"installation":r?"user-to-server":"oauth"}})}function r8(n){return n.split(/\./).length===3?`bearer ${n}`:`token ${n}`}function i8(n,e,t,r){return y(this,null,function*(){let i=e.endpoint.merge(t,r);return i.headers.authorization=r8(n),e(i)})}var HP=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(n8.bind(null,e),{hook:i8.bind(null,e)})};var NE="6.1.2";var GP=()=>{},s8=console.warn.bind(console),o8=console.error.bind(console),WP=`octokit-core.js/${NE} ${cn()}`,PE=(()=>{class n{static VERSION=NE;static defaults(t){return class extends this{constructor(...i){let s=i[0]||{};if(typeof t=="function"){super(t(s));return}super(Object.assign({},t,s,s.userAgent&&t.userAgent?{userAgent:`${s.userAgent} ${t.userAgent}`}:null))}}}static plugins=[];static plugin(...t){let r=this.plugins;return class extends this{static plugins=r.concat(t.filter(s=>!r.includes(s)))}}constructor(t={}){let r=new PP.Collection,i={baseUrl:Ge.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(i.headers["user-agent"]=t.userAgent?`${t.userAgent} ${WP}`:WP,t.baseUrl&&(i.baseUrl=t.baseUrl),t.previews&&(i.mediaType.previews=t.previews),t.timeZone&&(i.headers["time-zone"]=t.timeZone),this.request=Ge.defaults(i),this.graphql=zP(this.request).defaults(i),this.log=Object.assign({debug:GP,info:GP,warn:s8,error:o8},t.log),this.hook=r,t.authStrategy){let o=t,{authStrategy:a}=o,c=In(o,["authStrategy"]),l=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:c},t.auth));r.wrap("request",l.hook),this.auth=l}else if(!t.auth)this.auth=()=>y(this,null,function*(){return{type:"unauthenticated"}});else{let a=HP(t.auth);r.wrap("request",a.hook),this.auth=a}let s=this.constructor;for(let a=0;a<s.plugins.length;++a)Object.assign(this,s.plugins[a](this,t))}request;graphql;log;hook;auth}return n})();function a8(n){let e=n.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(e.baseUrl)?"https://github.com":e.baseUrl.replace("/api/v3","")}function _m(n,e,t){return y(this,null,function*(){let r=N({baseUrl:a8(n),headers:{accept:"application/json"}},t),i=yield n(e,r);if("error"in i.data){let s=new Si(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:n.endpoint.merge(e,r)});throw s.response=i,s}return i})}function ZP(n){return y(this,null,function*(){let e=n.request||Ge,t=yield _m(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,code:n.code,redirect_uri:n.redirectUrl}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=KP(i,t.data.expires_in),r.refreshTokenExpiresAt=KP(i,t.data.refresh_token_expires_in)}delete r.scopes}return ne(N({},t),{authentication:r})})}function KP(n,e){return new Date(n+e*1e3).toISOString()}function JP(n){return y(this,null,function*(){let e=n.request||Ge,t={client_id:n.clientId};return"scopes"in n&&Array.isArray(n.scopes)&&(t.scope=n.scopes.join(" ")),_m(e,"POST /login/device/code",t)})}function OE(n){return y(this,null,function*(){let e=n.request||Ge,t=yield _m(e,"POST /login/oauth/access_token",{client_id:n.clientId,device_code:n.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),r={clientType:n.clientType,clientId:n.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in n&&(r.clientSecret=n.clientSecret),n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=QP(i,t.data.expires_in),r.refreshTokenExpiresAt=QP(i,t.data.refresh_token_expires_in)}delete r.scopes}return ne(N({},t),{authentication:r})})}function QP(n,e){return new Date(n+e*1e3).toISOString()}function XP(n){return y(this,null,function*(){let t=yield(n.request||Ge)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`},client_id:n.clientId,access_token:n.token}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.token,scopes:t.data.scopes};return t.data.expires_at&&(r.expiresAt=t.data.expires_at),n.clientType==="github-app"&&delete r.scopes,ne(N({},t),{authentication:r})})}function eO(n){return y(this,null,function*(){let e=n.request||Ge,t=yield _m(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,grant_type:"refresh_token",refresh_token:n.refreshToken}),r=new Date(t.headers.date).getTime(),i={clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:YP(r,t.data.expires_in),refreshTokenExpiresAt:YP(r,t.data.refresh_token_expires_in)};return ne(N({},t),{authentication:i})})}function YP(n,e){return new Date(n+e*1e3).toISOString()}function tO(n){return y(this,null,function*(){let e=n.request||Ge,t=btoa(`${n.clientId}:${n.clientSecret}`),r=yield e("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token}),i={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:r.data.token,scopes:r.data.scopes};return r.data.expires_at&&(i.expiresAt=r.data.expires_at),n.clientType==="github-app"&&delete i.scopes,ne(N({},r),{authentication:i})})}function nO(n){return y(this,null,function*(){let e=n.request||Ge,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function rO(n){return y(this,null,function*(){let e=n.request||Ge,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function sO(n,e){return y(this,null,function*(){let t=c8(n,e.auth);if(t)return t;let{data:r}=yield JP({clientType:n.clientType,clientId:n.clientId,request:e.request||n.request,scopes:e.auth.scopes||n.scopes});yield n.onVerification(r);let i=yield FE(e.request||n.request,n.clientId,n.clientType,r);return n.authentication=i,i})}function c8(n,e){if(e.refresh===!0||!n.authentication)return!1;if(n.clientType==="github-app")return n.authentication;let t=n.authentication,r=("scopes"in e&&e.scopes||n.scopes).join(" "),i=t.scopes.join(" ");return r===i?t:!1}function iO(n){return y(this,null,function*(){yield new Promise(e=>setTimeout(e,n*1e3))})}function FE(n,e,t,r){return y(this,null,function*(){try{let i={clientId:e,request:n,code:r.device_code},{authentication:s}=t==="oauth-app"?yield OE(ne(N({},i),{clientType:"oauth-app"})):yield OE(ne(N({},i),{clientType:"github-app"}));return N({type:"token",tokenType:"oauth"},s)}catch(i){if(!i.response)throw i;let s=i.response.data.error;if(s==="authorization_pending")return yield iO(r.interval),FE(n,e,t,r);if(s==="slow_down")return yield iO(r.interval+5),FE(n,e,t,r);throw i}})}function l8(n,e){return y(this,null,function*(){return sO(n,{auth:e})})}function u8(n,e,t,r){return y(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);let{token:s}=yield sO(n,{request:e,auth:{type:"oauth"}});return i.headers.authorization=`token ${s}`,e(i)})}var d8="0.0.0-development";function oO(n){let e=n.request||Ge.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${d8} ${cn()}`}}),s=n,{request:t=e}=s,r=In(s,["request"]),i=n.clientType==="github-app"?ne(N({},r),{clientType:"github-app",request:t}):ne(N({},r),{clientType:"oauth-app",request:t,scopes:n.scopes||[]});if(!n.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!n.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(l8.bind(null,i),{hook:u8.bind(null,i)})}var cO="0.0.0-development";function aO(n){return y(this,null,function*(){if("code"in n.strategyOptions){let{authentication:e}=yield ZP(ne(N({clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}));return N({type:"token",tokenType:"oauth"},e)}if("onVerification"in n.strategyOptions){let t=yield oO(ne(N({clientType:n.clientType,clientId:n.clientId,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}))({type:"oauth"});return N({clientSecret:n.clientSecret},t)}if("token"in n.strategyOptions)return N({type:"token",tokenType:"oauth",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions);throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")})}function LE(t){return y(this,arguments,function*(n,e={}){if(n.authentication||(n.authentication=n.clientType==="oauth-app"?yield aO(n):yield aO(n)),n.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");let r=n.authentication;if("expiresAt"in r&&(e.type==="refresh"||new Date(r.expiresAt)<new Date)){let{authentication:i}=yield eO({clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,refreshToken:r.refreshToken,request:n.request});n.authentication=N({tokenType:"oauth",type:"token"},i)}if(e.type==="refresh"){if(n.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!r.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");yield n.onTokenCreated?.(n.authentication,{type:e.type})}if(e.type==="check"||e.type==="reset"){let i=e.type==="check"?XP:tO;try{let{authentication:s}=yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request});return n.authentication=N({tokenType:"oauth",type:"token"},s),e.type==="reset"&&(yield n.onTokenCreated?.(n.authentication,{type:e.type})),n.authentication}catch(s){throw s.status===404&&(s.message="[@octokit/auth-oauth-user] Token is invalid",n.authentication.invalid=!0),s}}if(e.type==="delete"||e.type==="deleteAuthorization"){let i=e.type==="delete"?nO:rO;try{yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request})}catch(s){if(s.status!==404)throw s}return n.authentication.invalid=!0,n.authentication}return n.authentication})}var h8=/\/applications\/[^/]+\/(token|grant)s?/;function $d(n){return n&&h8.test(n)}function f8(i,s,o){return y(this,arguments,function*(n,e,t,r={}){let a=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(a.url))return e(a);if($d(a.url)){let l=btoa(`${n.clientId}:${n.clientSecret}`);return a.headers.authorization=`basic ${l}`,e(a)}let{token:c}=n.clientType==="oauth-app"?yield LE(ne(N({},n),{request:e})):yield LE(ne(N({},n),{request:e}));return a.headers.authorization="token "+c,e(a)})}function wm(o){var a=o,{clientId:n,clientSecret:e,clientType:t="oauth-app",request:r=Ge.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${cO} ${cn()}`}}),onTokenCreated:i}=a,s=In(a,["clientId","clientSecret","clientType","request","onTokenCreated"]);let c=Object.assign({clientType:t,clientId:n,clientSecret:e,onTokenCreated:i,strategyOptions:s,request:r});return Object.assign(LE.bind(null,c),{hook:f8.bind(null,c)})}wm.VERSION=cO;function p8(n,e){return y(this,null,function*(){if(e.type==="oauth-app")return{type:"oauth-app",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`}};if("factory"in e){let i=N(N({},e),n),{type:s}=i,o=In(i,["type"]);return e.factory(o)}let t=N({clientId:n.clientId,clientSecret:n.clientSecret,request:n.request},e);return(n.clientType==="oauth-app"?yield wm(ne(N({},t),{clientType:n.clientType})):yield wm(ne(N({},t),{clientType:n.clientType})))()})}function g8(n,e,t,r){return y(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);if(n.clientType==="github-app"&&!$d(i.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let s=btoa(`${n.clientId}:${n.clientSecret}`);i.headers.authorization=`basic ${s}`;try{return yield e(i)}catch(o){throw o.status!==401||(o.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),o}})}var m8="0.0.0-development";function lO(n){let e=Object.assign({request:Ge.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${m8} ${cn()}`}}),clientType:"oauth-app"},n);return Object.assign(p8.bind(null,e),{hook:g8.bind(null,e)})}function dO(n){return n.includes("-----BEGIN RSA PRIVATE KEY-----")}function hO(n){return n.includes("-----BEGIN OPENSSH PRIVATE KEY-----")}function VE(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function fO(n){let e=n.trim().split(`
`).slice(1,-1).join(""),t=atob(e);return VE(t)}function pO(n,e){return`${uO(n)}.${uO(e)}`}function gO(n){for(var e="",t=new Uint8Array(n),r=t.byteLength,i=0;i<r;i++)e+=String.fromCharCode(t[i]);return mO(btoa(e))}function mO(n){return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function uO(n){return mO(btoa(JSON.stringify(n)))}var{subtle:jE}=globalThis.crypto;function yO(t){return y(this,arguments,function*({privateKey:n,payload:e}){let r=n;if(dO(r))throw new Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");if(hO(r))throw new Error("[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s={alg:"RS256",typ:"JWT"},o=fO(r),a=yield jE.importKey("pkcs8",o,i,!1,["sign"]),c=pO(s,e),l=VE(c),d=yield jE.sign(i.name,a,l),h=gO(d);return`${c}.${h}`})}function UE(r){return y(this,arguments,function*({id:n,privateKey:e,now:t=Math.floor(Date.now()/1e3)}){let i=e.replace(/\\n/g,`
`),s=t-30,o=s+60*10,c=yield yO({privateKey:i,payload:{iat:s,exp:o,iss:n}});return{appId:n,expiration:o,token:c}})}var Uc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,_O=new Set,$E=typeof process=="object"&&process?process:{},wO=(n,e,t,r)=>{typeof $E.emitWarning=="function"?$E.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)},bm=globalThis.AbortController,vO=globalThis.AbortSignal;if(typeof bm>"u"){vO=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},bm=class{constructor(){e()}signal=new vO;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let n=$E.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{n&&(n=!1,wO("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var y8=n=>!_O.has(n),yle=Symbol("type"),Es=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),bO=n=>Es(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?$c:null:null,$c=class extends Array{constructor(e){super(e),this.fill(0)}},BE=class n{heap;length;static#s=!1;static create(e){let t=bO(e);if(!t)return[];n.#s=!0;let r=new n(e,t);return n.#s=!1,r}constructor(e,t){if(!n.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Em=class n{#s;#l;#g;#m;#k;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#r;#n;#e;#u;#h;#c;#o;#v;#a;#_;#w;#f;#b;#D;#d;static unsafeExposeInternals(e){return{starts:e.#w,ttls:e.#f,sizes:e.#_,keyMap:e.#r,keyList:e.#n,valList:e.#e,next:e.#u,prev:e.#h,get head(){return e.#c},get tail(){return e.#o},free:e.#v,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,r,i,s)=>e.#P(t,r,i,s),moveToTail:t=>e.#x(t),indexes:t=>e.#E(t),rindexes:t=>e.#I(t),isStale:t=>e.#p(t)}}get max(){return this.#s}get maxSize(){return this.#l}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#k}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(e){let{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:p,maxSize:m=0,maxEntrySize:_=0,sizeCalculation:b,fetchMethod:E,memoMethod:k,noDeleteOnFetchRejection:L,noDeleteOnStaleGet:V,allowStaleOnFetchRejection:$,allowStaleOnFetchAbort:W,ignoreFetchAbort:K}=e;if(t!==0&&!Es(t))throw new TypeError("max option must be a nonnegative integer");let C=t?bO(t):Array;if(!C)throw new Error("invalid max value: "+t);if(this.#s=t,this.#l=m,this.maxEntrySize=_||this.#l,this.sizeCalculation=b,this.sizeCalculation){if(!this.#l&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(k!==void 0&&typeof k!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=k,E!==void 0&&typeof E!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#k=E,this.#D=!!E,this.#r=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#u=new C(t),this.#h=new C(t),this.#c=0,this.#o=0,this.#v=BE.create(t),this.#i=0,this.#y=0,typeof l=="function"&&(this.#g=l),typeof d=="function"?(this.#m=d,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#b=!!this.#g,this.#d=!!this.#m,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!L,this.allowStaleOnFetchRejection=!!$,this.allowStaleOnFetchAbort=!!W,this.ignoreFetchAbort=!!K,this.maxEntrySize!==0){if(this.#l!==0&&!Es(this.#l))throw new TypeError("maxSize must be a positive integer if specified");if(!Es(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#$()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!V,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Es(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Es(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#s===0&&this.ttl===0&&this.#l===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#l){let w="LRU_CACHE_UNBOUNDED";y8(w)&&(_O.add(w),wO("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",w,n))}}getRemainingTTL(e){return this.#r.has(e)?1/0:0}#O(){let e=new $c(this.#s),t=new $c(this.#s);this.#f=e,this.#w=t,this.#F=(s,o,a=Uc.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#p(s)&&this.#T(this.#n[s],"expire")},o+1);c.unref&&c.unref()}},this.#S=s=>{t[s]=e[s]!==0?Uc.now():0},this.#C=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();let l=s.now-c;s.remainingTTL=a-l}};let r=0,i=()=>{let s=Uc.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#r.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let l=(r||i())-c;return a-l},this.#p=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#S=()=>{};#C=()=>{};#F=()=>{};#p=()=>!1;#$(){let e=new $c(this.#s);this.#y=0,this.#_=e,this.#A=t=>{this.#y-=e[t],e[t]=0},this.#L=(t,r,i,s)=>{if(this.#t(r))return 0;if(!Es(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!Es(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#M=(t,r,i)=>{if(e[t]=r,this.#l){let s=this.#l-e[t];for(;this.#y>s;)this.#N(!0)}this.#y+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#y)}}#A=e=>{};#M=(e,t,r)=>{};#L=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#V(t)||((e||!this.#p(t))&&(yield t),t===this.#c));)t=this.#h[t]}*#I({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#c;!(!this.#V(t)||((e||!this.#p(t))&&(yield t),t===this.#o));)t=this.#u[t]}#V(e){return e!==void 0&&this.#r.get(this.#n[e])===e}*entries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#I())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#E()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#I()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#I())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#E()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#n[r],this))return this.get(this.#n[r],t)}}forEach(e,t=this){for(let r of this.#E()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}rforEach(e,t=this){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}purgeStale(){let e=!1;for(let t of this.#I({allowStale:!0}))this.#p(t)&&(this.#T(this.#n[t],"expire"),e=!0);return e}info(e){let t=this.#r.get(e);if(t===void 0)return;let r=this.#e[t],i=this.#t(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#f&&this.#w){let o=this.#f[t],a=this.#w[t];if(o&&a){let c=o-(Uc.now()-a);s.ttl=c,s.start=Date.now()}}return this.#_&&(s.size=this.#_[t]),s}dump(){let e=[];for(let t of this.#E({allowStale:!0})){let r=this.#n[t],i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#f&&this.#w){o.ttl=this.#f[t];let a=Uc.now()-this.#w[t];o.start=Math.floor(Date.now()-a)}this.#_&&(o.size=this.#_[t]),e.unshift([r,o])}return e}load(e){this.clear();for(let[t,r]of e){if(r.start){let i=Date.now()-r.start;r.start=Uc.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,d=this.#L(e,t,r.size||0,a);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#T(e,"set"),this;let h=this.#i===0?void 0:this.#r.get(e);if(h===void 0)h=this.#i===0?this.#o:this.#v.length!==0?this.#v.pop():this.#i===this.#s?this.#N(!1):this.#i,this.#n[h]=e,this.#e[h]=t,this.#r.set(e,h),this.#u[this.#o]=h,this.#h[h]=this.#o,this.#o=h,this.#i++,this.#M(h,d,c),c&&(c.set="add"),l=!1;else{this.#x(h);let p=this.#e[h];if(t!==p){if(this.#D&&this.#t(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=p;m!==void 0&&!o&&(this.#b&&this.#g?.(m,e,"set"),this.#d&&this.#a?.push([m,e,"set"]))}else o||(this.#b&&this.#g?.(p,e,"set"),this.#d&&this.#a?.push([p,e,"set"]));if(this.#A(h),this.#M(h,d,c),this.#e[h]=t,c){c.set="replace";let m=p&&this.#t(p)?p.__staleWhileFetching:p;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#f&&this.#O(),this.#f&&(l||this.#F(h,i,s),c&&this.#C(c,h)),!o&&this.#d&&this.#a){let p=this.#a,m;for(;m=p?.shift();)this.#m?.(...m)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#c];if(this.#N(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}}#N(e){let t=this.#c,r=this.#n[t],i=this.#e[t];return this.#D&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#b||this.#d)&&(this.#b&&this.#g?.(i,r,"evict"),this.#d&&this.#a?.push([i,r,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#v.push(t)),this.#i===1?(this.#c=this.#o=0,this.#v.length=0):this.#c=this.#u[t],this.#r.delete(r),this.#i--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#r.get(e);if(s!==void 0){let o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(s))i&&(i.has="stale",this.#C(i,s));else return r&&this.#S(s),i&&(i.has="hit",this.#C(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#r.get(e);if(i===void 0||!r&&this.#p(i))return;let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#P(e,t,r,i){let s=t===void 0?void 0:this.#e[t];if(this.#t(s))return s;let o=new bm,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:r,context:i},l=(b,E=!1)=>{let{aborted:k}=o.signal,L=r.ignoreFetchAbort&&b!==void 0;if(r.status&&(k&&!E?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,L&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),k&&!L&&!E)return h(o.signal.reason);let V=m;return this.#e[t]===m&&(b===void 0?V.__staleWhileFetching?this.#e[t]=V.__staleWhileFetching:this.#T(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,b,c.options))),b},d=b=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=b),h(b)),h=b=>{let{aborted:E}=o.signal,k=E&&r.allowStaleOnFetchAbort,L=k||r.allowStaleOnFetchRejection,V=L||r.noDeleteOnFetchRejection,$=m;if(this.#e[t]===m&&(!V||$.__staleWhileFetching===void 0?this.#T(e,"fetch"):k||(this.#e[t]=$.__staleWhileFetching)),L)return r.status&&$.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),$.__staleWhileFetching;if($.__returned===$)throw b},p=(b,E)=>{let k=this.#k?.(e,s,c);k&&k instanceof Promise&&k.then(L=>b(L===void 0?void 0:L),E),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(b(void 0),r.allowStaleOnFetchAbort&&(b=L=>l(L,!0)))})};r.status&&(r.status.fetchDispatched=!0);let m=new Promise(p).then(l,d),_=Object.assign(m,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,_,ne(N({},c.options),{status:void 0})),t=this.#r.get(e)):this.#e[t]=_,_}#t(e){if(!this.#D)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof bm}fetch(r){return y(this,arguments,function*(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:l=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:_=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:E,forceRefresh:k=!1,status:L,signal:V}=t;if(!this.#D)return L&&(L.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:L});let $={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:c,size:l,sizeCalculation:d,noUpdateTTL:h,noDeleteOnFetchRejection:p,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:b,ignoreFetchAbort:_,status:L,signal:V},W=this.#r.get(e);if(W===void 0){L&&(L.fetch="miss");let K=this.#P(e,W,$,E);return K.__returned=K}else{let K=this.#e[W];if(this.#t(K)){let S=i&&K.__staleWhileFetching!==void 0;return L&&(L.fetch="inflight",S&&(L.returnedStale=!0)),S?K.__staleWhileFetching:K.__returned=K}let C=this.#p(W);if(!k&&!C)return L&&(L.fetch="hit"),this.#x(W),s&&this.#S(W),L&&this.#C(L,W),K;let w=this.#P(e,W,$,E),D=w.__staleWhileFetching!==void 0&&i;return L&&(L.fetch=C?"stale":"refresh",D&&C&&(L.returnedStale=!0)),D?w.__staleWhileFetching:w.__returned=w}})}forceFetch(r){return y(this,arguments,function*(e,t={}){let i=yield this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i})}memo(e,t={}){let r=this.#R;if(!r)throw new Error("no memoMethod provided to constructor");let l=t,{context:i,forceRefresh:s}=l,o=In(l,["context","forceRefresh"]),a=this.get(e,o);if(!s&&a!==void 0)return a;let c=r(e,a,{options:o,context:i});return this.set(e,c,o),c}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#r.get(e);if(a!==void 0){let c=this.#e[a],l=this.#t(c);return o&&this.#C(o,a),this.#p(a)?(o&&(o.get="stale"),l?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.#T(e,"expire"),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#x(a),i&&this.#S(a),c))}else o&&(o.get="miss")}#j(e,t){this.#h[t]=e,this.#u[e]=t}#x(e){e!==this.#o&&(e===this.#c?this.#c=this.#u[e]:this.#j(this.#h[e],this.#u[e]),this.#j(this.#o,e),this.#o=e)}delete(e){return this.#T(e,"delete")}#T(e,t){let r=!1;if(this.#i!==0){let i=this.#r.get(e);if(i!==void 0)if(r=!0,this.#i===1)this.#U(t);else{this.#A(i);let s=this.#e[i];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#b||this.#d)&&(this.#b&&this.#g?.(s,e,t),this.#d&&this.#a?.push([s,e,t])),this.#r.delete(e),this.#n[i]=void 0,this.#e[i]=void 0,i===this.#o)this.#o=this.#h[i];else if(i===this.#c)this.#c=this.#u[i];else{let o=this.#h[i];this.#u[o]=this.#u[i];let a=this.#u[i];this.#h[a]=this.#h[i]}this.#i--,this.#v.push(i)}}if(this.#d&&this.#a?.length){let i=this.#a,s;for(;s=i?.shift();)this.#m?.(...s)}return r}clear(){return this.#U("delete")}#U(e){for(let t of this.#I({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#n[t];this.#b&&this.#g?.(r,i,e),this.#d&&this.#a?.push([r,i,e])}}if(this.#r.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#f&&this.#w&&(this.#f.fill(0),this.#w.fill(0)),this.#_&&this.#_.fill(0),this.#c=0,this.#o=0,this.#v.length=0,this.#y=0,this.#i=0,this.#d&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#m?.(...r)}}};function Im(r){return y(this,arguments,function*({appId:n,privateKey:e,timeDifference:t}){try{let i=yield UE({id:n,privateKey:e,now:t&&Math.floor(Date.now()/1e3)+t});return{type:"app",token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(i){throw e==="-----BEGIN RSA PRIVATE KEY-----"?new Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):i}})}function v8(){return new Em({max:15e3,ttl:1e3*60*59})}function _8(n,e){return y(this,null,function*(){let t=IO(e),r=yield n.get(t);if(!r)return;let[i,s,o,a,c,l]=r.split("|"),d=e.permissions||c.split(/,/).reduce((h,p)=>(/!$/.test(p)?h[p.slice(0,-1)]="write":h[p]="read",h),{});return{token:i,createdAt:s,expiresAt:o,permissions:d,repositoryIds:e.repositoryIds,repositoryNames:e.repositoryNames,singleFileName:l,repositorySelection:a}})}function w8(n,e,t){return y(this,null,function*(){let r=IO(e),i=e.permissions?"":Object.keys(t.permissions).map(o=>`${o}${t.permissions[o]==="write"?"!":""}`).join(","),s=[t.token,t.createdAt,t.expiresAt,t.repositorySelection,i,t.singleFileName].join("|");yield n.set(r,s)})}function IO({installationId:n,permissions:e={},repositoryIds:t=[],repositoryNames:r=[]}){let i=Object.keys(e).sort().map(a=>e[a]==="read"?a:`${a}!`).join(","),s=t.sort().join(","),o=r.join(",");return[n,s,o,i].filter(Boolean).join("|")}function EO({installationId:n,token:e,createdAt:t,expiresAt:r,repositorySelection:i,permissions:s,repositoryIds:o,repositoryNames:a,singleFileName:c}){return Object.assign({type:"token",tokenType:"installation",token:e,installationId:n,permissions:s,createdAt:t,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,a?{repositoryNames:a}:null,c?{singleFileName:c}:null)}function TO(n,e,t){return y(this,null,function*(){let r=Number(e.installationId||n.installationId);if(!r)throw new Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(e.factory){let L=N(N({},n),e),{type:V,factory:$,oauthApp:W}=L,K=In(L,["type","factory","oauthApp"]);return $(K)}let i=Object.assign({installationId:r},e);if(!e.refresh){let V=yield _8(n.cache,i);if(V){let{token:$,createdAt:W,expiresAt:K,permissions:C,repositoryIds:w,repositoryNames:I,singleFileName:D,repositorySelection:S}=V;return EO({installationId:r,token:$,createdAt:W,expiresAt:K,permissions:C,repositorySelection:S,repositoryIds:w,repositoryNames:I,singleFileName:D})}}let s=yield Im(n),o=t||n.request,{data:{token:a,expires_at:c,repositories:l,permissions:d,repository_selection:h,single_file:p}}=yield o("POST /app/installations/{installation_id}/access_tokens",{installation_id:r,repository_ids:e.repositoryIds,repositories:e.repositoryNames,permissions:e.permissions,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${s.token}`}}),m=d||{},_=h||"all",b=l?l.map(V=>V.id):void 0,E=l?l.map(V=>V.name):void 0,k=new Date().toISOString();return yield w8(n.cache,i,{token:a,createdAt:k,expiresAt:c,repositorySelection:_,permissions:m,repositoryIds:b,repositoryNames:E,singleFileName:p}),EO({installationId:r,token:a,createdAt:k,expiresAt:c,repositorySelection:_,permissions:m,repositoryIds:b,repositoryNames:E,singleFileName:p})})}function b8(n,e){return y(this,null,function*(){switch(e.type){case"app":return Im(n);case"oauth-app":return n.oauthApp({type:"oauth-app"});case"installation":return TO(n,ne(N({},e),{type:"installation"}));case"oauth-user":return n.oauthApp(e);default:throw new Error(`Invalid auth type: ${e.type}`)}})}var E8=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/app/installation-requests","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"];function I8(n){let t=`^(?:${n.map(r=>r.split("/").map(i=>i.startsWith("{")?"(?:.+?)":i).join("/")).map(r=>`(?:${r})`).join("|")})$`;return new RegExp(t,"i")}var T8=I8(E8);function C8(n){return!!n&&T8.test(n.split("?")[0])}var D8=5*1e3;function S8(n){return!(n.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||n.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}function A8(n,e,t,r){return y(this,null,function*(){let i=e.endpoint.merge(t,r),s=i.url;if(/\/login\/oauth\/access_token$/.test(s))return e(i);if(C8(s.replace(e.endpoint.DEFAULTS.baseUrl,""))){let{token:c}=yield Im(n);i.headers.authorization=`bearer ${c}`;let l;try{l=yield e(i)}catch(d){if(S8(d)||typeof d.response.headers.date>"u")throw d;let h=Math.floor((Date.parse(d.response.headers.date)-Date.parse(new Date().toString()))/1e3);n.log.warn(d.message),n.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${h} seconds. Retrying request with the difference accounted for.`);let{token:p}=yield Im(ne(N({},n),{timeDifference:h}));return i.headers.authorization=`bearer ${p}`,e(i)}return l}if($d(s)){let c=yield n.oauthApp({type:"oauth-app"});return i.headers.authorization=c.headers.authorization,e(i)}let{token:o,createdAt:a}=yield TO(n,{},e.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,CO(n,e,i,a)})}function CO(n,e,t,r,i=0){return y(this,null,function*(){let s=+new Date-+new Date(r);try{return yield e(t)}catch(o){if(o.status!==401)throw o;if(s>=D8)throw i>0&&(o.message=`After ${i} retries within ${s/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let a=i*1e3;return n.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${a/1e3}s)`),yield new Promise(c=>setTimeout(c,a)),CO(n,e,t,r,i)}})}var x8="7.1.1";function qE(n){if(!n.appId)throw new Error("[@octokit/auth-app] appId option is required");if(!n.privateKey)throw new Error("[@octokit/auth-app] privateKey option is required");if("installationId"in n&&!n.installationId)throw new Error("[@octokit/auth-app] installationId is set to a falsy value");let e=Object.assign({warn:console.warn.bind(console)},n.log),t=n.request||Ge.defaults({headers:{"user-agent":`octokit-auth-app.js/${x8} ${cn()}`}}),r=Object.assign({request:t,cache:v8()},n,n.installationId?{installationId:Number(n.installationId)}:{},{log:e,oauthApp:lO({clientType:"github-app",clientId:n.clientId||"",clientSecret:n.clientSecret||"",request:t})});return Object.assign(b8.bind(null,r),{hook:A8.bind(null,r)})}var qt=(()=>{let e=class e{constructor(r){this._http=r,this.applicationId="1012063",this.privateKey=`-----BEGIN PRIVATE KEY-----
  MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCnxYEcKaEsyRx7
  8VicDgz+XwMOECEVLtMWwmfn0bdilPKLVTJRZF12Hz0BAckilc3nW7tTAikDpXyw
  efTnmt9DQhI6mAlpfIx8l7yNoucj1xxOzclZy6noOke9CSjhu8UhcrRd6XoYGvQH
  vKjttln1tv0EgyIREnAbHNPhK8b1SpHE/MzaJs9yCNU4lidwmHEl/hw+lzrUp+O2
  7Gi38WLJEaycChXtq94b6z5866cqgi0pPz+FTQNHlRg2rei2XGfb7pHxzQPkouS1
  Cg+3NZ15cPv9jsAk15HRMr/1fV8xk4JZ+V403zlCAl6gKaogfeZbC+3OTPNKvw4o
  HVHlcSYPAgMBAAECggEAGjDcCgB5t9shhjvUIHCVGLTObkiYUY1AyOHKhMcZgNtN
  zfCb7VbkvEb+KAUWWD7YqRCJ+thwfLA9+fLgB7QGvKI45ErN1VjrOZwahGX0/YRc
  V/UKROlleep3PoyKhEri6GjWvX5wYAj9JaQPHyUDgDdz4ltyWwXs2F60uQczhSFB
  NIeF55lyN3/cqBUHNQalrlD64LXwZLzviS8dpTIH1Qsp+S7TJgGM9NgeQ8yYiyzz
  tduux+gu6IxgL1aOgBiBonRFZdfAySws1mUhYvPWr1fzn64kaYsiDqXwCdmKmzxx
  +RbXGWvKX/wctN6454E1UlTPWVVOx4SHZ4Yf03ulWQKBgQDb4ZQqHb0chwFvHTIW
  pIc5DMmepQ2+/syxXumjrNMpi3sltmnGNu/n7DebuiyZOaFlHrDKLcC4WO/ILPe6
  O1A/LjgliTsHiQYmaB/XRj5iy6pGYra0esxFuhWZeYTJ00yBwpWGpAh91TvpxGcR
  PweOToPvq+nZi6tgVbMRu5gUkwKBgQDDVJ1yPYSAhnBDGkXU8XQp1jrKkzxwO7Zo
  UDAJ69LbTmC6rw7s4ZRT6KmS/7p3g7HXz1HQaEN7u1fzie5I8AZvhE21y42w9+z2
  r41rW+Q/IM+3102L6Okm9o91aLCIozyWgoBWXuXM67/oj4HlXgTZOVeiGZAcwN7o
  2PUjkrpyFQKBgEts4RdlZiawBQTpnfH4dE5UnaDm+4UmAG9joH+93B2nNBImtbgB
  xl/nPtgTkBLrmvqGAZ0I/s/96hrfmgbvK8LQhwARSAd4sHxiQXHmLaZUOM+2MvhM
  G2BbyecAsVVOPzNP3Vz3TdZkXA3/il93II9nTYjcjvZKG/qKy0ds82kzAoGBAIAo
  KTFGKYSGMGvmdgDT9upoM6Sr29CrbO+eBRbNUkgvcYmqx/klvEMdeP0Iqlg14N5+
  mOhLMFOjRH52dhAG48IRJUds6Wc+E4x6/Cd/YA8HQSIWsjtksmytAsz+xiywJVV/
  BCMnGlFMMFqupYRPHpFDbTre2M30wYw2pQgVAh1NAoGBANDbSx25LnRwUlgsA1Go
  c6YXlZ+ggQfjYfCjMjj26I/nLzxCQe3Ghw/dSI0IVQ6kjFWkNVllEaA7ESxMKAtq
  W+9Tc4e7MN5sqQoTIos0um2l+7BJaft/14WB1GxQiK2grgff8BtiQQuUORBl/F4g
  D2tNDflWM97viVfizU9grXkW
  -----END PRIVATE KEY-----`,this.installationId="Iv23li7aCJeV1yPt8rcr",this.accessToken=null,this.fetchOptions={},this.httpHeaders=new Nn({Accept:"application/json"}),this.ghUser={authenticated:!1,name:"",login:"",avatar_url:"/assets/github-logo.png",email:""},this.token={access_token:"",scope:"",token_type:""},this.octokit=new PE({authStrategy:qE,auth:{appId:this.applicationId,privateKey:this.privateKey}})}getInstallationId(r){return y(this,null,function*(){this.installationId="";try{let i=yield this.octokit.request("GET /repos/{owner}/my/installation",{owner:r,repo:"my"});return i.status==200?(this.installationId=i.data.id,this.octokit=new PE({authStrategy:qE,auth:{appId:this.applicationId,privateKey:this.privateKey,installationId:this.installationId}}),this.installationId):null}catch(i){console.debug("Error fetching InstallationId :",i)}return null})}getJwtToken(r,i=""){return y(this,null,function*(){let s=null;if(r)try{yield this.getInstallationId(r)}catch(o){console.debug("Error fetching InstallationId :",o)}if(this.installationId)try{let o=yield this.octokit.auth({type:"app"});o.token&&(this.fetchOptions={headers:{Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${o.token}`,"X-GitHub-Api-Version":"2022-11-28"}},s=o.token)}catch(o){throw console.error("Error fetching JWT:",o),o}return s})}getAccessToken(r){return y(this,null,function*(){if(this.accessToken=null,this.installationId)try{let i=yield fetch(`https://api.github.com/app/installations/${this.installationId}/access_tokens`,ne(N({},this.fetchOptions),{method:"POST"}));if(i.ok){let s=yield i.json();this.fetchOptions={headers:{"X-GitHub-Api-Version":"2022-11-28",Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${s.token}`}},this.accessToken=s.token}return this.accessToken}catch(i){throw console.error("Error fetching AccessToken:",i),i}return this.accessToken})}getInstalledContent(r,i="README.md"){return y(this,null,function*(){let s="Resource not Found";try{s=yield this.get(`repos/${r}/my/contents/${i}`)}catch(o){console.error("Error fetching repository:",o)}return s})}setToken(r){this.token=r}hasOrganisationMembership(r,i){return fetch("https://api.github.com/user/orgs",{headers:{Authorization:`Bearer ${i}`,Accept:"application/vnd.github.v3+json"}}).then(s=>s.json()).then(s=>!!s.some(a=>a.login===r)).catch(s=>(console.error("Error fetching user organizations:",s),!1))}getSavedToken(){return this.ghUser.authenticated?this.token.access_token:""}getSavedUser(){return this.ghUser}isAuthenticated(){return this.ghUser.authenticated}setUserAuthenticated(r){this.ghUser.authenticated=r}setEmail(r){this.ghUser.email=r}getEmail(){return this.ghUser.email}setName(r){this.ghUser.name=r}setUserId(r){this.ghUser.login=r}getUserId(){return this.ghUser.login}setAvatar(r){return this.ghUser.avatar_url=r}creatHttpHeaders(r){return this.httpHeaders.append("Authorization","Bearer "+r)}getAuthUrl(){return`${le.gh_auth_url}?client_id=${le.client_id}`}getInstalledAccessToken(){return this.accessToken}hasInstalledAccessToken(){return this.accessToken!=null}getToken(r){return le.production?this._http.get(`${le.host}/ghproxy.php?code=${r}`):this._http.get(`${le.host}/token/ghproxy.php?code=${r}`)}getUser(r){return this._http.get(`${le.gh_api_url}/user`,{headers:this.creatHttpHeaders(r)})}getInternalArticleContent(r,i=""){return r=i?`${i}/${r}`:r,this.getMdFileContent(le.gh_default_user_repo,r)}getReadMeContent(r){let i=`${le.gh_dr_url}/${r}/${le.gh_dr_folder}/README.md`;return le.js_deliver.enabled&&(i=`${le.js_deliver.url}/${r}/${le.js_deliver.version}/README.md`),fetch(i,this.fetchOptions).then(s=>s.ok?s.text():Promise.reject("Resource not found"))}getFileContent(r,i,s){return s=i?`${i}/${s}`:s,this.getMdFileContent(r,s)}getMdFileContent(r,i){i=i.replace(/^\/?/,"")+(i.endsWith(".md")?"":".md");let s=ke.getGhUserFilePath(r,i,this.accessToken!=null);return this.getLocalFileContent(s)}getLocalFileContent(r){return fetch(r,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("Resource not found"))}getGhDirectoryContents(r,i=!0,s=""){let o=`${le.gh_api_url}/repos/${r}/my/git/trees/main`;i||(o=`${le.gh_api_url}/repos/${r}/my/contents/${s}?ref=main`),o+=i?"?recursive=1":"";let a={root:"/",files:[],folders:[]};return fetch(o,this.fetchOptions).then(c=>c.ok?c.json():Promise.reject("Directory not found")).then(c=>{let l;if(c.tree?l=c.tree:l=c,l&&l.forEach(d=>{if(d.type==="tree"||d.type==="dir"){let h=d.path.split("/")[0];a.folders.includes(h)||a.folders.push(h)}else(d.type==="file"||d.type==="blob"&&d.path!=".DS_Store")&&a.files.push(d.path)}),s){let d=ke.getFilesInFolder(a,s);a.root=s,a.files=d}return Promise.resolve(a)}).catch(c=>Promise.reject("Folder not found"))}getFirstCertificate(r="certificates"){return this.getGhDirectoryContents(le.gh_default_user_repo,!1,r).then(i=>{let s=i;return s.files&&s.files.length==0?Promise.reject(""):Promise.resolve(`${le.gh_dr_url}/${le.gh_default_user_repo}/${le.gh_dr_folder}/${s.files[0]}`)})}get(r){return fetch(`${le.gh_api_url}/${r}`,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("Resource not found"))}};e.\u0275fac=function(i){return new(i||e)(q(vi))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var DO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=xe({type:e,selectors:[["app-webfront-jumbotron"]],decls:39,vars:0,consts:[[1,"masthead"],[1,"container","px-4","px-lg-5","d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","justify-content-center"],[1,"text-center"],[1,"mx-auto","my-0","text-uppercase"],[1,"text-white-50","mx-auto","mt-2","mb-5"],["href","#about",1,"btn","btn-primary"],["id","about",1,"about-section","text-center"],[1,"container","px-lg-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"text-white","mb-4"],[1,"text-white-50"],[1,"row","py-4","justify-content-center"],["id","contactForm","data-sb-form-api-token","API_TOKEN",1,"form-signup"],[1,"row","input-group-newsletter","justify-content-center"],[1,"col-6"],["id","emailAddress","type","email","placeholder","Enter email address...","aria-label","Enter email address...","data-sb-validations","required,email",1,"form-control"],[1,"col-auto"],["id","submitButton","type","Submit","onclick","sendMessage()",1,"btn","btn-primary"],["data-sb-feedback","emailAddress:required",1,"invalid-feedback","mt-2"],["data-sb-feedback","emailAddress:email",1,"invalid-feedback","mt-2"],["id","submitSuccessMessage",1,"d-none"],[1,"text-center","mb-3","mt-2","text-white"],[1,"fw-bolder"],["href",""],["id","submitErrorMessage",1,"d-none"],[1,"text-center","text-danger","mb-3","mt-2"]],template:function(i,s){i&1&&(x(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),U(5,"Own your own Homepage"),M(),x(6,"h2",5),U(7,"Want to Own a Public Homepage ?"),M(),x(8,"a",6),U(9,"Get Started"),M()()()()(),x(10,"section",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2",11),U(15,"Your PublicHome.Page is Your secret sauce!"),M(),x(16,"div",12),U(17," Boost your business or portfolio's visibility to millions with a strong public presence. It's easy to get started ! Contact us today and elevate your brand. "),M()()(),x(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16),se(22,"input",17),M(),x(23,"div",18)(24,"button",19),U(25,"Notify"),M()()(),x(26,"div",20),U(27,"An email is required."),M(),x(28,"div",21),U(29,"Email is not valid."),M(),x(30,"div",22)(31,"div",23)(32,"div",24),U(33,"Thank you for your interest!"),M(),se(34,"br")(35,"a",25),M()(),x(36,"div",26)(37,"div",27),U(38,"Error sending message!"),M()()()()()())},dependencies:[E1,m1,mb]});let n=e;return n})();var SO=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.homePageFile=Z.readme_home;let o=s.snapshot.url[0];o&&o.path=="questions"&&(this.homePageFile=Z.fab_questions_list2)}};e.\u0275fac=function(i){return new(i||e)(B(qt),B(_n),B(Fn))},e.\u0275cmp=xe({type:e,selectors:[["app-webfront-main"]],decls:5,vars:1,consts:[[1,"container"],["id","questions",1,"row","justify-content-center"],[1,""],[1,"container",3,"src"]],template:function(i,s){i&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),U(4,`
            `),M()()()()),i&2&&(j(3),Q("src",s.homePageFile))},dependencies:[tr]});let n=e;return n})();var AO=(()=>{let e=class e extends sr{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.metaService=o}userInitialised(){this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":Z.homeUser=Z.ghUser;break;case"UserDirectory":this.messaging.send({cmd:"PageFile",file:"HomeGHUser"});break;default:break}})}ngOnInit(){this.metaService.addTag({name:"keywords",content:"My Brand, Your brand, Your landing page, Resume Builder, Resume"}),this.metaService.addTag({name:"description",content:"Own your Own page ! Create your brand, Reach millions"})}ngOnDestroy(){}};e.\u0275fac=function(i){return new(i||e)(B(on),B(qt),B(Pn),B(PM))},e.\u0275cmp=xe({type:e,selectors:[["home"]],features:[pt],decls:2,vars:0,template:function(i,s){i&1&&se(0,"app-webfront-jumbotron")(1,"app-webfront-main")},dependencies:[DO,SO]});let n=e;return n})();var M8=n=>({"text-center":n});function N8(n,e){n&1&&(x(0,"div")(1,"h6",14)(2,"b"),U(3,"Setup my Channel"),M()(),se(4,"div",15)(5,"hr"),M())}function P8(n,e){if(n&1&&(x(0,"div")(1,"a",18),U(2,"Dab Me Up\xA0"),se(3,"i",19),M()()),n&2){let t=e.$implicit;j(),Rn("href",t.value,ft)}}function O8(n,e){if(n&1&&(x(0,"div")(1,"markdown",16),U(2,`
                    `),M(),fe(3,P8,4,1,"div",17),Dt(4,"keyvalue"),se(5,"hr"),M()),n&2){let t=de();j(),Q("data",t.creatorMessageForServiceOfferings),j(2),Q("ngForOf",Mn(4,2,t.subscriptionServices))}}function F8(n,e){n&1&&(x(0,"h6",20),U(1,"You have an active subscription to publish!"),M(),se(2,"img",21),x(3,"h6",14),U(4,"Contact us to learn more about automation hooks!"),M())}function L8(n,e){if(n&1&&(x(0,"h2"),U(1),M()),n&2){let t=de(2);j(),qe(t.contacts_title)}}function V8(n,e){if(n&1&&(x(0,"a",24),se(1,"i"),U(2),M()),n&2){let t=e.ngIf,r=de().$implicit,i=de(2);Rn("href",i.availableLinks.get(r.key),ft),j(),qp("fa-brands fa-",t[0],""),cs("color",t[1]),j(),mt(" ",i.availableTexts.get(r.key),"")}}function j8(n,e){if(n&1&&(x(0,"a",24),U(1),M()),n&2){let t=de().$implicit,r=de(2);Q("href",r.availableLinks.get(t.key),ft),j(),qe(r.availableLinks.get(t.key))}}function U8(n,e){if(n&1&&(x(0,"div"),fe(1,V8,3,7,"a",23)(2,j8,2,2,"ng-template",null,1,_o),M()),n&2){let t=e.$implicit,r=yo(3),i=de(2);j(),Q("ngIf",i.getIconForKeyWithColor(t.key))("ngIfElse",r)}}function $8(n,e){if(n&1&&(x(0,"div",7)(1,"div",6),se(2,"img",22),x(3,"h5"),U(4),M(),x(5,"p"),U(6),M(),fe(7,L8,2,1,"h2",8)(8,U8,4,2,"div",17),Dt(9,"keyvalue"),Dt(10,"slice"),M()()),n&2){let t=de();j(2),Rn("src",t.userData.avatar_url,ft),j(2),qe(t.userData.name||t.userData.login),j(2),qe(t.userData.bio),j(),Q("ngIf",t.contacts_title),j(),Q("ngForOf",nc(10,7,Mn(9,5,t.availableLinks),0,7))}}function B8(n,e){if(n&1){let t=Lt();x(0,"div")(1,"a",25),Se("click",function(){Ue(t);let i=de();return $e(i.signoutSession())}),U(2,"Signout"),M()()}}function q8(n,e){if(n&1&&(x(0,"a",26),se(1,"img",27),M()),n&2){let t=e.$implicit;j(),Rn("src",t,ft)}}var zE=(()=>{let e=class e extends sr{constructor(r,i,s,o,a){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.supabaseService=o,this.ngZone=a,this.badgesAvailable=[],this.contactPageContent="Loading..",this.contactsContent="",this.availableLinks=new Map,this.availableTexts=new Map,this.useUsersContent=!1,this.firstList=!0,this.firstHtml=!0,this.contacts_title="",this.userData={},this.certificateLink="",this.subscriptionServices=new Map,this.creatorMessageForServiceOfferings="",this.hasOncePaidAndValidSubscription=!1,this.iamtheowner=!1,this.userHasSubscriptionsFor=[],this.EXCEPTIONAL_USER="sandipsahoo2k2"}isOwnerLoggedIn(){return this.supabaseService.isLoggedIn()&&this.iamtheowner}isLoggedIn(){return this.supabaseService.isLoggedIn()}signinWithGitHub(){return y(this,null,function*(){let r=window.location.pathname,{data:i,error:s}=yield this.supabaseService.signInWithGitHub(r);s&&console.error("Login error:",s.message)})}signoutSession(){this.supabaseService.signoutSession(),this.iamtheowner=!1}updateSubscriptionId(r,i){return y(this,null,function*(){let s=this.supabaseService.getChannelSubscriptionId(this.userHasSubscriptionsFor,r);if(s&&s!=i){alert("You already have a subscription for this channel. Please cancel it before creating a new one.");return}if(s&&s==i){alert("You already have a subscription for this channel. Please check your PayPal account.");return}this.userHasSubscriptionsFor.push({channel:r,paypal:i});let{data:o,error:a}=yield this.supabaseService.updateUserData({homepage_subscriptions:this.userHasSubscriptionsFor});a?console.error("Update error:",a.message):console.debug("User data updated")})}getOnApproveHandler(){return(r,i)=>(this.updateSubscriptionId(Z.ghUserLoaded,r.subscriptionID),Promise.resolve())}loadPayPalScript(){return new Promise((r,i)=>{if(document.getElementById("paypal-sdk")){r();return}let s=document.createElement("script");s.id="paypal-sdk",s.src=`https://www.paypal.com/sdk/js?client-id=${le.paypal.clientId}&vault=true&intent=subscription&disable-funding=credit,card`,s.async=!0,s.onload=()=>{r()},s.onerror=o=>{console.error("SDK failed to load",o),i(new Error("SDK failed to load"))},document.body.appendChild(s)})}renderPayPalButton(){paypal.Buttons({style:{layout:"vertical",color:"gold",shape:"rect",label:"subscribe",height:35},createSubscription:function(r,i){return i.subscription.create({plan_id:le.paypal.planId})},onInit:function(r,i){console.debug("PayPal initialized")},onCancel:function(r){console.debug("PayPal cancelled")},onError:function(r){console.error("PayPal init error",r)},onApprove:this.getOnApproveHandler()}).render("#paypal-button-container")}userInitialised(){this.ngZone.runOutsideAngular(()=>{this.loadPayPalScript().then(()=>{}).catch(r=>{console.error("Error loading PayPal SDK:",r)})}),this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":this.titleService.setTitle(Z.ghUser.name),this.userData=Z.ghUser,this.githubService.getMdFileContent(Z.ghUserLoaded,this.routerFileUrl).then(o=>this.contactPageContent=o),this.supabaseSessionInit();break;case"UserDirectory":let s=ke.getFilesInFolder(Z.userContext.directory,"certificates/badges");for(let o of s){let a=ke.getGhUserFilePath(Z.ghUserLoaded,o,this.githubService.hasInstalledAccessToken());this.badgesAvailable.push(a),this.badgesAvailable.length==1&&(this.certificateLink=this.badgesAvailable[0])}break;default:break}})}hasValidPaypalSubscription(){this.hasOncePaidAndValidSubscription=!1;let r=this.supabaseService.getUserDataProperty("homepage_subscriptions");if(r&&r.length>0){let i=this.supabaseService.getChannelSubscriptionId(r,Z.ghUserLoaded);i!=""&&this.supabaseService.getSupabaseClient().functions.invoke("paypal-subscription",{body:{subscription_id:i}}).then(({data:s,error:o})=>o?(alert("Error checking your subscription, please check your paypal or retry later."),console.error("Error checking subscription:",o.message),!1):s.status=="ACTIVE"?(this.hasOncePaidAndValidSubscription=!0,!0):(alert("Your subscription is not active. Please check your PayPal account."),!1)).catch(s=>(alert("Error checking your subscription, please check your paypal or retry later."),console.error("Unexpected error invoking function:",s.message||s),!1))}}supabaseSessionInit(){return y(this,null,function*(){try{let r=yield this.supabaseService.getSession();if(r&&r.user){if(r.user.user_metadata){let i=r.user.user_metadata.preferred_username;Z.ghUserLoaded==le.gh_default_user_repo&&i==this.EXCEPTIONAL_USER?this.iamtheowner=!0:this.iamtheowner=i==Z.ghUserLoaded}this.userHasSubscriptionsFor=r.user.user_metadata.homepage_subscriptions||[],this.hasValidPaypalSubscription()}}catch{console.error("Error getting session")}})}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>{this.isLoggedIn()&&this.renderPayPalButton()})}ngOnInit(){return y(this,null,function*(){Z.contactLinksByKey.clear(),this.markdownService.renderer.html=r=>(this.useUsersContent=this.firstHtml?ke.getFirstLine(r)=="<!-- My Contacts -->":this.useUsersContent,this.firstHtml=!1,r),this.markdownService.renderer.blockquote=r=>(this.creatorMessageForServiceOfferings=r,""),this.markdownService.renderer.link=(r,i,s)=>(this.handleDabMeUp(r,s),st.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.list=(r,i,s)=>this.firstList||!this.useUsersContent?(this.firstList=!1,""):st.prototype.list.call(this.markdownService.renderer,r,i,s)})}handleDabMeUp(r,i){i=="DabMeUp"&&r.split(",").forEach(o=>{let[a,c]=o.split(":"),l=ke.getActionByService(a);l&&this.subscriptionServices.set(l,"https://paypal.me/")})}onMarkdownReady(){this.firstHtml,this.availableLinks=Z.contactLinksByKey,this.availableTexts=Z.contactTextsByKey,this.messaging.send({cmd:"PageFile",file:"Contacts"})}getIconForKeyWithColor(r){return ke.getIconForKeyWithColor(r)}hasBrandLink(r){let i=Z.contactHostNameByKeys.get(r);return i?Z.iconsColorByBrandKey.has(i):!1}};e.\u0275fac=function(i){return new(i||e)(B(on),B(qt),B(Pn),B(Dc),B(Ie))},e.\u0275cmp=xe({type:e,selectors:[["app-contact"]],features:[pt],decls:16,vars:10,consts:[["isAOwner",""],["nonbrandLink",""],[1,"container"],[1,"row","justify-content-center",3,"ngClass"],[1,"col-lg-8"],[1,"container",3,"ready","data"],[1,"col-lg-6"],[1,"row","justify-content-center"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","row justify-content-center",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-center"],["href","/certificates",4,"ngFor","ngForOf"],[1,"text-center"],["id","paypal-button-container",1,"my-3"],[3,"data"],[4,"ngFor","ngForOf"],[1,"btn","btn-warning","my-2",2,"width","100%",3,"href"],[1,"fa-solid","fa-handshake-angle","fa-beat","fa-xl",2,"color","#B197FC"],[1,"text-center","text-info"],["src","/assets/img/g-play.png","alt","Download android app to publish content",1,""],["alt","Passport Pic",1,"col-4","rounded-circle","light-bordered-img",3,"src"],["class","btn btn-outline-secondary my-2","style","width:100%","target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",1,"btn","btn-outline-secondary","my-2",2,"width","100%",3,"href"],[1,"btn","btn-warning","my-3",3,"click"],["href","/certificates"],["alt","Thumbnail Image",3,"src"]],template:function(i,s){if(i&1){let o=Lt();x(0,"div",2)(1,"div",3)(2,"div",4)(3,"markdown",5),Se("ready",function(){return Ue(o),$e(s.onMarkdownReady())}),U(4,`
            `),M()(),x(5,"div",6)(6,"div",7),fe(7,N8,6,0,"div",8)(8,O8,6,4,"div",9)(9,F8,5,0,"ng-template",null,0,_o),M()(),fe(11,$8,11,11,"div",10),x(12,"div",11),fe(13,B8,3,0,"div",8),x(14,"div",12),fe(15,q8,2,1,"a",13),M()()()()}if(i&2){let o=yo(10);j(),Q("ngClass",Gp(8,M8,!s.useUsersContent)),j(2),Q("data",s.contactPageContent),j(4),Q("ngIf",s.isOwnerLoggedIn()),j(),Q("ngIf",!s.iamtheowner)("ngIfElse",o),j(3),Q("ngIf",!s.useUsersContent),j(2),Q("ngIf",s.isLoggedIn()),j(2),Q("ngForOf",s.badgesAvailable)}},dependencies:[sc,sn,$t,tr,oc,hs],styles:[".hover-warning[_ngcontent-%COMP%]:hover{color:#000!important;background-color:#ffc107!important;border-color:#ffc107!important}.btn-outline-warnig-deep[_ngcontent-%COMP%]{color:#d4a300;border-color:#d4a300}.light-bordered-img[_ngcontent-%COMP%]{border:2px solid #f0f0f0;padding:2px;box-shadow:0 0 2px #0000000d}"]});let n=e;return n})();function z8(n,e){if(n&1&&(x(0,"a",9),se(1,"i"),M()),n&2){let t=e.ngIf,r=de().$implicit,i=de();Q("href",i.availableLinks.get(r.key),ft),j(),qp("fa-brands fa-",t[0],""),cs("color",t[1])}}function H8(n,e){if(n&1&&(x(0,"a",9),se(1,"i",10),M()),n&2){let t=de().$implicit,r=de();Q("href",r.availableLinks.get(t.key),ft)}}function G8(n,e){if(n&1&&(x(0,"li"),fe(1,z8,2,6,"a",8)(2,H8,2,1,"ng-template",null,0,_o),M()),n&2){let t=e.$implicit,r=yo(3),i=de();j(),Q("ngIf",i.hasBrandLink(t.key)&&i.getIconForKeyWithColor(t.key))("ngIfElse",r)}}var xO=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.messaging=i,this.route=s,this.footerNote="Copyright",this.contactsFileUrl=Z.user_contacts,this.availableLinks=new Map,this.iconsByKey=Z.iconsColorByBrandKey,this.oldRender={}}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"UserDirectory":this.footerNote="Powered By",this.loadContacts(Z.userContext.username);break;case"PageFile":switch(i.file){case"HomeGHUser":this.footerNote="Copyright";break;case"Contacts":this.availableLinks=Z.contactLinksByKey;break;default:break}break;default:break}}),this.loadContacts(le.gh_default_user_repo)}loadContacts(r){this.githubService.getMdFileContent(r,"contacts.md").then(i=>{Z.contactLinksByKey.clear(),this.parseMarkdownWithCustomRenderer(i)}).catch(i=>{console.log("Contacts not available")}).finally(()=>{this.availableLinks=Z.contactLinksByKey})}parseMarkdownWithCustomRenderer(r){let i=new st;return i.link=(s,o,a)=>(this.collectContactsLinks(s,o,a),st.prototype.link.call(i,s,o,a)),Ne(r,{renderer:i})}collectContactsLinks(r,i,s){Z.contactLinksByKey.set(s,r);try{if(r){let o=new URL(r),a=o.hostname;if(a.length>0){let c=ke.closestHost(a);Z.contactHostNameByKeys.set(s,c),Z.iconsColorByBrandKey.has(c)?Z.contactTextsByKey.set(s,this.getHostText(c)):Z.contactTextsByKey.set(s,s!=r?ke.unescape(s):this.getHostText(c))}else if(o.protocol=="mailto:"||o.protocol=="tel:"){let c=ke.unescape(s);Z.contactTextsByKey.set(s,ke.unescape(s)),Z.contactHostNameByKeys.set(s,c)}else Z.contactLinksByKey.delete(s)}}catch{Z.contactLinksByKey.delete(s)}}hasBrandLink(r){let i=Z.contactHostNameByKeys.get(r);return i?Z.iconsColorByBrandKey.has(i):!1}getIconForKeyWithColor(r){return ke.getIconForKeyWithColor(r)}getHostText(r){return ke.getHostText(r)}ngAfterViewInit(){}};e.\u0275fac=function(i){return new(i||e)(B(qt),B(an),B(Fn))},e.\u0275cmp=xe({type:e,selectors:[["app-footer"]],decls:12,vars:8,consts:[["nonbrandLink",""],["id","contact",1,"text-center"],[1,"container"],[1,"socials-media","text-center"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"credits"],["href","/"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"fa-solid","fa-link"]],template:function(i,s){i&1&&(x(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4),fe(4,G8,4,2,"li",5),Dt(5,"keyvalue"),Dt(6,"slice"),M()(),x(7,"div",6),U(8),x(9,"a",7),U(10,"www.publichome.page"),M(),U(11," All rights reserved. "),M()()()),i&2&&(j(4),Q("ngForOf",nc(6,4,Mn(5,2,s.availableLinks),0,7)),j(4),mt(" ",s.footerNote," \xA9 "))},dependencies:[sn,$t,oc,hs],styles:['#contact[_ngcontent-%COMP%]{background:#f7f7f7;padding-top:25px;padding-bottom:25px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]{width:100%}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;float:none;margin:0}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-right:10px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:24px;color:#999;letter-spacing:.1em;font-weight:500;background:transparent;text-transform:uppercase;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8a07e;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.1em;font-weight:500;margin-top:0;text-transform:uppercase}.credits[_ngcontent-%COMP%]{font-size:13px}pre.code[_ngcontent-%COMP%]{white-space:pre-wrap}pre.code[_ngcontent-%COMP%]:before{counter-reset:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";width:8em;padding-left:auto;margin-left:auto;text-align:right}']});let n=e;return n})();var kO=(()=>{let e=class e{constructor(){this.WIT_URL="https://api.wit.ai/message?v=20211010&q=",this.WIT_TOKEN="GLM547LWVQYPHR6QWS5ADO3YYTB6ZRI3"}getIntent(r){return y(this,null,function*(){return fetch(`https://api.wit.ai/message?v=20211010&q=${encodeURIComponent(r.substring(0,250))}`,{headers:{Authorization:`Bearer ${this.WIT_TOKEN}`}}).then(i=>i.ok?i.json():Promise.reject(i.statusText))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Qt=[];for(Tm=0;Tm<256;++Tm)Qt.push((Tm+256).toString(16).slice(1));var Tm;function RO(n,e=0){return(Qt[n[e+0]]+Qt[n[e+1]]+Qt[n[e+2]]+Qt[n[e+3]]+"-"+Qt[n[e+4]]+Qt[n[e+5]]+"-"+Qt[n[e+6]]+Qt[n[e+7]]+"-"+Qt[n[e+8]]+Qt[n[e+9]]+"-"+Qt[n[e+10]]+Qt[n[e+11]]+Qt[n[e+12]]+Qt[n[e+13]]+Qt[n[e+14]]+Qt[n[e+15]]).toLowerCase()}var Cm,K8=new Uint8Array(16);function HE(){if(!Cm&&(Cm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Cm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Cm(K8)}var Q8=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),GE={randomUUID:Q8};function Y8(n,e,t){if(GE.randomUUID&&!e&&!n)return GE.randomUUID();n=n||{};var r=n.random||(n.rng||HE)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return RO(r)}var WE=Y8;var MO=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},NO={};var Is,KE;(function(){var n;function e(C,w){function I(){}I.prototype=w.prototype,C.D=w.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(D,S,R){for(var T=Array(arguments.length-2),Jr=2;Jr<arguments.length;Jr++)T[Jr-2]=arguments[Jr];return w.prototype[S].apply(D,T)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,w,I){I||(I=0);var D=Array(16);if(typeof w=="string")for(var S=0;16>S;++S)D[S]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(S=0;16>S;++S)D[S]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=C.g[0],I=C.g[1],S=C.g[2];var R=C.g[3],T=w+(R^I&(S^R))+D[0]+3614090360&4294967295;w=I+(T<<7&4294967295|T>>>25),T=R+(S^w&(I^S))+D[1]+3905402710&4294967295,R=w+(T<<12&4294967295|T>>>20),T=S+(I^R&(w^I))+D[2]+606105819&4294967295,S=R+(T<<17&4294967295|T>>>15),T=I+(w^S&(R^w))+D[3]+3250441966&4294967295,I=S+(T<<22&4294967295|T>>>10),T=w+(R^I&(S^R))+D[4]+4118548399&4294967295,w=I+(T<<7&4294967295|T>>>25),T=R+(S^w&(I^S))+D[5]+1200080426&4294967295,R=w+(T<<12&4294967295|T>>>20),T=S+(I^R&(w^I))+D[6]+2821735955&4294967295,S=R+(T<<17&4294967295|T>>>15),T=I+(w^S&(R^w))+D[7]+4249261313&4294967295,I=S+(T<<22&4294967295|T>>>10),T=w+(R^I&(S^R))+D[8]+1770035416&4294967295,w=I+(T<<7&4294967295|T>>>25),T=R+(S^w&(I^S))+D[9]+2336552879&4294967295,R=w+(T<<12&4294967295|T>>>20),T=S+(I^R&(w^I))+D[10]+4294925233&4294967295,S=R+(T<<17&4294967295|T>>>15),T=I+(w^S&(R^w))+D[11]+2304563134&4294967295,I=S+(T<<22&4294967295|T>>>10),T=w+(R^I&(S^R))+D[12]+1804603682&4294967295,w=I+(T<<7&4294967295|T>>>25),T=R+(S^w&(I^S))+D[13]+4254626195&4294967295,R=w+(T<<12&4294967295|T>>>20),T=S+(I^R&(w^I))+D[14]+2792965006&4294967295,S=R+(T<<17&4294967295|T>>>15),T=I+(w^S&(R^w))+D[15]+1236535329&4294967295,I=S+(T<<22&4294967295|T>>>10),T=w+(S^R&(I^S))+D[1]+4129170786&4294967295,w=I+(T<<5&4294967295|T>>>27),T=R+(I^S&(w^I))+D[6]+3225465664&4294967295,R=w+(T<<9&4294967295|T>>>23),T=S+(w^I&(R^w))+D[11]+643717713&4294967295,S=R+(T<<14&4294967295|T>>>18),T=I+(R^w&(S^R))+D[0]+3921069994&4294967295,I=S+(T<<20&4294967295|T>>>12),T=w+(S^R&(I^S))+D[5]+3593408605&4294967295,w=I+(T<<5&4294967295|T>>>27),T=R+(I^S&(w^I))+D[10]+38016083&4294967295,R=w+(T<<9&4294967295|T>>>23),T=S+(w^I&(R^w))+D[15]+3634488961&4294967295,S=R+(T<<14&4294967295|T>>>18),T=I+(R^w&(S^R))+D[4]+3889429448&4294967295,I=S+(T<<20&4294967295|T>>>12),T=w+(S^R&(I^S))+D[9]+568446438&4294967295,w=I+(T<<5&4294967295|T>>>27),T=R+(I^S&(w^I))+D[14]+3275163606&4294967295,R=w+(T<<9&4294967295|T>>>23),T=S+(w^I&(R^w))+D[3]+4107603335&4294967295,S=R+(T<<14&4294967295|T>>>18),T=I+(R^w&(S^R))+D[8]+1163531501&4294967295,I=S+(T<<20&4294967295|T>>>12),T=w+(S^R&(I^S))+D[13]+2850285829&4294967295,w=I+(T<<5&4294967295|T>>>27),T=R+(I^S&(w^I))+D[2]+4243563512&4294967295,R=w+(T<<9&4294967295|T>>>23),T=S+(w^I&(R^w))+D[7]+1735328473&4294967295,S=R+(T<<14&4294967295|T>>>18),T=I+(R^w&(S^R))+D[12]+2368359562&4294967295,I=S+(T<<20&4294967295|T>>>12),T=w+(I^S^R)+D[5]+4294588738&4294967295,w=I+(T<<4&4294967295|T>>>28),T=R+(w^I^S)+D[8]+2272392833&4294967295,R=w+(T<<11&4294967295|T>>>21),T=S+(R^w^I)+D[11]+1839030562&4294967295,S=R+(T<<16&4294967295|T>>>16),T=I+(S^R^w)+D[14]+4259657740&4294967295,I=S+(T<<23&4294967295|T>>>9),T=w+(I^S^R)+D[1]+2763975236&4294967295,w=I+(T<<4&4294967295|T>>>28),T=R+(w^I^S)+D[4]+1272893353&4294967295,R=w+(T<<11&4294967295|T>>>21),T=S+(R^w^I)+D[7]+4139469664&4294967295,S=R+(T<<16&4294967295|T>>>16),T=I+(S^R^w)+D[10]+3200236656&4294967295,I=S+(T<<23&4294967295|T>>>9),T=w+(I^S^R)+D[13]+681279174&4294967295,w=I+(T<<4&4294967295|T>>>28),T=R+(w^I^S)+D[0]+3936430074&4294967295,R=w+(T<<11&4294967295|T>>>21),T=S+(R^w^I)+D[3]+3572445317&4294967295,S=R+(T<<16&4294967295|T>>>16),T=I+(S^R^w)+D[6]+76029189&4294967295,I=S+(T<<23&4294967295|T>>>9),T=w+(I^S^R)+D[9]+3654602809&4294967295,w=I+(T<<4&4294967295|T>>>28),T=R+(w^I^S)+D[12]+3873151461&4294967295,R=w+(T<<11&4294967295|T>>>21),T=S+(R^w^I)+D[15]+530742520&4294967295,S=R+(T<<16&4294967295|T>>>16),T=I+(S^R^w)+D[2]+3299628645&4294967295,I=S+(T<<23&4294967295|T>>>9),T=w+(S^(I|~R))+D[0]+4096336452&4294967295,w=I+(T<<6&4294967295|T>>>26),T=R+(I^(w|~S))+D[7]+1126891415&4294967295,R=w+(T<<10&4294967295|T>>>22),T=S+(w^(R|~I))+D[14]+2878612391&4294967295,S=R+(T<<15&4294967295|T>>>17),T=I+(R^(S|~w))+D[5]+4237533241&4294967295,I=S+(T<<21&4294967295|T>>>11),T=w+(S^(I|~R))+D[12]+1700485571&4294967295,w=I+(T<<6&4294967295|T>>>26),T=R+(I^(w|~S))+D[3]+2399980690&4294967295,R=w+(T<<10&4294967295|T>>>22),T=S+(w^(R|~I))+D[10]+4293915773&4294967295,S=R+(T<<15&4294967295|T>>>17),T=I+(R^(S|~w))+D[1]+2240044497&4294967295,I=S+(T<<21&4294967295|T>>>11),T=w+(S^(I|~R))+D[8]+1873313359&4294967295,w=I+(T<<6&4294967295|T>>>26),T=R+(I^(w|~S))+D[15]+4264355552&4294967295,R=w+(T<<10&4294967295|T>>>22),T=S+(w^(R|~I))+D[6]+2734768916&4294967295,S=R+(T<<15&4294967295|T>>>17),T=I+(R^(S|~w))+D[13]+1309151649&4294967295,I=S+(T<<21&4294967295|T>>>11),T=w+(S^(I|~R))+D[4]+4149444226&4294967295,w=I+(T<<6&4294967295|T>>>26),T=R+(I^(w|~S))+D[11]+3174756917&4294967295,R=w+(T<<10&4294967295|T>>>22),T=S+(w^(R|~I))+D[2]+718787259&4294967295,S=R+(T<<15&4294967295|T>>>17),T=I+(R^(S|~w))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+w&4294967295,C.g[1]=C.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,C.g[2]=C.g[2]+S&4294967295,C.g[3]=C.g[3]+R&4294967295}r.prototype.u=function(C,w){w===void 0&&(w=C.length);for(var I=w-this.blockSize,D=this.B,S=this.h,R=0;R<w;){if(S==0)for(;R<=I;)i(this,C,R),R+=this.blockSize;if(typeof C=="string"){for(;R<w;)if(D[S++]=C.charCodeAt(R++),S==this.blockSize){i(this,D),S=0;break}}else for(;R<w;)if(D[S++]=C[R++],S==this.blockSize){i(this,D),S=0;break}}this.h=S,this.o+=w},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var w=1;w<C.length-8;++w)C[w]=0;var I=8*this.o;for(w=C.length-8;w<C.length;++w)C[w]=I&255,I/=256;for(this.u(C),C=Array(16),w=I=0;4>w;++w)for(var D=0;32>D;D+=8)C[I++]=this.g[w]>>>D&255;return C};function s(C,w){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=w(C)}function o(C,w){this.h=w;for(var I=[],D=!0,S=C.length-1;0<=S;S--){var R=C[S]|0;D&&R==w||(I[S]=R,D=!1)}this.g=I}var a={};function c(C){return-128<=C&&128>C?s(C,function(w){return new o([w|0],0>w?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return h;if(0>C)return E(l(-C));for(var w=[],I=1,D=0;C>=I;D++)w[D]=C/I|0,I*=4294967296;return new o(w,0)}function d(C,w){if(C.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(C.charAt(0)=="-")return E(d(C.substring(1),w));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(w,8)),D=h,S=0;S<C.length;S+=8){var R=Math.min(8,C.length-S),T=parseInt(C.substring(S,S+R),w);8>R?(R=l(Math.pow(w,R)),D=D.j(R).add(l(T))):(D=D.j(I),D=D.add(l(T)))}return D}var h=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(b(this))return-E(this).m();for(var C=0,w=1,I=0;I<this.g.length;I++){var D=this.i(I);C+=(0<=D?D:4294967296+D)*w,w*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(_(this))return"0";if(b(this))return"-"+E(this).toString(C);for(var w=l(Math.pow(C,6)),I=this,D="";;){var S=$(I,w).g;I=k(I,S.j(w));var R=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=S,_(I))return R+D;for(;6>R.length;)R="0"+R;D=R+D}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function _(C){if(C.h!=0)return!1;for(var w=0;w<C.g.length;w++)if(C.g[w]!=0)return!1;return!0}function b(C){return C.h==-1}n.l=function(C){return C=k(this,C),b(C)?-1:_(C)?0:1};function E(C){for(var w=C.g.length,I=[],D=0;D<w;D++)I[D]=~C.g[D];return new o(I,~C.h).add(p)}n.abs=function(){return b(this)?E(this):this},n.add=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],D=0,S=0;S<=w;S++){var R=D+(this.i(S)&65535)+(C.i(S)&65535),T=(R>>>16)+(this.i(S)>>>16)+(C.i(S)>>>16);D=T>>>16,R&=65535,T&=65535,I[S]=T<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function k(C,w){return C.add(E(w))}n.j=function(C){if(_(this)||_(C))return h;if(b(this))return b(C)?E(this).j(E(C)):E(E(this).j(C));if(b(C))return E(this.j(E(C)));if(0>this.l(m)&&0>C.l(m))return l(this.m()*C.m());for(var w=this.g.length+C.g.length,I=[],D=0;D<2*w;D++)I[D]=0;for(D=0;D<this.g.length;D++)for(var S=0;S<C.g.length;S++){var R=this.i(D)>>>16,T=this.i(D)&65535,Jr=C.i(S)>>>16,kl=C.i(S)&65535;I[2*D+2*S]+=T*kl,L(I,2*D+2*S),I[2*D+2*S+1]+=R*kl,L(I,2*D+2*S+1),I[2*D+2*S+1]+=T*Jr,L(I,2*D+2*S+1),I[2*D+2*S+2]+=R*Jr,L(I,2*D+2*S+2)}for(D=0;D<w;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=w;D<2*w;D++)I[D]=0;return new o(I,0)};function L(C,w){for(;(C[w]&65535)!=C[w];)C[w+1]+=C[w]>>>16,C[w]&=65535,w++}function V(C,w){this.g=C,this.h=w}function $(C,w){if(_(w))throw Error("division by zero");if(_(C))return new V(h,h);if(b(C))return w=$(E(C),w),new V(E(w.g),E(w.h));if(b(w))return w=$(C,E(w)),new V(E(w.g),w.h);if(30<C.g.length){if(b(C)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var I=p,D=w;0>=D.l(C);)I=W(I),D=W(D);var S=K(I,1),R=K(D,1);for(D=K(D,2),I=K(I,2);!_(D);){var T=R.add(D);0>=T.l(C)&&(S=S.add(I),R=T),D=K(D,1),I=K(I,1)}return w=k(C,S.j(w)),new V(S,w)}for(S=h;0<=C.l(w);){for(I=Math.max(1,Math.floor(C.m()/w.m())),D=Math.ceil(Math.log(I)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),R=l(I),T=R.j(w);b(T)||0<T.l(C);)I-=D,R=l(I),T=R.j(w);_(R)&&(R=p),S=S.add(R),C=k(C,T)}return new V(S,C)}n.A=function(C){return $(this,C).h},n.and=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],D=0;D<w;D++)I[D]=this.i(D)&C.i(D);return new o(I,this.h&C.h)},n.or=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],D=0;D<w;D++)I[D]=this.i(D)|C.i(D);return new o(I,this.h|C.h)},n.xor=function(C){for(var w=Math.max(this.g.length,C.g.length),I=[],D=0;D<w;D++)I[D]=this.i(D)^C.i(D);return new o(I,this.h^C.h)};function W(C){for(var w=C.g.length+1,I=[],D=0;D<w;D++)I[D]=C.i(D)<<1|C.i(D-1)>>>31;return new o(I,C.h)}function K(C,w){var I=w>>5;w%=32;for(var D=C.g.length-I,S=[],R=0;R<D;R++)S[R]=0<w?C.i(R+I)>>>w|C.i(R+I+1)<<32-w:C.i(R+I);return new o(S,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KE=NO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Is=NO.Integer=o}).apply(typeof MO<"u"?MO:typeof self<"u"?self:typeof window<"u"?window:{});var Dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xi={};var QE,Z8,Bc,YE,Bd,Sm,ZE,JE,XE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dm=="object"&&Dm];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var A=u[v];if(!(A in g))break e;g=g[A]}u=u[u.length-1],v=g[u],f=f(v),f!=v&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,v=!1,A={next:function(){if(!v&&g<u.length){var O=g++;return{value:f(O,u[O]),done:!1}}return v=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,g){return u.call.apply(u.bind,arguments)}function h(u,f,g){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,v),u.apply(f,A)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function _(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(v,A,O){for(var X=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)X[Qe-2]=arguments[Qe];return f.prototype[A].apply(v,X)}}function b(u){let f=u.length;if(0<f){let g=Array(f);for(let v=0;v<f;v++)g[v]=u[v];return g}return[]}function E(u,f){for(let g=1;g<arguments.length;g++){let v=arguments[g];if(c(v)){let A=u.length||0,O=v.length||0;u.length=A+O;for(let X=0;X<O;X++)u[A+X]=v[X]}else u.push(v)}}class k{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function L(u){return/^[\s\xa0]*$/.test(u)}function V(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function $(u){return $[" "](u),u}$[" "]=function(){};var W=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function K(u,f,g){for(let v in u)f.call(g,u[v],v,u)}function C(u,f){for(let g in u)f.call(void 0,u[g],g,u)}function w(u){let f={};for(let g in u)f[g]=u[g];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(u,f){let g,v;for(let A=1;A<arguments.length;A++){v=arguments[A];for(g in v)u[g]=v[g];for(let O=0;O<I.length;O++)g=I[O],Object.prototype.hasOwnProperty.call(v,g)&&(u[g]=v[g])}}function S(u){var f=1;u=u.split(":");let g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function R(u){a.setTimeout(()=>{throw u},0)}function T(){var u=sv;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Jr{constructor(){this.h=this.g=null}add(f,g){let v=kl.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var kl=new k(()=>new Lj,u=>u.reset());class Lj{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Rl,Ml=!1,sv=new Jr,_D=()=>{let u=a.Promise.resolve(void 0);Rl=()=>{u.then(Vj)}};var Vj=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(g){R(g)}var f=kl;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Ml=!1};function ji(){this.s=this.s,this.C=this.C}ji.prototype.s=!1,ji.prototype.ma=function(){this.s||(this.s=!0,this.N())},ji.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Jt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var jj=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Nl(u,f){if(Jt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(W){e:{try{$(f.nodeName);var A=!0;break e}catch{}A=!1}A||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Uj[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Nl.aa.h.call(this)}}_(Nl,Jt);var Uj={2:"touch",3:"pen",4:"mouse"};Nl.prototype.h=function(){Nl.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Pl="closure_listenable_"+(1e6*Math.random()|0),$j=0;function Bj(u,f,g,v,A){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=A,this.key=++$j,this.da=this.fa=!1}function Mh(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Nh(u){this.src=u,this.g={},this.h=0}Nh.prototype.add=function(u,f,g,v,A){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var X=av(u,f,v,A);return-1<X?(f=u[X],g||(f.fa=!1)):(f=new Bj(f,this.src,O,!!v,A),f.fa=g,u.push(f)),f};function ov(u,f){var g=f.type;if(g in u.g){var v=u.g[g],A=Array.prototype.indexOf.call(v,f,void 0),O;(O=0<=A)&&Array.prototype.splice.call(v,A,1),O&&(Mh(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function av(u,f,g,v){for(var A=0;A<u.length;++A){var O=u[A];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==v)return A}return-1}var cv="closure_lm_"+(1e6*Math.random()|0),lv={};function wD(u,f,g,v,A){if(v&&v.once)return ED(u,f,g,v,A);if(Array.isArray(f)){for(var O=0;O<f.length;O++)wD(u,f[O],g,v,A);return null}return g=fv(g),u&&u[Pl]?u.K(f,g,l(v)?!!v.capture:!!v,A):bD(u,f,g,!1,v,A)}function bD(u,f,g,v,A,O){if(!f)throw Error("Invalid event type");var X=l(A)?!!A.capture:!!A,Qe=dv(u);if(Qe||(u[cv]=Qe=new Nh(u)),g=Qe.add(f,g,v,X,O),g.proxy)return g;if(v=qj(),g.proxy=v,v.src=u,v.listener=g,u.addEventListener)jj||(A=X),A===void 0&&(A=!1),u.addEventListener(f.toString(),v,A);else if(u.attachEvent)u.attachEvent(TD(f.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function qj(){function u(g){return f.call(u.src,u.listener,g)}let f=zj;return u}function ED(u,f,g,v,A){if(Array.isArray(f)){for(var O=0;O<f.length;O++)ED(u,f[O],g,v,A);return null}return g=fv(g),u&&u[Pl]?u.L(f,g,l(v)?!!v.capture:!!v,A):bD(u,f,g,!0,v,A)}function ID(u,f,g,v,A){if(Array.isArray(f))for(var O=0;O<f.length;O++)ID(u,f[O],g,v,A);else v=l(v)?!!v.capture:!!v,g=fv(g),u&&u[Pl]?(u=u.i,f=String(f).toString(),f in u.g&&(O=u.g[f],g=av(O,g,v,A),-1<g&&(Mh(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete u.g[f],u.h--)))):u&&(u=dv(u))&&(f=u.g[f.toString()],u=-1,f&&(u=av(f,g,v,A)),(g=-1<u?f[u]:null)&&uv(g))}function uv(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Pl])ov(f.i,u);else{var g=u.type,v=u.proxy;f.removeEventListener?f.removeEventListener(g,v,u.capture):f.detachEvent?f.detachEvent(TD(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=dv(f))?(ov(g,u),g.h==0&&(g.src=null,f[cv]=null)):Mh(u)}}}function TD(u){return u in lv?lv[u]:lv[u]="on"+u}function zj(u,f){if(u.da)u=!0;else{f=new Nl(f,this);var g=u.listener,v=u.ha||u.src;u.fa&&uv(u),u=g.call(v,f)}return u}function dv(u){return u=u[cv],u instanceof Nh?u:null}var hv="__closure_events_fn_"+(1e9*Math.random()>>>0);function fv(u){return typeof u=="function"?u:(u[hv]||(u[hv]=function(f){return u.handleEvent(f)}),u[hv])}function Xt(){ji.call(this),this.i=new Nh(this),this.M=this,this.F=null}_(Xt,ji),Xt.prototype[Pl]=!0,Xt.prototype.removeEventListener=function(u,f,g,v){ID(this,u,f,g,v)};function dn(u,f){var g,v=u.F;if(v)for(g=[];v;v=v.F)g.push(v);if(u=u.M,v=f.type||f,typeof f=="string")f=new Jt(f,u);else if(f instanceof Jt)f.target=f.target||u;else{var A=f;f=new Jt(v,u),D(f,A)}if(A=!0,g)for(var O=g.length-1;0<=O;O--){var X=f.g=g[O];A=Ph(X,v,!0,f)&&A}if(X=f.g=u,A=Ph(X,v,!0,f)&&A,A=Ph(X,v,!1,f)&&A,g)for(O=0;O<g.length;O++)X=f.g=g[O],A=Ph(X,v,!1,f)&&A}Xt.prototype.N=function(){if(Xt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],v=0;v<g.length;v++)Mh(g[v]);delete u.g[f],u.h--}}this.F=null},Xt.prototype.K=function(u,f,g,v){return this.i.add(String(u),f,!1,g,v)},Xt.prototype.L=function(u,f,g,v){return this.i.add(String(u),f,!0,g,v)};function Ph(u,f,g,v){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var A=!0,O=0;O<f.length;++O){var X=f[O];if(X&&!X.da&&X.capture==g){var Qe=X.listener,zt=X.ha||X.src;X.fa&&ov(u.i,X),A=Qe.call(zt,v)!==!1&&A}}return A&&!v.defaultPrevented}function CD(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function DD(u){u.g=CD(()=>{u.g=null,u.i&&(u.i=!1,DD(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class Hj extends ji{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:DD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ol(u){ji.call(this),this.h=u,this.g={}}_(Ol,ji);var SD=[];function AD(u){K(u.g,function(f,g){this.g.hasOwnProperty(g)&&uv(f)},u),u.g={}}Ol.prototype.N=function(){Ol.aa.N.call(this),AD(this)},Ol.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pv=a.JSON.stringify,Gj=a.JSON.parse,Wj=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function gv(){}gv.prototype.h=null;function xD(u){return u.h||(u.h=u.i())}function kD(){}var Fl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mv(){Jt.call(this,"d")}_(mv,Jt);function yv(){Jt.call(this,"c")}_(yv,Jt);var zs={},RD=null;function Oh(){return RD=RD||new Xt}zs.La="serverreachability";function MD(u){Jt.call(this,zs.La,u)}_(MD,Jt);function Ll(u){let f=Oh();dn(f,new MD(f))}zs.STAT_EVENT="statevent";function ND(u,f){Jt.call(this,zs.STAT_EVENT,u),this.stat=f}_(ND,Jt);function hn(u){let f=Oh();dn(f,new ND(f,u))}zs.Ma="timingevent";function PD(u,f){Jt.call(this,zs.Ma,u),this.size=f}_(PD,Jt);function Vl(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function jl(){this.g=!0}jl.prototype.xa=function(){this.g=!1};function Kj(u,f,g,v,A,O){u.info(function(){if(u.g)if(O)for(var X="",Qe=O.split("&"),zt=0;zt<Qe.length;zt++){var je=Qe[zt].split("=");if(1<je.length){var en=je[0];je=je[1];var tn=en.split("_");X=2<=tn.length&&tn[1]=="type"?X+(en+"="+je+"&"):X+(en+"=redacted&")}}else X=null;else X=O;return"XMLHTTP REQ ("+v+") [attempt "+A+"]: "+f+`
`+g+`
`+X})}function Qj(u,f,g,v,A,O,X){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+A+"]: "+f+`
`+g+`
`+O+" "+X})}function ua(u,f,g,v){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+Zj(u,g)+(v?" "+v:"")})}function Yj(u,f){u.info(function(){return"TIMEOUT: "+f})}jl.prototype.info=function(){};function Zj(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var v=g[u];if(!(2>v.length)){var A=v[1];if(Array.isArray(A)&&!(1>A.length)){var O=A[0];if(O!="noop"&&O!="stop"&&O!="close")for(var X=1;X<A.length;X++)A[X]=""}}}}return pv(g)}catch{return f}}var Fh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},OD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vv;function Lh(){}_(Lh,gv),Lh.prototype.g=function(){return new XMLHttpRequest},Lh.prototype.i=function(){return{}},vv=new Lh;function Ui(u,f,g,v){this.j=u,this.i=f,this.l=g,this.R=v||1,this.U=new Ol(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new FD}function FD(){this.i=null,this.g="",this.h=!1}var LD={},_v={};function wv(u,f,g){u.L=1,u.v=$h(Xr(f)),u.m=g,u.P=!0,VD(u,null)}function VD(u,f){u.F=Date.now(),Vh(u),u.A=Xr(u.v);var g=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),JD(g.i,"t",v),u.C=0,g=u.j.J,u.h=new FD,u.g=mS(u.j,g?f:null,!u.m),0<u.O&&(u.M=new Hj(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,v=u.ca;var A="readystatechange";Array.isArray(A)||(A&&(SD[0]=A.toString()),A=SD);for(var O=0;O<A.length;O++){var X=wD(g,A[O],v||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),Ll(),Kj(u.i,u.u,u.A,u.l,u.R,u.m)}Ui.prototype.ca=function(u){u=u.target;let f=this.M;f&&ei(u)==3?f.j():this.Y(u)},Ui.prototype.Y=function(u){try{if(u==this.g)e:{let tn=ei(this.g);var f=this.g.Ba();let fa=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||sS(this.g)))){this.J||tn!=4||f==7||(f==8||0>=fa?Ll(3):Ll(2)),bv(this);var g=this.g.Z();this.X=g;t:if(jD(this)){var v=sS(this.g);u="";var A=v.length,O=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),Ul(this);var X="";break t}this.h.i=new a.TextDecoder}for(f=0;f<A;f++)this.h.h=!0,u+=this.h.i.decode(v[f],{stream:!(O&&f==A-1)});v.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=g==200,Qj(this.i,this.u,this.A,this.l,this.R,tn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,zt=this.g;if((Qe=zt.g?zt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Qe)){var je=Qe;break t}}je=null}if(g=je)ua(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ev(this,g);else{this.o=!1,this.s=3,hn(12),Hs(this),Ul(this);break e}}if(this.P){g=!0;let lr;for(;!this.J&&this.C<X.length;)if(lr=Jj(this,X),lr==_v){tn==4&&(this.s=4,hn(14),g=!1),ua(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==LD){this.s=4,hn(15),ua(this.i,this.l,X,"[Invalid Chunk]"),g=!1;break}else ua(this.i,this.l,lr,null),Ev(this,lr);if(jD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||X.length!=0||this.h.h||(this.s=1,hn(16),g=!1),this.o=this.o&&g,!g)ua(this.i,this.l,X,"[Invalid Chunked Response]"),Hs(this),Ul(this);else if(0<X.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Av(en),en.M=!0,hn(11))}}else ua(this.i,this.l,X,null),Ev(this,X);tn==4&&Hs(this),this.o&&!this.J&&(tn==4?hS(this.j,this):(this.o=!1,Vh(this)))}else g2(this.g),g==400&&0<X.indexOf("Unknown SID")?(this.s=3,hn(12)):(this.s=0,hn(13)),Hs(this),Ul(this)}}}catch{}finally{}};function jD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Jj(u,f){var g=u.C,v=f.indexOf(`
`,g);return v==-1?_v:(g=Number(f.substring(g,v)),isNaN(g)?LD:(v+=1,v+g>f.length?_v:(f=f.slice(v,v+g),u.C=v+g,f)))}Ui.prototype.cancel=function(){this.J=!0,Hs(this)};function Vh(u){u.S=Date.now()+u.I,UD(u,u.I)}function UD(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Vl(p(u.ba,u),f)}function bv(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ui.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(Yj(this.i,this.A),this.L!=2&&(Ll(),hn(17)),Hs(this),this.s=2,Ul(this)):UD(this,this.S-u)};function Ul(u){u.j.G==0||u.J||hS(u.j,u)}function Hs(u){bv(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,AD(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Ev(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Iv(g.h,u))){if(!u.K&&Iv(g.h,u)&&g.G==3){try{var v=g.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var A=v;if(A[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Gh(g),zh(g);else break e;Sv(g),hn(18)}}else g.za=A[1],0<g.za-g.T&&37500>A[2]&&g.F&&g.v==0&&!g.C&&(g.C=Vl(p(g.Za,g),6e3));if(1>=qD(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Ws(g,11)}else if((u.K||g.g==u)&&Gh(g),!L(f))for(A=g.Da.g.parse(f),f=0;f<A.length;f++){let je=A[f];if(g.T=je[0],je=je[1],g.G==2)if(je[0]=="c"){g.K=je[1],g.ia=je[2];let en=je[3];en!=null&&(g.la=en,g.j.info("VER="+g.la));let tn=je[4];tn!=null&&(g.Aa=tn,g.j.info("SVER="+g.Aa));let fa=je[5];fa!=null&&typeof fa=="number"&&0<fa&&(v=1.5*fa,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;let lr=u.g;if(lr){let Kh=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kh){var O=v.h;O.g||Kh.indexOf("spdy")==-1&&Kh.indexOf("quic")==-1&&Kh.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Tv(O,O.h),O.h=null))}if(v.D){let xv=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;xv&&(v.ya=xv,et(v.I,v.D,xv))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var X=u;if(v.qa=gS(v,v.J?v.ia:null,v.W),X.K){zD(v.h,X);var Qe=X,zt=v.L;zt&&(Qe.I=zt),Qe.B&&(bv(Qe),Vh(Qe)),v.g=X}else uS(v);0<g.i.length&&Hh(g)}else je[0]!="stop"&&je[0]!="close"||Ws(g,7);else g.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Ws(g,7):Dv(g):je[0]!="noop"&&g.l&&g.l.ta(je),g.v=0)}}Ll(4)}catch{}}var Xj=class{constructor(u,f){this.g=u,this.map=f}};function $D(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function BD(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qD(u){return u.h?1:u.g?u.g.size:0}function Iv(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Tv(u,f){u.g?u.g.add(f):u.h=f}function zD(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}$D.prototype.cancel=function(){if(this.i=HD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function HD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let g of u.g.values())f=f.concat(g.D);return f}return b(u.i)}function e2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],g=u.length,v=0;v<g;v++)f.push(u[v]);return f}f=[],g=0;for(v in u)f[g++]=u[v];return f}function t2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(let v in u)f[g++]=v;return f}}}function GD(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=t2(u),v=e2(u),A=v.length,O=0;O<A;O++)f.call(void 0,v[O],g&&g[O],u)}var WD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n2(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var v=u[g].indexOf("="),A=null;if(0<=v){var O=u[g].substring(0,v);A=u[g].substring(v+1)}else O=u[g];f(O,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Gs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Gs){this.h=u.h,jh(this,u.j),this.o=u.o,this.g=u.g,Uh(this,u.s),this.l=u.l;var f=u.i,g=new ql;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),KD(this,g),this.m=u.m}else u&&(f=String(u).match(WD))?(this.h=!1,jh(this,f[1]||"",!0),this.o=$l(f[2]||""),this.g=$l(f[3]||"",!0),Uh(this,f[4]),this.l=$l(f[5]||"",!0),KD(this,f[6]||"",!0),this.m=$l(f[7]||"")):(this.h=!1,this.i=new ql(null,this.h))}Gs.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Bl(f,QD,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Bl(f,QD,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Bl(g,g.charAt(0)=="/"?s2:i2,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Bl(g,a2)),u.join("")};function Xr(u){return new Gs(u)}function jh(u,f,g){u.j=g?$l(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Uh(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function KD(u,f,g){f instanceof ql?(u.i=f,c2(u.i,u.h)):(g||(f=Bl(f,o2)),u.i=new ql(f,u.h))}function et(u,f,g){u.i.set(f,g)}function $h(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function $l(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Bl(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,r2),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function r2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var QD=/[#\/\?@]/g,i2=/[#\?:]/g,s2=/[#\?]/g,o2=/[#\?@]/g,a2=/#/g;function ql(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function $i(u){u.g||(u.g=new Map,u.h=0,u.i&&n2(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=ql.prototype,n.add=function(u,f){$i(this),this.i=null,u=da(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function YD(u,f){$i(u),f=da(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function ZD(u,f){return $i(u),f=da(u,f),u.g.has(f)}n.forEach=function(u,f){$i(this),this.g.forEach(function(g,v){g.forEach(function(A){u.call(f,A,v,this)},this)},this)},n.na=function(){$i(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let v=0;v<f.length;v++){let A=u[v];for(let O=0;O<A.length;O++)g.push(f[v])}return g},n.V=function(u){$i(this);let f=[];if(typeof u=="string")ZD(this,u)&&(f=f.concat(this.g.get(da(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},n.set=function(u,f){return $i(this),this.i=null,u=da(this,u),ZD(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function JD(u,f,g){YD(u,f),0<g.length&&(u.i=null,u.g.set(da(u,f),b(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var v=f[g];let O=encodeURIComponent(String(v)),X=this.V(v);for(v=0;v<X.length;v++){var A=O;X[v]!==""&&(A+="="+encodeURIComponent(String(X[v]))),u.push(A)}}return this.i=u.join("&")};function da(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function c2(u,f){f&&!u.j&&($i(u),u.i=null,u.g.forEach(function(g,v){var A=v.toLowerCase();v!=A&&(YD(this,v),JD(this,A,g))},u)),u.j=f}function l2(u,f){let g=new jl;if(a.Image){let v=new Image;v.onload=m(Bi,g,"TestLoadImage: loaded",!0,f,v),v.onerror=m(Bi,g,"TestLoadImage: error",!1,f,v),v.onabort=m(Bi,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=m(Bi,g,"TestLoadImage: timeout",!1,f,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else f(!1)}function u2(u,f){let g=new jl,v=new AbortController,A=setTimeout(()=>{v.abort(),Bi(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:v.signal}).then(O=>{clearTimeout(A),O.ok?Bi(g,"TestPingServer: ok",!0,f):Bi(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(A),Bi(g,"TestPingServer: error",!1,f)})}function Bi(u,f,g,v,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),v(g)}catch{}}function d2(){this.g=new Wj}function h2(u,f,g){let v=g||"";try{GD(u,function(A,O){let X=A;l(A)&&(X=pv(A)),f.push(v+O+"="+encodeURIComponent(X))})}catch(A){throw f.push(v+"type="+encodeURIComponent("_badmap")),A}}function zl(u){this.l=u.Ub||null,this.j=u.eb||!1}_(zl,gv),zl.prototype.g=function(){return new Bh(this.l,this.j)},zl.prototype.i=function(u){return function(){return u}}({});function Bh(u,f){Xt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Bh,Xt),n=Bh.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Gl(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hl(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Gl(this)),this.g&&(this.readyState=3,Gl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;XD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function XD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Hl(this):Gl(this),this.readyState==3&&XD(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Hl(this))},n.Qa=function(u){this.g&&(this.response=u,Hl(this))},n.ga=function(){this.g&&Hl(this)};function Hl(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Gl(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Gl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Bh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function eS(u){let f="";return K(u,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function Cv(u,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=eS(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):et(u,f,g))}function ut(u){Xt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(ut,Xt);var f2=/^https?$/i,p2=["POST","PUT"];n=ut.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vv.g(),this.v=this.o?xD(this.o):xD(vv),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(O){tS(this,O);return}if(u=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var A in v)g.set(A,v[A]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let O of v.keys())g.set(O,v.get(O));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),A=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(p2,f,void 0))||v||A||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,X]of g)this.g.setRequestHeader(O,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{iS(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){tS(this,O)}};function tS(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,nS(u),qh(u)}function nS(u){u.A||(u.A=!0,dn(u,"complete"),dn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,dn(this,"complete"),dn(this,"abort"),qh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qh(this,!0)),ut.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rS(this):this.bb())},n.bb=function(){rS(this)};function rS(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ei(u)!=4||u.Z()!=2)){if(u.u&&ei(u)==4)CD(u.Ea,0,u);else if(dn(u,"readystatechange"),ei(u)==4){u.h=!1;try{let X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=X===0){var A=String(u.D).match(WD)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),v=!f2.test(A?A.toLowerCase():"")}g=v}if(g)dn(u,"complete"),dn(u,"success");else{u.m=6;try{var O=2<ei(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",nS(u)}}finally{qh(u)}}}}function qh(u,f){if(u.g){iS(u);let g=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||dn(u,"ready");try{g.onreadystatechange=v}catch{}}}function iS(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ei(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),Gj(f)}};function sS(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function g2(u){let f={};u=(u.g&&2<=ei(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(L(u[v]))continue;var g=S(u[v]);let A=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let O=f[A]||[];f[A]=O,O.push(g)}C(f,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wl(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function oS(u){this.Aa=0,this.i=[],this.j=new jl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wl("baseRetryDelayMs",5e3,u),this.cb=Wl("retryDelaySeedMs",1e4,u),this.Wa=Wl("forwardChannelMaxRetries",2,u),this.wa=Wl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new $D(u&&u.concurrentRequestLimit),this.Da=new d2,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=oS.prototype,n.la=8,n.G=1,n.connect=function(u,f,g,v){hn(0),this.W=u,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=gS(this,null,this.W),Hh(this)};function Dv(u){if(aS(u),u.G==3){var f=u.U++,g=Xr(u.I);if(et(g,"SID",u.K),et(g,"RID",f),et(g,"TYPE","terminate"),Kl(u,g),f=new Ui(u,u.j,f),f.L=2,f.v=$h(Xr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=mS(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Vh(f)}pS(u)}function zh(u){u.g&&(Av(u),u.g.cancel(),u.g=null)}function aS(u){zh(u),u.u&&(a.clearTimeout(u.u),u.u=null),Gh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Hh(u){if(!BD(u.h)&&!u.s){u.s=!0;var f=u.Ga;Rl||_D(),Ml||(Rl(),Ml=!0),sv.add(f,u),u.B=0}}function m2(u,f){return qD(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Vl(p(u.Ga,u,f),fS(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let A=new Ui(this,this.j,u),O=this.o;if(this.S&&(O?(O=w(O),D(O,this.S)):O=this.S),this.m!==null||this.O||(A.H=O,O=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=lS(this,A,f),g=Xr(this.I),et(g,"RID",u),et(g,"CVER",22),this.D&&et(g,"X-HTTP-Session-Id",this.D),Kl(this,g),O&&(this.O?f="headers="+encodeURIComponent(String(eS(O)))+"&"+f:this.m&&Cv(g,this.m,O)),Tv(this.h,A),this.Ua&&et(g,"TYPE","init"),this.P?(et(g,"$req",f),et(g,"SID","null"),A.T=!0,wv(A,g,null)):wv(A,g,f),this.G=2}}else this.G==3&&(u?cS(this,u):this.i.length==0||BD(this.h)||cS(this))};function cS(u,f){var g;f?g=f.l:g=u.U++;let v=Xr(u.I);et(v,"SID",u.K),et(v,"RID",g),et(v,"AID",u.T),Kl(u,v),u.m&&u.o&&Cv(v,u.m,u.o),g=new Ui(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=lS(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Tv(u.h,g),wv(g,v,f)}function Kl(u,f){u.H&&K(u.H,function(g,v){et(f,v,g)}),u.l&&GD({},function(g,v){et(f,v,g)})}function lS(u,f,g){g=Math.min(u.i.length,g);var v=u.l?p(u.l.Na,u.l,u):null;e:{var A=u.i;let O=-1;for(;;){let X=["count="+g];O==-1?0<g?(O=A[0].g,X.push("ofs="+O)):O=0:X.push("ofs="+O);let Qe=!0;for(let zt=0;zt<g;zt++){let je=A[zt].g,en=A[zt].map;if(je-=O,0>je)O=Math.max(0,A[zt].g-100),Qe=!1;else try{h2(en,X,"req"+je+"_")}catch{v&&v(en)}}if(Qe){v=X.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,v}function uS(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Rl||_D(),Ml||(Rl(),Ml=!0),sv.add(f,u),u.v=0}}function Sv(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Vl(p(u.Fa,u),fS(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,dS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Vl(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,hn(10),zh(this),dS(this))};function Av(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function dS(u){u.g=new Ui(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Xr(u.qa);et(f,"RID","rpc"),et(f,"SID",u.K),et(f,"AID",u.T),et(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(f,"TO",u.ja),et(f,"TYPE","xmlhttp"),Kl(u,f),u.m&&u.o&&Cv(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=$h(Xr(f)),g.m=null,g.P=!0,VD(g,u)}n.Za=function(){this.C!=null&&(this.C=null,zh(this),Sv(this),hn(19))};function Gh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function hS(u,f){var g=null;if(u.g==f){Gh(u),Av(u),u.g=null;var v=2}else if(Iv(u.h,f))g=f.D,zD(u.h,f),v=1;else return;if(u.G!=0){if(f.o)if(v==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var A=u.B;v=Oh(),dn(v,new PD(v,g)),Hh(u)}else uS(u);else if(A=f.s,A==3||A==0&&0<f.X||!(v==1&&m2(u,f)||v==2&&Sv(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),A){case 1:Ws(u,5);break;case 4:Ws(u,10);break;case 3:Ws(u,6);break;default:Ws(u,2)}}}function fS(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function Ws(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),v=u.Xa;let A=!v;v=new Gs(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||jh(v,"https"),$h(v),A?l2(v.toString(),g):u2(v.toString(),g)}else hn(2);u.G=0,u.l&&u.l.sa(f),pS(u),aS(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),hn(2)):(this.j.info("Failed to ping google.com"),hn(1))};function pS(u){if(u.G=0,u.ka=[],u.l){let f=HD(u.h);(f.length!=0||u.i.length!=0)&&(E(u.ka,f),E(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function gS(u,f,g){var v=g instanceof Gs?Xr(g):new Gs(g);if(v.g!="")f&&(v.g=f+"."+v.g),Uh(v,v.s);else{var A=a.location;v=A.protocol,f=f?f+"."+A.hostname:A.hostname,A=+A.port;var O=new Gs(null);v&&jh(O,v),f&&(O.g=f),A&&Uh(O,A),g&&(O.l=g),v=O}return g=u.D,f=u.ya,g&&f&&et(v,g,f),et(v,"VER",u.la),Kl(u,v),v}function mS(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new ut(new zl({eb:g})):new ut(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function yS(){}n=yS.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Wh(){}Wh.prototype.g=function(u,f){return new jn(u,f)};function jn(u,f){Xt.call(this),this.g=new oS(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!L(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!L(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new ha(this)}_(jn,Xt),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){Dv(this.g)},jn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=pv(u),u=g);f.i.push(new Xj(f.Ya++,u)),f.G==3&&Hh(f)},jn.prototype.N=function(){this.g.l=null,delete this.j,Dv(this.g),delete this.g,jn.aa.N.call(this)};function vS(u){mv.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}_(vS,mv);function _S(){yv.call(this),this.status=1}_(_S,yv);function ha(u){this.g=u}_(ha,yS),ha.prototype.ua=function(){dn(this.g,"a")},ha.prototype.ta=function(u){dn(this.g,new vS(u))},ha.prototype.sa=function(u){dn(this.g,new _S)},ha.prototype.ra=function(){dn(this.g,"b")},Wh.prototype.createWebChannel=Wh.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,XE=xi.createWebChannelTransport=function(){return new Wh},JE=xi.getStatEventTarget=function(){return Oh()},ZE=xi.Event=zs,Sm=xi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fh.NO_ERROR=0,Fh.TIMEOUT=8,Fh.HTTP_ERROR=6,Bd=xi.ErrorCode=Fh,OD.COMPLETE="complete",YE=xi.EventType=OD,kD.EventType=Fl,Fl.OPEN="a",Fl.CLOSE="b",Fl.ERROR="c",Fl.MESSAGE="d",Xt.prototype.listen=Xt.prototype.K,Bc=xi.WebChannel=kD,Z8=xi.FetchXmlHttpFactory=zl,ut.prototype.listenOnce=ut.prototype.L,ut.prototype.getLastError=ut.prototype.Ka,ut.prototype.getLastErrorCode=ut.prototype.Ba,ut.prototype.getStatus=ut.prototype.Z,ut.prototype.getResponseJson=ut.prototype.Oa,ut.prototype.getResponseText=ut.prototype.oa,ut.prototype.send=ut.prototype.ea,ut.prototype.setWithCredentials=ut.prototype.Ha,QE=xi.XhrIo=ut}).apply(typeof Dm<"u"?Dm:typeof self<"u"?self:typeof window<"u"?window:{});var PO="@firebase/firestore";var kt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};kt.UNAUTHENTICATED=new kt(null),kt.GOOGLE_CREDENTIALS=new kt("google-credentials-uid"),kt.FIRST_PARTY=new kt("first-party-uid"),kt.MOCK_USER=new kt("mock-user");var _l="10.14.0";var ks=new Zh("@firebase/firestore");function Wc(){return ks.logLevel}function LF(n){ks.setLogLevel(n)}function H(n,...e){if(ks.logLevel<=Ar.DEBUG){let t=e.map(iC);ks.debug(`Firestore (${_l}): ${n}`,...t)}}function yt(n,...e){if(ks.logLevel<=Ar.ERROR){let t=e.map(iC);ks.error(`Firestore (${_l}): ${n}`,...t)}}function Er(n,...e){if(ks.logLevel<=Ar.WARN){let t=e.map(iC);ks.warn(`Firestore (${_l}): ${n}`,...t)}}function iC(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ie(n="Unexpected state"){let e=`FIRESTORE (${_l}) INTERNAL ASSERTION FAILED: `+n;throw yt(e),new Error(e)}function oe(n,e){n||ie()}function VF(n,e){n||ie()}function ee(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends AS{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var jt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Lm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},sI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(kt.UNAUTHENTICATED))}shutdown(){}},oI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},aI=class{constructor(e){this.t=e,this.currentUser=kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){oe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new jt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new jt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new jt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string"),new Lm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string"),new kt(e)}},cI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new cI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},dI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){oe(this.o===void 0);let r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(oe(typeof t.token=="string"),this.R=t.token,new uI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function eW(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Vm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=eW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ge(n,e){return n<e?-1:n>e?1:0}function nl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function jF(n){return n+"\0"}var ct=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ue=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ct(0,0))}static max(){return new n(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(),r===void 0?r=e.length-t:r>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Fe=class n extends jm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},tW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,vt=class n extends jm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return tW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(Fe.fromString(e))}static fromName(e){return new n(Fe.fromString(e).popFirst(5))}static empty(){return new n(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Fe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Fe(e.slice()))}};var rl=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function hI(n){return n.fields.find(e=>e.kind===2)}function Vo(n){return n.fields.filter(e=>e.kind!==2)}rl.UNKNOWN_ID=-1;var Xc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var eh=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,ar.min())}};function UF(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new ct(t+1,0):new ct(t,r));return new ar(i,te.empty(),e)}function $F(n){return new ar(n.readTime,n.key,-1)}var ar=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ue.min(),te.empty(),-1)}static max(){return new n(ue.max(),te.empty(),-1)}};function sC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:ge(n.largestBatchId,e.largestBatchId))}var BF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Um=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Us(n){return y(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==BF)throw n;H("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var $m=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new jt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new zo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=oC(r.target.error);this.V.reject(new zo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new zo(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(H("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new pI(t)}},Rs=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Ql())===12.2&&yt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return H("SimpleDb","Removing database:",e),jo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Yh())return!1;if(n.v())return!0;let e=Ql(),t=n.S(e),r=0<t&&t<10,i=qF(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return y(this,null,function*(){return this.db||(H("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new zo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new z(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new z(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zo(e,o))},i.onupgradeneeded=s=>{H("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{H("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return y(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=$m.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),P.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(H("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function qF(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var fI=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return jo(this.B.delete())}},zo=class extends z{constructor(e,t){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function $s(n){return n.name==="IndexedDbTransactionError"}var pI=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(H("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(H("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jo(r)}add(e){return H("SimpleDb","ADD",this.store.name,e,e),jo(this.store.add(e))}get(e){return jo(this.store.get(e)).next(t=>(t===void 0&&(t=null),H("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return H("SimpleDb","DELETE",this.store.name,e),jo(this.store.delete(e))}count(){return H("SimpleDb","COUNT",this.store.name),jo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new P((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new P((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){H("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new P((r,i)=>{t.onerror=s=>{let o=oC(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new P((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new fI(a),l=t(a.primaryKey,a.value,c);if(l instanceof P){let d=l.catch(h=>(c.done(),P.reject(h)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>P.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function jo(n){return new P((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=oC(r.target.error);t(i)}})}var OO=!1;function oC(n){let e=Rs.S(Ql());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return OO||(OO=!0,setTimeout(()=>{throw r},0)),r}}return n}var gI=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){H("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{H("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){$s(t)?H("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Us(t)}yield this.X(6e4)}))}},mI=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return P.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(H("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=$F(s);sC(o,r)>0&&(r=o)}),new ar(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Wn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function bh(n){return n==null}function th(n){return n===0&&1/n==-1/0}function zF(n){return typeof n=="number"&&Number.isInteger(n)&&!th(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function wn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=FO(e)),e=nW(n.get(t),e);return FO(e)}function nW(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function FO(n){return n+""}function Br(n){let e=n.length;if(oe(e>=2),e===2)return oe(n.charAt(0)===""&&n.charAt(1)===""),Fe.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&ie(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:ie()}s=o+2}return new Fe(r)}var LO=["userId","batchId"];function Mm(n,e){return[n,wn(e)]}function HF(n,e,t){return[n,wn(e),t]}var rW={},iW=["prefixPath","collectionGroup","readTime","documentId"],sW=["prefixPath","collectionGroup","documentId"],oW=["collectionGroup","readTime","prefixPath","documentId"],aW=["canonicalId","targetId"],cW=["targetId","path"],lW=["path","targetId"],uW=["collectionId","parent"],dW=["indexId","uid"],hW=["uid","sequenceNumber"],fW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],pW=["indexId","uid","orderedDocumentKey"],gW=["userId","collectionPath","documentId"],mW=["userId","collectionPath","largestBatchId"],yW=["userId","collectionGroup","largestBatchId"],GF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vW=[...GF,"documentOverlays"],WF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KF=WF,aC=[...KF,"indexConfiguration","indexState","indexEntries"],_W=aC,wW=[...aC,"globals"];var nh=class extends Um{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Ut(n,e){let t=ee(n);return Rs.F(t._e,e)}function VO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function na(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function QF(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var it=class n{constructor(e,t){this.comparator=e,this.root=t||zr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,zr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Jc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Jc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Jc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Jc(this.root,e,this.comparator,!0)}},Jc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},zr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};zr.EMPTY=null,zr.RED=!0,zr.BLACK=!1;zr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,r,i,s){return this}insert(e,t,r){return new zr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class n{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bm(this.data.getIterator())}getIteratorFrom(e){return new Bm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Bm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function qc(n){return n.hasNext()?n.getNext():void 0}var Kn=class n{constructor(e){this.fields=e,e.sort(vt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ze(vt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nl(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var qm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function YF(){return typeof atob<"u"}var wt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new qm("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};wt.EMPTY_BYTE_STRING=new wt("");var bW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Mi(n){if(oe(!!n),typeof n=="string"){let e=0,t=bW.exec(n);if(oe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ms(n){return typeof n=="string"?wt.fromBase64String(n):wt.fromUint8Array(n)}function Py(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function cC(n){let e=n.mapValue.fields.__previous_value__;return Py(e)?cC(e):e}function rh(n){let e=Mi(n.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}var yI=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Ns=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var As={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Nm={nullValue:"NULL_VALUE"};function Ho(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Py(n)?4:ZF(n)?9007199254740991:Oy(n)?10:11:ie()}function Wr(n,e){if(n===e)return!0;let t=Ho(n);if(t!==Ho(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rh(n).isEqual(rh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Mi(i.timestampValue),a=Mi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ms(i.bytesValue).isEqual(Ms(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ot(i.doubleValue),a=ot(s.doubleValue);return o===a?th(o)===th(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return nl(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(VO(o)!==VO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Wr(o[c],a[c])))return!1;return!0}(n,e);default:return ie()}}function ih(n,e){return(n.values||[]).find(t=>Wr(t,e))!==void 0}function Ps(n,e){if(n===e)return 0;let t=Ho(n),r=Ho(e);if(t!==r)return ge(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ot(s.integerValue||s.doubleValue),c=ot(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return jO(n.timestampValue,e.timestampValue);case 4:return jO(rh(n),rh(e));case 5:return ge(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Ms(s),c=Ms(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ge(a[l],c[l]);if(d!==0)return d}return ge(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ge(ot(s.latitude),ot(o.latitude));return a!==0?a:ge(ot(s.longitude),ot(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return UO(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let h=s.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,b=ge(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=_?.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:UO(m,_)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===As.mapValue&&o===As.mapValue)return 0;if(s===As.mapValue)return 1;if(o===As.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let p=ge(c[h],d[h]);if(p!==0)return p;let m=Ps(a[c[h]],l[d[h]]);if(m!==0)return m}return ge(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ie()}}function jO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ge(n,e);let t=Mi(n),r=Mi(e),i=ge(t.seconds,r.seconds);return i!==0?i:ge(t.nanos,r.nanos)}function UO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ps(t[i],r[i]);if(s)return s}return ge(t.length,r.length)}function il(n){return vI(n)}function vI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Mi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ms(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=vI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${vI(t.fields[o])}`;return i+"}"}(n.mapValue):ie()}function Go(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _I(n){return!!n&&"integerValue"in n}function sh(n){return!!n&&"arrayValue"in n}function $O(n){return!!n&&"nullValue"in n}function BO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Pm(n){return!!n&&"mapValue"in n}function Oy(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Qd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return na(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Qd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ZF(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var JF={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function EW(n){return"nullValue"in n?Nm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Go(Ns.empty(),te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Oy(n)?JF:{mapValue:{}}:ie()}function IW(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Go(Ns.empty(),te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?JF:"mapValue"in n?Oy(n)?{mapValue:{}}:As:ie()}function qO(n,e){let t=Ps(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function zO(n,e){let t=Ps(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var un=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Pm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qd(t)}setAll(e){let t=vt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Qd(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Pm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Pm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){na(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Qd(this.value))}};function XF(n){let e=[];return na(n.fields,(t,r)=>{let i=new vt([t]);if(Pm(r)){let s=XF(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Kn(e)}var Rt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ue.min(),ue.min(),ue.min(),un.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ue.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ue.min(),ue.min(),un.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ue.min(),ue.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Kr=class{constructor(e,t){this.position=e,this.inclusive=t}};function HO(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),t.key):r=Ps(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function GO(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}var Wo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function TW(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var zm=class{},Re=class n extends zm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new EI(e,t,r):t==="array-contains"?new CI(e,r):t==="in"?new Hm(e,r):t==="not-in"?new DI(e,r):t==="array-contains-any"?new SI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new II(e,r):new TI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ps(t,this.value)):t!==null&&Ho(this.value)===Ho(t)&&this.matchesComparison(Ps(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},We=class n extends zm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return sl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function sl(n){return n.op==="and"}function wI(n){return n.op==="or"}function lC(n){return eL(n)&&sl(n)}function eL(n){for(let e of n.filters)if(e instanceof We)return!1;return!0}function bI(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+il(n.value);if(lC(n))return n.filters.map(e=>bI(e)).join(",");{let e=n.filters.map(t=>bI(t)).join(",");return`${n.op}(${e})`}}function tL(n,e){return n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&Wr(r.value,i.value)}(n,e):n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tL(o,i.filters[a]),!0):!1}(n,e):void ie()}function nL(n,e){let t=n.filters.concat(e);return We.create(t,n.op)}function rL(n){return n instanceof Re?function(t){return`${t.field.canonicalString()} ${t.op} ${il(t.value)}`}(n):n instanceof We?function(t){return t.op.toString()+" {"+t.getFilters().map(rL).join(" ,")+"}"}(n):"Filter"}var EI=class extends Re{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},II=class extends Re{constructor(e,t){super(e,"in",t),this.keys=iL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},TI=class extends Re{constructor(e,t){super(e,"not-in",t),this.keys=iL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function iL(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}var CI=class extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return sh(t)&&ih(t.arrayValue,this.value)}},Hm=class extends Re{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ih(this.value.arrayValue,t)}},DI=class extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if(ih(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ih(this.value.arrayValue,t)}},SI=class extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!sh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ih(this.value.arrayValue,r))}};var AI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function xI(n,e=null,t=[],r=[],i=null,s=null,o=null){return new AI(n,e,t,r,i,s,o)}function Ko(n){let e=ee(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>il(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>il(r)).join(",")),e.ue=t}return e.ue}function Eh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!TW(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GO(n.startAt,e.startAt)&&GO(n.endAt,e.endAt)}function Gm(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Wm(n,e){return n.filters.filter(t=>t instanceof Re&&t.field.isEqual(e))}function WO(n,e,t){let r=Nm,i=!0;for(let s of Wm(n,e)){let o=Nm,a=!0;switch(s.op){case"<":case"<=":o=EW(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Nm}qO({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];qO({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function KO(n,e,t){let r=As,i=!0;for(let s of Wm(n,e)){let o=As,a=!0;switch(s.op){case">=":case">":o=IW(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=As}zO({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];zO({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Ir=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function sL(n,e,t,r,i,s,o,a){return new Ir(n,e,t,r,i,s,o,a)}function wl(n){return new Ir(n)}function QO(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function uC(n){return n.collectionGroup!==null}function el(n){let e=ee(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(vt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wo(s,r))}),t.has(vt.keyField().canonicalString())||e.ce.push(new Wo(vt.keyField(),r))}return e.ce}function bn(n){let e=ee(n);return e.le||(e.le=CW(e,el(n))),e.le}function CW(n,e){if(n.limitType==="F")return xI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Wo(i.field,s)});let t=n.endAt?new Kr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Kr(n.startAt.position,n.startAt.inclusive):null;return xI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function kI(n,e){let t=n.filters.concat([e]);return new Ir(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Km(n,e,t){return new Ir(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ih(n,e){return Eh(bn(n),bn(e))&&n.limitType===e.limitType}function oL(n){return`${Ko(bn(n))}|lt:${n.limitType}`}function Kc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>rL(i)).join(", ")}]`),bh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>il(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>il(i)).join(",")),`Target(${r})`}(bn(n))}; limitType=${n.limitType})`}function Th(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of el(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=HO(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,el(r),i)||r.endAt&&!function(o,a,c){let l=HO(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,el(r),i))}(n,e)}function aL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cL(n){return(e,t)=>{let r=!1;for(let i of el(n)){let s=DW(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function DW(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Ps(c,l):ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}var Qr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return QF(this.inner)}size(){return this.innerSize}};var SW=new it(te.comparator);function Ln(){return SW}var lL=new it(te.comparator);function Wd(...n){let e=lL;for(let t of n)e=e.insert(t.key,t);return e}function uL(n){let e=lL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function qr(){return Yd()}function dL(){return Yd()}function Yd(){return new Qr(n=>n.toString(),(n,e)=>n.isEqual(e))}var AW=new it(te.comparator),xW=new Ze(te.comparator);function ve(...n){let e=xW;for(let t of n)e=e.add(t);return e}var kW=new Ze(ge);function dC(){return kW}function hC(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:th(e)?"-0":e}}function hL(n){return{integerValue:""+n}}function fL(n,e){return zF(e)?hL(e):hC(n,e)}var ol=class{constructor(){this._=void 0}};function RW(n,e,t){return n instanceof Os?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Py(s)&&(s=cC(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Ni?gL(n,e):n instanceof Pi?mL(n,e):function(i,s){let o=pL(i,s),a=YO(o)+YO(i.Pe);return _I(o)&&_I(i.Pe)?hL(a):hC(i.serializer,a)}(n,e)}function MW(n,e,t){return n instanceof Ni?gL(n,e):n instanceof Pi?mL(n,e):t}function pL(n,e){return n instanceof Fs?function(r){return _I(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Os=class extends ol{},Ni=class extends ol{constructor(e){super(),this.elements=e}};function gL(n,e){let t=yL(e);for(let r of n.elements)t.some(i=>Wr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pi=class extends ol{constructor(e){super(),this.elements=e}};function mL(n,e){let t=yL(e);for(let r of n.elements)t=t.filter(i=>!Wr(i,r));return{arrayValue:{values:t}}}var Fs=class extends ol{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function YO(n){return ot(n.integerValue||n.doubleValue)}function yL(n){return sh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Qo=class{constructor(e,t){this.field=e,this.transform=t}};function NW(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ni&&i instanceof Ni||r instanceof Pi&&i instanceof Pi?nl(r.elements,i.elements,Wr):r instanceof Fs&&i instanceof Fs?Wr(r.Pe,i.Pe):r instanceof Os&&i instanceof Os}(n.transform,e.transform)}var RI=class{constructor(e,t){this.version=e,this.transformResults=t}},gt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Om(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var al=class{};function vL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Vs(n.key,gt.none()):new Ls(n.key,n.data,gt.none());{let t=n.data,r=un.empty(),i=new Ze(vt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Tr(n.key,r,new Kn(i.toArray()),gt.none())}}function PW(n,e,t){n instanceof Ls?function(i,s,o){let a=i.value.clone(),c=JO(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Tr?function(i,s,o){if(!Om(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=JO(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(_L(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Zd(n,e,t,r){return n instanceof Ls?function(s,o,a,c){if(!Om(s.precondition,o))return a;let l=s.value.clone(),d=XO(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tr?function(s,o,a,c){if(!Om(s.precondition,o))return a;let l=XO(s.fieldTransforms,c,o),d=o.data;return d.setAll(_L(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return Om(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function OW(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=pL(r.transform,i||null);s!=null&&(t===null&&(t=un.empty()),t.set(r.field,s))}return t||null}function ZO(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nl(r,i,(s,o)=>NW(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ls=class extends al{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Tr=class extends al{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function _L(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function JO(n,e,t){let r=new Map;oe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,MW(o,a,t[i]))}return r}function XO(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,RW(s,o,e))}return r}var Vs=class extends al{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},oh=class extends al{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ah=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&PW(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Zd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Zd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=dL();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=vL(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&nl(this.mutations,e.mutations,(t,r)=>ZO(t,r))&&nl(this.baseMutations,e.baseMutations,(t,r)=>ZO(t,r))}},MI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){oe(e.mutations.length===r.length);let i=function(){return AW}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var ch=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var NI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var At,Oe;function wL(n){switch(n){default:return ie();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function bL(n){if(n===void 0)return yt("GRPC error has no .code"),F.UNKNOWN;switch(n){case At.OK:return F.OK;case At.CANCELLED:return F.CANCELLED;case At.UNKNOWN:return F.UNKNOWN;case At.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case At.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case At.INTERNAL:return F.INTERNAL;case At.UNAVAILABLE:return F.UNAVAILABLE;case At.UNAUTHENTICATED:return F.UNAUTHENTICATED;case At.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case At.NOT_FOUND:return F.NOT_FOUND;case At.ALREADY_EXISTS:return F.ALREADY_EXISTS;case At.PERMISSION_DENIED:return F.PERMISSION_DENIED;case At.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case At.ABORTED:return F.ABORTED;case At.OUT_OF_RANGE:return F.OUT_OF_RANGE;case At.UNIMPLEMENTED:return F.UNIMPLEMENTED;case At.DATA_LOSS:return F.DATA_LOSS;default:return ie()}}(Oe=At||(At={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";var eF=null;function EL(){return new TextEncoder}var FW=new Is([4294967295,4294967295],0);function tF(n){let e=EL().encode(n),t=new KE;return t.update(e),new Uint8Array(t.digest())}function nF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Is([t,r],0),new Is([i,s],0)]}var PI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qo(`Invalid padding: ${t}`);if(r<0)throw new qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Is.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Is.fromNumber(r)));return i.compare(FW)===1&&(i=new Is([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=tF(e),[r,i]=nF(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=tF(e),[r,i]=nF(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},qo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var lh=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,uh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ue.min(),i,new it(ge),Ln(),ve())}},uh=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var tl=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Qm=class{constructor(e,t){this.targetId=e,this.me=t}},Ym=class{constructor(e,t,r=wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Zm=class{constructor(){this.fe=0,this.ge=iF(),this.pe=wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),t=ve(),r=ve();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new uh(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=iF()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},OI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ln(),this.qe=rF(),this.Qe=new it(ge)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Gm(s))if(r===0){let o=new te(s.path);this.Ue(t,o,Rt.newNoDocument(o,ue.min()))}else oe(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}eF?.et(function(d,h,p,m,_){var b,E,k,L,V,$;let W={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},K=h.unchangedNames;return K&&(W.bloomFilter={applied:_===0,hashCount:(b=K?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(L=(k=(E=K?.bits)===null||E===void 0?void 0:E.bitmap)===null||k===void 0?void 0:k.length)!==null&&L!==void 0?L:0,padding:($=(V=K?.bits)===null||V===void 0?void 0:V.padding)!==null&&$!==void 0?$:0,mightContain:C=>{var w;return(w=m?.mightContain(C))!==null&&w!==void 0&&w}}),W}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ms(r).toUint8Array()}catch(c){if(c instanceof qm)return Er("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new PI(o,i,s)}catch(c){return Er(c instanceof qo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Gm(a.target)){let c=new te(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Rt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=ve();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new lh(e,t,this.Qe,this.ke,r);return this.ke=Ln(),this.qe=rF(),this.Qe=new it(ge),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Zm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ze(ge),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Zm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function rF(){return new it(te.comparator)}function iF(){return new it(te.comparator)}var LW={asc:"ASCENDING",desc:"DESCENDING"},VW={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jW={and:"AND",or:"OR"},FI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function LI(n,e){return n.useProto3Json||bh(e)?e:{value:e}}function cl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function IL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function UW(n,e){return cl(n,e.toTimestamp())}function _t(n){return oe(!!n),ue.fromTimestamp(function(t){let r=Mi(t);return new ct(r.seconds,r.nanos)}(n))}function fC(n,e){return VI(n,e).canonicalString()}function VI(n,e){let t=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function TL(n){let e=Fe.fromString(n);return oe(PL(e)),e}function dh(n,e){return fC(n.databaseId,e.path)}function Hr(n,e){let t=TL(e);if(t.get(1)!==n.databaseId.projectId)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(SL(t))}function CL(n,e){return fC(n.databaseId,e)}function DL(n){let e=TL(n);return e.length===4?Fe.emptyPath():SL(e)}function jI(n){return new Fe(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function SL(n){return oe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function sF(n,e,t){return{name:dh(n,e),fields:t.value.mapValue.fields}}function AL(n,e,t){let r=Hr(n,e.name),i=_t(e.updateTime),s=e.createTime?_t(e.createTime):ue.min(),o=new un({mapValue:{fields:e.fields}}),a=Rt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function $W(n,e){return"found"in e?function(r,i){oe(!!i.found),i.found.name,i.found.updateTime;let s=Hr(r,i.found.name),o=_t(i.found.updateTime),a=i.found.createTime?_t(i.found.createTime):ue.min(),c=new un({mapValue:{fields:i.found.fields}});return Rt.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){oe(!!i.missing),oe(!!i.readTime);let s=Hr(r,i.missing),o=_t(i.readTime);return Rt.newNoDocument(s,o)}(n,e):ie()}function BW(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(oe(d===void 0||typeof d=="string"),wt.fromBase64String(d||"")):(oe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),wt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?F.UNKNOWN:bL(l.code);return new z(d,l.message||"")}(o);t=new Ym(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Hr(n,r.document.name),s=_t(r.document.updateTime),o=r.document.createTime?_t(r.document.createTime):ue.min(),a=new un({mapValue:{fields:r.document.fields}}),c=Rt.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new tl(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Hr(n,r.document),s=r.readTime?_t(r.readTime):ue.min(),o=Rt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new tl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Hr(n,r.document),s=r.removedTargetIds||[];t=new tl([],s,i,null)}else{if(!("filter"in e))return ie();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new NI(i,s),a=r.targetId;t=new Qm(a,o)}}return t}function hh(n,e){let t;if(e instanceof Ls)t={update:sF(n,e.key,e.value)};else if(e instanceof Vs)t={delete:dh(n,e.key)};else if(e instanceof Tr)t={update:sF(n,e.key,e.data),updateMask:KW(e.fieldMask)};else{if(!(e instanceof oh))return ie();t={verify:dh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Os)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ni)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fs)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:UW(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(n,e.precondition)),t}function UI(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?gt.updateTime(_t(s.updateTime)):s.exists!==void 0?gt.exists(s.exists):gt.none()}(e.currentDocument):gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)oe(a.setToServerValue==="REQUEST_TIME"),c=new Os;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Ni(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Pi(d)}else"increment"in a?c=new Fs(o,a.increment):ie();let l=vt.fromServerFormat(a.fieldPath);return new Qo(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Hr(n,e.update.name),s=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new Kn(l.map(d=>vt.fromServerFormat(d)))}(e.updateMask);return new Tr(i,s,o,t,r)}return new Ls(i,s,t,r)}if(e.delete){let i=Hr(n,e.delete);return new Vs(i,t)}if(e.verify){let i=Hr(n,e.verify);return new oh(i,t)}return ie()}function qW(n,e){return n&&n.length>0?(oe(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?_t(i.updateTime):_t(s);return o.isEqual(ue.min())&&(o=_t(s)),new RI(o,i.transformResults||[])}(t,e))):[]}function xL(n,e){return{documents:[CL(n,e.path)]}}function kL(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=CL(n,i);let s=function(l){if(l.length!==0)return NL(We.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(p){return{field:Qc(p.field),direction:HW(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=LI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function RL(n){let e=DL(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){oe(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){let p=ML(h);return p instanceof We&&lC(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(_){return new Wo(Yc(_.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,bh(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(h){let p=!!h.before,m=h.values||[];return new Kr(m,p)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let p=!h.before,m=h.values||[];return new Kr(m,p)}(t.endAt)),sL(e,i,o,s,a,"F",c,l)}function zW(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ML(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Yc(t.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Yc(t.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Yc(t.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Yc(t.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(n):n.fieldFilter!==void 0?function(t){return Re.create(Yc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return We.create(t.compositeFilter.filters.map(r=>ML(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(n):ie()}function HW(n){return LW[n]}function GW(n){return VW[n]}function WW(n){return jW[n]}function Qc(n){return{fieldPath:n.canonicalString()}}function Yc(n){return vt.fromServerFormat(n.fieldPath)}function NL(n){return n instanceof Re?function(t){if(t.op==="=="){if(BO(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NAN"}};if($O(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(BO(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NOT_NAN"}};if($O(t.value))return{unaryFilter:{field:Qc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Qc(t.field),op:GW(t.op),value:t.value}}}(n):n instanceof We?function(t){let r=t.getFilters().map(i=>NL(i));return r.length===1?r[0]:{compositeFilter:{op:WW(t.op),filters:r}}}(n):ie()}function KW(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function PL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ll=class n{constructor(e,t,r,i,s=ue.min(),o=ue.min(),a=wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Jm=class{constructor(e){this.ct=e}};function QW(n,e){let t;if(e.document)t=AL(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=te.fromSegments(e.noDocument.path),i=Zo(e.noDocument.readTime);t=Rt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{let r=te.fromSegments(e.unknownDocument.path),i=Zo(e.unknownDocument.version);t=Rt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new ct(i[0],i[1]);return ue.fromTimestamp(s)}(e.readTime)),t}function oF(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Xm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:dh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:cl(s,o.version.toTimestamp()),createTime:cl(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yo(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:t.path.toArray(),version:Yo(e.version)}}return r}function Xm(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Zo(n){let e=new ct(n.seconds,n.nanoseconds);return ue.fromTimestamp(e)}function Uo(n,e){let t=(e.baseMutations||[]).map(s=>UI(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>UI(n.ct,s)),i=ct.fromMillis(e.localWriteTimeMs);return new ah(e.batchId,i,t,r)}function Kd(n){let e=Zo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Zo(n.lastLimboFreeSnapshotVersion):ue.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return oe(s.documents.length===1),bn(wl(DL(s.documents[0])))}(n.query):function(s){return bn(RL(s))}(n.query),new ll(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,wt.fromBase64String(n.resumeToken))}function OL(n,e){let t=Yo(e.snapshotVersion),r=Yo(e.lastLimboFreeSnapshotVersion),i;i=Gm(e.target)?xL(n.ct,e.target):kL(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ko(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function pC(n){let e=RL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Km(e,e.limit,"L"):e}function eI(n,e){return new ch(e.largestBatchId,UI(n.ct,e.overlayMutation))}function aF(n,e){let t=e.path.lastSegment();return[n,wn(e.path.popLast()),t]}function cF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Yo(r.readTime),documentKey:wn(r.documentKey.path),largestBatchId:r.largestBatchId}}var $I=class{getBundleMetadata(e,t){return lF(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Zo(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return lF(e).put(function(i){return{bundleId:i.id,createTime:Yo(_t(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return uF(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:pC(s.bundledQuery),readTime:Zo(s.readTime)}}(r)})}saveNamedQuery(e,t){return uF(e).put(function(i){return{name:i.name,readTime:Yo(_t(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function lF(n){return Ut(n,"bundles")}function uF(n){return Ut(n,"namedQueries")}var ey=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return qd(e).get(aF(this.userId,t)).next(r=>r?eI(this.serializer,r):null)}getOverlays(e,t){let r=qr();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new ch(t,o);i.push(this.ht(e,a))}),P.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(wn(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(qd(e).j("collectionPathOverlayIndex",a))}),P.waitFor(s)}getOverlaysForCollection(e,t,r){let i=qr(),s=wn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return qd(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=eI(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=qr(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qd(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let h=eI(this.serializer,l);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return qd(e).put(function(i,s,o){let[a,c,l]=aF(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:hh(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function qd(n){return Ut(n,"documentOverlays")}var BI=class{Pt(e){return Ut(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?wt.fromUint8Array(r):wt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var ki=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ot(e.integerValue));else if("doubleValue"in e){let r=ot(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),th(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Mi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ms(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?ZF(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Oy(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ie()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ot(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),te.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ki.vt=new ki;function YW(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function dF(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=YW(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var qI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=dF(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=dF(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},zI=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},HI=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},$o=class{constructor(){this.jt=new qI,this.Ht=new zI(this.jt),this.Jt=new HI(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Bo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ts(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=hF(n.arrayValue,e.arrayValue),t!==0?t:(t=hF(n.directionalValue,e.directionalValue),t!==0?t:te.comparator(n.documentKey,e.documentKey)))}function hF(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var ty=class{constructor(e){this.Xt=new Ze((t,r)=>vt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(oe(e.collectionGroup===this.collectionId),this.nn)return!1;let t=hI(e);if(t!==void 0&&!this.sn(t))return!1;let r=Vo(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ze(vt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Xc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Xc(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Xc(r.field,r.dir==="asc"?0:1)));return new rl(rl.UNKNOWN_ID,this.collectionId,t,eh.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function FL(n){var e,t;if(oe(n instanceof Re||n instanceof We),n instanceof Re){if(n instanceof Hm){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Re.create(n.field,"==",s)))||[];return We.create(i,"or")}return n}let r=n.filters.map(i=>FL(i));return We.create(r,n.op)}function ZW(n){if(n.getFilters().length===0)return[];let e=KI(FL(n));return oe(LL(e)),GI(e)||WI(e)?[e]:e.getFilters()}function GI(n){return n instanceof Re}function WI(n){return n instanceof We&&lC(n)}function LL(n){return GI(n)||WI(n)||function(t){if(t instanceof We&&wI(t)){for(let r of t.getFilters())if(!GI(r)&&!WI(r))return!1;return!0}return!1}(n)}function KI(n){if(oe(n instanceof Re||n instanceof We),n instanceof Re)return n;if(n.filters.length===1)return KI(n.filters[0]);let e=n.filters.map(r=>KI(r)),t=We.create(e,n.op);return t=ny(t),LL(t)?t:(oe(t instanceof We),oe(sl(t)),oe(t.filters.length>1),t.filters.reduce((r,i)=>gC(r,i)))}function gC(n,e){let t;return oe(n instanceof Re||n instanceof We),oe(e instanceof Re||e instanceof We),t=n instanceof Re?e instanceof Re?function(i,s){return We.create([i,s],"and")}(n,e):fF(n,e):e instanceof Re?fF(e,n):function(i,s){if(oe(i.filters.length>0&&s.filters.length>0),sl(i)&&sl(s))return nL(i,s.getFilters());let o=wI(i)?i:s,a=wI(i)?s:i,c=o.filters.map(l=>gC(l,a));return We.create(c,"or")}(n,e),ny(t)}function fF(n,e){if(sl(e))return nL(e,n.getFilters());{let t=e.filters.map(r=>gC(n,r));return We.create(t,"or")}}function ny(n){if(oe(n instanceof Re||n instanceof We),n instanceof Re)return n;let e=n.getFilters();if(e.length===1)return ny(e[0]);if(eL(n))return n;let t=e.map(i=>ny(i)),r=[];return t.forEach(i=>{i instanceof Re?r.push(i):i instanceof We&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:We.create(r,n.op)}var QI=class{constructor(){this.un=new fh}addToCollectionParentIndex(e,t){return this.un.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(ar.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},fh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ze(Fe.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Fe.comparator)).toArray()}};var Am=new Uint8Array(0),YI=class{constructor(e,t){this.databaseId=t,this.cn=new fh,this.ln=new Qr(r=>Ko(r),(r,i)=>Eh(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:wn(i)};return pF(e).put(s)}return P.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[jF(t),""],!1,!0);return pF(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Br(o.parent))}return r})}addFieldIndex(e,t){let r=zd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Hc(e);return s.next(a=>{o.put(cF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=zd(e),i=Hc(e),s=zc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=zd(e),r=zc(e),i=Hc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return P.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new ty(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=zc(e),i=!0,s=new Map;return P.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=ve(),a=[];return P.forEach(s,(c,l)=>{H("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map($=>`${$.fieldPath}:${$.kind}`).join(",")}`}(c)} to execute ${Ko(t)}`);let d=function(V,$){let W=hI($);if(W===void 0)return null;for(let K of Wm(V,W.fieldPath))switch(K.op){case"array-contains-any":return K.value.arrayValue.values||[];case"array-contains":return[K.value]}return null}(l,c),h=function(V,$){let W=new Map;for(let K of Vo($))for(let C of Wm(V,K.fieldPath))switch(C.op){case"==":case"in":W.set(K.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return W.set(K.fieldPath.canonicalString(),C.value),Array.from(W.values())}return null}(l,c),p=function(V,$){let W=[],K=!0;for(let C of Vo($)){let w=C.kind===0?WO(V,C.fieldPath,V.startAt):KO(V,C.fieldPath,V.startAt);W.push(w.value),K&&(K=w.inclusive)}return new Kr(W,K)}(l,c),m=function(V,$){let W=[],K=!0;for(let C of Vo($)){let w=C.kind===0?KO(V,C.fieldPath,V.endAt):WO(V,C.fieldPath,V.endAt);W.push(w.value),K&&(K=w.inclusive)}return new Kr(W,K)}(l,c),_=this.In(c,l,p),b=this.In(c,l,m),E=this.Tn(c,l,h),k=this.En(c.indexId,d,_,p.inclusive,b,m.inclusive,E);return P.forEach(k,L=>r.G(L,t.limit).next(V=>{V.forEach($=>{let W=te.fromSegments($.documentKey);o.has(W)||(o=o.add(W),a.push(W))})}))}).next(()=>a)}return P.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=ZW(We.create(e.filters,"and")).map(r=>xI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),d=[];for(let h=0;h<c;++h){let p=t?this.dn(t[h/l]):Am,m=this.An(e,p,r[h%l],i),_=this.Rn(e,p,s[h%l],o),b=a.map(E=>this.An(e,p,E,!0));d.push(...this.createRange(m,_,b))}return d}An(e,t,r,i){let s=new Bo(e,te.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new Bo(e,te.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new ty(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return P.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ze(vt.comparator),d=!1;for(let h of c.filters)for(let p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:l=l.add(p.field));for(let h of c.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new $o;for(let i of Vo(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);ki.vt.It(s,o)}return r.zt()}dn(e){let t=new $o;return ki.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new $o;return ki.vt.It(Go(this.databaseId,t),r.Yt(function(s){let o=Vo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new $o);let s=0;for(let o of Vo(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&sh(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);ki.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new $o;c.seed(a.zt()),ki.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Re&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=zd(e),i=Hc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return P.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,h){let p=h?new eh(h.sequenceNumber,new ar(Zo(h.readTime),new te(Br(h.documentKey)),h.largestBatchId)):eh.empty(),m=d.fields.map(([_,b])=>new Xc(vt.fromServerFormat(_),b));return new rl(d.indexId,d.collectionGroup,m,p)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ge(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=zd(e),s=Hc(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>P.forEach(a,c=>s.put(cF(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return P.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?P.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),P.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(s,c);return l.isEqual(d)?P.resolve():this.bn(e,s,c,l,d)}))))})}Dn(e,t,r,i){return zc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return zc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=zc(e),s=new Ze(Ts);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Bo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Ze(Ts),i=this.Vn(t,e);if(i==null)return r;let s=hI(t);if(s!=null){let o=e.data.field(s.fieldPath);if(sh(o))for(let a of o.arrayValue.values||[])r=r.add(new Bo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Bo(t.indexId,e.key,Am,i));return r}bn(e,t,r,i,s){H("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,d,h,p){let m=c.getIterator(),_=l.getIterator(),b=qc(m),E=qc(_);for(;b||E;){let k=!1,L=!1;if(b&&E){let V=d(b,E);V<0?L=!0:V>0&&(k=!0)}else b!=null?L=!0:k=!0;k?(h(E),E=qc(_)):L?(p(b),b=qc(m)):(b=qc(m),E=qc(_))}}(i,s,Ts,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),P.waitFor(o)}yn(e){let t=1;return Hc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ts(o,a)).filter((o,a,c)=>!a||Ts(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Ts(o,e),c=Ts(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Am,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Am,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return Ts(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(gF)}getMinOffset(e,t){return P.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ie())).next(gF)}};function pF(n){return Ut(n,"collectionParents")}function zc(n){return Ut(n,"indexEntries")}function zd(n){return Ut(n,"indexConfiguration")}function Hc(n){return Ut(n,"indexState")}function gF(n){oe(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;sC(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ar(e.readTime,e.documentKey,t)}var mF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},or=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function VL(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(c.next(()=>{oe(a===1)}));let l=[];for(let d of t.mutations){let h=HF(e,d.key.path,t.batchId);s.push(i.delete(h)),l.push(d.key)}return P.waitFor(s).next(()=>l)}function ry(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ie();e=n.noDocument}return JSON.stringify(e).length}or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(41943040,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);var iy=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){oe(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cs(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=Zc(e),o=Cs(e);return o.add({}).next(a=>{oe(typeof a=="number");let c=new ah(a,t,r,i),l=function(m,_,b){let E=b.baseMutations.map(L=>hh(m.ct,L)),k=b.mutations.map(L=>hh(m.ct,L));return{userId:_,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:E,mutations:k}}(this.serializer,this.userId,c),d=[],h=new Ze((p,m)=>ge(p.canonicalString(),m.canonicalString()));for(let p of i){let m=HF(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(l)),d.push(s.put(m,rW))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),P.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Cs(e).get(t).next(r=>r?(oe(r.userId===this.userId),Uo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?P.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Cs(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(oe(a.batchId>=r),s=Uo(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Cs(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cs(e).U("userMutationsIndex",t).next(r=>r.map(i=>Uo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Mm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Zc(e).J({range:i},(o,a,c)=>{let[l,d,h]=o,p=Br(d);if(l===this.userId&&t.path.isEqual(p))return Cs(e).get(h).next(m=>{if(!m)throw ie();oe(m.userId===this.userId),s.push(Uo(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(ge),i=[];return t.forEach(s=>{let o=Mm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Zc(e).J({range:a},(l,d,h)=>{let[p,m,_]=l,b=Br(m);p===this.userId&&s.path.isEqual(b)?r=r.add(_):h.done()});i.push(c)}),P.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=Mm(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ze(ge);return Zc(e).J({range:o},(c,l,d)=>{let[h,p,m]=c,_=Br(p);h===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Cs(e).get(s).next(o=>{if(o===null)throw ie();oe(o.userId===this.userId),r.push(Uo(this.serializer,o))}))}),P.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return VL(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),P.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return P.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Zc(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Br(s[1]);i.push(c)}else a.done()}).next(()=>{oe(i.length===0)})})}containsKey(e,t){return jL(e,this.userId,t)}Nn(e){return UL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function jL(n,e,t){let r=Mm(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Zc(n).J({range:s,H:!0},(a,c,l)=>{let[d,h,p]=a;d===e&&h===i&&(o=!0),l.done()}).next(()=>o)}function Cs(n){return Ut(n,"mutations")}function Zc(n){return Ut(n,"documentMutations")}function UL(n){return Ut(n,"mutationQueues")}var ul=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var ZI=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ul(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ue.fromTimestamp(new ct(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Gc(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(oe(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return Gc(e).J((o,a)=>{let c=Kd(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>P.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Gc(e).J((r,i)=>{let s=Kd(i);t(s)})}qn(e){return yF(e).get("targetGlobalKey").next(t=>(oe(t!==null),t))}Qn(e,t){return yF(e).put("targetGlobalKey",t)}Kn(e,t){return Gc(e).put(OL(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Ko(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Gc(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=Kd(a);Eh(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=Ds(e);return t.forEach(o=>{let a=wn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),P.waitFor(i)}removeMatchingKeys(e,t,r){let i=Ds(e);return P.forEach(t,s=>{let o=wn(s.path);return P.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=Ds(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ds(e),s=ve();return i.J({range:r,H:!0},(o,a,c)=>{let l=Br(o[1]),d=new te(l);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=wn(t.path),i=IDBKeyRange.bound([r],[jF(r)],!1,!0),s=0;return Ds(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Gc(e).get(t).next(r=>r?Kd(r):null)}};function Gc(n){return Ut(n,"targets")}function yF(n){return Ut(n,"targetGlobal")}function Ds(n){return Ut(n,"targetDocuments")}function vF([n,e],[t,r]){let i=ge(n,t);return i===0?ge(e,r):i}var JI=class{constructor(e){this.Un=e,this.buffer=new Ze(vF),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();vF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},XI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){H("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){$s(t)?H("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Us(t)}yield this.Hn(3e5)}))}},eT=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return P.resolve(Wn.oe);let r=new JI(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),P.resolve(mF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),mF):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),Wc()<=Ar.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),P.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}};function JW(n,e){return new eT(n,e)}var tT=class{constructor(e,t){this.db=e,this.garbageCollector=JW(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return xm(e,r)}removeReference(e,t,r){return xm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xm(e,t)}nr(e,t){return function(i,s){let o=!1;return UL(i).Y(a=>jL(i,a,s).next(c=>(c&&(o=!0),P.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ue.min()),Ds(e).delete(function(h){return[0,wn(h.path)]}(o))))});i.push(c)}}).next(()=>P.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xm(e,t)}tr(e,t){let r=Ds(e),i,s=Wn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==Wn.oe&&t(new te(Br(i)),s),s=l,i=c):s=Wn.oe}).next(()=>{s!==Wn.oe&&t(new te(Br(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function xm(n,e){return Ds(n).put(function(r,i){return{targetId:0,path:wn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var sy=class{constructor(){this.changes=new Qr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var nT=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Lo(e).put(r)}removeEntry(e,t,r){return Lo(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Xm(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Rt.newInvalidDocument(t);return Lo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hd(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Rt.newInvalidDocument(t)};return Lo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Hd(t))},(i,s)=>{r={document:this.ir(t,s),size:ry(s)}}).next(()=>r)}getEntries(e,t){let r=Ln();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Ln(),i=new it(te.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,ry(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return P.resolve();let i=new Ze(bF);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(Hd(i.first()),Hd(i.last())),o=i.getIterator(),a=o.getNext();return Lo(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{let h=te.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&bF(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(Hd(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Xm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Lo(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=Ln();for(let h of l){let p=this.ir(te.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Th(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Ln(),o=wF(t,r),a=wF(t,ar.max());return Lo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let h=this.ir(te.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new rT(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _F(e).get("remoteDocumentGlobalKey").next(t=>(oe(!!t),t))}rr(e,t){return _F(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=QW(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ue.min())))return r}return Rt.newInvalidDocument(e)}};function $L(n){return new nT(n)}var rT=class extends sy{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Qr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ze((s,o)=>ge(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=oF(this.cr.serializer,o);i=i.add(s.path.popLast());let l=ry(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=oF(this.cr.serializer,o.convertToNoDocument(ue.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),P.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function _F(n){return Ut(n,"remoteDocumentGlobal")}function Lo(n){return Ut(n,"remoteDocumentsV14")}function Hd(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function wF(n,e){let t=e.documentKey.path.toArray();return[n,Xm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bF(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ge(t[s],r[s]),i)return i;return i=ge(t.length,r.length),i||(i=ge(t[t.length-2],r[r.length-2]),i||ge(t[t.length-1],r[r.length-1]))}var iT=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var oy=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Zd(r.mutation,i,Kn.empty(),ct.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=qr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Wd();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=qr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ln(),o=Yd(),a=function(){return Yd()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Tr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Zd(d.mutation,l,d.mutation.getFieldMask(),ct.now())):o.set(l.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var h;return a.set(l,new iT(d,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Yd(),i=new it((o,a)=>o-a),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Kn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let h=(i.get(a.batchId)||ve()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=dL();d.forEach(p=>{if(!s.has(p)){let m=vL(t.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):uC(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(qr()),a=-1,c=s;return o.next(l=>P.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?P.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ve())).next(d=>({batchId:a,changes:uL(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=Wd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Wd();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,c=>{let l=function(h,p){return new Ir(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Rt.newInvalidDocument(d)))});let a=Wd();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Zd(d.mutation,l,Kn.empty(),ct.now()),Th(t,l)&&(a=a.insert(c,l))}),a})}};var sT=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return P.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:_t(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:pC(i.bundledQuery),readTime:_t(i.readTime)}}(t)),P.resolve()}};var oT=class{constructor(){this.overlays=new it(te.comparator),this.Ir=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=qr();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=qr(),s=t.length+1,o=new te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new it((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=qr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=qr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return P.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ch(t,r));let s=this.Ir.get(t);s===void 0&&(s=ve(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var aT=class{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var ph=class{constructor(){this.Tr=new Ze(xt.Er),this.dr=new Ze(xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new xt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new xt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new te(new Fe([])),r=new xt(t,e),i=new xt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new te(new Fe([])),r=new xt(t,e),i=new xt(t,e+1),s=ve();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new xt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},xt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return te.comparator(e.key,t.key)||ge(e.wr,t.wr)}static Ar(e,t){return ge(e.wr,t.wr)||te.comparator(e.key,t.key)}};var cT=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ze(xt.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ah(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,t){return P.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new xt(t,0),i=new xt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(ge);return t.forEach(i=>{let s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;te.isDocumentKey(s)||(s=s.child(""));let o=new xt(new te(s),0),a=new Ze(ge);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),P.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){oe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(t.mutations,i=>{let s=new xt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new xt(t,0),i=this.br.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var lT=class{constructor(e){this.Mr=e,this.docs=function(){return new it(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():Rt.newInvalidDocument(t))}getEntries(e,t){let r=Ln();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rt.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ln(),o=t.path,a=new te(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||sC($F(d),r)<=0||(i.has(d.key)||Th(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ie()}Or(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uT(this)}getSize(e){return P.resolve(this.size)}},uT=class extends sy{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var dT=class{constructor(e){this.persistence=e,this.Nr=new Qr(t=>Ko(t),Eh),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ph,this.targetCount=0,this.kr=ul.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),P.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ul(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Kn(t),P.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Br.containsKey(t))}};var ay=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Wn(0),this.Kr=!1,this.Kr=!0,this.$r=new aT,this.referenceDelegate=e(this),this.Ur=new dT(this),this.indexManager=new QI,this.remoteDocumentCache=function(i){return new lT(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Jm(t),this.Gr=new sT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oT,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new cT(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);let i=new hT(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},hT=class extends Um{constructor(e){super(),this.currentSequenceNumber=e}},cy=class n{constructor(e){this.persistence=e,this.Jr=new ph,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),P.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=te.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return P.or([()=>P.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var fT=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new $m("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LO,{unique:!0}),c.createObjectStore("documentMutations")}(e),EF(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=P.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),EF(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ue.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",LO,{unique:!0});let h=l.store("mutations"),p=d.map(m=>h.put(m));return P.waitFor(p)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:gW});l.createIndex("collectionPathOverlayIndex",mW,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",yW,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:iW});l.createIndex("documentKeyIndex",sW),l.createIndex("collectionGroupIndex",oW)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:dW}).createIndex("sequenceNumberIndex",hW,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:fW}).createIndex("documentKeyIndex",pW,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ry(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>P.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>P.forEach(a,c=>{oe(c.userId===s.userId);let l=Uo(this.serializer,c);return VL(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Fe(o),l=function(h){return[0,wn(h)]}(c);s.push(t.get(l).next(d=>d?P.resolve():(h=>t.put({targetId:0,path:wn(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>P.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:uW});let r=t.store("collectionParents"),i=new fh,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:wn(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Fe(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=Br(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=Kd(i),o=OL(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(h){return h.document?new te(Fe.fromString(h.document.name).popFirst(5)):h.noDocument?te.fromSegments(h.noDocument.path):h.unknownDocument?te.fromSegments(h.unknownDocument.path):ie()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>P.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=$L(this.serializer),s=new ay(cy.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:ve();Uo(this.serializer,c).keys().forEach(h=>d=d.add(h)),a.set(c.userId,d)}),P.forEach(a,(c,l)=>{let d=new kt(l),h=ey.lt(this.serializer,d),p=s.getIndexManager(d),m=iy.lt(d,this.serializer,p,s.referenceDelegate);return new oy(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new nh(t,Wn.oe),c).next()})})}};function EF(n){n.createObjectStore("targetDocuments",{keyPath:cW}).createIndex("documentTargetsIndex",lW,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",aW,{unique:!0}),n.createObjectStore("targetGlobal")}var tI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pT=class n{constructor(e,t,r,i,s,o,a,c,l,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!n.D())throw new z(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tT(this,i),this.Ai=t+"main",this.serializer=new Jm(c),this.Ri=new Rs(this.Ai,this.hi,new fT(this.serializer)),this.$r=new BI,this.Ur=new ZI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=$L(this.serializer),this.Gr=new $I,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&yt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(F.FAILED_PRECONDITION,tI);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Wn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>y(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>y(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>km(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if($s(e))return H("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Gd(e).get("owner").next(t=>P.resolve(this.vi(t)))}Ci(e){return km(e).delete(this.clientId)}Fi(){return y(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Ut(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return P.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?P.resolve(!0):Gd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new z(F.FAILED_PRECONDITION,tI);return!1}}return!(!this.networkEnabled||!this.inForeground)||km(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&H("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return y(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new nh(e,Wn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>km(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return iy.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new YI(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return ey.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){H("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?wW:c===16?_W:c===15?aC:c===14?KF:c===13?WF:c===12?vW:c===11?GF:void ie()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new nh(a,this.Qr?this.Qr.next():Wn.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw yt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new z(F.FAILED_PRECONDITION,BF);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Gd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new z(F.FAILED_PRECONDITION,tI)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gd(e).put("owner",t)}static D(){return Rs.D()}bi(e){let t=Gd(e);return t.get("owner").next(r=>this.vi(r)?(H("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):P.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(yt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Mv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return H("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return yt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){yt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Gd(n){return Ut(n,"owner")}function km(n){return Ut(n,"clientMetadata")}function mC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var gT=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ve(),i=ve();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var mT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var ly=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Mv()?8:qF(Ql())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new mT;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Wc()<=Ar.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Kc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(Wc()<=Ar.DEBUG&&H("QueryEngine","Query:",Kc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Wc()<=Ar.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Kc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(t))):P.resolve())}Yi(e,t){if(QO(t))return P.resolve(null);let r=bn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Km(t,null,"F"),r=bn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ve(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,Km(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return QO(t)||i.isEqual(ue.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?P.resolve(null):(Wc()<=Ar.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Kc(t)),this.rs(e,o,t,UF(i,-1)).next(a=>a))})}ts(e,t){let r=new Ze(cL(e));return t.forEach((i,s)=>{Th(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Wc()<=Ar.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Kc(t)),this.Ji.getDocumentsMatchingQuery(e,t,ar.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var yT=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new it(ge),this._s=new Qr(s=>Ko(s),Eh),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new oy(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function BL(n,e,t,r){return new yT(n,e,t,r)}function qL(n,e){return y(this,null,function*(){let t=ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ve();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function XW(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let h=l.batch,p=h.keys(),m=P.resolve();return p.forEach(_=>{m=m.next(()=>d.getEntry(c,_)).next(b=>{let E=l.docVersions.get(_);oe(E!==null),b.version.compareTo(E)<0&&(h.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),d.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zL(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function eK(n,e){let t=ee(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,h)=>{let p=i.get(h);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(wt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(b,E,k){return b.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(p,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let c=Ln(),l=ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(HL(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(ue.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function HL(n,e,t){let r=ve(),i=ve();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ln();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ue.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function tK(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dl(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new ll(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function hl(n,e,t){return y(this,null,function*(){let r=ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!$s(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function uy(n,e,t){let r=ee(n),i=ue.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let h=ee(c),p=h._s.get(d);return p!==void 0?P.resolve(h.os.get(p)):h.Ur.getTargetData(l,d)}(r,o,bn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ue.min(),t?s:ve())).next(a=>(KL(r,aL(e),a),{documents:a,Ts:s})))}function GL(n,e){let t=ee(n),r=ee(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function WL(n,e){let t=ee(n),r=t.us.get(e)||ue.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,UF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(KL(t,e,i),i))}function KL(n,e,t){let r=n.us.get(e)||ue.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function nK(n,e,t,r){return y(this,null,function*(){let i=ee(n),s=ve(),o=Ln();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(s=s.add(d));let h=e.ds(l);h.setReadTime(e.As(l.metadata.readTime)),o=o.insert(d,h)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield dl(i,function(d){return bn(wl(Fe.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>HL(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function rK(r,i){return y(this,arguments,function*(n,e,t=ve()){let s=yield dl(n,bn(pC(e.bundledQuery))),o=ee(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=_t(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let l=s.withResumeToken(wt.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(l.targetId,l),o.Ur.updateTargetData(a,l).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function IF(n,e){return`firestore_clients_${n}_${e}`}function TF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function nI(n,e){return`firestore_targets_${n}_${e}`}var dy=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new z(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(yt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Jd=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new z(r.error.code,r.error.message))),s?new n(e,r.state,i):(yt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},hy=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=dC();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=zF(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(yt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},vT=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(yt("SharedClientState",`Failed to parse online state: ${e}`),null)}},gh=class{constructor(){this.activeTargetIds=dC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},Xd=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new it(ge),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=IF(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new gh),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(IF(this.persistenceKey,r));if(i){let s=hy.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(nI(this.persistenceKey,e));if(i){let s=Jd.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(nI(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return H("SharedClientState","READ",e,t),t}setItem(e,t){H("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){H("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(H("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void yt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=Wn.oe;if(s!=null)try{let a=JSON.parse(s);oe(typeof a=="number"),o=a}catch(a){yt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Wn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new dy(this.currentUser,e,t,r),s=TF(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=TF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=nI(this.persistenceKey,e),s=new Jd(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return hy.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return dy.Rs(new kt(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return Jd.Rs(i,t)}Ls(e){return vT.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);H("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=dC();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},fy=class{constructor(){this.so=new gh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var _T=class{_o(e){}shutdown(){}};var py=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Rm=null;function rI(){return Rm===null?Rm=function(){return 268435456+Math.round(2147483648*Math.random())}():Rm++,"0x"+Rm.toString(16)}var iK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var wT=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ln="WebChannelConnection",bT=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=rI(),c=this.xo(t,r.toUriEncodedString());H("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(H("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Er("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+_l}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=iK[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=rI();return new Promise((o,a)=>{let c=new QE;c.setWithCredentials(!0),c.listenOnce(YE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Bd.NO_ERROR:let d=c.getResponseJson();H(ln,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Bd.TIMEOUT:H(ln,`RPC '${e}' ${s} timed out`),a(new z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Bd.HTTP_ERROR:let h=c.getStatus();if(H(ln,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let m=p?.error;if(m&&m.status&&m.message){let _=function(E){let k=E.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(k)>=0?k:F.UNKNOWN}(m.status);a(new z(_,m.message))}else a(new z(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new z(F.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{H(ln,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);H(ln,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=rI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=XE(),a=JE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");H(ln,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=o.createWebChannel(d,c),p=!1,m=!1,_=new wT({Io:E=>{m?H(ln,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(H(ln,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),H(ln,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),b=(E,k,L)=>{E.listen(k,V=>{try{L(V)}catch($){setTimeout(()=>{throw $},0)}})};return b(h,Bc.EventType.OPEN,()=>{m||(H(ln,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),b(h,Bc.EventType.CLOSE,()=>{m||(m=!0,H(ln,`RPC '${e}' stream ${i} transport closed`),_.So())}),b(h,Bc.EventType.ERROR,E=>{m||(m=!0,Er(ln,`RPC '${e}' stream ${i} transport errored:`,E),_.So(new z(F.UNAVAILABLE,"The operation could not be completed")))}),b(h,Bc.EventType.MESSAGE,E=>{var k;if(!m){let L=E.data[0];oe(!!L);let V=L,$=V.error||((k=V[0])===null||k===void 0?void 0:k.error);if($){H(ln,`RPC '${e}' stream ${i} received error:`,$);let W=$.status,K=function(I){let D=At[I];if(D!==void 0)return bL(D)}(W),C=$.message;K===void 0&&(K=F.INTERNAL,C="Unknown error status: "+W+" with message "+$.message),m=!0,_.So(new z(K,C)),h.close()}else H(ln,`RPC '${e}' stream ${i} received:`,L),_.bo(L)}}),b(a,ZE.STAT_EVENT,E=>{E.stat===Sm.PROXY?H(ln,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Sm.NOPROXY&&H(ln,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}};function QL(){return typeof window<"u"?window:null}function Fm(){return typeof document<"u"?document:null}function Ch(n){return new FI(n,!0)}var mh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var gy=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new mh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(yt(t.toString()),yt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ET=class extends gy{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=BW(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?_t(o.readTime):ue.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=jI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Gm(c)?{documents:xL(s,c)}:{query:kL(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=IL(s,o.resumeToken);let l=LI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ue.min())>0){a.readTime=cl(s,o.snapshotVersion.toTimestamp());let l=LI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=zW(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=jI(this.serializer),t.removeTarget=e,this.a_(t)}},IT=class extends gy{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return oe(!!e.streamToken),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=qW(e.writeResults,e.commitTime),r=_t(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=jI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>hh(this.serializer,r))};this.a_(t)}};var TT=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,VI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(F.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,VI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},CT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(yt(t),this.D_=!1):H("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var DT=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Bs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=ee(c);l.L_.add(4),yield bl(l),l.q_.set("Unknown"),l.L_.delete(4),yield Dh(l)})}(this))}))}),this.q_=new CT(r,i)}};function Dh(n){return y(this,null,function*(){if(Bs(n))for(let e of n.B_)yield e(!0)})}function bl(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Fy(n,e){let t=ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),_C(t)?vC(t):Il(t).r_()&&yC(t,e))}function fl(n,e){let t=ee(n),r=Il(t);t.N_.delete(e),r.r_()&&YL(t,e),t.N_.size===0&&(r.r_()?r.o_():Bs(t)&&t.q_.set("Unknown"))}function yC(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Il(n).A_(e)}function YL(n,e){n.Q_.xe(e),Il(n).R_(e)}function vC(n){n.Q_=new OI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Il(n).start(),n.q_.v_()}function _C(n){return Bs(n)&&!Il(n).n_()&&n.N_.size>0}function Bs(n){return ee(n).L_.size===0}function ZL(n){n.Q_=void 0}function sK(n){return y(this,null,function*(){n.q_.set("Online")})}function oK(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{yC(n,e)})})}function aK(n,e){return y(this,null,function*(){ZL(n),_C(n)?(n.q_.M_(e),vC(n)):n.q_.set("Unknown")})}function cK(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof Ym&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield my(n,r)}else if(e instanceof tl?n.Q_.Ke(e):e instanceof Qm?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ue.min()))try{let r=yield zL(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(wt.EMPTY_BYTE_STRING,d.snapshotVersion)),YL(s,c);let h=new ll(d.target,c,l,d.sequenceNumber);yC(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){H("RemoteStore","Failed to raise snapshot:",r),yield my(n,r)}})}function my(n,e,t){return y(this,null,function*(){if(!$s(e))throw e;n.L_.add(1),yield bl(n),n.q_.set("Offline"),t||(t=()=>zL(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Dh(n)}))})}function JL(n,e){return e().catch(t=>my(n,t,e))}function El(n){return y(this,null,function*(){let e=ee(n),t=js(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lK(e);)try{let i=yield tK(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,uK(e,i)}catch(i){yield my(e,i)}XL(e)&&eV(e)})}function lK(n){return Bs(n)&&n.O_.length<10}function uK(n,e){n.O_.push(e);let t=js(n);t.r_()&&t.V_&&t.m_(e.mutations)}function XL(n){return Bs(n)&&!js(n).n_()&&n.O_.length>0}function eV(n){js(n).start()}function dK(n){return y(this,null,function*(){js(n).p_()})}function hK(n){return y(this,null,function*(){let e=js(n);for(let t of n.O_)e.m_(t.mutations)})}function fK(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=MI.from(r,e,t);yield JL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield El(n)})}function pK(n,e){return y(this,null,function*(){e&&js(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return wL(o)&&o!==F.ABORTED}(i.code)){let s=r.O_.shift();js(r).s_(),yield JL(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield El(r)}})}(n,e)),XL(n)&&eV(n)})}function CF(n,e){return y(this,null,function*(){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=Bs(t);t.L_.add(3),yield bl(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Dh(t)})}function ST(n,e){return y(this,null,function*(){let t=ee(n);e?(t.L_.delete(2),yield Dh(t)):e||(t.L_.add(2),yield bl(t),t.q_.set("Unknown"))})}function Il(n){return n.K_||(n.K_=function(t,r,i){let s=ee(t);return s.w_(),new ET(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:sK.bind(null,n),Ro:oK.bind(null,n),mo:aK.bind(null,n),d_:cK.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),_C(n)?vC(n):n.q_.set("Unknown")):(yield n.K_.stop(),ZL(n))}))),n.K_}function js(n){return n.U_||(n.U_=function(t,r,i){let s=ee(t);return s.w_(),new IT(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:dK.bind(null,n),mo:pK.bind(null,n),f_:hK.bind(null,n),g_:fK.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield El(n)):(yield n.U_.stop(),n.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var AT=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new jt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Tl(n,e){if(yt("AsyncQueue",`${e}: ${n}`),$s(n))return new z(F.UNAVAILABLE,`${e}: ${n}`);throw n}var yy=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=Wd(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var vy=class{constructor(){this.W_=new it(te.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},pl=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,yy.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var xT=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},kT=class{constructor(){this.queries=DF(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ee(t),s=i.queries;i.queries=DF(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new z(F.ABORTED,"Firestore shutting down"))}};function DF(){return new Qr(n=>oL(n),Ih)}function wC(n,e){return y(this,null,function*(){let t=ee(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new xT,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=Tl(o,`Initialization of query '${Kc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&EC(t)})}function bC(n,e){return y(this,null,function*(){let t=ee(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function gK(n,e){let t=ee(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&EC(t)}function mK(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function EC(n){n.Y_.forEach(e=>{e.next()})}var RT,SF;(SF=RT||(RT={})).ea="default",SF.Cache="cache";var yh=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new pl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=pl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==RT.Cache}};var MT=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var _y=class{constructor(e){this.serializer=e}Es(e){return Hr(this.serializer,e)}ds(e){return e.metadata.exists?AL(this.serializer,e.document,!1):Rt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return _t(e)}},NT=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tV(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Fe.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new _y(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||ve()).add(s);t.set(o,a)}}return t}complete(){return y(this,null,function*(){let e=yield nK(this.localStore,new _y(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield rK(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function tV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var wy=class{constructor(e){this.key=e}},by=class{constructor(e){this.key=e}},Ey=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=cL(e),this.Ra=new yy(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new vy,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let p=i.get(d),m=Th(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),E=!1;p&&m?p.data.isEqual(m.data)?_!==b&&(r.track({type:3,doc:m}),E=!0):this.ga(p,m)||(r.track({type:2,doc:m}),E=!0,(c&&this.Aa(m,c)>0||l&&this.Aa(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),E=!0):p&&!m&&(r.track({type:1,doc:p}),E=!0,(c||l)&&(a=!0)),E&&(m?(o=o.add(m),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,h)=>function(m,_){let b=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return b(m)-b(_)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new pl(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new vy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new by(r))}),this.da.forEach(r=>{e.has(r)||t.push(new wy(r))}),t}ba(e){this.Ta=e.Ts,this.da=ve();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return pl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},PT=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},OT=class{constructor(e){this.key=e,this.va=!1}},FT=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Qr(a=>oL(a),Ih),this.Ma=new Map,this.xa=new Set,this.Oa=new it(te.comparator),this.Na=new Map,this.La=new ph,this.Ba={},this.ka=new Map,this.qa=ul.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function yK(n,e,t=!0){return y(this,null,function*(){let r=Ly(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield nV(r,e,t,!0),i})}function vK(n,e){return y(this,null,function*(){let t=Ly(n);yield nV(t,e,!0,!1)})}function nV(n,e,t,r){return y(this,null,function*(){let i=yield dl(n.localStore,bn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield IC(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Fy(n.remoteStore,i),a})}function IC(n,e,t,r,i){return y(this,null,function*(){n.Ka=(h,p,m)=>function(b,E,k,L){return y(this,null,function*(){let V=E.view.ma(k);V.ns&&(V=yield uy(b.localStore,E.query,!1).then(({documents:C})=>E.view.ma(C,V)));let $=L&&L.targetChanges.get(E.targetId),W=L&&L.targetMismatches.get(E.targetId)!=null,K=E.view.applyChanges(V,b.isPrimaryClient,$,W);return LT(b,E.targetId,K.wa),K.snapshot})}(n,h,p,m);let s=yield uy(n.localStore,e,!0),o=new Ey(e,s.Ts),a=o.ma(s.documents),c=uh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);LT(n,t,l.wa);let d=new PT(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function _K(n,e,t){return y(this,null,function*(){let r=ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ih(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield hl(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&fl(r.remoteStore,i.targetId),gl(r,i.targetId)}).catch(Us))):(gl(r,i.targetId),yield hl(r.localStore,i.targetId,!0))})}function wK(n,e){return y(this,null,function*(){let t=ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),fl(t.remoteStore,r.targetId))})}function bK(n,e,t){return y(this,null,function*(){let r=SC(n);try{let i=yield function(o,a){let c=ee(o),l=ct.now(),d=a.reduce((m,_)=>m.add(_.key),ve()),h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Ln(),b=ve();return c.cs.getEntries(m,d).next(E=>{_=E,_.forEach((k,L)=>{L.isValidDocument()||(b=b.add(k))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,_)).next(E=>{h=E;let k=[];for(let L of a){let V=OW(L,h.get(L.key).overlayedDocument);V!=null&&k.push(new Tr(L.key,V,XF(V.value.mapValue),gt.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,k,a)}).next(E=>{p=E;let k=E.applyToLocalDocumentSet(h,b);return c.documentOverlayCache.saveOverlays(m,E.batchId,k)})}).then(()=>({batchId:p.batchId,changes:uL(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new it(ge)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Li(r,i.changes),yield El(r.remoteStore)}catch(i){let s=Tl(i,"Failed to persist write");t.reject(s)}})}function rV(n,e){return y(this,null,function*(){let t=ee(n);try{let r=yield eK(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?oe(o.va):i.removedDocuments.size>0&&(oe(o.va),o.va=!1))}),yield Li(t,r,e)}catch(r){yield Us(r)}})}function AF(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ee(o);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let p of h.j_)p.Z_(a)&&(l=!0)}),l&&EC(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function EK(n,e,t){return y(this,null,function*(){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new it(te.comparator);o=o.insert(s,Rt.newNoDocument(s,ue.min()));let a=ve().add(s),c=new lh(ue.min(),new Map,new it(ge),o,a);yield rV(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),DC(r)}else yield hl(r.localStore,e,!1).then(()=>gl(r,e,t)).catch(Us)})}function IK(n,e){return y(this,null,function*(){let t=ee(n),r=e.batch.batchId;try{let i=yield XW(t.localStore,e);CC(t,r,null),TC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Li(t,i)}catch(i){yield Us(i)}})}function TK(n,e,t){return y(this,null,function*(){let r=ee(n);try{let i=yield function(o,a){let c=ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(oe(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);CC(r,e,t),TC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Li(r,i)}catch(i){yield Us(i)}})}function CK(n,e){return y(this,null,function*(){let t=ee(n);Bs(t.remoteStore)||H("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=ee(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Tl(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function TC(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function CC(n,e,t){let r=ee(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function gl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||iV(n,r)})}function iV(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(fl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),DC(n))}function LT(n,e,t){for(let r of t)r instanceof wy?(n.La.addReference(r.key,e),DK(n,r)):r instanceof by?(H("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||iV(n,r.key)):ie()}function DK(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(H("SyncEngine","New document in limbo: "+t),n.xa.add(r),DC(n))}function DC(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new te(Fe.fromString(e)),r=n.qa.next();n.Na.set(r,new OT(t)),n.Oa=n.Oa.insert(t,r),Fy(n.remoteStore,new ll(bn(wl(t.path)),r,"TargetPurposeLimboResolution",Wn.oe))}}function Li(n,e,t){return y(this,null,function*(){let r=ee(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=gT.Wi(c.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=ee(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>P.forEach(l,p=>P.forEach(p.$i,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>P.forEach(p.Ui,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!$s(h))throw h;H("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let p=h.targetId;if(!h.fromCache){let m=d.os.get(p),_=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(_);d.os=d.os.insert(p,b)}}})}(r.localStore,s))})}function SK(n,e){return y(this,null,function*(){let t=ee(n);if(!t.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield qL(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new z(F.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Li(t,r.hs)}})}function AK(n,e){let t=ee(n),r=t.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function xK(n,e){return y(this,null,function*(){let t=ee(n),r=yield uy(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&LT(t,e.targetId,i.wa),i})}function kK(n,e){return y(this,null,function*(){let t=ee(n);return WL(t.localStore,e).then(r=>Li(t,r))})}function RK(n,e,t,r){return y(this,null,function*(){let i=ee(n),s=yield function(a,c){let l=ee(a),d=ee(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,c).next(p=>p?l.localDocuments.getDocuments(h,p):P.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield El(i.remoteStore):t==="acknowledged"||t==="rejected"?(CC(i,e,r||null),TC(i,e),function(a,c){ee(ee(a).mutationQueue).On(c)}(i.localStore,e)):ie(),yield Li(i,s)):H("SyncEngine","Cannot apply mutation batch with id: "+e)})}function MK(n,e){return y(this,null,function*(){let t=ee(n);if(Ly(t),SC(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield xF(t,r.toArray());t.Qa=!0,yield ST(t.remoteStore,!0);for(let s of i)Fy(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(gl(t,o),hl(t.localStore,o,!0))),fl(t.remoteStore,o)}),yield i,yield xF(t,r),function(o){let a=ee(o);a.Na.forEach((c,l)=>{fl(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new it(te.comparator)}(t),t.Qa=!1,yield ST(t.remoteStore,!1)}})}function xF(n,e,t){return y(this,null,function*(){let r=ee(n),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield dl(r.localStore,bn(c[0]));for(let l of c){let d=r.Fa.get(l),h=yield xK(r,d);h.snapshot&&s.push(h.snapshot)}}else{let l=yield GL(r.localStore,o);a=yield dl(r.localStore,l),yield IC(r,sV(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function sV(n){return sL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function NK(n){return function(t){return ee(ee(t).persistence).Qi()}(ee(n).localStore)}function PK(n,e,t,r){return y(this,null,function*(){let i=ee(n);if(i.Qa)return void H("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield WL(i.localStore,aL(s[0])),a=lh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",wt.EMPTY_BYTE_STRING);yield Li(i,o,a);break}case"rejected":yield hl(i.localStore,e,!0),gl(i,e,r);break;default:ie()}})}function OK(n,e,t){return y(this,null,function*(){let r=Ly(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){H("SyncEngine","Adding an already active target "+i);continue}let s=yield GL(r.localStore,i),o=yield dl(r.localStore,s);yield IC(r,sV(s),o.targetId,!1,o.resumeToken),Fy(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield hl(r.localStore,i,!1).then(()=>{fl(r.remoteStore,i),gl(r,i)}).catch(Us))}})}function Ly(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=EK.bind(null,e),e.Ca.d_=gK.bind(null,e.eventManager),e.Ca.$a=mK.bind(null,e.eventManager),e}function SC(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=IK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=TK.bind(null,e),e}function FK(n,e,t){let r=ee(n);(function(s,o,a){return y(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,_){let b=ee(m),E=_t(_.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",k=>b.Gr.getBundleMetadata(k,_.id)).then(k=>!!k&&k.createTime.compareTo(E)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(tV(c));let l=new NT(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let p=yield l.la(d);p&&a._updateProgress(p),d=yield o.Ua()}let h=yield l.complete();return yield Li(s,h.Ia,void 0),yield function(m,_){let b=ee(m);return b.persistence.runTransaction("Save bundle","readwrite",E=>b.Gr.saveBundleMetadata(E,_))}(s.localStore,c),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(c){return Er("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var VT=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=Ch(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return BL(this.persistence,new ly,t.initialUser,this.serializer)}Ga(t){return new ay(cy.Zr,this.serializer)}Wa(t){return new fy}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Iy=class n extends VT{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield kv(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield SC(this.Ja.syncEngine),yield El(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return BL(this.persistence,new ly,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new XI(r,e.asyncQueue,t)}Ha(e,t){let r=new mI(t,this.persistence);return new gI(e.asyncQueue,r)}Ga(e){let t=mC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new pT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,QL(),Fm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new fy}},jT=class n extends Iy{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield kv(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof Xd&&(this.sharedClientState.syncEngine={no:RK.bind(null,t),ro:PK.bind(null,t),io:OK.bind(null,t),Qi:NK.bind(null,t),eo:kK.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>y(this,null,function*(){yield MK(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=QL();if(!Xd.D(t))throw new z(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=mC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xd(t,e.asyncQueue,r,e.clientId,e.initialUser)}},AC=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=SK.bind(null,this.syncEngine),yield ST(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new kT}()}createDatastore(t){let r=Ch(t.databaseInfo.databaseId),i=function(o){return new bT(o)}(t.databaseInfo);return function(o,a,c,l){return new TT(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new DT(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>AF(this.syncEngine,r,0),function(){return py.D()?new py:new _T}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,h){let p=new FT(s,o,a,c,l,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(s){return y(this,null,function*(){let o=ee(s);H("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield bl(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function kF(n,e=10240){let t=0;return{read(){return y(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ml=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):yt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var UT=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new jt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}Ua(){return y(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return y(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new MT(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return y(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return y(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var $T=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return y(this,null,function*(){let o=ee(i),a={documents:s.map(h=>dh(o.serializer,h))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Fe.emptyPath(),a,s.length),l=new Map;c.forEach(h=>{let p=$W(o.serializer,h);l.set(p.key.toString(),p)});let d=[];return s.forEach(h=>{let p=l.get(h.toString());oe(!!p),d.push(p)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=te.fromPath(r);this.mutations.push(new oh(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let s=ee(r),o={writes:i.map(a=>hh(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Fe.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ie();t=ue.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ue.min())?gt.exists(!1):gt.updateTime(t):gt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ue.min()))throw new z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(t)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var BT=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new mh(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>y(this,null,function*(){let e=new $T(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!bh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!wL(t)}return!1}};var qT=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=kt.UNAUTHENTICATED,this.clientId=Vm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){H("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new jt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Tl(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function iI(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield qL(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function RF(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield xC(n);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>CF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>CF(e.remoteStore,i)),n._onlineComponents=e})}function xC(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield iI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Er("Error using user provided cache. Falling back to memory cache: "+t),yield iI(n,new VT)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield iI(n,new VT);return n._offlineComponents})}function Vy(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield RF(n,n._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield RF(n,new AC))),n._onlineComponents})}function oV(n){return xC(n).then(e=>e.persistence)}function kC(n){return xC(n).then(e=>e.localStore)}function aV(n){return Vy(n).then(e=>e.remoteStore)}function RC(n){return Vy(n).then(e=>e.syncEngine)}function LK(n){return Vy(n).then(e=>e.datastore)}function yl(n){return y(this,null,function*(){let e=yield Vy(n),t=e.eventManager;return t.onListen=yK.bind(null,e.syncEngine),t.onUnlisten=_K.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wK.bind(null,e.syncEngine),t})}function VK(n){return n.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield oV(n),t=yield aV(n);return e.setNetworkEnabled(!0),function(i){let s=ee(i);return s.L_.delete(0),Dh(s)}(t)}))}function jK(n){return n.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield oV(n),t=yield aV(n);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let s=ee(i);s.L_.add(0),yield bl(s),s.q_.set("Offline")})}(t)}))}function UK(n,e){let t=new jt;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s,o){return y(this,null,function*(){try{let a=yield function(l,d){let h=ee(l);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new z(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Tl(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield kC(n),e,t)})),t.promise}function cV(n,e,t={}){let r=new jt;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new ml({next:p=>{d.Za(),o.enqueueAndForget(()=>bC(s,h));let m=p.docs.has(a);!m&&p.fromCache?l.reject(new z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new yh(wl(a.path),d,{includeMetadataChanges:!0,_a:!0});return wC(s,h)}(yield yl(n),n.asyncQueue,e,t,r)})),r.promise}function $K(n,e){let t=new jt;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s,o){return y(this,null,function*(){try{let a=yield uy(i,s,!0),c=new Ey(s,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=Tl(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield kC(n),e,t)})),t.promise}function lV(n,e,t={}){let r=new jt;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new ml({next:p=>{d.Za(),o.enqueueAndForget(()=>bC(s,h)),p.fromCache&&c.source==="server"?l.reject(new z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new yh(a,d,{includeMetadataChanges:!0,_a:!0});return wC(s,h)}(yield yl(n),n.asyncQueue,e,t,r)})),r.promise}function BK(n,e){let t=new ml(e);return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s){ee(i).Y_.add(s),s.next()}(yield yl(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s){ee(i).Y_.delete(s)}(yield yl(n),t)}))}}function qK(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?EL().encode(o):o,function(d,h){return new UT(d,h)}(function(d,h){if(d instanceof Uint8Array)return kF(d,h);if(d instanceof ArrayBuffer)return kF(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Ch(e));n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){FK(yield RC(n),i,r)}))}function zK(n,e){return n.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let s=ee(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield kC(n),e)}))}function uV(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var MF=new Map;function MC(n,e,t){if(!t)throw new z(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function NC(n,e,t,r){if(e===!0&&r===!0)throw new z(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NF(n){if(!te.isDocumentKey(n))throw new z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PF(n){if(te.isDocumentKey(n))throw new z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function jy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie()}function Ve(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=jy(n);throw new z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function dV(n,e){if(e<=0)throw new z(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Ty=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}NC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uV((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Jo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ty({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ty(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new sI;switch(r.type){case"firstParty":return new lI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=MF.get(t);r&&(H("ComponentProvider","Removing Datastore"),MF.delete(t),r.terminate())}(this),Promise.resolve()}};function hV(n,e,t,r={}){var i;let s=(n=Ve(n,Jo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=kt.MOCK_USER;else{a=SS(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new kt(l)}n._authCredentials=new oI(new Lm(a,c))}}var Yt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Xe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Gr=class n extends Yt{constructor(e,t,r){super(e,t,wl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function PC(n,e,...t){if(n=at(n),MC("collection","path",e),n instanceof Jo){let r=Fe.fromString(e,...t);return PF(r),new Gr(n,null,r)}{if(!(n instanceof Xe||n instanceof Gr))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Fe.fromString(e,...t));return PF(r),new Gr(n.firestore,null,r)}}function fV(n,e){if(n=Ve(n,Jo),MC("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Yt(n,null,function(r){return new Ir(Fe.emptyPath(),r)}(e))}function Sh(n,e,...t){if(n=at(n),arguments.length===1&&(e=Vm.newId()),MC("doc","path",e),n instanceof Jo){let r=Fe.fromString(e,...t);return NF(r),new Xe(n,null,new te(r))}{if(!(n instanceof Xe||n instanceof Gr))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Fe.fromString(e,...t));return NF(r),new Xe(n.firestore,n instanceof Gr?n.converter:null,new te(r))}}function OC(n,e){return n=at(n),e=at(e),(n instanceof Xe||n instanceof Gr)&&(e instanceof Xe||e instanceof Gr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function FC(n,e){return n=at(n),e=at(e),n instanceof Yt&&e instanceof Yt&&n.firestore===e.firestore&&Ih(n._query,e._query)&&n.converter===e.converter}var Cy=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new mh(this,"async_queue_retry"),this.Vu=()=>{let r=Fm();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Fm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Fm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new jt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!$s(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw yt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=AT.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ie()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function zT(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var HT=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new jt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var pV=-1,lt=class extends Jo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Cy,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Cy(e),this._firestoreClient=void 0,yield e}})}};function Zt(n){if(n._terminated)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gV(n),n._firestoreClient}function gV(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new yI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,uV(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new qT(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function mV(n,e){Er("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return vV(n,AC.provider,{build:r=>new Iy(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function yV(n){return y(this,null,function*(){Er("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();vV(n,AC.provider,{build:t=>new jT(t,e.cacheSizeBytes)})})}function vV(n,e,t){if((n=Ve(n,lt))._firestoreClient||n._terminated)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new z(F.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},gV(n)}function _V(n){if(n._initialized&&!n._terminated)throw new z(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new jt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!Rs.D())return Promise.resolve();let i=r+"main";yield Rs.delete(i)})}(mC(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function wV(n){return function(t){let r=new jt;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return CK(yield RC(t),r)})),r.promise}(Zt(n=Ve(n,lt)))}function bV(n){return VK(Zt(n=Ve(n,lt)))}function EV(n){return jK(Zt(n=Ve(n,lt)))}function IV(n,e){let t=Zt(n=Ve(n,lt)),r=new HT;return qK(t,n._databaseId,e,r),r}function TV(n,e){return zK(Zt(n=Ve(n,lt)),e).then(t=>t?new Yt(n,null,t.query):null)}var Yr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(wt.fromBase64String(e))}catch(t){throw new z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Cr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Oi=class{constructor(e){this._methodName=e}};var Xo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}};var vh=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var HK=/^__.*__$/,GT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ls(e,this.data,t,this.fieldTransforms)}},Dy=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function CV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var Sy=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Ay(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(CV(this.Cu)&&HK.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},WT=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ch(e)}Qu(e,t,r,i=!1){return new Sy({Cu:e,methodName:t,qu:r,path:vt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ra(n){let e=n._freezeSettings(),t=Ch(n._databaseId);return new WT(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Uy(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);jC("Data must be an object, but it was:",o,r);let a=AV(r,o),c,l;if(s.merge)c=new Kn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let p=JT(e,h,t);if(!o.contains(p))throw new z(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);kV(d,p)||d.push(p)}c=new Kn(d),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new GT(new un(a),c,l)}var _h=class n extends Oi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function DV(n,e,t){return new Sy({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var KT=class n extends Oi{_toFieldTransform(e){return new Qo(e.path,new Os)}isEqual(e){return e instanceof n}},QT=class n extends Oi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=DV(this,e,!0),r=this.Ku.map(s=>ia(s,t)),i=new Ni(r);return new Qo(e.path,i)}isEqual(e){return e instanceof n&&Nv(this.Ku,e.Ku)}},YT=class n extends Oi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=DV(this,e,!0),r=this.Ku.map(s=>ia(s,t)),i=new Pi(r);return new Qo(e.path,i)}isEqual(e){return e instanceof n&&Nv(this.Ku,e.Ku)}},ZT=class n extends Oi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Fs(e.serializer,fL(e.serializer,this.$u));return new Qo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function LC(n,e,t,r){let i=n.Qu(1,e,t);jC("Data must be an object, but it was:",i,r);let s=[],o=un.empty();na(r,(c,l)=>{let d=UC(e,c,t);l=at(l);let h=i.Nu(d);if(l instanceof _h)s.push(d);else{let p=ia(l,h);p!=null&&(s.push(d),o.set(d,p))}});let a=new Kn(s);return new Dy(o,a,i.fieldTransforms)}function VC(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[JT(e,r,t)],c=[i];if(s.length%2!=0)throw new z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(JT(e,s[p])),c.push(s[p+1]);let l=[],d=un.empty();for(let p=a.length-1;p>=0;--p)if(!kV(l,a[p])){let m=a[p],_=c[p];_=at(_);let b=o.Nu(m);if(_ instanceof _h)l.push(m);else{let E=ia(_,b);E!=null&&(l.push(m),d.set(m,E))}}let h=new Kn(l);return new Dy(d,h,o.fieldTransforms)}function SV(n,e,t,r=!1){return ia(t,n.Qu(r?4:3,e))}function ia(n,e){if(xV(n=at(n)))return jC("Unsupported field value:",e,n),AV(n,e);if(n instanceof Oi)return function(r,i){if(!CV(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=ia(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return fL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=ct.fromDate(r);return{timestampValue:cl(i.serializer,s)}}if(r instanceof ct){let s=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cl(i.serializer,s)}}if(r instanceof Xo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yr)return{bytesValue:IL(i.serializer,r._byteString)};if(r instanceof Xe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fC(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vh)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return hC(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${jy(r)}`)}(n,e)}function AV(n,e){let t={};return QF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):na(n,(r,i)=>{let s=ia(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function xV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ct||n instanceof Xo||n instanceof Yr||n instanceof Xe||n instanceof Oi||n instanceof vh)}function jC(n,e,t){if(!xV(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=jy(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function JT(n,e,t){if((e=at(e))instanceof Cr)return e._internalPath;if(typeof e=="string")return UC(n,e);throw Ay("Field path arguments must be of type string or ",n,!1,void 0,t)}var GK=new RegExp("[~\\*/\\[\\]]");function UC(n,e,t){if(e.search(GK)>=0)throw Ay(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Cr(...e.split("."))._internalPath}catch{throw Ay(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ay(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new z(F.INVALID_ARGUMENT,a+n+c)}function kV(n,e){return n.some(t=>t.isEqual(e))}var ea=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new XT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field($y("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},XT=class extends ea{data(){return super.data()}};function $y(n,e){return typeof e=="string"?UC(n,e):e instanceof Cr?e._internalPath:e._delegate._internalPath}function RV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var wh=class{},ta=class extends wh{};function Vi(n,e,...t){let r=[];e instanceof wh&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof eC).length,a=s.filter(c=>c instanceof xy).length;if(o>1||o>0&&a>0)throw new z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var xy=class n extends ta{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return $V(e._query,t),new Yt(e.firestore,e.converter,kI(e._query,t))}_parse(e){let t=ra(e.firestore);return function(s,o,a,c,l,d,h){let p;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){FF(h,d);let m=[];for(let _ of h)m.push(OF(c,s,_));p={arrayValue:{values:m}}}else p=OF(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||FF(h,d),p=SV(a,o,h,d==="in"||d==="not-in");return Re.create(l,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function MV(n,e,t){let r=e,i=$y("where",n);return xy._create(i,r,t)}var eC=class n extends wh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:We.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)$V(o,c),o=kI(o,c)}(e._query,t),new Yt(e.firestore,e.converter,kI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var tC=class n extends ta{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wo(s,o)}(e._query,this._field,this._direction);return new Yt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Ir(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function NV(n,e="asc"){let t=e,r=$y("orderBy",n);return tC._create(r,t)}var ky=class n extends ta{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Yt(e.firestore,e.converter,Km(e._query,this._limit,this._limitType))}};function PV(n){return dV("limit",n),ky._create("limit",n,"F")}function OV(n){return dV("limitToLast",n),ky._create("limitToLast",n,"L")}var Ry=class n extends ta{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=UV(e,this.type,this._docOrFields,this._inclusive);return new Yt(e.firestore,e.converter,function(i,s){return new Ir(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function FV(...n){return Ry._create("startAt",n,!0)}function LV(...n){return Ry._create("startAfter",n,!1)}var My=class n extends ta{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=UV(e,this.type,this._docOrFields,this._inclusive);return new Yt(e.firestore,e.converter,function(i,s){return new Ir(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function VV(...n){return My._create("endBefore",n,!1)}function jV(...n){return My._create("endAt",n,!0)}function UV(n,e,t,r){if(t[0]=at(t[0]),t[0]instanceof ea)return function(s,o,a,c,l){if(!c)throw new z(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of el(s))if(h.field.isKeyField())d.push(Go(o,c.key));else{let p=c.data.field(h.field);if(Py(p))throw new z(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let m=h.field.canonicalString();throw new z(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Kr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ra(n.firestore);return function(o,a,c,l,d,h){let p=o.explicitOrderBy;if(d.length>p.length)throw new z(F.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let _=0;_<d.length;_++){let b=d[_];if(p[_].field.isKeyField()){if(typeof b!="string")throw new z(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!uC(o)&&b.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let E=o.path.child(Fe.fromString(b));if(!te.isDocumentKey(E))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);let k=new te(E);m.push(Go(a,k))}else{let E=SV(c,l,b);m.push(E)}}return new Kr(m,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function OF(n,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uC(e)&&t.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Fe.fromString(t));if(!te.isDocumentKey(r))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Go(n,new te(r))}if(t instanceof Xe)return Go(n,t._key);throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jy(t)}.`)}function FF(n,e){if(!Array.isArray(n)||n.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $V(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var vl=class{convertValue(e,t="none"){switch(Ho(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ms(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return na(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ot(o.doubleValue));return new vh(s)}convertGeoPoint(e){return new Xo(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=cC(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(rh(e));default:return null}}convertTimestamp(e){let t=Mi(e);return new ct(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Fe.fromString(e);oe(PL(r));let i=new Ns(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(t)||yt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function By(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var nC=class extends vl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,t)}};var Ri=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cr=class extends ea{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new xs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field($y("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},xs=class extends cr{data(e={}){return super.data(e)}},Dr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ri(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new xs(this._firestore,this._userDataWriter,r.key,r,new Ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new xs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new xs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ri(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:WK(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function WK(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function $C(n,e){return n instanceof cr&&e instanceof cr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Dr&&e instanceof Dr&&n._firestore===e._firestore&&FC(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function BV(n){n=Ve(n,Xe);let e=Ve(n.firestore,lt);return cV(Zt(e),n._key).then(t=>HC(e,n,t))}var Fi=class extends vl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,t)}};function qV(n){n=Ve(n,Xe);let e=Ve(n.firestore,lt),t=Zt(e),r=new Fi(e);return UK(t,n._key).then(i=>new cr(e,r,n._key,i,new Ri(i!==null&&i.hasLocalMutations,!0),n.converter))}function zV(n){n=Ve(n,Xe);let e=Ve(n.firestore,lt);return cV(Zt(e),n._key,{source:"server"}).then(t=>HC(e,n,t))}function HV(n){n=Ve(n,Yt);let e=Ve(n.firestore,lt),t=Zt(e),r=new Fi(e);return RV(n._query),lV(t,n._query).then(i=>new Dr(e,r,n,i))}function GV(n){n=Ve(n,Yt);let e=Ve(n.firestore,lt),t=Zt(e),r=new Fi(e);return $K(t,n._query).then(i=>new Dr(e,r,n,i))}function WV(n){n=Ve(n,Yt);let e=Ve(n.firestore,lt),t=Zt(e),r=new Fi(e);return lV(t,n._query,{source:"server"}).then(i=>new Dr(e,r,n,i))}function BC(n,e,t){n=Ve(n,Xe);let r=Ve(n.firestore,lt),i=By(n.converter,e,t);return Cl(r,[Uy(ra(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,gt.none())])}function qC(n,e,t,...r){n=Ve(n,Xe);let i=Ve(n.firestore,lt),s=ra(i),o;return o=typeof(e=at(e))=="string"||e instanceof Cr?VC(s,"updateDoc",n._key,e,t,r):LC(s,"updateDoc",n._key,e),Cl(i,[o.toMutation(n._key,gt.exists(!0))])}function KV(n){return Cl(Ve(n.firestore,lt),[new Vs(n._key,gt.none())])}function QV(n,e){let t=Ve(n.firestore,lt),r=Sh(n),i=By(n.converter,e);return Cl(t,[Uy(ra(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function zC(n,...e){var t,r,i;n=at(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||zT(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(zT(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,d;if(n instanceof Xe)l=Ve(n.firestore,lt),d=wl(n._key.path),c={next:h=>{e[o]&&e[o](HC(l,n,h))},error:e[o+1],complete:e[o+2]};else{let h=Ve(n,Yt);l=Ve(h.firestore,lt),d=h._query;let p=new Fi(l);c={next:m=>{e[o]&&e[o](new Dr(l,p,h,m))},error:e[o+1],complete:e[o+2]},RV(n._query)}return function(p,m,_,b){let E=new ml(b),k=new yh(m,E,_);return p.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return wC(yield yl(p),k)})),()=>{E.Za(),p.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return bC(yield yl(p),k)}))}}(Zt(l),d,a,c)}function YV(n,e){return BK(Zt(n=Ve(n,lt)),zT(e)?e:{next:e})}function Cl(n,e){return function(r,i){let s=new jt;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return bK(yield RC(r),i,s)})),s.promise}(Zt(n),e)}function HC(n,e,t){let r=t.docs.get(e._key),i=new Fi(n);return new cr(n,i,e._key,r,new Ri(t.hasPendingWrites,t.fromCache),e.converter)}var KK={maxAttempts:5};var Ny=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ra(e)}set(e,t,r){this._verifyNotCommitted();let i=Ss(e,this._firestore),s=By(i.converter,t,r),o=Uy(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,gt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=Ss(e,this._firestore),o;return o=typeof(t=at(t))=="string"||t instanceof Cr?VC(this._dataReader,"WriteBatch.update",s._key,t,r,i):LC(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ss(e,this._firestore);return this._mutations=this._mutations.concat(new Vs(t._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ss(n,e){if((n=at(n)).firestore!==e)throw new z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var rC=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ra(t)}get(t){let r=Ss(t,this._firestore),i=new nC(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return ie();let o=s[0];if(o.isFoundDocument())return new ea(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new ea(this._firestore,i,r._key,null,r.converter);throw ie()})}set(t,r,i){let s=Ss(t,this._firestore),o=By(s.converter,r,i),a=Uy(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=Ss(t,this._firestore),a;return a=typeof(r=at(r))=="string"||r instanceof Cr?VC(this._dataReader,"Transaction.update",o._key,r,i,s):LC(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=Ss(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ss(e,this._firestore),r=new Fi(this._firestore);return super.get(e).then(i=>new cr(this._firestore,r,t._key,i._document,new Ri(!1,!1),t.converter))}};function ZV(n,e,t){n=Ve(n,lt);let r=Object.assign(Object.assign({},KK),t);return function(s){if(s.maxAttempts<1)throw new z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new jt;return s.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let l=yield LK(s);new BT(s.asyncQueue,l,a,o,c).au()})),c.promise}(Zt(n),i=>e(new rC(n,i)),r)}function JV(){return new _h("deleteField")}function XV(){return new KT("serverTimestamp")}function ej(...n){return new QT("arrayUnion",n)}function tj(...n){return new YT("arrayRemove",n)}function qy(n){return new ZT("increment",n)}(function(e,t=!0){(function(i){_l=i})(kS),Yl(new Ks("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new lt(new aI(r.getProvider("auth-internal")),new dI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ns(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qi(PO,"4.7.3",e),qi(PO,"4.7.3","esm2017")})();var QK="firebase",YK="10.14.1";qi(QK,YK,"app");var ZK=(n,e)=>{let t=e?[e]:RS(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},sa=class{constructor(){return ZK(JK)}},JK="app-check";function GC(){}var zy=class{zone;delegate;constructor(e,t=Zv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},WC=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",GC,{},GC,GC)),t.pipe(Et({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Hy=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new zy(Zone.current)),this.insideAngular=t.run(()=>new zy(Zone.current,Ia)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(q(Ie))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function XK(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Vn(n){return e7(XK())(n)}function e7(n){return function(t){return t=t.lift(new WC(n.ngZone)),t.pipe(dr(n.outsideAngular),Qn(n.insideAngular))}}var t7=new Map,n7={activated:!1,tokenObservers:[]},r7={initialized:!1,enabled:!1};function Sr(n){return t7.get(n)||Object.assign({},n7)}function aj(){return r7}var i7="https://content-firebaseappcheck.googleapis.com/v1";var s7="exchangeDebugToken",rj={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Uue=24*60*60*1e3;var QC=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Rv,this.pending.promise.catch(t=>{}),yield o7(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Rv,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function o7(n){return new Promise(e=>{setTimeout(e,n)})}var a7={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},qs=new xS("appCheck","AppCheck",a7);function cj(n){if(!Sr(n).activated)throw qs.create("use-before-activation",{appName:n.name})}function lj(r,i){return y(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw qs.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw qs.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw qs.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw qs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(d[1])*1e3,p=Date.now();return{token:l.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}})}function uj(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${i7}/projects/${t}/apps/${r}:${s7}?key=${i}`,body:{debug_token:e}}}var c7="firebase-app-check-database",l7=1,YC="firebase-app-check-store";var Gy=null;function u7(){return Gy||(Gy=new Promise((n,e)=>{try{let t=indexedDB.open(c7,l7);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(qs.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(YC,{keyPath:"compositeKey"})}}}catch(t){e(qs.create("storage-open",{originalErrorMessage:t?.message}))}}),Gy)}function d7(n,e){return h7(f7(n),e)}function h7(n,e){return y(this,null,function*(){let r=(yield u7()).transaction(YC,"readwrite"),s=r.objectStore(YC).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(qs.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function f7(n){return`${n.options.appId}-${n.name}`}var ZC=new Zh("@firebase/app-check");function KC(n,e){return Yh()?d7(n,e).catch(t=>{ZC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function dj(){return aj().enabled}function hj(){return y(this,null,function*(){let n=aj();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var p7={error:"UNKNOWN_ERROR"};function g7(n){return DS.encodeString(JSON.stringify(n),!1)}function JC(n,e=!1){return y(this,null,function*(){let t=n.app;cj(t);let r=Sr(t),i=r.token,s;if(i&&!Ah(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Ah(c)?i=c:yield KC(t,void 0))}if(!e&&i&&Ah(i))return{token:i.token};let o=!1;if(dj()){r.exchangeTokenPromise||(r.exchangeTokenPromise=lj(uj(t,yield hj()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield KC(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Sr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?ZC.warn(c.message):ZC.error(c),s=c}let a;return i?s?Ah(i)?a={token:i.token,internalError:s}:a=sj(s):(a={token:i.token},r.token=i,yield KC(t,i)):a=sj(s),o&&_7(t,a),a})}function m7(n){return y(this,null,function*(){let e=n.app;cj(e);let{provider:t}=Sr(e);if(dj()){let r=yield hj(),{token:i}=yield lj(uj(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function y7(n,e,t,r){let{app:i}=n,s=Sr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Ah(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),ij(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>ij(n))}function fj(n,e){let t=Sr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ij(n){let{app:e}=n,t=Sr(e),r=t.tokenRefresher;r||(r=v7(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function v7(n){let{app:e}=n;return new QC(()=>y(this,null,function*(){let t=Sr(e),r;if(t.token?r=yield JC(n,!0):r=yield JC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Sr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rj.RETRIAL_MIN_WAIT,rj.RETRIAL_MAX_WAIT)}function _7(n,e){let t=Sr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ah(n){return n.expireTimeMillis-Date.now()>0}function sj(n){return{token:g7(p7),error:n}}var XC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Sr(this.app);for(let t of e)fj(this.app,t.next);return Promise.resolve()}};function w7(n,e){return new XC(n,e)}function b7(n){return{getToken:e=>JC(n,e),getLimitedUseToken:()=>m7(n),addTokenListener:e=>y7(n,"INTERNAL",e),removeTokenListener:e=>fj(n.app,e)}}var E7="@firebase/app-check",I7="0.8.8";var T7="app-check",oj="app-check-internal";function C7(){Yl(new Ks(T7,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return w7(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(oj).initialize()})),Yl(new Ks(oj,n=>{let e=n.getProvider("app-check").getImmediate();return b7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),qi(E7,I7)}C7();var D7=["localhost","0.0.0.0","127.0.0.1"],Jue=typeof window<"u"&&D7.includes(window.location.hostname);var S7="firebase",A7="10.14.1";xr.registerVersion(S7,A7,"app-compat");var x7=["ngOnDestroy"],mj=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(x7.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let h=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,h),h})})})});var eD=class{constructor(e){return e}},Dl=new J("angularfire2.app.options"),Wy=new J("angularfire2.app.name");function Ky(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=xr.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>xr.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;k7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new eD(o)}var k7=(n,...e)=>{I0()&&typeof console<"u"&&console[n](...e)};function Qy(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return R7(i,o)||(gj("error",`${e} was already initialized on the ${t} Firebase App with different settings.${M7?" You may need to reload as Firebase is not HMR aware.":""}`),gj("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function R7(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var M7=typeof module<"u"&&!!module.hot,gj=(n,...e)=>{I0()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var tD=new J("angularfire2.auth.use-emulator"),nD=new J("angularfire2.auth.settings"),rD=new J("angularfire2.auth.tenant-id"),iD=new J("angularfire2.auth.langugage-code"),sD=new J("angularfire2.auth.use-device-language"),oD=new J("angularfire.auth.persistence"),aD=(n,e,t,r,i,s,o,a)=>Qy(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]),yj=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,d,h,p,m){let _=new He,b=ce(void 0).pipe(Qn(o.outsideAngular),Je(()=>s.runOutsideAngular(()=>import("./chunk-NLQML6YK.js"))),ae(()=>Ky(t,s,r)),ae(E=>aD(E,s,a,l,d,h,c,p)),Sa({bufferSize:1,refCount:!1}));if(ps(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ce(null);else{b.pipe(Un()).subscribe();let E=b.pipe(Je(V=>V.getRedirectResult().then($=>$,()=>null)),Vn,Sa({bufferSize:1,refCount:!1})),k=b.pipe(Je(V=>new ye($=>({unsubscribe:s.runOutsideAngular(()=>V.onAuthStateChanged(W=>$.next(W),W=>$.error(W),()=>$.complete()))})))),L=b.pipe(Je(V=>new ye($=>({unsubscribe:s.runOutsideAngular(()=>V.onIdTokenChanged(W=>$.next(W),W=>$.error(W),()=>$.complete()))}))));this.authState=E.pipe(Rf(k),dr(o.outsideAngular),Qn(o.insideAngular)),this.user=E.pipe(Rf(L),dr(o.outsideAngular),Qn(o.insideAngular)),this.idToken=this.user.pipe(Je(V=>V?Me(V.getIdToken()):ce(null))),this.idTokenResult=this.user.pipe(Je(V=>V?Me(V.getIdTokenResult()):ce(null))),this.credential=ru(E,_,this.authState.pipe(Nt(V=>!V))).pipe(ae(V=>V?.user?V:null),dr(o.outsideAngular),Qn(o.insideAngular))}return mj(this,b,s,{spy:{apply:(E,k,L)=>{(E.startsWith("signIn")||E.startsWith("createUser"))&&L.then(V=>_.next(V))}}})}static \u0275fac=function(r){return new(r||n)(q(Dl),q(Wy,8),q(Wt),q(Ie),q(Hy),q(tD,8),q(nD,8),q(rD,8),q(iD,8),q(sD,8),q(oD,8),q(sa,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var O7="@firebase/firestore-compat",F7="0.3.38";function fD(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new z("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function vj(){if(typeof Uint8Array>"u")throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function _j(){if(!YF())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Yy=class n{constructor(e){this._delegate=e}static fromBase64String(e){return _j(),new n(Yr.fromBase64String(e))}static fromUint8Array(e){return vj(),new n(Yr.fromUint8Array(e))}toBase64(){return _j(),this._delegate.toBase64()}toUint8Array(){return vj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function cD(n){return L7(n,["next","error","complete"])}function L7(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var lD=class{enableIndexedDbPersistence(e,t){return mV(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return yV(e._delegate)}clearIndexedDbPersistence(e){return _V(e._delegate)}},Zy=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ns||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Er("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){hV(this._delegate,e,t,r)}enableNetwork(){return bV(this._delegate)}disableNetwork(){return EV(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,NC("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return wV(this._delegate)}onSnapshotsInSync(e){return YV(this._delegate,e)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xl(this,PC(this._delegate,e))}catch(t){throw En(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zr(this,Sh(this._delegate,e))}catch(t){throw En(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new la(this,fV(this._delegate,e))}catch(t){throw En(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return ZV(this._delegate,t=>e(new Jy(this,t)))}batch(){return Zt(this._delegate),new Xy(new Ny(this._delegate,e=>Cl(this._delegate,e)))}loadBundle(e){return IV(this._delegate,e)}namedQuery(e){return TV(this._delegate,e).then(t=>t?new la(this,t):null)}},Sl=class extends vl{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yy(new Yr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Zr.forKey(t,this.firestore,null)}};function V7(n){LF(n)}var Jy=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Sl(e)}get(e){let t=oa(e);return this._delegate.get(t).then(r=>new aa(this._firestore,new cr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=oa(e);return r?(fD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=oa(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=oa(e);return this._delegate.delete(t),this}},Xy=class{constructor(e){this._delegate=e}set(e,t,r){let i=oa(e);return r?(fD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=oa(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=oa(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Al=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new xs(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ca(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new Sl(e),t),i.set(t,s)),s}};Al.INSTANCES=new WeakMap;var Zr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sl(e)}static forPath(e,t,r){if(e.length%2!==0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Xe(t._delegate,r,new te(e)))}static forKey(e,t,r){return new n(t,new Xe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new xl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xl(this.firestore,PC(this._delegate,e))}catch(t){throw En(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=at(e),e instanceof Xe?OC(this._delegate,e):!1}set(e,t){t=fD("DocumentReference.set",t);try{return t?BC(this._delegate,e,t):BC(this._delegate,e)}catch(r){throw En(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?qC(this._delegate,e):qC(this._delegate,e,t,...r)}catch(i){throw En(i,"updateDoc()","DocumentReference.update()")}}delete(){return KV(this._delegate)}onSnapshot(...e){let t=wj(e),r=bj(e,i=>new aa(this.firestore,new cr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zC(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=qV(this._delegate):e?.source==="server"?t=zV(this._delegate):t=BV(this._delegate),t.then(r=>new aa(this.firestore,new cr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Al.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function En(n,e,t){return n.message=n.message.replace(e,t),n}function wj(n){for(let e of n)if(typeof e=="object"&&!cD(e))return e;return{}}function bj(n,e){var t,r;let i;return cD(n[0])?i=n[0]:cD(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var aa=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $C(this._delegate,e._delegate)}},ca=class extends aa{data(e){let t=this._delegate.data(e);return this._delegate._converter||VF(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},la=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Sl(e)}where(e,t,r){try{return new n(this.firestore,Vi(this._delegate,MV(e,t,r)))}catch(i){throw En(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Vi(this._delegate,NV(e,t)))}catch(r){throw En(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Vi(this._delegate,PV(e)))}catch(t){throw En(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Vi(this._delegate,OV(e)))}catch(t){throw En(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Vi(this._delegate,FV(...e)))}catch(t){throw En(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Vi(this._delegate,LV(...e)))}catch(t){throw En(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Vi(this._delegate,VV(...e)))}catch(t){throw En(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Vi(this._delegate,jV(...e)))}catch(t){throw En(t,"endAt()","Query.endAt()")}}isEqual(e){return FC(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=GV(this._delegate):e?.source==="server"?t=WV(this._delegate):t=HV(this._delegate),t.then(r=>new xh(this.firestore,new Dr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=wj(e),r=bj(e,i=>new xh(this.firestore,new Dr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zC(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Al.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},uD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ca(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},xh=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new la(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ca(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new uD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ca(this._firestore,r))})}isEqual(e){return $C(this._delegate,e._delegate)}},xl=class n extends la{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Zr(this.firestore,e):null}doc(e){try{return e===void 0?new Zr(this.firestore,Sh(this._delegate)):new Zr(this.firestore,Sh(this._delegate,e))}catch(t){throw En(t,"doc()","CollectionReference.doc()")}}add(e){return QV(this._delegate,e).then(t=>new Zr(this.firestore,t))}isEqual(e){return OC(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Al.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function oa(n){return Ve(n,Xe)}var dD=class n{constructor(...e){this._delegate=new Cr(...e)}static documentId(){return new n(vt.keyField().canonicalString())}isEqual(e){return e=at(e),e instanceof Cr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var hD=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=XV();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=JV();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=ej(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=tj(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=qy(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var j7={Firestore:Zy,GeoPoint:Xo,Timestamp:ct,Blob:Yy,Transaction:Jy,WriteBatch:Xy,DocumentReference:Zr,DocumentSnapshot:aa,Query:la,QueryDocumentSnapshot:ca,QuerySnapshot:xh,CollectionReference:xl,FieldPath:dD,FieldValue:hD,setLogLevel:V7,CACHE_SIZE_UNLIMITED:pV};function U7(n,e){n.INTERNAL.registerComponent(new Ks("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},j7)))}function $7(n){U7(n,(e,t)=>new Zy(e,t,new lD)),n.registerVersion(O7,F7)}$7(xr);function B7(n,e=Ia){return new ye(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Ej(n,e){return B7(n,e)}function q7(n,e){return Ej(n,e).pipe(ai(void 0),ou(),ae(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function mD(n,e){return Ej(n,e).pipe(ae(t=>({payload:t,type:"query"})))}var ev=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=Cj(r,t);return new nv(i,s,this.afs)}snapshotChanges(){return q7(this.ref,this.afs.schedulers.outsideAngular).pipe(Vn)}valueChanges(e={}){return this.snapshotChanges().pipe(ae(({payload:t})=>e.idField?ne(N({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Me(this.ref.get(e)).pipe(Vn)}};function tv(n,e){return mD(n,e).pipe(ai(void 0),ou(),ae(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(h=>h.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function Ij(n,e,t){return tv(n,t).pipe(Xs((r,i)=>z7(r,i.map(s=>s.payload),e),[]),su(),ae(r=>r.map(i=>({type:i.type,payload:i}))))}function z7(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=H7(n,r))}),n}function pD(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function H7(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return pD(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return pD(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pD(n,e.oldIndex,1);break}return n}function Tj(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var nv=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=tv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(ae(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(ai(void 0),ou(),Nt(([r,i])=>i.length>0||!r),ae(([,r])=>r),Vn)}auditTrail(e){return this.stateChanges(e).pipe(Xs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Tj(e);return Ij(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn)}valueChanges(e={}){return mD(this.query,this.afs.schedulers.outsideAngular).pipe(ae(t=>t.payload.docs.map(r=>e.idField?ne(N({},r.data()),{[e.idField]:r.id}):r.data())),Vn)}get(e){return Me(this.query.get(e)).pipe(Vn)}add(e){return this.ref.add(e)}doc(e){return new ev(this.ref.doc(e),this.afs)}},gD=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?tv(this.query,this.afs.schedulers.outsideAngular).pipe(Vn):tv(this.query,this.afs.schedulers.outsideAngular).pipe(ae(t=>t.filter(r=>e.indexOf(r.type)>-1)),Nt(t=>t.length>0),Vn)}auditTrail(e){return this.stateChanges(e).pipe(Xs((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Tj(e);return Ij(this.query,t,this.afs.schedulers.outsideAngular).pipe(Vn)}valueChanges(e={}){return mD(this.query,this.afs.schedulers.outsideAngular).pipe(ae(r=>r.payload.docs.map(i=>e.idField?N({[e.idField]:i.id},i.data()):i.data())),Vn)}get(e){return Me(this.query.get(e)).pipe(Vn)}},G7=new J("angularfire2.enableFirestorePersistence"),W7=new J("angularfire2.firestore.persistenceSettings"),K7=new J("angularfire2.firestore.settings"),Q7=new J("angularfire2.firestore.use-emulator");function Cj(n,e=t=>t){return{query:e(n),ref:n}}var Dj=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,d,h,p,m,_,b,E,k,L){this.schedulers=c;let V=Ky(t,a,r),$=d;h&&aD(V,a,p,_,b,E,m,k),[this.firestore,this.persistenceEnabled$]=Qy(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let W=a.runOutsideAngular(()=>V.firestore());if(s&&W.settings(s),$&&W.useEmulator(...$),i&&!ps(o)){let K=()=>{try{return Me(W.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(C){return typeof console<"u"&&console.warn(C),ce(!1)}};return[W,a.runOutsideAngular(K)]}else return[W,ce(!1)]},[s,$,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=Cj(i,r),a=this.schedulers.ngZone.run(()=>s);return new nv(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new gD(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new ev(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(q(Dl),q(Wy,8),q(G7,8),q(K7,8),q(Wt),q(Ie),q(Hy),q(W7,8),q(Q7,8),q(yj,8),q(tD,8),q(nD,8),q(rD,8),q(iD,8),q(sD,8),q(oD,8),q(sa,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Sj=(()=>{let e=class e{constructor(r){this.store=r,this.TABLE_NAME="user_speech",this.uuid=WE()}setRecordUid(r){r&&(this.uuid=r)}getRecordUid(){return this.uuid}getRecord(r){return this.store.collection(this.TABLE_NAME).doc(r).valueChanges()}incrementHits(r="Navi"){return y(this,null,function*(){this.store.doc(`${r}/config`).set({numberOfHits:qy(1)},{merge:!0}).catch(i=>console.error("Error incrementing hit counter : ",i))})}saveAppScore(r,i="Navi"){return y(this,null,function*(){r.updated_at=new Date,this.store.doc(`${i}/config`).set(r,{merge:!0}).catch(s=>(console.error("Error upserting : ",s),s))})}getAppdata(r="Navi"){return this.store.doc(`${r}/config`).valueChanges()}saveSpeech(r){return y(this,null,function*(){return r.id=this.uuid,r.updated_at=new Date,this.store.collection(this.TABLE_NAME).doc(this.uuid).set(r,{merge:!0}).then(()=>this.uuid).catch(i=>(console.error("Error upserting : ",i),i.status)),this.uuid})}};e.\u0275fac=function(i){return new(i||e)(q(Dj))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var J7=(n,e)=>({"btn-success pulse-animation":n,"btn-danger":e});function X7(n,e){if(n&1){let t=Lt();x(0,"p"),U(1,"Try saying \u{1F5E3}\uFE0F "),x(2,"span",18),U(3),M(),U(4," or "),x(5,"span",14),U(6),M(),U(7,". Say "),x(8,"span",18),U(9),M(),U(10," to clean the board. "),x(11,"button",19),Se("click",function(){Ue(t);let i=de();return $e(i.toggleListening())}),se(12,"i",20),M(),U(13,"\xA0 "),x(14,"a",21),Se("click",function(){Ue(t);let i=de();return $e(i.copyVoiceSmithLink())}),x(15,"i",22),Se("click",function(){Ue(t);let i=de();return $e(i.copyVoiceSmithLink())}),M(),U(16,"\xA0 "),x(17,"span",23),U(18),M()(),U(19,"\xA0 "),x(20,"a",24),se(21,"i",25),M(),x(22,"span",26),U(23,"Desktop-only / "),x(24,"span",27),U(25,"Mobile-limited"),M()()()}if(n&2){let t=de();j(3),qe(t.START_COMMAND),j(3),qe(t.STOP_COMMAND),j(3),qe(t.CLEAR_COMMAND),j(2),Q("ngClass",Wp(7,J7,t.listening,!t.listening)),j(),Q("ngClass",t.listening?"fa-microphone":"fa-microphone-slash"),j(3),Q("ngClass",t.copied?"fa-solid":"fa-regular"),j(3),qe(t.getRecordUid())}}function eQ(n,e){n&1&&(x(0,"span",29),U(1,"Listening"),M())}function tQ(n,e){n&1&&(x(0,"span",29),U(1,"Stopped"),M())}function nQ(n,e){if(n&1&&(x(0,"p"),U(1,"Transcript will appear in the space below as your host speaks. "),fe(2,eQ,2,0,"span",28)(3,tQ,2,0,"span",28),M()),n&2){let t=de();j(2),Q("ngIf",t.listening),j(),Q("ngIf",!t.listening)}}function rQ(n,e){if(n&1&&(x(0,"span",30),U(1),x(2,"span",13),U(3),M()()),n&2){let t=e.$implicit,r=de();Q("ngClass",r.isLeader(t.key)?"badge badge-border-success":"badge badge-border-danger"),j(),mt("",t.key,"\xA0"),j(2),qe(t.value)}}var rv=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.zone=r,this.witaiService=i,this.messaging=s,this.database=o,this.route=a,this.router=c,this.START_COMMAND="start listening",this.STOP_COMMAND="stop listening",this.CLEAR_COMMAND="clear",this.MAX_SPEECH_TIME=5,this.test_command="start listening",this.fillerWords=["oh","ok","okay","um","uh","it's like","like","you know","basically","actually","so","right","I mean","well","just","er","anyway","now","let me think","haha","bla","really","and","well"],this.probableFillers=["fine","good","awesome"],this.unwantedVerbs=["am","is","are","were","do","did","done","doing","go","going","worked","work","working"],this.listening=!1,this.speaking=!1,this.fullTranscript=`Hi there! \u{1F44B} I am nA'vI
I would love to hear your story.
\u{1F3A4} Tell me something about yourself ..

Say "${this.START_COMMAND}" to begin \u{1F680}`,this.interimTranscript="",this.currentTerm="",this.verbsMap=new Map,this.leaderwordsMap=new Map,this.fillerWordsMap=new Map,this.goodbadwordsMap=new Map,this.sentenseClarity={good:0,bad:0},this.previousTime=0,this.totalWords=0,this.prevSentense="",this.isMobile=!1,this.minutes=this.MAX_SPEECH_TIME,this.seconds=0,this.speechTime="",this.voiceMode=!1,this.copied=!1,this.totalScore=0,this.appData={numberOfHits:0,highestScore:0},this.leadershipWords=["lead","vision","empower","collaborate","adapt","communicate","integrate","mentore","mentor","account","innovate","innovation","resilient","resilience","delegate","resolve","include","strategic","motivate","empower","encourage","impact","growth","deliver","delivering","collaboration"],this.createTimer=()=>{this.timerInterval=setInterval(()=>{this.updateTime()},1e3),this.speechTime=""},this.updateTime=()=>{this.seconds>0?this.seconds--:this.minutes>0?(this.minutes--,this.seconds=59):(console.debug("Time's up!"),this.stopListening()),this.speechTime=`${this.minutes}m ${this.seconds}s`},this.clearTimer=()=>{this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.minutes=this.MAX_SPEECH_TIME,this.seconds=0},this.myTask=()=>{let d=performance.now(),h=d-this.previousTime;h!=d&&h>5,requestAnimationFrame(this.myTask)},this.isMobile=ke.isMobileBrowser();let l=ke.getQueryParam(a,"vid");o.setRecordUid(l),this.initCompromiseNLP(),l?(this.voiceMode=!1,this.fullTranscript="",this.database.getRecord(l).subscribe(d=>{if(d){let h=d.message;this.updateFullText(h)}})):(this.voiceMode=!0,this.initAnnyang())}setStartCommand(r){this.START_COMMAND=r}setStopCommand(r){this.STOP_COMMAND=r}setClearCommand(r){this.CLEAR_COMMAND=r}getRecordUid(){return this.database.getRecordUid().split("-")[0]}getVoiceSmithLink(){return`${le.host}/voicesmith?vid=${this.database.getRecordUid()}`}copyVoiceSmithLink(){return y(this,null,function*(){try{yield navigator.clipboard.writeText(this.getVoiceSmithLink()),this.copied=!0}catch{console.error("Failed to copy the link")}})}isLeader(r){return this.leaderwordsMap.get(r)!=null}analyseClarity(r){return y(this,null,function*(){if(r){let i=r.trim().split(" ").length;i>=5&&i<=20?(this.sentenseClarity.good++,this.totalScore++):this.sentenseClarity.bad++,this.totalWords+=i}})}analyseVerbs(r){return y(this,null,function*(){let i=r.match("#Verb").out("array");return i.forEach(s=>{let o=s.toLowerCase();this.unwantedVerbs.includes(o)||(this.verbsMap.has(o)?this.verbsMap.set(o,this.verbsMap.get(o)+1):this.verbsMap.set(o,1),this.totalScore++)}),i.length})}analyseFillers(r){return y(this,null,function*(){let i=r.lookup(this.fillerWords).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.fillerWordsMap.has(o)?this.fillerWordsMap.set(o,this.fillerWordsMap.get(o)+1):this.fillerWordsMap.set(o,1),this.totalScore=this.totalScore-2,this.goodbadwordsMap.set(o,this.fillerWordsMap.get(o))}),i.length>0})}analyseLeaedershipQualities(r){return y(this,null,function*(){let i=r.compute("root").lookup(this.leadershipWords,{form:"root"}).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.leaderwordsMap.has(o)?this.leaderwordsMap.set(o,this.leaderwordsMap.get(o)+1):this.leaderwordsMap.set(o,1),this.totalScore=this.totalScore+3,this.goodbadwordsMap.set(o,this.leaderwordsMap.get(o))}),i.length})}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"SpeechToText":this.analyseClarity(i.payload);let s=this.nlp(i.payload);this.analyseFillers(s),this.analyseVerbs(s),this.analyseLeaedershipQualities(s),this.voiceMode&&(this.witaiService.getIntent(i.payload).then(o=>{}),this.database.saveSpeech({message:i.payload}));break;default:break}}),this.database.getAppdata().subscribe(r=>{this.appData=r})}initCompromiseNLP(){this.loadExternalScript("https://unpkg.com/compromise").then(()=>{this.nlp=window.nlp,this.nlp&&this.nlp.compile(this.leadershipWords)})}initAnnyang(){this.loadExternalScript("assets/annyang.js").then(()=>{this.initializeSpeechRecognition()})}stopListening(){this.listening&&this.voiceMode&&this.database.saveSpeech({message:this.STOP_COMMAND}),this.listening=!1,this.interimTranscript="",this.clearTimer(),this.totalScore>this.appData.highestScore&&this.database.saveAppScore({highestScore:this.totalScore})}startListening(){this.listening||this.database.incrementHits(),this.fullTranscript="",this.listening=!0,this.clearMaps(),this.createTimer(),this.totalScore=0}clearCommand(){this.fullTranscript="",this.interimTranscript="",this.clearMaps(),this.totalScore=0}toggleListening(){this.listening=!this.listening,this.listening?this.startListening():this.stopListening()}clearMaps(){this.leaderwordsMap.clear(),this.verbsMap.clear(),this.fillerWordsMap.clear(),this.goodbadwordsMap.clear(),this.previousTime=0,this.totalWords=0,this.sentenseClarity={good:0,bad:0},this.timerInterval&&(clearInterval(this.timerInterval),this.speechTime="")}initializeSpeechRecognition(){if(this.annyang=window.annyang,this.annyang){let r={"Stop listening":()=>{this.zone.run(()=>{this.stopListening()})},"Start listening":()=>{this.zone.run(()=>{this.startListening()})},Clear:()=>{this.zone.run(()=>{this.clearCommand()})}};this.annyang.addCallback("result",(i,s,o)=>{if(this.listening){let a=this.previousTime?o-this.previousTime>=300:!1;this.previousTime=o,this.zone.run(()=>{if(this.interimTranscript="",s&&i[0]){if(this.isMobile){let l=i[0].trim();if(this.prevSentense==l)return;this.prevSentense=l}let c=i[0]+(a?". ":" ");this.updateFullText(c)}else this.interimTranscript+=i})}}),this.annyang.addCallback("soundstart",()=>{console.debug("sound detected"),this.zone.run(()=>{this.speaking=!0})}),this.annyang.addCommands(r),this.recognition=this.annyang.getSpeechRecognizer(),this.recognition?(this.recognition.interimResults=!this.isMobile,this.annyang.start({autoRestart:!0,continuous:!0}),console.debug("Speech recognition started")):console.error("Voice is not supported in this browser.")}else console.error("Voice is not supported in this browser.")}loadExternalScript(r){return new Promise((i,s)=>{let o=document.createElement("script");o.src=r,o.type="application/javascript",o.onload=()=>{i()},o.onerror=()=>{s("Script load error")},document.body.appendChild(o)})}updateFullText(r){this.voiceMode?r.includes(this.START_COMMAND)||(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r):r.includes(this.CLEAR_COMMAND)?this.clearCommand():r.includes(this.STOP_COMMAND)?this.stopListening():(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r,this.listening=!0)}};e.\u0275fac=function(i){return new(i||e)(B(Ie),B(kO),B(an),B(Sj),B(Fn),B(_n))},e.\u0275cmp=xe({type:e,selectors:[["app-voice-smith"]],decls:45,vars:16,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-8"],[4,"ngIf"],["id","voice-output"],[1,"float-end"],[1,"fa-regular","fa-clock"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"small"],[1,"badge","badge-border-info"],[1,"badge","text-bg-light"],[1,"badge","badge-border-danger"],[1,"badge","badge-border-primary"],[1,"card-text"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","badge-border-success"],[1,"btn","rounded-circle","justify-content-center","align-items-center",3,"click","ngClass"],[1,"fas",3,"ngClass"],["target","_blank",1,"text-decoration-none",3,"click"],[1,"fa-clipboard",3,"click","ngClass"],[1,"badge","rounded-pill","text-bg-primary"],["href","https://www.merriam-webster.com/word-of-the-day","target","_blank",1,""],[1,"fa-solid","fa-lightbulb",2,"color","#efbc06"],[1,"d-sm-none","badge","badge-border-success"],[1,"text-strike-black"],["class","badge text-bg-primary",4,"ngIf"],[1,"badge","text-bg-primary"],[3,"ngClass"]],template:function(i,s){i&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1),fe(4,X7,26,10,"p",3)(5,nQ,4,2,"p",3),M(),x(6,"div",4),U(7),x(8,"em"),U(9),M()(),x(10,"div",5),U(11),x(12,"span"),U(13),M(),U(14,"\xA0"),se(15,"i",6),U(16,"\xA0"),x(17,"span"),U(18),M()()(),x(19,"div",7)(20,"div",8)(21,"div",9)(22,"h5",10),U(23,"Strength Board : "),x(24,"span",11),U(25),M()(),x(26,"p")(27,"span",12),U(28,"Actions\xA0"),x(29,"span",13),U(30),M()(),U(31," | "),x(32,"span",14),U(33,"Fillers\xA0"),x(34,"span",13),U(35),M()(),U(36," | "),x(37,"span",15),U(38,"Clarity\xA0"),x(39,"span",13),U(40),M()()(),se(41,"hr"),x(42,"div",16),fe(43,rQ,4,3,"span",17),Dt(44,"keyvalue"),M()()()()()()),i&2&&(j(4),Q("ngIf",s.voiceMode),j(),Q("ngIf",!s.voiceMode),j(2),mt("",s.fullTranscript," "),j(2),qe(s.interimTranscript),j(2),Hp("Highest : ",s.appData.highestScore," | Tried : ",s.appData.numberOfHits," | "),j(2),mt("Words : ",s.totalWords,""),j(5),qe(s.speechTime),j(7),qe(s.totalScore),j(5),qe(s.verbsMap.size),j(5),qe(s.fillerWordsMap.size),j(5),Hp("",s.sentenseClarity.good,"/",s.sentenseClarity.bad,""),j(3),Q("ngForOf",Mn(44,14,s.goodbadwordsMap)))},dependencies:[sc,sn,$t,hs],styles:["#voice-output[_ngcontent-%COMP%]{font-size:1.4em;line-height:1.6;border:1px solid #ccc;padding:20px;min-height:200px;background-color:#f9f9f9;margin-top:10px;white-space:pre-wrap}.typing-cursor[_ngcontent-%COMP%]{border-right:2px solid black;animation:_ngcontent-%COMP%_blink 1s steps(1) infinite}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #007bffb3}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 0 #007bffb3}50%{transform:scale(1.1);box-shadow:0 0 10px #00ff7bb3}to{transform:scale(1);box-shadow:0 0 #007bffb3}}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}.badge-border-primary[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-primary);color:var(--bs-primary)!important}.badge-border-danger[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-danger);color:var(--bs-danger)!important}.badge-border-info[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-info);color:var(--bs-info)!important}.text-strike-black[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#000}"]});let n=e;return n})();var yD=(()=>{let e=class e extends sr{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=o,this.homePageContent="Loading..",this.imgLayout="LayoutMix",this.firstHeading=!1,this.firstPara=!1,this.loadNewWidget=!1,this.usersFileAlreadyLoaded=!1}userInitialised(){this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":this.titleService.setTitle(Z.ghUser.name),this.routerFileUrl?this.githubService.getMdFileContent(this.basePath,this.routerFileUrl).then(s=>{this.homePageContent=s,this.usersFileAlreadyLoaded=!0}).catch(s=>this.homePageContent=s).finally(()=>{this.usersFileAlreadyLoaded||(Z.YOUR_READ_ME?this.homePageContent=Z.YOUR_READ_ME:this.githubService.getInstalledAccessToken()?this.githubService.getInstalledContent(Z.ghUserLoaded).then(s=>{this.homePageContent=s}):this.githubService.getReadMeContent(Z.ghUserLoaded).then(s=>{this.homePageContent=s}).catch(s=>{console.log(Z.ghUserLoaded+" not available")}))}):this.githubService.getMdFileContent(Z.ghUserLoaded,"README.md").then(s=>{this.homePageContent=s}).catch(s=>{console.log(Z.ghUserLoaded+" not available")});break;case"UserDirectory":break;default:break}})}ngAfterViewInit(){}ngOnInit(){if(Z.INTERNAL_FOLDERS.includes(this.basePath)){this.router.navigate(["/i"+ke.getUrl(this.router)]);return}this.markdownService.renderer.html=r=>(ke.getFirstLine(r).includes("Widget")&&(this.loadNewWidget=!0),this.imgLayout=="<!-- Theme:Classic, ImgAlign:Left Widget:NAVI-->"||this.imgLayout,r),this.markdownService.renderer.heading=(r,i,s)=>i==1&&!this.firstHeading?(this.firstHeading=!0,`<h1 class="first-heading">${s}</h1>`):st.prototype.heading.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.paragraph=r=>r.startsWith("<a")&&r.endsWith("</a>")?r:this.firstHeading&&!this.firstPara?(this.firstPara=!0,`<p class="first-para">${r}<p>`):`<p>${r}<p>`,this.markdownService.renderer.link=(r,i,s)=>st.prototype.link.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.image=(r,i,s)=>`<img src="${r}" class="img-fluid mx-auto d-block" alt="${s}">`}onMarkdownReady(){if(this.applyLastHeadingStyle(),this.loadNewWidget){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(rv);r.appendChild(i.location.nativeElement)}}}applyLastHeadingStyle(){let r=document.querySelectorAll("h1");if(r.length>1){let i=r[r.length-1];i.classList.add("cta");let s=i.nextElementSibling;for(;s;)s.classList.add("cta"),s=s.nextElementSibling}}};e.\u0275fac=function(i){return new(i||e)(B(on),B(qt),B(Pn),B(kn))},e.\u0275cmp=xe({type:e,selectors:[["app-ghhome"]],features:[pt],decls:5,vars:1,consts:[["mdContent",""],[1,"container"],[1,"row","justify-content-center"],[1,"container",3,"ready","data"]],template:function(i,s){if(i&1){let o=Lt();x(0,"div",1)(1,"div",2,0)(3,"markdown",3),Se("ready",function(){return Ue(o),$e(s.onMarkdownReady())}),U(4,`
        `),M()()()}i&2&&(j(3),Q("data",s.homePageContent))},dependencies:[tr],styles:[".badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}"]});let n=e;return n})();function iQ(n,e){if(n&1&&(x(0,"div",6)(1,"div",7)(2,"a",8),se(3,"img",9),M(),x(4,"div",10)(5,"a",11)(6,"h5",12),U(7),M()()()()()),n&2){let t=e.$implicit,r=de();j(2),Q("href",r.galaryLinks.get(t.key),ft),j(),Rn("alt",t.key),Q("src",t.value,ft),j(2),Q("href",r.galaryLinks.get(t.key),ft),j(2),qe(t.key)}}var Aj=(()=>{let e=class e extends sr{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.markdownContent="Loading..",this.galaryLinks=new Map,this.galaryImgs=new Map}userInitialised(){this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":this.titleService.setTitle(Z.ghUser.name),this.githubService.getReadMeContent(this.routerFileUrl).then(s=>this.markdownContent=s);break;default:break}})}ngOnInit(){this.markdownService.renderer.link=(r,i,s)=>(this.galaryLinks.set(s,r),st.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.image=(r,i,s)=>(this.galaryImgs.set(s,r),s)}onMarkdownReady(){}};e.\u0275fac=function(i){return new(i||e)(B(on),B(qt),B(Pn))},e.\u0275cmp=xe({type:e,selectors:[["app-crazy-coupons"]],features:[pt],decls:8,vars:4,consts:[[1,"container","mt-5"],[1,"row"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"container"],[1,"row","justify-content-center"],[3,"ready","data"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],["target","_blank","rel","noopener noreferrer",1,"text-decoration-none",3,"href"],[1,"card-title"]],template:function(i,s){i&1&&(x(0,"div",0)(1,"div",1),fe(2,iQ,8,5,"div",2),Dt(3,"keyvalue"),M()(),x(4,"div",3)(5,"div",4)(6,"markdown",5),Se("ready",function(){return s.onMarkdownReady()}),U(7,`
        `),M()()()),i&2&&(j(2),Q("ngForOf",Mn(3,2,s.galaryImgs)),j(4),Q("data",s.markdownContent))},dependencies:[sn,tr,hs],styles:['@import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css";.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#333;margin-top:4px;text-align:left;line-height:1.2}.card-body[_ngcontent-%COMP%]{padding:8px}.card[_ngcontent-%COMP%]{border:none}']});let n=e;return n})();var iv=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.el=i}ngOnInit(){let r=this.renderer.createElement("script");r.src="https://giscus.app/client.js",r.setAttribute("data-repo","publichomepage/discuss"),r.setAttribute("data-repo-id","R_kgDONHZY8A"),r.setAttribute("data-category","Announcements"),r.setAttribute("data-category-id","DIC_kwDONHZY8M4CjyZp"),r.setAttribute("data-mapping","pathname"),r.setAttribute("data-reactions-enabled","1"),r.setAttribute("data-emit-metadata","1"),r.setAttribute("data-theme","light"),r.setAttribute("data-lang","en"),r.setAttribute("crossorigin","anonymous"),r.async=!0;let i=this.el.nativeElement.querySelector("#discuss-pane");this.renderer.appendChild(i,r),window.addEventListener("message",this.handleMessage.bind(this))}ngOnDestroy(){window.removeEventListener("message",this.handleMessage.bind(this))}handleMessage(r){if(r.origin!=="https://giscus.app"||!(typeof r.data=="object"&&r.data.giscus))return;let i=r.data.giscus;console.log("GiscusData"+JSON.stringify(r.data))}};e.\u0275fac=function(i){return new(i||e)(B(xn),B(Ct))},e.\u0275cmp=xe({type:e,selectors:[["app-giscus-widget"]],decls:1,vars:0,consts:[["id","discuss-pane"]],template:function(i,s){i&1&&se(0,"div",0)}});let n=e;return n})();var kh=(()=>{let e=class e{};e.NEW_USER_CHANNEL="https://discord.com/api/webhooks/1161881028474966077/1NlJyAYOMZbQTZmbVL_WAEm4S_whyKQ275RsOf3PHYqF7naHYmx9z9lFNW2kqzlLr0I-",e.WEB_ERROR_CHANNEL="https://discord.com/api/webhooks/1161880477750272000/I-DJecqOhonKLsy75jP6iVeGxpqxMuu8WZ8wgBd31o4rZzF49vXnjKo9Tv0p5S6HTm7j",e.PUBLISHING_HELP_CHANNEL="https://discord.com/api/webhooks/1161873930991190078/FHGUfffC-VfjGOrLv9OU0EAkmeqM0-3o6phOYtg3cGkjG1E57_CPSAhQ0_pJO6AYNLC7",e.INTERVIEW_ASSISTANCE_CHANNEL="https://discord.com/api/webhooks/1177388543023272059/Tqt3tk3Bm3tvd6aZksnQ9-crhr8qWTby6HEWguT3nb5DG-10Y7zV3vh84D7utAdTvL17",e.DEFAULT_PAGE_COUNT=777,e.DEFAULT_PAGE_LIKES=17,e.MAX_SIDE_PANEL_VIDEO_LINKS=5,e.MAX_QUESTION_TIMEOUT=2500,e.JUDGE_0_SUBMISSION_URL="https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=true&fields=*",e.DRAFT_HEADER="<!-- Draft -->",e.DRAFT_PAGE_LINK="/faqs/draft_content",e.CODING_QUESTIONS_CONTENT_HEADER="<!-- question -->",e.CODING_SOLUTIONS_CONTENT_HEADER="<!-- correct_solution -->",e.CODING_ONE_TEST_CASE_CONTENT_HEADER="<!-- runOneTestCaseHandler -->",e.CODING_ALL_TESTS_CONTENT_HEADER="<!-- runAllTestCases -->",e.SELECTIFY_ANSWER_CONTENT_HEADER="<!-- Answer[ ]?=(.*)-->",e.ASSESSMENT_FOLDER_HEADER="<!-- Assessment Folder : (?<name>\\S+) -->",e.ASSESSMENT_KNOWLEDGE_CHECK_HEADER=/<!-- Knowledge Check | (\w+) | (\S+) | (\w+) -->/g,e.ASSESSMENT_QUESTIONS_FILE_NAME_SYNTAX="(?<qId>\\d+)-(?<qName>\\S+).md",e.SELECT_OPTIONS_HEADER="<!-- Select options -->";let n=e;return n})();var kj=(()=>{let e=class e{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustResourceUrl(r)}};e.\u0275fac=function(i){return new(i||e)(B(bo,16))},e.\u0275pipe=ns({name:"safe",type:e,pure:!0});let n=e;return n})();var oQ=(n,e)=>({"fa-play":n,"fa-pause":e});function aQ(n,e){if(n&1&&(x(0,"li")(1,"a",21),U(2),M()()),n&2){let t=e.$implicit,r=de(2);j(),zp("href","/i/",t,"",ft),j(),qe(r.getFileName(t))}}function cQ(n,e){if(n&1&&(x(0,"div",14)(1,"div",15),U(2),x(3,"a",16),se(4,"i",17),M()(),x(5,"div",18)(6,"div",19)(7,"div",8)(8,"ul",20),fe(9,aQ,3,3,"li",10),M()()()()()),n&2){let t=de();j(2),mt("",t.folderName," "),j(7),Q("ngForOf",t.filesAvailable)}}function lQ(n,e){if(n&1&&(x(0,"div",22)(1,"div",23)(2,"p"),U(3,"Try these challenge questions and get better on this topic."),M(),x(4,"a",24),se(5,"i",25),U(6,"\xA0Knowledge Check"),M()()()),n&2){let t=de();j(4),Rn("href",t.assementLink,ft)}}function uQ(n,e){n&1&&(x(0,"div")(1,"b"),U(2,"Practice questions"),M()())}function dQ(n,e){if(n&1&&(x(0,"li")(1,"a",26),U(2),M()()),n&2){let t=e.$implicit;j(),Rn("href",t,ft),j(),qe(t.split("problems")[1])}}function hQ(n,e){n&1&&(x(0,"div",27)(1,"b"),U(2,"Video reference"),M()())}function fQ(n,e){if(n&1&&(x(0,"div",28),se(1,"iframe",29),Dt(2,"safe"),M()),n&2){let t=e.$implicit;j(),Q("src",Mn(2,1,t),Fp)}}function pQ(n,e){if(n&1){let t=Lt();x(0,"a",30),Se("click",function(){Ue(t);let i=de();return $e(i.speakText())}),se(1,"i",31),M()}if(n&2){let t=de();j(),Q("ngClass",Wp(1,oQ,!t.isPaused,t.isPaused))}}var Rh=(()=>{let e=class e extends sr{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=G(kn),this.filesAvailable=[],this.availableYoutubeLinks=new Set,this.leetcodeLinks=new Set,this.folderName="",this.readmeFileUrlContent="",this.readmeFileUrl="",this.assementLink="",this.speechContent=null,this.isPaused=!1,this.isSpeaking=!1,this.isDraftArticle=!1,this.loadPlugin=!1,this.firstLineProcessed=!1,this.hasSelectOptionsHeader=!1,this.speechSir=window.speechSynthesis}userInitialised(){this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":this.folderName=this.articleFolderName;let s=ke.getRouterUrl(this.router,this.basePath+"/"+this.folderName);s.endsWith(".md")||(s=s+".md"),this.readmeFileUrl=ke.getGhUserFilePath(Z.ghUserLoaded,`${this.folderName}/${s}`,this.githubService.hasInstalledAccessToken()),this.readmeFileUrl&&this.githubService.getLocalFileContent(this.readmeFileUrl).then(o=>{this.readmeFileUrlContent=o}).catch(o=>this.readmeFileUrlContent=o);break;case"UserDirectory":this.githubService.getGhDirectoryContents(this.githubUser,!0,this.getFolderName()).then(o=>{this.filesAvailable=o.files.filter(a=>!a.includes("README.md"))});break;default:break}})}getFolderName(){let r=this.routerFileUrl.substring(this.routerFileUrl.lastIndexOf("/")+1);return r.endsWith("md")?super.getFolderName():r}ngOnInit(){this.router.events.subscribe(r=>{r.type==15&&this.ngOnDestroy()}),this.markdownService.renderer.html=r=>{if(this.processFirstLine(r),this.isDraftArticle)return"";let i=r.match(kh.ASSESSMENT_FOLDER_HEADER);if(i!=null&&i.groups&&i.groups.name){let s=i.groups.name;return this.assementLink=s.includes("http")?s:`/assessments/${s}`,""}return this.hasSelectOptionsHeader=r.includes(kh.SELECT_OPTIONS_HEADER),r},this.markdownService.renderer.list=(r,i,s)=>{if(this.hasSelectOptionsHeader){let o=r.split(`
`).map(a=>`<option>${a.trim()}</option>`).join("");return this.hasSelectOptionsHeader=!1,`<select class="form-select form-select-lg mb-3">${o}</select>`}return st.prototype.list.call(this.markdownService.renderer,r,i,s)}}processFirstLine(r){if(this.firstLineProcessed)return;let i=ke.parseHtmlLine(r);switch(i.PageType){case kh.DRAFT_HEADER:{this.isDraftArticle=!0;break}case"Assessment":break;default:break}i.Widget=="NAVI"&&(this.loadPlugin=!0),this.firstLineProcessed=!0}speakText(){this.isPaused?this.resumeSpeech():this.isSpeaking?this.pauseSpeech():this.startSpeech()}startSpeech(){!this.isSpeaking&&this.speechContent!=null&&(this.speechSir.speak(this.speechContent),this.isSpeaking=!0)}pauseSpeech(){!this.isPaused&&this.isSpeaking&&(this.speechSir.pause(),this.isPaused=!0)}resumeSpeech(){this.isPaused&&this.isSpeaking&&(this.speechSir.resume(),this.isPaused=!1)}onMarkdownReady(){if(this.availableYoutubeLinks=Z.userContext.youtube_links,this.leetcodeLinks=Z.userContext.leetcode_links,this.isDraftArticle)this.router.navigate([kh.DRAFT_PAGE_LINK]);else if(this.router.navigate([this.router.url]),this.loadPlugin){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(rv);r.appendChild(i.location.nativeElement)}}}speechReady(r){this.isDraftArticle||(this.speechContent=r?new SpeechSynthesisUtterance(r):null,this.speechContent!=null&&(this.speechContent.pitch=1,this.speechContent.rate=1,this.speechContent.volume=1,this.speechContent.lang="en-US"))}ngOnDestroy(){this.speechSir&&this.speechContent!=null&&this.speechSir.cancel()}getFileName(r){return this.folderName=="faqs"?ke.getFileNameWithoutCurrentFolder(r,this.folderName):ke.getFileName(r)}};e.\u0275fac=function(i){return new(i||e)(B(on),B(qt),B(Pn))},e.\u0275cmp=xe({type:e,selectors:[["app-internal-articles"]],features:[pt],decls:16,vars:8,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"container",3,"ready","load","data"],[1,"col-lg-4"],["class","card mb-4 my-3",4,"ngIf"],["class","card my-3 text-center border-success",4,"ngIf"],[4,"ngIf"],[1,"text-truncate"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],["class","text-capitalize my-2",4,"ngIf"],["class","card mb-4",4,"ngFor","ngForOf"],["class","float",3,"click",4,"ngIf"],[1,"card","mb-4","my-3"],[1,"card-header","text-capitalize"],["href","/articles"],[1,"fa-solid","fa-magnifying-glass","float-right",2,"color","darkorange"],[1,"card-body","scrollable-card"],[1,"row"],[1,"list-unstyled","mb-0","text-capitalize"],[3,"href"],[1,"card","my-3","text-center","border-success"],[1,"card-body"],[1,"btn","btn-warning",3,"href"],[1,"fa-regular","fa-lightbulb"],["target","_blank",3,"href"],[1,"text-capitalize","my-2"],[1,"card","mb-4"],["width","100%","height","200","allowfullscreen","",1,"rounded-2",3,"src"],[1,"float",3,"click"],[1,"fa","my-float",3,"ngClass"]],template:function(i,s){i&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),Se("ready",function(){return s.onMarkdownReady()})("load",function(a){return s.speechReady(a)}),U(4,`
            `),M()(),x(5,"div",4),fe(6,cQ,10,2,"div",5)(7,lQ,7,1,"div",6)(8,uQ,3,0,"div",7),x(9,"div",8)(10,"ul",9),fe(11,dQ,3,2,"li",10),M()(),fe(12,hQ,3,0,"div",11)(13,fQ,3,3,"div",12),se(14,"app-giscus-widget"),M()()(),fe(15,pQ,2,4,"a",13)),i&2&&(j(3),Q("data",s.readmeFileUrlContent),j(3),Q("ngIf",s.folderName),j(),Q("ngIf",s.assementLink),j(),Q("ngIf",s.leetcodeLinks.size>0),j(3),Q("ngForOf",s.leetcodeLinks),j(),Q("ngIf",s.availableYoutubeLinks.size>0),j(),Q("ngForOf",s.availableYoutubeLinks),j(2),Q("ngIf",s.speechContent))},dependencies:[sc,sn,$t,tr,iv,kj],styles:[".scrollable-card[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto}"]});let n=e;return n})();var Rj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=xe({type:e,selectors:[["app-roadmap"]],decls:37,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-4"],[1,"my-3"],[1,"step","step-active"],[1,"circle"],[1,"fa","fa-check"],[1,"title"],[1,"caption"],[1,"step"],[1,"circle",2,"background-color","green"],["target","_blank","href","https://youtube.com/shorts/-sNJ3WmU83E?feature=share"],[1,"fab","fa-youtube","fa-xl",2,"color","#ed302f"],[1,"circle",2,"background-color","yellowgreen"],["href","https://interviewdose.com/roadmap","target","_blank"]],template:function(i,s){i&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),U(4,"Roadmap"),M(),U(5," '"),x(6,"div",4)(7,"div")(8,"div",5),se(9,"i",6),M()(),x(10,"div")(11,"div",7),U(12,"What's Next ?"),M(),x(13,"div",8),U(14,"Payment integration for your service"),M()()(),x(15,"div",9)(16,"div")(17,"div",10),U(18,"2"),M()(),x(19,"div")(20,"div",7)(21,"a",11),se(22,"i",12),M(),U(23,"DeepPeek Search"),M(),x(24,"div",8),U(25,"DeepPeek AI search enabled in your pages"),M()()(),x(26,"div",9)(27,"div")(28,"div",13),U(29,"1"),M()(),x(30,"div")(31,"div",7),U(32,"Menifesting the World's simplest HomePage"),M(),x(33,"div",8),U(34,"This is THE simplest developer friendly webpage builder on earth today: Forked from "),x(35,"a",14),U(36,"https://interviewdose.com"),M()()()()()()())},styles:['.step[_ngcontent-%COMP%]{position:relative;min-height:1em;color:gray}.title[_ngcontent-%COMP%]{line-height:1.5em;font-weight:700}.caption[_ngcontent-%COMP%]{font-size:.8em}.step[_ngcontent-%COMP%] + .step[_ngcontent-%COMP%]{margin-top:1.5em}.step[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:static;height:0}.step[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){margin-left:1.5em;padding-left:1em}.circle[_ngcontent-%COMP%]{background:gray;position:relative;width:1.5em;height:1.5em;line-height:1.5em;border-radius:100%;color:#fff;text-align:center;box-shadow:0 0 0 3px #fff}.circle[_ngcontent-%COMP%]:after{content:" ";position:absolute;display:block;inset:1px 50%;height:100%;width:1px;transform:scaleY(2);transform-origin:50% -100%;background-color:#00000040;z-index:-1}.step[_ngcontent-%COMP%]:last-child   .circle[_ngcontent-%COMP%]:after{display:none}.step.step-active[_ngcontent-%COMP%]{color:#4285f4}.step.step-active[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{background-color:#4285f4}']});let n=e;return n})();var Mj=(()=>{let e=class e{constructor(r){this.messaging=r,this.recognition=new webkitSpeechRecognition,this.isStoppedSpeechRecog=!1,this.text="",this.tempWords=""}init(){this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.addEventListener("result",r=>{var i=r.results[0][0].transcript;if(this.tempWords=i,i){let s={cmd:"speech",payload:i};this.messaging.send(s)}})}start(){this.isStoppedSpeechRecog=!1,this.recognition.start(),console.log("Speech recognition started"),this.recognition.addEventListener("end",()=>{this.isStoppedSpeechRecog?(this.recognition.stop(),console.log("End speech recognition")):(this.wordConcat(),this.recognition.start())})}stop(){this.isStoppedSpeechRecog=!0,this.wordConcat(),this.recognition.stop(),console.log("End speech recognition")}wordConcat(){this.text=this.text+" "+this.tempWords+".",this.tempWords=""}};e.\u0275fac=function(i){return new(i||e)(q(an))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var mQ=["searchInput"],yQ=n=>({transform:n});function vQ(n,e){n&1&&(x(0,"div",12),U(1,"Listening... "),x(2,"div",13)(3,"span",14),U(4,"Loading..."),M()()())}function _Q(n,e){n&1&&(x(0,"div",12),U(1,"Listening "),se(2,"i",15),M())}function wQ(n,e){if(n&1&&(x(0,"div",16),se(1,"i",17),U(2),M()),n&2){let t=de();j(2),mt("\xA0",t.lastSpeechText,"")}}function bQ(n,e){if(n&1&&(x(0,"h6",25),U(1),M()),n&2){let t=de().ngIf;j(),mt(" ~ ",t.Category,"")}}function EQ(n,e){if(n&1&&(f0(0),x(1,"h2",22),U(2),M(),x(3,"i"),fe(4,bQ,2,1,"h6",23),M(),se(5,"a",24),p0()),n&2){let t=e.ngIf,r=de().$implicit,i=de();j(2),qe(t.File),j(2),Q("ngIf",t.Category),j(),Rn("href",i.createClickableLink(r),ft)}}function IQ(n,e){if(n&1){let t=Lt();x(0,"div",18)(1,"div",19),Se("mouseenter",function(){let i=Ue(t).$implicit,s=de();return $e(s.onCardHover(!0,i))})("mouseleave",function(){let i=Ue(t).$implicit,s=de();return $e(s.onCardHover(!1,i))}),x(2,"div",20),fe(3,EQ,6,3,"ng-container",21),M()()()}if(n&2){let t=e.$implicit,r=de();j(),Rn("id",t),Q("ngStyle",Gp(3,yQ,r.getRandomRotation(t))),j(2),Q("ngIf",r.getFileNameWithCategory(t))}}var vD=(()=>{let e=class e extends Rh{constructor(r,i,s,o,a){super(i,r,s),this.filterText="",this.lastSpeechText="",this.articleFound=!1,this.filteredFiles=[],this.cachedRotations={},this.userTyping=!1,this.ghuserName="",a.event$.subscribe(c=>{let l=c;switch(l.cmd){case"speech":this.articleFound=!1,this.filterText=l.payload?l.payload:"",this.lastSpeechText=this.filterText.substring(0,25),this.searchKey(),this.articleFound||(this.filterText="",this.filteredFiles=this.filesAvailable);break;case"UserDirectory":setTimeout(()=>{this.filteredFiles=this.filesAvailable},1e3);break;default:break}}),o.init(),o.start()}ngOnInit(){this.ghuserName=Z.ghUserLoaded}onUserInput(){this.userTyping=!0}clickArticle(r){this.router.navigate(["/i"+r])}searchKey(){let r=this.filterText.trim().split(/\s+/).map(s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),i=new RegExp(r.join("|"),"i");this.filteredFiles=this.filterText===""?this.filesAvailable:this.filesAvailable.filter(s=>i.test(s)?(this.articleFound=!0,this.userTyping||this.searchInput.nativeElement.select(),!0):!1)}getRandomRotation(r){if(!this.cachedRotations[r]){let o=Math.random()*4+-2;this.cachedRotations[r]=`rotate(${o}deg)`}return this.cachedRotations[r]}onCardHover(r,i){let s=document.getElementById(i);s&&(r?s.style.transform="":s.style.transform=this.cachedRotations[i])}getFileNameWithCategory(r,i=!1){return ke.getFileNameWithCategory(r,i)}createClickableLink(r){let i=r.lastIndexOf(".md");return i!=-1&&(r=r.substring(0,i)),this.isHomePageGHUser?`/i/${r}`:`/${this.githubUser}/${r}`}};e.\u0275fac=function(i){return new(i||e)(B(qt),B(on),B(Pn),B(Mj),B(an))},e.\u0275cmp=xe({type:e,selectors:[["app-search-articles"]],viewQuery:function(i,s){if(i&1&&Tu(mQ,7),i&2){let o;Xa(o=ec())&&(s.searchInput=o.first)}},features:[pt],decls:15,vars:5,consts:[["searchInput",""],[1,"container","px-5"],[1,"row","mx-auto","mb-4","rounded-3","align-items-center","justify-content-center"],[1,"container-fluid","py-3","text-center"],[1,"display-4","fw-bold"],[1,"col-lg-6"],["class","fs-6 text-muted float-end",4,"ngIf"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type or Speak to search ...",1,"form-control","border","border-success",3,"ngModelChange","input","ngModel"],["class","fs-6 text-muted text-center",4,"ngIf"],[1,"row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"fs-6","text-muted","float-end"],["role","status",1,"spinner-border","spinner-border-sm","text-secondary"],[1,"sr-only"],[1,"fa-solid","fa-check",2,"color","#63E6BE"],[1,"fs-6","text-muted","text-center"],[1,"fa-brands","fa-searchengin"],[1,"col-md-3"],[1,"card","mb-4","border-primary","card-hover",3,"mouseenter","mouseleave","id","ngStyle"],[1,"card-body","text-success"],[4,"ngIf"],[1,"card-title","text-capitalize"],["class","card-subtitle text-muted text-end",4,"ngIf"],[1,"stretched-link",3,"href"],[1,"card-subtitle","text-muted","text-end"]],template:function(i,s){if(i&1){let o=Lt();x(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),U(4,"Search Articles"),M()(),x(5,"div",5),fe(6,vQ,5,0,"div",6)(7,_Q,3,0,"div",6),x(8,"div",7)(9,"input",8,0),us("ngModelChange",function(c){return Ue(o),vo(s.filterText,c)||(s.filterText=c),$e(c)}),Se("ngModelChange",function(){return Ue(o),$e(s.searchKey())})("input",function(){return Ue(o),$e(s.onUserInput())}),M()(),fe(11,wQ,3,1,"div",9),M()(),x(12,"div",10),fe(13,IQ,4,5,"div",11),M(),se(14,"app-giscus-widget"),M()}i&2&&(j(6),Q("ngIf",!s.articleFound),j(),Q("ngIf",s.articleFound),j(2),ls("ngModel",s.filterText),j(2),Q("ngIf",!s.articleFound),j(2),Q("ngForOf",s.filteredFiles))},dependencies:[sn,$t,uM,pc,Tg,Qu,iv],styles:[".card-hover[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease,background-color .3s ease}.card-hover[_ngcontent-%COMP%]:hover{box-shadow:0 10px 20px #0000004d;background-color:silver}"]});let n=e;return n})();var TQ=["scrollPanel"],CQ=["iframeRef"];function DQ(n,e){n&1&&(x(0,"h4",29),U(1,"Deep Search in your page"),M())}function SQ(n,e){if(n&1&&se(0,"option",30),n&2){let t=e.$implicit;Q("value",t.name)}}function AQ(n,e){if(n&1){let t=Lt();x(0,"iframe",31,2),Se("load",function(){Ue(t);let i=de();return $e(i.captureTextContent())}),M()}if(n&2){let t=de();Q("src",t.safeUrl,Fp)}}function xQ(n,e){if(n&1&&(x(0,"div",32),U(1),M()),n&2){let t=de();j(),qe(t.iFramePlaceholder)}}function kQ(n,e){if(n&1){let t=Lt();x(0,"div")(1,"b"),U(2,"Follow-up :\xA0"),M(),U(3),x(4,"i",39),Se("click",function(i){Ue(t);let s=de(2).$implicit,o=de();return $e(o.setNewQuestion(s.followUp?s.followUp:"",i))}),M()()}if(n&2){let t=de(2).$implicit;j(3),qe(t.followUp)}}function RQ(n,e){if(n&1){let t=Lt();x(0,"div")(1,"button",36),Se("click",function(){Ue(t);let i=de(2);return $e(i.aiUserLiked("like"))}),se(2,"i",37),M(),x(3,"button",36),Se("click",function(){Ue(t);let i=de(2);return $e(i.aiUserLiked("clipped"))}),se(4,"i",38),M(),fe(5,kQ,5,1,"div",35),M()}if(n&2){let t=de().$implicit;j(5),Q("ngIf",t.followUp)}}function MQ(n,e){if(n&1&&(x(0,"div",33),se(1,"markdown",34),fe(2,RQ,6,1,"div",35),M()),n&2){let t=e.$implicit;j(),Q("data",t.content),j(),Q("ngIf",t.from!="You")}}function NQ(n,e){if(n&1&&(x(0,"div",40)(1,"div",41)(2,"div",42),se(3,"div",43),M(),x(4,"div",44),se(5,"div",43),M()()()),n&2){let t=de();j(3),h0(t.firstStyle),j(2),h0(t.secondStyle)}}function PQ(n,e){if(n&1&&(x(0,"option",30),U(1),M()),n&2){let t=e.$implicit;Q("value",t.value),j(),mt(" ",t.label," ")}}function OQ(n,e){if(n&1&&(x(0,"option",30),U(1),M()),n&2){let t=e.$implicit;Q("value",t.value),j(),mt(" ",t.label," ")}}var Nj=(()=>{let e=class e{captureTextContent(){setTimeout(()=>{let r=this.iframeRef?.nativeElement;try{if(r&&r.contentWindow&&r.contentWindow.document)try{console.log("Inside iframe content window");let i=r.contentWindow.document.body.innerText;if(i&&this.contextLoaded==!1){this.contextLoaded=!0;let s=Date.now();this.addDeepContext(i).subscribe(o=>{this.requestTimer=(Date.now()-s)/1e3,console.log("Added the page content to search"),setTimeout(()=>{this.newQuestion.trim()==""&&(this.newQuestion="Who is John Doe ?",this.enableSend=!0,this.sendIsDisabled=!1,this.contextLoaded=!1)},4e3)},o=>{this.iFramePlaceholder="Error ! No response from response from Deep API : "+o,console.error(this.iFramePlaceholder),alert("Check Deep API, Could not add to context ! Refresh the page and try again later.")})}}catch{console.error("Unable to access iframe content due to CORS restrictions."),this.iFramePlaceholder="CORS restriction prevents accessing iframe content",alert("CORS restriction ! Pages from publichome are allowed.")}else alert("CORS restriction ! Pages from publichome are allowed.")}catch{this.iFramePlaceholder="CORS restriction prevents accessing iframe content",alert("CORS restriction ! Pages from publichome are allowed.")}},2e3)}setStyles(){this.firstStyle=`width: ${this.firstProgress}%`,this.secondStyle=`width: ${this.secondProgress}%`}constructor(r,i,s,o,a,c,l){this.ghService=r,this.httpClient=i,this.messaging=s,this.renderer=o,this.el=a,this.markdownService=c,this.sanitizer=l,this.urls=[{name:"https://publichome.page/simpleresume"},{name:"https://publichome.page/voicesmith"},{name:"https://publichome.page/nritutor"},{name:"https://publichome.page/kantabanji"},{name:"https://publichome.page/ramasahoo"}],this.db_options=[{value:"R",label:"Redis"},{value:"C",label:"Chroma"}],this.selectedDBOption=this.db_options[0].value,this.ef_options=[{value:"L",label:"ST"},{value:"O",label:"OA"}],this.selectedEFOption=this.ef_options[0].value,this.requestTimer=0,this.messages=[],this.newQuestion="",this.currentQuestion="",this.aiAnswer="",this.max_context_size=6,this.enableSend=!1,this.firstTimeOpen=!0,this.liked=!1,this.requestStarted=!1,this.firstProgress=25,this.secondProgress=10,this.firstStyle="width: 25%",this.secondStyle="width: 10%",this.activeIndex=0,this.iFramePlaceholder="Enter a publichome.page URL to deep search...",this.url="https://publichome.page/simpleresume",this.loadedUrl="",this.contextLoaded=!1,this.sendIsDisabled=!0,this.initialConversation=[{role:"system",content:"You are in a job interview."}],this.messaging.send({cmd:"host",file:"IaComponent"})}ngOnInit(){this.markdownService.renderer.text=r=>{let i=r;return r}}loadUrl(){this.url.trim()&&this.url.startsWith("https://publichome.page/")?(this.loadedUrl=this.url,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.url)):alert(`Please enter a valid publichome.page URL
If you are interested in enabling AI search for your site contact us or try our chrome plugin.`)}setNewQuestion(r,i=null){this.newQuestion=r,i!=null?(i.currentTarget.hidden=!0,this.sendMessage()):this.sendMessage()}sendMessage(){if(this.enableSend&&this.newQuestion.trim()!==""){this.enableSend=!1,this.startTimer(),this.messages.push({from:"You",content:`<b>You: </b>${this.newQuestion}`});let r=Date.now();this.queryDeepApi(this.newQuestion).subscribe(i=>{this.requestTimer=(Date.now()-r)/1e3,this.parseDeepResponse(i.answer)},i=>{console.error("Error ! No response from response from Deep API : ",i),alert("DeepPage API is down !!"),this.resetMembers()}),this.currentQuestion=this.newQuestion,this.newQuestion=""}}parseDeepResponse(r){localStorage.setItem(this.currentQuestion,r),this.aiAnswer=r;let i="";this.aiAnswer&&(this.aiAnswer=this.aiAnswer.trim());let s=`<i class="fa-solid fa-robot" style="color:#19C37D">:</i> ${this.aiAnswer}`;this.messages.push({from:"DP",content:s,followUp:i}),this.resetMembers(),this.scrollToBottom()}aiUserLiked(r){this.liked=!0}onScroll(){}addDeepContext(r){let i="https://api.publichome.page/vector/data",s=new Nn({"Content-Type":"application/json"}),o={options:this.selectedDBOption+":"+this.selectedEFOption,web_link:this.loadedUrl,web_content:r};return this.httpClient.post(i,o,{headers:s})}queryDeepApi(r){let i="https://api.publichome.page/webpeek",s=new Nn({"Content-Type":"application/json"}),o={options:this.selectedDBOption+":"+this.selectedEFOption,web_link:this.loadedUrl,query:r};return this.httpClient.post(i,o,{headers:s})}scrollPageToBottom(){this.enableSend=!0,this.firstTimeOpen=!1;let r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=(window.scrollY||window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)+r;this.renderer.setProperty(document.documentElement,"scrollTop",s),this.renderer.setProperty(document.body,"scrollTop",s)}resetMembers(){this.stopTimer(),this.enableSend=!0,this.firstTimeOpen=!1,this.liked=!1,this.requestStarted=!1,this.timerInterval=null,this.firstProgress=25,this.secondProgress=10}scrollToBottom(){try{this.scrollPanel.nativeElement.scrollTop=this.scrollPanel.nativeElement.scrollHeight}catch{}}ngOnDestroy(){this.stopTimer()}random(r){return Math.floor(Math.random()*r+1)}startTimer(){this.requestStarted=!0,this.timerInterval=setInterval(()=>{this.firstProgress=this.firstProgress+this.random(40),this.secondProgress=this.secondProgress+this.random(20),this.firstProgress>100&&(this.firstProgress=0),this.secondProgress>100&&(this.secondProgress=0),this.setStyles(),this.scrollToBottom()},500)}stopTimer(){this.requestStarted=!1,this.timerInterval!=null&&clearInterval(this.timerInterval)}};e.\u0275fac=function(i){return new(i||e)(B(qt),B(vi),B(an),B(xn),B(Ct),B(on),B(bo))},e.\u0275cmp=xe({type:e,selectors:[["app-deep-page"]],viewQuery:function(i,s){if(i&1&&(Tu(TQ,5),Tu(CQ,5)),i&2){let o;Xa(o=ec())&&(s.scrollPanel=o.first),Xa(o=ec())&&(s.iframeRef=o.first)}},decls:50,vars:17,consts:[["scrollPanel",""],["placeholder",""],["iframeRef",""],[1,"scroll-panel",3,"scroll"],[1,"row","col-10","col-md-8","mx-auto"],[1,"text-center"],[1,"card-text","small","my-3"],[1,"fa-solid","fa-robot",2,"color","#19C37D"],[2,"color","green"],["href","https://chromewebstore.google.com/detail/deeppage/ohdjgphdgjdfmiamnjiooeifjanphhcg","target","_blank",1,"ms-2",2,"font-size","0.75rem"],["class","card-text",4,"ngIf"],[1,"input-group"],["list","urlOptions","type","text","placeholder","Enter or select URL...",1,"form-control",3,"ngModelChange","ngModel"],["id","urlOptions"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-right"],[1,"iframe-container","mt-3"],[3,"src","load",4,"ngIf","ngIfElse"],["class","justify-content-center",4,"ngFor","ngForOf"],["id","myCarousel","class","carousel slide","data-bs-ride","carousel",4,"ngIf"],[1,"row","fixed-bottom","justify-content-center",2,"background-color","#F7F7F7"],[1,"col-10","col-md-8"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type your question ...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fa","fa-arrow-up"],[1,"text-center","text-small","my-3","small"],["id","selectOption",1,"form-select","form-select-sm","w-auto","d-inline-block",3,"ngModelChange","ngModel"],[1,"card-text"],[3,"value"],[3,"load","src"],[1,"iframe-placeholder"],[1,"justify-content-center"],[1,"pb-0",3,"data"],[4,"ngIf"],["type","button",1,"btn","p-1",3,"click"],[1,"fa-regular","fa-thumbs-up"],[1,"fa-regular","fa-clipboard"],[1,"btn","fa-solid","fa-plus",2,"color","green",3,"click"],["id","myCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"my-3"],["role","progressbar","aria-label","Basic example","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress",2,"height","5px"],[1,"progress-bar"],["role","progressbar","aria-label","Basic example","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress","my-2",2,"height","5px"]],template:function(i,s){if(i&1){let o=Lt();x(0,"div",3,0),Se("scroll",function(){return Ue(o),$e(s.onScroll())}),x(2,"div",4)(3,"div",5)(4,"h6",6),se(5,"i",7),x(6,"b",8),U(7,"D"),M(),U(8,"eep"),x(9,"b",8),U(10,"P"),M(),U(11,"eek "),x(12,"a",9),U(13,"(Chrome Plugin)"),M()(),fe(14,DQ,2,0,"h4",10),x(15,"div",11)(16,"input",12),us("ngModelChange",function(c){return Ue(o),vo(s.url,c)||(s.url=c),$e(c)}),M(),x(17,"datalist",13),fe(18,SQ,1,1,"option",14),M(),x(19,"button",15),Se("click",function(){return Ue(o),$e(s.loadUrl())}),se(20,"i",16),M()(),x(21,"div",17),fe(22,AQ,2,1,"iframe",18)(23,xQ,2,1,"ng-template",null,1,_o),M()(),fe(25,MQ,3,2,"div",19)(26,NQ,6,4,"div",20),M(),se(27,"br")(28,"br")(29,"br"),U(30,"\xA0"),se(31,"br")(32,"br")(33,"br"),M(),x(34,"div",21)(35,"div",22)(36,"div",23)(37,"input",24),us("ngModelChange",function(c){return Ue(o),vo(s.newQuestion,c)||(s.newQuestion=c),$e(c)}),Se("keyup.enter",function(){return Ue(o),$e(s.sendMessage())}),M(),x(38,"button",25),Se("click",function(){return Ue(o),$e(s.sendMessage())}),se(39,"i",26),M()(),x(40,"div",27),se(41,"i",7),U(42," \xA0using "),x(43,"select",28),us("ngModelChange",function(c){return Ue(o),vo(s.selectedDBOption,c)||(s.selectedDBOption=c),$e(c)}),fe(44,PQ,2,2,"option",14),M(),U(45," \xA0with\xA0 "),x(46,"select",28),us("ngModelChange",function(c){return Ue(o),vo(s.selectedEFOption,c)||(s.selectedEFOption=c),$e(c)}),fe(47,OQ,2,2,"option",14),M(),U(48),Dt(49,"number"),M()()()}if(i&2){let o=yo(24);j(14),Q("ngIf",s.firstTimeOpen&&!s.requestStarted),j(2),ls("ngModel",s.url),j(2),Q("ngForOf",s.urls),j(4),Q("ngIf",s.loadedUrl)("ngIfElse",o),j(3),Q("ngForOf",s.messages),j(),Q("ngIf",s.requestStarted),j(11),ls("ngModel",s.newQuestion),j(),Q("disabled",!s.enableSend),j(5),ls("ngModel",s.selectedDBOption),j(),Q("ngForOf",s.db_options),j(2),ls("ngModel",s.selectedEFOption),j(),Q("ngForOf",s.ef_options),j(),mt(" \xA0",s.requestTimer>0?UR(49,14,s.requestTimer,"1.2-2")+"s":""," ")}},dependencies:[sn,$t,T1,D1,pc,Dg,Tg,Qu,tr,hM],styles:[".iframe-container[_ngcontent-%COMP%]{width:100%;height:300px;border:2px solid #ccc;border-radius:5px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}.iframe-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#aaa;font-style:italic;font-size:16px;background:#f8f9fa}"]});let n=e;return n})();function FQ(n,e){if(n&1){let t=Lt();x(0,"div")(1,"a",5),Se("click",function(){Ue(t);let i=de();return $e(i.signupWithGitHub())}),U(2,"Create"),M()()}}var Pj=(()=>{let e=class e{constructor(r){this.supabaseService=r}signupWithGitHub(){return y(this,null,function*(){let{data:r,error:i}=yield this.supabaseService.signInWithGitHub("/contacts");i&&console.error("Login error:",i.message)})}ngOnInit(){return y(this,null,function*(){try{let r=yield this.supabaseService.getSession()}catch{console.error("Error getting session")}})}isLoggedIn(){return this.supabaseService.isLoggedIn()}};e.\u0275fac=function(i){return new(i||e)(B(Dc))},e.\u0275cmp=xe({type:e,selectors:[["app-dabble"]],decls:12,vars:1,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-6"],[1,"text-center"],[4,"ngIf"],[1,"btn","btn-warning","my-2","col-5",3,"click"]],template:function(i,s){i&1&&(x(0,"div",0)(1,"div",1)(2,"div",2)(3,"div"),se(4,"hr"),x(5,"div",1)(6,"h6",3)(7,"b"),U(8,"I am inspired by my homepage"),M(),x(9,"span"),U(10,"\xA0\u{1F680}"),M()(),fe(11,FQ,3,0,"div",4),M()()()()()),i&2&&(j(11),Q("ngIf",!s.isLoggedIn()))},dependencies:[$t],styles:[".hero[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;text-align:center}"]});let n=e;return n})();var LQ={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",enableTracing:!le.production},VQ=[{path:"i/:folder/:id",component:Rh,children:[{path:"**",component:Rh}]},{path:"dabble",component:Pj},{path:"chat",component:Nj},{path:"roadmap",component:Rj},{path:":ghUser/articles",component:vD},{path:"articles",component:vD},{path:"crazycoupons",component:Aj},{path:"contacts",component:zE},{path:":ghUser/contacts",component:zE},{path:"",component:AO},{path:":ghUser",component:yD,children:[{path:"**",component:yD}]}],Oj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ft({type:e}),e.\u0275inj=Ot({imports:[ac,SE.forRoot(VQ,LQ),SE]});let n=e;return n})();var Fj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ft({type:e,bootstrap:[Z]}),e.\u0275inj=Ot({providers:[TM(),{provide:Dl,useValue:le.firebaseConfig}],imports:[NM,S1,Oj,XM.forRoot({loader:vi,markedOptions:{provide:lb,useValue:{gfm:!0,breaks:!1,pedantic:!1}},sanitize:An.NONE})]});let n=e;return n})();LR(Z,function(){return[$t,bE,AP,xO]},[]);MM().bootstrapModule(Fj).catch(n=>console.error(n));
