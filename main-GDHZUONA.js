import{A as vr,a as M,b as te,c as mn,d as Zm,e as b,f as gC,g as Ud,h as mC,i as yC,j as vC,k as Jm,l as wC,m as ll,n as Xm,o as Bd,p as _C,q as EC,r as ey,s as rt,t as xs,u as yr,v as $d,w as ul,x as IC,y as bC,z as Ti}from"./chunk-AGPXAQQT.js";function DC(n,e){return Object.is(n,e)}var St=null,zd=!1,qd=1,$r=Symbol("SIGNAL");function Ne(n){let e=St;return St=n,e}function CC(){return St}var hl={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ry(n){if(zd)throw new Error("");if(St===null)return;St.consumerOnSignalRead(n);let e=St.nextProducerIndex++;if(Kd(St),e<St.producerNode.length&&St.producerNode[e]!==n&&dl(St)){let t=St.producerNode[e];Wd(t,St.producerIndexOfThis[e])}St.producerNode[e]!==n&&(St.producerNode[e]=n,St.producerIndexOfThis[e]=dl(St)?xC(n,St,e):0),St.producerLastReadVersion[e]=n.version}function JF(){qd++}function TC(n){if(!(dl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===qd)){if(!n.producerMustRecompute(n)&&!sy(n)){n.dirty=!1,n.lastCleanEpoch=qd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=qd}}function SC(n){if(n.liveConsumerNode===void 0)return;let e=zd;zd=!0;try{for(let t of n.liveConsumerNode)t.dirty||XF(t)}finally{zd=e}}function AC(){return St?.consumerAllowSignalWrites!==!1}function XF(n){n.dirty=!0,SC(n),n.consumerMarkedDirty?.(n)}function Gd(n){return n&&(n.nextProducerIndex=0),Ne(n)}function iy(n,e){if(Ne(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(dl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Wd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function sy(n){Kd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(TC(t),r!==t.version))return!0}return!1}function oy(n){if(Kd(n),dl(n))for(let e=0;e<n.producerNode.length;e++)Wd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function xC(n,e,t){if(MC(n),n.liveConsumerNode.length===0&&RC(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=xC(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Wd(n,e){if(MC(n),n.liveConsumerNode.length===1&&RC(n))for(let r=0;r<n.producerNode.length;r++)Wd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Kd(i),i.producerIndexOfThis[r]=e}}function dl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Kd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function MC(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function RC(n){return n.producerNode!==void 0}function kC(n){let e=Object.create(eV);e.computation=n;let t=()=>{if(TC(e),ry(e),e.value===Hd)throw e.error;return e.value};return t[$r]=e,t}var ty=Symbol("UNSET"),ny=Symbol("COMPUTING"),Hd=Symbol("ERRORED"),eV=te(M({},hl),{value:ty,dirty:!0,error:null,equal:DC,producerMustRecompute(n){return n.value===ty||n.value===ny},producerRecomputeValue(n){if(n.value===ny)throw new Error("Detected cycle in computations.");let e=n.value;n.value=ny;let t=Gd(n),r;try{r=n.computation()}catch(i){r=Hd,n.error=i}finally{iy(n,t)}if(e!==ty&&e!==Hd&&r!==Hd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function tV(){throw new Error}var NC=tV;function PC(){NC()}function OC(n){NC=n}var nV=null;function FC(n){let e=Object.create(LC);e.value=n;let t=()=>(ry(e),e.value);return t[$r]=e,t}function ay(n,e){AC()||PC(),n.equal(n.value,e)||(n.value=e,rV(n))}function VC(n,e){AC()||PC(),ay(n,e(n.value))}var LC=te(M({},hl),{equal:DC,value:void 0});function rV(n){n.version++,JF(),SC(n),nV?.()}function fe(n){return typeof n=="function"}function Vo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Qd=Vo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ms(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ct=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(fe(r))try{r()}catch(s){e=s instanceof Qd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{jC(s)}catch(o){e=e??[],o instanceof Qd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Qd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)jC(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ms(t,e)}remove(e){let{_finalizers:t}=this;t&&Ms(t,e),e instanceof n&&e._removeParent(this)}};ct.EMPTY=(()=>{let n=new ct;return n.closed=!0,n})();var cy=ct.EMPTY;function Yd(n){return n instanceof ct||n&&"closed"in n&&fe(n.remove)&&fe(n.add)&&fe(n.unsubscribe)}function jC(n){fe(n)?n():n.unsubscribe()}var tr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Lo={setTimeout(n,e,...t){let{delegate:r}=Lo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Lo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Zd(n){Lo.setTimeout(()=>{let{onUnhandledError:e}=tr;if(e)e(n);else throw n})}function fl(){}var UC=ly("C",void 0,void 0);function BC(n){return ly("E",void 0,n)}function $C(n){return ly("N",n,void 0)}function ly(n,e,t){return{kind:n,value:e,error:t}}var Rs=null;function jo(n){if(tr.useDeprecatedSynchronousErrorHandling){let e=!Rs;if(e&&(Rs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Rs;if(Rs=null,t)throw r}}else n()}function zC(n){tr.useDeprecatedSynchronousErrorHandling&&Rs&&(Rs.errorThrown=!0,Rs.error=n)}var ks=class extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Yd(e)&&e.add(this)):this.destination=oV}static create(e,t,r){return new zr(e,t,r)}next(e){this.isStopped?dy($C(e),this):this._next(e)}error(e){this.isStopped?dy(BC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dy(UC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},iV=Function.prototype.bind;function uy(n,e){return iV.call(n,e)}var hy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Jd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Jd(r)}else Jd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Jd(t)}}},zr=class extends ks{constructor(e,t,r){super();let i;if(fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&tr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&uy(e.next,s),error:e.error&&uy(e.error,s),complete:e.complete&&uy(e.complete,s)}):i=e}this.destination=new hy(i)}};function Jd(n){tr.useDeprecatedSynchronousErrorHandling?zC(n):Zd(n)}function sV(n){throw n}function dy(n,e){let{onStoppedNotification:t}=tr;t&&Lo.setTimeout(()=>t(n,e))}var oV={closed:!0,next:fl,error:sV,complete:fl};var Uo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function an(n){return n}function fy(...n){return py(n)}function py(n){return n.length===0?an:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=cV(t)?t:new zr(t,r,i);return jo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=qC(r),new r((i,s)=>{let o=new zr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Uo](){return this}pipe(...t){return py(t)(this)}toPromise(t){return t=qC(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function qC(n){var e;return(e=n??tr.Promise)!==null&&e!==void 0?e:Promise}function aV(n){return n&&fe(n.next)&&fe(n.error)&&fe(n.complete)}function cV(n){return n&&n instanceof ks||aV(n)&&Yd(n)}function gy(n){return fe(n?.lift)}function _e(n){return e=>{if(gy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,r,i){return new my(n,e,t,r,i)}var my=class extends ks{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Bo(){return _e((n,e)=>{let t=null;n._refCount++;let r=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var $o=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,gy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return Bo()(this)}};var HC=Vo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ue=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Xd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new HC}next(t){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){jo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?cy:(this.currentObservers=null,s.push(t),new ct(()=>{this.currentObservers=null,Ms(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new Xd(e,t),n})(),Xd=class extends Ue{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:cy}};var jt=class extends Ue{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var pl={now(){return(pl.delegate||Date).now()},delegate:void 0};var eh=class extends Ue{constructor(e=1/0,t=1/0,r=pl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var th=class extends ct{constructor(e,t){super()}schedule(e,t=0){return this}};var gl={setInterval(n,e,...t){let{delegate:r}=gl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=gl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var zo=class extends th{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return gl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&gl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ms(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var qo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};qo.now=pl.now;var Ho=class extends qo{constructor(e,t=qo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Go=new Ho(zo),yy=Go;var nh=class extends zo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var rh=class extends Ho{};var vy=new rh(nh);var cn=new ge(n=>n.complete());function ih(n){return n&&fe(n.schedule)}function wy(n){return n[n.length-1]}function sh(n){return fe(wy(n))?n.pop():void 0}function wr(n){return ih(wy(n))?n.pop():void 0}function GC(n,e){return typeof wy(n)=="number"?n.pop():e}var oh=n=>n&&typeof n.length=="number"&&typeof n!="function";function ah(n){return fe(n?.then)}function ch(n){return fe(n[Uo])}function lh(n){return Symbol.asyncIterator&&fe(n?.[Symbol.asyncIterator])}function uh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function lV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var dh=lV();function hh(n){return fe(n?.[dh])}function fh(n){return mC(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ud(t.read());if(i)return yield Ud(void 0);yield yield Ud(r)}}finally{t.releaseLock()}})}function ph(n){return fe(n?.getReader)}function Xe(n){if(n instanceof ge)return n;if(n!=null){if(ch(n))return uV(n);if(oh(n))return dV(n);if(ah(n))return hV(n);if(lh(n))return WC(n);if(hh(n))return fV(n);if(ph(n))return pV(n)}throw uh(n)}function uV(n){return new ge(e=>{let t=n[Uo]();if(fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dV(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function hV(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Zd)})}function fV(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function WC(n){return new ge(e=>{gV(n,e).catch(t=>e.error(t))})}function pV(n){return WC(fh(n))}function gV(n,e){var t,r,i,s;return gC(this,void 0,void 0,function*(){try{for(t=yC(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function yn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function $n(n,e=0){return _e((t,r)=>{t.subscribe(Ee(r,i=>yn(r,n,()=>r.next(i),e),()=>yn(r,n,()=>r.complete(),e),i=>yn(r,n,()=>r.error(i),e)))})}function nr(n,e=0){return _e((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function KC(n,e){return Xe(n).pipe(nr(e),$n(e))}function QC(n,e){return Xe(n).pipe(nr(e),$n(e))}function YC(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ZC(n,e){return new ge(t=>{let r;return yn(t,e,()=>{r=n[dh](),yn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}function gh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{yn(t,e,()=>{let r=n[Symbol.asyncIterator]();yn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function JC(n,e){return gh(fh(n),e)}function XC(n,e){if(n!=null){if(ch(n))return KC(n,e);if(oh(n))return YC(n,e);if(ah(n))return QC(n,e);if(lh(n))return gh(n,e);if(hh(n))return ZC(n,e);if(ph(n))return JC(n,e)}throw uh(n)}function Se(n,e){return e?XC(n,e):Xe(n)}function ae(...n){let e=wr(n);return Se(n,e)}function Wo(n,e){let t=fe(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function _y(n){return!!n&&(n instanceof ge||fe(n.lift)&&fe(n.subscribe))}var qr=Vo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function eT(n){return n instanceof Date&&!isNaN(n)}function oe(n,e){return _e((t,r)=>{let i=0;t.subscribe(Ee(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:mV}=Array;function yV(n,e){return mV(e)?n(...e):n(e)}function mh(n){return oe(e=>yV(n,e))}var{isArray:vV}=Array,{getPrototypeOf:wV,prototype:_V,keys:EV}=Object;function yh(n){if(n.length===1){let e=n[0];if(vV(e))return{args:e,keys:null};if(IV(e)){let t=EV(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function IV(n){return n&&typeof n=="object"&&wV(n)===_V}function vh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ml(...n){let e=wr(n),t=sh(n),{args:r,keys:i}=yh(n);if(r.length===0)return Se([],e);let s=new ge(bV(r,e,i?o=>vh(i,o):an));return t?s.pipe(mh(t)):s}function bV(n,e,t=an){return r=>{tT(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)tT(e,()=>{let u=Se(n[c],e),d=!1;u.subscribe(Ee(r,h=>{s[c]=h,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function tT(n,e,t){n?yn(t,n,e):e()}function nT(n,e,t,r,i,s,o,a){let c=[],u=0,d=0,h=!1,p=()=>{h&&!c.length&&!u&&e.complete()},m=D=>u<r?w(D):c.push(D),w=D=>{s&&e.next(D),u++;let C=!1;Xe(t(D,d++)).subscribe(Ee(e,N=>{i?.(N),s?m(N):e.next(N)},()=>{C=!0},void 0,()=>{if(C)try{for(u--;c.length&&u<r;){let N=c.shift();o?yn(e,o,()=>w(N)):w(N)}p()}catch(N){e.error(N)}}))};return n.subscribe(Ee(e,m,()=>{h=!0,p()})),()=>{a?.()}}function vt(n,e,t=1/0){return fe(e)?vt((r,i)=>oe((s,o)=>e(r,s,i,o))(Xe(n(r,i))),t):(typeof e=="number"&&(t=e),_e((r,i)=>nT(r,i,n,t)))}function Si(n=1/0){return vt(an,n)}function rT(){return Si(1)}function Ko(...n){return rT()(Se(n,wr(n)))}function wh(n){return new ge(e=>{Xe(n()).subscribe(e)})}function Ey(...n){let e=sh(n),{args:t,keys:r}=yh(n),i=new ge(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let d=0;d<o;d++){let h=!1;Xe(t[d]).subscribe(Ee(s,p=>{h||(h=!0,u--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(u||s.next(r?vh(r,a):a),s.complete())}))}});return e?i.pipe(mh(e)):i}function Iy(n=0,e,t=yy){let r=-1;return e!=null&&(ih(e)?t=e:r=e),new ge(i=>{let s=eT(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function yl(...n){let e=wr(n),t=GC(n,1/0),r=n;return r.length?r.length===1?Xe(r[0]):Si(t)(Se(r,e)):cn}function At(n,e){return _e((t,r)=>{let i=0;t.subscribe(Ee(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Ai(n){return _e((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ee(t,void 0,void 0,o=>{s=Xe(n(o,Ai(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function iT(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(Ee(o,d=>{let h=u++;c=a?n(c,d,h):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Hr(n,e){return fe(e)?vt(n,e,1):vt(n,1)}function xi(n){return _e((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Gr(n){return n<=0?()=>cn:_e((e,t)=>{let r=0;e.subscribe(Ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function vl(n){return oe(()=>n)}function wl(n,e=an){return n=n??DV,_e((t,r)=>{let i,s=!0;t.subscribe(Ee(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function DV(n,e){return n===e}function _h(n=CV){return _e((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function CV(){return new qr}function Ns(n){return _e((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Rn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?At((i,s)=>n(i,s,r)):an,Gr(1),t?xi(e):_h(()=>new qr))}function Qo(n){return n<=0?()=>cn:_e((e,t)=>{let r=[];e.subscribe(Ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function by(n,e){let t=arguments.length>=2;return r=>r.pipe(n?At((i,s)=>n(i,s,r)):an,Qo(1),t?xi(e):_h(()=>new qr))}function _l(){return _e((n,e)=>{let t,r=!1;n.subscribe(Ee(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Ps(n,e){return _e(iT(n,e,arguments.length>=2,!0))}function sT(n={}){let{connector:e=()=>new Ue,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,u=0,d=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=c=void 0,d=h=!1},w=()=>{let D=o;m(),D?.unsubscribe()};return _e((D,C)=>{u++,!h&&!d&&p();let N=c=c??e();C.add(()=>{u--,u===0&&!h&&!d&&(a=Dy(w,i))}),N.subscribe(C),!o&&u>0&&(o=new zr({next:V=>N.next(V),error:V=>{h=!0,p(),a=Dy(m,t,V),N.error(V)},complete:()=>{d=!0,p(),a=Dy(m,r),N.complete()}}),Xe(D).subscribe(o))})(s)}}function Dy(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new zr({next:()=>{r.unsubscribe(),n()}});return Xe(e(...t)).subscribe(r)}function Yo(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,sT({connector:()=>new eh(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Wr(...n){let e=wr(n);return _e((t,r)=>{(e?Ko(n,t,e):Ko(n,t)).subscribe(r)})}function Ye(n,e){return _e((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ee(r,c=>{i?.unsubscribe();let u=0,d=s++;Xe(n(c,d)).subscribe(i=Ee(r,h=>r.next(e?e(c,h,d,u++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Eh(n,e){return fe(e)?Ye(()=>n,e):Ye(()=>n)}function El(n){return _e((e,t)=>{Xe(n).subscribe(Ee(t,()=>t.complete(),fl)),!t.closed&&e.subscribe(t)})}function wt(n,e,t){let r=fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?_e((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ee(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):an}var KT="https://g.co/ng/security#xss",ne=class extends Error{constructor(e,t){super(cf(e,t)),this.code=e}};function cf(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Nl(n){return{toString:n}.toString()}var Ih="__parameters__";function TV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function QT(n,e,t){return Nl(()=>{let r=TV(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,d){let h=c.hasOwnProperty(Ih)?c[Ih]:Object.defineProperty(c,Ih,{value:[]})[Ih];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Ut=globalThis;function Ge(n){for(let e in n)if(n[e]===Ge)return e;throw Error("Could not find renamed property on target object.")}function SV(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function un(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(un).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function jy(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var AV=Ge({__forward_ref__:Ge});function Li(n){return n.__forward_ref__=Li,n.toString=function(){return un(this())},n}function ln(n){return YT(n)?n():n}function YT(n){return typeof n=="function"&&n.hasOwnProperty(AV)&&n.__forward_ref__===Li}function K(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Mt(n){return{providers:n.providers||[],imports:n.imports||[]}}function lf(n){return oT(n,JT)||oT(n,XT)}function ZT(n){return lf(n)!==null}function oT(n,e){return n.hasOwnProperty(e)?n[e]:null}function xV(n){let e=n&&(n[JT]||n[XT]);return e||null}function aT(n){return n&&(n.hasOwnProperty(cT)||n.hasOwnProperty(MV))?n[cT]:null}var JT=Ge({\u0275prov:Ge}),cT=Ge({\u0275inj:Ge}),XT=Ge({ngInjectableDef:Ge}),MV=Ge({ngInjectorDef:Ge}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=K({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function eS(n){return n&&!!n.\u0275providers}var RV=Ge({\u0275cmp:Ge}),kV=Ge({\u0275dir:Ge}),NV=Ge({\u0275pipe:Ge}),PV=Ge({\u0275mod:Ge}),Oh=Ge({\u0275fac:Ge}),bl=Ge({__NG_ELEMENT_ID__:Ge}),lT=Ge({__NG_ENV_ID__:Ge});function Cl(n){return typeof n=="string"?n:n==null?"":String(n)}function OV(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Cl(n)}function FV(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ne(-200,n)}function Wv(n,e){throw new ne(-201,!1)}var De=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(De||{}),Uy;function tS(){return Uy}function vn(n){let e=Uy;return Uy=n,e}function nS(n,e,t){let r=lf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&De.Optional)return null;if(e!==void 0)return e;Wv(n,"Injector")}var VV={},Tl=VV,By="__NG_DI_FLAG__",Fh="ngTempTokenPath",LV="ngTokenPath",jV=/\n/gm,UV="\u0275",uT="__source",ta;function BV(){return ta}function Mi(n){let e=ta;return ta=n,e}function $V(n,e=De.Default){if(ta===void 0)throw new ne(-203,!1);return ta===null?nS(n,void 0,e):ta.get(n,e&De.Optional?null:void 0,e)}function B(n,e=De.Default){return(tS()||$V)(ln(n),e)}function G(n,e=De.Default){return B(n,uf(e))}function uf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function $y(n){let e=[];for(let t=0;t<n.length;t++){let r=ln(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ne(900,!1);let i,s=De.Default;for(let o=0;o<r.length;o++){let a=r[o],c=zV(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(B(i,s))}else e.push(B(r))}return e}function rS(n,e){return n[By]=e,n.prototype[By]=e,n}function zV(n){return n[By]}function qV(n,e,t,r){let i=n[Fh];throw e[uT]&&i.unshift(e[uT]),n.message=HV(`
`+n.message,i,t,r),n[LV]=i,n[Fh]=null,n}function HV(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==UV?n.slice(2):n;let i=un(e);if(Array.isArray(e))i=e.map(un).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):un(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(jV,`
  `)}`}var ga=rS(QT("Optional"),8);var df=rS(QT("SkipSelf"),4);function js(n,e){let t=n.hasOwnProperty(Oh);return t?n[Oh]:null}function GV(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function WV(n){return n.flat(Number.POSITIVE_INFINITY)}function Kv(n,e){n.forEach(t=>Array.isArray(t)?Kv(t,e):e(t))}function iS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Vh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function KV(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function QV(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function hf(n,e,t){let r=Pl(n,e);return r>=0?n[r|1]=t:(r=~r,QV(n,r,e,t)),r}function Cy(n,e){let t=Pl(n,e);if(t>=0)return n[t|1]}function Pl(n,e){return YV(n,e,1)}function YV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var ra={},wn=[],ia=new W(""),sS=new W("",-1),oS=new W(""),Lh=class{get(e,t=Tl){if(t===Tl){let r=new Error(`NullInjectorError: No provider for ${un(e)}!`);throw r.name="NullInjectorError",r}return t}},aS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(aS||{}),Ir=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Ir||{}),Ni=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ni||{});function ZV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function zy(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];XV(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function JV(n){return n===3||n===4||n===6}function XV(n){return n.charCodeAt(0)===64}function Sl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?dT(n,t,i,null,e[++r]):dT(n,t,i,null,null))}}return n}function dT(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var cS="ng-template";function eL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&ZV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Qv(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Qv(n){return n.type===4&&n.value!==cS}function tL(n,e,t){let r=n.type===4&&!t?cS:n.value;return e===r}function nL(n,e,t){let r=4,i=n.attrs,s=i!==null?sL(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!rr(r)&&!rr(c))return!1;if(o&&rr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!tL(n,c,t)||c===""&&e.length===1){if(rr(r))return!1;o=!0}}else if(r&8){if(i===null||!eL(n,i,c,t)){if(rr(r))return!1;o=!0}}else{let u=e[++a],d=rL(c,i,Qv(n),t);if(d===-1){if(rr(r))return!1;o=!0;continue}if(u!==""){let h;if(d>s?h="":h=i[d+1].toLowerCase(),r&2&&u!==h){if(rr(r))return!1;o=!0}}}}return rr(r)||o}function rr(n){return(n&1)===0}function rL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return oL(e,n)}function lS(n,e,t=!1){for(let r=0;r<e.length;r++)if(nL(n,e[r],t))return!0;return!1}function iL(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function sL(n){for(let e=0;e<n.length;e++){let t=n[e];if(JV(t))return e}return n.length}function oL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function aL(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function hT(n,e){return n?":not("+e.trim()+")":e}function cL(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!rr(o)&&(e+=hT(s,i),i=""),r=o,s=s||!rr(r);t++}return i!==""&&(e+=hT(s,i)),e}function lL(n){return n.map(cL).join(",")}function uL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!rr(i))break;i=s}r++}return{attrs:e,classes:t}}function Ae(n){return Nl(()=>{let e=pS(n),t=te(M({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===aS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Ir.Emulated,styles:n.styles||wn,_:null,schemas:n.schemas||null,tView:null,id:""});gS(t);let r=n.dependencies;return t.directiveDefs=jh(r,!1),t.pipeDefs=jh(r,!0),t.id=fL(t),t})}function dL(n){return Pi(n)||uS(n)}function hL(n){return n!==null}function Rt(n){return Nl(()=>({type:n.type,bootstrap:n.bootstrap||wn,declarations:n.declarations||wn,imports:n.imports||wn,exports:n.exports||wn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function fT(n,e){if(n==null)return ra;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Ni.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Ni.None?[r,a]:r,e[s]=o):t[s]=r}return t}function _t(n){return Nl(()=>{let e=pS(n);return gS(e),e})}function ji(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Pi(n){return n[RV]||null}function uS(n){return n[kV]||null}function dS(n){return n[NV]||null}function hS(n){let e=Pi(n)||uS(n)||dS(n);return e!==null?e.standalone:!1}function fS(n,e){let t=n[PV]||null;if(!t&&e===!0)throw new Error(`Type ${un(n)} does not have '\u0275mod' property.`);return t}function pS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ra,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||wn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:fT(n.inputs,e),outputs:fT(n.outputs),debugInfo:null}}function gS(n){n.features?.forEach(e=>e(n))}function jh(n,e){if(!n)return null;let t=e?dS:dL;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(hL)}function fL(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ff(n){return{\u0275providers:n}}function pL(...n){return{\u0275providers:mS(!0,n),\u0275fromNgModule:!0}}function mS(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Kv(e,o=>{let a=o;qy(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&yS(i,s),t}function yS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Yv(i,s=>{e(s,r)})}}function qy(n,e,t,r){if(n=ln(n),!n)return!1;let i=null,s=aT(n),o=!s&&Pi(n);if(!s&&!o){let c=n.ngModule;if(s=aT(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)qy(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Kv(s.imports,d=>{qy(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&yS(u,e)}if(!a){let u=js(i)||(()=>new i);e({provide:i,useFactory:u,deps:wn},i),e({provide:oS,useValue:i,multi:!0},i),e({provide:ia,useValue:()=>B(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;Yv(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function Yv(n,e){for(let t of n)eS(t)&&(t=t.\u0275providers),Array.isArray(t)?Yv(t,e):e(t)}var gL=Ge({provide:String,useValue:Ge});function vS(n){return n!==null&&typeof n=="object"&&gL in n}function mL(n){return!!(n&&n.useExisting)}function yL(n){return!!(n&&n.useFactory)}function sa(n){return typeof n=="function"}function vL(n){return!!n.useClass}var pf=new W(""),Mh={},wL={},Ty;function Zv(){return Ty===void 0&&(Ty=new Lh),Ty}var dn=class{},Al=class extends dn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Gy(e,o=>this.processProvider(o)),this.records.set(sS,Zo(void 0,this)),i.has("environment")&&this.records.set(dn,Zo(void 0,this));let s=this.records.get(pf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(oS,wn,De.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ne(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Mi(this),r=vn(void 0),i;try{return e()}finally{Mi(t),vn(r)}}get(e,t=Tl,r=De.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(lT))return e[lT](this);r=uf(r);let i,s=Mi(this),o=vn(void 0);try{if(!(r&De.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=DL(e)&&lf(e);u&&this.injectableDefInScope(u)?c=Zo(Hy(e),Mh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&De.Self?Zv():this.parent;return t=r&De.Optional&&t===Tl?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Fh]=a[Fh]||[]).unshift(un(e)),s)throw a;return qV(a,e,"R3InjectorError",this.source)}else throw a}finally{vn(o),Mi(s)}}resolveInjectorInitializers(){let e=Ne(null),t=Mi(this),r=vn(void 0),i;try{let s=this.get(ia,wn,De.Self);for(let o of s)o()}finally{Mi(t),vn(r),Ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(un(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){e=ln(e);let t=sa(e)?e:ln(e&&e.provide),r=EL(e);if(!sa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Zo(void 0,Mh,!0),i.factory=()=>$y(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ne(null);try{return t.value===Mh&&(t.value=wL,t.value=t.factory()),typeof t.value=="object"&&t.value&&bL(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ne(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ln(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Hy(n){let e=lf(n),t=e!==null?e.factory:js(n);if(t!==null)return t;if(n instanceof W)throw new ne(204,!1);if(n instanceof Function)return _L(n);throw new ne(204,!1)}function _L(n){if(n.length>0)throw new ne(204,!1);let t=xV(n);return t!==null?()=>t.factory(n):()=>new n}function EL(n){if(vS(n))return Zo(void 0,n.useValue);{let e=wS(n);return Zo(e,Mh)}}function wS(n,e,t){let r;if(sa(n)){let i=ln(n);return js(i)||Hy(i)}else if(vS(n))r=()=>ln(n.useValue);else if(yL(n))r=()=>n.useFactory(...$y(n.deps||[]));else if(mL(n))r=()=>B(ln(n.useExisting));else{let i=ln(n&&(n.useClass||n.provide));if(IL(n))r=()=>new i(...$y(n.deps));else return js(i)||Hy(i)}return r}function Zo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function IL(n){return!!n.deps}function bL(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function DL(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function Gy(n,e){for(let t of n)Array.isArray(t)?Gy(t,e):t&&eS(t)?Gy(t.\u0275providers,e):e(t)}function Hn(n,e){n instanceof Al&&n.assertNotDestroyed();let t,r=Mi(n),i=vn(void 0);try{return e()}finally{Mi(r),vn(i)}}function _S(){return tS()!==void 0||BV()!=null}function CL(n){if(!_S())throw new ne(-203,!1)}function TL(n){let e=Ut.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function SL(n){return typeof n=="function"}var Jr=0,ye=1,de=2,Qt=3,ir=4,_n=5,xl=6,Uh=7,sr=8,oa=9,br=10,lt=11,Ml=12,pT=13,ma=14,qn=15,Us=16,Jo=17,Kr=18,gf=19,ES=20,Ri=21,Sy=22,zn=23,Yt=25,IS=1;var Bs=7,Bh=8,aa=9,kn=10,$h=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}($h||{});function ki(n){return Array.isArray(n)&&typeof n[IS]=="object"}function Xr(n){return Array.isArray(n)&&n[IS]===!0}function Jv(n){return(n.flags&4)!==0}function mf(n){return n.componentOffset>-1}function yf(n){return(n.flags&1)===1}function Oi(n){return!!n.template}function Wy(n){return(n[de]&512)!==0}var Ky=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function bS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ui(){return DS}function DS(n){return n.type.prototype.ngOnChanges&&(n.setInput=xL),AL}Ui.ngInherit=!0;function AL(){let n=TS(this),e=n?.current;if(e){let t=n.previous;if(t===ra)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function xL(n,e,t,r,i){let s=this.declaredInputs[r],o=TS(n)||ML(n,{previous:ra,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Ky(u&&u.currentValue,t,c===ra),bS(n,e,i,t)}var CS="__ngSimpleChanges__";function TS(n){return n[CS]||null}function ML(n,e){return n[CS]=e}var gT=null;var _r=function(n,e,t){gT?.(n,e,t)},RL="svg",kL="math";function Dr(n){for(;Array.isArray(n);)n=n[Jr];return n}function SS(n,e){return Dr(e[n])}function or(n,e){return Dr(e[n.index])}function AS(n,e){return n.data[e]}function vf(n,e){return n[e]}function Bi(n,e){let t=e[n];return ki(t)?t:t[Jr]}function NL(n){return(n[de]&4)===4}function Xv(n){return(n[de]&128)===128}function PL(n){return Xr(n[Qt])}function ca(n,e){return e==null?null:n[e]}function xS(n){n[Jo]=0}function MS(n){n[de]&1024||(n[de]|=1024,Xv(n)&&_f(n))}function OL(n,e){for(;n>0;)e=e[ma],n--;return e}function wf(n){return!!(n[de]&9216||n[zn]?.dirty)}function Qy(n){n[br].changeDetectionScheduler?.notify(8),n[de]&64&&(n[de]|=1024),wf(n)&&_f(n)}function _f(n){n[br].changeDetectionScheduler?.notify(0);let e=$s(n);for(;e!==null&&!(e[de]&8192||(e[de]|=8192,!Xv(e)));)e=$s(e)}function RS(n,e){if((n[de]&256)===256)throw new ne(911,!1);n[Ri]===null&&(n[Ri]=[]),n[Ri].push(e)}function FL(n,e){if(n[Ri]===null)return;let t=n[Ri].indexOf(e);t!==-1&&n[Ri].splice(t,1)}function $s(n){let e=n[Qt];return Xr(e)?e[Qt]:e}var Ie={lFrame:US(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var kS=!1;function VL(){return Ie.lFrame.elementDepthCount}function LL(){Ie.lFrame.elementDepthCount++}function jL(){Ie.lFrame.elementDepthCount--}function NS(){return Ie.bindingsEnabled}function PS(){return Ie.skipHydrationRootTNode!==null}function UL(n){return Ie.skipHydrationRootTNode===n}function BL(){Ie.skipHydrationRootTNode=null}function be(){return Ie.lFrame.lView}function Et(){return Ie.lFrame.tView}function We(n){return Ie.lFrame.contextLView=n,n[sr]}function Ke(n){return Ie.lFrame.contextLView=null,n}function hn(){let n=OS();for(;n!==null&&n.type===64;)n=n.parent;return n}function OS(){return Ie.lFrame.currentTNode}function $L(){let n=Ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Qs(n,e){let t=Ie.lFrame;t.currentTNode=n,t.isParent=e}function ew(){return Ie.lFrame.isParent}function tw(){Ie.lFrame.isParent=!1}function zL(){return Ie.lFrame.contextLView}function FS(){return kS}function mT(n){kS=n}function Ol(){let n=Ie.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function qL(){return Ie.lFrame.bindingIndex}function HL(n){return Ie.lFrame.bindingIndex=n}function nw(){return Ie.lFrame.bindingIndex++}function rw(n){let e=Ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function GL(){return Ie.lFrame.inI18n}function WL(n,e){let t=Ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,Yy(e)}function KL(){return Ie.lFrame.currentDirectiveIndex}function Yy(n){Ie.lFrame.currentDirectiveIndex=n}function QL(n){let e=Ie.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function VS(){return Ie.lFrame.currentQueryIndex}function iw(n){Ie.lFrame.currentQueryIndex=n}function YL(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[_n]:null}function LS(n,e,t){if(t&De.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&De.Host);)if(i=YL(s),i===null||(s=s[ma],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ie.lFrame=jS();return r.currentTNode=e,r.lView=n,!0}function sw(n){let e=jS(),t=n[ye];Ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function jS(){let n=Ie.lFrame,e=n===null?null:n.child;return e===null?US(n):e}function US(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function BS(){let n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var $S=BS;function ow(){let n=BS();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ZL(n){return(Ie.lFrame.contextLView=OL(n,Ie.lFrame.contextLView))[sr]}function $i(){return Ie.lFrame.selectedIndex}function zs(n){Ie.lFrame.selectedIndex=n}function aw(){let n=Ie.lFrame;return AS(n.tView,n.selectedIndex)}function JL(){return Ie.lFrame.currentNamespace}var zS=!0;function Ef(){return zS}function If(n){zS=n}function XL(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=DS(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function bf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Rh(n,e,t){qS(n,e,3,t)}function kh(n,e,t,r){(n[de]&3)===t&&qS(n,e,t,r)}function Ay(n,e){let t=n[de];(t&3)===e&&(t&=16383,t+=1,n[de]=t)}function qS(n,e,t,r){let i=r!==void 0?n[Jo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Jo]+=65536),(a<s||s==-1)&&(e2(n,t,e,c),n[Jo]=(n[Jo]&4294901760)+c+2),c++}function yT(n,e){_r(4,n,e);let t=Ne(null);try{e.call(n)}finally{Ne(t),_r(5,n,e)}}function e2(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[de]>>14<n[Jo]>>16&&(n[de]&3)===e&&(n[de]+=16384,yT(a,s)):yT(a,s)}var na=-1,qs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function t2(n){return n instanceof qs}function n2(n){return(n.flags&8)!==0}function r2(n){return(n.flags&16)!==0}var xy={},Zy=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=uf(r);let i=this.injector.get(e,xy,r);return i!==xy||t===xy?i:this.parentInjector.get(e,t,r)}};function HS(n){return n!==na}function zh(n){return n&32767}function i2(n){return n>>16}function qh(n,e){let t=i2(n),r=e;for(;t>0;)r=r[ma],t--;return r}var Jy=!0;function Hh(n){let e=Jy;return Jy=n,e}var s2=256,GS=s2-1,WS=5,o2=0,Er={};function a2(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(bl)&&(r=t[bl]),r==null&&(r=t[bl]=o2++);let i=r&GS,s=1<<i;e.data[n+(i>>WS)]|=s}function Gh(n,e){let t=KS(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,My(r.data,n),My(e,null),My(r.blueprint,null));let i=cw(n,e),s=n.injectorIndex;if(HS(i)){let o=zh(i),a=qh(i,e),c=a[ye].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function My(n,e){n.push(0,0,0,0,0,0,0,0,e)}function KS(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function cw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=XS(i),r===null)return na;if(t++,i=i[ma],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return na}function Xy(n,e,t){a2(n,e,t)}function QS(n,e,t){if(t&De.Optional||n!==void 0)return n;Wv(e,"NodeInjector")}function YS(n,e,t,r){if(t&De.Optional&&r===void 0&&(r=null),!(t&(De.Self|De.Host))){let i=n[oa],s=vn(void 0);try{return i?i.get(e,r,t&De.Optional):nS(e,r,t&De.Optional)}finally{vn(s)}}return QS(r,e,t)}function ZS(n,e,t,r=De.Default,i){if(n!==null){if(e[de]&2048&&!(r&De.Self)){let o=d2(n,e,t,r,Er);if(o!==Er)return o}let s=JS(n,e,t,r,Er);if(s!==Er)return s}return YS(e,t,r,i)}function JS(n,e,t,r,i){let s=l2(t);if(typeof s=="function"){if(!LS(e,n,r))return r&De.Host?QS(i,t,r):YS(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&De.Optional))Wv(t);else return o}finally{$S()}}else if(typeof s=="number"){let o=null,a=KS(n,e),c=na,u=r&De.Host?e[qn][_n]:null;for((a===-1||r&De.SkipSelf)&&(c=a===-1?cw(n,e):e[a+8],c===na||!wT(r,!1)?a=-1:(o=e[ye],a=zh(c),e=qh(c,e)));a!==-1;){let d=e[ye];if(vT(s,a,d.data)){let h=c2(a,e,t,o,r,u);if(h!==Er)return h}c=e[a+8],c!==na&&wT(r,e[ye].data[a+8]===u)&&vT(s,a,e)?(o=d,a=zh(c),e=qh(c,e)):a=-1}}return i}function c2(n,e,t,r,i,s){let o=e[ye],a=o.data[n+8],c=r==null?mf(a)&&Jy:r!=o&&(a.type&3)!==0,u=i&De.Host&&s===a,d=Nh(a,o,t,c,u);return d!==null?Hs(e,o,d,a):Er}function Nh(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,d=s>>20,h=r?a:a+d,p=i?a+d:u;for(let m=h;m<p;m++){let w=o[m];if(m<c&&t===w||m>=c&&w.type===t)return m}if(i){let m=o[c];if(m&&Oi(m)&&m.type===t)return c}return null}function Hs(n,e,t,r){let i=n[t],s=e.data;if(t2(i)){let o=i;o.resolving&&FV(OV(s[t]));let a=Hh(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?vn(o.injectImpl):null,d=LS(n,r,De.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&XL(t,s[t],e)}finally{u!==null&&vn(u),Hh(a),o.resolving=!1,$S()}}return i}function l2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(bl)?n[bl]:void 0;return typeof e=="number"?e>=0?e&GS:u2:e}function vT(n,e,t){let r=1<<n;return!!(t[e+(n>>WS)]&r)}function wT(n,e){return!(n&De.Self)&&!(n&De.Host&&e)}var Ls=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ZS(this._tNode,this._lView,e,uf(r),t)}};function u2(){return new Ls(hn(),be())}function Ys(n){return Nl(()=>{let e=n.prototype.constructor,t=e[Oh]||ev(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Oh]||ev(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ev(n){return YT(n)?()=>{let e=ev(ln(n));return e&&e()}:js(n)}function d2(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[de]&2048&&!(o[de]&512);){let a=JS(s,o,t,r|De.Self,Er);if(a!==Er)return a;let c=s.parent;if(!c){let u=o[ES];if(u){let d=u.get(t,Er,r);if(d!==Er)return d}c=XS(o),o=o[ma]}s=c}return i}function XS(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[_n]:null}function _T(n,e=null,t=null,r){let i=eA(n,e,t,r);return i.resolveInjectorInitializers(),i}function eA(n,e=null,t=null,r,i=new Set){let s=[t||wn,pL(n)];return r=r||(typeof n=="object"?void 0:un(n)),new Al(s,e||Zv(),r||null,i)}var Fs=class Fs{static create(e,t){if(Array.isArray(e))return _T({name:""},t,e,"");{let r=e.name??"";return _T({name:r},e.parent,e.providers,r)}}};Fs.THROW_IF_NOT_FOUND=Tl,Fs.NULL=new Lh,Fs.\u0275prov=K({token:Fs,providedIn:"any",factory:()=>B(sS)}),Fs.__NG_ELEMENT_ID__=-1;var Nn=Fs;var h2=new W("");h2.__NG_ELEMENT_ID__=n=>{let e=hn();if(e===null)throw new ne(204,!1);if(e.type&2)return e.value;if(n&De.Optional)return null;throw new ne(204,!1)};var f2="ngOriginalError";function Ry(n){return n[f2]}var tA=!0,lw=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=p2,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),tv=class extends lw{constructor(e){super(),this._lView=e}onDestroy(e){return RS(this._lView,e),()=>FL(this._lView,e)}};function p2(){return new tv(be())}var zi=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new jt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var nv=class extends Ue{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,_S()&&(this.destroyRef=G(lw,{optional:!0})??void 0,this.pendingTasks=G(zi,{optional:!0})??void 0)}emit(e){let t=Ne(null);try{super.next(e)}finally{Ne(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ct&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},et=nv;function Wh(...n){}function nA(n){let e,t;function r(){n=Wh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ET(n){return queueMicrotask(()=>n()),()=>{n=Wh}}var uw="isAngularZone",Kh=uw+"_ID",g2=0,Ce=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new et(!1),this.onMicrotaskEmpty=new et(!1),this.onStable=new et(!1),this.onError=new et(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=tA}=e;if(typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,v2(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(uw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ne(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,m2,Wh,Wh);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},m2={};function dw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function y2(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){nA(()=>{n.callbackScheduled=!1,rv(n),n.isCheckStableRunning=!0,dw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),rv(n)}function v2(n){let e=()=>{y2(n)},t=g2++;n._inner=n._inner.fork({name:"angular",properties:{[uw]:!0,[Kh]:t,[Kh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(w2(c))return r.invokeTask(s,o,a,c);try{return IT(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),bT(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return IT(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!_2(c)&&e(),bT(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,rv(n),dw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function rv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function IT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bT(n){n._nesting--,dw(n)}var Qh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new et,this.onMicrotaskEmpty=new et,this.onStable=new et,this.onError=new et}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function w2(n){return rA(n,"__ignore_ng_zone__")}function _2(n){return rA(n,"__scheduler_tick__")}function rA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function E2(n="zone.js",e){return n==="noop"?new Qh:n==="zone.js"?new Ce(e):n}var Qr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ry(e);for(;t&&Ry(t);)t=Ry(t);return t||null}},I2=new W("",{providedIn:"root",factory:()=>{let n=G(Ce),e=G(Qr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function b2(){return ya(hn(),be())}function ya(n,e){return new It(or(n,e))}var It=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=b2;let n=e;return n})();function D2(n){return n instanceof It?n.nativeElement:n}function C2(){return this._results[Symbol.iterator]()}var iv=class n{get changes(){return this._changes??=new et}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=C2)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=WV(e);(this._changesDetected=!GV(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function iA(n){return(n.flags&128)===128}var sA=new Map,T2=0;function S2(){return T2++}function A2(n){sA.set(n[gf],n)}function sv(n){sA.delete(n[gf])}var DT="__ngContext__";function Fi(n,e){ki(e)?(n[DT]=e[gf],A2(e)):n[DT]=e}function oA(n){return cA(n[Ml])}function aA(n){return cA(n[ir])}function cA(n){for(;n!==null&&!Xr(n);)n=n[ir];return n}var ov;function lA(n){ov=n}function x2(){if(ov!==void 0)return ov;if(typeof document<"u")return document;throw new ne(210,!1)}var Df=new W("",{providedIn:"root",factory:()=>M2}),M2="ng",hw=new W(""),Bt=new W("",{providedIn:"platform",factory:()=>"unknown"});var fw=new W("",{providedIn:"root",factory:()=>x2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var R2="h",k2="b";var N2=()=>null;function pw(n,e,t=!1){return N2(n,e,t)}var uA=!1,P2=new W("",{providedIn:"root",factory:()=>uA});var bh;function O2(){if(bh===void 0&&(bh=null,Ut.trustedTypes))try{bh=Ut.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return bh}function Cf(n){return O2()?.createHTML(n)||n}var Dh;function F2(){if(Dh===void 0&&(Dh=null,Ut.trustedTypes))try{Dh=Ut.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Dh}function CT(n){return F2()?.createScriptURL(n)||n}var Yr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${KT})`}},av=class extends Yr{getTypeName(){return"HTML"}},cv=class extends Yr{getTypeName(){return"Style"}},lv=class extends Yr{getTypeName(){return"Script"}},uv=class extends Yr{getTypeName(){return"URL"}},dv=class extends Yr{getTypeName(){return"ResourceURL"}};function Gn(n){return n instanceof Yr?n.changingThisBreaksApplicationSecurity:n}function qi(n,e){let t=V2(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${KT})`)}return t===e}function V2(n){return n instanceof Yr&&n.getTypeName()||null}function dA(n){return new av(n)}function hA(n){return new cv(n)}function fA(n){return new lv(n)}function pA(n){return new uv(n)}function gA(n){return new dv(n)}function L2(n){let e=new fv(n);return j2()?new hv(e):e}var hv=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Cf(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},fv=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Cf(e),t}};function j2(){try{return!!new window.DOMParser().parseFromString(Cf(""),"text/html")}catch{return!1}}var U2=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Tf(n){return n=String(n),n.match(U2)?n:"unsafe:"+n}function ei(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Fl(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var mA=ei("area,br,col,hr,img,wbr"),yA=ei("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),vA=ei("rp,rt"),B2=Fl(vA,yA),$2=Fl(yA,ei("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),z2=Fl(vA,ei("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),TT=Fl(mA,$2,z2,B2),wA=ei("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),q2=ei("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),H2=ei("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),G2=Fl(wA,q2,H2),W2=ei("script,style,template"),pv=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=Y2(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=Q2(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=ST(e).toLowerCase();if(!TT.hasOwnProperty(t))return this.sanitizedSomething=!0,!W2.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!G2.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;wA[a]&&(c=Tf(c)),this.buf.push(" ",o,'="',AT(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=ST(e).toLowerCase();TT.hasOwnProperty(t)&&!mA.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(AT(e))}};function K2(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Q2(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw _A(e);return e}function Y2(n){let e=n.firstChild;if(e&&K2(n,e))throw _A(e);return e}function ST(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function _A(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var Z2=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,J2=/([^\#-~ |!])/g;function AT(n){return n.replace(/&/g,"&amp;").replace(Z2,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(J2,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Ch;function EA(n,e){let t=null;try{Ch=Ch||L2(n);let r=e?String(e):"";t=Ch.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Ch.getInertBodyElement(r)}while(r!==s);let a=new pv().sanitizeChildren(xT(t)||t);return Cf(a)}finally{if(t){let r=xT(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function xT(n){return"content"in n&&X2(n)?n.content:null}function X2(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var En=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(En||{});function ht(n){let e=IA();return e?e.sanitize(En.URL,n)||"":qi(n,"URL")?Gn(n):Tf(Cl(n))}function Sf(n){let e=IA();if(e)return CT(e.sanitize(En.RESOURCE_URL,n)||"");if(qi(n,"ResourceURL"))return CT(Gn(n));throw new ne(904,!1)}function IA(){let n=be();return n&&n[br].sanitizer}var ej=/^>|^->|<!--|-->|--!>|<!-$/g,tj=/(<|>)/g,nj="\u200B$1\u200B";function rj(n){return n.replace(ej,e=>e.replace(tj,nj))}function bA(n){return n instanceof Function?n():n}function ij(n){return(n??G(Nn)).get(Bt)==="browser"}var Cr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Cr||{}),sj;function gw(n,e){return sj(n,e)}function Xo(n,e,t,r,i){if(r!=null){let s,o=!1;Xr(r)?s=r:ki(r)&&(o=!0,r=r[Jr]);let a=Dr(r);n===0&&t!==null?i==null?xA(e,t,a):Yh(e,t,a,i||null,!0):n===1&&t!==null?Yh(e,t,a,i||null,!0):n===2?wj(e,a,o):n===3&&e.destroyNode(a),s!=null&&Ej(e,n,s,t,i)}}function oj(n,e){return n.createText(e)}function aj(n,e,t){n.setValue(e,t)}function cj(n,e){return n.createComment(rj(e))}function DA(n,e,t){return n.createElement(e,t)}function lj(n,e){CA(n,e),e[Jr]=null,e[_n]=null}function uj(n,e,t,r,i,s){r[Jr]=i,r[_n]=e,xf(n,r,t,1,i,s)}function CA(n,e){e[br].changeDetectionScheduler?.notify(9),xf(n,e,e[lt],2,null,null)}function dj(n){let e=n[Ml];if(!e)return ky(n[ye],n);for(;e;){let t=null;if(ki(e))t=e[Ml];else{let r=e[kn];r&&(t=r)}if(!t){for(;e&&!e[ir]&&e!==n;)ki(e)&&ky(e[ye],e),e=e[Qt];e===null&&(e=n),ki(e)&&ky(e[ye],e),t=e&&e[ir]}e=t}}function hj(n,e,t,r){let i=kn+r,s=t.length;r>0&&(t[i-1][ir]=e),r<s-kn?(e[ir]=t[i],iS(t,kn+r,e)):(t.push(e),e[ir]=null),e[Qt]=t;let o=e[Us];o!==null&&t!==o&&TA(o,e);let a=e[Kr];a!==null&&a.insertView(n),Qy(e),e[de]|=128}function TA(n,e){let t=n[aa],r=e[Qt];if(ki(r))n[de]|=$h.HasTransplantedViews;else{let i=r[Qt][qn];e[qn]!==i&&(n[de]|=$h.HasTransplantedViews)}t===null?n[aa]=[e]:t.push(e)}function mw(n,e){let t=n[aa],r=t.indexOf(e);t.splice(r,1)}function gv(n,e){if(n.length<=kn)return;let t=kn+e,r=n[t];if(r){let i=r[Us];i!==null&&i!==n&&mw(i,r),e>0&&(n[t-1][ir]=r[ir]);let s=Vh(n,kn+e);lj(r[ye],r);let o=s[Kr];o!==null&&o.detachView(s[ye]),r[Qt]=null,r[ir]=null,r[de]&=-129}return r}function SA(n,e){if(!(e[de]&256)){let t=e[lt];t.destroyNode&&xf(n,e,t,3,null,null),dj(e)}}function ky(n,e){if(e[de]&256)return;let t=Ne(null);try{e[de]&=-129,e[de]|=256,e[zn]&&oy(e[zn]),pj(n,e),fj(n,e),e[ye].type===1&&e[lt].destroy();let r=e[Us];if(r!==null&&Xr(e[Qt])){r!==e[Qt]&&mw(r,e);let i=e[Kr];i!==null&&i.detachView(n)}sv(e)}finally{Ne(t)}}function fj(n,e){let t=n.cleanup,r=e[Uh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Uh]=null);let i=e[Ri];if(i!==null){e[Ri]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function pj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof qs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];_r(4,a,c);try{c.call(a)}finally{_r(5,a,c)}}else{_r(4,i,s);try{s.call(i)}finally{_r(5,i,s)}}}}}function AA(n,e,t){return gj(n,e.parent,t)}function gj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Jr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Ir.None||s===Ir.Emulated)return null}return or(r,t)}}function Yh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function xA(n,e,t){n.appendChild(e,t)}function MT(n,e,t,r,i){r!==null?Yh(n,e,t,r,i):xA(n,e,t)}function MA(n,e){return n.parentNode(e)}function mj(n,e){return n.nextSibling(e)}function RA(n,e,t){return vj(n,e,t)}function yj(n,e,t){return n.type&40?or(n,t):null}var vj=yj,RT;function Af(n,e,t,r){let i=AA(n,r,e),s=e[lt],o=r.parent||e[_n],a=RA(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)MT(s,i,t[c],a,!1);else MT(s,i,t,a,!1);RT!==void 0&&RT(s,r,e,t,i)}function Il(n,e){if(e!==null){let t=e.type;if(t&3)return or(e,n);if(t&4)return mv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Il(n,r);{let i=n[e.index];return Xr(i)?mv(-1,i):Dr(i)}}else{if(t&128)return Il(n,e.next);if(t&32)return gw(e,n)()||Dr(n[e.index]);{let r=kA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$s(n[qn]);return Il(i,r)}else return Il(n,e.next)}}}return null}function kA(n,e){if(e!==null){let r=n[qn][_n],i=e.projection;return r.projection[i]}return null}function mv(n,e){let t=kn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return Il(r,i)}return e[Bs]}function wj(n,e,t){n.removeChild(null,e,t)}function yw(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Fi(Dr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)yw(n,e,t.child,r,i,s,!1),Xo(e,n,i,a,s);else if(c&32){let u=gw(t,r),d;for(;d=u();)Xo(e,n,i,d,s);Xo(e,n,i,a,s)}else c&16?NA(n,e,r,t,i,s):Xo(e,n,i,a,s);t=o?t.projectionNext:t.next}}function xf(n,e,t,r,i,s){yw(t,r,n.firstChild,e,i,s,!1)}function _j(n,e,t){let r=e[lt],i=AA(n,t,e),s=t.parent||e[_n],o=RA(s,t,e);NA(r,0,e,t,i,o)}function NA(n,e,t,r,i,s){let o=t[qn],c=o[_n].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Xo(e,n,i,d,s)}else{let u=c,d=o[Qt];iA(r)&&(u.flags|=128),yw(n,e,u,d,i,s,!0)}}function Ej(n,e,t,r,i){let s=t[Bs],o=Dr(t);s!==o&&Xo(e,n,r,s,i);for(let a=kn;a<t.length;a++){let c=t[a];xf(c[ye],c,n,e,r,s)}}function Ij(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Cr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Cr.Important),n.setStyle(t,r,i,s))}}function bj(n,e,t){n.setAttribute(e,"style",t)}function PA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function OA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&zy(n,e,r),i!==null&&PA(n,e,i),s!==null&&bj(n,e,s)}var Wn={};function j(n=1){FA(Et(),be(),$i()+n,!1)}function FA(n,e,t,r){if(!r)if((e[de]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Rh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&kh(e,s,0,t)}zs(t)}function $(n,e=De.Default){let t=be();if(t===null)return B(n,e);let r=hn();return ZS(r,t,ln(n),e)}function VA(){let n="invalid";throw new Error(n)}function LA(n,e,t,r,i,s){let o=Ne(null);try{let a=null;i&Ni.SignalBased&&(a=e[r][$r]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ni.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):bS(e,a,r,s)}finally{Ne(o)}}function Dj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)zs(~i);else{let s=i,o=t[++r],a=t[++r];WL(o,s);let c=e[s];a(2,c)}}}finally{zs(-1)}}function Mf(n,e,t,r,i,s,o,a,c,u,d){let h=e.blueprint.slice();return h[Jr]=i,h[de]=r|4|128|8|64,(u!==null||n&&n[de]&2048)&&(h[de]|=2048),xS(h),h[Qt]=h[ma]=n,h[sr]=t,h[br]=o||n&&n[br],h[lt]=a||n&&n[lt],h[oa]=c||n&&n[oa]||null,h[_n]=s,h[gf]=S2(),h[xl]=d,h[ES]=u,h[qn]=e.type==2?n[qn]:h,h}function va(n,e,t,r,i){let s=n.data[e];if(s===null)s=Cj(n,e,t,r,i),GL()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=$L();s.injectorIndex=o===null?-1:o.injectorIndex}return Qs(s,!0),s}function Cj(n,e,t,r,i){let s=OS(),o=ew(),a=o?s:s&&s.parent,c=n.data[e]=Rj(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function jA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function UA(n,e,t,r,i){let s=$i(),o=r&2;try{zs(-1),o&&e.length>Yt&&FA(n,e,Yt,!1),_r(o?2:0,i),t(r,i)}finally{zs(s),_r(o?3:1,i)}}function vw(n,e,t){if(Jv(e)){let r=Ne(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ne(r)}}}function ww(n,e,t){NS()&&(Vj(n,e,t,or(t,e)),(t.flags&64)===64&&zA(n,e,t))}function _w(n,e,t=or){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function BA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Ew(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ew(n,e,t,r,i,s,o,a,c,u,d){let h=Yt+r,p=h+i,m=Tj(h,p),w=typeof u=="function"?u():u;return m[ye]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function Tj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Wn);return t}function Sj(n,e,t,r){let s=r.get(P2,uA)||t===Ir.ShadowDom,o=n.selectRootElement(e,s);return Aj(o),o}function Aj(n){xj(n)}var xj=()=>null;function Mj(n,e,t,r){let i=GA(e);i.push(t),n.firstCreatePass&&WA(n).push(r,i.length-1)}function Rj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return PS()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function kT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Ni.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}n===0?NT(r,t,u,a,c):NT(r,t,u,a)}return r}function NT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function kj(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let h=s[d],p=t?t.get(h):null,m=p?p.inputs:null,w=p?p.outputs:null;c=kT(0,h.inputs,d,c,m),u=kT(1,h.outputs,d,u,w);let D=c!==null&&o!==null&&!Qv(e)?Gj(c,d,o):null;a.push(D)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function Nj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Iw(n,e,t,r,i,s,o,a){let c=or(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(Dw(n,t,d,r,i),mf(e)&&Pj(t,e.index)):e.type&3?(r=Nj(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function Pj(n,e){let t=Bi(e,n);t[de]&16||(t[de]|=64)}function bw(n,e,t,r){if(NS()){let i=r===null?null:{"":-1},s=jj(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&$A(n,e,t,o,i,a),i&&Uj(t,r,i)}t.mergedAttrs=Sl(t.mergedAttrs,t.attrs)}function $A(n,e,t,r,i,s){for(let u=0;u<r.length;u++)Xy(Gh(t,e),n,r[u].type);$j(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=jA(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=Sl(t.mergedAttrs,d.hostAttrs),zj(n,t,e,c,d),Bj(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}kj(n,t,s)}function Oj(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;Fj(o)!=a&&o.push(a),o.push(t,r,s)}}function Fj(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Vj(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;mf(t)&&qj(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Gh(t,e),Fi(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],u=Hs(e,n,a,t);if(Fi(u,e),o!==null&&Hj(e,a-i,u,c,t,o),Oi(c)){let d=Bi(t.index,e);d[sr]=Hs(e,n,a,t)}}}function zA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=KL();try{zs(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Yy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Lj(c,u)}}finally{zs(-1),Yy(o)}}function Lj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function jj(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(lS(e,o.selectors,!1))if(r||(r=[]),Oi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;yv(n,e,c)}else r.unshift(o),yv(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function yv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Uj(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ne(-301,!1);r.push(e[i],s)}}}function Bj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Oi(e)&&(t[""]=n)}}function $j(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function zj(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=js(i.type,!0)),o=new qs(s,Oi(i),$);n.blueprint[r]=o,t[r]=o,Oj(n,e,r,jA(n,t,i.hostVars,Wn),i)}function qj(n,e,t){let r=or(e,n),i=BA(t),s=n[br].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Rf(n,Mf(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function Hj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],d=o[a++],h=o[a++];LA(r,t,c,u,d,h)}}function Gj(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function qA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function HA(n,e){let t=n.contentQueries;if(t!==null){let r=Ne(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];iw(s),a.contentQueries(2,e[o],o)}}}finally{Ne(r)}}}function Rf(n,e){return n[Ml]?n[pT][ir]=e:n[Ml]=e,n[pT]=e,e}function vv(n,e,t){iw(0);let r=Ne(null);try{e(n,t)}finally{Ne(r)}}function GA(n){return n[Uh]??=[]}function WA(n){return n.cleanup??=[]}function KA(n,e){let t=n[oa],r=t?t.get(Qr,null):null;r&&r.handleError(e)}function Dw(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],u=e[o],d=n.data[o];LA(d,u,r,a,c,i)}}function QA(n,e,t){let r=SS(e,n);aj(n[lt],r,t)}function Wj(n,e){let t=Bi(e,n),r=t[ye];Kj(r,t);let i=t[Jr];i!==null&&t[xl]===null&&(t[xl]=pw(i,t[oa])),Cw(r,t,t[sr])}function Kj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Cw(n,e,t){sw(e);try{let r=n.viewQuery;r!==null&&vv(1,r,t);let i=n.template;i!==null&&UA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Kr]?.finishViewCreation(n),n.staticContentQueries&&HA(n,e),n.staticViewQueries&&vv(2,n.viewQuery,t);let s=n.components;s!==null&&Qj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[de]&=-5,ow()}}function Qj(n,e){for(let t=0;t<e.length;t++)Wj(n,e[t])}function YA(n,e,t,r){let i=Ne(null);try{let s=e.tView,a=n[de]&4096?4096:16,c=Mf(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Us]=u;let d=n[Kr];return d!==null&&(c[Kr]=d.createEmbeddedView(s)),Cw(s,c,t),c}finally{Ne(i)}}function wv(n,e){return!e||e.firstChild===null||iA(n)}function ZA(n,e,t,r=!0){let i=e[ye];if(hj(i,e,n,t),r){let o=mv(t,n),a=e[lt],c=MA(a,n[Bs]);c!==null&&uj(i,n[_n],a,e,c,o)}let s=e[xl];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Zh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Dr(s)),Xr(s)&&Yj(s,r);let o=t.type;if(o&8)Zh(n,e,t.child,r);else if(o&32){let a=gw(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=kA(e,t);if(Array.isArray(a))r.push(...a);else{let c=$s(e[qn]);Zh(c[ye],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function Yj(n,e){for(let t=kn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&Zh(r[ye],r,i,e)}n[Bs]!==n[Jr]&&e.push(n[Bs])}var JA=[];function Zj(n){return n[zn]??Jj(n)}function Jj(n){let e=JA.pop()??Object.create(eU);return e.lView=n,e}function Xj(n){n.lView[zn]!==n&&(n.lView=null,JA.push(n))}var eU=te(M({},hl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{_f(n.lView)},consumerOnSignalRead(){this.lView[zn]=this}});function tU(n){let e=n[zn]??Object.create(nU);return e.lView=n,e}var nU=te(M({},hl),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=$s(n.lView);for(;e&&!XA(e[ye]);)e=$s(e);e&&MS(e)},consumerOnSignalRead(){this.lView[zn]=this}});function XA(n){return n.type!==2}var rU=100;function ex(n,e=!0,t=0){let r=n[br],i=r.rendererFactory,s=!1;s||i.begin?.();try{iU(n,t)}catch(o){throw e&&KA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function iU(n,e){let t=FS();try{mT(!0),_v(n,e);let r=0;for(;wf(n);){if(r===rU)throw new ne(103,!1);r++,_v(n,1)}}finally{mT(t)}}function sU(n,e,t,r){let i=e[de];if((i&256)===256)return;let s=!1,o=!1;!s&&e[br].inlineEffectRunner?.flush(),sw(e);let a=!0,c=null,u=null;s||(XA(n)?(u=Zj(e),c=Gd(u)):CC()===null?(a=!1,u=tU(e),c=Gd(u)):e[zn]&&(oy(e[zn]),e[zn]=null));try{xS(e),HL(n.bindingStartIndex),t!==null&&UA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&Rh(e,m,null)}else{let m=n.preOrderHooks;m!==null&&kh(e,m,0,null),Ay(e,0)}if(o||oU(e),tx(e,0),n.contentQueries!==null&&HA(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&Rh(e,m)}else{let m=n.contentHooks;m!==null&&kh(e,m,1),Ay(e,1)}Dj(n,e);let h=n.components;h!==null&&rx(e,h,0);let p=n.viewQuery;if(p!==null&&vv(2,p,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&Rh(e,m)}else{let m=n.viewHooks;m!==null&&kh(e,m,2),Ay(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Sy]){for(let m of e[Sy])m();e[Sy]=null}s||(e[de]&=-73)}catch(d){throw s||_f(e),d}finally{u!==null&&(iy(u,c),a&&Xj(u)),ow()}}function tx(n,e){for(let t=oA(n);t!==null;t=aA(t))for(let r=kn;r<t.length;r++){let i=t[r];nx(i,e)}}function oU(n){for(let e=oA(n);e!==null;e=aA(e)){if(!(e[de]&$h.HasTransplantedViews))continue;let t=e[aa];for(let r=0;r<t.length;r++){let i=t[r];MS(i)}}}function aU(n,e,t){let r=Bi(e,n);nx(r,t)}function nx(n,e){Xv(n)&&_v(n,e)}function _v(n,e){let r=n[ye],i=n[de],s=n[zn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&sy(s)),o||=!1,s&&(s.dirty=!1),n[de]&=-9217,o)sU(r,n,r.template,n[sr]);else if(i&8192){tx(n,1);let a=r.components;a!==null&&rx(n,a,1)}}function rx(n,e,t){for(let r=0;r<e.length;r++)aU(n,e[r],t)}function Tw(n,e){let t=FS()?64:1088;for(n[br].changeDetectionScheduler?.notify(e);n;){n[de]|=t;let r=$s(n);if(Wy(n)&&!r)return n;n=r}return null}var Gs=class{get rootNodes(){let e=this._lView,t=e[ye];return Zh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[sr]}set context(e){this._lView[sr]=e}get destroyed(){return(this._lView[de]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Qt];if(Xr(e)){let t=e[Bh],r=t?t.indexOf(this):-1;r>-1&&(gv(e,r),Vh(t,r))}this._attachedToViewContainer=!1}SA(this._lView[ye],this._lView)}onDestroy(e){RS(this._lView,e)}markForCheck(){Tw(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[de]&=-129}reattach(){Qy(this._lView),this._lView[de]|=128}detectChanges(){this._lView[de]|=1024,ex(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Wy(this._lView),t=this._lView[Us];t!==null&&!e&&mw(t,this._lView),CA(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e;let t=Wy(this._lView),r=this._lView[Us];r!==null&&!t&&TA(r,this._lView),Qy(this._lView)}},Ws=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=uU;let n=e;return n})(),cU=Ws,lU=class extends cU{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=YA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Gs(i)}};function uU(){return kf(hn(),be())}function kf(n,e){return n.type&4?new lU(e,n,ya(n,e)):null}var gJ=new RegExp(`^(\\d+)*(${k2}|${R2})*(.*)`);var dU=()=>null;function Ev(n,e){return dU(n,e)}var la=class{},ix=new W("",{providedIn:"root",factory:()=>!1});var sx=new W(""),ox=new W(""),Iv=class{},Jh=class{};function hU(n){let e=Error(`No component factory found for ${un(n)}.`);return e[fU]=n,e}var fU="ngComponent";var bv=class{resolveComponentFactory(e){throw hU(e)}},Gw=class Gw{};Gw.NULL=new bv;var ua=Gw,da=class{},In=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>pU();let n=e;return n})();function pU(){let n=be(),e=hn(),t=Bi(e.index,n);return(ki(t)?t:n)[lt]}var gU=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();function Xh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=jy(i,a);else if(s==2){let c=a,u=e[++o];r=jy(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ef=class extends ua{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Pi(e);return new ha(t,this.ngModule)}};function PT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Ni.None;e?t.push({propName:o,templateName:r,isSignal:(a&Ni.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function mU(n){let e=n.toLowerCase();return e==="svg"?RL:e==="math"?kL:null}var ha=class extends Jh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=PT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return PT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=lL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ne(null);try{i=i||this.ngModule;let o=i instanceof dn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Zy(e,o):e,c=a.get(da,null);if(c===null)throw new ne(407,!1);let u=a.get(gU,null),d=a.get(la,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",w=r?Sj(p,r,this.componentDef.encapsulation,a):DA(p,m,mU(m)),D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let C=null;w!==null&&(C=pw(w,a,!0));let N=Ew(0,null,null,1,0,null,null,null,null,null,null),V=Mf(null,N,null,D,null,null,h,p,a,null,C);sw(V);let L,H,Z=null;try{let Q=this.componentDef,I,v=null;Q.findHostDirectiveDefs?(I=[],v=new Map,Q.findHostDirectiveDefs(Q,I,v),I.push(Q)):I=[Q];let _=yU(V,w);Z=vU(_,w,Q,I,V,h,p),H=AS(N,Yt),w&&EU(p,Q,w,r),t!==void 0&&IU(H,this.ngContentSelectors,t),L=_U(Z,Q,I,v,V,[bU]),Cw(N,V,null)}catch(Q){throw Z!==null&&sv(Z),sv(V),Q}finally{ow()}return new Dv(this.componentType,L,ya(H,V),V,H)}finally{Ne(s)}}},Dv=class extends Iv{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Gs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Dw(s[ye],s,i,e,t),this.previousInputValues.set(e,t);let o=Bi(this._tNode.index,s);Tw(o,1)}}get injector(){return new Ls(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function yU(n,e){let t=n[ye],r=Yt;return n[r]=e,va(t,r,2,"#host",null)}function vU(n,e,t,r,i,s,o){let a=i[ye];wU(r,n,e,o);let c=null;e!==null&&(c=pw(e,i[oa]));let u=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let h=Mf(i,BA(t),null,d,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&yv(a,n,r.length-1),Rf(i,h),i[n.index]=h}function wU(n,e,t,r){for(let i of n)e.mergedAttrs=Sl(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Xh(e,e.mergedAttrs,!0),t!==null&&OA(r,t,e))}function _U(n,e,t,r,i,s){let o=hn(),a=i[ye],c=or(o,i);$A(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let h=o.directiveStart+d,p=Hs(i,a,h,o);Fi(p,i)}zA(a,i,o),c&&Fi(c,i);let u=Hs(i,a,o.directiveStart+o.componentOffset,o);if(n[sr]=i[sr]=u,s!==null)for(let d of s)d(u,e);return vw(a,o,i),u}function EU(n,e,t,r){if(r)zy(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=uL(e.selectors[0]);i&&zy(n,t,i),s&&s.length>0&&PA(n,t,s.join(" "))}}function IU(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function bU(){let n=hn();bf(be()[ye],n)}var bn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DU;let n=e;return n})();function DU(){let n=hn();return cx(n,be())}var CU=bn,ax=class extends CU{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ya(this._hostTNode,this._hostLView)}get injector(){return new Ls(this._hostTNode,this._hostLView)}get parentInjector(){let e=cw(this._hostTNode,this._hostLView);if(HS(e)){let t=qh(e,this._hostLView),r=zh(e),i=t[ye].data[r+8];return new Ls(i,t)}else return new Ls(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=OT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-kn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Ev(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,wv(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!SL(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new ha(Pi(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let D=(o?u:this.parentInjector).get(dn,null);D&&(s=D)}let d=Pi(c.componentType??{}),h=Ev(this._lContainer,d?.id??null),p=h?.firstChild??null,m=c.create(u,i,p,s);return this.insertImpl(m.hostView,a,wv(this._hostTNode,h)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(PL(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Qt],u=new ax(c,c[_n],c[Qt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return ZA(o,i,s,r),e.attachToViewContainerRef(),iS(Ny(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=OT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=gv(this._lContainer,t);r&&(Vh(Ny(this._lContainer),t),SA(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=gv(this._lContainer,t);return r&&Vh(Ny(this._lContainer),t)!=null?new Gs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function OT(n){return n[Bh]}function Ny(n){return n[Bh]||(n[Bh]=[])}function cx(n,e){let t,r=e[n.index];return Xr(r)?t=r:(t=qA(r,e,null,n),e[n.index]=t,Rf(e,t)),SU(t,e,n,r),new ax(t,n,e)}function TU(n,e){let t=n[lt],r=t.createComment(""),i=or(e,n),s=MA(t,i);return Yh(t,s,r,mj(t,i),!1),r}var SU=MU,AU=()=>!1;function xU(n,e,t){return AU(n,e,t)}function MU(n,e,t,r){if(n[Bs])return;let i;t.type&8?i=Dr(r):i=TU(e,t),n[Bs]=i}var Cv=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Tv=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Sw(e,t).matches!==null&&this.queries[t].setDirty()}},Sv=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=LU(e):this.predicate=e}},Av=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},xv=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,RU(t,s)),this.matchTNodeWithReadOption(e,t,Nh(t,e,s,!1,!1))}else r===Ws?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Nh(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===It||i===bn||i===Ws&&t.type&4)this.addMatch(t.index,-2);else{let s=Nh(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function RU(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function kU(n,e){return n.type&11?ya(n,e):n.type&4?kf(n,e):null}function NU(n,e,t,r){return t===-1?kU(e,n):t===-2?PU(n,e,r):Hs(n,n[ye],t,e)}function PU(n,e,t){if(t===It)return ya(e,n);if(t===Ws)return kf(e,n);if(t===bn)return cx(e,n)}function lx(n,e,t,r){let i=e[Kr].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let d=s[u];a.push(NU(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function Mv(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=lx(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],d=e[-c];for(let h=kn;h<d.length;h++){let p=d[h];p[Us]===p[Qt]&&Mv(p[ye],p,u,r)}if(d[aa]!==null){let h=d[aa];for(let p=0;p<h.length;p++){let m=h[p];Mv(m[ye],m,u,r)}}}}}return r}function OU(n,e){return n[Kr].queries[e].queryList}function FU(n,e,t){let r=new iv((t&4)===4);return Mj(n,e,r,r.destroy),(e[Kr]??=new Tv).queries.push(new Cv(r))-1}function VU(n,e,t){let r=Et();return r.firstCreatePass&&(jU(r,new Sv(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),FU(r,be(),e)}function LU(n){return n.split(",").map(e=>e.trim())}function jU(n,e,t){n.queries===null&&(n.queries=new Av),n.queries.track(new xv(e,t))}function Sw(n,e){return n.queries.getByIndex(e)}function UU(n,e){let t=n[ye],r=Sw(t,e);return r.crossesNgTemplate?Mv(t,n,e,[]):lx(t,n,r,e)}var FT=new Set;function wa(n){FT.has(n)||(FT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function BU(n){return typeof n=="function"&&n[$r]!==void 0}function Vl(n,e){wa("NgSignals");let t=FC(n),r=t[$r];return e?.equal&&(r.equal=e.equal),t.set=i=>ay(r,i),t.update=i=>VC(r,i),t.asReadonly=$U.bind(t),t}function $U(){let n=this[$r];if(n.readonlyFn===void 0){let e=()=>this();e[$r]=n,n.readonlyFn=e}return n.readonlyFn}function ux(n){return BU(n)&&typeof n.set=="function"}function zU(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(WU))}return s}return tf.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,p)=>{a.push(""),o.push(r(h).then(m=>{a[u+p]=m,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>KU(s));e.push(c)}),HU(),Promise.all(e).then(()=>{})}var tf=new Map,qU=new Set;function HU(){let n=tf;return tf=new Map,n}function GU(){return tf.size===0}function WU(n){return typeof n=="string"?n:n.text()}function KU(n){qU.delete(n)}function QU(n){return Object.getPrototypeOf(n.prototype).constructor}function ut(n){let e=QU(n.type),t=!0,r=[n];for(;e;){let i;if(Oi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ne(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Th(n.inputs),o.inputTransforms=Th(n.inputTransforms),o.declaredInputs=Th(n.declaredInputs),o.outputs=Th(n.outputs);let a=i.hostBindings;a&&eB(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&JU(n,c),u&&XU(n,u),YU(n,i),SV(n.outputs,i.outputs),Oi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===ut&&(t=!1)}}e=Object.getPrototypeOf(e)}ZU(r)}function YU(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function ZU(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Sl(i.hostAttrs,t=Sl(t,i.hostAttrs))}}function Th(n){return n===ra?{}:n===wn?[]:n}function JU(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function XU(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function eB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Vi=class{},Rl=class{};var nf=class extends Vi{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ef(this);let s=fS(e);this._bootstrapComponents=bA(s.bootstrap),this._r3Injector=eA(e,t,[{provide:Vi,useValue:this},{provide:ua,useValue:this.componentFactoryResolver},...r],un(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},rf=class extends Rl{constructor(e){super(),this.moduleType=e}create(e){return new nf(this.moduleType,e,[])}};function tB(n,e,t){return new nf(n,e,t,!1)}var Rv=class extends Vi{constructor(e){super(),this.componentFactoryResolver=new ef(this),this.instance=null;let t=new Al([...e.providers,{provide:Vi,useValue:this},{provide:ua,useValue:this.componentFactoryResolver}],e.parent||Zv(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Nf(n,e,t=null){return new Rv({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function dx(n){return Aw(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function nB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Aw(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xw(n,e,t){return n[e]=t}function Zr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Mw(n,e,t,r){let i=Zr(n,e,t);return Zr(n,e+1,r)||i}function rB(n,e,t,r,i){let s=Mw(n,e,t,r);return Zr(n,e+2,i)||s}function iB(n){return(n.flags&32)===32}function sB(n,e,t,r,i,s,o,a,c){let u=e.consts,d=va(e,n,4,o||null,a||null);bw(e,t,d,ca(u,c)),bf(e,d);let h=d.tView=Ew(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function hx(n,e,t,r,i,s,o,a,c,u){let d=t+Yt,h=e.firstCreatePass?sB(d,e,n,r,i,s,o,a,c):e.data[d];Qs(h,!1);let p=oB(e,n,h,t);Ef()&&Af(e,n,p,h),Fi(p,n);let m=qA(p,n,p,h);return n[d]=m,Rf(n,m),xU(m,h,n),yf(h)&&ww(e,n,h),c!=null&&_w(n,h,u),h}function ve(n,e,t,r,i,s,o,a){let c=be(),u=Et(),d=ca(u.consts,s);return hx(c,u,n,e,t,r,i,d,o,a),ve}var oB=aB;function aB(n,e,t,r){return If(!0),e[lt].createComment("")}var ea=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ea||{}),fx=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})(),Vs=class Vs{constructor(){this.ngZone=G(Ce),this.scheduler=G(la),this.errorHandler=G(Qr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of Vs.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};Vs.PHASES=[ea.EarlyRead,ea.Write,ea.MixedReadWrite,ea.Read],Vs.\u0275prov=K({token:Vs,providedIn:"root",factory:()=>new Vs});var kv=Vs,Nv=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Rw(n,e){!e?.injector&&CL(Rw);let t=e?.injector??G(Nn);return ij(t)?(wa("NgAfterNextRender"),lB(n,t,e,!0)):uB}function cB(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function lB(n,e,t,r){let i=e.get(fx);i.impl??=e.get(kv);let s=t?.phase??ea.MixedReadWrite,o=new Nv(i.impl,cB(n,s),r,e.get(lw));return i.impl.register(o),o}var uB={destroy(){}};function kw(n,e,t,r){return Zr(n,nw(),t)?e+Cl(t)+r:Wn}function dB(n,e,t,r,i,s){let o=qL(),a=Mw(n,o,t,i);return rw(2),a?e+Cl(t)+r+Cl(i)+s:Wn}function Sh(n,e){return n<<17|e<<2}function Ks(n){return n>>17&32767}function hB(n){return(n&2)==2}function fB(n,e){return n&131071|e<<17}function Pv(n){return n|2}function fa(n){return(n&131068)>>2}function Py(n,e){return n&-131069|e<<2}function pB(n){return(n&1)===1}function Ov(n){return n|1}function gB(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ks(o),c=fa(o);n[r]=t;let u=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||Pl(h,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let p=Ks(n[a+1]);n[r+1]=Sh(p,a),p!==0&&(n[p+1]=Py(n[p+1],r)),n[a+1]=fB(n[a+1],r)}else n[r+1]=Sh(a,0),a!==0&&(n[a+1]=Py(n[a+1],r)),a=r;else n[r+1]=Sh(c,0),a===0?a=r:n[c+1]=Py(n[c+1],r),c=r;u&&(n[r+1]=Pv(n[r+1])),VT(n,d,r,!0),VT(n,d,r,!1),mB(e,d,n,r,s),o=Sh(a,c),s?e.classBindings=o:e.styleBindings=o}function mB(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Pl(s,e)>=0&&(t[r+1]=Ov(t[r+1]))}function VT(n,e,t,r){let i=n[t+1],s=e===null,o=r?Ks(i):fa(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];yB(c,e)&&(a=!0,n[o+1]=r?Ov(u):Pv(u)),o=r?Ks(u):fa(u)}a&&(n[t+1]=r?Pv(i):Ov(i))}function yB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Pl(n,e)>=0:!1}var xt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function px(n){return n.substring(xt.key,xt.keyEnd)}function vB(n){return n.substring(xt.value,xt.valueEnd)}function wB(n){return yx(n),gx(n,pa(n,0,xt.textEnd))}function gx(n,e){let t=xt.textEnd;return t===e?-1:(e=xt.keyEnd=EB(n,xt.key=e,t),pa(n,e,t))}function _B(n){return yx(n),mx(n,pa(n,0,xt.textEnd))}function mx(n,e){let t=xt.textEnd,r=xt.key=pa(n,e,t);return t===r?-1:(r=xt.keyEnd=IB(n,r,t),r=LT(n,r,t,58),r=xt.value=pa(n,r,t),r=xt.valueEnd=bB(n,r,t),LT(n,r,t,59))}function yx(n){xt.key=0,xt.keyEnd=0,xt.value=0,xt.valueEnd=0,xt.textEnd=n.length}function pa(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function EB(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function IB(n,e,t){let r;for(;e<t&&((r=n.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function LT(n,e,t,r){return e=pa(n,e,t),e<t&&e++,e}function bB(n,e,t){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<t;){let c=n.charCodeAt(o++);if(c===59)return a;c===34||c===39?a=o=jT(n,c,o,t):e===o-4&&s===85&&i===82&&r===76&&c===40?a=o=jT(n,41,o,t):c>32&&(a=o),s=i,i=r,r=c&-33}return a}function jT(n,e,t,r){let i=-1,s=t;for(;s<r;){let o=n.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function J(n,e,t){let r=be(),i=nw();if(Zr(r,i,e)){let s=Et(),o=aw();Iw(s,o,r,n,e,r[lt],t,!1)}return J}function Fv(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Dw(n,t,s[o],o,r)}function _a(n,e,t){return vx(n,e,t,!1),_a}function Ea(n,e){return vx(n,e,null,!0),Ea}function Nw(n){wx(Ix,DB,n,!1)}function DB(n,e){for(let t=_B(e);t>=0;t=mx(e,t))Ix(n,px(e),vB(e))}function CB(n,e){for(let t=wB(e);t>=0;t=gx(e,t))hf(n,px(e),!0)}function vx(n,e,t,r){let i=be(),s=Et(),o=rw(2);if(s.firstUpdatePass&&Ex(s,n,o,r),e!==Wn&&Zr(i,o,e)){let a=s.data[$i()];bx(s,a,i,i[lt],n,i[o+1]=kB(e,t),r,o)}}function wx(n,e,t,r){let i=Et(),s=rw(2);i.firstUpdatePass&&Ex(i,null,s,r);let o=be();if(t!==Wn&&Zr(o,s,t)){let a=i.data[$i()];if(Dx(a,r)&&!_x(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=jy(c,t||"")),Fv(i,a,o,t,r)}else RB(i,a,o,o[lt],o[s+1],o[s+1]=MB(n,e,t),r,s)}}function _x(n,e){return e>=n.expandoStartIndex}function Ex(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[$i()],o=_x(n,t);Dx(s,r)&&e===null&&!o&&(e=!1),e=TB(i,s,e,r),gB(i,s,e,t,o,r)}}function TB(n,e,t,r){let i=QL(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Oy(null,n,e,t,r),t=kl(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Oy(i,n,e,t,r),s===null){let c=SB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Oy(null,n,e,c[1],r),c=kl(c,e.attrs,r),AB(n,e,r,c))}else s=xB(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function SB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(fa(r)!==0)return n[Ks(r)]}function AB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ks(i)]=r}function xB(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=kl(r,o,t)}return kl(r,e.attrs,t)}function Oy(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=kl(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function kl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),hf(n,o,t?!0:e[++s]))}return n===void 0?null:n}function MB(n,e,t){if(t==null||t==="")return wn;let r=[],i=Gn(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function Ix(n,e,t){hf(n,e,Gn(t))}function RB(n,e,t,r,i,s,o,a){i===Wn&&(i=wn);let c=0,u=0,d=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;d!==null||h!==null;){let p=c<i.length?i[c+1]:void 0,m=u<s.length?s[u+1]:void 0,w=null,D;d===h?(c+=2,u+=2,p!==m&&(w=h,D=m)):h===null||d!==null&&d<h?(c+=2,w=d):(u+=2,w=h,D=m),w!==null&&bx(n,e,t,r,w,D,o,a),d=c<i.length?i[c]:null,h=u<s.length?s[u]:null}}function bx(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=pB(u)?UT(c,e,t,i,fa(u),o):void 0;if(!sf(d)){sf(s)||hB(u)&&(s=UT(c,null,t,i,a,o));let h=SS($i(),t);Ij(r,o,h,i,s)}}function UT(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,h=d===null,p=t[i+1];p===Wn&&(p=h?wn:void 0);let m=h?Cy(p,r):d===r?p:void 0;if(u&&!sf(m)&&(m=Cy(c,r)),sf(m)&&(a=m,o))return a;let w=n[i+1];i=o?Ks(w):fa(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Cy(c,r))}return a}function sf(n){return n!==void 0}function kB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=un(Gn(n)))),n}function Dx(n,e){return(n.flags&(e?8:16))!==0}function Pf(n,e,t){let r=be(),i=kw(r,n,e,t);wx(hf,CB,i,!0)}function NB(n,e,t,r,i,s){let o=e.consts,a=ca(o,i),c=va(e,n,2,r,a);return bw(e,t,c,ca(o,s)),c.attrs!==null&&Xh(c,c.attrs,!1),c.mergedAttrs!==null&&Xh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function R(n,e,t,r){let i=be(),s=Et(),o=Yt+n,a=i[lt],c=s.firstCreatePass?NB(o,s,i,e,t,r):s.data[o],u=PB(s,i,c,a,e,n);i[o]=u;let d=yf(c);return Qs(c,!0),OA(a,u,c),!iB(c)&&Ef()&&Af(s,i,u,c),VL()===0&&Fi(u,i),LL(),d&&(ww(s,i,c),vw(s,c,i)),r!==null&&_w(i,c),R}function P(){let n=hn();ew()?tw():(n=n.parent,Qs(n,!1));let e=n;UL(e)&&BL(),jL();let t=Et();return t.firstCreatePass&&(bf(t,n),Jv(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&n2(e)&&Fv(t,e,be(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&r2(e)&&Fv(t,e,be(),e.stylesWithoutHost,!1),P}function ce(n,e,t,r){return R(n,e,t,r),P(),ce}var PB=(n,e,t,r,i,s)=>(If(!0),DA(r,i,JL()));function OB(n,e,t,r,i){let s=e.consts,o=ca(s,r),a=va(e,n,8,"ng-container",o);o!==null&&Xh(a,o,!0);let c=ca(s,i);return bw(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Pw(n,e,t){let r=be(),i=Et(),s=n+Yt,o=i.firstCreatePass?OB(s,i,r,e,t):i.data[s];Qs(o,!0);let a=FB(i,r,o,n);return r[s]=a,Ef()&&Af(i,r,a,o),Fi(a,r),yf(o)&&(ww(i,r,o),vw(i,o,r)),t!=null&&_w(r,o),Pw}function Ow(){let n=hn(),e=Et();return ew()?tw():(n=n.parent,Qs(n,!1)),e.firstCreatePass&&(bf(e,n),Jv(n)&&e.queries.elementEnd(n)),Ow}var FB=(n,e,t,r)=>(If(!0),cj(e[lt],""));function Dn(){return be()}var Os=void 0;function VB(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var LB=["en",[["a","p"],["AM","PM"],Os],[["AM","PM"],Os,Os],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Os,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Os,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Os,"{1} 'at' {0}",Os],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",VB],Fy={};function Fw(n){let e=jB(n),t=BT(e);if(t)return t;let r=e.split("-")[0];if(t=BT(r),t)return t;if(r==="en")return LB;throw new ne(701,!1)}function BT(n){return n in Fy||(Fy[n]=Ut.ng&&Ut.ng.common&&Ut.ng.common.locales&&Ut.ng.common.locales[n]),Fy[n]}var Ia=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Ia||{});function jB(n){return n.toLowerCase().replace(/_/g,"-")}var of="en-US";var UB=of;function BB(n){typeof n=="string"&&(UB=n.toLowerCase().replace(/_/g,"-"))}var $B=(n,e,t)=>{};function Me(n,e,t,r){let i=be(),s=Et(),o=hn();return Cx(s,i,i[lt],o,n,e,r),Me}function zB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Uh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function Cx(n,e,t,r,i,s,o){let a=yf(r),u=n.firstCreatePass&&WA(n),d=e[sr],h=GA(e),p=!0;if(r.type&3||o){let D=or(r,e),C=o?o(D):D,N=h.length,V=o?H=>o(Dr(H[r.index])):r.index,L=null;if(!o&&a&&(L=zB(n,e,i,r.index)),L!==null){let H=L.__ngLastListenerFn__||L;H.__ngNextListenerFn__=s,L.__ngLastListenerFn__=s,p=!1}else{s=zT(r,e,d,s),$B(D,i,s);let H=t.listen(C,i,s);h.push(s,H),u&&u.push(i,V,N,N+1)}}else s=zT(r,e,d,s);let m=r.outputs,w;if(p&&m!==null&&(w=m[i])){let D=w.length;if(D)for(let C=0;C<D;C+=2){let N=w[C],V=w[C+1],Z=e[N][V].subscribe(s),Q=h.length;h.push(s,Z),u&&u.push(i,r.index,Q,-(Q+1))}}}function $T(n,e,t,r){let i=Ne(null);try{return _r(6,e,t),t(r)!==!1}catch(s){return KA(n,s),!1}finally{_r(7,e,t),Ne(i)}}function zT(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Bi(n.index,e):e;Tw(o,5);let a=$T(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=$T(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function ue(n=1){return ZL(n)}function qB(n,e){let t=null,r=iL(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?lS(n,s,!0):aL(r,s))return i}return t}function Tx(n){let e=be()[qn][_n];if(!e.projection){let t=n?n.length:1,r=e.projection=KV(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?qB(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function Sx(n,e=0,t,r,i,s){let o=be(),a=Et(),c=r?n+1:null;c!==null&&hx(o,a,c,r,i,s,null,t);let u=va(a,Yt+n,16,null,t||null);u.projection===null&&(u.projection=e),tw();let h=!o[xl]||PS();o[qn][_n].projection[u.projection]===null&&c!==null?HB(o,a,c):h&&(u.flags&32)!==32&&_j(a,o,u)}function HB(n,e,t){let r=Yt+t,i=e.data[r],s=n[r],o=Ev(s,i.tView.ssrId),a=YA(n,i,void 0,{dehydratedView:o});ZA(s,a,0,wv(i,o))}function Pn(n,e,t){return Of(n,"",e,"",t),Pn}function Of(n,e,t,r,i){let s=be(),o=kw(s,e,t,r);if(o!==Wn){let a=Et(),c=aw();Iw(a,c,s,n,o,s[lt],i,!1)}return Of}function Ll(n,e,t){VU(n,e,t)}function ba(n){let e=be(),t=Et(),r=VS();iw(r+1);let i=Sw(t,r);if(n.dirty&&NL(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=UU(e,r);n.reset(s,D2),n.notifyOnChanges()}return!0}return!1}function Da(){return OU(be(),VS())}function GB(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Ca(n){let e=zL();return vf(e,Yt+n)}function U(n,e=""){let t=be(),r=Et(),i=n+Yt,s=r.firstCreatePass?va(r,i,1,e,null):r.data[i],o=WB(r,t,s,e,n);t[i]=o,Ef()&&Af(r,t,o,s),Qs(s,!1)}var WB=(n,e,t,r,i)=>(If(!0),oj(e[lt],r));function Ve(n){return ft("",n,""),Ve}function ft(n,e,t){let r=be(),i=kw(r,n,e,t);return i!==Wn&&QA(r,$i(),i),ft}function Ff(n,e,t,r,i){let s=be(),o=dB(s,n,e,t,r,i);return o!==Wn&&QA(s,$i(),o),Ff}function Hi(n,e,t){ux(e)&&(e=e());let r=be(),i=nw();if(Zr(r,i,e)){let s=Et(),o=aw();Iw(s,o,r,n,e,r[lt],t,!1)}return Hi}function Zs(n,e){let t=ux(n);return t&&n.set(e),t}function Gi(n,e){let t=be(),r=Et(),i=hn();return Cx(r,t,t[lt],i,n,e),Gi}function KB(n,e,t){let r=Et();if(r.firstCreatePass){let i=Oi(n);Vv(t,r.data,r.blueprint,i,!0),Vv(e,r.data,r.blueprint,i,!1)}}function Vv(n,e,t,r,i){if(n=ln(n),Array.isArray(n))for(let s=0;s<n.length;s++)Vv(n[s],e,t,r,i);else{let s=Et(),o=be(),a=hn(),c=sa(n)?n:ln(n.provide),u=wS(n),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(sa(n)||!n.multi){let m=new qs(u,i,$),w=Ly(c,e,i?d:d+p,h);w===-1?(Xy(Gh(a,o),s,c),Vy(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[w]=m,o[w]=m)}else{let m=Ly(c,e,d+p,h),w=Ly(c,e,d,d+p),D=m>=0&&t[m],C=w>=0&&t[w];if(i&&!C||!i&&!D){Xy(Gh(a,o),s,c);let N=ZB(i?YB:QB,t.length,i,r,u);!i&&C&&(t[w].providerFactory=N),Vy(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(N),o.push(N)}else{let N=Ax(t[i?w:m],u,!i&&r);Vy(s,n,m>-1?m:w,N)}!i&&r&&C&&t[w].componentProviders++}}}function Vy(n,e,t,r){let i=sa(e),s=vL(e);if(i||s){let c=(s?ln(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function Ax(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Ly(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function QB(n,e,t,r){return Lv(this.multi,[])}function YB(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Hs(t,t[ye],this.providerFactory.index,r);s=a.slice(0,o),Lv(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Lv(i,s);return s}function Lv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function ZB(n,e,t,r,i){let s=new qs(n,t,$);return s.multi=[],s.index=e,s.componentProviders=0,Ax(s,i,r&&!t),s}function Ta(n,e=[]){return t=>{t.providersResolver=(r,i)=>KB(r,i?i(n):n,e)}}var JB=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=mS(!1,r.type),s=i.length>0?Nf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=K({token:e,providedIn:"environment",factory:()=>new e(B(dn))});let n=e;return n})();function jl(n){wa("NgStandalone"),n.getStandaloneInjector=e=>e.get(JB).getOrCreateStandaloneInjector(n)}function xx(n,e,t){let r=n.\u0275cmp;r.directiveDefs=jh(e,!1),r.pipeDefs=jh(t,!0)}function Vf(n,e,t,r){return Mx(be(),Ol(),n,e,t,r)}function Lf(n,e,t,r,i){return Rx(be(),Ol(),n,e,t,r,i)}function Vw(n,e){let t=n[e];return t===Wn?void 0:t}function Mx(n,e,t,r,i,s){let o=e+t;return Zr(n,o,i)?xw(n,o+1,s?r.call(s,i):r(i)):Vw(n,o+1)}function Rx(n,e,t,r,i,s,o){let a=e+t;return Mw(n,a,i,s)?xw(n,a+2,o?r.call(o,i,s):r(i,s)):Vw(n,a+2)}function XB(n,e,t,r,i,s,o,a){let c=e+t;return rB(n,c,i,s,o)?xw(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):Vw(n,c+3)}function kt(n,e){let t=Et(),r,i=n+Yt;t.firstCreatePass?(r=e$(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=js(r.type,!0)),o,a=vn($);try{let c=Hh(!1),u=s();return Hh(c),GB(t,be(),i,u),u}finally{vn(a)}}function e$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function On(n,e,t){let r=n+Yt,i=be(),s=vf(i,r);return Lw(i,r)?Mx(i,Ol(),e,s.transform,t,s):s.transform(t)}function kx(n,e,t,r){let i=n+Yt,s=be(),o=vf(s,i);return Lw(s,i)?Rx(s,Ol(),e,o.transform,t,r,o):o.transform(t,r)}function Sa(n,e,t,r,i){let s=n+Yt,o=be(),a=vf(o,s);return Lw(o,s)?XB(o,Ol(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function Lw(n,e){return n[ye].data[e].pure}function Aa(n,e){return kf(n,e)}var Ah=null;function t$(n){Ah!==null&&(n.defaultEncapsulation!==Ah.defaultEncapsulation||n.preserveWhitespaces!==Ah.preserveWhitespaces)||(Ah=n)}var jf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var jw=new W(""),Ul=new W(""),Uf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Uw||(n$(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(B(Ce),B(Bf),B(Ul))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Bf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Uw?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function n$(n){Uw=n}var Uw;function Wi(n){return!!n&&typeof n.then=="function"}function Bw(n){return!!n&&typeof n.subscribe=="function"}var $f=new W(""),Nx=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=G($f,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Wi(o))r.push(o);else if(Bw(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),zf=new W("");function r$(){OC(()=>{throw new ne(600,!1)})}function i$(n){return n.isBoundToModule}var s$=10;function o$(n,e,t){try{let r=t();return Wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function Px(n,e){return Array.isArray(e)?e.reduce(Px,n):M(M({},n),e)}var ti=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(I2),this.afterRenderManager=G(fx),this.zonelessEnabled=G(ix),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ue,this.afterTick=new Ue,this.componentTypes=[],this.components=[],this.isStable=G(zi).hasPendingTasks.pipe(oe(r=>!r)),this._injector=G(dn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Jh;if(!this._injector.get(Nx).done){let m=!s&&hS(r),w=!1;throw new ne(405,w)}let a;s?a=r:a=this._injector.get(ua).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=i$(a)?void 0:this._injector.get(Vi),u=i||a.selector,d=a.create(Nn.NULL,[],u,c),h=d.location.nativeElement,p=d.injector.get(jw,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Ph(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ne(101,!1);let r=Ne(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Ne(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(da,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<s$;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)a$(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>wf(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Ph(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(zf,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Ph(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ne(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Ph(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function a$(n,e,t,r){if(!t&&!wf(n))return;ex(n,e,t&&!r?0:1)}var jv=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},qf=(()=>{let e=class e{compileModuleSync(r){return new rf(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=fS(r),o=bA(s.declarations).reduce((a,c)=>{let u=Pi(c);return u&&a.push(new ha(u)),a},[]);return new jv(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),c$=new W("");function l$(n,e,t){let r=new rf(t);return Promise.resolve(r)}function qT(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var u$=(()=>{let e=class e{constructor(){this.zone=G(Ce),this.changeDetectionScheduler=G(la),this.applicationRef=G(ti)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function d$({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new Ce(te(M({},Ox()),{scheduleInRootZone:t})),[{provide:Ce,useFactory:n},{provide:ia,multi:!0,useFactory:()=>{let r=G(u$,{optional:!0});return()=>r.initialize()}},{provide:ia,multi:!0,useFactory:()=>{let r=G(h$);return()=>{r.initialize()}}},e===!0?{provide:sx,useValue:!0}:[],{provide:ox,useValue:t??tA}]}function Ox(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var h$=(()=>{let e=class e{constructor(){this.subscription=new ct,this.initialized=!1,this.zone=G(Ce),this.pendingTasks=G(zi)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ce.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ce.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var f$=(()=>{let e=class e{constructor(){this.appRef=G(ti),this.taskService=G(zi),this.ngZone=G(Ce),this.zonelessEnabled=G(ix),this.disableScheduling=G(sx,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ct,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Kh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(ox,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Qh||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?ET:nA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Kh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ET(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function p$(){return typeof $localize<"u"&&$localize.locale||of}var Hf=new W("",{providedIn:"root",factory:()=>G(Hf,De.Optional|De.SkipSelf)||p$()});var $w=new W("");function xh(n){return!!n.platformInjector}function g$(n){let e=xh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(Ce);return t.run(()=>{xh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Qr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),xh(n)){let s=()=>e.destroy(),o=n.platformInjector.get($w);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{Ph(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return o$(r,t,()=>{let s=e.get(Nx);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Hf,of);if(BB(o||of),xh(n)){let a=e.get(ti);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return m$(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function m$(n,e){let t=n.injector.get(ti);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ne(-403,!1);e.push(n)}var Fx=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=i?.scheduleInRootZone,o=()=>E2(i?.ngZone,te(M({},Ox({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:s})),a=i?.ignoreChangesOutsideZone,c=[d$({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:la,useExisting:f$}],u=tB(r.moduleType,this.injector,c);return g$({moduleRef:u,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let s=Px({},i);return l$(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ne(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get($w,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(B(Nn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),Dl=null,Vx=new W("");function y$(n){if(Dl&&!Dl.get(Vx,!1))throw new ne(400,!1);r$(),Dl=n;let e=n.get(Fx);return _$(n),e}function zw(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(s=[])=>{let o=Lx();if(!o||o.injector.get(Vx,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):y$(v$(a,r))}return w$(i)}}function v$(n=[],e){return Nn.create({name:e,providers:[{provide:pf,useValue:"platform"},{provide:$w,useValue:new Set([()=>Dl=null])},...n]})}function w$(n){let e=Lx();if(!e)throw new ne(401,!1);return e}function Lx(){return Dl?.get(Fx)??null}function _$(n){n.get(hw,null)?.forEach(t=>t())}function qw(){return!1}var Tr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=E$;let n=e;return n})();function E$(n){return I$(hn(),be(),(n&16)===16)}function I$(n,e,t){if(mf(n)&&!t){let r=Bi(n.index,e);return new Gs(r,r)}else if(n.type&175){let r=e[qn];return new Gs(r,e)}return null}var Uv=class{constructor(){}supports(e){return dx(e)}create(e){return new Bv(e)}},b$=(n,e)=>e,Bv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||b$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<HT(r,i,s)?t:r,a=HT(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,d=c-i;if(u!=d){for(let p=0;p<u;p++){let m=p<s.length?s[p]:s[p]=0,w=m+p;d<=w&&w<u&&(s[p]=m+1)}let h=o.previousIndex;s[h]=d-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!dx(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,nB(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new $v(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new af),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new af),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},$v=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},zv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},af=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new zv,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function HT(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var qv=class{constructor(){}supports(e){return e instanceof Map||Aw(e)}create(){return new Hv}},Hv=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Aw(e)))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Gv(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Gv=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function GT(){return new Hw([new Uv])}var Hw=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||GT()),deps:[[e,new df,new ga]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new ne(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:GT});let n=e;return n})();function WT(){return new Gf([new qv])}var Gf=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||WT()),deps:[[e,new df,new ga]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new ne(901,!1)}};e.\u0275prov=K({token:e,providedIn:"root",factory:WT});let n=e;return n})();var jx=zw(null,"core",[]),Ux=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(B(ti))},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({});let n=e;return n})();var Bx=new W("");function Wf(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Bl(n,e){wa("NgSignals");let t=kC(n);return e?.equal&&(t[$r].equal=e.equal),t}function ar(n){let e=Ne(null);try{return n()}finally{Ne(e)}}function $x(n){let e=Pi(n);if(!e)return null;let t=new ha(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Yx=null;function cr(){return Yx}function Zx(n){Yx??=n}var Kf=class{};var Nt=new W(""),r_=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(S$),providedIn:"platform"});let n=e;return n})(),Jx=new W(""),S$=(()=>{let e=class e extends r_{constructor(){super(),this._doc=G(Nt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return cr().getBaseHref(this._doc)}onPopState(r){let i=cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=cr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function i_(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function zx(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function ni(n){return n&&n[0]!=="?"?"?"+n:n}var Js=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(s_),providedIn:"root"});let n=e;return n})(),Xx=new W(""),s_=(()=>{let e=class e extends Js{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??G(Nt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return i_(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+ni(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+ni(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+ni(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(B(r_),B(Xx,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),eM=(()=>{let e=class e extends Js{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=i_(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+ni(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+ni(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(B(r_),B(Xx,8))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Ma=(()=>{let e=class e{constructor(r){this._subject=new et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=M$(zx(qx(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+ni(i))}normalize(r){return e.stripTrailingSlash(x$(this._basePath,qx(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ni(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+ni(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=ni,e.joinWithSlash=i_,e.stripTrailingSlash=zx,e.\u0275fac=function(i){return new(i||e)(B(Js))},e.\u0275prov=K({token:e,factory:()=>A$(),providedIn:"root"});let n=e;return n})();function A$(){return new Ma(B(Js))}function x$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function qx(n){return n.replace(/\/index.html$/,"")}function M$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var tM=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(tM||{});var ri={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $l(n,e){let t=Fw(n),r=t[Ia.NumberSymbols][e];if(typeof r>"u"){if(e===ri.CurrencyDecimal)return t[Ia.NumberSymbols][ri.Decimal];if(e===ri.CurrencyGroup)return t[Ia.NumberSymbols][ri.Group]}return r}function R$(n,e){return Fw(n)[Ia.NumberFormats][e]}var k$=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Hx=22,Qf=".",zl="0",N$=";",P$=",",Ww="#";function O$(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=$l(t,ri.Infinity);else{let u=j$(n);o&&(u=L$(u));let d=e.minInt,h=e.minFrac,p=e.maxFrac;if(s){let V=s.match(k$);if(V===null)throw new Error(`${s} is not a valid digit info`);let L=V[1],H=V[3],Z=V[5];L!=null&&(d=Kw(L)),H!=null&&(h=Kw(H)),Z!=null?p=Kw(Z):H!=null&&h>p&&(p=h)}U$(u,h,p);let m=u.digits,w=u.integerLen,D=u.exponent,C=[];for(c=m.every(V=>!V);w<d;w++)m.unshift(0);for(;w<0;w++)m.unshift(0);w>0?C=m.splice(w,m.length):(C=m,m=[0]);let N=[];for(m.length>=e.lgSize&&N.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)N.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&N.unshift(m.join("")),a=N.join($l(t,r)),C.length&&(a+=$l(t,i)+C.join("")),D&&(a+=$l(t,ri.Exponential)+"+"+D)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function F$(n,e,t){let r=R$(e,tM.Decimal),i=V$(r,$l(e,ri.MinusSign));return O$(n,i,e,ri.Group,ri.Decimal,t)}function V$(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(N$),i=r[0],s=r[1],o=i.indexOf(Qf)!==-1?i.split(Qf):[i.substring(0,i.lastIndexOf(zl)+1),i.substring(i.lastIndexOf(zl)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(Ww));for(let d=0;d<c.length;d++){let h=c.charAt(d);h===zl?t.minFrac=t.maxFrac=d+1:h===Ww?t.maxFrac=d+1:t.posSuf+=h}let u=a.split(P$);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,h=s.indexOf(Ww);t.negPre=s.substring(0,h).replace(/'/g,""),t.negSuf=s.slice(h+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function L$(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function j$(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(Qf))>-1&&(e=e.replace(Qf,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===zl;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===zl;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>Hx&&(r=r.splice(0,Hx-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function U$(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let h=o;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let h=1;h<o;h++)r[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,u=e+n.integerLen,d=r.reduceRight(function(h,p,m,w){return p=p+h,w[m]=p<10?p:p-10,c&&(w[m]===0&&m>=u?w.pop():c=!1),p>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function Kw(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Yf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Qw=/\s+/,Gx=[],Ra=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=Gx,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Qw):Gx}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Qw):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Qw).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)($(It),$(In))},e.\u0275dir=_t({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var Yw=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zt=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Yw(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),Wx(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);Wx(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(bn),$(Ws),$(Hw))},e.\u0275dir=_t({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function Wx(n,e){n.context.$implicit=e.item}var Jt=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Zw,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){Kx("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){Kx("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(bn),$(Ws))},e.\u0275dir=_t({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),Zw=class{constructor(){this.$implicit=null,this.ngIf=null}};function Kx(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${un(e)}'.`)}var nM=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:Cr.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)($(It),$(Gf),$(In))},e.\u0275dir=_t({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let n=e;return n})();function o_(n,e){return new ne(2100,!1)}var Jw=class{createSubscription(e,t){return ar(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){ar(()=>e.unsubscribe())}},Xw=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},B$=new Xw,$$=new Jw,rM=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(Wi(r))return B$;if(Bw(r))return $$;throw o_(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)($(Tr,16))},e.\u0275pipe=ji({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();function z$(n,e){return{key:n,value:e}}var Ki=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=Qx}transform(r,i=Qx){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let s=this.differ.diff(r),o=i!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(z$(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)($(Gf,16))},e.\u0275pipe=ji({name:"keyvalue",type:e,pure:!1,standalone:!0});let n=e;return n})();function Qx(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var iM=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,s){if(!q$(r))return null;s||=this._locale;try{let o=H$(r);return F$(o,s,i)}catch(o){throw o_(e,o.message)}}};e.\u0275fac=function(i){return new(i||e)($(Hf,16))},e.\u0275pipe=ji({name:"number",type:e,pure:!0,standalone:!0});let n=e;return n})();function q$(n){return!(n==null||n===""||n!==n)}function H$(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var ka=(()=>{let e=class e{transform(r,i,s){if(r==null)return null;if(!this.supports(r))throw o_(e,r);return r.slice(i,s)}supports(r){return typeof r=="string"||Array.isArray(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=ji({name:"slice",type:e,pure:!1,standalone:!0});let n=e;return n})();var Na=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({});let n=e;return n})(),a_="browser",G$="server";function Qi(n){return n===a_}function Yi(n){return n===G$}var sM=(()=>{let e=class e{};e.\u0275prov=K({token:e,providedIn:"root",factory:()=>Qi(G(Bt))?new e_(G(Nt),window):new t_});let n=e;return n})(),e_=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=W$(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function W$(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var t_=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},xa=class{};var Hl=class{},Jf=class{},Cn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var l_=class{encodeKey(e){return oM(e)}encodeValue(e){return oM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function K$(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var Q$=/%(\d[a-f0-9])/gi,Y$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oM(n){return encodeURIComponent(n).replace(Q$,(e,t)=>Y$[t]??e)}function Zf(n){return`${n}`}var Ji=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new l_,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=K$(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Zf):[Zf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Zf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Zf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var u_=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Z$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function aM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function cM(n){return typeof Blob<"u"&&n instanceof Blob}function lM(n){return typeof FormData<"u"&&n instanceof FormData}function J$(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var ql=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(Z$(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Cn,this.context??=new u_,!this.params)this.params=new Ji,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||aM(this.body)||cM(this.body)||lM(this.body)||J$(this.body)?this.body:this.body instanceof Ji?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lM(this.body)?null:cM(this.body)?this.body.type||null:aM(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ji?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((p,m)=>p.set(m,e.setHeaders[m]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,m)=>p.set(m,e.setParams[m]),d)),new n(t,r,o,{params:d,headers:u,context:h,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},Xi=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Xi||{}),Gl=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Cn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Xf=class n extends Gl{constructor(e={}){super(e),this.type=Xi.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Wl=class n extends Gl{constructor(e={}){super(e),this.type=Xi.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zi=class extends Gl{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},fM=200,X$=204;function c_(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var ii=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof ql)o=r;else{let u;s.headers instanceof Cn?u=s.headers:u=new Cn(s.headers);let d;s.params&&(s.params instanceof Ji?d=s.params:d=new Ji({fromObject:s.params})),o=new ql(r,i,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=ae(o).pipe(Hr(u=>this.handler.handle(u)));if(r instanceof ql||s.observe==="events")return a;let c=a.pipe(At(u=>u instanceof Wl));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(oe(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(oe(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(oe(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(oe(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Ji().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,c_(s,i))}post(r,i,s={}){return this.request("POST",r,c_(s,i))}put(r,i,s={}){return this.request("PUT",r,c_(s,i))}};e.\u0275fac=function(i){return new(i||e)(B(Hl))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),e4=/^\)\]\}',?\n/,t4="X-Request-URL";function uM(n){if(n.url)return n.url;let e=t4.toLocaleLowerCase();return n.headers.get(e)}var n4=(()=>{let e=class e{constructor(){this.fetchImpl=G(d_,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=G(Ce)}handle(r){return new ge(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(h_,o=>i.error(new Zi({error:o}))),()=>s.abort()})}doRequest(r,i,s){return b(this,null,function*(){let o=this.createRequestInit(r),a;try{let w=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,M({signal:i},o)));r4(w),s.next({type:Xi.Sent}),a=yield w}catch(w){s.error(new Zi({error:w,status:w.status??0,statusText:w.statusText,url:r.urlWithParams,headers:w.headers}));return}let c=new Cn(a.headers),u=a.statusText,d=uM(a)??r.urlWithParams,h=a.status,p=null;if(r.reportProgress&&s.next(new Xf({headers:c,status:h,statusText:u,url:d})),a.body){let w=a.headers.get("content-length"),D=[],C=a.body.getReader(),N=0,V,L,H=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>b(this,null,function*(){for(;;){let{done:Q,value:I}=yield C.read();if(Q)break;if(D.push(I),N+=I.length,r.reportProgress){L=r.responseType==="text"?(L??"")+(V??=new TextDecoder).decode(I,{stream:!0}):void 0;let v=()=>s.next({type:Xi.DownloadProgress,total:w?+w:void 0,loaded:N,partialText:L});H?H.run(v):v()}}}));let Z=this.concatChunks(D,N);try{let Q=a.headers.get("Content-Type")??"";p=this.parseBody(r,Z,Q)}catch(Q){s.error(new Zi({error:Q,headers:new Cn(a.headers),status:a.status,statusText:a.statusText,url:uM(a)??r.urlWithParams}));return}}h===0&&(h=p?fM:0),h>=200&&h<300?(s.next(new Wl({body:p,headers:c,status:h,statusText:u,url:d})),s.complete()):s.error(new Zi({error:p,headers:c,status:h,statusText:u,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(e4,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),d_=class{};function h_(){}function r4(n){n.then(h_,h_)}function i4(n,e){return e(n)}function s4(n,e,t){return(r,i)=>Hn(t,()=>e(r,s=>n(s,i)))}var pM=new W(""),o4=new W(""),a4=new W("",{providedIn:"root",factory:()=>!0});var dM=(()=>{let e=class e extends Hl{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=G(zi),this.contributeToStability=G(a4)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(pM),...this.injector.get(o4,[])]));this.chain=i.reduceRight((s,o)=>s4(s,o,this.injector),i4)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(Ns(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(B(Jf),B(dn))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();var c4=/^\)\]\}',?\n/;function l4(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var hM=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ne(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Se(i.\u0275loadImpl()):ae(null)).pipe(Ye(()=>new ge(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,N)=>a.setRequestHeader(C,N.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let c=r.serializeBody(),u=null,d=()=>{if(u!==null)return u;let C=a.statusText||"OK",N=new Cn(a.getAllResponseHeaders()),V=l4(a)||r.url;return u=new Xf({headers:N,status:a.status,statusText:C,url:V}),u},h=()=>{let{headers:C,status:N,statusText:V,url:L}=d(),H=null;N!==X$&&(H=typeof a.response>"u"?a.responseText:a.response),N===0&&(N=H?fM:0);let Z=N>=200&&N<300;if(r.responseType==="json"&&typeof H=="string"){let Q=H;H=H.replace(c4,"");try{H=H!==""?JSON.parse(H):null}catch(I){H=Q,Z&&(Z=!1,H={error:I,text:H})}}Z?(o.next(new Wl({body:H,headers:C,status:N,statusText:V,url:L||void 0})),o.complete()):o.error(new Zi({error:H,headers:C,status:N,statusText:V,url:L||void 0}))},p=C=>{let{url:N}=d(),V=new Zi({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:N||void 0});o.error(V)},m=!1,w=C=>{m||(o.next(d()),m=!0);let N={type:Xi.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(N.total=C.total),r.responseType==="text"&&a.responseText&&(N.partialText=a.responseText),o.next(N)},D=C=>{let N={type:Xi.UploadProgress,loaded:C.loaded};C.lengthComputable&&(N.total=C.total),o.next(N)};return a.addEventListener("load",h),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),r.reportProgress&&(a.addEventListener("progress",w),c!==null&&a.upload&&a.upload.addEventListener("progress",D)),a.send(c),o.next({type:Xi.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",h),a.removeEventListener("timeout",p),r.reportProgress&&(a.removeEventListener("progress",w),c!==null&&a.upload&&a.upload.removeEventListener("progress",D)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(B(xa))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),gM=new W(""),u4="XSRF-TOKEN",d4=new W("",{providedIn:"root",factory:()=>u4}),h4="X-XSRF-TOKEN",f4=new W("",{providedIn:"root",factory:()=>h4}),ep=class{},p4=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yf(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(B(Nt),B(Bt),B(d4))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function g4(n,e){let t=n.url.toLowerCase();if(!G(gM)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=G(ep).getToken(),i=G(f4);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function mM(...n){let e=[ii,hM,dM,{provide:Hl,useExisting:dM},{provide:Jf,useFactory:()=>G(n4,{optional:!0})??G(hM)},{provide:pM,useValue:g4,multi:!0},{provide:gM,useValue:!0},{provide:ep,useClass:p4}];for(let t of n)e.push(...t.\u0275providers);return ff(e)}var m_=class extends Kf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},y_=class n extends m_{static makeCurrent(){Zx(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=m4();return t==null?null:y4(t)}resetBaseElement(){Kl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Yf(document.cookie,e)}},Kl=null;function m4(){return Kl=Kl||document.querySelector("base"),Kl?Kl.getAttribute("href"):null}function y4(n){return new URL(n,document.baseURI).pathname}var v_=class{addToWindow(e){Ut.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new ne(5103,!1);return s},Ut.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ut.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Ut.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Ut.frameworkStabilizers||(Ut.frameworkStabilizers=[]),Ut.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?cr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},v4=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),tp=new W(""),_M=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new ne(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(B(tp),B(Ce))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Ql=class{constructor(e){this._doc=e}},p_="ng-app-id",EM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Yi(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${p_}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(p_),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(p_,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(B(Nt),B(Df),B(fw,8),B(Bt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),g_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},__=/%COMP%/g,IM="%COMP%",w4=`_nghost-${IM}`,_4=`_ngcontent-${IM}`,E4=!0,I4=new W("",{providedIn:"root",factory:()=>E4});function b4(n){return _4.replace(__,n)}function D4(n){return w4.replace(__,n)}function bM(n,e){return e.map(t=>t.replace(__,n))}var yM=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Yi(c),this.defaultRenderer=new Yl(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Ir.ShadowDom&&(i=te(M({},i),{encapsulation:Ir.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof np?s.applyToHost(r):s instanceof Zl&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Ir.Emulated:o=new np(u,d,i,this.appId,h,a,c,p);break;case Ir.ShadowDom:return new w_(u,d,r,i,a,c,this.nonce,p);default:o=new Zl(u,d,i,h,a,c,p);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(B(_M),B(EM),B(Df),B(I4),B(Nt),B(Bt),B(Ce),B(fw))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Yl=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(g_[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(vM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(vM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ne(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=g_[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=g_[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Cr.DashCase|Cr.Important)?e.style.setProperty(t,r,i&Cr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Cr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=cr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function vM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var w_=class extends Yl{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=bM(i.id,i.styles);for(let d of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zl=class extends Yl{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?bM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},np=class extends Zl{constructor(e,t,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=b4(u),this.hostAttr=D4(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},C4=(()=>{let e=class e extends Ql{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(B(Nt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),T4=(()=>{let e=class e extends Ql{constructor(r){super(r),this.delegate=G(Bx,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(B(Nt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),wM=["alt","control","meta","shift"],S4={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},A4={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},x4=(()=>{let e=class e extends Ql{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>cr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),wM.forEach(d=>{let h=i.indexOf(d);h>-1&&(i.splice(h,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=S4[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),wM.forEach(a=>{if(a!==s){let c=A4[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(B(Nt))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function M4(){y_.makeCurrent()}function R4(){return new Qr}function k4(){return lA(document),document}var N4=[{provide:Bt,useValue:a_},{provide:hw,useValue:M4,multi:!0},{provide:Nt,useFactory:k4,deps:[]}],DM=zw(jx,"browser",N4),P4=new W(""),O4=[{provide:Ul,useClass:v_,deps:[]},{provide:jw,useClass:Uf,deps:[Ce,Bf,Ul]},{provide:Uf,useClass:Uf,deps:[Ce,Bf,Ul]}],F4=[{provide:pf,useValue:"root"},{provide:Qr,useFactory:R4,deps:[]},{provide:tp,useClass:C4,multi:!0,deps:[Nt,Ce,Bt]},{provide:tp,useClass:x4,multi:!0,deps:[Nt]},{provide:tp,useClass:T4,multi:!0},yM,EM,_M,{provide:da,useExisting:yM},{provide:xa,useClass:v4,deps:[]},[]],CM=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Df,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(B(P4,12))},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({providers:[...F4,...O4],imports:[Na,Ux]});let n=e;return n})(),TM=(()=>{let e=class e{constructor(r){this._doc=r,this._dom=cr()}addTag(r,i=!1){return r?this._getOrCreateElement(r,i):null}addTags(r,i=!1){return r?r.reduce((s,o)=>(o&&s.push(this._getOrCreateElement(o,i)),s),[]):[]}getTag(r){return r&&this._doc.querySelector(`meta[${r}]`)||null}getTags(r){if(!r)return[];let i=this._doc.querySelectorAll(`meta[${r}]`);return i?[].slice.call(i):[]}updateTag(r,i){if(!r)return null;i=i||this._parseSelector(r);let s=this.getTag(i);return s?this._setMetaElementAttributes(r,s):this._getOrCreateElement(r,!0)}removeTag(r){this.removeTagElement(this.getTag(r))}removeTagElement(r){r&&this._dom.remove(r)}_getOrCreateElement(r,i=!1){if(!i){let a=this._parseSelector(r),c=this.getTags(a).filter(u=>this._containsAttributes(r,u))[0];if(c!==void 0)return c}let s=this._dom.createElement("meta");return this._setMetaElementAttributes(r,s),this._doc.getElementsByTagName("head")[0].appendChild(s),s}_setMetaElementAttributes(r,i){return Object.keys(r).forEach(s=>i.setAttribute(this._getMetaKeyMap(s),r[s])),i}_parseSelector(r){let i=r.name?"name":"property";return`${i}="${r[i]}"`}_containsAttributes(r,i){return Object.keys(r).every(s=>i.getAttribute(this._getMetaKeyMap(s))===r[s])}_getMetaKeyMap(r){return V4[r]||r}};e.\u0275fac=function(i){return new(i||e)(B(Nt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),V4={httpEquiv:"http-equiv"},Tn=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(B(Nt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Xs=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=B(L4),s},providedIn:"root"});let n=e;return n})(),L4=(()=>{let e=class e extends Xs{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case En.NONE:return i;case En.HTML:return qi(i,"HTML")?Gn(i):EA(this._doc,String(i)).toString();case En.STYLE:return qi(i,"Style")?Gn(i):i;case En.SCRIPT:if(qi(i,"Script"))return Gn(i);throw new ne(5200,!1);case En.URL:return qi(i,"URL")?Gn(i):Tf(String(i));case En.RESOURCE_URL:if(qi(i,"ResourceURL"))return Gn(i);throw new ne(5201,!1);default:throw new ne(5202,!1)}}bypassSecurityTrustHtml(r){return dA(r)}bypassSecurityTrustStyle(r){return hA(r)}bypassSecurityTrustScript(r){return fA(r)}bypassSecurityTrustUrl(r){return pA(r)}bypassSecurityTrustResourceUrl(r){return gA(r)}};e.\u0275fac=function(i){return new(i||e)(B(Nt))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function b_(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var to=b_();function kM(n){to=n}var NM=/[&<>"']/,j4=new RegExp(NM.source,"g"),PM=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,U4=new RegExp(PM.source,"g"),B4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},SM=n=>B4[n];function Fn(n,e){if(e){if(NM.test(n))return n.replace(j4,SM)}else if(PM.test(n))return n.replace(U4,SM);return n}var $4=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function z4(n){return n.replace($4,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var q4=/(^|[^\[])\^/g;function ze(n,e){let t=typeof n=="string"?n:n.source;e=e||"";let r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(q4,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function AM(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var Xl={exec:()=>null};function xM(n,e){let t=n.replace(/\|/g,(s,o,a)=>{let c=!1,u=o;for(;--u>=0&&a[u]==="\\";)c=!c;return c?"|":" |"}),r=t.split(/ \|/),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function rp(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function H4(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function MM(n,e,t,r){let i=e.href,s=e.title?Fn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:Fn(o)}}function G4(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var Oa=class{options;rules;lexer;constructor(e){this.options=e||to}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:rp(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=G4(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let i=rp(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=rp(r.replace(/^ *>[ \t]?/gm,""),`
`);let i=this.lexer.state.top;this.lexer.state.top=!0;let s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",c="",u=!1;for(;e;){let d=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,N=>" ".repeat(3*N.length)),p=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,c=h.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=h.slice(m),m+=t[1].length);let w=!1;if(!h&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),d=!0),!d){let N=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),V=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),L=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),H=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){let Z=e.split(`
`,1)[0];if(p=Z,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),L.test(p)||H.test(p)||N.test(p)||V.test(e))break;if(p.search(/[^ ]/)>=m||!p.trim())c+=`
`+p.slice(m);else{if(w||h.search(/[^ ]/)>=4||L.test(h)||H.test(h)||V.test(h))break;c+=`
`+p}!w&&!p.trim()&&(w=!0),a+=Z+`
`,e=e.substring(Z.length+1),h=p.slice(m)}}s.loose||(u?s.loose=!0:/\n *\n *$/.test(a)&&(u=!0));let D=null,C;this.options.gfm&&(D=/^\[[ xX]\] /.exec(c),D&&(C=D[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!D,checked:C,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){let h=s.items[d].tokens.filter(m=>m.type==="space"),p=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));s.loose=p}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=xM(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of s)o.rows.push(xM(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Fn(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let o=rp(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=H4(t[2],"()");if(o>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),MM(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return MM(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,c,u=o,d=0,h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(c=[...a].length,i[3]||i[4]){u+=c;continue}else if((i[5]||i[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(u-=c,u>0)continue;c=Math.min(c,c+u+d);let p=[...i[0]][0].length,m=e.slice(0,o+i.index+p+c);if(Math.min(o,c)%2){let D=m.slice(1,-1);return{type:"em",raw:m,text:D,tokens:this.lexer.inlineTokens(D)}}let w=m.slice(2,-2);return{type:"strong",raw:m,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=Fn(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=Fn(t[1]),i="mailto:"+r):(r=Fn(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=Fn(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=Fn(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=Fn(t[0]),{type:"text",raw:t[0],text:r}}}},W4=/^(?: *(?:\n|$))+/,K4=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Q4=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,tu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Y4=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,OM=/(?:[*+-]|\d{1,9}[.)])/,FM=ze(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,OM).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),D_=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Z4=/^[^\n]+/,C_=/(?!\s*\])(?:\\.|[^\[\]\\])+/,J4=ze(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",C_).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),X4=ze(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,OM).getRegex(),op="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",T_=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,e3=ze("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",T_).replace("tag",op).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),VM=ze(D_).replace("hr",tu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",op).getRegex(),t3=ze(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",VM).getRegex(),S_={blockquote:t3,code:K4,def:J4,fences:Q4,heading:Y4,hr:tu,html:e3,lheading:FM,list:X4,newline:W4,paragraph:VM,table:Xl,text:Z4},RM=ze("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",tu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",op).getRegex(),n3=te(M({},S_),{table:RM,paragraph:ze(D_).replace("hr",tu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",RM).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",op).getRegex()}),r3=te(M({},S_),{html:ze(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",T_).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xl,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ze(D_).replace("hr",tu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",FM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),LM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,i3=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,jM=/^( {2,}|\\)\n(?!\s*$)/,s3=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,nu="\\p{P}\\p{S}",o3=ze(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,nu).getRegex(),a3=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,c3=ze(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,nu).getRegex(),l3=ze("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,nu).getRegex(),u3=ze("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,nu).getRegex(),d3=ze(/\\([punct])/,"gu").replace(/punct/g,nu).getRegex(),h3=ze(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),f3=ze(T_).replace("(?:-->|$)","-->").getRegex(),p3=ze("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",f3).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),sp=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,g3=ze(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",sp).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),UM=ze(/^!?\[(label)\]\[(ref)\]/).replace("label",sp).replace("ref",C_).getRegex(),BM=ze(/^!?\[(ref)\](?:\[\])?/).replace("ref",C_).getRegex(),m3=ze("reflink|nolink(?!\\()","g").replace("reflink",UM).replace("nolink",BM).getRegex(),A_={_backpedal:Xl,anyPunctuation:d3,autolink:h3,blockSkip:a3,br:jM,code:i3,del:Xl,emStrongLDelim:c3,emStrongRDelimAst:l3,emStrongRDelimUnd:u3,escape:LM,link:g3,nolink:BM,punctuation:o3,reflink:UM,reflinkSearch:m3,tag:p3,text:s3,url:Xl},y3=te(M({},A_),{link:ze(/^!?\[(label)\]\((.*?)\)/).replace("label",sp).getRegex(),reflink:ze(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",sp).getRegex()}),E_=te(M({},A_),{escape:ze(LM).replace("])","~|])").getRegex(),url:ze(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),v3=te(M({},E_),{br:ze(jM).replace("{2,}","*").getRegex(),text:ze(E_.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),ip={normal:S_,gfm:n3,pedantic:r3},Jl={normal:A_,gfm:E_,breaks:v3,pedantic:y3},si=class n{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||to,this.options.tokenizer=this.options.tokenizer||new Oa,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:ip.normal,inline:Jl.normal};this.options.pedantic?(t.block=ip.pedantic,t.inline=Jl.pedantic):this.options.gfm&&(t.block=ip.gfm,this.options.breaks?t.inline=Jl.breaks:t.inline=Jl.gfm),this.tokenizer.rules=t}static get rules(){return{block:ip,inline:Jl}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,c,u)=>c+"    ".repeat(u.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,c=e.slice(1),u;this.options.extensions.startBlock.forEach(d=>{u=d.call({lexer:this},c),typeof u=="number"&&u>=0&&(a=Math.min(a,u))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,c,u;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(u=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,u)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},h),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(u=r.raw.slice(-1)),c=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},it=class{options;constructor(e){this.options=e||to}code(e,t,r){let i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+Fn(i)+'">'+(r?e:Fn(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Fn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){let i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){let r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){let i=AM(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){let i=AM(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}},eu=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},oi=class n{options;renderer;textRenderer;constructor(e){this.options=e||to,this.options.renderer=this.options.renderer||new it,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new eu}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{let o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,z4(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=s,a="",c="";for(let d=0;d<o.header.length;d++)c+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(c);let u="";for(let d=0;d<o.rows.length;d++){let h=o.rows[d];c="";for(let p=0;p<h.length;p++)c+=this.renderer.tablecell(this.parseInline(h[p].tokens),{header:!1,align:o.align[p]});u+=this.renderer.tablerow(c)}r+=this.renderer.table(a,u);continue}case"blockquote":{let o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{let o=s,a=o.ordered,c=o.start,u=o.loose,d="";for(let h=0;h<o.items.length;h++){let p=o.items[h],m=p.checked,w=p.task,D="";if(p.task){let C=this.renderer.checkbox(!!m);u?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=C+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=C+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:C+" "}):D+=C+" "}D+=this.parse(p.tokens,u),d+=this.renderer.listitem(D,w,!!m)}r+=this.renderer.list(d,a,c);continue}case"html":{let o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{let o=s;r+=t.text(o.text);break}case"html":{let o=s;r+=t.html(o.text);break}case"link":{let o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{let o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{let o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{let o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{let o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{let o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{let o=s;r+=t.text(o.text);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},Pa=class{options;constructor(e){this.options=e||to}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},I_=class{defaults=b_();options=this.setOptions;parse=this.#s(si.lex,oi.parse);parseInline=this.#s(si.lexInline,oi.parseInline);Parser=oi;Renderer=it;TextRenderer=eu;Lexer=si;Tokenizer=Oa;Hooks=Pa;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i=M({},r);if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let c=s.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){let s=this.defaults.renderer||new it(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.renderer[a],u=s[a];s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=u.apply(s,d)),h||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new Oa(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,c=r.tokenizer[a],u=s[a];s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=u.apply(s,d)),h}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Pa;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.hooks[a],u=s[a];Pa.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(c.call(s,d)).then(p=>u.call(s,p));let h=c.call(s,d);return u.call(s,h)}:s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=u.apply(s,d)),h}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults=M(M({},this.defaults),i)}),this}setOptions(e){return this.defaults=M(M({},this.defaults),e),this}lexer(e,t){return si.lex(e,t??this.defaults)}parser(e,t){return oi.parse(e,t??this.defaults)}#s(e,t){return(r,i)=>{let s=M({},i),o=M(M({},this.defaults),s);this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let a=this.#l(!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let u=t(c,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(c){return a(c)}}}#l(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+Fn(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},eo=new I_;function xe(n,e){return eo.parse(n,e)}xe.options=xe.setOptions=function(n){return eo.setOptions(n),xe.defaults=eo.defaults,kM(xe.defaults),xe};xe.getDefaults=b_;xe.defaults=to;xe.use=function(...n){return eo.use(...n),xe.defaults=eo.defaults,kM(xe.defaults),xe};xe.walkTokens=function(n,e){return eo.walkTokens(n,e)};xe.parseInline=eo.parseInline;xe.Parser=oi;xe.parser=oi.parse;xe.Renderer=it;xe.TextRenderer=eu;xe.Lexer=si;xe.lexer=si.lex;xe.Tokenizer=Oa;xe.Hooks=Pa;xe.parse=xe;var lX=xe.options,uX=xe.setOptions,dX=xe.use,hX=xe.walkTokens,fX=xe.parseInline;var pX=oi.parse,gX=si.lex;var w3=["*"],_3="Copy",E3="Copied",I3=(()=>{let e=class e{constructor(){this._buttonClick$=new Ue,this.copied$=this._buttonClick$.pipe(Ye(()=>yl(ae(!0),Iy(3e3).pipe(vl(!1)))),wl(),Yo(1)),this.copiedText$=this.copied$.pipe(Wr(!1),oe(r=>r?E3:_3))}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ae({type:e,selectors:[["markdown-clipboard"]],standalone:!0,features:[jl],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,s){i&1&&(R(0,"button",0),kt(1,"async"),Me("click",function(){return s.onCopyToClipboardClick()}),U(2),kt(3,"async"),P()),i&2&&(Ea("copied",On(1,3,s.copied$)),j(2),Ve(On(3,5,s.copiedText$)))},dependencies:[rM],encapsulation:2,changeDetection:0});let n=e;return n})(),b3=new W("CLIPBOARD_OPTIONS");var x_=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(x_||{}),zM=new W("MARKED_EXTENSIONS"),M_=new W("MARKED_OPTIONS"),D3="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",C3="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",T3="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",S3="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",A3="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",x3="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",qM=new W("SECURITY_CONTEXT");var Xt=(()=>{let e=class e{get options(){return this._options}set options(r){this._options=M(M({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,s,o,a,c,u){this.clipboardOptions=r,this.extensions=i,this.platform=o,this.securityContext=a,this.http=c,this.sanitizer=u,this.DEFAULT_MARKED_OPTIONS={renderer:new it},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new Ue,this.reload$=this._reload$.asObservable(),this.options=s}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:u}=i,d=M(M({},this.options),i.markedOptions),h=d.renderer||this.renderer||new it;this.extensions&&(this.renderer=this.extendsRendererForExtensions(h)),c&&(this.renderer=this.extendsRendererForMermaid(h));let p=this.trimIndentation(r),m=s?this.decodeHtml(p):p,w=a?this.parseEmoji(m):m,D=this.parseMarked(w,d,o);return(u?D:this.sanitizer.sanitize(this.securityContext,D))||""}render(r,i=this.DEFAULT_RENDER_OPTIONS,s){let{clipboard:o,clipboardOptions:a,katex:c,katexOptions:u,mermaid:d,mermaidOptions:h}=i;c&&this.renderKatex(r,M(M({},this.DEFAULT_KATEX_OPTIONS),u)),d&&this.renderMermaid(r,M(M({},this.DEFAULT_MERMAID_OPTIONS),h)),o&&this.renderClipboard(r,s,M(M(M({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(x3);return this.http.get(r,{responseType:"text"}).pipe(oe(i=>this.handleExtension(r,i)))}highlight(r){if(!Qi(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,s=>s.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!Qi(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&xe.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let s=r.code;return r.code=function(o,a,c){return a==="mermaid"?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let s=r.lastIndexOf("://"),o=s>-1?r.substring(s+4):r,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",u=c.lastIndexOf("."),d=u>-1?c.substring(u+1):"";return d&&d!=="md"?"```"+d+`
`+i+"\n```":i}parseMarked(r,i,s=!1){if(i.renderer){let o=M({},i.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,xe.use({renderer:o})}return s?xe.parseInline(r,i):xe.parse(r,i)}parseEmoji(r){if(!Qi(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(D3);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(Qi(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(C3);renderMathInElement(r,i)}}renderClipboard(r,i,s){if(!Qi(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(S3);if(!i)throw new Error(A3);let{buttonComponent:o,buttonTemplate:a}=s,c=r.querySelectorAll("pre");for(let u=0;u<c.length;u++){let d=c.item(u),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);let p=document.createElement("div");p.classList.add("markdown-clipboard-toolbar"),p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.zIndex="1",h.insertAdjacentElement("beforeend",p),h.onmouseenter=()=>p.classList.add("hover"),h.onmouseleave=()=>p.classList.remove("hover");let m;if(o){let D=i.createComponent(o);m=D.hostView,D.changeDetectorRef.markForCheck()}else if(a)m=i.createEmbeddedView(a);else{let D=i.createComponent(I3);m=D.hostView,D.changeDetectorRef.markForCheck()}let w;m.rootNodes.forEach(D=>{p.appendChild(D),w=new ClipboardJS(D,{text:()=>d.innerText})}),m.onDestroy(()=>w.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!Qi(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(T3);let s=r.querySelectorAll(".mermaid");s.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:s}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(s=>{let o=i;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(i)&&(i=o),o?s.substring(o):s}).join(`
`)}};e.\u0275fac=function(i){return new(i||e)(B(b3,8),B(zM,8),B(M_,8),B(Bt),B(qM),B(ii,8),B(Xs))},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})(),Kn=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,s){this.element=r,this.markdownService=i,this.viewContainerRef=s,this.error=new et,this.load=new et,this.ready=new et,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new Ue}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(El(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return b(this,null,function*(){let s={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,s);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,x_.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,x_.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++){let a=i instanceof Array?i:[i];s.item(o).classList.add(...a)}}setPluginOptions(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(i).forEach(a=>{let c=i[a];if(c){let u=this.toLispCase(a);s.item(o).setAttribute(u,c.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let s=r.toString();for(let o=0,a=i.length;o<a;o++)s=s.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return s.slice(0,1)==="-"&&(s=s.slice(1)),s}};e.\u0275fac=function(i){return new(i||e)($(It),$(Xt),$(bn))},e.\u0275cmp=Ae({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Ui,jl],ngContentSelectors:w3,decls:1,vars:0,template:function(i,s){i&1&&(Tx(),Sx(0))},encapsulation:2});let n=e;return n})();function M3(n){return[Xt,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],{provide:zM,useValue:n?.markedExtensions??[]},{provide:qM,useValue:n?.sanitize??En.HTML}]}var HM=(()=>{let e=class e{static forRoot(r){return{ngModule:e,providers:[M3(r)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({imports:[Na]});let n=e;return n})(),$M;(function(n){let e;(function(i){i.Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox"})(e=n.SecurityLevel||(n.SecurityLevel={}));let t;(function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"})(t=n.Theme||(n.Theme={}));let r;(function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(r=n.LogLevel||(n.LogLevel={}))})($M||($M={}));var eR=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)($(In),$(It))},e.\u0275dir=_t({type:e});let n=e;return n})(),k_=(()=>{let e=class e extends eR{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ys(e)))(s||e)}})(),e.\u0275dir=_t({type:e,features:[ut]});let n=e;return n})(),pp=new W("");var k3={provide:pp,useExisting:Li(()=>Ua),multi:!0};function N3(){let n=cr()?cr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var P3=new W(""),Ua=(()=>{let e=class e extends eR{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!N3())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)($(In),$(It),$(P3,8))},e.\u0275dir=_t({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Me("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Ta([k3]),ut]});let n=e;return n})();var tR=new W(""),nR=new W("");function rR(n){return n!=null}function iR(n){return Wi(n)?Se(n):n}function sR(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function oR(n,e){return e.map(t=>t(n))}function O3(n){return!n.validate}function aR(n){return n.map(e=>O3(e)?e:t=>e.validate(t))}function F3(n){if(!n)return null;let e=n.filter(rR);return e.length==0?null:function(t){return sR(oR(t,e))}}function N_(n){return n!=null?F3(aR(n)):null}function V3(n){if(!n)return null;let e=n.filter(rR);return e.length==0?null:function(t){let r=oR(t,e).map(iR);return Ey(r).pipe(oe(sR))}}function P_(n){return n!=null?V3(aR(n)):null}function GM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function L3(n){return n._rawValidators}function j3(n){return n._rawAsyncValidators}function R_(n){return n?Array.isArray(n)?n:[n]:[]}function cp(n,e){return Array.isArray(n)?n.includes(e):n===e}function WM(n,e){let t=R_(e);return R_(n).forEach(i=>{cp(t,i)||t.push(i)}),t}function KM(n,e){return R_(e).filter(t=>!cp(n,t))}var lp=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=N_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=P_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},La=class extends lp{get formDirective(){return null}get path(){return null}},cu=class extends lp{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},up=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},U3={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},QX=te(M({},U3),{"[class.ng-submitted]":"isSubmitted"}),gp=(()=>{let e=class e extends up{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(cu,2))},e.\u0275dir=_t({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Ea("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[ut]});let n=e;return n})(),cR=(()=>{let e=class e extends up{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(La,10))},e.\u0275dir=_t({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Ea("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[ut]});let n=e;return n})();var ru="VALID",ap="INVALID",Fa="PENDING",iu="DISABLED",ja=class{},dp=class extends ja{constructor(e,t){super(),this.value=e,this.source=t}},ou=class extends ja{constructor(e,t){super(),this.pristine=e,this.source=t}},au=class extends ja{constructor(e,t){super(),this.touched=e,this.source=t}},Va=class extends ja{constructor(e,t){super(),this.status=e,this.source=t}};function lR(n){return(mp(n)?n.validators:n)||null}function B3(n){return Array.isArray(n)?N_(n):n||null}function uR(n,e){return(mp(e)?e.asyncValidators:n)||null}function $3(n){return Array.isArray(n)?P_(n):n||null}function mp(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function z3(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ne(1e3,"");if(!r[t])throw new ne(1001,"")}function q3(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ne(1002,"")})}var hp=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Bl(()=>this.statusReactive()),this.statusReactive=Vl(void 0),this._pristine=Bl(()=>this.pristineReactive()),this.pristineReactive=Vl(!0),this._touched=Bl(()=>this.touchedReactive()),this.touchedReactive=Vl(!1),this._events=new Ue,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ar(this.statusReactive)}set status(e){ar(()=>this.statusReactive.set(e))}get valid(){return this.status===ru}get invalid(){return this.status===ap}get pending(){return this.status==Fa}get disabled(){return this.status===iu}get enabled(){return this.status!==iu}get pristine(){return ar(this.pristineReactive)}set pristine(e){ar(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ar(this.touchedReactive)}set touched(e){ar(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(WM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(WM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(KM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(KM(e,this._rawAsyncValidators))}hasValidator(e){return cp(this._rawValidators,e)}hasAsyncValidator(e){return cp(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new au(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new au(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ou(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ou(!0,r))}markAsPending(e={}){this.status=Fa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Va(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=iu,this.errors=null,this._forEachChild(i=>{i.disable(te(M({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dp(this.value,r)),this._events.next(new Va(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ru,this._forEachChild(r=>{r.enable(te(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ru||this.status===Fa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new dp(this.value,t)),this._events.next(new Va(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?iu:ru}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Fa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=iR(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Va(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new et,this.statusChanges=new et}_calculateStatus(){return this._allControlsDisabled()?iu:this.errors?ap:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fa)?Fa:this._anyControlsHaveStatus(ap)?ap:ru}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ou(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new au(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mp(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=B3(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=$3(this._rawAsyncValidators)}},fp=class extends hp{constructor(e,t,r){super(lR(t),uR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){q3(this,!0,e),Object.keys(e).forEach(r=>{z3(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var O_=new W("CallSetDisabledState",{providedIn:"root",factory:()=>F_}),F_="always";function H3(n,e){return[...e.path,n]}function dR(n,e,t=F_){hR(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),W3(n,e),Q3(n,e),K3(n,e),G3(n,e)}function QM(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function G3(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function hR(n,e){let t=L3(n);e.validator!==null?n.setValidators(GM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=j3(n);e.asyncValidator!==null?n.setAsyncValidators(GM(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();QM(e._rawValidators,i),QM(e._rawAsyncValidators,i)}function W3(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&fR(n,e)})}function K3(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&fR(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function fR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Q3(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Y3(n,e){n==null,hR(n,e)}function Z3(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function J3(n){return Object.getPrototypeOf(n.constructor)===k_}function X3(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ez(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Ua?t=s:J3(s)?r=s:i=s}),i||r||t||null}var tz={provide:La,useExisting:Li(()=>V_)},su=Promise.resolve(),V_=(()=>{let e=class e extends La{get submitted(){return ar(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Bl(()=>this.submittedReactive()),this.submittedReactive=Vl(!1),this._directives=new Set,this.ngSubmit=new et,this.form=new fp({},N_(r),P_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){su.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),dR(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){su.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){su.then(()=>{let i=this._findContainer(r.path),s=new fp({});Y3(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){su.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){su.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),X3(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)($(tR,10),$(nR,10),$(O_,8))},e.\u0275dir=_t({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Me("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ta([tz]),ut]});let n=e;return n})();function YM(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function ZM(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var nz=class extends hp{constructor(e=null,t,r){super(lR(t),uR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mp(t)&&(t.nonNullable||t.initialValueIsDefault)&&(ZM(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){YM(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){YM(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){ZM(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var rz={provide:cu,useExisting:Li(()=>lu)},JM=Promise.resolve(),lu=(()=>{let e=class e extends cu{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new nz,this._registered=!1,this.name="",this.update=new et,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=ez(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Z3(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){dR(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){JM.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Wf(i);JM.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?H3(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)($(La,9),$(tR,10),$(nR,10),$(pp,10),$(Tr,8),$(O_,8))},e.\u0275dir=_t({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ta([rz]),ut,Ui]});let n=e;return n})(),pR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=_t({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var iz={provide:pp,useExisting:Li(()=>yp),multi:!0};function gR(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function sz(n){return n.split(":")[0]}var yp=(()=>{let e=class e extends k_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=gR(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=sz(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ys(e)))(s||e)}})(),e.\u0275dir=_t({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&Me("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ta([iz]),ut]});let n=e;return n})(),mR=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(gR(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)($(It),$(In),$(yp,9))},e.\u0275dir=_t({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),oz={provide:pp,useExisting:Li(()=>yR),multi:!0};function XM(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function az(n){return n.split(":")[0]}var yR=(()=>{let e=class e extends k_{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let u=a[c],d=this._getOptionValue(u.value);s.push(d)}}else{let a=i.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let d=this._getOptionValue(u.value);s.push(d)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=az(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ys(e)))(s||e)}})(),e.\u0275dir=_t({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&Me("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ta([oz]),ut]});let n=e;return n})(),vR=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(XM(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(XM(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)($(It),$(In),$(yR,9))},e.\u0275dir=_t({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var cz=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({});let n=e;return n})();var wR=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:O_,useValue:r.callSetDisabledState??F_}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({imports:[cz]});let n=e;return n})();var he={production:!0,host:"https://publichome.page",port:"8888",eventBusURL:"https://publichome.page:8888/eventbus/",defaultFirm:"SS",redirect_url:"https://publichome.page/u",client_id:"8c987bdba61457c20417",client_secret:"DONT_SEND_FROM_FRONT_END",gh_default_user_repo:"publichomepage",gh_dr_folder:"my/main",gh_dr_url:"https://raw.githubusercontent.com",gh_api_url:"https://api.github.com",gh_auth_url:"https://github.com/login/oauth/authorize",gh_private_dr_folder:"my",supabaseUrl:"https://hnqbvkzmfdcshdgnhipy.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhucWJ2a3ptZmRjc2hkZ25oaXB5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjkyMjAwOTAsImV4cCI6MjA0NDc5NjA5MH0.3PlLXR6ljTwIWsrMO8QT2fvy0VIGKsXLfahjSgBIN7U",pineconeConfig:{apiKey:"pcsk_3Akhgu_3pS3hHzA7fBJmnHNVg9e7grZFj8pjvPtiQ9uCVA2n2UURFEmrZjXy1fi4XQSwEP",index:"example-index"},openApiKey:"ABCD",firebaseConfig:{apiKey:"AIzaSyBdEWJQNGtrtL88aX5sE2VGEqYpWLXtpFQ",authDomain:"publichomepage-b872d.firebaseapp.com",projectId:"publichomepage-b872d",storageBucket:"publichomepage-b872d.appspot.com",messagingSenderId:"850538578524",appId:"1:850538578524:web:56c70f38ac285bffd5dc99",measurementId:"G-TRBD0HQFWM"}};var en=(()=>{let e=class e{constructor(){this._event=new Ue,this.event$=this._event.asObservable()}send(r){this._event.next(r)}observable(){return this.event$}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function lz(n,e){n&1&&ce(0,"app-footer")}var qe=class qe{constructor(e){this.messaging=e,this.sponserVisible=!0,this.footerVisible=!0,localStorage.setItem("debug","true"),qe.iconsColorByKey.set("facebook","#3b5998"),qe.iconsColorByKey.set("youtube","#ed302f"),qe.iconsColorByKey.set("discord","#7289DA"),qe.iconsColorByKey.set("linkedin","#0082ca"),qe.iconsColorByKey.set("github","#bcbcbc"),qe.iconsColorByKey.set("link","green"),this.messaging.event$.subscribe(t=>{let r=t;switch(r.cmd){case"host":r.file=="IaComponent"&&(this.sponserVisible=!1,this.footerVisible=!1);break;case"UserContext":break;default:break}})}loadScript(e){let t=document.body,r=document.createElement("script");r.innerHTML="",r.src=e,r.async=!1,t.appendChild(r)}};qe.title="Public Homepage",qe.ghUserLoaded=he.gh_default_user_repo,qe.readme_home=`${he.gh_dr_url}/${he.gh_default_user_repo}/${he.gh_dr_folder}/README.md`,qe.user_contacts=`${he.gh_dr_url}/${he.gh_default_user_repo}/${he.gh_dr_folder}/contacts.md`,qe.fab_questions_list2=`${he.gh_dr_url}/${he.gh_default_user_repo}/${he.gh_dr_folder}/questions/ds-list2.md`,qe.YOUR_READ_ME="",qe.ghUser={name:qe.title,blog:"/"},qe.userContext={username:"",status:"0",directory:{},youtube_links:new Set,leetcode_links:new Set,assessment:{}},qe.INTERNAL_FOLDERS=["my","roadmap","questions","articles","faqs","coding","credits","README.md","contacts.md","assessments"],qe.homeUser={name:qe.title,blog:"/"},qe.navLinks=[{link:"#about",text:"About"}],qe.iconsColorByKey=new Map,qe.contactLinksByKey=new Map,qe.contactTextsByKey=new Map,qe.\u0275fac=function(t){return new(t||qe)($(en))},qe.\u0275cmp=Ae({type:qe,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,r){t&1&&(ce(0,"app-navbar")(1,"router-outlet"),ve(2,lz,1,0,"app-footer",0)),t&2&&(j(2),J("ngIf",r.footerVisible))}});var re=qe;function uz(n,e){n&1&&(R(0,"a",11)(1,"i",12),U(2,"\xA0Chat"),P()())}function dz(n,e){if(n&1&&(R(0,"li",13)(1,"a",14),U(2),P()()),n&2){let t=e.$implicit;j(),J("href",t.link,ht),j(),Ve(t.text)}}var _R=(()=>{let e=class e{constructor(r,i){this.cdRef=r,this.messaging=i,this.navUser=re.homeUser,this.photoUrl="",this.navLinks=re.navLinks,this.contactsFileFound=!1,this.userLoaded=re.ghUserLoaded,this.isHomeGHUser=!0,i.event$.subscribe(s=>{let o=s;switch(this.userLoaded=re.ghUserLoaded,this.isHomeGHUser=this.userLoaded==he.gh_default_user_repo,o.cmd){case"UserDirectory":this.isHomeGHUser?this.navLinks.push({link:"#projects",text:"Solutions"}):this.navLinks.forEach(c=>{let u=re.navLinks.indexOf(c);re.navLinks[u].link=re.ghUser.blog}),this.navUser=re.ghUser,re.userContext.directory.folders.forEach(c=>{let u=c.charAt(0).toUpperCase()+c.slice(1),d=c.toLowerCase();d.endsWith("contacts")||this.navLinks.push({link:this.getNavLink(d),text:u})}),this.addAContactLink();break;case"PageFile":switch(o.file){case"HomeGHUser":break;default:break}break;default:break}})}getNavLink(r){return this.isHomeGHUser?"/"+r:`/${re.userContext.username}/${r}`}addAContactLink(){let r=re.userContext.directory;r.files&&r.files.includes("contacts.md")?this.navLinks.push({link:this.getNavLink("contacts"),text:"Contacts"}):this.navLinks.push({link:"#about",text:"Contact"})}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)($(Tr),$(en))},e.\u0275cmp=Ae({type:e,selectors:[["app-navbar"]],decls:15,vars:8,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container"],["href","/"],[1,"fa-solid","fa-link",2,"color","green"],[1,"navbar-brand",3,"href"],["href","/chat",4,"ngIf"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav","navbar-nav","ml-auto"],["class","nav-item",4,"ngFor","ngForOf"],["href","/chat"],[1,"fa-solid","fa-bolt","lightning-text"],[1,"nav-item"],[1,"nav-link","js-scroll-trigger",3,"href"]],template:function(i,s){i&1&&(R(0,"nav",0)(1,"div",1)(2,"span")(3,"a",2),ce(4,"i",3),P(),R(5,"a",4)(6,"b"),U(7),P(),ve(8,uz,3,0,"a",5),P()(),R(9,"button",6),ce(10,"span",7),P(),R(11,"div",8)(12,"ul",9),ve(13,dz,3,2,"li",10),kt(14,"slice"),P()()()()),i&2&&(j(5),J("href",s.userLoaded,ht),j(2),ft("\xA0",s.navUser.name,""),j(),J("ngIf",s.isHomeGHUser),j(5),J("ngForOf",Sa(14,4,s.navLinks,0,7)))},dependencies:[Zt,Jt,ka],styles:["@keyframes _ngcontent-%COMP%_blink{0%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.2)}to{opacity:1;transform:scale(1)}}.lightning-text[_ngcontent-%COMP%]{font-size:.5em;color:#ff4500;text-transform:lowercase;margin-left:5px;animation:_ngcontent-%COMP%_blink 2s infinite}"]});let n=e;return n})();var we="primary",Du=Symbol("RouteTitle"),z_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ga(n){return new z_(n)}function hz(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ar(n[t],e[t]))return!1;return!0}function Ar(n,e){let t=n?q_(n):void 0,r=e?q_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!RR(n[i],e[i]))return!1;return!0}function q_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function RR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function kR(n){return n.length>0?n[n.length-1]:null}function ns(n){return _y(n)?n:Wi(n)?Se(Promise.resolve(n)):ae(n)}var pz={exact:PR,subset:OR},NR={exact:gz,subset:mz,ignored:()=>!0};function ER(n,e,t){return pz[t.paths](n.root,e.root,t.matrixParams)&&NR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function gz(n,e){return Ar(n,e)}function PR(n,e,t){if(!io(n.segments,e.segments)||!_p(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!PR(n.children[r],e.children[r],t))return!1;return!0}function mz(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>RR(n[t],e[t]))}function OR(n,e,t){return FR(n,e,e.segments,t)}function FR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!io(i,t)||e.hasChildren()||!_p(i,t,r))}else if(n.segments.length===t.length){if(!io(n.segments,t)||!_p(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!OR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!io(n.segments,i)||!_p(n.segments,i,r)||!n.children[we]?!1:FR(n.children[we],e,s,r)}}function _p(n,e,t){return e.every((r,i)=>NR[t](n[i].parameters,r.parameters))}var ci=class{constructor(e=new je([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ga(this.queryParams),this._queryParamMap}toString(){return wz.serialize(this)}},je=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ep(this)}},ro=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ga(this.parameters),this._parameterMap}toString(){return LR(this)}};function yz(n,e){return io(n,e)&&n.every((t,r)=>Ar(t.parameters,e[r].parameters))}function io(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function vz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===we&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==we&&(t=t.concat(e(i,r)))}),t}var Cu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>new Wa,providedIn:"root"});let n=e;return n})(),Wa=class{parse(e){let t=new G_(e);return new ci(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${uu(e.root,!0)}`,r=Iz(e.queryParams),i=typeof e.fragment=="string"?`#${_z(e.fragment)}`:"";return`${t}${r}${i}`}},wz=new Wa;function Ep(n){return n.segments.map(e=>LR(e)).join("/")}function uu(n,e){if(!n.hasChildren())return Ep(n);if(e){let t=n.children[we]?uu(n.children[we],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==we&&r.push(`${i}:${uu(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=vz(n,(r,i)=>i===we?[uu(n.children[we],!1)]:[`${i}:${uu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[we]!=null?`${Ep(n)}/${t[0]}`:`${Ep(n)}/(${t.join("//")})`}}function VR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vp(n){return VR(n).replace(/%3B/gi,";")}function _z(n){return encodeURI(n)}function H_(n){return VR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ip(n){return decodeURIComponent(n)}function IR(n){return Ip(n.replace(/\+/g,"%20"))}function LR(n){return`${H_(n.path)}${Ez(n.parameters)}`}function Ez(n){return Object.entries(n).map(([e,t])=>`;${H_(e)}=${H_(t)}`).join("")}function Iz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${vp(t)}=${vp(i)}`).join("&"):`${vp(t)}=${vp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var bz=/^[^\/()?;#]+/;function j_(n){let e=n.match(bz);return e?e[0]:""}var Dz=/^[^\/()?;=#]+/;function Cz(n){let e=n.match(Dz);return e?e[0]:""}var Tz=/^[^=?&#]+/;function Sz(n){let e=n.match(Tz);return e?e[0]:""}var Az=/^[^&#]+/;function xz(n){let e=n.match(Az);return e?e[0]:""}var G_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new je([],{}):new je([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[we]=new je(e,t)),r}parseSegment(){let e=j_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new ro(Ip(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Cz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=j_(this.remaining);i&&(r=i,this.capture(r))}e[Ip(t)]=Ip(r)}parseQueryParam(e){let t=Sz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=xz(this.remaining);o&&(r=o,this.capture(r))}let i=IR(t),s=IR(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=j_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ne(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=we);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[we]:new je([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function jR(n){return n.segments.length>0?new je([],{[we]:n}):n}function UR(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=UR(i);if(r===we&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new je(n.segments,e);return Mz(t)}function Mz(n){if(n.numberOfChildren===1&&n.children[we]){let e=n.children[we];return new je(n.segments.concat(e.segments),e.children)}return n}function mu(n){return n instanceof ci}function Rz(n,e,t=null,r=null){let i=BR(n);return $R(i,e,t,r)}function BR(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new je(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=jR(r);return e??i}function $R(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return U_(i,i,i,t,r);let s=kz(e);if(s.toRoot())return U_(i,i,new je([],{}),t,r);let o=Nz(s,i,n),a=o.processChildren?fu(o.segmentGroup,o.index,s.commands):qR(o.segmentGroup,o.index,s.commands);return U_(i,o.segmentGroup,a,t,r)}function bp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function yu(n){return typeof n=="object"&&n!=null&&n.outlets}function U_(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let o;n===e?o=t:o=zR(n,e,t);let a=jR(UR(o));return new ci(a,s,i)}function zR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=zR(s,e,t)}),new je(n.segments,r)}var Dp=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&bp(r[0]))throw new ne(4003,!1);let i=r.find(yu);if(i&&i!==kR(r))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function kz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Dp(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Dp(t,e,r)}var za=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Nz(n,e,t){if(n.isAbsolute)return new za(e,!0,0);if(!t)return new za(e,!1,NaN);if(t.parent===null)return new za(t,!0,0);let r=bp(n.commands[0])?0:1,i=t.segments.length-1+r;return Pz(t,i,n.numberOfDoubleDots)}function Pz(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ne(4005,!1);i=r.segments.length}return new za(r,!1,i-s)}function Oz(n){return yu(n[0])?n[0].outlets:{[we]:n}}function qR(n,e,t){if(n??=new je([],{}),n.segments.length===0&&n.hasChildren())return fu(n,e,t);let r=Fz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new je(n.segments.slice(0,r.pathIndex),{});return s.children[we]=new je(n.segments.slice(r.pathIndex),n.children),fu(s,0,i)}else return r.match&&i.length===0?new je(n.segments,{}):r.match&&!n.hasChildren()?W_(n,e,t):r.match?fu(n,0,i):W_(n,e,t)}function fu(n,e,t){if(t.length===0)return new je(n.segments,{});{let r=Oz(t),i={};if(Object.keys(r).some(s=>s!==we)&&n.children[we]&&n.numberOfChildren===1&&n.children[we].segments.length===0){let s=fu(n.children[we],e,t);return new je(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=qR(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new je(n.segments,i)}}function Fz(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(yu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!DR(c,u,o))return s;r+=2}else{if(!DR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function W_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(yu(s)){let c=Vz(s.outlets);return new je(r,c)}if(i===0&&bp(t[0])){let c=n.segments[e];r.push(new ro(c.path,bR(t[0]))),i++;continue}let o=yu(s)?s.outlets[we]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&bp(a)?(r.push(new ro(o,bR(a))),i+=2):(r.push(new ro(o,{})),i++)}return new je(r,{})}function Vz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=W_(new je([],{}),0,r))}),e}function bR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function DR(n,e,t){return n==t.path&&Ar(e,t.parameters)}var pu="imperative",Ft=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Ft||{}),Qn=class{constructor(e,t){this.id=e,this.url=t}},Ka=class extends Qn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},li=class extends Qn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ln=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ln||{}),Cp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Cp||{}),ai=class extends Qn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ts=class extends Qn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Ft.NavigationSkipped}},vu=class extends Qn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tp=class extends Qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},K_=class extends Qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Q_=class extends Qn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Y_=class extends Qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Z_=class extends Qn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},J_=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},X_=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},e0=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},t0=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},n0=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},r0=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sp=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Ft.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},wu=class{},Qa=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Lz(n,e){return n.providers&&!n._injector&&(n._injector=Nf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ur(n){return n.outlet||we}function jz(n,e){let t=n.filter(r=>ur(r)===e);return t.push(...n.filter(r=>ur(r)!==e)),t}function Tu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var i0=class{get injector(){return Tu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Su(this.rootInjector),this.attachRef=null}},Su=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new i0(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(B(dn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ap=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=s0(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=s0(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=o0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return o0(e,this._root).map(t=>t.value)}};function s0(n,e){if(n===e.value)return e;for(let t of e.children){let r=s0(n,t);if(r)return r}return null}function o0(n,e){if(n===e.value)return[e];for(let t of e.children){let r=o0(n,t);if(r.length)return r.unshift(e),r}return[]}var Vn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function $a(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var xp=class extends Ap{constructor(e,t){super(e),this.snapshot=t,g0(this,e)}toString(){return this.snapshot.toString()}};function HR(n){let e=Uz(n),t=new jt([new ro("",{})]),r=new jt({}),i=new jt({}),s=new jt({}),o=new jt(""),a=new Sn(t,r,s,o,i,we,n,e.root);return a.snapshot=e.root,new xp(new Vn(a,[]),e)}function Uz(n){let e={},t={},r={},i="",s=new qa([],e,r,i,t,we,n,null,{});return new Rp("",new Vn(s,[]))}var Sn=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(u=>u[Du]))??ae(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>Ga(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>Ga(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Mp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),i?.data),n._resolvedData)}:r={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},i&&WR(i)&&(r.resolve[Du]=i.title),r}var qa=class{get title(){return this.data?.[Du]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ga(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ga(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Rp=class extends Ap{constructor(e,t){super(t),this.url=e,g0(this,t)}toString(){return GR(this._root)}};function g0(n,e){e.value._routerState=n,e.children.forEach(t=>g0(n,t))}function GR(n){let e=n.children.length>0?` { ${n.children.map(GR).join(", ")} } `:"";return`${n.value}${e}`}function B_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ar(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ar(e.params,t.params)||n.paramsSubject.next(t.params),fz(e.url,t.url)||n.urlSubject.next(t.url),Ar(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function a0(n,e){let t=Ar(n.params,e.params)&&yz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||a0(n.parent,e.parent))}function WR(n){return typeof n.title=="string"||n.title===null}var m0=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=we,this.activateEvents=new et,this.deactivateEvents=new et,this.attachEvents=new et,this.detachEvents=new et,this.parentContexts=G(Su),this.location=G(bn),this.changeDetector=G(Tr),this.inputBinder=G(Fp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new c0(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=_t({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ui]});let n=e;return n})(),c0=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sn?this.route:e===Su?this.childContexts:this.parent.get(e,t)}},Fp=new W(""),CR=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=ml([i.queryParams,i.params,i.data]).pipe(Ye(([o,a,c],u)=>(c=M(M(M({},o),a),c),u===0?ae(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=$x(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function Bz(n,e,t){let r=_u(n,e._root,t?t._root:void 0);return new xp(r,e)}function _u(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=$z(n,e,t);return new Vn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>_u(n,a)),o}}let r=zz(e.value),i=e.children.map(s=>_u(n,s));return new Vn(r,i)}}function $z(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return _u(n,r,i);return _u(n,r)})}function zz(n){return new Sn(new jt(n.url),new jt(n.params),new jt(n.queryParams),new jt(n.fragment),new jt(n.data),n.outlet,n.component,n)}var Eu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},KR="ngNavigationCancelingError";function kp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=mu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QR(!1,Ln.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function QR(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[KR]=!0,t.cancellationCode=e,t}function qz(n){return YR(n)&&mu(n.url)}function YR(n){return!!n&&n[KR]}var Hz=(n,e,t,r)=>oe(i=>(new l0(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),l0=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),B_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=$a(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$a(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=$a(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=$a(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new r0(s.value.snapshot))}),e.children.length&&this.forwardEvent(new t0(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(B_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),B_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Np=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ha=class{constructor(e,t){this.component=e,this.route=t}};function Gz(n,e,t){let r=n._root,i=e?e._root:null;return du(r,i,t,[r.value])}function Wz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Za(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!ZT(n)?n:e.get(n):r}function du(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=$a(e);return n.children.forEach(o=>{Kz(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>gu(a,t.getContext(o),i)),i}function Kz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Qz(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Np(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?du(n,e,a?a.children:null,r,i):du(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ha(a.outlet.component,o))}else o&&gu(e,a,i),i.canActivateChecks.push(new Np(r)),s.component?du(n,null,a?a.children:null,r,i):du(n,null,t,r,i);return i}function Qz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!io(n.url,e.url);case"pathParamsOrQueryParamsChange":return!io(n.url,e.url)||!Ar(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!a0(n,e)||!Ar(n.queryParams,e.queryParams);case"paramsChange":default:return!a0(n,e)}}function gu(n,e,t){let r=$a(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?gu(o,e.children.getContext(s),t):gu(o,null,t):gu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ha(e.outlet.component,i)):t.canDeactivateChecks.push(new Ha(null,i)):t.canDeactivateChecks.push(new Ha(null,i))}function Au(n){return typeof n=="function"}function Yz(n){return typeof n=="boolean"}function Zz(n){return n&&Au(n.canLoad)}function Jz(n){return n&&Au(n.canActivate)}function Xz(n){return n&&Au(n.canActivateChild)}function eq(n){return n&&Au(n.canDeactivate)}function tq(n){return n&&Au(n.canMatch)}function ZR(n){return n instanceof qr||n?.name==="EmptyError"}var wp=Symbol("INITIAL_VALUE");function Ya(){return Ye(n=>ml(n.map(e=>e.pipe(Gr(1),Wr(wp)))).pipe(oe(e=>{for(let t of e)if(t!==!0){if(t===wp)return wp;if(t===!1||nq(t))return t}return!0}),At(e=>e!==wp),Gr(1)))}function nq(n){return mu(n)||n instanceof Eu}function rq(n,e){return vt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ae(te(M({},t),{guardsResult:!0})):iq(o,r,i,n).pipe(vt(a=>a&&Yz(a)?sq(r,s,n,e):ae(a)),oe(a=>te(M({},t),{guardsResult:a})))})}function iq(n,e,t,r){return Se(n).pipe(vt(i=>uq(i.component,i.route,t,e,r)),Rn(i=>i!==!0,!0))}function sq(n,e,t,r){return Se(e).pipe(Hr(i=>Ko(aq(i.route.parent,r),oq(i.route,r),lq(n,i.path,t),cq(n,i.route,t))),Rn(i=>i!==!0,!0))}function oq(n,e){return n!==null&&e&&e(new n0(n)),ae(!0)}function aq(n,e){return n!==null&&e&&e(new e0(n)),ae(!0)}function cq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ae(!0);let i=r.map(s=>wh(()=>{let o=Tu(e)??t,a=Za(s,o),c=Jz(a)?a.canActivate(e,n):Hn(o,()=>a(e,n));return ns(c).pipe(Rn())}));return ae(i).pipe(Ya())}function lq(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Wz(o)).filter(o=>o!==null).map(o=>wh(()=>{let a=o.guards.map(c=>{let u=Tu(o.node)??t,d=Za(c,u),h=Xz(d)?d.canActivateChild(r,n):Hn(u,()=>d(r,n));return ns(h).pipe(Rn())});return ae(a).pipe(Ya())}));return ae(s).pipe(Ya())}function uq(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ae(!0);let o=s.map(a=>{let c=Tu(e)??i,u=Za(a,c),d=eq(u)?u.canDeactivate(n,e,t,r):Hn(c,()=>u(n,e,t,r));return ns(d).pipe(Rn())});return ae(o).pipe(Ya())}function dq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ae(!0);let s=i.map(o=>{let a=Za(o,n),c=Zz(a)?a.canLoad(e,t):Hn(n,()=>a(e,t));return ns(c)});return ae(s).pipe(Ya(),JR(r))}function JR(n){return fy(wt(e=>{if(typeof e!="boolean")throw kp(n,e)}),oe(e=>e===!0))}function hq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ae(!0);let s=i.map(o=>{let a=Za(o,n),c=tq(a)?a.canMatch(e,t):Hn(n,()=>a(e,t));return ns(c)});return ae(s).pipe(Ya(),JR(r))}var Iu=class{constructor(e){this.segmentGroup=e||null}},bu=class extends Error{constructor(e){super(),this.urlTree=e}};function Ba(n){return Wo(new Iu(n))}function fq(n){return Wo(new ne(4e3,!1))}function pq(n){return Wo(QR(!1,Ln.GuardRejected))}var u0=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ae(r);if(i.numberOfChildren>1||!i.children[we])return fq(`${e.redirectTo}`);i=i.children[we]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:h,outlet:p,params:m,data:w,title:D}=i,C=Hn(s,()=>a({params:m,data:w,queryParams:c,fragment:u,routeConfig:d,url:h,outlet:p,title:D}));if(C instanceof ci)throw new bu(C);t=C}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new bu(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new ci(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new je(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ne(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},d0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gq(n,e,t,r,i){let s=XR(n,e,t);return s.matched?(r=Lz(e,r),hq(r,e,t,i).pipe(oe(o=>o===!0?s:M({},d0)))):ae(s)}function XR(n,e,t){if(e.path==="**")return mq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},d0):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||hz)(t,n,e);if(!i)return M({},d0);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?M(M({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function mq(n){return{matched:!0,parameters:n.length>0?kR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function TR(n,e,t,r){return t.length>0&&wq(n,t,r)?{segmentGroup:new je(e,vq(r,new je(t,n.children))),slicedSegments:[]}:t.length===0&&_q(n,t,r)?{segmentGroup:new je(n.segments,yq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new je(n.segments,n.children),slicedSegments:t}}function yq(n,e,t,r){let i={};for(let s of t)if(Vp(n,e,s)&&!r[ur(s)]){let o=new je([],{});i[ur(s)]=o}return M(M({},r),i)}function vq(n,e){let t={};t[we]=e;for(let r of n)if(r.path===""&&ur(r)!==we){let i=new je([],{});t[ur(r)]=i}return t}function wq(n,e,t){return t.some(r=>Vp(n,e,r)&&ur(r)!==we)}function _q(n,e,t){return t.some(r=>Vp(n,e,r))}function Vp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Eq(n,e,t){return e.length===0&&!n.children[t]}var h0=class{};function Iq(n,e,t,r,i,s,o="emptyOnly"){return new f0(n,e,t,r,i,o,s).recognize()}var bq=31,f0=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new u0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=TR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(({children:t,rootSnapshot:r})=>{let i=new Vn(r,t),s=new Rp("",i),o=Rz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new qa([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),we,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,we,t).pipe(oe(r=>({children:r,rootSnapshot:t})),Ai(r=>{if(r instanceof bu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Iu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(oe(o=>o instanceof Vn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Se(s).pipe(Hr(o=>{let a=r.children[o],c=jz(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Ps((o,a)=>(o.push(...a),o)),xi(null),by(),vt(o=>{if(o===null)return Ba(r);let a=ek(o);return Dq(a),ae(a)}))}processSegment(e,t,r,i,s,o,a){return Se(t).pipe(Hr(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Ai(u=>{if(u instanceof Iu)return ae(null);throw u}))),Rn(c=>!!c),Ai(c=>{if(ZR(c))return Eq(r,i,s)?ae(new h0):Ba(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return ur(r)!==o&&(o===we||!Vp(i,s,r))?Ba(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Ba(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=XR(t,i,s);if(!c)return Ba(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>bq&&(this.allowRedirects=!1));let m=new qa(s,u,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,SR(i),ur(i),i.component??i._loadedComponent??null,i,AR(i)),w=Mp(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(w.params),m.data=Object.freeze(w.data);let D=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,m,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(vt(C=>this.processSegment(e,r,t,C.concat(p),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=gq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ye(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ye(({routes:u})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=c,w=new qa(p,h,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,SR(r),ur(r),r.component??r._loadedComponent??null,r,AR(r)),D=Mp(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(D.params),w.data=Object.freeze(D.data);let{segmentGroup:C,slicedSegments:N}=TR(t,p,m,u);if(N.length===0&&C.hasChildren())return this.processChildren(d,u,C,w).pipe(oe(L=>new Vn(w,L)));if(u.length===0&&N.length===0)return ae(new Vn(w,[]));let V=ur(r)===s;return this.processSegment(d,u,C,N,V?we:s,!0,w).pipe(oe(L=>new Vn(w,L instanceof Vn?[L]:[])))}))):Ba(t)))}getChildConfig(e,t,r){return t.children?ae({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ae({routes:t._loadedRoutes,injector:t._loadedInjector}):dq(e,t,r,this.urlSerializer).pipe(vt(i=>i?this.configLoader.loadChildren(e,t).pipe(wt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):pq(t))):ae({routes:[],injector:e})}};function Dq(n){n.sort((e,t)=>e.value.outlet===we?-1:t.value.outlet===we?1:e.value.outlet.localeCompare(t.value.outlet))}function Cq(n){let e=n.value.routeConfig;return e&&e.path===""}function ek(n){let e=[],t=new Set;for(let r of n){if(!Cq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ek(r.children);e.push(new Vn(r.value,i))}return e.filter(r=>!t.has(r))}function SR(n){return n.data||{}}function AR(n){return n.resolve||{}}function Tq(n,e,t,r,i,s){return vt(o=>Iq(n,e,t,r,o.extractedUrl,i,s).pipe(oe(({state:a,tree:c})=>te(M({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Sq(n,e){return vt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ae(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of tk(c))o.add(u);let a=0;return Se(o).pipe(Hr(c=>s.has(c)?Aq(c,r,n,e):(c.data=Mp(c,c.parent,n).resolve,ae(void 0))),wt(()=>a++),Qo(1),vt(c=>a===o.size?ae(t):cn))})}function tk(n){let e=n.children.map(t=>tk(t)).flat();return[n,...e]}function Aq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!WR(i)&&(s[Du]=i.title),xq(s,n,e,r).pipe(oe(o=>(n._resolvedData=o,n.data=Mp(n,n.parent,t).resolve,null)))}function xq(n,e,t,r){let i=q_(n);if(i.length===0)return ae({});let s={};return Se(i).pipe(vt(o=>Mq(n[o],e,t,r).pipe(Rn(),wt(a=>{if(a instanceof Eu)throw kp(new Wa,a);s[o]=a}))),Qo(1),vl(s),Ai(o=>ZR(o)?cn:Wo(o)))}function Mq(n,e,t,r){let i=Tu(e)??r,s=Za(n,i),o=s.resolve?s.resolve(e,t):Hn(i,()=>s(e,t));return ns(o)}function $_(n){return Ye(e=>{let t=n(e);return t?Se(t).pipe(oe(()=>e)):ae(e)})}var nk=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===we);return i}getResolvedTitleForRoute(r){return r.data[Du]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(Rq),providedIn:"root"});let n=e;return n})(),Rq=(()=>{let e=class e extends nk{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(B(Tn))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xu=new W("",{providedIn:"root",factory:()=>({})}),kq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ae({type:e,selectors:[["ng-component"]],standalone:!0,features:[jl],decls:1,vars:0,template:function(i,s){i&1&&ce(0,"router-outlet")},dependencies:[m0],encapsulation:2});let n=e;return n})();function y0(n){let e=n.children&&n.children.map(y0),t=e?te(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==we&&(t.component=kq),t}var Pp=new W(""),v0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(qf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ae(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ns(r.loadComponent()).pipe(oe(rk),wt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ns(()=>{this.componentLoaders.delete(r)})),s=new $o(i,()=>new Ue).pipe(Bo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ae({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=Nq(i,this.compiler,r,this.onLoadEndListener).pipe(Ns(()=>{this.childrenLoaders.delete(i)})),a=new $o(o,()=>new Ue).pipe(Bo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Nq(n,e,t,r){return ns(n.loadChildren()).pipe(oe(rk),vt(i=>i instanceof Rl||Array.isArray(i)?ae(i):Se(e.compileModuleAsync(i))),oe(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Pp,[],{optional:!0,self:!0}).flat()),{routes:o.map(y0),injector:s}}))}function Pq(n){return n&&typeof n=="object"&&"default"in n}function rk(n){return Pq(n)?n.default:n}var w0=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(Oq),providedIn:"root"});let n=e;return n})(),Oq=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ik=new W(""),sk=new W("");function Fq(n,e,t){let r=n.get(sk),i=n.get(Nt);return n.get(Ce).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),Vq(n))),{onViewTransitionCreated:c}=r;return c&&Hn(n,()=>c({transition:a,from:e,to:t})),o})}function Vq(n){return new Promise(e=>{Rw({read:()=>setTimeout(e)},{injector:n})})}var Lq=new W(""),_0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ue,this.transitionAbortSubject=new Ue,this.configLoader=G(v0),this.environmentInjector=G(dn),this.urlSerializer=G(Cu),this.rootContexts=G(Su),this.location=G(Ma),this.inputBindingEnabled=G(Fp,{optional:!0})!==null,this.titleStrategy=G(nk),this.options=G(xu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(w0),this.createViewTransition=G(ik,{optional:!0}),this.navigationErrorHandler=G(Lq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ae(void 0),this.rootComponentType=null;let r=s=>this.events.next(new J_(s)),i=s=>this.events.next(new X_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(te(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new jt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:pu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(At(o=>o.id!==0),oe(o=>te(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ye(o=>{let a=!1,c=!1;return ae(o).pipe(Ye(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ln.SupersededByNewNavigation),cn;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?te(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&h!=="reload"){let p="";return this.events.next(new ts(u.id,this.urlSerializer.serialize(u.rawUrl),p,Cp.IgnoredSameUrlNavigation)),u.resolve(!1),cn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return ae(u).pipe(Ye(p=>{let m=this.transitions?.getValue();return this.events.next(new Ka(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?cn:Promise.resolve(p)}),Tq(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),wt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=te(M({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Tp(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:w,restoredState:D,extras:C}=u,N=new Ka(p,this.urlSerializer.serialize(m),w,D);this.events.next(N);let V=HR(this.rootComponentType).snapshot;return this.currentTransition=o=te(M({},u),{targetSnapshot:V,urlAfterRedirects:m,extras:te(M({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ae(o)}else{let p="";return this.events.next(new ts(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Cp.IgnoredByUrlHandlingStrategy)),u.resolve(!1),cn}}),wt(u=>{let d=new K_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),oe(u=>(this.currentTransition=o=te(M({},u),{guards:Gz(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),rq(this.environmentInjector,u=>this.events.next(u)),wt(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw kp(this.urlSerializer,u.guardsResult);let d=new Q_(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(d)}),At(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ln.GuardRejected),!1)),$_(u=>{if(u.guards.canActivateChecks.length)return ae(u).pipe(wt(d=>{let h=new Y_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Ye(d=>{let h=!1;return ae(d).pipe(Sq(this.paramsInheritanceStrategy,this.environmentInjector),wt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",Ln.NoDataFromResolver)}}))}),wt(d=>{let h=new Z_(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),$_(u=>{let d=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(wt(m=>{h.component=m}),oe(()=>{})));for(let m of h.children)p.push(...d(m));return p};return ml(d(u.targetSnapshot.root)).pipe(xi(null),Gr(1))}),$_(()=>this.afterPreactivation()),Ye(()=>{let{currentSnapshot:u,targetSnapshot:d}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,d.root);return h?Se(h).pipe(oe(()=>o)):ae(o)}),oe(u=>{let d=Bz(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=te(M({},u),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),wt(()=>{this.events.next(new wu)}),Hz(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Gr(1),wt({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new li(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),El(this.transitionAbortSubject.pipe(wt(u=>{throw u}))),Ns(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Ln.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ai(u=>{if(c=!0,YR(u))this.events.next(new ai(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),qz(u)?this.events.next(new Qa(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let d=new vu(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Hn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof Eu){let{message:p,cancellationCode:m}=kp(this.urlSerializer,h);this.events.next(new ai(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Qa(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let p=r.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return cn}))}))}cancelNavigationTransition(r,i,s){let o=new ai(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function jq(n){return n!==pu}var Uq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G(Bq),providedIn:"root"});let n=e;return n})(),p0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Bq=(()=>{let e=class e extends p0{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ys(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ok=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:()=>G($q),providedIn:"root"});let n=e;return n})(),$q=(()=>{let e=class e extends ok{constructor(){super(...arguments),this.location=G(Ma),this.urlSerializer=G(Cu),this.options=G(xu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(w0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ci,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=HR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ka)this.stateMemento=this.createStateMemento();else if(r instanceof ts)this.rawUrlTree=i.initialUrl;else if(r instanceof Tp){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof wu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof ai&&(r.code===Ln.GuardRejected||r.code===Ln.NoDataFromResolver)?this.restoreHistory(i):r instanceof vu?this.restoreHistory(i,!0):r instanceof li&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof ci?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Ys(e)))(s||e)}})(),e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),hu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(hu||{});function ak(n,e){n.events.pipe(At(t=>t instanceof li||t instanceof ai||t instanceof vu||t instanceof ts),oe(t=>t instanceof li||t instanceof ts?hu.COMPLETE:(t instanceof ai?t.code===Ln.Redirect||t.code===Ln.SupersededByNewNavigation:!1)?hu.REDIRECTING:hu.FAILED),At(t=>t!==hu.REDIRECTING),Gr(1)).subscribe(()=>{e()})}function zq(n){throw n}var qq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Hq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},jn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(jf),this.stateManager=G(ok),this.options=G(xu,{optional:!0})||{},this.pendingTasks=G(zi),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(_0),this.urlSerializer=G(Cu),this.location=G(Ma),this.urlHandlingStrategy=G(w0),this._events=new Ue,this.errorHandler=this.options.errorHandler||zq,this.navigated=!1,this.routeReuseStrategy=G(Uq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(Pp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(Fp,{optional:!0}),this.eventsSubscription=new ct,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ai&&i.code!==Ln.Redirect&&i.code!==Ln.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof li)this.navigated=!0;else if(i instanceof Qa){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u=M({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jq(s.source)},a);this.scheduleNavigation(c,pu,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Wq(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),pu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=M({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(y0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,d=u?this.currentUrlTree.fragment:a,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=s?s.snapshot:this.routerState.snapshot.root;p=BR(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return $R(p,r,h,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=mu(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,pu,null,i)}navigate(r,i={skipLocationChange:!1}){return Gq(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=M({},qq):i===!1?s=M({},Hq):s=i,mu(r))return ER(this.currentUrlTree,r,s);let o=this.parseUrl(r);return ER(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,d;a?(c=a.resolve,u=a.reject,d=a.promise):d=new Promise((p,m)=>{c=p,u=m});let h=this.pendingTasks.add();return ak(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Gq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ne(4008,!1)}function Wq(n){return!(n instanceof wu)&&!(n instanceof Qa)}var Op=class{};var Kq=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(At(r=>r instanceof li),Hr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Nf(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Se(s).pipe(Si())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=ae(null);let o=s.pipe(vt(a=>a===null?ae(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Se([o,a]).pipe(Si())}else return o})}};e.\u0275fac=function(i){return new(i||e)(B(jn),B(qf),B(dn),B(Op),B(v0))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ck=new W(""),Qq=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ka?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof li?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof ts&&r.code===Cp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Sp&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Sp(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){VA()},e.\u0275prov=K({token:e,factory:e.\u0275fac});let n=e;return n})();function Yq(n){return n.routerState.root}function Mu(n,e){return{\u0275kind:n,\u0275providers:e}}function Zq(){let n=G(Nn);return e=>{let t=n.get(ti);if(e!==t.components[0])return;let r=n.get(jn),i=n.get(lk);n.get(E0)===1&&r.initialNavigation(),n.get(uk,null,De.Optional)?.setUpPreloading(),n.get(ck,null,De.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lk=new W("",{factory:()=>new Ue}),E0=new W("",{providedIn:"root",factory:()=>1});function Jq(){return Mu(2,[{provide:E0,useValue:0},{provide:$f,multi:!0,deps:[Nn],useFactory:e=>{let t=e.get(Jx,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(jn),s=e.get(lk);ak(i,()=>{r(!0)}),e.get(_0).afterPreactivation=()=>(r(!0),s.closed?ae(void 0):s),i.initialNavigation()}))}}])}function Xq(){return Mu(3,[{provide:$f,multi:!0,useFactory:()=>{let e=G(jn);return()=>{e.setUpLocationChangeListener()}}},{provide:E0,useValue:2}])}var uk=new W("");function eH(n){return Mu(0,[{provide:uk,useExisting:Kq},{provide:Op,useExisting:n}])}function tH(){return Mu(8,[CR,{provide:Fp,useExisting:CR}])}function nH(n){let e=[{provide:ik,useValue:Fq},{provide:sk,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return Mu(9,e)}var xR=new W("ROUTER_FORROOT_GUARD"),rH=[Ma,{provide:Cu,useClass:Wa},jn,Su,{provide:Sn,useFactory:Yq,deps:[jn]},v0,[]],I0=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[rH,[],{provide:Pp,multi:!0,useValue:r},{provide:xR,useFactory:aH,deps:[[jn,new ga,new df]]},{provide:xu,useValue:i||{}},i?.useHash?sH():oH(),iH(),i?.preloadingStrategy?eH(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?cH(i):[],i?.bindToComponentInputs?tH().\u0275providers:[],i?.enableViewTransitions?nH().\u0275providers:[],lH()]}}static forChild(r){return{ngModule:e,providers:[{provide:Pp,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(B(xR,8))},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({});let n=e;return n})();function iH(){return{provide:ck,useFactory:()=>{let n=G(sM),e=G(Ce),t=G(xu),r=G(_0),i=G(Cu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Qq(i,r,n,e,t)}}}function sH(){return{provide:Js,useClass:eM}}function oH(){return{provide:Js,useClass:s_}}function aH(n){return"guarded"}function cH(n){return[n.initialNavigation==="disabled"?Xq().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Jq().\u0275providers:[]]}var MR=new W("");function lH(){return[{provide:MR,useFactory:Zq},{provide:zf,multi:!0,useExisting:MR}]}var Le=class n{static parseHtmlLine(e){return e.includes("Widget:")?{Widget:"NAVI"}:{PageType:e}}static isMobileBrowser(){let e=navigator.userAgent||window.opera;return!!(/android/i.test(e)||/iPad|iPhone|iPod/.test(e)&&!window.MSStream)}static toString(e){return e==null?"":typeof e=="string"?e:String(e)}static unescape(e){return e=this.toString(e),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")}static getTodaysDate(e){let t=new Date().toUTCString();return t=t.replaceAll(" ",e),t.replace(",","")}static getBasePath(e){let t="",r=e.snapshot.url[0];return r&&r.path&&(t=r.path),r&&r.path?.toLocaleLowerCase()}static getUrl(e){let t=e.url;for(;t!==decodeURIComponent(t);)t=decodeURIComponent(t);let r=t.indexOf("?");return r>0?e.url.substring(0,r):e.url}static getRouterUrl(e,t){return this.getUrl(e).replace("/"+t,"")}static getRouteParam(e,t){return e.snapshot.paramMap.get(t)?.toLocaleLowerCase()}static getQueryParam(e,t){return e.snapshot.queryParamMap.get(t)}static getFirstLineEnd(e){return e.indexOf(`
`)}static getFirstLine(e){let t=e.indexOf(`
`);return t!==-1?e.substring(0,t):e}static getDataValueFromString(e){let t=e.charAt(0);return t=="["?(e=e.replace(/'/g,'"'),e=JSON.parse(e),e):t=="'"||t=="`"||t=='"'?(e=e.replace(/'/g,'"'),JSON.parse(e)):new Number(e)}static getFilesInFolder(e,t){return e.files.filter(r=>r.includes(t))}static getFileNameWithoutCurrentFolder(e,t){return n.getFileName(e.substring(e.indexOf(t)+t.length+1),!0)}static getFileName(e,t=!1){let i=(t?e:e.substring(e.lastIndexOf("/")+1)).replace(/[-_]/g," ");return i.substring(0,i.lastIndexOf("."))}static getFileNameWithCategory(e,t=!1){let r="",i=e.lastIndexOf("/");e.indexOf("/")!=-1&&(r=t?e.substring(0,e.indexOf("/")):e.substring(e.lastIndexOf("/",i-1)+1,i));let a=e.substring(i+1).replace(/[-_]/g," ");return{Category:r,File:a.substring(0,a.lastIndexOf("."))}}static closestHost(e){e=e.substring(e.indexOf("."));let t=new Map;return t.set("raw.githubusercontent","github"),t.set(".githubusercontent","github"),t.set("youtu","youtube"),t.set(".publichome","link"),t.has(e)?t.get(e):e}static getGhUserFilePath(e,t,r=!1){return r?`${he.gh_api_url}/repos/${e}/${he.gh_private_dr_folder}/contents/${t}`:`${he.gh_dr_url}/${e}/${he.gh_dr_folder}/${t}`}};var Yn=class{constructor(e){if(this.githubService=e,this.router=G(jn),this.route=G(Sn),this.messaging=G(en),this.routerFileUrl="",this.hasPrivateAccess=!1,this.githubUser=he.gh_default_user_repo,this.basePath="",this.articleFolderName="",this.isHomePageGHUser=!1,this.basePath=Le.getBasePath(this.route),this.basePath=="i"||re.INTERNAL_FOLDERS.includes(this.basePath)){let t=Le.getRouteParam(this.route,"folder");t||(t=this.basePath),this.articleFolderName=t}else console.debug("It is a user's public article !!");this.githubUser=Le.getRouteParam(this.route,"ghUser"),this.githubUser||(this.githubUser=he.gh_default_user_repo,this.isHomePageGHUser=!0),this.routerFileUrl=Le.getRouterUrl(this.router,this.githubUser),this.githubUser&&this.githubService.getJwtToken(this.githubUser).then(t=>this.githubService.getAccessToken(t).then(r=>{this.hasPrivateAccess=r!=null})).finally(()=>this.initialiseUserContext(this.githubUser))}initialiseUserContext(e){return b(this,null,function*(){this.githubService.get("users/"+e).then(t=>{re.ghUser=JSON.parse(t),re.userContext.username=e,this.githubService.getGhDirectoryContents(e).then(r=>{re.userContext.directory=r,this.messaging.send({cmd:"UserDirectory"})})}).finally(()=>{re.ghUserLoaded=e,this.messaging.send({cmd:"UserContext"})})})}getFolderName(){return this.articleFolderName}};function tn(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function jp(n,e,t,r){if(typeof t!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>jp.bind(null,n,s,i,r),t)():Promise.resolve().then(()=>n.registry[e]?n.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),t)():t(r))}function dk(n,e,t,r){let i=r;n.registry[t]||(n.registry[t]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(c=>(a=c,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),n.registry[t].push({hook:r,orig:i})}function hk(n,e,t){if(!n.registry[e])return;let r=n.registry[e].map(i=>i.orig).indexOf(t);r!==-1&&n.registry[e].splice(r,1)}var fk=Function.bind,pk=fk.bind(fk);function gk(n,e,t){let r=pk(hk,null).apply(null,t?[e,t]:[e]);n.api={remove:r},n.remove=r,["before","error","after","wrap"].forEach(i=>{let s=t?[e,i,t]:[e,i];n[i]=n.api[i]=pk(dk,null).apply(null,s)})}function uH(){let n=Symbol("Singular"),e={registry:{}},t=jp.bind(null,e,n);return gk(t,e,n),t}function dH(){let n={registry:{}},e=jp.bind(null,n);return gk(e,n),e}var mk={Singular:uH,Collection:dH};var hH="0.0.0-development",fH=`octokit-endpoint.js/${hH} ${tn()}`,pH={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":fH},mediaType:{format:""}};function gH(n){return n?Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=n[t],e),{}):{}}function mH(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function wk(n,e){let t=Object.assign({},n);return Object.keys(e).forEach(r=>{mH(e[r])?r in n?t[r]=wk(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function yk(n){for(let e in n)n[e]===void 0&&delete n[e];return n}function D0(n,e,t){if(typeof e=="string"){let[i,s]=e.split(" ");t=Object.assign(s?{method:i,url:s}:{url:i},t)}else t=Object.assign({},e);t.headers=gH(t.headers),yk(t),yk(t.headers);let r=wk(n||{},t);return t.url==="/graphql"&&(n&&n.mediaType.previews?.length&&(r.mediaType.previews=n.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function yH(n,e){let t=/\?/.test(n)?"&":"?",r=Object.keys(e);return r.length===0?n:n+t+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var vH=/\{[^}]+\}/g;function wH(n){return n.replace(/^\W+|\W+$/g,"").split(/,/)}function _H(n){let e=n.match(vH);return e?e.map(wH).reduce((t,r)=>t.concat(r),[]):[]}function vk(n,e){let t={__proto__:null};for(let r of Object.keys(n))e.indexOf(r)===-1&&(t[r]=n[r]);return t}function _k(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function Xa(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Ru(n,e,t){return e=n==="+"||n==="#"?_k(e):Xa(e),t?Xa(t)+"="+e:e}function Ja(n){return n!=null}function b0(n){return n===";"||n==="&"||n==="?"}function EH(n,e,t,r){var i=n[t],s=[];if(Ja(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(Ru(e,i,b0(e)?t:""));else if(r==="*")Array.isArray(i)?i.filter(Ja).forEach(function(o){s.push(Ru(e,o,b0(e)?t:""))}):Object.keys(i).forEach(function(o){Ja(i[o])&&s.push(Ru(e,i[o],o))});else{let o=[];Array.isArray(i)?i.filter(Ja).forEach(function(a){o.push(Ru(e,a))}):Object.keys(i).forEach(function(a){Ja(i[a])&&(o.push(Xa(a)),o.push(Ru(e,i[a].toString())))}),b0(e)?s.push(Xa(t)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?Ja(i)&&s.push(Xa(t)):i===""&&(e==="&"||e==="?")?s.push(Xa(t)+"="):i===""&&s.push("");return s}function IH(n){return{expand:bH.bind(null,n)}}function bH(n,e){var t=["+","#",".","/",";","?","&"];return n=n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="",c=[];if(t.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(u){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(u);c.push(EH(e,a,d[1],d[2]||d[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(c.length!==0?a:"")+c.join(o)}else return c.join(",")}else return _k(s)}),n==="/"?n:n.replace(/\/$/,"")}function Ek(n){let e=n.method.toUpperCase(),t=(n.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},n.headers),i,s=vk(n,["method","baseUrl","url","headers","request","mediaType"]),o=_H(t);t=IH(t).expand(s),/^http/.test(t)||(t=n.baseUrl+t);let a=Object.keys(n).filter(d=>o.includes(d)).concat("baseUrl"),c=vk(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(n.mediaType.format&&(r.accept=r.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${n.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&n.mediaType.previews?.length)){let d=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=d.concat(n.mediaType.previews).map(h=>{let p=n.mediaType.format?`.${n.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${p}`}).join(",")}return["GET","HEAD"].includes(e)?t=yH(t,c):"data"in c?i=c.data:Object.keys(c).length&&(i=c),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:t,headers:r},typeof i<"u"?{body:i}:null,n.request?{request:n.request}:null)}function DH(n,e,t){return Ek(D0(n,e,t))}function Ik(n,e){let t=D0(n,e),r=DH.bind(null,t);return Object.assign(r,{DEFAULTS:t,defaults:Ik.bind(null,t),merge:D0.bind(null,t),parse:Ek})}var bk=Ik(null,pH);var ui=class extends Error{name;status;request;response;constructor(e,t,r){super(e),this.name="HttpError",this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);let i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}};var CH="0.0.0-development",TH={headers:{"user-agent":`octokit-request.js/${CH} ${tn()}`}};function SH(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function Dk(n){return b(this,null,function*(){let e=n.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let t=n.request?.log||console,r=n.request?.parseSuccessResponseBody!==!1,i=SH(n.body)||Array.isArray(n.body)?JSON.stringify(n.body):n.body,s=Object.fromEntries(Object.entries(n.headers).map(([h,p])=>[h,String(p)])),o;try{o=yield e(n.url,M({method:n.method,body:i,redirect:n.request?.redirect,headers:s,signal:n.request?.signal},n.body&&{duplex:"half"}))}catch(h){let p="Unknown Error";if(h instanceof Error){if(h.name==="AbortError")throw h.status=500,h;p=h.message,h.name==="TypeError"&&"cause"in h&&(h.cause instanceof Error?p=h.cause.message:typeof h.cause=="string"&&(p=h.cause))}let m=new ui(p,500,{request:n});throw m.cause=h,m}let a=o.status,c=o.url,u={};for(let[h,p]of o.headers)u[h]=p;let d={url:c,status:a,headers:u,data:""};if("deprecation"in u){let h=u.link&&u.link.match(/<([^>]+)>; rel="deprecation"/),p=h&&h.pop();t.warn(`[@octokit/request] "${n.method} ${n.url}" is deprecated. It is scheduled to be removed on ${u.sunset}${p?`. See ${p}`:""}`)}if(a===204||a===205)return d;if(n.method==="HEAD"){if(a<400)return d;throw new ui(o.statusText,a,{response:d,request:n})}if(a===304)throw d.data=yield C0(o),new ui("Not modified",a,{response:d,request:n});if(a>=400)throw d.data=yield C0(o),new ui(AH(d.data),a,{response:d,request:n});return d.data=r?yield C0(o):o.body,d})}function C0(n){return b(this,null,function*(){let e=n.headers.get("content-type");return/application\/json/.test(e)?n.json().catch(()=>n.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?n.text():n.arrayBuffer()})}function AH(n){if(typeof n=="string")return n;if(n instanceof ArrayBuffer)return"Unknown error";if("message"in n){let e="documentation_url"in n?` - ${n.documentation_url}`:"";return Array.isArray(n.errors)?`${n.message}: ${n.errors.map(t=>JSON.stringify(t)).join(", ")}${e}`:`${n.message}${e}`}return`Unknown error: ${JSON.stringify(n)}`}function T0(n,e){let t=n.defaults(e);return Object.assign(function(i,s){let o=t.merge(i,s);if(!o.request||!o.request.hook)return Dk(t.parse(o));let a=(c,u)=>Dk(t.parse(t.merge(c,u)));return Object.assign(a,{endpoint:t,defaults:T0.bind(null,t)}),o.request.hook(a,o)},{endpoint:t,defaults:T0.bind(null,t)})}var Be=T0(bk,TH);var xH="0.0.0-development";function MH(n){return`Request failed due to following response errors:
`+n.errors.map(e=>` - ${e.message}`).join(`
`)}var RH=class extends Error{constructor(n,e,t){super(MH(t)),this.request=n,this.headers=e,this.response=t,this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},kH=["method","baseUrl","url","headers","request","query","mediaType"],NH=["query","method","url"],Ck=/\/api\/v3\/?$/;function PH(n,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in t)if(NH.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let r=typeof e=="string"?Object.assign({query:e},t):e,i=Object.keys(r).reduce((o,a)=>kH.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||n.endpoint.DEFAULTS.baseUrl;return Ck.test(s)&&(i.url=s.replace(Ck,"/api/graphql")),n(i).then(o=>{if(o.data.errors){let a={};for(let c of Object.keys(o.headers))a[c]=o.headers[c];throw new RH(i,a,o.data)}return o.data.data})}function S0(n,e){let t=n.defaults(e);return Object.assign((i,s)=>PH(t,i,s),{defaults:S0.bind(null,t),endpoint:t.endpoint})}var Jee=S0(Be,{headers:{"user-agent":`octokit-graphql.js/${xH} ${tn()}`},method:"POST",url:"/graphql"});function Tk(n){return S0(n,{method:"POST",url:"/graphql"})}var OH=/^v1\./,FH=/^ghs_/,VH=/^ghu_/;function LH(n){return b(this,null,function*(){let e=n.split(/\./).length===3,t=OH.test(n)||FH.test(n),r=VH.test(n);return{type:"token",token:n,tokenType:e?"app":t?"installation":r?"user-to-server":"oauth"}})}function jH(n){return n.split(/\./).length===3?`bearer ${n}`:`token ${n}`}function UH(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);return i.headers.authorization=jH(n),e(i)})}var Sk=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(LH.bind(null,e),{hook:UH.bind(null,e)})};var A0="6.1.2";var Ak=()=>{},BH=console.warn.bind(console),$H=console.error.bind(console),xk=`octokit-core.js/${A0} ${tn()}`,x0=(()=>{class n{static VERSION=A0;static defaults(t){return class extends this{constructor(...i){let s=i[0]||{};if(typeof t=="function"){super(t(s));return}super(Object.assign({},t,s,s.userAgent&&t.userAgent?{userAgent:`${s.userAgent} ${t.userAgent}`}:null))}}}static plugins=[];static plugin(...t){let r=this.plugins;return class extends this{static plugins=r.concat(t.filter(s=>!r.includes(s)))}}constructor(t={}){let r=new mk.Collection,i={baseUrl:Be.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(i.headers["user-agent"]=t.userAgent?`${t.userAgent} ${xk}`:xk,t.baseUrl&&(i.baseUrl=t.baseUrl),t.previews&&(i.mediaType.previews=t.previews),t.timeZone&&(i.headers["time-zone"]=t.timeZone),this.request=Be.defaults(i),this.graphql=Tk(this.request).defaults(i),this.log=Object.assign({debug:Ak,info:Ak,warn:BH,error:$H},t.log),this.hook=r,t.authStrategy){let o=t,{authStrategy:a}=o,c=mn(o,["authStrategy"]),u=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:c},t.auth));r.wrap("request",u.hook),this.auth=u}else if(!t.auth)this.auth=()=>b(this,null,function*(){return{type:"unauthenticated"}});else{let a=Sk(t.auth);r.wrap("request",a.hook),this.auth=a}let s=this.constructor;for(let a=0;a<s.plugins.length;++a)Object.assign(this,s.plugins[a](this,t))}request;graphql;log;hook;auth}return n})();function zH(n){let e=n.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(e.baseUrl)?"https://github.com":e.baseUrl.replace("/api/v3","")}function Up(n,e,t){return b(this,null,function*(){let r=M({baseUrl:zH(n),headers:{accept:"application/json"}},t),i=yield n(e,r);if("error"in i.data){let s=new ui(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:n.endpoint.merge(e,r)});throw s.response=i,s}return i})}function Nk(n){return b(this,null,function*(){let e=n.request||Be,t=yield Up(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,code:n.code,redirect_uri:n.redirectUrl}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=Mk(i,t.data.expires_in),r.refreshTokenExpiresAt=Mk(i,t.data.refresh_token_expires_in)}delete r.scopes}return te(M({},t),{authentication:r})})}function Mk(n,e){return new Date(n+e*1e3).toISOString()}function Pk(n){return b(this,null,function*(){let e=n.request||Be,t={client_id:n.clientId};return"scopes"in n&&Array.isArray(n.scopes)&&(t.scope=n.scopes.join(" ")),Up(e,"POST /login/device/code",t)})}function M0(n){return b(this,null,function*(){let e=n.request||Be,t=yield Up(e,"POST /login/oauth/access_token",{client_id:n.clientId,device_code:n.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),r={clientType:n.clientType,clientId:n.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in n&&(r.clientSecret=n.clientSecret),n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=Rk(i,t.data.expires_in),r.refreshTokenExpiresAt=Rk(i,t.data.refresh_token_expires_in)}delete r.scopes}return te(M({},t),{authentication:r})})}function Rk(n,e){return new Date(n+e*1e3).toISOString()}function Ok(n){return b(this,null,function*(){let t=yield(n.request||Be)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`},client_id:n.clientId,access_token:n.token}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.token,scopes:t.data.scopes};return t.data.expires_at&&(r.expiresAt=t.data.expires_at),n.clientType==="github-app"&&delete r.scopes,te(M({},t),{authentication:r})})}function Fk(n){return b(this,null,function*(){let e=n.request||Be,t=yield Up(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,grant_type:"refresh_token",refresh_token:n.refreshToken}),r=new Date(t.headers.date).getTime(),i={clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:kk(r,t.data.expires_in),refreshTokenExpiresAt:kk(r,t.data.refresh_token_expires_in)};return te(M({},t),{authentication:i})})}function kk(n,e){return new Date(n+e*1e3).toISOString()}function Vk(n){return b(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`),r=yield e("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token}),i={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:r.data.token,scopes:r.data.scopes};return r.data.expires_at&&(i.expiresAt=r.data.expires_at),n.clientType==="github-app"&&delete i.scopes,te(M({},r),{authentication:i})})}function Lk(n){return b(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function jk(n){return b(this,null,function*(){let e=n.request||Be,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function Bk(n,e){return b(this,null,function*(){let t=qH(n,e.auth);if(t)return t;let{data:r}=yield Pk({clientType:n.clientType,clientId:n.clientId,request:e.request||n.request,scopes:e.auth.scopes||n.scopes});yield n.onVerification(r);let i=yield R0(e.request||n.request,n.clientId,n.clientType,r);return n.authentication=i,i})}function qH(n,e){if(e.refresh===!0||!n.authentication)return!1;if(n.clientType==="github-app")return n.authentication;let t=n.authentication,r=("scopes"in e&&e.scopes||n.scopes).join(" "),i=t.scopes.join(" ");return r===i?t:!1}function Uk(n){return b(this,null,function*(){yield new Promise(e=>setTimeout(e,n*1e3))})}function R0(n,e,t,r){return b(this,null,function*(){try{let i={clientId:e,request:n,code:r.device_code},{authentication:s}=t==="oauth-app"?yield M0(te(M({},i),{clientType:"oauth-app"})):yield M0(te(M({},i),{clientType:"github-app"}));return M({type:"token",tokenType:"oauth"},s)}catch(i){if(!i.response)throw i;let s=i.response.data.error;if(s==="authorization_pending")return yield Uk(r.interval),R0(n,e,t,r);if(s==="slow_down")return yield Uk(r.interval+5),R0(n,e,t,r);throw i}})}function HH(n,e){return b(this,null,function*(){return Bk(n,{auth:e})})}function GH(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);let{token:s}=yield Bk(n,{request:e,auth:{type:"oauth"}});return i.headers.authorization=`token ${s}`,e(i)})}var WH="0.0.0-development";function $k(n){let e=n.request||Be.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${WH} ${tn()}`}}),s=n,{request:t=e}=s,r=mn(s,["request"]),i=n.clientType==="github-app"?te(M({},r),{clientType:"github-app",request:t}):te(M({},r),{clientType:"oauth-app",request:t,scopes:n.scopes||[]});if(!n.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!n.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(HH.bind(null,i),{hook:GH.bind(null,i)})}var qk="0.0.0-development";function zk(n){return b(this,null,function*(){if("code"in n.strategyOptions){let{authentication:e}=yield Nk(te(M({clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}));return M({type:"token",tokenType:"oauth"},e)}if("onVerification"in n.strategyOptions){let t=yield $k(te(M({clientType:n.clientType,clientId:n.clientId,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}))({type:"oauth"});return M({clientSecret:n.clientSecret},t)}if("token"in n.strategyOptions)return M({type:"token",tokenType:"oauth",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions);throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")})}function k0(t){return b(this,arguments,function*(n,e={}){if(n.authentication||(n.authentication=n.clientType==="oauth-app"?yield zk(n):yield zk(n)),n.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");let r=n.authentication;if("expiresAt"in r&&(e.type==="refresh"||new Date(r.expiresAt)<new Date)){let{authentication:i}=yield Fk({clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,refreshToken:r.refreshToken,request:n.request});n.authentication=M({tokenType:"oauth",type:"token"},i)}if(e.type==="refresh"){if(n.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!r.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");yield n.onTokenCreated?.(n.authentication,{type:e.type})}if(e.type==="check"||e.type==="reset"){let i=e.type==="check"?Ok:Vk;try{let{authentication:s}=yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request});return n.authentication=M({tokenType:"oauth",type:"token"},s),e.type==="reset"&&(yield n.onTokenCreated?.(n.authentication,{type:e.type})),n.authentication}catch(s){throw s.status===404&&(s.message="[@octokit/auth-oauth-user] Token is invalid",n.authentication.invalid=!0),s}}if(e.type==="delete"||e.type==="deleteAuthorization"){let i=e.type==="delete"?Lk:jk;try{yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request})}catch(s){if(s.status!==404)throw s}return n.authentication.invalid=!0,n.authentication}return n.authentication})}var KH=/\/applications\/[^/]+\/(token|grant)s?/;function ku(n){return n&&KH.test(n)}function QH(i,s,o){return b(this,arguments,function*(n,e,t,r={}){let a=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(a.url))return e(a);if(ku(a.url)){let u=btoa(`${n.clientId}:${n.clientSecret}`);return a.headers.authorization=`basic ${u}`,e(a)}let{token:c}=n.clientType==="oauth-app"?yield k0(te(M({},n),{request:e})):yield k0(te(M({},n),{request:e}));return a.headers.authorization="token "+c,e(a)})}function Bp(o){var a=o,{clientId:n,clientSecret:e,clientType:t="oauth-app",request:r=Be.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${qk} ${tn()}`}}),onTokenCreated:i}=a,s=mn(a,["clientId","clientSecret","clientType","request","onTokenCreated"]);let c=Object.assign({clientType:t,clientId:n,clientSecret:e,onTokenCreated:i,strategyOptions:s,request:r});return Object.assign(k0.bind(null,c),{hook:QH.bind(null,c)})}Bp.VERSION=qk;function YH(n,e){return b(this,null,function*(){if(e.type==="oauth-app")return{type:"oauth-app",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`}};if("factory"in e){let i=M(M({},e),n),{type:s}=i,o=mn(i,["type"]);return e.factory(o)}let t=M({clientId:n.clientId,clientSecret:n.clientSecret,request:n.request},e);return(n.clientType==="oauth-app"?yield Bp(te(M({},t),{clientType:n.clientType})):yield Bp(te(M({},t),{clientType:n.clientType})))()})}function ZH(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);if(n.clientType==="github-app"&&!ku(i.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let s=btoa(`${n.clientId}:${n.clientSecret}`);i.headers.authorization=`basic ${s}`;try{return yield e(i)}catch(o){throw o.status!==401||(o.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),o}})}var JH="0.0.0-development";function Hk(n){let e=Object.assign({request:Be.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${JH} ${tn()}`}}),clientType:"oauth-app"},n);return Object.assign(YH.bind(null,e),{hook:ZH.bind(null,e)})}function Wk(n){return n.includes("-----BEGIN RSA PRIVATE KEY-----")}function Kk(n){return n.includes("-----BEGIN OPENSSH PRIVATE KEY-----")}function N0(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function Qk(n){let e=n.trim().split(`
`).slice(1,-1).join(""),t=atob(e);return N0(t)}function Yk(n,e){return`${Gk(n)}.${Gk(e)}`}function Zk(n){for(var e="",t=new Uint8Array(n),r=t.byteLength,i=0;i<r;i++)e+=String.fromCharCode(t[i]);return Jk(btoa(e))}function Jk(n){return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Gk(n){return Jk(btoa(JSON.stringify(n)))}var{subtle:P0}=globalThis.crypto;function Xk(t){return b(this,arguments,function*({privateKey:n,payload:e}){let r=n;if(Wk(r))throw new Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");if(Kk(r))throw new Error("[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s={alg:"RS256",typ:"JWT"},o=Qk(r),a=yield P0.importKey("pkcs8",o,i,!1,["sign"]),c=Yk(s,e),u=N0(c),d=yield P0.sign(i.name,a,u),h=Zk(d);return`${c}.${h}`})}function O0(r){return b(this,arguments,function*({id:n,privateKey:e,now:t=Math.floor(Date.now()/1e3)}){let i=e.replace(/\\n/g,`
`),s=t-30,o=s+60*10,c=yield Xk({privateKey:i,payload:{iat:s,exp:o,iss:n}});return{appId:n,expiration:o,token:c}})}var ec=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,tN=new Set,F0=typeof process=="object"&&process?process:{},nN=(n,e,t,r)=>{typeof F0.emitWarning=="function"?F0.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)},$p=globalThis.AbortController,eN=globalThis.AbortSignal;if(typeof $p>"u"){eN=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},$p=class{constructor(){e()}signal=new eN;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let n=F0.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{n&&(n=!1,nN("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var XH=n=>!tN.has(n),tne=Symbol("type"),rs=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),rN=n=>rs(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?tc:null:null,tc=class extends Array{constructor(e){super(e),this.fill(0)}},V0=class n{heap;length;static#s=!1;static create(e){let t=rN(e);if(!t)return[];n.#s=!0;let r=new n(e,t);return n.#s=!1,r}constructor(e,t){if(!n.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},zp=class n{#s;#l;#g;#m;#M;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#r;#n;#e;#u;#h;#c;#o;#v;#a;#w;#_;#f;#E;#T;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#f,sizes:e.#w,keyMap:e.#r,keyList:e.#n,valList:e.#e,next:e.#u,prev:e.#h,get head(){return e.#c},get tail(){return e.#o},free:e.#v,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,r,i,s)=>e.#P(t,r,i,s),moveToTail:t=>e.#x(t),indexes:t=>e.#I(t),rindexes:t=>e.#b(t),isStale:t=>e.#p(t)}}get max(){return this.#s}get maxSize(){return this.#l}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#M}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(e){let{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:p,maxSize:m=0,maxEntrySize:w=0,sizeCalculation:D,fetchMethod:C,memoMethod:N,noDeleteOnFetchRejection:V,noDeleteOnStaleGet:L,allowStaleOnFetchRejection:H,allowStaleOnFetchAbort:Z,ignoreFetchAbort:Q}=e;if(t!==0&&!rs(t))throw new TypeError("max option must be a nonnegative integer");let I=t?rN(t):Array;if(!I)throw new Error("invalid max value: "+t);if(this.#s=t,this.#l=m,this.maxEntrySize=w||this.#l,this.sizeCalculation=D,this.sizeCalculation){if(!this.#l&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(N!==void 0&&typeof N!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=N,C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#M=C,this.#T=!!C,this.#r=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#u=new I(t),this.#h=new I(t),this.#c=0,this.#o=0,this.#v=V0.create(t),this.#i=0,this.#y=0,typeof u=="function"&&(this.#g=u),typeof d=="function"?(this.#m=d,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#E=!!this.#g,this.#d=!!this.#m,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!V,this.allowStaleOnFetchRejection=!!H,this.allowStaleOnFetchAbort=!!Z,this.ignoreFetchAbort=!!Q,this.maxEntrySize!==0){if(this.#l!==0&&!rs(this.#l))throw new TypeError("maxSize must be a positive integer if specified");if(!rs(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!L,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=rs(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!rs(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#s===0&&this.ttl===0&&this.#l===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#l){let v="LRU_CACHE_UNBOUNDED";XH(v)&&(tN.add(v),nN("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",v,n))}}getRemainingTTL(e){return this.#r.has(e)?1/0:0}#O(){let e=new tc(this.#s),t=new tc(this.#s);this.#f=e,this.#_=t,this.#F=(s,o,a=ec.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#p(s)&&this.#D(this.#n[s],"expire")},o+1);c.unref&&c.unref()}},this.#S=s=>{t[s]=e[s]!==0?ec.now():0},this.#C=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();let u=s.now-c;s.remainingTTL=a-u}};let r=0,i=()=>{let s=ec.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#r.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let u=(r||i())-c;return a-u},this.#p=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#S=()=>{};#C=()=>{};#F=()=>{};#p=()=>!1;#B(){let e=new tc(this.#s);this.#y=0,this.#w=e,this.#A=t=>{this.#y-=e[t],e[t]=0},this.#V=(t,r,i,s)=>{if(this.#t(r))return 0;if(!rs(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!rs(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#k=(t,r,i)=>{if(e[t]=r,this.#l){let s=this.#l-e[t];for(;this.#y>s;)this.#N(!0)}this.#y+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#y)}}#A=e=>{};#k=(e,t,r)=>{};#V=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#c));)t=this.#h[t]}*#b({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#c;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#o));)t=this.#u[t]}#L(e){return e!==void 0&&this.#r.get(this.#n[e])===e}*entries(){for(let e of this.#I())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#I()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#b()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#I())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#n[r],this))return this.get(this.#n[r],t)}}forEach(e,t=this){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}rforEach(e,t=this){for(let r of this.#b()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}purgeStale(){let e=!1;for(let t of this.#b({allowStale:!0}))this.#p(t)&&(this.#D(this.#n[t],"expire"),e=!0);return e}info(e){let t=this.#r.get(e);if(t===void 0)return;let r=this.#e[t],i=this.#t(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#f&&this.#_){let o=this.#f[t],a=this.#_[t];if(o&&a){let c=o-(ec.now()-a);s.ttl=c,s.start=Date.now()}}return this.#w&&(s.size=this.#w[t]),s}dump(){let e=[];for(let t of this.#I({allowStale:!0})){let r=this.#n[t],i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#f&&this.#_){o.ttl=this.#f[t];let a=ec.now()-this.#_[t];o.start=Math.floor(Date.now()-a)}this.#w&&(o.size=this.#w[t]),e.unshift([r,o])}return e}load(e){this.clear();for(let[t,r]of e){if(r.start){let i=Date.now()-r.start;r.start=ec.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r,{noUpdateTTL:u=this.noUpdateTTL}=r,d=this.#V(e,t,r.size||0,a);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#i===0?void 0:this.#r.get(e);if(h===void 0)h=this.#i===0?this.#o:this.#v.length!==0?this.#v.pop():this.#i===this.#s?this.#N(!1):this.#i,this.#n[h]=e,this.#e[h]=t,this.#r.set(e,h),this.#u[this.#o]=h,this.#h[h]=this.#o,this.#o=h,this.#i++,this.#k(h,d,c),c&&(c.set="add"),u=!1;else{this.#x(h);let p=this.#e[h];if(t!==p){if(this.#T&&this.#t(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=p;m!==void 0&&!o&&(this.#E&&this.#g?.(m,e,"set"),this.#d&&this.#a?.push([m,e,"set"]))}else o||(this.#E&&this.#g?.(p,e,"set"),this.#d&&this.#a?.push([p,e,"set"]));if(this.#A(h),this.#k(h,d,c),this.#e[h]=t,c){c.set="replace";let m=p&&this.#t(p)?p.__staleWhileFetching:p;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#f&&this.#O(),this.#f&&(u||this.#F(h,i,s),c&&this.#C(c,h)),!o&&this.#d&&this.#a){let p=this.#a,m;for(;m=p?.shift();)this.#m?.(...m)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#c];if(this.#N(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}}#N(e){let t=this.#c,r=this.#n[t],i=this.#e[t];return this.#T&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(i,r,"evict"),this.#d&&this.#a?.push([i,r,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#v.push(t)),this.#i===1?(this.#c=this.#o=0,this.#v.length=0):this.#c=this.#u[t],this.#r.delete(r),this.#i--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#r.get(e);if(s!==void 0){let o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(s))i&&(i.has="stale",this.#C(i,s));else return r&&this.#S(s),i&&(i.has="hit",this.#C(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#r.get(e);if(i===void 0||!r&&this.#p(i))return;let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#P(e,t,r,i){let s=t===void 0?void 0:this.#e[t];if(this.#t(s))return s;let o=new $p,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:r,context:i},u=(D,C=!1)=>{let{aborted:N}=o.signal,V=r.ignoreFetchAbort&&D!==void 0;if(r.status&&(N&&!C?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,V&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),N&&!V&&!C)return h(o.signal.reason);let L=m;return this.#e[t]===m&&(D===void 0?L.__staleWhileFetching?this.#e[t]=L.__staleWhileFetching:this.#D(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,D,c.options))),D},d=D=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=D),h(D)),h=D=>{let{aborted:C}=o.signal,N=C&&r.allowStaleOnFetchAbort,V=N||r.allowStaleOnFetchRejection,L=V||r.noDeleteOnFetchRejection,H=m;if(this.#e[t]===m&&(!L||H.__staleWhileFetching===void 0?this.#D(e,"fetch"):N||(this.#e[t]=H.__staleWhileFetching)),V)return r.status&&H.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),H.__staleWhileFetching;if(H.__returned===H)throw D},p=(D,C)=>{let N=this.#M?.(e,s,c);N&&N instanceof Promise&&N.then(V=>D(V===void 0?void 0:V),C),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(D(void 0),r.allowStaleOnFetchAbort&&(D=V=>u(V,!0)))})};r.status&&(r.status.fetchDispatched=!0);let m=new Promise(p).then(u,d),w=Object.assign(m,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,w,te(M({},c.options),{status:void 0})),t=this.#r.get(e)):this.#e[t]=w,w}#t(e){if(!this.#T)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof $p}fetch(r){return b(this,arguments,function*(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:u=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:w=this.ignoreFetchAbort,allowStaleOnFetchAbort:D=this.allowStaleOnFetchAbort,context:C,forceRefresh:N=!1,status:V,signal:L}=t;if(!this.#T)return V&&(V.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:V});let H={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:c,size:u,sizeCalculation:d,noUpdateTTL:h,noDeleteOnFetchRejection:p,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:D,ignoreFetchAbort:w,status:V,signal:L},Z=this.#r.get(e);if(Z===void 0){V&&(V.fetch="miss");let Q=this.#P(e,Z,H,C);return Q.__returned=Q}else{let Q=this.#e[Z];if(this.#t(Q)){let S=i&&Q.__staleWhileFetching!==void 0;return V&&(V.fetch="inflight",S&&(V.returnedStale=!0)),S?Q.__staleWhileFetching:Q.__returned=Q}let I=this.#p(Z);if(!N&&!I)return V&&(V.fetch="hit"),this.#x(Z),s&&this.#S(Z),V&&this.#C(V,Z),Q;let v=this.#P(e,Z,H,C),T=v.__staleWhileFetching!==void 0&&i;return V&&(V.fetch=I?"stale":"refresh",T&&I&&(V.returnedStale=!0)),T?v.__staleWhileFetching:v.__returned=v}})}forceFetch(r){return b(this,arguments,function*(e,t={}){let i=yield this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i})}memo(e,t={}){let r=this.#R;if(!r)throw new Error("no memoMethod provided to constructor");let u=t,{context:i,forceRefresh:s}=u,o=mn(u,["context","forceRefresh"]),a=this.get(e,o);if(!s&&a!==void 0)return a;let c=r(e,a,{options:o,context:i});return this.set(e,c,o),c}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#r.get(e);if(a!==void 0){let c=this.#e[a],u=this.#t(c);return o&&this.#C(o,a),this.#p(a)?(o&&(o.get="stale"),u?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),u?c.__staleWhileFetching:(this.#x(a),i&&this.#S(a),c))}else o&&(o.get="miss")}#j(e,t){this.#h[t]=e,this.#u[e]=t}#x(e){e!==this.#o&&(e===this.#c?this.#c=this.#u[e]:this.#j(this.#h[e],this.#u[e]),this.#j(this.#o,e),this.#o=e)}delete(e){return this.#D(e,"delete")}#D(e,t){let r=!1;if(this.#i!==0){let i=this.#r.get(e);if(i!==void 0)if(r=!0,this.#i===1)this.#U(t);else{this.#A(i);let s=this.#e[i];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(s,e,t),this.#d&&this.#a?.push([s,e,t])),this.#r.delete(e),this.#n[i]=void 0,this.#e[i]=void 0,i===this.#o)this.#o=this.#h[i];else if(i===this.#c)this.#c=this.#u[i];else{let o=this.#h[i];this.#u[o]=this.#u[i];let a=this.#u[i];this.#h[a]=this.#h[i]}this.#i--,this.#v.push(i)}}if(this.#d&&this.#a?.length){let i=this.#a,s;for(;s=i?.shift();)this.#m?.(...s)}return r}clear(){return this.#U("delete")}#U(e){for(let t of this.#b({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#n[t];this.#E&&this.#g?.(r,i,e),this.#d&&this.#a?.push([r,i,e])}}if(this.#r.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#f&&this.#_&&(this.#f.fill(0),this.#_.fill(0)),this.#w&&this.#w.fill(0),this.#c=0,this.#o=0,this.#v.length=0,this.#y=0,this.#i=0,this.#d&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#m?.(...r)}}};function qp(r){return b(this,arguments,function*({appId:n,privateKey:e,timeDifference:t}){try{let i=yield O0({id:n,privateKey:e,now:t&&Math.floor(Date.now()/1e3)+t});return{type:"app",token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(i){throw e==="-----BEGIN RSA PRIVATE KEY-----"?new Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):i}})}function eG(){return new zp({max:15e3,ttl:1e3*60*59})}function tG(n,e){return b(this,null,function*(){let t=sN(e),r=yield n.get(t);if(!r)return;let[i,s,o,a,c,u]=r.split("|"),d=e.permissions||c.split(/,/).reduce((h,p)=>(/!$/.test(p)?h[p.slice(0,-1)]="write":h[p]="read",h),{});return{token:i,createdAt:s,expiresAt:o,permissions:d,repositoryIds:e.repositoryIds,repositoryNames:e.repositoryNames,singleFileName:u,repositorySelection:a}})}function nG(n,e,t){return b(this,null,function*(){let r=sN(e),i=e.permissions?"":Object.keys(t.permissions).map(o=>`${o}${t.permissions[o]==="write"?"!":""}`).join(","),s=[t.token,t.createdAt,t.expiresAt,t.repositorySelection,i,t.singleFileName].join("|");yield n.set(r,s)})}function sN({installationId:n,permissions:e={},repositoryIds:t=[],repositoryNames:r=[]}){let i=Object.keys(e).sort().map(a=>e[a]==="read"?a:`${a}!`).join(","),s=t.sort().join(","),o=r.join(",");return[n,s,o,i].filter(Boolean).join("|")}function iN({installationId:n,token:e,createdAt:t,expiresAt:r,repositorySelection:i,permissions:s,repositoryIds:o,repositoryNames:a,singleFileName:c}){return Object.assign({type:"token",tokenType:"installation",token:e,installationId:n,permissions:s,createdAt:t,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,a?{repositoryNames:a}:null,c?{singleFileName:c}:null)}function oN(n,e,t){return b(this,null,function*(){let r=Number(e.installationId||n.installationId);if(!r)throw new Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(e.factory){let V=M(M({},n),e),{type:L,factory:H,oauthApp:Z}=V,Q=mn(V,["type","factory","oauthApp"]);return H(Q)}let i=Object.assign({installationId:r},e);if(!e.refresh){let L=yield tG(n.cache,i);if(L){let{token:H,createdAt:Z,expiresAt:Q,permissions:I,repositoryIds:v,repositoryNames:_,singleFileName:T,repositorySelection:S}=L;return iN({installationId:r,token:H,createdAt:Z,expiresAt:Q,permissions:I,repositorySelection:S,repositoryIds:v,repositoryNames:_,singleFileName:T})}}let s=yield qp(n),o=t||n.request,{data:{token:a,expires_at:c,repositories:u,permissions:d,repository_selection:h,single_file:p}}=yield o("POST /app/installations/{installation_id}/access_tokens",{installation_id:r,repository_ids:e.repositoryIds,repositories:e.repositoryNames,permissions:e.permissions,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${s.token}`}}),m=d||{},w=h||"all",D=u?u.map(L=>L.id):void 0,C=u?u.map(L=>L.name):void 0,N=new Date().toISOString();return yield nG(n.cache,i,{token:a,createdAt:N,expiresAt:c,repositorySelection:w,permissions:m,repositoryIds:D,repositoryNames:C,singleFileName:p}),iN({installationId:r,token:a,createdAt:N,expiresAt:c,repositorySelection:w,permissions:m,repositoryIds:D,repositoryNames:C,singleFileName:p})})}function rG(n,e){return b(this,null,function*(){switch(e.type){case"app":return qp(n);case"oauth-app":return n.oauthApp({type:"oauth-app"});case"installation":return oN(n,te(M({},e),{type:"installation"}));case"oauth-user":return n.oauthApp(e);default:throw new Error(`Invalid auth type: ${e.type}`)}})}var iG=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/app/installation-requests","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"];function sG(n){let t=`^(?:${n.map(r=>r.split("/").map(i=>i.startsWith("{")?"(?:.+?)":i).join("/")).map(r=>`(?:${r})`).join("|")})$`;return new RegExp(t,"i")}var oG=sG(iG);function aG(n){return!!n&&oG.test(n.split("?")[0])}var cG=5*1e3;function lG(n){return!(n.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||n.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}function uG(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r),s=i.url;if(/\/login\/oauth\/access_token$/.test(s))return e(i);if(aG(s.replace(e.endpoint.DEFAULTS.baseUrl,""))){let{token:c}=yield qp(n);i.headers.authorization=`bearer ${c}`;let u;try{u=yield e(i)}catch(d){if(lG(d)||typeof d.response.headers.date>"u")throw d;let h=Math.floor((Date.parse(d.response.headers.date)-Date.parse(new Date().toString()))/1e3);n.log.warn(d.message),n.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${h} seconds. Retrying request with the difference accounted for.`);let{token:p}=yield qp(te(M({},n),{timeDifference:h}));return i.headers.authorization=`bearer ${p}`,e(i)}return u}if(ku(s)){let c=yield n.oauthApp({type:"oauth-app"});return i.headers.authorization=c.headers.authorization,e(i)}let{token:o,createdAt:a}=yield oN(n,{},e.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,aN(n,e,i,a)})}function aN(n,e,t,r,i=0){return b(this,null,function*(){let s=+new Date-+new Date(r);try{return yield e(t)}catch(o){if(o.status!==401)throw o;if(s>=cG)throw i>0&&(o.message=`After ${i} retries within ${s/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let a=i*1e3;return n.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${a/1e3}s)`),yield new Promise(c=>setTimeout(c,a)),aN(n,e,t,r,i)}})}var dG="7.1.1";function L0(n){if(!n.appId)throw new Error("[@octokit/auth-app] appId option is required");if(!n.privateKey)throw new Error("[@octokit/auth-app] privateKey option is required");if("installationId"in n&&!n.installationId)throw new Error("[@octokit/auth-app] installationId is set to a falsy value");let e=Object.assign({warn:console.warn.bind(console)},n.log),t=n.request||Be.defaults({headers:{"user-agent":`octokit-auth-app.js/${dG} ${tn()}`}}),r=Object.assign({request:t,cache:eG()},n,n.installationId?{installationId:Number(n.installationId)}:{},{log:e,oauthApp:Hk({clientType:"github-app",clientId:n.clientId||"",clientSecret:n.clientSecret||"",request:t})});return Object.assign(rG.bind(null,r),{hook:uG.bind(null,r)})}var Vt=(()=>{let e=class e{constructor(r){this._http=r,this.applicationId="1012063",this.privateKey=`-----BEGIN PRIVATE KEY-----
  MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCnxYEcKaEsyRx7
  8VicDgz+XwMOECEVLtMWwmfn0bdilPKLVTJRZF12Hz0BAckilc3nW7tTAikDpXyw
  efTnmt9DQhI6mAlpfIx8l7yNoucj1xxOzclZy6noOke9CSjhu8UhcrRd6XoYGvQH
  vKjttln1tv0EgyIREnAbHNPhK8b1SpHE/MzaJs9yCNU4lidwmHEl/hw+lzrUp+O2
  7Gi38WLJEaycChXtq94b6z5866cqgi0pPz+FTQNHlRg2rei2XGfb7pHxzQPkouS1
  Cg+3NZ15cPv9jsAk15HRMr/1fV8xk4JZ+V403zlCAl6gKaogfeZbC+3OTPNKvw4o
  HVHlcSYPAgMBAAECggEAGjDcCgB5t9shhjvUIHCVGLTObkiYUY1AyOHKhMcZgNtN
  zfCb7VbkvEb+KAUWWD7YqRCJ+thwfLA9+fLgB7QGvKI45ErN1VjrOZwahGX0/YRc
  V/UKROlleep3PoyKhEri6GjWvX5wYAj9JaQPHyUDgDdz4ltyWwXs2F60uQczhSFB
  NIeF55lyN3/cqBUHNQalrlD64LXwZLzviS8dpTIH1Qsp+S7TJgGM9NgeQ8yYiyzz
  tduux+gu6IxgL1aOgBiBonRFZdfAySws1mUhYvPWr1fzn64kaYsiDqXwCdmKmzxx
  +RbXGWvKX/wctN6454E1UlTPWVVOx4SHZ4Yf03ulWQKBgQDb4ZQqHb0chwFvHTIW
  pIc5DMmepQ2+/syxXumjrNMpi3sltmnGNu/n7DebuiyZOaFlHrDKLcC4WO/ILPe6
  O1A/LjgliTsHiQYmaB/XRj5iy6pGYra0esxFuhWZeYTJ00yBwpWGpAh91TvpxGcR
  PweOToPvq+nZi6tgVbMRu5gUkwKBgQDDVJ1yPYSAhnBDGkXU8XQp1jrKkzxwO7Zo
  UDAJ69LbTmC6rw7s4ZRT6KmS/7p3g7HXz1HQaEN7u1fzie5I8AZvhE21y42w9+z2
  r41rW+Q/IM+3102L6Okm9o91aLCIozyWgoBWXuXM67/oj4HlXgTZOVeiGZAcwN7o
  2PUjkrpyFQKBgEts4RdlZiawBQTpnfH4dE5UnaDm+4UmAG9joH+93B2nNBImtbgB
  xl/nPtgTkBLrmvqGAZ0I/s/96hrfmgbvK8LQhwARSAd4sHxiQXHmLaZUOM+2MvhM
  G2BbyecAsVVOPzNP3Vz3TdZkXA3/il93II9nTYjcjvZKG/qKy0ds82kzAoGBAIAo
  KTFGKYSGMGvmdgDT9upoM6Sr29CrbO+eBRbNUkgvcYmqx/klvEMdeP0Iqlg14N5+
  mOhLMFOjRH52dhAG48IRJUds6Wc+E4x6/Cd/YA8HQSIWsjtksmytAsz+xiywJVV/
  BCMnGlFMMFqupYRPHpFDbTre2M30wYw2pQgVAh1NAoGBANDbSx25LnRwUlgsA1Go
  c6YXlZ+ggQfjYfCjMjj26I/nLzxCQe3Ghw/dSI0IVQ6kjFWkNVllEaA7ESxMKAtq
  W+9Tc4e7MN5sqQoTIos0um2l+7BJaft/14WB1GxQiK2grgff8BtiQQuUORBl/F4g
  D2tNDflWM97viVfizU9grXkW
  -----END PRIVATE KEY-----`,this.installationId="Iv23li7aCJeV1yPt8rcr",this.accessToken=null,this.fetchOptions={},this.httpHeaders=new Cn({Accept:"application/json"}),this.ghUser={authenticated:!1,name:"",login:"",avatar_url:"/assets/github-logo.png",email:""},this.token={access_token:"",scope:"",token_type:""},this.octokit=new x0({authStrategy:L0,auth:{appId:this.applicationId,privateKey:this.privateKey}})}getInstallationId(r){return b(this,null,function*(){this.installationId="";try{let i=yield this.octokit.request("GET /repos/{owner}/my/installation",{owner:r,repo:"my"});return i.status==200?(this.installationId=i.data.id,this.octokit=new x0({authStrategy:L0,auth:{appId:this.applicationId,privateKey:this.privateKey,installationId:this.installationId}}),this.installationId):null}catch(i){console.debug("Error fetching InstallationId :",i)}return null})}getJwtToken(r,i=""){return b(this,null,function*(){let s=null;if(r)try{yield this.getInstallationId(r)}catch(o){console.debug("Error fetching InstallationId :",o)}if(this.installationId)try{let o=yield this.octokit.auth({type:"app"});o.token&&(this.fetchOptions={headers:{Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${o.token}`,"X-GitHub-Api-Version":"2022-11-28"}},s=o.token)}catch(o){throw console.error("Error fetching JWT:",o),o}return s})}getAccessToken(r){return b(this,null,function*(){if(this.accessToken=null,this.installationId)try{let i=yield fetch(`https://api.github.com/app/installations/${this.installationId}/access_tokens`,te(M({},this.fetchOptions),{method:"POST"}));if(i.ok){let s=yield i.json();this.fetchOptions={headers:{"X-GitHub-Api-Version":"2022-11-28",Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${s.token}`}},this.accessToken=s.token}return this.accessToken}catch(i){throw console.error("Error fetching AccessToken:",i),i}return this.accessToken})}getInstalledContent(r,i="README.md"){return b(this,null,function*(){let s="Resource not Found";try{s=yield this.get(`repos/${r}/my/contents/${i}`)}catch(o){console.error("Error fetching repository:",o)}return s})}setToken(r){this.token=r}getSavedToken(){return this.ghUser.authenticated?this.token.access_token:""}getSavedUser(){return this.ghUser}isAuthenticated(){return this.ghUser.authenticated}setUserAuthenticated(r){this.ghUser.authenticated=r}setEmail(r){this.ghUser.email=r}getEmail(){return this.ghUser.email}setName(r){this.ghUser.name=r}setUserId(r){this.ghUser.login=r}getUserId(){return this.ghUser.login}setAvatar(r){return this.ghUser.avatar_url=r}creatHttpHeaders(r){return this.httpHeaders.append("Authorization","Bearer "+r)}getAuthUrl(){return`${he.gh_auth_url}?client_id=${he.client_id}`}getInstalledAccessToken(){return this.accessToken}hasInstalledAccessToken(){return this.accessToken!=null}getToken(r){return he.production?this._http.get(`${he.host}/ghproxy.php?code=${r}`):this._http.get(`${he.host}/token/ghproxy.php?code=${r}`)}getUser(r){return this._http.get(`${he.gh_api_url}/user`,{headers:this.creatHttpHeaders(r)})}getInternalArticleContent(r,i=""){return r=i?`${i}/${r}`:r,this.getMdFileContent(he.gh_default_user_repo,r)}getReadMeContent(r){let i=`${he.gh_dr_url}/${r}/${he.gh_dr_folder}/README.md`;return fetch(i,this.fetchOptions).then(s=>s.ok?s.text():Promise.reject("Resource not found"))}getMdFileContent(r,i){i=i.replace(/^\/?/,"")+(i.endsWith(".md")?"":".md");let s=Le.getGhUserFilePath(r,i,this.accessToken!=null);return fetch(s,this.fetchOptions).then(o=>o.ok?o.text():Promise.reject("Resource not found"))}getFileContent(r,i,s){return s=i?`${i}/${s}`:s,this.getMdFileContent(r,s)}getLocalFileContent(r){return fetch(r,this.fetchOptions).then(i=>i.ok?i:Promise.reject("Resource not found"))}getGhDirectoryContents(r,i=!0,s=""){let o=`${he.gh_api_url}/repos/${r}/my/git/trees/main`;i||(o=`${he.gh_api_url}/repos/${r}/my/contents/${s}?ref=main`),o+=i?"?recursive=1":"";let a={root:"/",files:[],folders:[]};return fetch(o,this.fetchOptions).then(c=>c.ok?c.json():Promise.reject("Directory not found")).then(c=>{let u;if(c.tree?u=c.tree:u=c,u&&u.forEach(d=>{if(d.type==="tree"||d.type==="dir"){let h=d.path.split("/")[0];a.folders.includes(h)||a.folders.push(h)}else(d.type==="file"||d.type==="blob"&&d.path!=".DS_Store")&&a.files.push(d.path)}),s){let d=Le.getFilesInFolder(a,s);a.root=s,a.files=d}return Promise.resolve(a)}).catch(c=>Promise.reject("Folder not found"))}getFirstCertificate(r="certificates"){return this.getGhDirectoryContents(he.gh_default_user_repo,!1,r).then(i=>{let s=i;return s.files&&s.files.length==0?Promise.reject(""):Promise.resolve(`${he.gh_dr_url}/${he.gh_default_user_repo}/${he.gh_dr_folder}/${s.files[0]}`)})}get(r){return fetch(`${he.gh_api_url}/${r}`,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("Resource not found"))}};e.\u0275fac=function(i){return new(i||e)(B(ii))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var cN=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-webfront-jumbotron"]],decls:39,vars:0,consts:[[1,"masthead"],[1,"container","px-4","px-lg-5","d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","justify-content-center"],[1,"text-center"],[1,"mx-auto","my-0","text-uppercase"],[1,"text-white-50","mx-auto","mt-2","mb-5"],["href","#about",1,"btn","btn-primary"],["id","about",1,"about-section","text-center"],[1,"container","px-lg-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"text-white","mb-4"],[1,"text-white-50"],[1,"row","py-4","justify-content-center"],["id","contactForm","data-sb-form-api-token","API_TOKEN",1,"form-signup"],[1,"row","input-group-newsletter","justify-content-center"],[1,"col-6"],["id","emailAddress","type","email","placeholder","Enter email address...","aria-label","Enter email address...","data-sb-validations","required,email",1,"form-control"],[1,"col-auto"],["id","submitButton","type","Submit","onclick","sendMessage()",1,"btn","btn-primary"],["data-sb-feedback","emailAddress:required",1,"invalid-feedback","mt-2"],["data-sb-feedback","emailAddress:email",1,"invalid-feedback","mt-2"],["id","submitSuccessMessage",1,"d-none"],[1,"text-center","mb-3","mt-2","text-white"],[1,"fw-bolder"],["href",""],["id","submitErrorMessage",1,"d-none"],[1,"text-center","text-danger","mb-3","mt-2"]],template:function(i,s){i&1&&(R(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),U(5,"Own your own Homepage"),P(),R(6,"h2",5),U(7,"Want to Own a Public Homepage ?"),P(),R(8,"a",6),U(9,"Get Started"),P()()()()(),R(10,"section",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2",11),U(15,"Your PublicHome.Page is Your secret sauce!"),P(),R(16,"div",12),U(17," Boost your business or portfolio's visibility to millions with a strong public presence. It's easy to get started ! Contact us today and elevate your brand. "),P()()(),R(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16),ce(22,"input",17),P(),R(23,"div",18)(24,"button",19),U(25,"Notify"),P()()(),R(26,"div",20),U(27,"An email is required."),P(),R(28,"div",21),U(29,"Email is not valid."),P(),R(30,"div",22)(31,"div",23)(32,"div",24),U(33,"Thank you for your interest!"),P(),ce(34,"br")(35,"a",25),P()(),R(36,"div",26)(37,"div",27),U(38,"Error sending message!"),P()()()()()())},dependencies:[pR,cR,V_]});let n=e;return n})();var lN=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.homePageFile=re.readme_home;let o=s.snapshot.url[0];o&&o.path=="questions"&&(this.homePageFile=re.fab_questions_list2)}};e.\u0275fac=function(i){return new(i||e)($(Vt),$(jn),$(Sn))},e.\u0275cmp=Ae({type:e,selectors:[["app-webfront-main"]],decls:5,vars:1,consts:[[1,"container"],["id","questions",1,"row","justify-content-center"],[1,""],[1,"container",3,"src"]],template:function(i,s){i&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),U(4,`
            `),P()()()()),i&2&&(j(3),J("src",s.homePageFile))},dependencies:[Kn]});let n=e;return n})();var uN=(()=>{let e=class e extends Yn{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.metaService=o,this.messaging.event$.subscribe(a=>{switch(a.cmd){case"UserContext":re.homeUser=re.ghUser;break;case"UserDirectory":this.messaging.send({cmd:"PageFile",file:"HomeGHUser"});break;default:break}})}ngOnInit(){this.metaService.addTag({name:"keywords",content:"My Brand, Your brand, Your landing page, Resume Builder, Resume"}),this.metaService.addTag({name:"description",content:"Own your Own page ! Create your brand, Reach millions"})}ngOnDestroy(){}};e.\u0275fac=function(i){return new(i||e)($(Xt),$(Vt),$(Tn),$(TM))},e.\u0275cmp=Ae({type:e,selectors:[["home"]],features:[ut],decls:2,vars:0,template:function(i,s){i&1&&ce(0,"app-webfront-jumbotron")(1,"app-webfront-main")},dependencies:[cN,lN]});let n=e;return n})();var pG=n=>({"text-center":n});function gG(n,e){if(n&1&&(R(0,"h2"),U(1),P()),n&2){let t=ue(2);j(),Ve(t.contacts_title)}}function mG(n,e){if(n&1&&(R(0,"a",15),ce(1,"i"),U(2),P()),n&2){let t=ue().$implicit,r=ue(2);Pn("href",r.availableLinks.get(t.key),ht),j(),Pf("fa-brands fa-",t.key,""),_a("color",r.iconsByKey.get(t.key)),j(),ft(" ",r.availableTexts.get(t.key),"")}}function yG(n,e){if(n&1&&(R(0,"a",15),U(1),P()),n&2){let t=ue().$implicit,r=ue(2);J("href",r.availableLinks.get(t.key),ht),j(),Ve(r.availableLinks.get(t.key))}}function vG(n,e){if(n&1&&(R(0,"div"),ve(1,mG,3,7,"a",14)(2,yG,2,2,"ng-template",null,0,Aa),P()),n&2){let t=e.$implicit,r=Ca(3);j(),J("ngIf",t.key!="link")("ngIfElse",r)}}function wG(n,e){if(n&1&&(R(0,"div",9)(1,"div",10),ce(2,"img",11),R(3,"h5"),U(4),P(),R(5,"p"),U(6),P(),ve(7,gG,2,1,"h2",12)(8,vG,4,2,"div",13),kt(9,"keyvalue"),kt(10,"slice"),P()()),n&2){let t=ue();j(2),Pn("src",t.userData.avatar_url,ht),j(2),Ve(t.userData.name||t.userData.login),j(2),Ve(t.userData.bio),j(),J("ngIf",t.contacts_title),j(),J("ngForOf",Sa(10,7,On(9,5,t.availableLinks),0,7))}}function _G(n,e){if(n&1&&(R(0,"a",16),ce(1,"img",17),P()),n&2){let t=e.$implicit;j(),Pn("src",t,ht)}}var j0=(()=>{let e=class e extends Yn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.badgesAvailable=[],this.contactPageContent="Loading..",this.contactsContent="",this.availableLinks=new Map,this.availableTexts=new Map,this.iconsByKey=re.iconsColorByKey,this.useUsersContent=!1,this.firstList=!0,this.firstHtml=!0,this.contacts_title="",this.userData={},this.certificateLink="",this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.titleService.setTitle(re.ghUser.name),this.userData=re.ghUser,this.githubService.getMdFileContent(re.ghUserLoaded,this.routerFileUrl).then(u=>this.contactPageContent=u);break;case"UserDirectory":let c=Le.getFilesInFolder(re.userContext.directory,"certificates/badges");for(let u of c){let d=Le.getGhUserFilePath(re.ghUserLoaded,u,this.githubService.hasInstalledAccessToken());this.badgesAvailable.push(d),this.badgesAvailable.length==1&&(this.certificateLink=this.badgesAvailable[0])}break;default:break}})}ngOnInit(){re.contactLinksByKey.clear(),this.markdownService.renderer.html=r=>(this.useUsersContent=this.firstHtml?Le.getFirstLine(r)=="<!-- My Contacts -->":this.useUsersContent,this.firstHtml=!1,r),this.markdownService.renderer.list=(r,i,s)=>this.firstList||!this.useUsersContent?(this.firstList=!1,""):it.prototype.list.call(this.markdownService.renderer,r,i,s)}onMarkdownReady(){this.firstHtml,this.iconsByKey=re.iconsColorByKey,this.availableLinks=re.contactLinksByKey,this.availableTexts=re.contactTextsByKey,this.messaging.send({cmd:"PageFile",file:"Contacts"})}};e.\u0275fac=function(i){return new(i||e)($(Xt),$(Vt),$(Tn))},e.\u0275cmp=Ae({type:e,selectors:[["app-contact"]],features:[ut],decls:9,vars:6,consts:[["nonbrandLink",""],[1,"container"],[1,"row","justify-content-center",3,"ngClass"],[1,"col-lg-8"],[1,"container",3,"ready","data"],["class","row justify-content-center",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-center"],["href","/certificates",4,"ngFor","ngForOf"],[1,"row","justify-content-center"],[1,"col-lg-6"],["alt","Passport Pic",1,"col-4","rounded-circle",3,"src"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","btn btn-outline-secondary my-2","style","width:100%","target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",1,"btn","btn-outline-secondary","my-2",2,"width","100%",3,"href"],["href","/certificates"],["alt","Thumbnail Image",3,"src"]],template:function(i,s){i&1&&(R(0,"div",1)(1,"div",2)(2,"div",3)(3,"markdown",4),Me("ready",function(){return s.onMarkdownReady()}),U(4,`
            `),P()(),ve(5,wG,11,11,"div",5),R(6,"div",6)(7,"div",7),ve(8,_G,2,1,"a",8),P()()()()),i&2&&(j(),J("ngClass",Vf(4,pG,!s.useUsersContent)),j(2),J("data",s.contactPageContent),j(2),J("ngIf",!s.useUsersContent),j(3),J("ngForOf",s.badgesAvailable))},dependencies:[Ra,Zt,Jt,Kn,ka,Ki]});let n=e;return n})();function EG(n,e){if(n&1&&(R(0,"a",9),ce(1,"i"),P()),n&2){let t=ue().$implicit,r=ue();J("href",r.availableLinks.get(t.key),ht),j(),Pf("fa-brands fa-",t.key,""),_a("color",r.iconsByKey.get(t.key))}}function IG(n,e){if(n&1&&(R(0,"a",9),ce(1,"i",10),P()),n&2){let t=ue().$implicit,r=ue();J("href",r.availableLinks.get(t.key),ht)}}function bG(n,e){if(n&1&&(R(0,"li"),ve(1,EG,2,6,"a",8)(2,IG,2,1,"ng-template",null,0,Aa),P()),n&2){let t=e.$implicit,r=Ca(3),i=ue();j(),J("ngIf",i.hasBrandLink(t.key))("ngIfElse",r)}}var dN=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.messaging=i,this.route=s,this.footerNote="Copyright",this.contactsFileUrl=re.user_contacts,this.availableLinks=new Map,this.iconsByKey=re.iconsColorByKey,this.oldRender={}}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"UserDirectory":this.footerNote="Powered By",this.loadContacts(re.userContext.username);break;case"PageFile":switch(i.file){case"HomeGHUser":this.footerNote="Copyright";break;case"Contacts":this.availableLinks=re.contactLinksByKey;break;default:break}break;default:break}}),this.loadContacts(he.gh_default_user_repo)}availableKeys(){return this.availableLinks.keys()}loadContacts(r){this.githubService.getMdFileContent(r,"contacts.md").then(i=>{re.contactLinksByKey.clear(),this.parseMarkdownWithCustomRenderer(i)}).catch(i=>{console.log("Contacts not available")}).finally(()=>{this.availableLinks=re.contactLinksByKey})}parseMarkdownWithCustomRenderer(r){let i=new it;return i.link=(s,o,a)=>{try{if(s){let u=new URL(s).hostname.replace("www.","");u=u.substring(0,u.lastIndexOf(".")),u=Le.closestHost(u),re.contactLinksByKey.set(u,s),re.iconsColorByKey.has(u)?re.contactTextsByKey.set(u,this.getHostText(u)):re.contactTextsByKey.set(u,a!=s?Le.unescape(a):this.getHostText(u))}}catch{}return it.prototype.link.call(i,s,o,a)},xe(r,{renderer:i})}hasBrandLink(r){return r!="link"&&re.iconsColorByKey.get(r)}ngAfterViewInit(){}getHostText(r){switch(r){case"youtube":return"YouTube";case"github":return"Github";case"linkedin":return"Linkedin";default:break}return r}};e.\u0275fac=function(i){return new(i||e)($(Vt),$(en),$(Sn))},e.\u0275cmp=Ae({type:e,selectors:[["app-footer"]],decls:12,vars:8,consts:[["nonbrandLink",""],["id","contact",1,"text-center"],[1,"container"],[1,"socials-media","text-center"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"credits"],["href","/"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"fa-solid","fa-link"]],template:function(i,s){i&1&&(R(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4),ve(4,bG,4,2,"li",5),kt(5,"keyvalue"),kt(6,"slice"),P()(),R(7,"div",6),U(8),R(9,"a",7),U(10,"www.publichome.page"),P(),U(11," All rights reserved. "),P()()()),i&2&&(j(4),J("ngForOf",Sa(6,4,On(5,2,s.availableLinks),0,7)),j(4),ft(" ",s.footerNote," \xA9 "))},dependencies:[Zt,Jt,ka,Ki],styles:['#contact[_ngcontent-%COMP%]{background:#f7f7f7;padding-top:25px;padding-bottom:25px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]{width:100%}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;float:none;margin:0}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-right:10px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:24px;color:#999;letter-spacing:.1em;font-weight:500;background:transparent;text-transform:uppercase;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8a07e;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.1em;font-weight:500;margin-top:0;text-transform:uppercase}.credits[_ngcontent-%COMP%]{font-size:13px}pre.code[_ngcontent-%COMP%]{white-space:pre-wrap}pre.code[_ngcontent-%COMP%]:before{counter-reset:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";width:8em;padding-left:auto;margin-left:auto;text-align:right}']});let n=e;return n})();var hN=(()=>{let e=class e{constructor(){this.WIT_URL="https://api.wit.ai/message?v=20211010&q=",this.WIT_TOKEN="GLM547LWVQYPHR6QWS5ADO3YYTB6ZRI3"}getIntent(r){return b(this,null,function*(){return fetch(`https://api.wit.ai/message?v=20211010&q=${encodeURIComponent(r.substring(0,250))}`,{headers:{Authorization:`Bearer ${this.WIT_TOKEN}`}}).then(i=>i.ok?i.json():Promise.reject(i.statusText))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var $t=[];for(Hp=0;Hp<256;++Hp)$t.push((Hp+256).toString(16).slice(1));var Hp;function fN(n,e=0){return($t[n[e+0]]+$t[n[e+1]]+$t[n[e+2]]+$t[n[e+3]]+"-"+$t[n[e+4]]+$t[n[e+5]]+"-"+$t[n[e+6]]+$t[n[e+7]]+"-"+$t[n[e+8]]+$t[n[e+9]]+"-"+$t[n[e+10]]+$t[n[e+11]]+$t[n[e+12]]+$t[n[e+13]]+$t[n[e+14]]+$t[n[e+15]]).toLowerCase()}var Gp,CG=new Uint8Array(16);function U0(){if(!Gp&&(Gp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Gp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gp(CG)}var TG=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),B0={randomUUID:TG};function SG(n,e,t){if(B0.randomUUID&&!e&&!n)return B0.randomUUID();n=n||{};var r=n.random||(n.rng||U0)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return fN(r)}var $0=SG;var pN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},gN={};var is,z0;(function(){var n;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(T,S,x){for(var E=Array(arguments.length-2),jr=2;jr<arguments.length;jr++)E[jr-2]=arguments[jr];return v.prototype[S].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(S=0;16>S;++S)T[S]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],S=I.g[2];var x=I.g[3],E=v+(x^_&(S^x))+T[0]+3614090360&4294967295;v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[1]+3905402710&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[2]+606105819&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[3]+3250441966&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[4]+4118548399&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[5]+1200080426&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[6]+2821735955&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[7]+4249261313&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[8]+1770035416&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[9]+2336552879&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[10]+4294925233&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[11]+2304563134&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[12]+1804603682&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[13]+4254626195&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[14]+2792965006&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[15]+1236535329&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(S^x&(_^S))+T[1]+4129170786&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[6]+3225465664&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[11]+643717713&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[0]+3921069994&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[5]+3593408605&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[10]+38016083&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[15]+3634488961&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[4]+3889429448&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[9]+568446438&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[14]+3275163606&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[3]+4107603335&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[8]+1163531501&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[13]+2850285829&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[2]+4243563512&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[7]+1735328473&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[12]+2368359562&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(_^S^x)+T[5]+4294588738&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[8]+2272392833&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[11]+1839030562&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[14]+4259657740&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[1]+2763975236&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[4]+1272893353&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[7]+4139469664&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[10]+3200236656&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[13]+681279174&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[0]+3936430074&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[3]+3572445317&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[6]+76029189&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[9]+3654602809&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[12]+3873151461&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[15]+530742520&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[2]+3299628645&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(S^(_|~x))+T[0]+4096336452&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[7]+1126891415&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[14]+2878612391&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[5]+4237533241&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[12]+1700485571&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[3]+2399980690&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[10]+4293915773&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[1]+2240044497&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[8]+1873313359&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[15]+4264355552&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[6]+2734768916&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[13]+1309151649&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[4]+4149444226&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[11]+3174756917&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[2]+718787259&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+x&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,T=this.B,S=this.h,x=0;x<v;){if(S==0)for(;x<=_;)i(this,I,x),x+=this.blockSize;if(typeof I=="string"){for(;x<v;)if(T[S++]=I.charCodeAt(x++),S==this.blockSize){i(this,T),S=0;break}}else for(;x<v;)if(T[S++]=I[x++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var T=0;32>T;T+=8)I[_++]=this.g[v]>>>T&255;return I};function s(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function o(I,v){this.h=v;for(var _=[],T=!0,S=I.length-1;0<=S;S--){var x=I[S]|0;T&&x==v||(_[S]=x,T=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return h;if(0>I)return C(u(-I));for(var v=[],_=1,T=0;I>=_;T++)v[T]=I/_|0,_*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return C(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(v,8)),T=h,S=0;S<I.length;S+=8){var x=Math.min(8,I.length-S),E=parseInt(I.substring(S,S+x),v);8>x?(x=u(Math.pow(v,x)),T=T.j(x).add(u(E))):(T=T.j(_),T=T.add(u(E)))}return T}var h=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-C(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var T=this.i(_);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(D(this))return"-"+C(this).toString(I);for(var v=u(Math.pow(I,6)),_=this,T="";;){var S=H(_,v).g;_=N(_,S.j(v));var x=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=S,w(_))return x+T;for(;6>x.length;)x="0"+x;T=x+T}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=N(this,I),D(I)?-1:w(I)?0:1};function C(I){for(var v=I.g.length,_=[],T=0;T<v;T++)_[T]=~I.g[T];return new o(_,~I.h).add(p)}n.abs=function(){return D(this)?C(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0,S=0;S<=v;S++){var x=T+(this.i(S)&65535)+(I.i(S)&65535),E=(x>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=E>>>16,x&=65535,E&=65535,_[S]=E<<16|x}return new o(_,_[_.length-1]&-2147483648?-1:0)};function N(I,v){return I.add(C(v))}n.j=function(I){if(w(this)||w(I))return h;if(D(this))return D(I)?C(this).j(C(I)):C(C(this).j(I));if(D(I))return C(this.j(C(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],T=0;T<2*v;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var x=this.i(T)>>>16,E=this.i(T)&65535,jr=I.i(S)>>>16,qc=I.i(S)&65535;_[2*T+2*S]+=E*qc,V(_,2*T+2*S),_[2*T+2*S+1]+=x*qc,V(_,2*T+2*S+1),_[2*T+2*S+1]+=E*jr,V(_,2*T+2*S+1),_[2*T+2*S+2]+=x*jr,V(_,2*T+2*S+2)}for(T=0;T<v;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=v;T<2*v;T++)_[T]=0;return new o(_,0)};function V(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function L(I,v){this.g=I,this.h=v}function H(I,v){if(w(v))throw Error("division by zero");if(w(I))return new L(h,h);if(D(I))return v=H(C(I),v),new L(C(v.g),C(v.h));if(D(v))return v=H(I,C(v)),new L(C(v.g),v.h);if(30<I.g.length){if(D(I)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var _=p,T=v;0>=T.l(I);)_=Z(_),T=Z(T);var S=Q(_,1),x=Q(T,1);for(T=Q(T,2),_=Q(_,2);!w(T);){var E=x.add(T);0>=E.l(I)&&(S=S.add(_),x=E),T=Q(T,1),_=Q(_,1)}return v=N(I,S.j(v)),new L(S,v)}for(S=h;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),x=u(_),E=x.j(v);D(E)||0<E.l(I);)_-=T,x=u(_),E=x.j(v);w(x)&&(x=p),S=S.add(x),I=N(I,E)}return new L(S,I)}n.A=function(I){return H(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)&I.i(T);return new o(_,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)|I.i(T);return new o(_,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)^I.i(T);return new o(_,this.h^I.h)};function Z(I){for(var v=I.g.length+1,_=[],T=0;T<v;T++)_[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(_,I.h)}function Q(I,v){var _=v>>5;v%=32;for(var T=I.g.length-_,S=[],x=0;x<T;x++)S[x]=0<v?I.i(x+_)>>>v|I.i(x+_+1)<<32-v:I.i(x+_);return new o(S,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,z0=gN.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,is=gN.Integer=o}).apply(typeof pN<"u"?pN:typeof self<"u"?self:typeof window<"u"?window:{});var Wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hi={};var q0,AG,nc,H0,Nu,Kp,G0,W0,K0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wp=="object"&&Wp];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(l,f){if(f)e:{var g=r;l=l.split(".");for(var y=0;y<l.length-1;y++){var A=l[y];if(!(A in g))break e;g=g[A]}l=l[l.length-1],y=g[l],f=f(y),f!=y&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function s(l,f){l instanceof String&&(l+="");var g=0,y=!1,A={next:function(){if(!y&&g<l.length){var O=g++;return{value:f(O,l[O]),done:!1}}return y=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(l){return l||function(){return s(this,function(f,g){return g})}});var o=o||{},a=this||self;function c(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function u(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function d(l,f,g){return l.call.apply(l.bind,arguments)}function h(l,f,g){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,y),l.apply(f,A)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function w(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(y,A,O){for(var Y=Array(arguments.length-2),He=2;He<arguments.length;He++)Y[He-2]=arguments[He];return f.prototype[A].apply(y,Y)}}function D(l){let f=l.length;if(0<f){let g=Array(f);for(let y=0;y<f;y++)g[y]=l[y];return g}return[]}function C(l,f){for(let g=1;g<arguments.length;g++){let y=arguments[g];if(c(y)){let A=l.length||0,O=y.length||0;l.length=A+O;for(let Y=0;Y<O;Y++)l[A+Y]=y[Y]}else l.push(y)}}class N{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function V(l){return/^[\s\xa0]*$/.test(l)}function L(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function H(l){return H[" "](l),l}H[" "]=function(){};var Z=L().indexOf("Gecko")!=-1&&!(L().toLowerCase().indexOf("webkit")!=-1&&L().indexOf("Edge")==-1)&&!(L().indexOf("Trident")!=-1||L().indexOf("MSIE")!=-1)&&L().indexOf("Edge")==-1;function Q(l,f,g){for(let y in l)f.call(g,l[y],y,l)}function I(l,f){for(let g in l)f.call(void 0,l[g],g,l)}function v(l){let f={};for(let g in l)f[g]=l[g];return f}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(l,f){let g,y;for(let A=1;A<arguments.length;A++){y=arguments[A];for(g in y)l[g]=y[g];for(let O=0;O<_.length;O++)g=_[O],Object.prototype.hasOwnProperty.call(y,g)&&(l[g]=y[g])}}function S(l){var f=1;l=l.split(":");let g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function x(l){a.setTimeout(()=>{throw l},0)}function E(){var l=Tm;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class jr{constructor(){this.h=this.g=null}add(f,g){let y=qc.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}}var qc=new N(()=>new vF,l=>l.reset());class vF{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Hc,Gc=!1,Tm=new jr,pD=()=>{let l=a.Promise.resolve(void 0);Hc=()=>{l.then(wF)}};var wF=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(g){x(g)}var f=qc;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}Gc=!1};function Ii(){this.s=this.s,this.C=this.C}Ii.prototype.s=!1,Ii.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ii.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ht(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}Ht.prototype.h=function(){this.defaultPrevented=!0};var _F=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function Wc(l,f){if(Ht.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(Z){e:{try{H(f.nodeName);var A=!0;break e}catch{}A=!1}A||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:EF[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Wc.aa.h.call(this)}}w(Wc,Ht);var EF={2:"touch",3:"pen",4:"mouse"};Wc.prototype.h=function(){Wc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Kc="closure_listenable_"+(1e6*Math.random()|0),IF=0;function bF(l,f,g,y,A){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=A,this.key=++IF,this.da=this.fa=!1}function bd(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Dd(l){this.src=l,this.g={},this.h=0}Dd.prototype.add=function(l,f,g,y,A){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var Y=Am(l,f,y,A);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new bF(f,this.src,O,!!y,A),f.fa=g,l.push(f)),f};function Sm(l,f){var g=f.type;if(g in l.g){var y=l.g[g],A=Array.prototype.indexOf.call(y,f,void 0),O;(O=0<=A)&&Array.prototype.splice.call(y,A,1),O&&(bd(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Am(l,f,g,y){for(var A=0;A<l.length;++A){var O=l[A];if(!O.da&&O.listener==f&&O.capture==!!g&&O.ha==y)return A}return-1}var xm="closure_lm_"+(1e6*Math.random()|0),Mm={};function gD(l,f,g,y,A){if(y&&y.once)return yD(l,f,g,y,A);if(Array.isArray(f)){for(var O=0;O<f.length;O++)gD(l,f[O],g,y,A);return null}return g=Pm(g),l&&l[Kc]?l.K(f,g,u(y)?!!y.capture:!!y,A):mD(l,f,g,!1,y,A)}function mD(l,f,g,y,A,O){if(!f)throw Error("Invalid event type");var Y=u(A)?!!A.capture:!!A,He=km(l);if(He||(l[xm]=He=new Dd(l)),g=He.add(f,g,y,Y,O),g.proxy)return g;if(y=DF(),g.proxy=y,y.src=l,y.listener=g,l.addEventListener)_F||(A=Y),A===void 0&&(A=!1),l.addEventListener(f.toString(),y,A);else if(l.attachEvent)l.attachEvent(wD(f.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function DF(){function l(g){return f.call(l.src,l.listener,g)}let f=CF;return l}function yD(l,f,g,y,A){if(Array.isArray(f)){for(var O=0;O<f.length;O++)yD(l,f[O],g,y,A);return null}return g=Pm(g),l&&l[Kc]?l.L(f,g,u(y)?!!y.capture:!!y,A):mD(l,f,g,!0,y,A)}function vD(l,f,g,y,A){if(Array.isArray(f))for(var O=0;O<f.length;O++)vD(l,f[O],g,y,A);else y=u(y)?!!y.capture:!!y,g=Pm(g),l&&l[Kc]?(l=l.i,f=String(f).toString(),f in l.g&&(O=l.g[f],g=Am(O,g,y,A),-1<g&&(bd(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete l.g[f],l.h--)))):l&&(l=km(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Am(f,g,y,A)),(g=-1<l?f[l]:null)&&Rm(g))}function Rm(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Kc])Sm(f.i,l);else{var g=l.type,y=l.proxy;f.removeEventListener?f.removeEventListener(g,y,l.capture):f.detachEvent?f.detachEvent(wD(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=km(f))?(Sm(g,l),g.h==0&&(g.src=null,f[xm]=null)):bd(l)}}}function wD(l){return l in Mm?Mm[l]:Mm[l]="on"+l}function CF(l,f){if(l.da)l=!0;else{f=new Wc(f,this);var g=l.listener,y=l.ha||l.src;l.fa&&Rm(l),l=g.call(y,f)}return l}function km(l){return l=l[xm],l instanceof Dd?l:null}var Nm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pm(l){return typeof l=="function"?l:(l[Nm]||(l[Nm]=function(f){return l.handleEvent(f)}),l[Nm])}function Gt(){Ii.call(this),this.i=new Dd(this),this.M=this,this.F=null}w(Gt,Ii),Gt.prototype[Kc]=!0,Gt.prototype.removeEventListener=function(l,f,g,y){vD(this,l,f,g,y)};function sn(l,f){var g,y=l.F;if(y)for(g=[];y;y=y.F)g.push(y);if(l=l.M,y=f.type||f,typeof f=="string")f=new Ht(f,l);else if(f instanceof Ht)f.target=f.target||l;else{var A=f;f=new Ht(y,l),T(f,A)}if(A=!0,g)for(var O=g.length-1;0<=O;O--){var Y=f.g=g[O];A=Cd(Y,y,!0,f)&&A}if(Y=f.g=l,A=Cd(Y,y,!0,f)&&A,A=Cd(Y,y,!1,f)&&A,g)for(O=0;O<g.length;O++)Y=f.g=g[O],A=Cd(Y,y,!1,f)&&A}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],y=0;y<g.length;y++)bd(g[y]);delete l.g[f],l.h--}}this.F=null},Gt.prototype.K=function(l,f,g,y){return this.i.add(String(l),f,!1,g,y)},Gt.prototype.L=function(l,f,g,y){return this.i.add(String(l),f,!0,g,y)};function Cd(l,f,g,y){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var A=!0,O=0;O<f.length;++O){var Y=f[O];if(Y&&!Y.da&&Y.capture==g){var He=Y.listener,Lt=Y.ha||Y.src;Y.fa&&Sm(l.i,Y),A=He.call(Lt,y)!==!1&&A}}return A&&!y.defaultPrevented}function _D(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function ED(l){l.g=_D(()=>{l.g=null,l.i&&(l.i=!1,ED(l))},l.l);let f=l.h;l.h=null,l.m.apply(null,f)}class TF extends Ii{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ED(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qc(l){Ii.call(this),this.h=l,this.g={}}w(Qc,Ii);var ID=[];function bD(l){Q(l.g,function(f,g){this.g.hasOwnProperty(g)&&Rm(f)},l),l.g={}}Qc.prototype.N=function(){Qc.aa.N.call(this),bD(this)},Qc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Om=a.JSON.stringify,SF=a.JSON.parse,AF=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Fm(){}Fm.prototype.h=null;function DD(l){return l.h||(l.h=l.i())}function CD(){}var Yc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vm(){Ht.call(this,"d")}w(Vm,Ht);function Lm(){Ht.call(this,"c")}w(Lm,Ht);var Cs={},TD=null;function Td(){return TD=TD||new Gt}Cs.La="serverreachability";function SD(l){Ht.call(this,Cs.La,l)}w(SD,Ht);function Zc(l){let f=Td();sn(f,new SD(f))}Cs.STAT_EVENT="statevent";function AD(l,f){Ht.call(this,Cs.STAT_EVENT,l),this.stat=f}w(AD,Ht);function on(l){let f=Td();sn(f,new AD(f,l))}Cs.Ma="timingevent";function xD(l,f){Ht.call(this,Cs.Ma,l),this.size=f}w(xD,Ht);function Jc(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function Xc(){this.g=!0}Xc.prototype.xa=function(){this.g=!1};function xF(l,f,g,y,A,O){l.info(function(){if(l.g)if(O)for(var Y="",He=O.split("&"),Lt=0;Lt<He.length;Lt++){var Oe=He[Lt].split("=");if(1<Oe.length){var Wt=Oe[0];Oe=Oe[1];var Kt=Wt.split("_");Y=2<=Kt.length&&Kt[1]=="type"?Y+(Wt+"="+Oe+"&"):Y+(Wt+"=redacted&")}}else Y=null;else Y=O;return"XMLHTTP REQ ("+y+") [attempt "+A+"]: "+f+`
`+g+`
`+Y})}function MF(l,f,g,y,A,O,Y){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+A+"]: "+f+`
`+g+`
`+O+" "+Y})}function No(l,f,g,y){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+kF(l,g)+(y?" "+y:"")})}function RF(l,f){l.info(function(){return"TIMEOUT: "+f})}Xc.prototype.info=function(){};function kF(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var y=g[l];if(!(2>y.length)){var A=y[1];if(Array.isArray(A)&&!(1>A.length)){var O=A[0];if(O!="noop"&&O!="stop"&&O!="close")for(var Y=1;Y<A.length;Y++)A[Y]=""}}}}return Om(g)}catch{return f}}var Sd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},MD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jm;function Ad(){}w(Ad,Fm),Ad.prototype.g=function(){return new XMLHttpRequest},Ad.prototype.i=function(){return{}},jm=new Ad;function bi(l,f,g,y){this.j=l,this.i=f,this.l=g,this.R=y||1,this.U=new Qc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new RD}function RD(){this.i=null,this.g="",this.h=!1}var kD={},Um={};function Bm(l,f,g){l.L=1,l.v=kd(Ur(f)),l.m=g,l.P=!0,ND(l,null)}function ND(l,f){l.F=Date.now(),xd(l),l.A=Ur(l.v);var g=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),WD(g.i,"t",y),l.C=0,g=l.j.J,l.h=new RD,l.g=dC(l.j,g?f:null,!l.m),0<l.O&&(l.M=new TF(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,y=l.ca;var A="readystatechange";Array.isArray(A)||(A&&(ID[0]=A.toString()),A=ID);for(var O=0;O<A.length;O++){var Y=gD(g,A[O],y||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?v(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Zc(),xF(l.i,l.u,l.A,l.l,l.R,l.m)}bi.prototype.ca=function(l){l=l.target;let f=this.M;f&&Br(l)==3?f.j():this.Y(l)},bi.prototype.Y=function(l){try{if(l==this.g)e:{let Kt=Br(this.g);var f=this.g.Ba();let Fo=this.g.Z();if(!(3>Kt)&&(Kt!=3||this.g&&(this.h.h||this.g.oa()||eC(this.g)))){this.J||Kt!=4||f==7||(f==8||0>=Fo?Zc(3):Zc(2)),$m(this);var g=this.g.Z();this.X=g;t:if(PD(this)){var y=eC(this.g);l="";var A=y.length,O=Br(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ts(this),el(this);var Y="";break t}this.h.i=new a.TextDecoder}for(f=0;f<A;f++)this.h.h=!0,l+=this.h.i.decode(y[f],{stream:!(O&&f==A-1)});y.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,MF(this.i,this.u,this.A,this.l,this.R,Kt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Lt=this.g;if((He=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(He)){var Oe=He;break t}}Oe=null}if(g=Oe)No(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zm(this,g);else{this.o=!1,this.s=3,on(12),Ts(this),el(this);break e}}if(this.P){g=!0;let er;for(;!this.J&&this.C<Y.length;)if(er=NF(this,Y),er==Um){Kt==4&&(this.s=4,on(14),g=!1),No(this.i,this.l,null,"[Incomplete Response]");break}else if(er==kD){this.s=4,on(15),No(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else No(this.i,this.l,er,null),zm(this,er);if(PD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Kt!=4||Y.length!=0||this.h.h||(this.s=1,on(16),g=!1),this.o=this.o&&g,!g)No(this.i,this.l,Y,"[Invalid Chunked Response]"),Ts(this),el(this);else if(0<Y.length&&!this.W){this.W=!0;var Wt=this.j;Wt.g==this&&Wt.ba&&!Wt.M&&(Wt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Qm(Wt),Wt.M=!0,on(11))}}else No(this.i,this.l,Y,null),zm(this,Y);Kt==4&&Ts(this),this.o&&!this.J&&(Kt==4?aC(this.j,this):(this.o=!1,xd(this)))}else YF(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,on(12)):(this.s=0,on(13)),Ts(this),el(this)}}}catch{}finally{}};function PD(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function NF(l,f){var g=l.C,y=f.indexOf(`
`,g);return y==-1?Um:(g=Number(f.substring(g,y)),isNaN(g)?kD:(y+=1,y+g>f.length?Um:(f=f.slice(y,y+g),l.C=y+g,f)))}bi.prototype.cancel=function(){this.J=!0,Ts(this)};function xd(l){l.S=Date.now()+l.I,OD(l,l.I)}function OD(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Jc(p(l.ba,l),f)}function $m(l){l.B&&(a.clearTimeout(l.B),l.B=null)}bi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(RF(this.i,this.A),this.L!=2&&(Zc(),on(17)),Ts(this),this.s=2,el(this)):OD(this,this.S-l)};function el(l){l.j.G==0||l.J||aC(l.j,l)}function Ts(l){$m(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,bD(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function zm(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||qm(g.h,l))){if(!l.K&&qm(g.h,l)&&g.G==3){try{var y=g.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var A=y;if(A[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Vd(g),Od(g);else break e;Km(g),on(18)}}else g.za=A[1],0<g.za-g.T&&37500>A[2]&&g.F&&g.v==0&&!g.C&&(g.C=Jc(p(g.Za,g),6e3));if(1>=LD(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else As(g,11)}else if((l.K||g.g==l)&&Vd(g),!V(f))for(A=g.Da.g.parse(f),f=0;f<A.length;f++){let Oe=A[f];if(g.T=Oe[0],Oe=Oe[1],g.G==2)if(Oe[0]=="c"){g.K=Oe[1],g.ia=Oe[2];let Wt=Oe[3];Wt!=null&&(g.la=Wt,g.j.info("VER="+g.la));let Kt=Oe[4];Kt!=null&&(g.Aa=Kt,g.j.info("SVER="+g.Aa));let Fo=Oe[5];Fo!=null&&typeof Fo=="number"&&0<Fo&&(y=1.5*Fo,g.L=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;let er=l.g;if(er){let jd=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jd){var O=y.h;O.g||jd.indexOf("spdy")==-1&&jd.indexOf("quic")==-1&&jd.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Hm(O,O.h),O.h=null))}if(y.D){let Ym=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;Ym&&(y.ya=Ym,Je(y.I,y.D,Ym))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),y=g;var Y=l;if(y.qa=uC(y,y.J?y.ia:null,y.W),Y.K){jD(y.h,Y);var He=Y,Lt=y.L;Lt&&(He.I=Lt),He.B&&($m(He),xd(He)),y.g=Y}else sC(y);0<g.i.length&&Fd(g)}else Oe[0]!="stop"&&Oe[0]!="close"||As(g,7);else g.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?As(g,7):Wm(g):Oe[0]!="noop"&&g.l&&g.l.ta(Oe),g.v=0)}}Zc(4)}catch{}}var PF=class{constructor(l,f){this.g=l,this.map=f}};function FD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function VD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function LD(l){return l.h?1:l.g?l.g.size:0}function qm(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Hm(l,f){l.g?l.g.add(f):l.h=f}function jD(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}FD.prototype.cancel=function(){if(this.i=UD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function UD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(let g of l.g.values())f=f.concat(g.D);return f}return D(l.i)}function OF(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var f=[],g=l.length,y=0;y<g;y++)f.push(l[y]);return f}f=[],g=0;for(y in l)f[g++]=l[y];return f}function FF(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(let y in l)f[g++]=y;return f}}}function BD(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=FF(l),y=OF(l),A=y.length,O=0;O<A;O++)f.call(void 0,y[O],g&&g[O],l)}var $D=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VF(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var y=l[g].indexOf("="),A=null;if(0<=y){var O=l[g].substring(0,y);A=l[g].substring(y+1)}else O=l[g];f(O,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Ss(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ss){this.h=l.h,Md(this,l.j),this.o=l.o,this.g=l.g,Rd(this,l.s),this.l=l.l;var f=l.i,g=new rl;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),zD(this,g),this.m=l.m}else l&&(f=String(l).match($D))?(this.h=!1,Md(this,f[1]||"",!0),this.o=tl(f[2]||""),this.g=tl(f[3]||"",!0),Rd(this,f[4]),this.l=tl(f[5]||"",!0),zD(this,f[6]||"",!0),this.m=tl(f[7]||"")):(this.h=!1,this.i=new rl(null,this.h))}Ss.prototype.toString=function(){var l=[],f=this.j;f&&l.push(nl(f,qD,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(nl(f,qD,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(nl(g,g.charAt(0)=="/"?UF:jF,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",nl(g,$F)),l.join("")};function Ur(l){return new Ss(l)}function Md(l,f,g){l.j=g?tl(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Rd(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function zD(l,f,g){f instanceof rl?(l.i=f,zF(l.i,l.h)):(g||(f=nl(f,BF)),l.i=new rl(f,l.h))}function Je(l,f,g){l.i.set(f,g)}function kd(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function tl(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function nl(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,LF),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function LF(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var qD=/[#\/\?@]/g,jF=/[#\?:]/g,UF=/[#\?]/g,BF=/[#\?@]/g,$F=/#/g;function rl(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function Di(l){l.g||(l.g=new Map,l.h=0,l.i&&VF(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=rl.prototype,n.add=function(l,f){Di(this),this.i=null,l=Po(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function HD(l,f){Di(l),f=Po(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function GD(l,f){return Di(l),f=Po(l,f),l.g.has(f)}n.forEach=function(l,f){Di(this),this.g.forEach(function(g,y){g.forEach(function(A){l.call(f,A,y,this)},this)},this)},n.na=function(){Di(this);let l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let y=0;y<f.length;y++){let A=l[y];for(let O=0;O<A.length;O++)g.push(f[y])}return g},n.V=function(l){Di(this);let f=[];if(typeof l=="string")GD(this,l)&&(f=f.concat(this.g.get(Po(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},n.set=function(l,f){return Di(this),this.i=null,l=Po(this,l),GD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},n.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function WD(l,f,g){HD(l,f),0<g.length&&(l.i=null,l.g.set(Po(l,f),D(g)),l.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var y=f[g];let O=encodeURIComponent(String(y)),Y=this.V(y);for(y=0;y<Y.length;y++){var A=O;Y[y]!==""&&(A+="="+encodeURIComponent(String(Y[y]))),l.push(A)}}return this.i=l.join("&")};function Po(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function zF(l,f){f&&!l.j&&(Di(l),l.i=null,l.g.forEach(function(g,y){var A=y.toLowerCase();y!=A&&(HD(this,y),WD(this,A,g))},l)),l.j=f}function qF(l,f){let g=new Xc;if(a.Image){let y=new Image;y.onload=m(Ci,g,"TestLoadImage: loaded",!0,f,y),y.onerror=m(Ci,g,"TestLoadImage: error",!1,f,y),y.onabort=m(Ci,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=m(Ci,g,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else f(!1)}function HF(l,f){let g=new Xc,y=new AbortController,A=setTimeout(()=>{y.abort(),Ci(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:y.signal}).then(O=>{clearTimeout(A),O.ok?Ci(g,"TestPingServer: ok",!0,f):Ci(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(A),Ci(g,"TestPingServer: error",!1,f)})}function Ci(l,f,g,y,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),y(g)}catch{}}function GF(){this.g=new AF}function WF(l,f,g){let y=g||"";try{BD(l,function(A,O){let Y=A;u(A)&&(Y=Om(A)),f.push(y+O+"="+encodeURIComponent(Y))})}catch(A){throw f.push(y+"type="+encodeURIComponent("_badmap")),A}}function il(l){this.l=l.Ub||null,this.j=l.eb||!1}w(il,Fm),il.prototype.g=function(){return new Nd(this.l,this.j)},il.prototype.i=function(l){return function(){return l}}({});function Nd(l,f){Gt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Nd,Gt),n=Nd.prototype,n.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,ol(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ol(this)),this.g&&(this.readyState=3,ol(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;KD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function KD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?sl(this):ol(this),this.readyState==3&&KD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,sl(this))},n.Qa=function(l){this.g&&(this.response=l,sl(this))},n.ga=function(){this.g&&sl(this)};function sl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ol(l)}n.setRequestHeader=function(l,f){this.u.append(l,f)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function ol(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Nd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function QD(l){let f="";return Q(l,function(g,y){f+=y,f+=":",f+=g,f+=`\r
`}),f}function Gm(l,f,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=QD(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Je(l,f,g))}function at(l){Gt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(at,Gt);var KF=/^https?$/i,QF=["POST","PUT"];n=at.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jm.g(),this.v=this.o?DD(this.o):DD(jm),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(O){YD(this,O);return}if(l=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var A in y)g.set(A,y[A]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let O of y.keys())g.set(O,y.get(O));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),A=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(QF,f,void 0))||y||A||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,Y]of g)this.g.setRequestHeader(O,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{XD(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){YD(this,O)}};function YD(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,ZD(l),Pd(l)}function ZD(l){l.A||(l.A=!0,sn(l,"complete"),sn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,sn(this,"complete"),sn(this,"abort"),Pd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pd(this,!0)),at.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?JD(this):this.bb())},n.bb=function(){JD(this)};function JD(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Br(l)!=4||l.Z()!=2)){if(l.u&&Br(l)==4)_D(l.Ea,0,l);else if(sn(l,"readystatechange"),Br(l)==4){l.h=!1;try{let Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var y;if(y=Y===0){var A=String(l.D).match($D)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),y=!KF.test(A?A.toLowerCase():"")}g=y}if(g)sn(l,"complete"),sn(l,"success");else{l.m=6;try{var O=2<Br(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",ZD(l)}}finally{Pd(l)}}}}function Pd(l,f){if(l.g){XD(l);let g=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||sn(l,"ready");try{g.onreadystatechange=y}catch{}}}function XD(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function Br(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<Br(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),SF(f)}};function eC(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function YF(l){let f={};l=(l.g&&2<=Br(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(V(l[y]))continue;var g=S(l[y]);let A=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let O=f[A]||[];f[A]=O,O.push(g)}I(f,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function al(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function tC(l){this.Aa=0,this.i=[],this.j=new Xc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=al("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=al("baseRetryDelayMs",5e3,l),this.cb=al("retryDelaySeedMs",1e4,l),this.Wa=al("forwardChannelMaxRetries",2,l),this.wa=al("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new FD(l&&l.concurrentRequestLimit),this.Da=new GF,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=tC.prototype,n.la=8,n.G=1,n.connect=function(l,f,g,y){on(0),this.W=l,this.H=f||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.I=uC(this,null,this.W),Fd(this)};function Wm(l){if(nC(l),l.G==3){var f=l.U++,g=Ur(l.I);if(Je(g,"SID",l.K),Je(g,"RID",f),Je(g,"TYPE","terminate"),cl(l,g),f=new bi(l,l.j,f),f.L=2,f.v=kd(Ur(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=dC(f.j,null),f.g.ea(f.v)),f.F=Date.now(),xd(f)}lC(l)}function Od(l){l.g&&(Qm(l),l.g.cancel(),l.g=null)}function nC(l){Od(l),l.u&&(a.clearTimeout(l.u),l.u=null),Vd(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Fd(l){if(!VD(l.h)&&!l.s){l.s=!0;var f=l.Ga;Hc||pD(),Gc||(Hc(),Gc=!0),Tm.add(f,l),l.B=0}}function ZF(l,f){return LD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Jc(p(l.Ga,l,f),cC(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let A=new bi(this,this.j,l),O=this.o;if(this.S&&(O?(O=v(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(A.H=O,O=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=iC(this,A,f),g=Ur(this.I),Je(g,"RID",l),Je(g,"CVER",22),this.D&&Je(g,"X-HTTP-Session-Id",this.D),cl(this,g),O&&(this.O?f="headers="+encodeURIComponent(String(QD(O)))+"&"+f:this.m&&Gm(g,this.m,O)),Hm(this.h,A),this.Ua&&Je(g,"TYPE","init"),this.P?(Je(g,"$req",f),Je(g,"SID","null"),A.T=!0,Bm(A,g,null)):Bm(A,g,f),this.G=2}}else this.G==3&&(l?rC(this,l):this.i.length==0||VD(this.h)||rC(this))};function rC(l,f){var g;f?g=f.l:g=l.U++;let y=Ur(l.I);Je(y,"SID",l.K),Je(y,"RID",g),Je(y,"AID",l.T),cl(l,y),l.m&&l.o&&Gm(y,l.m,l.o),g=new bi(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=iC(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Hm(l.h,g),Bm(g,y,f)}function cl(l,f){l.H&&Q(l.H,function(g,y){Je(f,y,g)}),l.l&&BD({},function(g,y){Je(f,y,g)})}function iC(l,f,g){g=Math.min(l.i.length,g);var y=l.l?p(l.l.Na,l.l,l):null;e:{var A=l.i;let O=-1;for(;;){let Y=["count="+g];O==-1?0<g?(O=A[0].g,Y.push("ofs="+O)):O=0:Y.push("ofs="+O);let He=!0;for(let Lt=0;Lt<g;Lt++){let Oe=A[Lt].g,Wt=A[Lt].map;if(Oe-=O,0>Oe)O=Math.max(0,A[Lt].g-100),He=!1;else try{WF(Wt,Y,"req"+Oe+"_")}catch{y&&y(Wt)}}if(He){y=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,y}function sC(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Hc||pD(),Gc||(Hc(),Gc=!0),Tm.add(f,l),l.v=0}}function Km(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Jc(p(l.Fa,l),cC(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,oC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Jc(p(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,on(10),Od(this),oC(this))};function Qm(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function oC(l){l.g=new bi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Ur(l.qa);Je(f,"RID","rpc"),Je(f,"SID",l.K),Je(f,"AID",l.T),Je(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(f,"TO",l.ja),Je(f,"TYPE","xmlhttp"),cl(l,f),l.m&&l.o&&Gm(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=kd(Ur(f)),g.m=null,g.P=!0,ND(g,l)}n.Za=function(){this.C!=null&&(this.C=null,Od(this),Km(this),on(19))};function Vd(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function aC(l,f){var g=null;if(l.g==f){Vd(l),Qm(l),l.g=null;var y=2}else if(qm(l.h,f))g=f.D,jD(l.h,f),y=1;else return;if(l.G!=0){if(f.o)if(y==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var A=l.B;y=Td(),sn(y,new xD(y,g)),Fd(l)}else sC(l);else if(A=f.s,A==3||A==0&&0<f.X||!(y==1&&ZF(l,f)||y==2&&Km(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),A){case 1:As(l,5);break;case 4:As(l,10);break;case 3:As(l,6);break;default:As(l,2)}}}function cC(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function As(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),y=l.Xa;let A=!y;y=new Ss(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Md(y,"https"),kd(y),A?qF(y.toString(),g):HF(y.toString(),g)}else on(2);l.G=0,l.l&&l.l.sa(f),lC(l),nC(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function lC(l){if(l.G=0,l.ka=[],l.l){let f=UD(l.h);(f.length!=0||l.i.length!=0)&&(C(l.ka,f),C(l.ka,l.i),l.h.i.length=0,D(l.i),l.i.length=0),l.l.ra()}}function uC(l,f,g){var y=g instanceof Ss?Ur(g):new Ss(g);if(y.g!="")f&&(y.g=f+"."+y.g),Rd(y,y.s);else{var A=a.location;y=A.protocol,f=f?f+"."+A.hostname:A.hostname,A=+A.port;var O=new Ss(null);y&&Md(O,y),f&&(O.g=f),A&&Rd(O,A),g&&(O.l=g),y=O}return g=l.D,f=l.ya,g&&f&&Je(y,g,f),Je(y,"VER",l.la),cl(l,y),y}function dC(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new at(new il({eb:g})):new at(l.pa),f.Ha(l.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hC(){}n=hC.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ld(){}Ld.prototype.g=function(l,f){return new Mn(l,f)};function Mn(l,f){Gt.call(this),this.g=new tC(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!V(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!V(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Oo(this)}w(Mn,Gt),Mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){Wm(this.g)},Mn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Om(l),l=g);f.i.push(new PF(f.Ya++,l)),f.G==3&&Fd(f)},Mn.prototype.N=function(){this.g.l=null,delete this.j,Wm(this.g),delete this.g,Mn.aa.N.call(this)};function fC(l){Vm.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(let g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}w(fC,Vm);function pC(){Lm.call(this),this.status=1}w(pC,Lm);function Oo(l){this.g=l}w(Oo,hC),Oo.prototype.ua=function(){sn(this.g,"a")},Oo.prototype.ta=function(l){sn(this.g,new fC(l))},Oo.prototype.sa=function(l){sn(this.g,new pC)},Oo.prototype.ra=function(){sn(this.g,"b")},Ld.prototype.createWebChannel=Ld.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,K0=hi.createWebChannelTransport=function(){return new Ld},W0=hi.getStatEventTarget=function(){return Td()},G0=hi.Event=Cs,Kp=hi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sd.NO_ERROR=0,Sd.TIMEOUT=8,Sd.HTTP_ERROR=6,Nu=hi.ErrorCode=Sd,MD.COMPLETE="complete",H0=hi.EventType=MD,CD.EventType=Yc,Yc.OPEN="a",Yc.CLOSE="b",Yc.ERROR="c",Yc.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,nc=hi.WebChannel=CD,AG=hi.FetchXmlHttpFactory=il,at.prototype.listenOnce=at.prototype.L,at.prototype.getLastError=at.prototype.Ka,at.prototype.getLastErrorCode=at.prototype.Ba,at.prototype.getStatus=at.prototype.Z,at.prototype.getResponseJson=at.prototype.Oa,at.prototype.getResponseText=at.prototype.oa,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Ha,q0=hi.XhrIo=at}).apply(typeof Wp<"u"?Wp:typeof self<"u"?self:typeof window<"u"?window:{});var mN="@firebase/firestore";var Ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");var Nc="10.14.0";var ds=new $d("@firebase/firestore");function ac(){return ds.logLevel}function w1(n){ds.setLogLevel(n)}function q(n,...e){if(ds.logLevel<=yr.DEBUG){let t=e.map(XI);ds.debug(`Firestore (${Nc}): ${n}`,...t)}}function pt(n,...e){if(ds.logLevel<=yr.ERROR){let t=e.map(XI);ds.error(`Firestore (${Nc}): ${n}`,...t)}}function dr(n,...e){if(ds.logLevel<=yr.WARN){let t=e.map(XI);ds.warn(`Firestore (${Nc}): ${n}`,...t)}}function XI(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ie(n="Unexpected state"){let e=`FIRESTORE (${Nc}) INTERNAL ASSERTION FAILED: `+n;throw pt(e),new Error(e)}function se(n,e){n||ie()}function _1(n,e){n||ie()}function X(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends _C{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Pt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ig=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},eE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ct.UNAUTHENTICATED))}shutdown(){}},tE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},nE=class{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){se(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Pt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Pt,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Pt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(se(typeof r.accessToken=="string"),new ig(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return se(e===null||typeof e=="string"),new Ct(e)}},rE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},iE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new rE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},sE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},oE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){se(this.o===void 0);let r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(se(typeof t.token=="string"),this.R=t.token,new sE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function RG(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var sg=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=RG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function pe(n,e){return n<e?-1:n>e?1:0}function mc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function E1(n){return n+"\0"}var st=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new st(0,0))}static max(){return new n(new st(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var og=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ie(),r===void 0?r=e.length-t:r>e.length-t&&ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ke=class n extends og{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},kG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=class n extends og{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return kG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(ke.fromString(e))}static fromName(e){return new n(ke.fromString(e).popFirst(5))}static empty(){return new n(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ke(e.slice()))}};var yc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function aE(n){return n.fields.find(e=>e.kind===2)}function oo(n){return n.fields.filter(e=>e.kind!==2)}yc.UNKNOWN_ID=-1;var fc=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var Hu=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Jn.min())}};function I1(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new st(t+1,0):new st(t,r));return new Jn(i,ee.empty(),e)}function b1(n){return new Jn(n.readTime,n.key,-1)}var Jn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(le.min(),ee.empty(),-1)}static max(){return new n(le.max(),ee.empty(),-1)}};function eb(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:pe(n.largestBatchId,e.largestBatchId))}var D1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ag=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Es(n){return b(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==D1)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var cg=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Pt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new fo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=tb(r.target.error);this.V.reject(new fo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new fo(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new lE(t)}},hs=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(ll())===12.2&&pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return q("SimpleDb","Removing database:",e),ao(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Bd())return!1;if(n.v())return!0;let e=ll(),t=n.S(e),r=0<t&&t<10,i=C1(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return b(this,null,function*(){return this.db||(q("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new fo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new z(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new z(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new fo(e,o))},i.onupgradeneeded=s=>{q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return b(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=cg.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),k.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(q("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function C1(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var cE=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return ao(this.B.delete())}},fo=class extends z{constructor(e,t){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Is(n){return n.name==="IndexedDbTransactionError"}var lE=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(q("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ao(r)}add(e){return q("SimpleDb","ADD",this.store.name,e,e),ao(this.store.add(e))}get(e){return ao(this.store.get(e)).next(t=>(t===void 0&&(t=null),q("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return q("SimpleDb","DELETE",this.store.name,e),ao(this.store.delete(e))}count(){return q("SimpleDb","COUNT",this.store.name),ao(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new k((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new k((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){q("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new k((r,i)=>{t.onerror=s=>{let o=tb(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new k((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new cE(a),u=t(a.primaryKey,a.value,c);if(u instanceof k){let d=u.catch(h=>(c.done(),k.reject(h)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>k.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function ao(n){return new k((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=tb(r.target.error);t(i)}})}var yN=!1;function tb(n){let e=hs.S(ll());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yN||(yN=!0,setTimeout(()=>{throw r},0)),r}}return n}var uE=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>b(this,null,function*(){this.task=null;try{q("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Is(t)?q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Es(t)}yield this.X(6e4)}))}},dE=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return b(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return k.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return q("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(q("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=b1(s);eb(o,r)>0&&(r=o)}),new Jn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Un=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function hd(n){return n==null}function Gu(n){return n===0&&1/n==-1/0}function T1(n){return typeof n=="number"&&Number.isInteger(n)&&!Gu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function fn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=vN(e)),e=NG(n.get(t),e);return vN(e)}function NG(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function vN(n){return n+""}function xr(n){let e=n.length;if(se(e>=2),e===2)return se(n.charAt(0)===""&&n.charAt(1)===""),ke.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&ie(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:ie()}s=o+2}return new ke(r)}var wN=["userId","batchId"];function Xp(n,e){return[n,fn(e)]}function S1(n,e,t){return[n,fn(e),t]}var PG={},OG=["prefixPath","collectionGroup","readTime","documentId"],FG=["prefixPath","collectionGroup","documentId"],VG=["collectionGroup","readTime","prefixPath","documentId"],LG=["canonicalId","targetId"],jG=["targetId","path"],UG=["path","targetId"],BG=["collectionId","parent"],$G=["indexId","uid"],zG=["uid","sequenceNumber"],qG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],HG=["indexId","uid","orderedDocumentKey"],GG=["userId","collectionPath","documentId"],WG=["userId","collectionPath","largestBatchId"],KG=["userId","collectionGroup","largestBatchId"],A1=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QG=[...A1,"documentOverlays"],x1=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],M1=x1,nb=[...M1,"indexConfiguration","indexState","indexEntries"],YG=nb,ZG=[...nb,"globals"];var Wu=class extends ag{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function Ot(n,e){let t=X(n);return hs.F(t._e,e)}function _N(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Co(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function R1(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var tt=class n{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hc(this.root,e,this.comparator,!0)}},hc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ie();let e=this.left.check();if(e!==this.right.check())throw ie();return e+(this.isRed()?0:1)}};Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw ie()}get value(){throw ie()}get color(){throw ie()}get left(){throw ie()}get right(){throw ie()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Rr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qe=class n{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lg(this.data.getIterator())}getIteratorFrom(e){return new lg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},lg=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function rc(n){return n.hasNext()?n.getNext():void 0}var Bn=class n{constructor(e){this.fields=e,e.sort(gt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Qe(gt.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var ug=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function k1(){return typeof atob<"u"}var yt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ug("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var JG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(n){if(se(!!n),typeof n=="string"){let e=0,t=JG.exec(n);if(se(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(n.seconds),nanos:nt(n.nanos)}}function nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function fs(n){return typeof n=="string"?yt.fromBase64String(n):yt.fromUint8Array(n)}function tm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function rb(n){let e=n.mapValue.fields.__previous_value__;return tm(e)?rb(e):e}function Ku(n){let e=gi(n.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}var hE=class{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},ps=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var ls={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},eg={nullValue:"NULL_VALUE"};function po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tm(n)?4:N1(n)?9007199254740991:nm(n)?10:11:ie()}function Pr(n,e){if(n===e)return!0;let t=po(n);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ku(n).isEqual(Ku(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=gi(i.timestampValue),a=gi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return fs(i.bytesValue).isEqual(fs(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=nt(i.doubleValue),a=nt(s.doubleValue);return o===a?Gu(o)===Gu(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return mc(n.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(_N(o)!==_N(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Pr(o[c],a[c])))return!1;return!0}(n,e);default:return ie()}}function Qu(n,e){return(n.values||[]).find(t=>Pr(t,e))!==void 0}function gs(n,e){if(n===e)return 0;let t=po(n),r=po(e);if(t!==r)return pe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return pe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=nt(s.integerValue||s.doubleValue),c=nt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return EN(n.timestampValue,e.timestampValue);case 4:return EN(Ku(n),Ku(e));case 5:return pe(n.stringValue,e.stringValue);case 6:return function(s,o){let a=fs(s),c=fs(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=pe(a[u],c[u]);if(d!==0)return d}return pe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=pe(nt(s.latitude),nt(o.latitude));return a!==0?a:pe(nt(s.longitude),nt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return IN(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,u,d;let h=s.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,w=(c=p.value)===null||c===void 0?void 0:c.arrayValue,D=pe(((u=m?.values)===null||u===void 0?void 0:u.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:IN(m,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ls.mapValue&&o===ls.mapValue)return 0;if(s===ls.mapValue)return 1;if(o===ls.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let p=pe(c[h],d[h]);if(p!==0)return p;let m=gs(a[c[h]],u[d[h]]);if(m!==0)return m}return pe(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ie()}}function EN(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return pe(n,e);let t=gi(n),r=gi(e),i=pe(t.seconds,r.seconds);return i!==0?i:pe(t.nanos,r.nanos)}function IN(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=gs(t[i],r[i]);if(s)return s}return pe(t.length,r.length)}function vc(n){return fE(n)}function fE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return fs(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=fE(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${fE(t.fields[o])}`;return i+"}"}(n.mapValue):ie()}function go(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function pE(n){return!!n&&"integerValue"in n}function Yu(n){return!!n&&"arrayValue"in n}function bN(n){return!!n&&"nullValue"in n}function DN(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function tg(n){return!!n&&"mapValue"in n}function nm(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Uu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Co(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function N1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var P1={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function XG(n){return"nullValue"in n?eg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?go(ps.empty(),ee.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?nm(n)?P1:{mapValue:{}}:ie()}function e5(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?go(ps.empty(),ee.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?P1:"mapValue"in n?nm(n)?{mapValue:{}}:ls:ie()}function CN(n,e){let t=gs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function TN(n,e){let t=gs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var rn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!tg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=gt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Uu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());tg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];tg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Co(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Uu(this.value))}};function O1(n){let e=[];return Co(n.fields,(t,r)=>{let i=new gt([t]);if(tg(r)){let s=O1(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Bn(e)}var Tt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,le.min(),le.min(),le.min(),rn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,le.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,le.min(),le.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,le.min(),le.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Or=class{constructor(e,t){this.position=e,this.inclusive=t}};function SN(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),t.key):r=gs(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function AN(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pr(n.position[t],e.position[t]))return!1;return!0}var mo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function t5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var dg=class{},Te=class n extends dg{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new yE(e,t,r):t==="array-contains"?new _E(e,r):t==="in"?new hg(e,r):t==="not-in"?new EE(e,r):t==="array-contains-any"?new IE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new vE(e,r):new wE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(gs(t,this.value)):t!==null&&po(this.value)===po(t)&&this.matchesComparison(gs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},$e=class n extends dg{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return wc(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wc(n){return n.op==="and"}function gE(n){return n.op==="or"}function ib(n){return F1(n)&&wc(n)}function F1(n){for(let e of n.filters)if(e instanceof $e)return!1;return!0}function mE(n){if(n instanceof Te)return n.field.canonicalString()+n.op.toString()+vc(n.value);if(ib(n))return n.filters.map(e=>mE(e)).join(",");{let e=n.filters.map(t=>mE(t)).join(",");return`${n.op}(${e})`}}function V1(n,e){return n instanceof Te?function(r,i){return i instanceof Te&&r.op===i.op&&r.field.isEqual(i.field)&&Pr(r.value,i.value)}(n,e):n instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&V1(o,i.filters[a]),!0):!1}(n,e):void ie()}function L1(n,e){let t=n.filters.concat(e);return $e.create(t,n.op)}function j1(n){return n instanceof Te?function(t){return`${t.field.canonicalString()} ${t.op} ${vc(t.value)}`}(n):n instanceof $e?function(t){return t.op.toString()+" {"+t.getFilters().map(j1).join(" ,")+"}"}(n):"Filter"}var yE=class extends Te{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},vE=class extends Te{constructor(e,t){super(e,"in",t),this.keys=U1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},wE=class extends Te{constructor(e,t){super(e,"not-in",t),this.keys=U1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function U1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var _E=class extends Te{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Yu(t)&&Qu(t.arrayValue,this.value)}},hg=class extends Te{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Qu(this.value.arrayValue,t)}},EE=class extends Te{constructor(e,t){super(e,"not-in",t)}matches(e){if(Qu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Qu(this.value.arrayValue,t)}},IE=class extends Te{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Yu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Qu(this.value.arrayValue,r))}};var bE=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function DE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new bE(n,e,t,r,i,s,o)}function yo(n){let e=X(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>mE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vc(r)).join(",")),e.ue=t}return e.ue}function fd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!t5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!V1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!AN(n.startAt,e.startAt)&&AN(n.endAt,e.endAt)}function fg(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function pg(n,e){return n.filters.filter(t=>t instanceof Te&&t.field.isEqual(e))}function xN(n,e,t){let r=eg,i=!0;for(let s of pg(n,e)){let o=eg,a=!0;switch(s.op){case"<":case"<=":o=XG(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=eg}CN({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];CN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function MN(n,e,t){let r=ls,i=!0;for(let s of pg(n,e)){let o=ls,a=!0;switch(s.op){case">=":case">":o=e5(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ls}TN({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];TN({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var hr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function B1(n,e,t,r,i,s,o,a){return new hr(n,e,t,r,i,s,o,a)}function Pc(n){return new hr(n)}function RN(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function sb(n){return n.collectionGroup!==null}function pc(n){let e=X(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qe(gt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new mo(s,r))}),t.has(gt.keyField().canonicalString())||e.ce.push(new mo(gt.keyField(),r))}return e.ce}function pn(n){let e=X(n);return e.le||(e.le=n5(e,pc(n))),e.le}function n5(n,e){if(n.limitType==="F")return DE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new mo(i.field,s)});let t=n.endAt?new Or(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Or(n.startAt.position,n.startAt.inclusive):null;return DE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function CE(n,e){let t=n.filters.concat([e]);return new hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function gg(n,e,t){return new hr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pd(n,e){return fd(pn(n),pn(e))&&n.limitType===e.limitType}function $1(n){return`${yo(pn(n))}|lt:${n.limitType}`}function cc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>j1(i)).join(", ")}]`),hd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>vc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>vc(i)).join(",")),`Target(${r})`}(pn(n))}; limitType=${n.limitType})`}function gd(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of pc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=SN(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,pc(r),i)||r.endAt&&!function(o,a,c){let u=SN(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,pc(r),i))}(n,e)}function z1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function q1(n){return(e,t)=>{let r=!1;for(let i of pc(n)){let s=r5(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function r5(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?gs(c,u):ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ie()}}var Fr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return R1(this.inner)}size(){return this.innerSize}};var i5=new tt(ee.comparator);function An(){return i5}var H1=new tt(ee.comparator);function Lu(...n){let e=H1;for(let t of n)e=e.insert(t.key,t);return e}function G1(n){let e=H1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Mr(){return Bu()}function W1(){return Bu()}function Bu(){return new Fr(n=>n.toString(),(n,e)=>n.isEqual(e))}var s5=new tt(ee.comparator),o5=new Qe(ee.comparator);function me(...n){let e=o5;for(let t of n)e=e.add(t);return e}var a5=new Qe(pe);function ob(){return a5}function ab(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gu(e)?"-0":e}}function K1(n){return{integerValue:""+n}}function Q1(n,e){return T1(e)?K1(e):ab(n,e)}var _c=class{constructor(){this._=void 0}};function c5(n,e,t){return n instanceof ms?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tm(s)&&(s=rb(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof mi?Z1(n,e):n instanceof yi?J1(n,e):function(i,s){let o=Y1(i,s),a=kN(o)+kN(i.Pe);return pE(o)&&pE(i.Pe)?K1(a):ab(i.serializer,a)}(n,e)}function l5(n,e,t){return n instanceof mi?Z1(n,e):n instanceof yi?J1(n,e):t}function Y1(n,e){return n instanceof ys?function(r){return pE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var ms=class extends _c{},mi=class extends _c{constructor(e){super(),this.elements=e}};function Z1(n,e){let t=X1(e);for(let r of n.elements)t.some(i=>Pr(i,r))||t.push(r);return{arrayValue:{values:t}}}var yi=class extends _c{constructor(e){super(),this.elements=e}};function J1(n,e){let t=X1(e);for(let r of n.elements)t=t.filter(i=>!Pr(i,r));return{arrayValue:{values:t}}}var ys=class extends _c{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function kN(n){return nt(n.integerValue||n.doubleValue)}function X1(n){return Yu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var vo=class{constructor(e,t){this.field=e,this.transform=t}};function u5(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mi&&i instanceof mi||r instanceof yi&&i instanceof yi?mc(r.elements,i.elements,Pr):r instanceof ys&&i instanceof ys?Pr(r.Pe,i.Pe):r instanceof ms&&i instanceof ms}(n.transform,e.transform)}var TE=class{constructor(e,t){this.version=e,this.transformResults=t}},dt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ng(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ec=class{};function eP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ws(n.key,dt.none()):new vs(n.key,n.data,dt.none());{let t=n.data,r=rn.empty(),i=new Qe(gt.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new fr(n.key,r,new Bn(i.toArray()),dt.none())}}function d5(n,e,t){n instanceof vs?function(i,s,o){let a=i.value.clone(),c=PN(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof fr?function(i,s,o){if(!ng(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=PN(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(tP(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function $u(n,e,t,r){return n instanceof vs?function(s,o,a,c){if(!ng(s.precondition,o))return a;let u=s.value.clone(),d=ON(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof fr?function(s,o,a,c){if(!ng(s.precondition,o))return a;let u=ON(s.fieldTransforms,c,o),d=o.data;return d.setAll(tP(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return ng(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function h5(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Y1(r.transform,i||null);s!=null&&(t===null&&(t=rn.empty()),t.set(r.field,s))}return t||null}function NN(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mc(r,i,(s,o)=>u5(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var vs=class extends Ec{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},fr=class extends Ec{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function tP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function PN(n,e,t){let r=new Map;se(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,l5(o,a,t[i]))}return r}function ON(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,c5(s,o,e))}return r}var ws=class extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Zu=class extends Ec{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Ju=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&d5(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=$u(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=$u(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=W1();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=eP(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),me())}isEqual(e){return this.batchId===e.batchId&&mc(this.mutations,e.mutations,(t,r)=>NN(t,r))&&mc(this.baseMutations,e.baseMutations,(t,r)=>NN(t,r))}},SE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){se(e.mutations.length===r.length);let i=function(){return s5}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Xu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var AE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var bt,Re;function nP(n){switch(n){default:return ie();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function rP(n){if(n===void 0)return pt("GRPC error has no .code"),F.UNKNOWN;switch(n){case bt.OK:return F.OK;case bt.CANCELLED:return F.CANCELLED;case bt.UNKNOWN:return F.UNKNOWN;case bt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case bt.INTERNAL:return F.INTERNAL;case bt.UNAVAILABLE:return F.UNAVAILABLE;case bt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case bt.NOT_FOUND:return F.NOT_FOUND;case bt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case bt.ABORTED:return F.ABORTED;case bt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case bt.DATA_LOSS:return F.DATA_LOSS;default:return ie()}}(Re=bt||(bt={}))[Re.OK=0]="OK",Re[Re.CANCELLED=1]="CANCELLED",Re[Re.UNKNOWN=2]="UNKNOWN",Re[Re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Re[Re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Re[Re.NOT_FOUND=5]="NOT_FOUND",Re[Re.ALREADY_EXISTS=6]="ALREADY_EXISTS",Re[Re.PERMISSION_DENIED=7]="PERMISSION_DENIED",Re[Re.UNAUTHENTICATED=16]="UNAUTHENTICATED",Re[Re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Re[Re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Re[Re.ABORTED=10]="ABORTED",Re[Re.OUT_OF_RANGE=11]="OUT_OF_RANGE",Re[Re.UNIMPLEMENTED=12]="UNIMPLEMENTED",Re[Re.INTERNAL=13]="INTERNAL",Re[Re.UNAVAILABLE=14]="UNAVAILABLE",Re[Re.DATA_LOSS=15]="DATA_LOSS";var FN=null;function iP(){return new TextEncoder}var f5=new is([4294967295,4294967295],0);function VN(n){let e=iP().encode(n),t=new z0;return t.update(e),new Uint8Array(t.digest())}function LN(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new is([t,r],0),new is([i,s],0)]}var xE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ho(`Invalid padding: ${t}`);if(r<0)throw new ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ho(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ho(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=is.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(is.fromNumber(r)));return i.compare(f5)===1&&(i=new is([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=VN(e),[r,i]=LN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=VN(e),[r,i]=LN(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ho=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var ed=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,td.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(le.min(),i,new tt(pe),An(),me())}},td=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,me(),me(),me())}};var gc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},mg=class{constructor(e,t){this.targetId=e,this.me=t}},yg=class{constructor(e,t,r=yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},vg=class{constructor(){this.fe=0,this.ge=UN(),this.pe=yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),t=me(),r=me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ie()}}),new td(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=UN()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,se(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ME=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=An(),this.qe=jN(),this.Qe=new tt(pe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(fg(s))if(r===0){let o=new ee(s.path);this.Ue(t,o,Tt.newNoDocument(o,le.min()))}else se(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}FN?.et(function(d,h,p,m,w){var D,C,N,V,L,H;let Z={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},Q=h.unchangedNames;return Q&&(Z.bloomFilter={applied:w===0,hashCount:(D=Q?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(V=(N=(C=Q?.bits)===null||C===void 0?void 0:C.bitmap)===null||N===void 0?void 0:N.length)!==null&&V!==void 0?V:0,padding:(H=(L=Q?.bits)===null||L===void 0?void 0:L.padding)!==null&&H!==void 0?H:0,mightContain:I=>{var v;return(v=m?.mightContain(I))!==null&&v!==void 0&&v}}),Z}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=fs(r).toUint8Array()}catch(c){if(c instanceof ug)return dr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new xE(o,i,s)}catch(c){return dr(c instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&fg(a.target)){let c=new ee(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Tt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=me();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new ed(e,t,this.Qe,this.ke,r);return this.ke=An(),this.qe=jN(),this.Qe=new tt(pe),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vg,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Qe(pe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function jN(){return new tt(ee.comparator)}function UN(){return new tt(ee.comparator)}var p5={asc:"ASCENDING",desc:"DESCENDING"},g5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m5={and:"AND",or:"OR"},RE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function kE(n,e){return n.useProto3Json||hd(e)?e:{value:e}}function Ic(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function y5(n,e){return Ic(n,e.toTimestamp())}function mt(n){return se(!!n),le.fromTimestamp(function(t){let r=gi(t);return new st(r.seconds,r.nanos)}(n))}function cb(n,e){return NE(n,e).canonicalString()}function NE(n,e){let t=function(i){return new ke(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function oP(n){let e=ke.fromString(n);return se(mP(e)),e}function nd(n,e){return cb(n.databaseId,e.path)}function kr(n,e){let t=oP(e);if(t.get(1)!==n.databaseId.projectId)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(lP(t))}function aP(n,e){return cb(n.databaseId,e)}function cP(n){let e=oP(n);return e.length===4?ke.emptyPath():lP(e)}function PE(n){return new ke(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lP(n){return se(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function BN(n,e,t){return{name:nd(n,e),fields:t.value.mapValue.fields}}function uP(n,e,t){let r=kr(n,e.name),i=mt(e.updateTime),s=e.createTime?mt(e.createTime):le.min(),o=new rn({mapValue:{fields:e.fields}}),a=Tt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function v5(n,e){return"found"in e?function(r,i){se(!!i.found),i.found.name,i.found.updateTime;let s=kr(r,i.found.name),o=mt(i.found.updateTime),a=i.found.createTime?mt(i.found.createTime):le.min(),c=new rn({mapValue:{fields:i.found.fields}});return Tt.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){se(!!i.missing),se(!!i.readTime);let s=kr(r,i.missing),o=mt(i.readTime);return Tt.newNoDocument(s,o)}(n,e):ie()}function w5(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(se(d===void 0||typeof d=="string"),yt.fromBase64String(d||"")):(se(d===void 0||d instanceof Buffer||d instanceof Uint8Array),yt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let d=u.code===void 0?F.UNKNOWN:rP(u.code);return new z(d,u.message||"")}(o);t=new yg(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=kr(n,r.document.name),s=mt(r.document.updateTime),o=r.document.createTime?mt(r.document.createTime):le.min(),a=new rn({mapValue:{fields:r.document.fields}}),c=Tt.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new gc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=kr(n,r.document),s=r.readTime?mt(r.readTime):le.min(),o=Tt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new gc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=kr(n,r.document),s=r.removedTargetIds||[];t=new gc([],s,i,null)}else{if(!("filter"in e))return ie();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new AE(i,s),a=r.targetId;t=new mg(a,o)}}return t}function rd(n,e){let t;if(e instanceof vs)t={update:BN(n,e.key,e.value)};else if(e instanceof ws)t={delete:nd(n,e.key)};else if(e instanceof fr)t={update:BN(n,e.key,e.data),updateMask:C5(e.fieldMask)};else{if(!(e instanceof Zu))return ie();t={verify:nd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof ms)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ys)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:y5(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ie()}(n,e.precondition)),t}function OE(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?dt.updateTime(mt(s.updateTime)):s.exists!==void 0?dt.exists(s.exists):dt.none()}(e.currentDocument):dt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)se(a.setToServerValue==="REQUEST_TIME"),c=new ms;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new mi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new yi(d)}else"increment"in a?c=new ys(o,a.increment):ie();let u=gt.fromServerFormat(a.fieldPath);return new vo(u,c)}(n,i)):[];if(e.update){e.update.name;let i=kr(n,e.update.name),s=new rn({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let u=c.fieldPaths||[];return new Bn(u.map(d=>gt.fromServerFormat(d)))}(e.updateMask);return new fr(i,s,o,t,r)}return new vs(i,s,t,r)}if(e.delete){let i=kr(n,e.delete);return new ws(i,t)}if(e.verify){let i=kr(n,e.verify);return new Zu(i,t)}return ie()}function _5(n,e){return n&&n.length>0?(se(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?mt(i.updateTime):mt(s);return o.isEqual(le.min())&&(o=mt(s)),new TE(o,i.transformResults||[])}(t,e))):[]}function dP(n,e){return{documents:[aP(n,e.path)]}}function hP(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=aP(n,i);let s=function(u){if(u.length!==0)return gP($e.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(d=>function(p){return{field:lc(p.field),direction:I5(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=kE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function fP(n){let e=cP(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){se(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){let p=pP(h);return p instanceof $e&&ib(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(w){return new mo(uc(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,hd(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(h){let p=!!h.before,m=h.values||[];return new Or(m,p)}(t.startAt));let u=null;return t.endAt&&(u=function(h){let p=!h.before,m=h.values||[];return new Or(m,p)}(t.endAt)),B1(e,i,o,s,a,"F",c,u)}function E5(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function pP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=uc(t.unaryFilter.field);return Te.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=uc(t.unaryFilter.field);return Te.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=uc(t.unaryFilter.field);return Te.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=uc(t.unaryFilter.field);return Te.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ie()}}(n):n.fieldFilter!==void 0?function(t){return Te.create(uc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return $e.create(t.compositeFilter.filters.map(r=>pP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ie()}}(t.compositeFilter.op))}(n):ie()}function I5(n){return p5[n]}function b5(n){return g5[n]}function D5(n){return m5[n]}function lc(n){return{fieldPath:n.canonicalString()}}function uc(n){return gt.fromServerFormat(n.fieldPath)}function gP(n){return n instanceof Te?function(t){if(t.op==="=="){if(DN(t.value))return{unaryFilter:{field:lc(t.field),op:"IS_NAN"}};if(bN(t.value))return{unaryFilter:{field:lc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(DN(t.value))return{unaryFilter:{field:lc(t.field),op:"IS_NOT_NAN"}};if(bN(t.value))return{unaryFilter:{field:lc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lc(t.field),op:b5(t.op),value:t.value}}}(n):n instanceof $e?function(t){let r=t.getFilters().map(i=>gP(i));return r.length===1?r[0]:{compositeFilter:{op:D5(t.op),filters:r}}}(n):ie()}function C5(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var bc=class n{constructor(e,t,r,i,s=le.min(),o=le.min(),a=yt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var wg=class{constructor(e){this.ct=e}};function T5(n,e){let t;if(e.document)t=uP(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=ee.fromSegments(e.noDocument.path),i=_o(e.noDocument.readTime);t=Tt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ie();{let r=ee.fromSegments(e.unknownDocument.path),i=_o(e.unknownDocument.version);t=Tt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new st(i[0],i[1]);return le.fromTimestamp(s)}(e.readTime)),t}function $N(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:_g(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:nd(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ic(s,o.version.toTimestamp()),createTime:Ic(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wo(e.version)};else{if(!e.isUnknownDocument())return ie();r.unknownDocument={path:t.path.toArray(),version:wo(e.version)}}return r}function _g(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wo(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _o(n){let e=new st(n.seconds,n.nanoseconds);return le.fromTimestamp(e)}function co(n,e){let t=(e.baseMutations||[]).map(s=>OE(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>OE(n.ct,s)),i=st.fromMillis(e.localWriteTimeMs);return new Ju(e.batchId,i,t,r)}function ju(n){let e=_o(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?_o(n.lastLimboFreeSnapshotVersion):le.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return se(s.documents.length===1),pn(Pc(cP(s.documents[0])))}(n.query):function(s){return pn(fP(s))}(n.query),new bc(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,yt.fromBase64String(n.resumeToken))}function yP(n,e){let t=wo(e.snapshotVersion),r=wo(e.lastLimboFreeSnapshotVersion),i;i=fg(e.target)?dP(n.ct,e.target):hP(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yo(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function lb(n){let e=fP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?gg(e,e.limit,"L"):e}function Q0(n,e){return new Xu(e.largestBatchId,OE(n.ct,e.overlayMutation))}function zN(n,e){let t=e.path.lastSegment();return[n,fn(e.path.popLast()),t]}function qN(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:wo(r.readTime),documentKey:fn(r.documentKey.path),largestBatchId:r.largestBatchId}}var FE=class{getBundleMetadata(e,t){return HN(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:_o(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return HN(e).put(function(i){return{bundleId:i.id,createTime:wo(mt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return GN(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:lb(s.bundledQuery),readTime:_o(s.readTime)}}(r)})}saveNamedQuery(e,t){return GN(e).put(function(i){return{name:i.name,readTime:wo(mt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function HN(n){return Ot(n,"bundles")}function GN(n){return Ot(n,"namedQueries")}var Eg=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Pu(e).get(zN(this.userId,t)).next(r=>r?Q0(this.serializer,r):null)}getOverlays(e,t){let r=Mr();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Xu(t,o);i.push(this.ht(e,a))}),k.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(fn(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Pu(e).j("collectionPathOverlayIndex",a))}),k.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Mr(),s=fn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Pu(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let u=Q0(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Mr(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Pu(e).J({index:"collectionGroupOverlayIndex",range:a},(c,u,d)=>{let h=Q0(this.serializer,u);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Pu(e).put(function(i,s,o){let[a,c,u]=zN(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:rd(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Pu(n){return Ot(n,"documentOverlays")}var VE=class{Pt(e){return Ot(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?yt.fromUint8Array(r):yt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var fi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(nt(e.integerValue));else if("doubleValue"in e){let r=nt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Gu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=gi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(fs(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?N1(e)?this.dt(t,Number.MAX_SAFE_INTEGER):nm(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ie()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(nt(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};fi.vt=new fi;function S5(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function WN(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=S5(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var LE=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=WN(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=WN(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},jE=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},UE=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},lo=class{constructor(){this.jt=new LE,this.Ht=new jE(this.jt),this.Jt=new UE(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var uo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function ss(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=KN(n.arrayValue,e.arrayValue),t!==0?t:(t=KN(n.directionalValue,e.directionalValue),t!==0?t:ee.comparator(n.documentKey,e.documentKey)))}function KN(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Ig=class{constructor(e){this.Xt=new Qe((t,r)=>gt.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(se(e.collectionGroup===this.collectionId),this.nn)return!1;let t=aE(e);if(t!==void 0&&!this.sn(t))return!1;let r=oo(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Qe(gt.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new fc(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new fc(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new fc(r.field,r.dir==="asc"?0:1)));return new yc(yc.UNKNOWN_ID,this.collectionId,t,Hu.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function vP(n){var e,t;if(se(n instanceof Te||n instanceof $e),n instanceof Te){if(n instanceof hg){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Te.create(n.field,"==",s)))||[];return $e.create(i,"or")}return n}let r=n.filters.map(i=>vP(i));return $e.create(r,n.op)}function A5(n){if(n.getFilters().length===0)return[];let e=zE(vP(n));return se(wP(e)),BE(e)||$E(e)?[e]:e.getFilters()}function BE(n){return n instanceof Te}function $E(n){return n instanceof $e&&ib(n)}function wP(n){return BE(n)||$E(n)||function(t){if(t instanceof $e&&gE(t)){for(let r of t.getFilters())if(!BE(r)&&!$E(r))return!1;return!0}return!1}(n)}function zE(n){if(se(n instanceof Te||n instanceof $e),n instanceof Te)return n;if(n.filters.length===1)return zE(n.filters[0]);let e=n.filters.map(r=>zE(r)),t=$e.create(e,n.op);return t=bg(t),wP(t)?t:(se(t instanceof $e),se(wc(t)),se(t.filters.length>1),t.filters.reduce((r,i)=>ub(r,i)))}function ub(n,e){let t;return se(n instanceof Te||n instanceof $e),se(e instanceof Te||e instanceof $e),t=n instanceof Te?e instanceof Te?function(i,s){return $e.create([i,s],"and")}(n,e):QN(n,e):e instanceof Te?QN(e,n):function(i,s){if(se(i.filters.length>0&&s.filters.length>0),wc(i)&&wc(s))return L1(i,s.getFilters());let o=gE(i)?i:s,a=gE(i)?s:i,c=o.filters.map(u=>ub(u,a));return $e.create(c,"or")}(n,e),bg(t)}function QN(n,e){if(wc(e))return L1(e,n.getFilters());{let t=e.filters.map(r=>ub(n,r));return $e.create(t,"or")}}function bg(n){if(se(n instanceof Te||n instanceof $e),n instanceof Te)return n;let e=n.getFilters();if(e.length===1)return bg(e[0]);if(F1(n))return n;let t=e.map(i=>bg(i)),r=[];return t.forEach(i=>{i instanceof Te?r.push(i):i instanceof $e&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:$e.create(r,n.op)}var qE=class{constructor(){this.un=new id}addToCollectionParentIndex(e,t){return this.un.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Jn.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},id=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Qe(ke.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(ke.comparator)).toArray()}};var Qp=new Uint8Array(0),HE=class{constructor(e,t){this.databaseId=t,this.cn=new id,this.ln=new Fr(r=>yo(r),(r,i)=>fd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:fn(i)};return YN(e).put(s)}return k.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[E1(t),""],!1,!0);return YN(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(xr(o.parent))}return r})}addFieldIndex(e,t){let r=Ou(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=sc(e);return s.next(a=>{o.put(qN(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=Ou(e),i=sc(e),s=ic(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Ou(e),r=ic(e),i=sc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return k.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Ig(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=ic(e),i=!0,s=new Map;return k.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=me(),a=[];return k.forEach(s,(c,u)=>{q("IndexedDbIndexManager",`Using index ${function(L){return`id=${L.indexId}|cg=${L.collectionGroup}|f=${L.fields.map(H=>`${H.fieldPath}:${H.kind}`).join(",")}`}(c)} to execute ${yo(t)}`);let d=function(L,H){let Z=aE(H);if(Z===void 0)return null;for(let Q of pg(L,Z.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(u,c),h=function(L,H){let Z=new Map;for(let Q of oo(H))for(let I of pg(L,Q.fieldPath))switch(I.op){case"==":case"in":Z.set(Q.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Z.set(Q.fieldPath.canonicalString(),I.value),Array.from(Z.values())}return null}(u,c),p=function(L,H){let Z=[],Q=!0;for(let I of oo(H)){let v=I.kind===0?xN(L,I.fieldPath,L.startAt):MN(L,I.fieldPath,L.startAt);Z.push(v.value),Q&&(Q=v.inclusive)}return new Or(Z,Q)}(u,c),m=function(L,H){let Z=[],Q=!0;for(let I of oo(H)){let v=I.kind===0?MN(L,I.fieldPath,L.endAt):xN(L,I.fieldPath,L.endAt);Z.push(v.value),Q&&(Q=v.inclusive)}return new Or(Z,Q)}(u,c),w=this.In(c,u,p),D=this.In(c,u,m),C=this.Tn(c,u,h),N=this.En(c.indexId,d,w,p.inclusive,D,m.inclusive,C);return k.forEach(N,V=>r.G(V,t.limit).next(L=>{L.forEach(H=>{let Z=ee.fromSegments(H.documentKey);o.has(Z)||(o=o.add(Z),a.push(Z))})}))}).next(()=>a)}return k.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=A5($e.create(e.filters,"and")).map(r=>DE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),u=c/(t!=null?t.length:1),d=[];for(let h=0;h<c;++h){let p=t?this.dn(t[h/u]):Qp,m=this.An(e,p,r[h%u],i),w=this.Rn(e,p,s[h%u],o),D=a.map(C=>this.An(e,p,C,!0));d.push(...this.createRange(m,w,D))}return d}An(e,t,r,i){let s=new uo(e,ee.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new uo(e,ee.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new Ig(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return k.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let u=new Qe(gt.comparator),d=!1;for(let h of c.filters)for(let p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:u=u.add(p.field));for(let h of c.orderBy)h.field.isKeyField()||(u=u.add(h.field));return u.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new lo;for(let i of oo(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);fi.vt.It(s,o)}return r.zt()}dn(e){let t=new lo;return fi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new lo;return fi.vt.It(go(this.databaseId,t),r.Yt(function(s){let o=oo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new lo);let s=0;for(let o of oo(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&Yu(a))i=this.gn(i,o,a);else{let u=c.Yt(o.kind);fi.vt.It(a,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new lo;c.seed(a.zt()),fi.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Te&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Ou(e),i=sc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return k.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,h){let p=h?new Hu(h.sequenceNumber,new Jn(_o(h.readTime),new ee(xr(h.documentKey)),h.largestBatchId)):Hu.empty(),m=d.fields.map(([w,D])=>new fc(gt.fromServerFormat(w),D));return new yc(d.indexId,d.collectionGroup,m,p)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:pe(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Ou(e),s=sc(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>k.forEach(a,c=>s.put(qN(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return k.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?k.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),k.forEach(a,c=>this.wn(e,i,c).next(u=>{let d=this.Sn(s,c);return u.isEqual(d)?k.resolve():this.bn(e,s,c,u,d)}))))})}Dn(e,t,r,i){return ic(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ic(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=ic(e),s=new Qe(ss);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new uo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Qe(ss),i=this.Vn(t,e);if(i==null)return r;let s=aE(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Yu(o))for(let a of o.arrayValue.values||[])r=r.add(new uo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new uo(t.indexId,e.key,Qp,i));return r}bn(e,t,r,i,s){q("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,u,d,h,p){let m=c.getIterator(),w=u.getIterator(),D=rc(m),C=rc(w);for(;D||C;){let N=!1,V=!1;if(D&&C){let L=d(D,C);L<0?V=!0:L>0&&(N=!0)}else D!=null?V=!0:N=!0;N?(h(C),C=rc(w)):V?(p(D),D=rc(m)):(D=rc(m),C=rc(w))}}(i,s,ss,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),k.waitFor(o)}yn(e){let t=1;return sc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>ss(o,a)).filter((o,a,c)=>!a||ss(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=ss(o,e),c=ss(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Qp,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Qp,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return ss(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ZN)}getMinOffset(e,t){return k.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||ie())).next(ZN)}};function YN(n){return Ot(n,"collectionParents")}function ic(n){return Ot(n,"indexEntries")}function Ou(n){return Ot(n,"indexConfiguration")}function sc(n){return Ot(n,"indexState")}function ZN(n){se(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;eb(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Jn(e.readTime,e.documentKey,t)}var JN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Zn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function _P(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(c.next(()=>{se(a===1)}));let u=[];for(let d of t.mutations){let h=S1(e,d.key.path,t.batchId);s.push(i.delete(h)),u.push(d.key)}return k.waitFor(s).next(()=>u)}function Dg(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ie();e=n.noDocument}return JSON.stringify(e).length}Zn.DEFAULT_COLLECTION_PERCENTILE=10,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zn.DEFAULT=new Zn(41943040,Zn.DEFAULT_COLLECTION_PERCENTILE,Zn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zn.DISABLED=new Zn(-1,0,0);var Cg=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){se(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return os(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=dc(e),o=os(e);return o.add({}).next(a=>{se(typeof a=="number");let c=new Ju(a,t,r,i),u=function(m,w,D){let C=D.baseMutations.map(V=>rd(m.ct,V)),N=D.mutations.map(V=>rd(m.ct,V));return{userId:w,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:C,mutations:N}}(this.serializer,this.userId,c),d=[],h=new Qe((p,m)=>pe(p.canonicalString(),m.canonicalString()));for(let p of i){let m=S1(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(u)),d.push(s.put(m,PG))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),k.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return os(e).get(t).next(r=>r?(se(r.userId===this.userId),co(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?k.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return os(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(se(a.batchId>=r),s=co(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return os(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return os(e).U("userMutationsIndex",t).next(r=>r.map(i=>co(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Xp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return dc(e).J({range:i},(o,a,c)=>{let[u,d,h]=o,p=xr(d);if(u===this.userId&&t.path.isEqual(p))return os(e).get(h).next(m=>{if(!m)throw ie();se(m.userId===this.userId),s.push(co(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qe(pe),i=[];return t.forEach(s=>{let o=Xp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=dc(e).J({range:a},(u,d,h)=>{let[p,m,w]=u,D=xr(m);p===this.userId&&s.path.isEqual(D)?r=r.add(w):h.done()});i.push(c)}),k.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=Xp(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Qe(pe);return dc(e).J({range:o},(c,u,d)=>{let[h,p,m]=c,w=xr(p);h===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(os(e).get(s).next(o=>{if(o===null)throw ie();se(o.userId===this.userId),r.push(co(this.serializer,o))}))}),k.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return _P(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),k.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return k.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return dc(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=xr(s[1]);i.push(c)}else a.done()}).next(()=>{se(i.length===0)})})}containsKey(e,t){return EP(e,this.userId,t)}Nn(e){return IP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function EP(n,e,t){let r=Xp(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return dc(n).J({range:s,H:!0},(a,c,u)=>{let[d,h,p]=a;d===e&&h===i&&(o=!0),u.done()}).next(()=>o)}function os(n){return Ot(n,"mutations")}function dc(n){return Ot(n,"documentMutations")}function IP(n){return Ot(n,"mutationQueues")}var Dc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var GE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Dc(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>le.fromTimestamp(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>oc(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(se(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return oc(e).J((o,a)=>{let c=ju(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>k.waitFor(s)).next(()=>i)}forEachTarget(e,t){return oc(e).J((r,i)=>{let s=ju(i);t(s)})}qn(e){return XN(e).get("targetGlobalKey").next(t=>(se(t!==null),t))}Qn(e,t){return XN(e).put("targetGlobalKey",t)}Kn(e,t){return oc(e).put(yP(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=yo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return oc(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let u=ju(a);fd(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=as(e);return t.forEach(o=>{let a=fn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),k.waitFor(i)}removeMatchingKeys(e,t,r){let i=as(e);return k.forEach(t,s=>{let o=fn(s.path);return k.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=as(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=as(e),s=me();return i.J({range:r,H:!0},(o,a,c)=>{let u=xr(o[1]),d=new ee(u);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=fn(t.path),i=IDBKeyRange.bound([r],[E1(r)],!1,!0),s=0;return as(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,u)=>{o!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return oc(e).get(t).next(r=>r?ju(r):null)}};function oc(n){return Ot(n,"targets")}function XN(n){return Ot(n,"targetGlobal")}function as(n){return Ot(n,"targetDocuments")}function e1([n,e],[t,r]){let i=pe(n,t);return i===0?pe(e,r):i}var WE=class{constructor(e){this.Un=e,this.buffer=new Qe(e1),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();e1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},KE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Is(t)?q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Es(t)}yield this.Hn(3e5)}))}},QE=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(Un.oe);let r=new WE(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(JN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JN):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),ac()<=yr.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}};function x5(n,e){return new QE(n,e)}var YE=class{constructor(e,t){this.db=e,this.garbageCollector=x5(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Yp(e,r)}removeReference(e,t,r){return Yp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Yp(e,t)}nr(e,t){return function(i,s){let o=!1;return IP(i).Y(a=>EP(i,a,s).next(c=>(c&&(o=!0),k.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(u=>{if(!u)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,le.min()),as(e).delete(function(h){return[0,fn(h.path)]}(o))))});i.push(c)}}).next(()=>k.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Yp(e,t)}tr(e,t){let r=as(e),i,s=Un.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:u})=>{o===0?(s!==Un.oe&&t(new ee(xr(i)),s),s=u,i=c):s=Un.oe}).next(()=>{s!==Un.oe&&t(new ee(xr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Yp(n,e){return as(n).put(function(r,i){return{targetId:0,path:fn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Tg=class{constructor(){this.changes=new Fr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ZE=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return so(e).put(r)}removeEntry(e,t,r){return so(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],_g(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Tt.newInvalidDocument(t);return so(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fu(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Tt.newInvalidDocument(t)};return so(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Fu(t))},(i,s)=>{r={document:this.ir(t,s),size:Dg(s)}}).next(()=>r)}getEntries(e,t){let r=An();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=An(),i=new tt(ee.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,Dg(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return k.resolve();let i=new Qe(r1);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(Fu(i.first()),Fu(i.last())),o=i.getIterator(),a=o.getNext();return so(e).J({index:"documentKeyIndex",range:s},(c,u,d)=>{let h=ee.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&r1(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?d.$(Fu(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),_g(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return so(e).U(IDBKeyRange.bound(a,c,!0)).next(u=>{s?.incrementDocumentReadCount(u.length);let d=An();for(let h of u){let p=this.ir(ee.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(gd(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=An(),o=n1(t,r),a=n1(t,Jn.max());return so(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,u,d)=>{let h=this.ir(ee.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new JE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return t1(e).get("remoteDocumentGlobalKey").next(t=>(se(!!t),t))}rr(e,t){return t1(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=T5(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return Tt.newInvalidDocument(e)}};function bP(n){return new ZE(n)}var JE=class extends Tg{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Fr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Qe((s,o)=>pe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=$N(this.cr.serializer,o);i=i.add(s.path.popLast());let u=Dg(c);r+=u-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=$N(this.cr.serializer,o.convertToNoDocument(le.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),k.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function t1(n){return Ot(n,"remoteDocumentGlobal")}function so(n){return Ot(n,"remoteDocumentsV14")}function Fu(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function n1(n,e){let t=e.documentKey.path.toArray();return[n,_g(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function r1(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=pe(t[s],r[s]),i)return i;return i=pe(t.length,r.length),i||(i=pe(t[t.length-2],r[r.length-2]),i||pe(t[t.length-1],r[r.length-1]))}var XE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Sg=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$u(r.mutation,i,Bn.empty(),st.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=me()){let i=Mr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Lu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Mr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,me()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=An(),o=Bu(),a=function(){return Bu()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof fr)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),$u(d.mutation,u,d.mutation.getFieldMask(),st.now())):o.set(u.key,Bn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var h;return a.set(u,new XE(d,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Bu(),i=new tt((o,a)=>o-a),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Bn.empty();d=a.applyToLocalView(u,d),r.set(c,d);let h=(i.get(a.batchId)||me()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,h=W1();d.forEach(p=>{if(!s.has(p)){let m=eP(t.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):sb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):k.resolve(Mr()),a=-1,c=s;return o.next(u=>k.forEach(u,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,me())).next(d=>({batchId:a,changes:G1(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=Lu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Lu();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let u=function(h,p){return new hr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,Tt.newInvalidDocument(d)))});let a=Lu();return o.forEach((c,u)=>{let d=s.get(c);d!==void 0&&$u(d.mutation,u,Bn.empty(),st.now()),gd(t,u)&&(a=a.insert(c,u))}),a})}};var eI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return k.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:mt(i.createTime)}}(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:lb(i.bundledQuery),readTime:mt(i.readTime)}}(t)),k.resolve()}};var tI=class{constructor(){this.overlays=new tt(ee.comparator),this.Ir=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Mr();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=Mr(),s=t.length+1,o=new ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new tt((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Mr(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Mr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Xu(t,r));let s=this.Ir.get(t);s===void 0&&(s=me(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var nI=class{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var sd=class{constructor(){this.Tr=new Qe(Dt.Er),this.dr=new Qe(Dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Dt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Dt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ee(new ke([])),r=new Dt(t,e),i=new Dt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ee(new ke([])),r=new Dt(t,e),i=new Dt(t,e+1),s=me();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Dt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Dt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||pe(e.wr,t.wr)}static Ar(e,t){return pe(e.wr,t.wr)||ee.comparator(e.key,t.key)}};var rI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Qe(Dt.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Ju(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,t){return k.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Dt(t,0),i=new Dt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qe(pe);return t.forEach(i=>{let s=new Dt(i,0),o=new Dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ee.isDocumentKey(s)||(s=s.child(""));let o=new Dt(new ee(s),0),a=new Qe(pe);return this.br.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){se(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(t.mutations,i=>{let s=new Dt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Dt(t,0),i=this.br.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var iI=class{constructor(e){this.Mr=e,this.docs=function(){return new tt(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(t))}getEntries(e,t){let r=An();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tt.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=An(),o=t.path,a=new ee(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||eb(b1(d),r)<=0||(i.has(d.key)||gd(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ie()}Or(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new sI(this)}getSize(e){return k.resolve(this.size)}},sI=class extends Tg{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var oI=class{constructor(e){this.persistence=e,this.Nr=new Fr(t=>yo(t),fd),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sd,this.targetCount=0,this.kr=Dc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),k.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Dc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.Kn(t),k.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.Br.containsKey(t))}};var Ag=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Un(0),this.Kr=!1,this.Kr=!0,this.$r=new nI,this.referenceDelegate=e(this),this.Ur=new oI(this),this.indexManager=new qE,this.remoteDocumentCache=function(i){return new iI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new wg(t),this.Gr=new eI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new rI(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new aI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},aI=class extends ag{constructor(e){super(),this.currentSequenceNumber=e}},xg=class n{constructor(e){this.persistence=e,this.Jr=new sd,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ie()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),k.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return k.or([()=>k.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var cI=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new cg("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wN,{unique:!0}),c.createObjectStore("documentMutations")}(e),i1(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=k.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),i1(e)),o=o.next(()=>function(c){let u=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,u){return u.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",wN,{unique:!0});let h=u.store("mutations"),p=d.map(m=>h.put(m));return k.waitFor(p)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let u=c.createObjectStore("documentOverlays",{keyPath:GG});u.createIndex("collectionPathOverlayIndex",WG,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",KG,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let u=c.createObjectStore("remoteDocumentsV14",{keyPath:OG});u.createIndex("documentKeyIndex",FG),u.createIndex("collectionGroupIndex",VG)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:$G}).createIndex("sequenceNumberIndex",zG,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:qG}).createIndex("documentKeyIndex",HG,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=Dg(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>k.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>k.forEach(a,c=>{se(c.userId===s.userId);let u=co(this.serializer,c);return _P(e,s.userId,u).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new ke(o),u=function(h){return[0,fn(h)]}(c);s.push(t.get(u).next(d=>d?k.resolve():(h=>t.put({targetId:0,path:fn(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>k.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:BG});let r=t.store("collectionParents"),i=new id,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:fn(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new ke(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],u)=>{let d=xr(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=ju(i),o=yP(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(h){return h.document?new ee(ke.fromString(h.document.name).popFirst(5)):h.noDocument?ee.fromSegments(h.noDocument.path):h.unknownDocument?ee.fromSegments(h.unknownDocument.path):ie()}(o).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(u))}).next(()=>k.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=bP(this.serializer),s=new Ag(xg.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var u;let d=(u=a.get(c.userId))!==null&&u!==void 0?u:me();co(this.serializer,c).keys().forEach(h=>d=d.add(h)),a.set(c.userId,d)}),k.forEach(a,(c,u)=>{let d=new Ct(u),h=Eg.lt(this.serializer,d),p=s.getIndexManager(d),m=Cg.lt(d,this.serializer,p,s.referenceDelegate);return new Sg(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new Wu(t,Un.oe),c).next()})})}};function i1(n){n.createObjectStore("targetDocuments",{keyPath:jG}).createIndex("documentTargetsIndex",UG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",LG,{unique:!0}),n.createObjectStore("targetGlobal")}var Y0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",lI=class n{constructor(e,t,r,i,s,o,a,c,u,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=u,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!n.D())throw new z(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new YE(this,i),this.Ai=t+"main",this.serializer=new wg(c),this.Ri=new hs(this.Ai,this.hi,new cI(this.serializer)),this.$r=new VE,this.Ur=new GE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=bP(this.serializer),this.Gr=new FE,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&pt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(F.FAILED_PRECONDITION,Y0);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Un(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>b(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>b(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>b(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Zp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Is(e))return q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Vu(e).get("owner").next(t=>k.resolve(this.vi(t)))}Ci(e){return Zp(e).delete(this.clientId)}Fi(){return b(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=Ot(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return k.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?k.resolve(!0):Vu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new z(F.FAILED_PRECONDITION,Y0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zp(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&q("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return b(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new Wu(e,Un.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Zp(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Cg.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new HE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Eg.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){q("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?ZG:c===16?YG:c===15?nb:c===14?M1:c===13?x1:c===12?QG:c===11?A1:void ie()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new Wu(a,this.Qr?this.Qr.next():Un.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new z(F.FAILED_PRECONDITION,D1);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Vu(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new z(F.FAILED_PRECONDITION,Y0)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vu(e).put("owner",t)}static D(){return hs.D()}bi(e){let t=Vu(e);return t.get("owner").next(r=>this.vi(r)?(q("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):k.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(pt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Xm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){pt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Vu(n){return Ot(n,"owner")}function Zp(n){return Ot(n,"clientMetadata")}function db(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var uI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=me(),i=me();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var dI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Mg=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Xm()?8:C1(ll())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new dI;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ac()<=yr.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",cc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(ac()<=yr.DEBUG&&q("QueryEngine","Query:",cc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ac()<=yr.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",cc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(t))):k.resolve())}Yi(e,t){if(RN(t))return k.resolve(null);let r=pn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=gg(t,null,"F"),r=pn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=me(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.ts(t,a);return this.ns(t,u,o,c.readTime)?this.Yi(e,gg(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return RN(t)||i.isEqual(le.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?k.resolve(null):(ac()<=yr.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cc(t)),this.rs(e,o,t,I1(i,-1)).next(a=>a))})}ts(e,t){let r=new Qe(q1(e));return t.forEach((i,s)=>{gd(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return ac()<=yr.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",cc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Jn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var hI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new tt(pe),this._s=new Fr(s=>yo(s),fd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sg(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function DP(n,e,t,r){return new hI(n,e,t,r)}function CP(n,e){return b(this,null,function*(){let t=X(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=me();for(let u of i){o.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})})}function M5(n,e){let t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let h=u.batch,p=h.keys(),m=k.resolve();return p.forEach(w=>{m=m.next(()=>d.getEntry(c,w)).next(D=>{let C=u.docVersions.get(w);se(C!==null),D.version.compareTo(C)<0&&(h.applyToRemoteDocument(D,u),D.isValidDocument()&&(D.setReadTime(u.commitVersion),d.addEntry(D)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function TP(n){let e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function R5(n,e){let t=X(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,h)=>{let p=i.get(h);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(yt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(D,C,N){return D.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(p,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let c=An(),u=me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(SP(s,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(le.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}function SP(n,e,t){let r=me(),i=me();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=An();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function k5(n,e){let t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cc(n,e){let t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new bc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Tc(n,e,t){return b(this,null,function*(){let r=X(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Is(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Rg(n,e,t){let r=X(n),i=le.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){let h=X(c),p=h._s.get(d);return p!==void 0?k.resolve(h.os.get(p)):h.Ur.getTargetData(u,d)}(r,o,pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:le.min(),t?s:me())).next(a=>(MP(r,z1(e),a),{documents:a,Ts:s})))}function AP(n,e){let t=X(n),r=X(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function xP(n,e){let t=X(n),r=t.us.get(e)||le.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,I1(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(MP(t,e,i),i))}function MP(n,e,t){let r=n.us.get(e)||le.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function N5(n,e,t,r){return b(this,null,function*(){let i=X(n),s=me(),o=An();for(let u of t){let d=e.Es(u.metadata.name);u.document&&(s=s.add(d));let h=e.ds(u);h.setReadTime(e.As(u.metadata.readTime)),o=o.insert(d,h)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Cc(i,function(d){return pn(Pc(ke.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>SP(u,a,o).next(d=>(a.apply(u),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,d.Ps,d.Is)).next(()=>d.Ps)))})}function P5(r,i){return b(this,arguments,function*(n,e,t=me()){let s=yield Cc(n,pn(lb(e.bundledQuery))),o=X(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=mt(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let u=s.withResumeToken(yt.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(u.targetId,u),o.Ur.updateTargetData(a,u).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function s1(n,e){return`firestore_clients_${n}_${e}`}function o1(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Z0(n,e){return`firestore_targets_${n}_${e}`}var kg=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new z(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(pt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},zu=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new z(r.error.code,r.error.message))),s?new n(e,r.state,i):(pt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ng=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=ob();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=T1(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(pt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},fI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(pt("SharedClientState",`Failed to parse online state: ${e}`),null)}},od=class{constructor(){this.activeTargetIds=ob()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},qu=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new tt(pe),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=s1(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new od),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return b(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(s1(this.persistenceKey,r));if(i){let s=Ng.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Z0(this.persistenceKey,e));if(i){let s=zu.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Z0(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return q("SharedClientState","READ",e,t),t}setItem(e,t){q("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){q("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(q("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>b(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=Un.oe;if(s!=null)try{let a=JSON.parse(s);se(typeof a=="number"),o=a}catch(a){pt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Un.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new kg(this.currentUser,e,t,r),s=o1(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=o1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Z0(this.persistenceKey,e),s=new zu(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Ng.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return kg.Rs(new Ct(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return zu.Rs(i,t)}Ls(e){return fI.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return b(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);q("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=ob();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Pg=class{constructor(){this.so=new od,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new od,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var pI=class{_o(e){}shutdown(){}};var Og=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Jp=null;function J0(){return Jp===null?Jp=function(){return 268435456+Math.round(2147483648*Math.random())}():Jp++,"0x"+Jp.toString(16)}var O5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var gI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var nn="WebChannelConnection",mI=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=J0(),c=this.xo(t,r.toUriEncodedString());q("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,c,u,i).then(d=>(q("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw dr("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=O5[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=J0();return new Promise((o,a)=>{let c=new q0;c.setWithCredentials(!0),c.listenOnce(H0.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Nu.NO_ERROR:let d=c.getResponseJson();q(nn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Nu.TIMEOUT:q(nn,`RPC '${e}' ${s} timed out`),a(new z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:let h=c.getStatus();if(q(nn,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let m=p?.error;if(m&&m.status&&m.message){let w=function(C){let N=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(N)>=0?N:F.UNKNOWN}(m.status);a(new z(w,m.message))}else a(new z(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new z(F.UNAVAILABLE,"Connection failed."));break;default:ie()}}finally{q(nn,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);q(nn,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=J0(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=K0(),a=W0(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");q(nn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=o.createWebChannel(d,c),p=!1,m=!1,w=new gI({Io:C=>{m?q(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(p||(q(nn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),q(nn,`RPC '${e}' stream ${i} sending:`,C),h.send(C))},To:()=>h.close()}),D=(C,N,V)=>{C.listen(N,L=>{try{V(L)}catch(H){setTimeout(()=>{throw H},0)}})};return D(h,nc.EventType.OPEN,()=>{m||(q(nn,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),D(h,nc.EventType.CLOSE,()=>{m||(m=!0,q(nn,`RPC '${e}' stream ${i} transport closed`),w.So())}),D(h,nc.EventType.ERROR,C=>{m||(m=!0,dr(nn,`RPC '${e}' stream ${i} transport errored:`,C),w.So(new z(F.UNAVAILABLE,"The operation could not be completed")))}),D(h,nc.EventType.MESSAGE,C=>{var N;if(!m){let V=C.data[0];se(!!V);let L=V,H=L.error||((N=L[0])===null||N===void 0?void 0:N.error);if(H){q(nn,`RPC '${e}' stream ${i} received error:`,H);let Z=H.status,Q=function(_){let T=bt[_];if(T!==void 0)return rP(T)}(Z),I=H.message;Q===void 0&&(Q=F.INTERNAL,I="Unknown error status: "+Z+" with message "+H.message),m=!0,w.So(new z(Q,I)),h.close()}else q(nn,`RPC '${e}' stream ${i} received:`,V),w.bo(V)}}),D(a,G0.STAT_EVENT,C=>{C.stat===Kp.PROXY?q(nn,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===Kp.NOPROXY&&q(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function RP(){return typeof window<"u"?window:null}function rg(){return typeof document<"u"?document:null}function md(n){return new RE(n,!0)}var ad=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Fg=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ad(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(pt(t.toString()),pt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},yI=class extends Fg{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=w5(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?mt(o.readTime):le.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=PE(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=fg(c)?{documents:dP(s,c)}:{query:hP(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=sP(s,o.resumeToken);let u=kE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Ic(s,o.snapshotVersion.toTimestamp());let u=kE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=E5(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=PE(this.serializer),t.removeTarget=e,this.a_(t)}},vI=class extends Fg{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return se(!!e.streamToken),this.lastStreamToken=e.streamToken,se(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){se(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=_5(e.writeResults,e.commitTime),r=mt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=PE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>rd(this.serializer,r))};this.a_(t)}};var wI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,NE(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(F.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,NE(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},_I=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(pt(t),this.D_=!1):q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var EI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){bs(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let u=X(c);u.L_.add(4),yield Oc(u),u.q_.set("Unknown"),u.L_.delete(4),yield yd(u)})}(this))}))}),this.q_=new _I(r,i)}};function yd(n){return b(this,null,function*(){if(bs(n))for(let e of n.B_)yield e(!0)})}function Oc(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function rm(n,e){let t=X(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),pb(t)?fb(t):Vc(t).r_()&&hb(t,e))}function Sc(n,e){let t=X(n),r=Vc(t);t.N_.delete(e),r.r_()&&kP(t,e),t.N_.size===0&&(r.r_()?r.o_():bs(t)&&t.q_.set("Unknown"))}function hb(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vc(n).A_(e)}function kP(n,e){n.Q_.xe(e),Vc(n).R_(e)}function fb(n){n.Q_=new ME({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Vc(n).start(),n.q_.v_()}function pb(n){return bs(n)&&!Vc(n).n_()&&n.N_.size>0}function bs(n){return X(n).L_.size===0}function NP(n){n.Q_=void 0}function F5(n){return b(this,null,function*(){n.q_.set("Online")})}function V5(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{hb(n,e)})})}function L5(n,e){return b(this,null,function*(){NP(n),pb(n)?(n.q_.M_(e),fb(n)):n.q_.set("Unknown")})}function j5(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof yg&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Vg(n,r)}else if(e instanceof gc?n.Q_.Ke(e):e instanceof mg?n.Q_.He(e):n.Q_.We(e),!t.isEqual(le.min()))try{let r=yield TP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(yt.EMPTY_BYTE_STRING,d.snapshotVersion)),kP(s,c);let h=new bc(d.target,c,u,d.sequenceNumber);hb(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){q("RemoteStore","Failed to raise snapshot:",r),yield Vg(n,r)}})}function Vg(n,e,t){return b(this,null,function*(){if(!Is(e))throw e;n.L_.add(1),yield Oc(n),n.q_.set("Offline"),t||(t=()=>TP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield yd(n)}))})}function PP(n,e){return e().catch(t=>Vg(n,t,e))}function Fc(n){return b(this,null,function*(){let e=X(n),t=_s(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;U5(e);)try{let i=yield k5(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,B5(e,i)}catch(i){yield Vg(e,i)}OP(e)&&FP(e)})}function U5(n){return bs(n)&&n.O_.length<10}function B5(n,e){n.O_.push(e);let t=_s(n);t.r_()&&t.V_&&t.m_(e.mutations)}function OP(n){return bs(n)&&!_s(n).n_()&&n.O_.length>0}function FP(n){_s(n).start()}function $5(n){return b(this,null,function*(){_s(n).p_()})}function z5(n){return b(this,null,function*(){let e=_s(n);for(let t of n.O_)e.m_(t.mutations)})}function q5(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=SE.from(r,e,t);yield PP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Fc(n)})}function H5(n,e){return b(this,null,function*(){e&&_s(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return nP(o)&&o!==F.ABORTED}(i.code)){let s=r.O_.shift();_s(r).s_(),yield PP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Fc(r)}})}(n,e)),OP(n)&&FP(n)})}function a1(n,e){return b(this,null,function*(){let t=X(n);t.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let r=bs(t);t.L_.add(3),yield Oc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield yd(t)})}function II(n,e){return b(this,null,function*(){let t=X(n);e?(t.L_.delete(2),yield yd(t)):e||(t.L_.add(2),yield Oc(t),t.q_.set("Unknown"))})}function Vc(n){return n.K_||(n.K_=function(t,r,i){let s=X(t);return s.w_(),new yI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:F5.bind(null,n),Ro:V5.bind(null,n),mo:L5.bind(null,n),d_:j5.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),pb(n)?fb(n):n.q_.set("Unknown")):(yield n.K_.stop(),NP(n))}))),n.K_}function _s(n){return n.U_||(n.U_=function(t,r,i){let s=X(t);return s.w_(),new vI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$5.bind(null,n),mo:H5.bind(null,n),f_:z5.bind(null,n),g_:q5.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield Fc(n)):(yield n.U_.stop(),n.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var bI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Pt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Lc(n,e){if(pt("AsyncQueue",`${e}: ${n}`),Is(n))return new z(F.UNAVAILABLE,`${e}: ${n}`);throw n}var Lg=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=Lu(),this.sortedSet=new tt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var jg=class{constructor(){this.W_=new tt(ee.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ie():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ac=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Lg.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var DI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},CI=class{constructor(){this.queries=c1(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=X(t),s=i.queries;i.queries=c1(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new z(F.ABORTED,"Firestore shutting down"))}};function c1(){return new Fr(n=>$1(n),pd)}function gb(n,e){return b(this,null,function*(){let t=X(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new DI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=Lc(o,`Initialization of query '${cc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&yb(t)})}function mb(n,e){return b(this,null,function*(){let t=X(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function G5(n,e){let t=X(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&yb(t)}function W5(n,e,t){let r=X(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function yb(n){n.Y_.forEach(e=>{e.next()})}var TI,l1;(l1=TI||(TI={})).ea="default",l1.Cache="cache";var cd=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ac(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==TI.Cache}};var SI=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Ug=class{constructor(e){this.serializer=e}Es(e){return kr(this.serializer,e)}ds(e){return e.metadata.exists?uP(this.serializer,e.document,!1):Tt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return mt(e)}},AI=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=ke.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Ug(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||me()).add(s);t.set(o,a)}}return t}complete(){return b(this,null,function*(){let e=yield N5(this.localStore,new Ug(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield P5(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function VP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Bg=class{constructor(e){this.key=e}},$g=class{constructor(e){this.key=e}},zg=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=q1(e),this.Ra=new Lg(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new jg,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let p=i.get(d),m=gd(this.query,h)?h:null,w=!!p&&this.mutatedKeys.has(p.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),C=!1;p&&m?p.data.isEqual(m.data)?w!==D&&(r.track({type:3,doc:m}),C=!0):this.ga(p,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.Aa(m,c)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),C=!0):p&&!m&&(r.track({type:1,doc:p}),C=!0,(c||u)&&(a=!0)),C&&(m?(o=o.add(m),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,h)=>function(m,w){let D=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ie()}};return D(m)-D(w)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new Ac(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new jg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new $g(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Bg(r))}),t}ba(e){this.Ta=e.Ts,this.da=me();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ac.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},xI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},MI=class{constructor(e){this.key=e,this.va=!1}},RI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Fr(a=>$1(a),pd),this.Ma=new Map,this.xa=new Set,this.Oa=new tt(ee.comparator),this.Na=new Map,this.La=new sd,this.Ba={},this.ka=new Map,this.qa=Dc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function K5(n,e,t=!0){return b(this,null,function*(){let r=im(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield LP(r,e,t,!0),i})}function Q5(n,e){return b(this,null,function*(){let t=im(n);yield LP(t,e,!0,!1)})}function LP(n,e,t,r){return b(this,null,function*(){let i=yield Cc(n.localStore,pn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield vb(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&rm(n.remoteStore,i),a})}function vb(n,e,t,r,i){return b(this,null,function*(){n.Ka=(h,p,m)=>function(D,C,N,V){return b(this,null,function*(){let L=C.view.ma(N);L.ns&&(L=yield Rg(D.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,L)));let H=V&&V.targetChanges.get(C.targetId),Z=V&&V.targetMismatches.get(C.targetId)!=null,Q=C.view.applyChanges(L,D.isPrimaryClient,H,Z);return kI(D,C.targetId,Q.wa),Q.snapshot})}(n,h,p,m);let s=yield Rg(n.localStore,e,!0),o=new zg(e,s.Ts),a=o.ma(s.documents),c=td.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);kI(n,t,u.wa);let d=new xI(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function Y5(n,e,t){return b(this,null,function*(){let r=X(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!pd(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Tc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Sc(r.remoteStore,i.targetId),xc(r,i.targetId)}).catch(Es))):(xc(r,i.targetId),yield Tc(r.localStore,i.targetId,!0))})}function Z5(n,e){return b(this,null,function*(){let t=X(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Sc(t.remoteStore,r.targetId))})}function J5(n,e,t){return b(this,null,function*(){let r=Ib(n);try{let i=yield function(o,a){let c=X(o),u=st.now(),d=a.reduce((m,w)=>m.add(w.key),me()),h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=An(),D=me();return c.cs.getEntries(m,d).next(C=>{w=C,w.forEach((N,V)=>{V.isValidDocument()||(D=D.add(N))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,w)).next(C=>{h=C;let N=[];for(let V of a){let L=h5(V,h.get(V.key).overlayedDocument);L!=null&&N.push(new fr(V.key,L,O1(L.value.mapValue),dt.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,N,a)}).next(C=>{p=C;let N=C.applyToLocalDocumentSet(h,D);return c.documentOverlayCache.saveOverlays(m,C.batchId,N)})}).then(()=>({batchId:p.batchId,changes:G1(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new tt(pe)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),yield _i(r,i.changes),yield Fc(r.remoteStore)}catch(i){let s=Lc(i,"Failed to persist write");t.reject(s)}})}function jP(n,e){return b(this,null,function*(){let t=X(n);try{let r=yield R5(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(se(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?se(o.va):i.removedDocuments.size>0&&(se(o.va),o.va=!1))}),yield _i(t,r,e)}catch(r){yield Es(r)}})}function u1(n,e,t){let r=X(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=X(o);c.onlineState=a;let u=!1;c.queries.forEach((d,h)=>{for(let p of h.j_)p.Z_(a)&&(u=!0)}),u&&yb(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function X5(n,e,t){return b(this,null,function*(){let r=X(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new tt(ee.comparator);o=o.insert(s,Tt.newNoDocument(s,le.min()));let a=me().add(s),c=new ed(le.min(),new Map,new tt(pe),o,a);yield jP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),Eb(r)}else yield Tc(r.localStore,e,!1).then(()=>xc(r,e,t)).catch(Es)})}function e9(n,e){return b(this,null,function*(){let t=X(n),r=e.batch.batchId;try{let i=yield M5(t.localStore,e);_b(t,r,null),wb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield _i(t,i)}catch(i){yield Es(i)}})}function t9(n,e,t){return b(this,null,function*(){let r=X(n);try{let i=yield function(o,a){let c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(h=>(se(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);_b(r,e,t),wb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield _i(r,i)}catch(i){yield Es(i)}})}function n9(n,e){return b(this,null,function*(){let t=X(n);bs(t.remoteStore)||q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=X(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Lc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function wb(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function _b(n,e,t){let r=X(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function xc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||UP(n,r)})}function UP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Sc(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Eb(n))}function kI(n,e,t){for(let r of t)r instanceof Bg?(n.La.addReference(r.key,e),r9(n,r)):r instanceof $g?(q("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||UP(n,r.key)):ie()}function r9(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(q("SyncEngine","New document in limbo: "+t),n.xa.add(r),Eb(n))}function Eb(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ee(ke.fromString(e)),r=n.qa.next();n.Na.set(r,new MI(t)),n.Oa=n.Oa.insert(t,r),rm(n.remoteStore,new bc(pn(Pc(t.path)),r,"TargetPurposeLimboResolution",Un.oe))}}function _i(n,e,t){return b(this,null,function*(){let r=X(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let h=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){i.push(u);let h=uI.Wi(c.targetId,u);s.push(h)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,u){return b(this,null,function*(){let d=X(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>k.forEach(u,p=>k.forEach(p.$i,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>k.forEach(p.Ui,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!Is(h))throw h;q("LocalStore","Failed to update sequence numbers: "+h)}for(let h of u){let p=h.targetId;if(!h.fromCache){let m=d.os.get(p),w=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(p,D)}}})}(r.localStore,s))})}function i9(n,e){return b(this,null,function*(){let t=X(n);if(!t.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let r=yield CP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new z(F.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield _i(t,r.hs)}})}function s9(n,e){let t=X(n),r=t.Na.get(e);if(r&&r.va)return me().add(r.key);{let i=me(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function o9(n,e){return b(this,null,function*(){let t=X(n),r=yield Rg(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&kI(t,e.targetId,i.wa),i})}function a9(n,e){return b(this,null,function*(){let t=X(n);return xP(t.localStore,e).then(r=>_i(t,r))})}function c9(n,e,t,r){return b(this,null,function*(){let i=X(n),s=yield function(a,c){let u=X(a),d=X(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,c).next(p=>p?u.localDocuments.getDocuments(h,p):k.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield Fc(i.remoteStore):t==="acknowledged"||t==="rejected"?(_b(i,e,r||null),wb(i,e),function(a,c){X(X(a).mutationQueue).On(c)}(i.localStore,e)):ie(),yield _i(i,s)):q("SyncEngine","Cannot apply mutation batch with id: "+e)})}function l9(n,e){return b(this,null,function*(){let t=X(n);if(im(t),Ib(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield d1(t,r.toArray());t.Qa=!0,yield II(t.remoteStore,!0);for(let s of i)rm(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(xc(t,o),Tc(t.localStore,o,!0))),Sc(t.remoteStore,o)}),yield i,yield d1(t,r),function(o){let a=X(o);a.Na.forEach((c,u)=>{Sc(a.remoteStore,u)}),a.La.pr(),a.Na=new Map,a.Oa=new tt(ee.comparator)}(t),t.Qa=!1,yield II(t.remoteStore,!1)}})}function d1(n,e,t){return b(this,null,function*(){let r=X(n),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield Cc(r.localStore,pn(c[0]));for(let u of c){let d=r.Fa.get(u),h=yield o9(r,d);h.snapshot&&s.push(h.snapshot)}}else{let u=yield AP(r.localStore,o);a=yield Cc(r.localStore,u),yield vb(r,BP(u),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function BP(n){return B1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function u9(n){return function(t){return X(X(t).persistence).Qi()}(X(n).localStore)}function d9(n,e,t,r){return b(this,null,function*(){let i=X(n);if(i.Qa)return void q("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield xP(i.localStore,z1(s[0])),a=ed.createSynthesizedRemoteEventForCurrentChange(e,t==="current",yt.EMPTY_BYTE_STRING);yield _i(i,o,a);break}case"rejected":yield Tc(i.localStore,e,!0),xc(i,e,r);break;default:ie()}})}function h9(n,e,t){return b(this,null,function*(){let r=im(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){q("SyncEngine","Adding an already active target "+i);continue}let s=yield AP(r.localStore,i),o=yield Cc(r.localStore,s);yield vb(r,BP(s),o.targetId,!1,o.resumeToken),rm(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield Tc(r.localStore,i,!1).then(()=>{Sc(r.remoteStore,i),xc(r,i)}).catch(Es))}})}function im(n){let e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=s9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=X5.bind(null,e),e.Ca.d_=G5.bind(null,e.eventManager),e.Ca.$a=W5.bind(null,e.eventManager),e}function Ib(n){let e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=e9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=t9.bind(null,e),e}function f9(n,e,t){let r=X(n);(function(s,o,a){return b(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,w){let D=X(m),C=mt(w.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",N=>D.Gr.getBundleMetadata(N,w.id)).then(N=>!!N&&N.createTime.compareTo(C)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(VP(c));let u=new AI(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let p=yield u.la(d);p&&a._updateProgress(p),d=yield o.Ua()}let h=yield u.complete();return yield _i(s,h.Ia,void 0),yield function(m,w){let D=X(m);return D.persistence.runTransaction("Save bundle","readwrite",C=>D.Gr.saveBundleMetadata(C,w))}(s.localStore,c),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(c){return dr("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var NI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=md(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return DP(this.persistence,new Mg,t.initialUser,this.serializer)}Ga(t){return new Ag(xg.Zr,this.serializer)}Wa(t){return new Pg}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var qg=class n extends NI{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){yield Zm(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Ib(this.Ja.syncEngine),yield Fc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return DP(this.persistence,new Mg,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new KE(r,e.asyncQueue,t)}Ha(e,t){let r=new dE(t,this.persistence);return new uE(e.asyncQueue,r)}Ga(e){let t=db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Zn.withCacheSize(this.cacheSizeBytes):Zn.DEFAULT;return new lI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,RP(),rg(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Pg}},PI=class n extends qg{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return b(this,null,function*(){yield Zm(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof qu&&(this.sharedClientState.syncEngine={no:c9.bind(null,t),ro:d9.bind(null,t),io:h9.bind(null,t),Qi:u9.bind(null,t),eo:a9.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>b(this,null,function*(){yield l9(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=RP();if(!qu.D(t))throw new z(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qu(t,e.asyncQueue,r,e.clientId,e.initialUser)}},bb=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>u1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=i9.bind(null,this.syncEngine),yield II(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new CI}()}createDatastore(t){let r=md(t.databaseInfo.databaseId),i=function(o){return new mI(o)}(t.databaseInfo);return function(o,a,c,u){return new wI(o,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new EI(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>u1(this.syncEngine,r,0),function(){return Og.D()?new Og:new pI}())}createSyncEngine(t,r){return function(s,o,a,c,u,d,h){let p=new RI(s,o,a,c,u,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=X(s);q("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Oc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function h1(n,e=10240){let t=0;return{read(){return b(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return b(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var Mc=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):pt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var OI=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Pt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return b(this,null,function*(){return this.metadata.promise})}Ua(){return b(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return b(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new SI(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return b(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return b(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return b(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var FI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return b(this,null,function*(){let o=X(i),a={documents:s.map(h=>nd(o.serializer,h))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,ke.emptyPath(),a,s.length),u=new Map;c.forEach(h=>{let p=v5(o.serializer,h);u.set(p.key.toString(),p)});let d=[];return s.forEach(h=>{let p=u.get(h.toString());se(!!p),d.push(p)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ws(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=ee.fromPath(r);this.mutations.push(new Zu(i,this.precondition(i)))}),yield function(r,i){return b(this,null,function*(){let s=X(r),o={writes:i.map(a=>rd(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,ke.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ie();t=le.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(le.min())?dt.exists(!1):dt.updateTime(t):dt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(le.min()))throw new z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return dt.updateTime(t)}return dt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var VI=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new ad(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>b(this,null,function*(){let e=new FI(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!hd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!nP(t)}return!1}};var LI=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=sg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){q("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Pt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Lc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function X0(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield CP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function f1(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Db(n);q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>a1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>a1(e.remoteStore,i)),n._onlineComponents=e})}function Db(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield X0(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;dr("Error using user provided cache. Falling back to memory cache: "+t),yield X0(n,new NI)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield X0(n,new NI);return n._offlineComponents})}function sm(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield f1(n,n._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield f1(n,new bb))),n._onlineComponents})}function $P(n){return Db(n).then(e=>e.persistence)}function Cb(n){return Db(n).then(e=>e.localStore)}function zP(n){return sm(n).then(e=>e.remoteStore)}function Tb(n){return sm(n).then(e=>e.syncEngine)}function p9(n){return sm(n).then(e=>e.datastore)}function Rc(n){return b(this,null,function*(){let e=yield sm(n),t=e.eventManager;return t.onListen=K5.bind(null,e.syncEngine),t.onUnlisten=Y5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Q5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Z5.bind(null,e.syncEngine),t})}function g9(n){return n.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield $P(n),t=yield zP(n);return e.setNetworkEnabled(!0),function(i){let s=X(i);return s.L_.delete(0),yd(s)}(t)}))}function m9(n){return n.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield $P(n),t=yield zP(n);return e.setNetworkEnabled(!1),function(i){return b(this,null,function*(){let s=X(i);s.L_.add(0),yield Oc(s),s.q_.set("Offline")})}(t)}))}function y9(n,e){let t=new Pt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s,o){return b(this,null,function*(){try{let a=yield function(u,d){let h=X(u);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new z(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Lc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield Cb(n),e,t)})),t.promise}function qP(n,e,t={}){let r=new Pt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,u){let d=new Mc({next:p=>{d.Za(),o.enqueueAndForget(()=>mb(s,h));let m=p.docs.has(a);!m&&p.fromCache?u.reject(new z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?u.reject(new z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new cd(Pc(a.path),d,{includeMetadataChanges:!0,_a:!0});return gb(s,h)}(yield Rc(n),n.asyncQueue,e,t,r)})),r.promise}function v9(n,e){let t=new Pt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s,o){return b(this,null,function*(){try{let a=yield Rg(i,s,!0),c=new zg(s,a.Ts),u=c.ma(a.documents),d=c.applyChanges(u,!1);o.resolve(d.snapshot)}catch(a){let c=Lc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield Cb(n),e,t)})),t.promise}function HP(n,e,t={}){let r=new Pt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,u){let d=new Mc({next:p=>{d.Za(),o.enqueueAndForget(()=>mb(s,h)),p.fromCache&&c.source==="server"?u.reject(new z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),h=new cd(a,d,{includeMetadataChanges:!0,_a:!0});return gb(s,h)}(yield Rc(n),n.asyncQueue,e,t,r)})),r.promise}function w9(n,e){let t=new Mc(e);return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s){X(i).Y_.add(s),s.next()}(yield Rc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s){X(i).Y_.delete(s)}(yield Rc(n),t)}))}}function _9(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?iP().encode(o):o,function(d,h){return new OI(d,h)}(function(d,h){if(d instanceof Uint8Array)return h1(d,h);if(d instanceof ArrayBuffer)return h1(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,md(e));n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){f9(yield Tb(n),i,r)}))}function E9(n,e){return n.asyncQueue.enqueue(()=>b(this,null,function*(){return function(r,i){let s=X(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield Cb(n),e)}))}function GP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var p1=new Map;function Sb(n,e,t){if(!t)throw new z(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ab(n,e,t,r){if(e===!0&&r===!0)throw new z(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function g1(n){if(!ee.isDocumentKey(n))throw new z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function m1(n){if(ee.isDocumentKey(n))throw new z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function om(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ie()}function Pe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=om(n);throw new z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function WP(n,e){if(e<=0)throw new z(F.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Hg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ab("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Eo=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new eE;switch(r.type){case"firstParty":return new iE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=p1.get(t);r&&(q("ComponentProvider","Removing Datastore"),p1.delete(t),r.terminate())}(this),Promise.resolve()}};function KP(n,e,t,r={}){var i;let s=(n=Pe(n,Eo))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&dr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ct.MOCK_USER;else{a=wC(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ct(u)}n._authCredentials=new tE(new ig(a,c))}}var zt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ze=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Nr=class n extends zt{constructor(e,t,r){super(e,t,Pc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ze(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function xb(n,e,...t){if(n=rt(n),Sb("collection","path",e),n instanceof Eo){let r=ke.fromString(e,...t);return m1(r),new Nr(n,null,r)}{if(!(n instanceof Ze||n instanceof Nr))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ke.fromString(e,...t));return m1(r),new Nr(n.firestore,null,r)}}function QP(n,e){if(n=Pe(n,Eo),Sb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new zt(n,null,function(r){return new hr(ke.emptyPath(),r)}(e))}function vd(n,e,...t){if(n=rt(n),arguments.length===1&&(e=sg.newId()),Sb("doc","path",e),n instanceof Eo){let r=ke.fromString(e,...t);return g1(r),new Ze(n,null,new ee(r))}{if(!(n instanceof Ze||n instanceof Nr))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ke.fromString(e,...t));return g1(r),new Ze(n.firestore,n instanceof Nr?n.converter:null,new ee(r))}}function Mb(n,e){return n=rt(n),e=rt(e),(n instanceof Ze||n instanceof Nr)&&(e instanceof Ze||e instanceof Nr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Rb(n,e){return n=rt(n),e=rt(e),n instanceof zt&&e instanceof zt&&n.firestore===e.firestore&&pd(n._query,e._query)&&n.converter===e.converter}var Gg=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ad(this,"async_queue_retry"),this.Vu=()=>{let r=rg();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=rg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=rg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Pt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Is(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw pt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=bI.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ie()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function jI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var UI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Pt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var YP=-1,ot=class extends Eo{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Gg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Gg(e),this._firestoreClient=void 0,yield e}})}};function qt(n){if(n._terminated)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ZP(n),n._firestoreClient}function ZP(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,u,d){return new hE(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,GP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new LI(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function JP(n,e){dr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return eO(n,bb.provider,{build:r=>new qg(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function XP(n){return b(this,null,function*(){dr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();eO(n,bb.provider,{build:t=>new PI(t,e.cacheSizeBytes)})})}function eO(n,e,t){if((n=Pe(n,ot))._firestoreClient||n._terminated)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new z(F.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},ZP(n)}function tO(n){if(n._initialized&&!n._terminated)throw new z(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Pt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{yield function(r){return b(this,null,function*(){if(!hs.D())return Promise.resolve();let i=r+"main";yield hs.delete(i)})}(db(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function nO(n){return function(t){let r=new Pt;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return n9(yield Tb(t),r)})),r.promise}(qt(n=Pe(n,ot)))}function rO(n){return g9(qt(n=Pe(n,ot)))}function iO(n){return m9(qt(n=Pe(n,ot)))}function sO(n,e){let t=qt(n=Pe(n,ot)),r=new UI;return _9(t,n._databaseId,e,r),r}function oO(n,e){return E9(qt(n=Pe(n,ot)),e).then(t=>t?new zt(n,null,t.query):null)}var Vr=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(yt.fromBase64String(e))}catch(t){throw new z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var vi=class{constructor(e){this._methodName=e}};var Io=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}};var ld=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var I9=/^__.*__$/,BI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new vs(e,this.data,t,this.fieldTransforms)}},Wg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new fr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function aO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ie()}}var Kg=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(aO(this.Cu)&&I9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},$I=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||md(e)}Qu(e,t,r,i=!1){return new Kg({Cu:e,methodName:t,qu:r,path:gt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function To(n){let e=n._freezeSettings(),t=md(n._databaseId);return new $I(n._databaseId,!!e.ignoreUndefinedProperties,t)}function am(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Pb("Data must be an object, but it was:",o,r);let a=uO(r,o),c,u;if(s.merge)c=new Bn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let p=WI(e,h,t);if(!o.contains(p))throw new z(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);hO(d,p)||d.push(p)}c=new Bn(d),u=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=o.fieldTransforms;return new BI(new rn(a),c,u)}var ud=class n extends vi{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function cO(n,e,t){return new Kg({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var zI=class n extends vi{_toFieldTransform(e){return new vo(e.path,new ms)}isEqual(e){return e instanceof n}},qI=class n extends vi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=cO(this,e,!0),r=this.Ku.map(s=>So(s,t)),i=new mi(r);return new vo(e.path,i)}isEqual(e){return e instanceof n&&ey(this.Ku,e.Ku)}},HI=class n extends vi{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=cO(this,e,!0),r=this.Ku.map(s=>So(s,t)),i=new yi(r);return new vo(e.path,i)}isEqual(e){return e instanceof n&&ey(this.Ku,e.Ku)}},GI=class n extends vi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new ys(e.serializer,Q1(e.serializer,this.$u));return new vo(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function kb(n,e,t,r){let i=n.Qu(1,e,t);Pb("Data must be an object, but it was:",i,r);let s=[],o=rn.empty();Co(r,(c,u)=>{let d=Ob(e,c,t);u=rt(u);let h=i.Nu(d);if(u instanceof ud)s.push(d);else{let p=So(u,h);p!=null&&(s.push(d),o.set(d,p))}});let a=new Bn(s);return new Wg(o,a,i.fieldTransforms)}function Nb(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[WI(e,r,t)],c=[i];if(s.length%2!=0)throw new z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(WI(e,s[p])),c.push(s[p+1]);let u=[],d=rn.empty();for(let p=a.length-1;p>=0;--p)if(!hO(u,a[p])){let m=a[p],w=c[p];w=rt(w);let D=o.Nu(m);if(w instanceof ud)u.push(m);else{let C=So(w,D);C!=null&&(u.push(m),d.set(m,C))}}let h=new Bn(u);return new Wg(d,h,o.fieldTransforms)}function lO(n,e,t,r=!1){return So(t,n.Qu(r?4:3,e))}function So(n,e){if(dO(n=rt(n)))return Pb("Unsupported field value:",e,n),uO(n,e);if(n instanceof vi)return function(r,i){if(!aO(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=So(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Q1(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=st.fromDate(r);return{timestampValue:Ic(i.serializer,s)}}if(r instanceof st){let s=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ic(i.serializer,s)}}if(r instanceof Io)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Vr)return{bytesValue:sP(i.serializer,r._byteString)};if(r instanceof Ze){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:cb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ld)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return ab(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${om(r)}`)}(n,e)}function uO(n,e){let t={};return R1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(n,(r,i)=>{let s=So(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function dO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof st||n instanceof Io||n instanceof Vr||n instanceof Ze||n instanceof vi||n instanceof ld)}function Pb(n,e,t){if(!dO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=om(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function WI(n,e,t){if((e=rt(e))instanceof pr)return e._internalPath;if(typeof e=="string")return Ob(n,e);throw Qg("Field path arguments must be of type string or ",n,!1,void 0,t)}var b9=new RegExp("[~\\*/\\[\\]]");function Ob(n,e,t){if(e.search(b9)>=0)throw Qg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pr(...e.split("."))._internalPath}catch{throw Qg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Qg(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new z(F.INVALID_ARGUMENT,a+n+c)}function hO(n,e){return n.some(t=>t.isEqual(e))}var bo=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new KI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(cm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},KI=class extends bo{data(){return super.data()}};function cm(n,e){return typeof e=="string"?Ob(n,e):e instanceof pr?e._internalPath:e._delegate._internalPath}function fO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var dd=class{},Do=class extends dd{};function Ei(n,e,...t){let r=[];e instanceof dd&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof QI).length,a=s.filter(c=>c instanceof Yg).length;if(o>1||o>0&&a>0)throw new z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Yg=class n extends Do{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return bO(e._query,t),new zt(e.firestore,e.converter,CE(e._query,t))}_parse(e){let t=To(e.firestore);return function(s,o,a,c,u,d,h){let p;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){v1(h,d);let m=[];for(let w of h)m.push(y1(c,s,w));p={arrayValue:{values:m}}}else p=y1(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||v1(h,d),p=lO(a,o,h,d==="in"||d==="not-in");return Te.create(u,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function pO(n,e,t){let r=e,i=cm("where",n);return Yg._create(i,r,t)}var QI=class n extends dd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:$e.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)bO(o,c),o=CE(o,c)}(e._query,t),new zt(e.firestore,e.converter,CE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var YI=class n extends Do{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mo(s,o)}(e._query,this._field,this._direction);return new zt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new hr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function gO(n,e="asc"){let t=e,r=cm("orderBy",n);return YI._create(r,t)}var Zg=class n extends Do{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new zt(e.firestore,e.converter,gg(e._query,this._limit,this._limitType))}};function mO(n){return WP("limit",n),Zg._create("limit",n,"F")}function yO(n){return WP("limitToLast",n),Zg._create("limitToLast",n,"L")}var Jg=class n extends Do{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=IO(e,this.type,this._docOrFields,this._inclusive);return new zt(e.firestore,e.converter,function(i,s){return new hr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function vO(...n){return Jg._create("startAt",n,!0)}function wO(...n){return Jg._create("startAfter",n,!1)}var Xg=class n extends Do{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=IO(e,this.type,this._docOrFields,this._inclusive);return new zt(e.firestore,e.converter,function(i,s){return new hr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function _O(...n){return Xg._create("endBefore",n,!1)}function EO(...n){return Xg._create("endAt",n,!0)}function IO(n,e,t,r){if(t[0]=rt(t[0]),t[0]instanceof bo)return function(s,o,a,c,u){if(!c)throw new z(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of pc(s))if(h.field.isKeyField())d.push(go(o,c.key));else{let p=c.data.field(h.field);if(tm(p))throw new z(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let m=h.field.canonicalString();throw new z(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Or(d,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=To(n.firestore);return function(o,a,c,u,d,h){let p=o.explicitOrderBy;if(d.length>p.length)throw new z(F.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let w=0;w<d.length;w++){let D=d[w];if(p[w].field.isKeyField()){if(typeof D!="string")throw new z(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof D}`);if(!sb(o)&&D.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${D}' contains a slash.`);let C=o.path.child(ke.fromString(D));if(!ee.isDocumentKey(C))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let N=new ee(C);m.push(go(a,N))}else{let C=lO(c,u,D);m.push(C)}}return new Or(m,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function y1(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sb(e)&&t.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ke.fromString(t));if(!ee.isDocumentKey(r))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return go(n,new ee(r))}if(t instanceof Ze)return go(n,t._key);throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${om(t)}.`)}function v1(n,e){if(!Array.isArray(n)||n.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bO(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var kc=class{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Co(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nt(o.doubleValue));return new ld(s)}convertGeoPoint(e){return new Io(nt(e.latitude),nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=rb(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ku(e));default:return null}}convertTimestamp(e){let t=gi(e);return new st(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ke.fromString(e);se(mP(r));let i=new ps(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(t)||pt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function lm(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ZI=class extends kc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,t)}};var pi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xn=class extends bo{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new us(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(cm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},us=class extends Xn{data(e={}){return super.data(e)}},gr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new pi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new us(this._firestore,this._userDataWriter,r.key,r,new pi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new us(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new us(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:D9(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function D9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ie()}}function Fb(n,e){return n instanceof Xn&&e instanceof Xn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof gr&&e instanceof gr&&n._firestore===e._firestore&&Rb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function DO(n){n=Pe(n,Ze);let e=Pe(n.firestore,ot);return qP(qt(e),n._key).then(t=>Ub(e,n,t))}var wi=class extends kc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Vr(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ze(this.firestore,null,t)}};function CO(n){n=Pe(n,Ze);let e=Pe(n.firestore,ot),t=qt(e),r=new wi(e);return y9(t,n._key).then(i=>new Xn(e,r,n._key,i,new pi(i!==null&&i.hasLocalMutations,!0),n.converter))}function TO(n){n=Pe(n,Ze);let e=Pe(n.firestore,ot);return qP(qt(e),n._key,{source:"server"}).then(t=>Ub(e,n,t))}function SO(n){n=Pe(n,zt);let e=Pe(n.firestore,ot),t=qt(e),r=new wi(e);return fO(n._query),HP(t,n._query).then(i=>new gr(e,r,n,i))}function AO(n){n=Pe(n,zt);let e=Pe(n.firestore,ot),t=qt(e),r=new wi(e);return v9(t,n._query).then(i=>new gr(e,r,n,i))}function xO(n){n=Pe(n,zt);let e=Pe(n.firestore,ot),t=qt(e),r=new wi(e);return HP(t,n._query,{source:"server"}).then(i=>new gr(e,r,n,i))}function Vb(n,e,t){n=Pe(n,Ze);let r=Pe(n.firestore,ot),i=lm(n.converter,e,t);return jc(r,[am(To(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,dt.none())])}function Lb(n,e,t,...r){n=Pe(n,Ze);let i=Pe(n.firestore,ot),s=To(i),o;return o=typeof(e=rt(e))=="string"||e instanceof pr?Nb(s,"updateDoc",n._key,e,t,r):kb(s,"updateDoc",n._key,e),jc(i,[o.toMutation(n._key,dt.exists(!0))])}function MO(n){return jc(Pe(n.firestore,ot),[new ws(n._key,dt.none())])}function RO(n,e){let t=Pe(n.firestore,ot),r=vd(n),i=lm(n.converter,e);return jc(t,[am(To(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,dt.exists(!1))]).then(()=>r)}function jb(n,...e){var t,r,i;n=rt(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||jI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(jI(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,u,d;if(n instanceof Ze)u=Pe(n.firestore,ot),d=Pc(n._key.path),c={next:h=>{e[o]&&e[o](Ub(u,n,h))},error:e[o+1],complete:e[o+2]};else{let h=Pe(n,zt);u=Pe(h.firestore,ot),d=h._query;let p=new wi(u);c={next:m=>{e[o]&&e[o](new gr(u,p,h,m))},error:e[o+1],complete:e[o+2]},fO(n._query)}return function(p,m,w,D){let C=new Mc(D),N=new cd(m,C,w);return p.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return gb(yield Rc(p),N)})),()=>{C.Za(),p.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return mb(yield Rc(p),N)}))}}(qt(u),d,a,c)}function kO(n,e){return w9(qt(n=Pe(n,ot)),jI(e)?e:{next:e})}function jc(n,e){return function(r,i){let s=new Pt;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return J5(yield Tb(r),i,s)})),s.promise}(qt(n),e)}function Ub(n,e,t){let r=t.docs.get(e._key),i=new wi(n);return new Xn(n,i,e._key,r,new pi(t.hasPendingWrites,t.fromCache),e.converter)}var C9={maxAttempts:5};var em=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=To(e)}set(e,t,r){this._verifyNotCommitted();let i=cs(e,this._firestore),s=lm(i.converter,t,r),o=am(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,dt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=cs(e,this._firestore),o;return o=typeof(t=rt(t))=="string"||t instanceof pr?Nb(this._dataReader,"WriteBatch.update",s._key,t,r,i):kb(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,dt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=cs(e,this._firestore);return this._mutations=this._mutations.concat(new ws(t._key,dt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function cs(n,e){if((n=rt(n)).firestore!==e)throw new z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var JI=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=To(t)}get(t){let r=cs(t,this._firestore),i=new ZI(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return ie();let o=s[0];if(o.isFoundDocument())return new bo(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new bo(this._firestore,i,r._key,null,r.converter);throw ie()})}set(t,r,i){let s=cs(t,this._firestore),o=lm(s.converter,r,i),a=am(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=cs(t,this._firestore),a;return a=typeof(r=rt(r))=="string"||r instanceof pr?Nb(this._dataReader,"Transaction.update",o._key,r,i,s):kb(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=cs(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=cs(e,this._firestore),r=new wi(this._firestore);return super.get(e).then(i=>new Xn(this._firestore,r,t._key,i._document,new pi(!1,!1),t.converter))}};function NO(n,e,t){n=Pe(n,ot);let r=Object.assign(Object.assign({},C9),t);return function(s){if(s.maxAttempts<1)throw new z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new Pt;return s.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){let u=yield p9(s);new VI(s.asyncQueue,u,a,o,c).au()})),c.promise}(qt(n),i=>e(new JI(n,i)),r)}function PO(){return new ud("deleteField")}function OO(){return new zI("serverTimestamp")}function FO(...n){return new qI("arrayUnion",n)}function VO(...n){return new HI("arrayRemove",n)}function um(n){return new GI("increment",n)}(function(e,t=!0){(function(i){Nc=i})(IC),ul(new xs("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ot(new nE(r.getProvider("auth-internal")),new oE(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ps(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ti(mN,"4.7.3",e),Ti(mN,"4.7.3","esm2017")})();var T9="firebase",S9="10.14.1";Ti(T9,S9,"app");var A9=(n,e)=>{let t=e?[e]:bC(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Ao=class{constructor(){return A9(x9)}},x9="app-check";function Bb(){}var dm=class{zone;delegate;constructor(e,t=vy){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},$b=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Bb,{},Bb,Bb)),t.pipe(wt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},hm=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new dm(Zone.current)),this.insideAngular=t.run(()=>new dm(Zone.current,Go)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(B(Ce))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function M9(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function xn(n){return R9(M9())(n)}function R9(n){return function(t){return t=t.lift(new $b(n.ngZone)),t.pipe(nr(n.outsideAngular),$n(n.insideAngular))}}var k9=new Map,N9={activated:!1,tokenObservers:[]},P9={initialized:!1,enabled:!1};function mr(n){return k9.get(n)||Object.assign({},N9)}function zO(){return P9}var O9="https://content-firebaseappcheck.googleapis.com/v1";var F9="exchangeDebugToken",jO={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Ire=24*60*60*1e3;var qb=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new Jm,this.pending.promise.catch(t=>{}),yield V9(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Jm,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function V9(n){return new Promise(e=>{setTimeout(e,n)})}var L9={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ds=new EC("appCheck","AppCheck",L9);function qO(n){if(!mr(n).activated)throw Ds.create("use-before-activation",{appName:n.name})}function HO(r,i){return b(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw Ds.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Ds.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(m){throw Ds.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ds.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let h=Number(d[1])*1e3,p=Date.now();return{token:u.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}})}function GO(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${O9}/projects/${t}/apps/${r}:${F9}?key=${i}`,body:{debug_token:e}}}var j9="firebase-app-check-database",U9=1,Hb="firebase-app-check-store";var fm=null;function B9(){return fm||(fm=new Promise((n,e)=>{try{let t=indexedDB.open(j9,U9);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ds.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Hb,{keyPath:"compositeKey"})}}}catch(t){e(Ds.create("storage-open",{originalErrorMessage:t?.message}))}}),fm)}function $9(n,e){return z9(q9(n),e)}function z9(n,e){return b(this,null,function*(){let r=(yield B9()).transaction(Hb,"readwrite"),s=r.objectStore(Hb).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var u;a(Ds.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function q9(n){return`${n.options.appId}-${n.name}`}var Gb=new $d("@firebase/app-check");function zb(n,e){return Bd()?$9(n,e).catch(t=>{Gb.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function WO(){return zO().enabled}function KO(){return b(this,null,function*(){let n=zO();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var H9={error:"UNKNOWN_ERROR"};function G9(n){return vC.encodeString(JSON.stringify(n),!1)}function Wb(n,e=!1){return b(this,null,function*(){let t=n.app;qO(t);let r=mr(t),i=r.token,s;if(i&&!wd(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(wd(c)?i=c:yield zb(t,void 0))}if(!e&&i&&wd(i))return{token:i.token};let o=!1;if(WO()){r.exchangeTokenPromise||(r.exchangeTokenPromise=HO(GO(t,yield KO()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield zb(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield mr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?Gb.warn(c.message):Gb.error(c),s=c}let a;return i?s?wd(i)?a={token:i.token,internalError:s}:a=BO(s):(a={token:i.token},r.token=i,yield zb(t,i)):a=BO(s),o&&Y9(t,a),a})}function W9(n){return b(this,null,function*(){let e=n.app;qO(e);let{provider:t}=mr(e);if(WO()){let r=yield KO(),{token:i}=yield HO(GO(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function K9(n,e,t,r){let{app:i}=n,s=mr(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&wd(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),UO(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>UO(n))}function QO(n,e){let t=mr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function UO(n){let{app:e}=n,t=mr(e),r=t.tokenRefresher;r||(r=Q9(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Q9(n){let{app:e}=n;return new qb(()=>b(this,null,function*(){let t=mr(e),r;if(t.token?r=yield Wb(n,!0):r=yield Wb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=mr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},jO.RETRIAL_MIN_WAIT,jO.RETRIAL_MAX_WAIT)}function Y9(n,e){let t=mr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function wd(n){return n.expireTimeMillis-Date.now()>0}function BO(n){return{token:G9(H9),error:n}}var Kb=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=mr(this.app);for(let t of e)QO(this.app,t.next);return Promise.resolve()}};function Z9(n,e){return new Kb(n,e)}function J9(n){return{getToken:e=>Wb(n,e),getLimitedUseToken:()=>W9(n),addTokenListener:e=>K9(n,"INTERNAL",e),removeTokenListener:e=>QO(n.app,e)}}var X9="@firebase/app-check",e8="0.8.8";var t8="app-check",$O="app-check-internal";function n8(){ul(new xs(t8,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Z9(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($O).initialize()})),ul(new xs($O,n=>{let e=n.getProvider("app-check").getImmediate();return J9(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ti(X9,e8)}n8();var r8=["localhost","0.0.0.0","127.0.0.1"],Pre=typeof window<"u"&&r8.includes(window.location.hostname);var i8="firebase",s8="10.14.1";vr.registerVersion(i8,s8,"app-compat");var o8=["ngOnDestroy"],JO=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(o8.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(u=>t.run(()=>u)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,u)=>o.then(d=>{let h=d?.(...u);return r?.spy?.apply&&r.spy.apply(s,u,h),h})})})});var Qb=class{constructor(e){return e}},Uc=new W("angularfire2.app.options"),pm=new W("angularfire2.app.name");function gm(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=vr.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>vr.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;a8("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Qb(o)}var a8=(n,...e)=>{qw()&&typeof console<"u"&&console[n](...e)};function mm(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return c8(i,o)||(ZO("error",`${e} was already initialized on the ${t} Firebase App with different settings.${l8?" You may need to reload as Firebase is not HMR aware.":""}`),ZO("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function c8(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var l8=typeof module<"u"&&!!module.hot,ZO=(n,...e)=>{qw()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var Yb=new W("angularfire2.auth.use-emulator"),Zb=new W("angularfire2.auth.settings"),Jb=new W("angularfire2.auth.tenant-id"),Xb=new W("angularfire2.auth.langugage-code"),eD=new W("angularfire2.auth.use-device-language"),tD=new W("angularfire.auth.persistence"),nD=(n,e,t,r,i,s,o,a)=>mm(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[u,d]of Object.entries(o))c.settings[u]=d;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]),XO=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,u,d,h,p,m){let w=new Ue,D=ae(void 0).pipe($n(o.outsideAngular),Ye(()=>s.runOutsideAngular(()=>import("./chunk-GA2XKJLQ.js"))),oe(()=>gm(t,s,r)),oe(C=>nD(C,s,a,u,d,h,c,p)),Yo({bufferSize:1,refCount:!1}));if(Yi(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ae(null);else{D.pipe(Rn()).subscribe();let C=D.pipe(Ye(L=>L.getRedirectResult().then(H=>H,()=>null)),xn,Yo({bufferSize:1,refCount:!1})),N=D.pipe(Ye(L=>new ge(H=>({unsubscribe:s.runOutsideAngular(()=>L.onAuthStateChanged(Z=>H.next(Z),Z=>H.error(Z),()=>H.complete()))})))),V=D.pipe(Ye(L=>new ge(H=>({unsubscribe:s.runOutsideAngular(()=>L.onIdTokenChanged(Z=>H.next(Z),Z=>H.error(Z),()=>H.complete()))}))));this.authState=C.pipe(Eh(N),nr(o.outsideAngular),$n(o.insideAngular)),this.user=C.pipe(Eh(V),nr(o.outsideAngular),$n(o.insideAngular)),this.idToken=this.user.pipe(Ye(L=>L?Se(L.getIdToken()):ae(null))),this.idTokenResult=this.user.pipe(Ye(L=>L?Se(L.getIdTokenResult()):ae(null))),this.credential=yl(C,w,this.authState.pipe(At(L=>!L))).pipe(oe(L=>L?.user?L:null),nr(o.outsideAngular),$n(o.insideAngular))}return JO(this,D,s,{spy:{apply:(C,N,V)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&V.then(L=>w.next(L))}}})}static \u0275fac=function(r){return new(r||n)(B(Uc),B(pm,8),B(Bt),B(Ce),B(hm),B(Yb,8),B(Zb,8),B(Jb,8),B(Xb,8),B(eD,8),B(tD,8),B(Ao,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var h8="@firebase/firestore-compat",f8="0.3.38";function cD(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new z("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eF(){if(typeof Uint8Array>"u")throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function tF(){if(!k1())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ym=class n{constructor(e){this._delegate=e}static fromBase64String(e){return tF(),new n(Vr.fromBase64String(e))}static fromUint8Array(e){return eF(),new n(Vr.fromUint8Array(e))}toBase64(){return tF(),this._delegate.toBase64()}toUint8Array(){return eF(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function rD(n){return p8(n,["next","error","complete"])}function p8(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var iD=class{enableIndexedDbPersistence(e,t){return JP(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return XP(e._delegate)}clearIndexedDbPersistence(e){return tO(e._delegate)}},vm=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ps||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){KP(this._delegate,e,t,r)}enableNetwork(){return rO(this._delegate)}disableNetwork(){return iO(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,Ab("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return nO(this._delegate)}onSnapshotsInSync(e){return kO(this._delegate,e)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new zc(this,xb(this._delegate,e))}catch(t){throw gn(t,"collection()","Firestore.collection()")}}doc(e){try{return new Lr(this,vd(this._delegate,e))}catch(t){throw gn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ko(this,QP(this._delegate,e))}catch(t){throw gn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return NO(this._delegate,t=>e(new wm(this,t)))}batch(){return qt(this._delegate),new _m(new em(this._delegate,e=>jc(this._delegate,e)))}loadBundle(e){return sO(this._delegate,e)}namedQuery(e){return oO(this._delegate,e).then(t=>t?new ko(this,t):null)}},Bc=class extends kc{constructor(e){super(),this.firestore=e}convertBytes(e){return new ym(new Vr(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Lr.forKey(t,this.firestore,null)}};function g8(n){w1(n)}var wm=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Bc(e)}get(e){let t=xo(e);return this._delegate.get(t).then(r=>new Mo(this._firestore,new Xn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=xo(e);return r?(cD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=xo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=xo(e);return this._delegate.delete(t),this}},_m=class{constructor(e){this._delegate=e}set(e,t,r){let i=xo(e);return r?(cD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=xo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=xo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},$c=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new us(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ro(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new Bc(e),t),i.set(t,s)),s}};$c.INSTANCES=new WeakMap;var Lr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ze(t._delegate,r,new ee(e)))}static forKey(e,t,r){return new n(t,new Ze(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new zc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new zc(this.firestore,xb(this._delegate,e))}catch(t){throw gn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=rt(e),e instanceof Ze?Mb(this._delegate,e):!1}set(e,t){t=cD("DocumentReference.set",t);try{return t?Vb(this._delegate,e,t):Vb(this._delegate,e)}catch(r){throw gn(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?Lb(this._delegate,e):Lb(this._delegate,e,t,...r)}catch(i){throw gn(i,"updateDoc()","DocumentReference.update()")}}delete(){return MO(this._delegate)}onSnapshot(...e){let t=nF(e),r=rF(e,i=>new Mo(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return jb(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=CO(this._delegate):e?.source==="server"?t=TO(this._delegate):t=DO(this._delegate),t.then(r=>new Mo(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($c.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function gn(n,e,t){return n.message=n.message.replace(e,t),n}function nF(n){for(let e of n)if(typeof e=="object"&&!rD(e))return e;return{}}function rF(n,e){var t,r;let i;return rD(n[0])?i=n[0]:rD(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var Mo=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Lr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Fb(this._delegate,e._delegate)}},Ro=class extends Mo{data(e){let t=this._delegate.data(e);return this._delegate._converter||_1(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ko=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Bc(e)}where(e,t,r){try{return new n(this.firestore,Ei(this._delegate,pO(e,t,r)))}catch(i){throw gn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Ei(this._delegate,gO(e,t)))}catch(r){throw gn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Ei(this._delegate,mO(e)))}catch(t){throw gn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Ei(this._delegate,yO(e)))}catch(t){throw gn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Ei(this._delegate,vO(...e)))}catch(t){throw gn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Ei(this._delegate,wO(...e)))}catch(t){throw gn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Ei(this._delegate,_O(...e)))}catch(t){throw gn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Ei(this._delegate,EO(...e)))}catch(t){throw gn(t,"endAt()","Query.endAt()")}}isEqual(e){return Rb(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=AO(this._delegate):e?.source==="server"?t=xO(this._delegate):t=SO(this._delegate),t.then(r=>new _d(this.firestore,new gr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=nF(e),r=rF(e,i=>new _d(this.firestore,new gr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return jb(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($c.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},sD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Ro(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},_d=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ko(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ro(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Ro(this._firestore,r))})}isEqual(e){return Fb(this._delegate,e._delegate)}},zc=class n extends ko{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Lr(this.firestore,e):null}doc(e){try{return e===void 0?new Lr(this.firestore,vd(this._delegate)):new Lr(this.firestore,vd(this._delegate,e))}catch(t){throw gn(t,"doc()","CollectionReference.doc()")}}add(e){return RO(this._delegate,e).then(t=>new Lr(this.firestore,t))}isEqual(e){return Mb(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter($c.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function xo(n){return Pe(n,Ze)}var oD=class n{constructor(...e){this._delegate=new pr(...e)}static documentId(){return new n(gt.keyField().canonicalString())}isEqual(e){return e=rt(e),e instanceof pr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var aD=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=OO();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=PO();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=FO(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=VO(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=um(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var m8={Firestore:vm,GeoPoint:Io,Timestamp:st,Blob:ym,Transaction:wm,WriteBatch:_m,DocumentReference:Lr,DocumentSnapshot:Mo,Query:ko,QueryDocumentSnapshot:Ro,QuerySnapshot:_d,CollectionReference:zc,FieldPath:oD,FieldValue:aD,setLogLevel:g8,CACHE_SIZE_UNLIMITED:YP};function y8(n,e){n.INTERNAL.registerComponent(new xs("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},m8)))}function v8(n){y8(n,(e,t)=>new vm(e,t,new iD)),n.registerVersion(h8,f8)}v8(vr);function w8(n,e=Go){return new ge(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function iF(n,e){return w8(n,e)}function _8(n,e){return iF(n,e).pipe(Wr(void 0),_l(),oe(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function dD(n,e){return iF(n,e).pipe(oe(t=>({payload:t,type:"query"})))}var Em=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=aF(r,t);return new bm(i,s,this.afs)}snapshotChanges(){return _8(this.ref,this.afs.schedulers.outsideAngular).pipe(xn)}valueChanges(e={}){return this.snapshotChanges().pipe(oe(({payload:t})=>e.idField?te(M({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Se(this.ref.get(e)).pipe(xn)}};function Im(n,e){return dD(n,e).pipe(Wr(void 0),_l(),oe(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let u=s.find(h=>h.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));u&&JSON.stringify(u.doc.metadata)===JSON.stringify(a.metadata)||!u&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function sF(n,e,t){return Im(n,t).pipe(Ps((r,i)=>E8(r,i.map(s=>s.payload),e),[]),wl(),oe(r=>r.map(i=>({type:i.type,payload:i}))))}function E8(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=I8(n,r))}),n}function lD(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function I8(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return lD(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return lD(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lD(n,e.oldIndex,1);break}return n}function oF(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var bm=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Im(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(oe(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Wr(void 0),_l(),At(([r,i])=>i.length>0||!r),oe(([,r])=>r),xn)}auditTrail(e){return this.stateChanges(e).pipe(Ps((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=oF(e);return sF(this.query,t,this.afs.schedulers.outsideAngular).pipe(xn)}valueChanges(e={}){return dD(this.query,this.afs.schedulers.outsideAngular).pipe(oe(t=>t.payload.docs.map(r=>e.idField?te(M({},r.data()),{[e.idField]:r.id}):r.data())),xn)}get(e){return Se(this.query.get(e)).pipe(xn)}add(e){return this.ref.add(e)}doc(e){return new Em(this.ref.doc(e),this.afs)}},uD=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Im(this.query,this.afs.schedulers.outsideAngular).pipe(xn):Im(this.query,this.afs.schedulers.outsideAngular).pipe(oe(t=>t.filter(r=>e.indexOf(r.type)>-1)),At(t=>t.length>0),xn)}auditTrail(e){return this.stateChanges(e).pipe(Ps((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=oF(e);return sF(this.query,t,this.afs.schedulers.outsideAngular).pipe(xn)}valueChanges(e={}){return dD(this.query,this.afs.schedulers.outsideAngular).pipe(oe(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),xn)}get(e){return Se(this.query.get(e)).pipe(xn)}},b8=new W("angularfire2.enableFirestorePersistence"),D8=new W("angularfire2.firestore.persistenceSettings"),C8=new W("angularfire2.firestore.settings"),T8=new W("angularfire2.firestore.use-emulator");function aF(n,e=t=>t){return{query:e(n),ref:n}}var cF=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,u,d,h,p,m,w,D,C,N,V){this.schedulers=c;let L=gm(t,a,r),H=d;h&&nD(L,a,p,w,D,C,m,N),[this.firestore,this.persistenceEnabled$]=mm(`${L.name}.firestore`,"AngularFirestore",L.name,()=>{let Z=a.runOutsideAngular(()=>L.firestore());if(s&&Z.settings(s),H&&Z.useEmulator(...H),i&&!Yi(o)){let Q=()=>{try{return Se(Z.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),ae(!1)}};return[Z,a.runOutsideAngular(Q)]}else return[Z,ae(!1)]},[s,H,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=aF(i,r),a=this.schedulers.ngZone.run(()=>s);return new bm(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new uD(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new Em(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(B(Uc),B(pm,8),B(b8,8),B(C8,8),B(Bt),B(Ce),B(hm),B(D8,8),B(T8,8),B(XO,8),B(Yb,8),B(Zb,8),B(Jb,8),B(Xb,8),B(eD,8),B(tD,8),B(Ao,8))};static \u0275prov=K({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var lF=(()=>{let e=class e{constructor(r){this.store=r,this.TABLE_NAME="user_speech",this.uuid=$0()}setRecordUid(r){r&&(this.uuid=r)}getRecordUid(){return this.uuid}getRecord(r){return this.store.collection(this.TABLE_NAME).doc(r).valueChanges()}incrementHits(r="Navi"){return b(this,null,function*(){this.store.doc(`${r}/config`).set({numberOfHits:um(1)},{merge:!0}).catch(i=>console.error("Error incrementing hit counter : ",i))})}saveAppScore(r,i="Navi"){return b(this,null,function*(){r.updated_at=new Date,this.store.doc(`${i}/config`).set(r,{merge:!0}).catch(s=>(console.error("Error upserting : ",s),s))})}getAppdata(r="Navi"){return this.store.doc(`${r}/config`).valueChanges()}saveSpeech(r){return b(this,null,function*(){return r.id=this.uuid,r.updated_at=new Date,this.store.collection(this.TABLE_NAME).doc(this.uuid).set(r,{merge:!0}).then(()=>this.uuid).catch(i=>(console.error("Error upserting : ",i),i.status)),this.uuid})}};e.\u0275fac=function(i){return new(i||e)(B(cF))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var x8=(n,e)=>({"btn-success pulse-animation":n,"btn-danger":e});function M8(n,e){if(n&1){let t=Dn();R(0,"p"),U(1,"Try saying \u{1F5E3}\uFE0F "),R(2,"span",18),U(3),P(),U(4," or "),R(5,"span",14),U(6),P(),U(7,". Say "),R(8,"span",18),U(9),P(),U(10," to clean the board. "),R(11,"button",19),Me("click",function(){We(t);let i=ue();return Ke(i.toggleListening())}),ce(12,"i",20),P(),U(13,"\xA0 "),R(14,"a",21),Me("click",function(){We(t);let i=ue();return Ke(i.copyVoiceSmithLink())}),R(15,"i",22),Me("click",function(){We(t);let i=ue();return Ke(i.copyVoiceSmithLink())}),P(),U(16,"\xA0 "),R(17,"span",23),U(18),P()(),U(19,"\xA0 "),R(20,"a",24),ce(21,"i",25),P(),R(22,"span",26),U(23,"Desktop-only / "),R(24,"span",27),U(25,"Mobile-limited"),P()()()}if(n&2){let t=ue();j(3),Ve(t.START_COMMAND),j(3),Ve(t.STOP_COMMAND),j(3),Ve(t.CLEAR_COMMAND),j(2),J("ngClass",Lf(7,x8,t.listening,!t.listening)),j(),J("ngClass",t.listening?"fa-microphone":"fa-microphone-slash"),j(3),J("ngClass",t.copied?"fa-solid":"fa-regular"),j(3),Ve(t.getRecordUid())}}function R8(n,e){n&1&&(R(0,"span",29),U(1,"Listening"),P())}function k8(n,e){n&1&&(R(0,"span",29),U(1,"Stopped"),P())}function N8(n,e){if(n&1&&(R(0,"p"),U(1,"Transcript will appear in the space below as your host speaks. "),ve(2,R8,2,0,"span",28)(3,k8,2,0,"span",28),P()),n&2){let t=ue();j(2),J("ngIf",t.listening),j(),J("ngIf",!t.listening)}}function P8(n,e){if(n&1&&(R(0,"span",30),U(1),R(2,"span",13),U(3),P()()),n&2){let t=e.$implicit,r=ue();J("ngClass",r.isLeader(t.key)?"badge badge-border-success":"badge badge-border-danger"),j(),ft("",t.key,"\xA0"),j(2),Ve(t.value)}}var Dm=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.zone=r,this.witaiService=i,this.messaging=s,this.database=o,this.route=a,this.router=c,this.START_COMMAND="start listening",this.STOP_COMMAND="stop listening",this.CLEAR_COMMAND="clear",this.MAX_SPEECH_TIME=5,this.test_command="start listening",this.fillerWords=["oh","ok","okay","um","uh","it's like","like","you know","basically","actually","so","right","I mean","well","just","er","anyway","now","let me think","haha","bla","really","and","well"],this.probableFillers=["fine","good","awesome"],this.unwantedVerbs=["am","is","are","were","do","did","done","doing","go","going","worked","work","working"],this.listening=!1,this.speaking=!1,this.fullTranscript=`Hi there! \u{1F44B} I am nA'vI
I would love to hear your story.
\u{1F3A4} Tell me something about yourself ..

Say "${this.START_COMMAND}" to begin \u{1F680}`,this.interimTranscript="",this.currentTerm="",this.verbsMap=new Map,this.leaderwordsMap=new Map,this.fillerWordsMap=new Map,this.goodbadwordsMap=new Map,this.sentenseClarity={good:0,bad:0},this.previousTime=0,this.totalWords=0,this.prevSentense="",this.isMobile=!1,this.minutes=this.MAX_SPEECH_TIME,this.seconds=0,this.speechTime="",this.voiceMode=!1,this.copied=!1,this.totalScore=0,this.appData={numberOfHits:0,highestScore:0},this.leadershipWords=["lead","vision","empower","collaborate","adapt","communicate","integrate","mentore","mentor","account","innovate","innovation","resilient","resilience","delegate","resolve","include","strategic","motivate","empower","encourage","impact","growth","deliver","delivering","collaboration"],this.createTimer=()=>{this.timerInterval=setInterval(()=>{this.updateTime()},1e3),this.speechTime=""},this.updateTime=()=>{this.seconds>0?this.seconds--:this.minutes>0?(this.minutes--,this.seconds=59):(console.debug("Time's up!"),this.stopListening()),this.speechTime=`${this.minutes}m ${this.seconds}s`},this.clearTimer=()=>{this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.minutes=this.MAX_SPEECH_TIME,this.seconds=0},this.myTask=()=>{let d=performance.now(),h=d-this.previousTime;h!=d&&h>5,requestAnimationFrame(this.myTask)},this.isMobile=Le.isMobileBrowser();let u=Le.getQueryParam(a,"vid");o.setRecordUid(u),this.initCompromiseNLP(),u?(this.voiceMode=!1,this.fullTranscript="",this.database.getRecord(u).subscribe(d=>{if(d){let h=d.message;this.updateFullText(h)}})):(this.voiceMode=!0,this.initAnnyang())}setStartCommand(r){this.START_COMMAND=r}setStopCommand(r){this.STOP_COMMAND=r}setClearCommand(r){this.CLEAR_COMMAND=r}getRecordUid(){return this.database.getRecordUid().split("-")[0]}getVoiceSmithLink(){return`${he.host}/voicesmith?vid=${this.database.getRecordUid()}`}copyVoiceSmithLink(){return b(this,null,function*(){try{yield navigator.clipboard.writeText(this.getVoiceSmithLink()),this.copied=!0}catch{console.error("Failed to copy the link")}})}isLeader(r){return this.leaderwordsMap.get(r)!=null}analyseClarity(r){return b(this,null,function*(){if(r){let i=r.trim().split(" ").length;i>=5&&i<=20?(this.sentenseClarity.good++,this.totalScore++):this.sentenseClarity.bad++,this.totalWords+=i}})}analyseVerbs(r){return b(this,null,function*(){let i=r.match("#Verb").out("array");return i.forEach(s=>{let o=s.toLowerCase();this.unwantedVerbs.includes(o)||(this.verbsMap.has(o)?this.verbsMap.set(o,this.verbsMap.get(o)+1):this.verbsMap.set(o,1),this.totalScore++)}),i.length})}analyseFillers(r){return b(this,null,function*(){let i=r.lookup(this.fillerWords).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.fillerWordsMap.has(o)?this.fillerWordsMap.set(o,this.fillerWordsMap.get(o)+1):this.fillerWordsMap.set(o,1),this.totalScore=this.totalScore-2,this.goodbadwordsMap.set(o,this.fillerWordsMap.get(o))}),i.length>0})}analyseLeaedershipQualities(r){return b(this,null,function*(){let i=r.compute("root").lookup(this.leadershipWords,{form:"root"}).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.leaderwordsMap.has(o)?this.leaderwordsMap.set(o,this.leaderwordsMap.get(o)+1):this.leaderwordsMap.set(o,1),this.totalScore=this.totalScore+3,this.goodbadwordsMap.set(o,this.leaderwordsMap.get(o))}),i.length})}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"SpeechToText":this.analyseClarity(i.payload);let s=this.nlp(i.payload);this.analyseFillers(s),this.analyseVerbs(s),this.analyseLeaedershipQualities(s),this.voiceMode&&(this.witaiService.getIntent(i.payload).then(o=>{}),this.database.saveSpeech({message:i.payload}));break;default:break}}),this.database.getAppdata().subscribe(r=>{this.appData=r})}initCompromiseNLP(){this.loadExternalScript("https://unpkg.com/compromise").then(()=>{this.nlp=window.nlp,this.nlp&&this.nlp.compile(this.leadershipWords)})}initAnnyang(){this.loadExternalScript("assets/annyang.js").then(()=>{this.initializeSpeechRecognition()})}stopListening(){this.listening&&this.voiceMode&&this.database.saveSpeech({message:this.STOP_COMMAND}),this.listening=!1,this.interimTranscript="",this.clearTimer(),this.totalScore>this.appData.highestScore&&this.database.saveAppScore({highestScore:this.totalScore})}startListening(){this.listening||this.database.incrementHits(),this.fullTranscript="",this.listening=!0,this.clearMaps(),this.createTimer(),this.totalScore=0}clearCommand(){this.fullTranscript="",this.interimTranscript="",this.clearMaps(),this.totalScore=0}toggleListening(){this.listening=!this.listening,this.listening?this.startListening():this.stopListening()}clearMaps(){this.leaderwordsMap.clear(),this.verbsMap.clear(),this.fillerWordsMap.clear(),this.goodbadwordsMap.clear(),this.previousTime=0,this.totalWords=0,this.sentenseClarity={good:0,bad:0},this.timerInterval&&(clearInterval(this.timerInterval),this.speechTime="")}initializeSpeechRecognition(){if(this.annyang=window.annyang,this.annyang){let r={"Stop listening":()=>{this.zone.run(()=>{this.stopListening()})},"Start listening":()=>{this.zone.run(()=>{this.startListening()})},Clear:()=>{this.zone.run(()=>{this.clearCommand()})}};this.annyang.addCallback("result",(i,s,o)=>{if(this.listening){let a=this.previousTime?o-this.previousTime>=300:!1;this.previousTime=o,this.zone.run(()=>{if(this.interimTranscript="",s&&i[0]){if(this.isMobile){let u=i[0].trim();if(this.prevSentense==u)return;this.prevSentense=u}let c=i[0]+(a?". ":" ");this.updateFullText(c)}else this.interimTranscript+=i})}}),this.annyang.addCallback("soundstart",()=>{console.debug("sound detected"),this.zone.run(()=>{this.speaking=!0})}),this.annyang.addCommands(r),this.recognition=this.annyang.getSpeechRecognizer(),this.recognition?(this.recognition.interimResults=!this.isMobile,this.annyang.start({autoRestart:!0,continuous:!0}),console.debug("Speech recognition started")):console.error("Voice is not supported in this browser.")}else console.error("Voice is not supported in this browser.")}loadExternalScript(r){return new Promise((i,s)=>{let o=document.createElement("script");o.src=r,o.type="application/javascript",o.onload=()=>{i()},o.onerror=()=>{s("Script load error")},document.body.appendChild(o)})}updateFullText(r){this.voiceMode?r.includes(this.START_COMMAND)||(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r):r.includes(this.CLEAR_COMMAND)?this.clearCommand():r.includes(this.STOP_COMMAND)?this.stopListening():(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r,this.listening=!0)}};e.\u0275fac=function(i){return new(i||e)($(Ce),$(hN),$(en),$(lF),$(Sn),$(jn))},e.\u0275cmp=Ae({type:e,selectors:[["app-voice-smith"]],decls:45,vars:16,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-8"],[4,"ngIf"],["id","voice-output"],[1,"float-end"],[1,"fa-regular","fa-clock"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"small"],[1,"badge","badge-border-info"],[1,"badge","text-bg-light"],[1,"badge","badge-border-danger"],[1,"badge","badge-border-primary"],[1,"card-text"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","badge-border-success"],[1,"btn","rounded-circle","justify-content-center","align-items-center",3,"click","ngClass"],[1,"fas",3,"ngClass"],["target","_blank",1,"text-decoration-none",3,"click"],[1,"fa-clipboard",3,"click","ngClass"],[1,"badge","rounded-pill","text-bg-primary"],["href","https://www.merriam-webster.com/word-of-the-day","target","_blank",1,""],[1,"fa-solid","fa-lightbulb",2,"color","#efbc06"],[1,"d-sm-none","badge","badge-border-success"],[1,"text-strike-black"],["class","badge text-bg-primary",4,"ngIf"],[1,"badge","text-bg-primary"],[3,"ngClass"]],template:function(i,s){i&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1),ve(4,M8,26,10,"p",3)(5,N8,4,2,"p",3),P(),R(6,"div",4),U(7),R(8,"em"),U(9),P()(),R(10,"div",5),U(11),R(12,"span"),U(13),P(),U(14,"\xA0"),ce(15,"i",6),U(16,"\xA0"),R(17,"span"),U(18),P()()(),R(19,"div",7)(20,"div",8)(21,"div",9)(22,"h5",10),U(23,"Strength Board : "),R(24,"span",11),U(25),P()(),R(26,"p")(27,"span",12),U(28,"Actions\xA0"),R(29,"span",13),U(30),P()(),U(31," | "),R(32,"span",14),U(33,"Fillers\xA0"),R(34,"span",13),U(35),P()(),U(36," | "),R(37,"span",15),U(38,"Clarity\xA0"),R(39,"span",13),U(40),P()()(),ce(41,"hr"),R(42,"div",16),ve(43,P8,4,3,"span",17),kt(44,"keyvalue"),P()()()()()()),i&2&&(j(4),J("ngIf",s.voiceMode),j(),J("ngIf",!s.voiceMode),j(2),ft("",s.fullTranscript," "),j(2),Ve(s.interimTranscript),j(2),Ff("Highest : ",s.appData.highestScore," | Tried : ",s.appData.numberOfHits," | "),j(2),ft("Words : ",s.totalWords,""),j(5),Ve(s.speechTime),j(7),Ve(s.totalScore),j(5),Ve(s.verbsMap.size),j(5),Ve(s.fillerWordsMap.size),j(5),Ff("",s.sentenseClarity.good,"/",s.sentenseClarity.bad,""),j(3),J("ngForOf",On(44,14,s.goodbadwordsMap)))},dependencies:[Ra,Zt,Jt,Ki],styles:["#voice-output[_ngcontent-%COMP%]{font-size:1.4em;line-height:1.6;border:1px solid #ccc;padding:20px;min-height:200px;background-color:#f9f9f9;margin-top:10px;white-space:pre-wrap}.typing-cursor[_ngcontent-%COMP%]{border-right:2px solid black;animation:_ngcontent-%COMP%_blink 1s steps(1) infinite}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #007bffb3}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 0 #007bffb3}50%{transform:scale(1.1);box-shadow:0 0 10px #00ff7bb3}to{transform:scale(1);box-shadow:0 0 #007bffb3}}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}.badge-border-primary[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-primary);color:var(--bs-primary)!important}.badge-border-danger[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-danger);color:var(--bs-danger)!important}.badge-border-info[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-info);color:var(--bs-info)!important}.text-strike-black[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#000}"]});let n=e;return n})();var hD=(()=>{let e=class e extends Yn{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=o,this.homePageContent="Loading..",this.imgLayout="LayoutMix",this.firstHeading=!1,this.firstPara=!1,this.loadNewWidget=!1,this.usersFileAlreadyLoaded=!1,this.messaging.event$.subscribe(a=>{switch(a.cmd){case"UserContext":this.titleService.setTitle(re.ghUser.name),this.usersFileAlreadyLoaded||(re.YOUR_READ_ME?this.homePageContent=re.YOUR_READ_ME:this.githubService.getInstalledAccessToken()?this.githubService.getInstalledContent(re.ghUserLoaded).then(u=>{this.homePageContent=u}):this.githubService.getReadMeContent(re.ghUserLoaded).then(u=>{this.homePageContent=u}).catch(u=>{console.log(re.ghUserLoaded+" not available")}));break;case"UserDirectory":break;default:break}})}ngAfterViewInit(){}ngOnInit(){if(re.INTERNAL_FOLDERS.includes(this.basePath)){this.router.navigate(["/i"+Le.getUrl(this.router)]);return}this.routerFileUrl&&this.githubService.getMdFileContent(this.basePath,this.routerFileUrl).then(r=>{this.homePageContent=r,this.usersFileAlreadyLoaded=!0}).catch(r=>this.homePageContent=r),this.titleService.setTitle("John Doe"),this.markdownService.renderer.html=r=>(Le.getFirstLine(r).includes("Widget")&&(this.loadNewWidget=!0),this.imgLayout=="<!-- Theme:Classic, ImgAlign:Left Widget:NAVI-->"||this.imgLayout,r),this.markdownService.renderer.heading=(r,i,s)=>i==1&&!this.firstHeading?(this.firstHeading=!0,`<h1 class="first-heading">${s}</h1>`):it.prototype.heading.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.paragraph=r=>r.startsWith("<a")&&r.endsWith("</a>")?r:this.firstHeading&&!this.firstPara?(this.firstPara=!0,`<p class="first-para">${r}<p>`):`<p>${r}<p>`,this.markdownService.renderer.link=(r,i,s)=>it.prototype.link.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.image=(r,i,s)=>`<img src="${r}" class="img-fluid mx-auto d-block" alt="${s}">`}onMarkdownReady(){if(this.applyLastHeadingStyle(),this.loadNewWidget){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(Dm);r.appendChild(i.location.nativeElement)}}}applyLastHeadingStyle(){let r=document.querySelectorAll("h1");if(r.length>1){let i=r[r.length-1];i.classList.add("cta");let s=i.nextElementSibling;for(;s;)s.classList.add("cta"),s=s.nextElementSibling}}};e.\u0275fac=function(i){return new(i||e)($(Xt),$(Vt),$(Tn),$(bn))},e.\u0275cmp=Ae({type:e,selectors:[["app-ghhome"]],features:[ut],decls:5,vars:1,consts:[["mdContent",""],[1,"container"],[1,"row","justify-content-center"],[1,"container",3,"ready","data"]],template:function(i,s){if(i&1){let o=Dn();R(0,"div",1)(1,"div",2,0)(3,"markdown",3),Me("ready",function(){return We(o),Ke(s.onMarkdownReady())}),U(4,`
        `),P()()()}i&2&&(j(3),J("data",s.homePageContent))},dependencies:[Kn],styles:[".badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}"]});let n=e;return n})();function O8(n,e){if(n&1&&(R(0,"div",6)(1,"div",7)(2,"a",8),ce(3,"img",9),P(),R(4,"div",10)(5,"a",11)(6,"h5",12),U(7),P()()()()()),n&2){let t=e.$implicit,r=ue();j(2),J("href",r.galaryLinks.get(t.key),ht),j(),Pn("alt",t.key),J("src",t.value,ht),j(2),J("href",r.galaryLinks.get(t.key),ht),j(2),Ve(t.key)}}var uF=(()=>{let e=class e extends Yn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.markdownContent="Loading..",this.galaryLinks=new Map,this.galaryImgs=new Map,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.titleService.setTitle(re.ghUser.name),this.githubService.getReadMeContent(this.routerFileUrl).then(c=>this.markdownContent=c);break;default:break}})}ngOnInit(){this.markdownService.renderer.link=(r,i,s)=>(this.galaryLinks.set(s,r),it.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.image=(r,i,s)=>(this.galaryImgs.set(s,r),s)}onMarkdownReady(){}};e.\u0275fac=function(i){return new(i||e)($(Xt),$(Vt),$(Tn))},e.\u0275cmp=Ae({type:e,selectors:[["app-crazy-coupons"]],features:[ut],decls:8,vars:4,consts:[[1,"container","mt-5"],[1,"row"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"container"],[1,"row","justify-content-center"],[3,"ready","data"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],["target","_blank","rel","noopener noreferrer",1,"text-decoration-none",3,"href"],[1,"card-title"]],template:function(i,s){i&1&&(R(0,"div",0)(1,"div",1),ve(2,O8,8,5,"div",2),kt(3,"keyvalue"),P()(),R(4,"div",3)(5,"div",4)(6,"markdown",5),Me("ready",function(){return s.onMarkdownReady()}),U(7,`
        `),P()()()),i&2&&(j(2),J("ngForOf",On(3,2,s.galaryImgs)),j(4),J("data",s.markdownContent))},dependencies:[Zt,Kn,Ki],styles:['@import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css";.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#333;margin-top:4px;text-align:left;line-height:1.2}.card-body[_ngcontent-%COMP%]{padding:8px}.card[_ngcontent-%COMP%]{border:none}']});let n=e;return n})();var Cm=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.el=i}ngOnInit(){let r=this.renderer.createElement("script");r.src="https://giscus.app/client.js",r.setAttribute("data-repo","publichomepage/discuss"),r.setAttribute("data-repo-id","R_kgDONHZY8A"),r.setAttribute("data-category","Announcements"),r.setAttribute("data-category-id","DIC_kwDONHZY8M4CjyZp"),r.setAttribute("data-mapping","pathname"),r.setAttribute("data-reactions-enabled","1"),r.setAttribute("data-emit-metadata","1"),r.setAttribute("data-theme","light"),r.setAttribute("data-lang","en"),r.setAttribute("crossorigin","anonymous"),r.async=!0;let i=this.el.nativeElement.querySelector("#discuss-pane");this.renderer.appendChild(i,r),window.addEventListener("message",this.handleMessage.bind(this))}ngOnDestroy(){window.removeEventListener("message",this.handleMessage.bind(this))}handleMessage(r){if(r.origin!=="https://giscus.app"||!(typeof r.data=="object"&&r.data.giscus))return;let i=r.data.giscus;console.log("GiscusData"+JSON.stringify(r.data))}};e.\u0275fac=function(i){return new(i||e)($(In),$(It))},e.\u0275cmp=Ae({type:e,selectors:[["app-giscus-widget"]],decls:1,vars:0,consts:[["id","discuss-pane"]],template:function(i,s){i&1&&ce(0,"div",0)}});let n=e;return n})();var Ed=(()=>{let e=class e{};e.NEW_USER_CHANNEL="https://discord.com/api/webhooks/1161881028474966077/1NlJyAYOMZbQTZmbVL_WAEm4S_whyKQ275RsOf3PHYqF7naHYmx9z9lFNW2kqzlLr0I-",e.WEB_ERROR_CHANNEL="https://discord.com/api/webhooks/1161880477750272000/I-DJecqOhonKLsy75jP6iVeGxpqxMuu8WZ8wgBd31o4rZzF49vXnjKo9Tv0p5S6HTm7j",e.PUBLISHING_HELP_CHANNEL="https://discord.com/api/webhooks/1161873930991190078/FHGUfffC-VfjGOrLv9OU0EAkmeqM0-3o6phOYtg3cGkjG1E57_CPSAhQ0_pJO6AYNLC7",e.INTERVIEW_ASSISTANCE_CHANNEL="https://discord.com/api/webhooks/1177388543023272059/Tqt3tk3Bm3tvd6aZksnQ9-crhr8qWTby6HEWguT3nb5DG-10Y7zV3vh84D7utAdTvL17",e.DEFAULT_PAGE_COUNT=777,e.DEFAULT_PAGE_LIKES=17,e.MAX_SIDE_PANEL_VIDEO_LINKS=5,e.MAX_QUESTION_TIMEOUT=2500,e.JUDGE_0_SUBMISSION_URL="https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=true&fields=*",e.DRAFT_HEADER="<!-- Draft -->",e.DRAFT_PAGE_LINK="/faqs/draft_content",e.CODING_QUESTIONS_CONTENT_HEADER="<!-- question -->",e.CODING_SOLUTIONS_CONTENT_HEADER="<!-- correct_solution -->",e.CODING_ONE_TEST_CASE_CONTENT_HEADER="<!-- runOneTestCaseHandler -->",e.CODING_ALL_TESTS_CONTENT_HEADER="<!-- runAllTestCases -->",e.SELECTIFY_ANSWER_CONTENT_HEADER="<!-- Answer[ ]?=(.*)-->",e.ASSESSMENT_FOLDER_HEADER="<!-- Assessment Folder : (?<name>\\S+) -->",e.ASSESSMENT_KNOWLEDGE_CHECK_HEADER=/<!-- Knowledge Check | (\w+) | (\S+) | (\w+) -->/g,e.ASSESSMENT_QUESTIONS_FILE_NAME_SYNTAX="(?<qId>\\d+)-(?<qName>\\S+).md",e.SELECT_OPTIONS_HEADER="<!-- Select options -->";let n=e;return n})();var hF=(()=>{let e=class e{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustResourceUrl(r)}};e.\u0275fac=function(i){return new(i||e)($(Xs,16))},e.\u0275pipe=ji({name:"safe",type:e,pure:!0});let n=e;return n})();var V8=(n,e)=>({"fa-play":n,"fa-pause":e});function L8(n,e){if(n&1&&(R(0,"li")(1,"a",21),U(2),P()()),n&2){let t=e.$implicit,r=ue(2);j(),Of("href","/i/",t,"",ht),j(),Ve(r.getFileName(t))}}function j8(n,e){if(n&1&&(R(0,"div",14)(1,"div",15),U(2),R(3,"a",16),ce(4,"i",17),P()(),R(5,"div",18)(6,"div",19)(7,"div",8)(8,"ul",20),ve(9,L8,3,3,"li",10),P()()()()()),n&2){let t=ue();j(2),ft("",t.folderName," "),j(7),J("ngForOf",t.filesAvailable)}}function U8(n,e){if(n&1&&(R(0,"div",22)(1,"div",23)(2,"p"),U(3,"Try these challenge questions and get better on this topic."),P(),R(4,"a",24),ce(5,"i",25),U(6,"\xA0Knowledge Check"),P()()()),n&2){let t=ue();j(4),Pn("href",t.assementLink,ht)}}function B8(n,e){n&1&&(R(0,"div")(1,"b"),U(2,"Practice questions"),P()())}function $8(n,e){if(n&1&&(R(0,"li")(1,"a",26),U(2),P()()),n&2){let t=e.$implicit;j(),Pn("href",t,ht),j(),Ve(t.split("problems")[1])}}function z8(n,e){n&1&&(R(0,"div",27)(1,"b"),U(2,"Video reference"),P()())}function q8(n,e){if(n&1&&(R(0,"div",28),ce(1,"iframe",29),kt(2,"safe"),P()),n&2){let t=e.$implicit;j(),J("src",On(2,1,t),Sf)}}function H8(n,e){if(n&1){let t=Dn();R(0,"a",30),Me("click",function(){We(t);let i=ue();return Ke(i.speakText())}),ce(1,"i",31),P()}if(n&2){let t=ue();j(),J("ngClass",Lf(1,V8,!t.isPaused,t.isPaused))}}var Id=(()=>{let e=class e extends Yn{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=G(bn),this.filesAvailable=[],this.availableYoutubeLinks=new Set,this.leetcodeLinks=new Set,this.folderName="",this.readmeFileUrl="",this.assementLink="",this.speechContent=null,this.isPaused=!1,this.isSpeaking=!1,this.isDraftArticle=!1,this.loadPlugin=!1,this.firstLineProcessed=!1,this.hasSelectOptionsHeader=!1,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"UserContext":this.folderName=this.articleFolderName;let c=Le.getRouterUrl(this.router,this.basePath+"/"+this.folderName);c.endsWith(".md")||(c=c+".md"),this.readmeFileUrl=Le.getGhUserFilePath(re.ghUserLoaded,`${this.folderName}/${c}`,this.githubService.hasInstalledAccessToken());break;case"UserDirectory":this.githubService.getGhDirectoryContents(this.githubUser,!0,this.getFolderName()).then(u=>{this.filesAvailable=u.files.filter(d=>!d.includes("README.md"))});break;default:break}}),this.speechSir=window.speechSynthesis}getFolderName(){let r=this.routerFileUrl.substring(this.routerFileUrl.lastIndexOf("/")+1);return r.endsWith("md")?super.getFolderName():r}ngOnInit(){this.router.events.subscribe(r=>{r.type==15&&this.ngOnDestroy()}),this.markdownService.renderer.html=r=>{if(this.processFirstLine(r),this.isDraftArticle)return"";let i=r.match(Ed.ASSESSMENT_FOLDER_HEADER);if(i!=null&&i.groups&&i.groups.name){let s=i.groups.name;return this.assementLink=s.includes("http")?s:`/assessments/${s}`,""}return this.hasSelectOptionsHeader=r.includes(Ed.SELECT_OPTIONS_HEADER),r},this.markdownService.renderer.list=(r,i,s)=>{if(this.hasSelectOptionsHeader){let o=r.split(`
`).map(a=>`<option>${a.trim()}</option>`).join("");return this.hasSelectOptionsHeader=!1,`<select class="form-select form-select-lg mb-3">${o}</select>`}return it.prototype.list.call(this.markdownService.renderer,r,i,s)}}processFirstLine(r){if(this.firstLineProcessed)return;let i=Le.parseHtmlLine(r);switch(i.PageType){case Ed.DRAFT_HEADER:{this.isDraftArticle=!0;break}case"Assessment":break;default:break}i.Widget=="NAVI"&&(this.loadPlugin=!0),this.firstLineProcessed=!0}speakText(){this.isPaused?this.resumeSpeech():this.isSpeaking?this.pauseSpeech():this.startSpeech()}startSpeech(){!this.isSpeaking&&this.speechContent!=null&&(this.speechSir.speak(this.speechContent),this.isSpeaking=!0)}pauseSpeech(){!this.isPaused&&this.isSpeaking&&(this.speechSir.pause(),this.isPaused=!0)}resumeSpeech(){this.isPaused&&this.isSpeaking&&(this.speechSir.resume(),this.isPaused=!1)}onMarkdownReady(){if(this.availableYoutubeLinks=re.userContext.youtube_links,this.leetcodeLinks=re.userContext.leetcode_links,this.isDraftArticle)this.router.navigate([Ed.DRAFT_PAGE_LINK]);else if(this.router.navigate([this.router.url]),this.loadPlugin){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(Dm);r.appendChild(i.location.nativeElement)}}}speechReady(r){this.isDraftArticle||(this.speechContent=r?new SpeechSynthesisUtterance(r):null,this.speechContent!=null&&(this.speechContent.pitch=1,this.speechContent.rate=1,this.speechContent.volume=1,this.speechContent.lang="en-US"))}ngOnDestroy(){this.speechSir&&this.speechContent!=null&&this.speechSir.cancel()}getFileName(r){return this.folderName=="faqs"?Le.getFileNameWithoutCurrentFolder(r,this.folderName):Le.getFileName(r)}};e.\u0275fac=function(i){return new(i||e)($(Xt),$(Vt),$(Tn))},e.\u0275cmp=Ae({type:e,selectors:[["app-internal-articles"]],features:[ut],decls:16,vars:8,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"container",3,"ready","load","src"],[1,"col-lg-4"],["class","card mb-4 my-3",4,"ngIf"],["class","card my-3 text-center border-success",4,"ngIf"],[4,"ngIf"],[1,"text-truncate"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],["class","text-capitalize my-2",4,"ngIf"],["class","card mb-4",4,"ngFor","ngForOf"],["class","float",3,"click",4,"ngIf"],[1,"card","mb-4","my-3"],[1,"card-header","text-capitalize"],["href","/articles"],[1,"fa-solid","fa-magnifying-glass","float-right",2,"color","darkorange"],[1,"card-body","scrollable-card"],[1,"row"],[1,"list-unstyled","mb-0","text-capitalize"],[3,"href"],[1,"card","my-3","text-center","border-success"],[1,"card-body"],[1,"btn","btn-warning",3,"href"],[1,"fa-regular","fa-lightbulb"],["target","_blank",3,"href"],[1,"text-capitalize","my-2"],[1,"card","mb-4"],["width","100%","height","200","allowfullscreen","",1,"rounded-2",3,"src"],[1,"float",3,"click"],[1,"fa","my-float",3,"ngClass"]],template:function(i,s){i&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),Me("ready",function(){return s.onMarkdownReady()})("load",function(a){return s.speechReady(a)}),U(4,`
            `),P()(),R(5,"div",4),ve(6,j8,10,2,"div",5)(7,U8,7,1,"div",6)(8,B8,3,0,"div",7),R(9,"div",8)(10,"ul",9),ve(11,$8,3,2,"li",10),P()(),ve(12,z8,3,0,"div",11)(13,q8,3,3,"div",12),ce(14,"app-giscus-widget"),P()()(),ve(15,H8,2,4,"a",13)),i&2&&(j(3),J("src",s.readmeFileUrl),j(3),J("ngIf",s.folderName),j(),J("ngIf",s.assementLink),j(),J("ngIf",s.leetcodeLinks.size>0),j(3),J("ngForOf",s.leetcodeLinks),j(),J("ngIf",s.availableYoutubeLinks.size>0),j(),J("ngForOf",s.availableYoutubeLinks),j(2),J("ngIf",s.speechContent))},dependencies:[Ra,Zt,Jt,Kn,Cm,hF],styles:[".scrollable-card[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto}"]});let n=e;return n})();var fF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ae({type:e,selectors:[["app-roadmap"]],decls:37,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-4"],[1,"my-3"],[1,"step","step-active"],[1,"circle"],[1,"fa","fa-check"],[1,"title"],[1,"caption"],[1,"step"],[1,"circle",2,"background-color","green"],["target","_blank","href","https://youtube.com/shorts/-sNJ3WmU83E?feature=share"],[1,"fab","fa-youtube","fa-xl",2,"color","#ed302f"],[1,"circle",2,"background-color","yellowgreen"],["href","https://interviewdose.com/roadmap","target","_blank"]],template:function(i,s){i&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),U(4,"Roadmap"),P(),U(5," '"),R(6,"div",4)(7,"div")(8,"div",5),ce(9,"i",6),P()(),R(10,"div")(11,"div",7),U(12,"What's Next ?"),P(),R(13,"div",8),U(14,"Comming soon..."),P()()(),R(15,"div",9)(16,"div")(17,"div",10),U(18,"2"),P()(),R(19,"div")(20,"div",7)(21,"a",11),ce(22,"i",12),P(),U(23,"DeepPeek Search"),P(),R(24,"div",8),U(25,"DeepPeek AI search enabled in your pages"),P()()(),R(26,"div",9)(27,"div")(28,"div",13),U(29,"1"),P()(),R(30,"div")(31,"div",7),U(32,"Menifesting the World's simplest HomePage"),P(),R(33,"div",8),U(34,"This is THE simplest developer friendly webpage builder on earth today: Forked from "),R(35,"a",14),U(36,"https://interviewdose.com"),P()()()()()()())},styles:['.step[_ngcontent-%COMP%]{position:relative;min-height:1em;color:gray}.title[_ngcontent-%COMP%]{line-height:1.5em;font-weight:700}.caption[_ngcontent-%COMP%]{font-size:.8em}.step[_ngcontent-%COMP%] + .step[_ngcontent-%COMP%]{margin-top:1.5em}.step[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:static;height:0}.step[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){margin-left:1.5em;padding-left:1em}.circle[_ngcontent-%COMP%]{background:gray;position:relative;width:1.5em;height:1.5em;line-height:1.5em;border-radius:100%;color:#fff;text-align:center;box-shadow:0 0 0 3px #fff}.circle[_ngcontent-%COMP%]:after{content:" ";position:absolute;display:block;inset:1px 50%;height:100%;width:1px;transform:scaleY(2);transform-origin:50% -100%;background-color:#00000040;z-index:-1}.step[_ngcontent-%COMP%]:last-child   .circle[_ngcontent-%COMP%]:after{display:none}.step.step-active[_ngcontent-%COMP%]{color:#4285f4}.step.step-active[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{background-color:#4285f4}']});let n=e;return n})();var pF=(()=>{let e=class e{constructor(r){this.messaging=r,this.recognition=new webkitSpeechRecognition,this.isStoppedSpeechRecog=!1,this.text="",this.tempWords=""}init(){this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.addEventListener("result",r=>{var i=r.results[0][0].transcript;if(this.tempWords=i,i){let s={cmd:"speech",payload:i};this.messaging.send(s)}})}start(){this.isStoppedSpeechRecog=!1,this.recognition.start(),console.log("Speech recognition started"),this.recognition.addEventListener("end",()=>{this.isStoppedSpeechRecog?(this.recognition.stop(),console.log("End speech recognition")):(this.wordConcat(),this.recognition.start())})}stop(){this.isStoppedSpeechRecog=!0,this.wordConcat(),this.recognition.stop(),console.log("End speech recognition")}wordConcat(){this.text=this.text+" "+this.tempWords+".",this.tempWords=""}};e.\u0275fac=function(i){return new(i||e)(B(en))},e.\u0275prov=K({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var W8=["searchInput"],K8=n=>({transform:n});function Q8(n,e){n&1&&(R(0,"div",12),U(1,"Listening... "),R(2,"div",13)(3,"span",14),U(4,"Loading..."),P()()())}function Y8(n,e){n&1&&(R(0,"div",12),U(1,"Listening "),ce(2,"i",15),P())}function Z8(n,e){if(n&1&&(R(0,"div",16),ce(1,"i",17),U(2),P()),n&2){let t=ue();j(2),ft("\xA0",t.lastSpeechText,"")}}function J8(n,e){if(n&1&&(R(0,"h6",25),U(1),P()),n&2){let t=ue().ngIf;j(),ft(" ~ ",t.Category,"")}}function X8(n,e){if(n&1&&(Pw(0),R(1,"h2",22),U(2),P(),R(3,"i"),ve(4,J8,2,1,"h6",23),P(),ce(5,"a",24),Ow()),n&2){let t=e.ngIf,r=ue().$implicit,i=ue();j(2),Ve(t.File),j(2),J("ngIf",t.Category),j(),Pn("href",i.createClickableLink(r),ht)}}function e6(n,e){if(n&1){let t=Dn();R(0,"div",18)(1,"div",19),Me("mouseenter",function(){let i=We(t).$implicit,s=ue();return Ke(s.onCardHover(!0,i))})("mouseleave",function(){let i=We(t).$implicit,s=ue();return Ke(s.onCardHover(!1,i))}),R(2,"div",20),ve(3,X8,6,3,"ng-container",21),P()()()}if(n&2){let t=e.$implicit,r=ue();j(),Pn("id",t),J("ngStyle",Vf(3,K8,r.getRandomRotation(t))),j(2),J("ngIf",r.getFileNameWithCategory(t))}}var fD=(()=>{let e=class e extends Id{constructor(r,i,s,o,a){super(i,r,s),this.filterText="",this.lastSpeechText="",this.articleFound=!1,this.filteredFiles=[],this.cachedRotations={},this.userTyping=!1,this.ghuserName="",a.event$.subscribe(c=>{let u=c;switch(u.cmd){case"speech":this.articleFound=!1,this.filterText=u.payload?u.payload:"",this.lastSpeechText=this.filterText.substring(0,25),this.searchKey(),this.articleFound||(this.filterText="",this.filteredFiles=this.filesAvailable);break;case"UserDirectory":setTimeout(()=>{this.filteredFiles=this.filesAvailable},1e3);break;default:break}}),o.init(),o.start()}ngOnInit(){this.ghuserName=re.ghUserLoaded}onUserInput(){this.userTyping=!0}clickArticle(r){this.router.navigate(["/i"+r])}searchKey(){let r=this.filterText.trim().split(/\s+/).map(s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),i=new RegExp(r.join("|"),"i");this.filteredFiles=this.filterText===""?this.filesAvailable:this.filesAvailable.filter(s=>i.test(s)?(this.articleFound=!0,this.userTyping||this.searchInput.nativeElement.select(),!0):!1)}getRandomRotation(r){if(!this.cachedRotations[r]){let o=Math.random()*4+-2;this.cachedRotations[r]=`rotate(${o}deg)`}return this.cachedRotations[r]}onCardHover(r,i){let s=document.getElementById(i);s&&(r?s.style.transform="":s.style.transform=this.cachedRotations[i])}getFileNameWithCategory(r,i=!1){return Le.getFileNameWithCategory(r,i)}createClickableLink(r){let i=r.lastIndexOf(".md");return i!=-1&&(r=r.substring(0,i)),this.isHomePageGHUser?`/i/${r}`:`/${this.githubUser}/${r}`}};e.\u0275fac=function(i){return new(i||e)($(Vt),$(Xt),$(Tn),$(pF),$(en))},e.\u0275cmp=Ae({type:e,selectors:[["app-search-articles"]],viewQuery:function(i,s){if(i&1&&Ll(W8,7),i&2){let o;ba(o=Da())&&(s.searchInput=o.first)}},features:[ut],decls:15,vars:5,consts:[["searchInput",""],[1,"container","px-5"],[1,"row","mx-auto","mb-4","rounded-3","align-items-center","justify-content-center"],[1,"container-fluid","py-3","text-center"],[1,"display-4","fw-bold"],[1,"col-lg-6"],["class","fs-6 text-muted float-end",4,"ngIf"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type or Speak to search ...",1,"form-control","border","border-success",3,"ngModelChange","input","ngModel"],["class","fs-6 text-muted text-center",4,"ngIf"],[1,"row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"fs-6","text-muted","float-end"],["role","status",1,"spinner-border","spinner-border-sm","text-secondary"],[1,"sr-only"],[1,"fa-solid","fa-check",2,"color","#63E6BE"],[1,"fs-6","text-muted","text-center"],[1,"fa-brands","fa-searchengin"],[1,"col-md-3"],[1,"card","mb-4","border-primary","card-hover",3,"mouseenter","mouseleave","id","ngStyle"],[1,"card-body","text-success"],[4,"ngIf"],[1,"card-title","text-capitalize"],["class","card-subtitle text-muted text-end",4,"ngIf"],[1,"stretched-link",3,"href"],[1,"card-subtitle","text-muted","text-end"]],template:function(i,s){if(i&1){let o=Dn();R(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),U(4,"Search Articles"),P()(),R(5,"div",5),ve(6,Q8,5,0,"div",6)(7,Y8,3,0,"div",6),R(8,"div",7)(9,"input",8,0),Gi("ngModelChange",function(c){return We(o),Zs(s.filterText,c)||(s.filterText=c),Ke(c)}),Me("ngModelChange",function(){return We(o),Ke(s.searchKey())})("input",function(){return We(o),Ke(s.onUserInput())}),P()(),ve(11,Z8,3,1,"div",9),P()(),R(12,"div",10),ve(13,e6,4,5,"div",11),P(),ce(14,"app-giscus-widget"),P()}i&2&&(j(6),J("ngIf",!s.articleFound),j(),J("ngIf",s.articleFound),j(2),Hi("ngModel",s.filterText),j(2),J("ngIf",!s.articleFound),j(2),J("ngForOf",s.filteredFiles))},dependencies:[Zt,Jt,nM,Ua,gp,lu,Cm],styles:[".card-hover[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease,background-color .3s ease}.card-hover[_ngcontent-%COMP%]:hover{box-shadow:0 10px 20px #0000004d;background-color:silver}"]});let n=e;return n})();var t6=["scrollPanel"],n6=["iframeRef"];function r6(n,e){n&1&&(R(0,"h4",29),U(1,"Deep Search in your page"),P())}function i6(n,e){if(n&1&&ce(0,"option",30),n&2){let t=e.$implicit;J("value",t.name)}}function s6(n,e){if(n&1){let t=Dn();R(0,"iframe",31,2),Me("load",function(){We(t);let i=ue();return Ke(i.captureTextContent())}),P()}if(n&2){let t=ue();J("src",t.safeUrl,Sf)}}function o6(n,e){if(n&1&&(R(0,"div",32),U(1),P()),n&2){let t=ue();j(),Ve(t.iFramePlaceholder)}}function a6(n,e){if(n&1){let t=Dn();R(0,"div")(1,"b"),U(2,"Follow-up :\xA0"),P(),U(3),R(4,"i",39),Me("click",function(i){We(t);let s=ue(2).$implicit,o=ue();return Ke(o.setNewQuestion(s.followUp?s.followUp:"",i))}),P()()}if(n&2){let t=ue(2).$implicit;j(3),Ve(t.followUp)}}function c6(n,e){if(n&1){let t=Dn();R(0,"div")(1,"button",36),Me("click",function(){We(t);let i=ue(2);return Ke(i.aiUserLiked("like"))}),ce(2,"i",37),P(),R(3,"button",36),Me("click",function(){We(t);let i=ue(2);return Ke(i.aiUserLiked("clipped"))}),ce(4,"i",38),P(),ve(5,a6,5,1,"div",35),P()}if(n&2){let t=ue().$implicit;j(5),J("ngIf",t.followUp)}}function l6(n,e){if(n&1&&(R(0,"div",33),ce(1,"markdown",34),ve(2,c6,6,1,"div",35),P()),n&2){let t=e.$implicit;j(),J("data",t.content),j(),J("ngIf",t.from!="You")}}function u6(n,e){if(n&1&&(R(0,"div",40)(1,"div",41)(2,"div",42),ce(3,"div",43),P(),R(4,"div",44),ce(5,"div",43),P()()()),n&2){let t=ue();j(3),Nw(t.firstStyle),j(2),Nw(t.secondStyle)}}function d6(n,e){if(n&1&&(R(0,"option",30),U(1),P()),n&2){let t=e.$implicit;J("value",t.value),j(),ft(" ",t.label," ")}}function h6(n,e){if(n&1&&(R(0,"option",30),U(1),P()),n&2){let t=e.$implicit;J("value",t.value),j(),ft(" ",t.label," ")}}var gF=(()=>{let e=class e{captureTextContent(){setTimeout(()=>{let r=this.iframeRef?.nativeElement;try{if(r&&r.contentWindow&&r.contentWindow.document)try{console.log("Inside iframe content window");let i=r.contentWindow.document.body.innerText;if(i&&this.contextLoaded==!1){this.contextLoaded=!0;let s=Date.now();this.addDeepContext(i).subscribe(o=>{this.requestTimer=(Date.now()-s)/1e3,console.log("Added the page content to search"),setTimeout(()=>{this.newQuestion.trim()==""&&(this.newQuestion="Who is John Doe ?",this.enableSend=!0,this.sendIsDisabled=!1,this.contextLoaded=!1)},4e3)},o=>{this.iFramePlaceholder="Error ! No response from response from Deep API : "+o,console.error(this.iFramePlaceholder),alert("Check Deep API, Could not add to context ! Refresh the page and try again later.")})}}catch{console.error("Unable to access iframe content due to CORS restrictions."),this.iFramePlaceholder="CORS restriction prevents accessing iframe content",alert("CORS restriction ! Pages from publichome are allowed.")}else alert("CORS restriction ! Pages from publichome are allowed.")}catch{this.iFramePlaceholder="CORS restriction prevents accessing iframe content",alert("CORS restriction ! Pages from publichome are allowed.")}},2e3)}setStyles(){this.firstStyle=`width: ${this.firstProgress}%`,this.secondStyle=`width: ${this.secondProgress}%`}constructor(r,i,s,o,a,c,u){this.ghService=r,this.httpClient=i,this.messaging=s,this.renderer=o,this.el=a,this.markdownService=c,this.sanitizer=u,this.urls=[{name:"https://publichome.page/simpleresume"},{name:"https://publichome.page/voicesmith"},{name:"https://publichome.page/nritutor"},{name:"https://publichome.page/kantabanji"},{name:"https://publichome.page/ramasahoo"}],this.db_options=[{value:"R",label:"Redis"},{value:"C",label:"Chroma"}],this.selectedDBOption=this.db_options[0].value,this.ef_options=[{value:"L",label:"ST"},{value:"O",label:"OA"}],this.selectedEFOption=this.ef_options[0].value,this.requestTimer=0,this.messages=[],this.newQuestion="",this.currentQuestion="",this.aiAnswer="",this.max_context_size=6,this.enableSend=!1,this.firstTimeOpen=!0,this.liked=!1,this.requestStarted=!1,this.firstProgress=25,this.secondProgress=10,this.firstStyle="width: 25%",this.secondStyle="width: 10%",this.activeIndex=0,this.iFramePlaceholder="Enter a publichome.page URL to deep search...",this.url="https://publichome.page/simpleresume",this.loadedUrl="",this.contextLoaded=!1,this.sendIsDisabled=!0,this.initialConversation=[{role:"system",content:"You are in a job interview."}],this.messaging.send({cmd:"host",file:"IaComponent"})}ngOnInit(){this.markdownService.renderer.text=r=>{let i=r;return r}}loadUrl(){this.url.trim()&&this.url.startsWith("https://publichome.page/")?(this.loadedUrl=this.url,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.url)):alert(`Please enter a valid publichome.page URL
If you are interested in enabling AI search for your site contact us or try our chrome plugin.`)}setNewQuestion(r,i=null){this.newQuestion=r,i!=null?(i.currentTarget.hidden=!0,this.sendMessage()):this.sendMessage()}sendMessage(){if(this.enableSend&&this.newQuestion.trim()!==""){this.enableSend=!1,this.startTimer(),this.messages.push({from:"You",content:`<b>You: </b>${this.newQuestion}`});let r=Date.now();this.queryDeepApi(this.newQuestion).subscribe(i=>{this.requestTimer=(Date.now()-r)/1e3,this.parseDeepResponse(i.answer)},i=>{console.error("Error ! No response from response from Deep API : ",i),alert("DeepPage API is down !!"),this.resetMembers()}),this.currentQuestion=this.newQuestion,this.newQuestion=""}}parseDeepResponse(r){localStorage.setItem(this.currentQuestion,r),this.aiAnswer=r;let i="";this.aiAnswer&&(this.aiAnswer=this.aiAnswer.trim());let s=`<i class="fa-solid fa-robot" style="color:#19C37D">:</i> ${this.aiAnswer}`;this.messages.push({from:"DP",content:s,followUp:i}),this.resetMembers(),this.scrollToBottom()}aiUserLiked(r){this.liked=!0}onScroll(){}addDeepContext(r){let i="https://api.publichome.page/vector/data",s=new Cn({"Content-Type":"application/json"}),o={options:this.selectedDBOption+":"+this.selectedEFOption,web_link:this.loadedUrl,web_content:r};return this.httpClient.post(i,o,{headers:s})}queryDeepApi(r){let i="https://api.publichome.page/webpeek",s=new Cn({"Content-Type":"application/json"}),o={options:this.selectedDBOption+":"+this.selectedEFOption,web_link:this.loadedUrl,query:r};return this.httpClient.post(i,o,{headers:s})}scrollPageToBottom(){this.enableSend=!0,this.firstTimeOpen=!1;let r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=(window.scrollY||window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)+r;this.renderer.setProperty(document.documentElement,"scrollTop",s),this.renderer.setProperty(document.body,"scrollTop",s)}resetMembers(){this.stopTimer(),this.enableSend=!0,this.firstTimeOpen=!1,this.liked=!1,this.requestStarted=!1,this.timerInterval=null,this.firstProgress=25,this.secondProgress=10}scrollToBottom(){try{this.scrollPanel.nativeElement.scrollTop=this.scrollPanel.nativeElement.scrollHeight}catch{}}ngOnDestroy(){this.stopTimer()}random(r){return Math.floor(Math.random()*r+1)}startTimer(){this.requestStarted=!0,this.timerInterval=setInterval(()=>{this.firstProgress=this.firstProgress+this.random(40),this.secondProgress=this.secondProgress+this.random(20),this.firstProgress>100&&(this.firstProgress=0),this.secondProgress>100&&(this.secondProgress=0),this.setStyles(),this.scrollToBottom()},500)}stopTimer(){this.requestStarted=!1,this.timerInterval!=null&&clearInterval(this.timerInterval)}};e.\u0275fac=function(i){return new(i||e)($(Vt),$(ii),$(en),$(In),$(It),$(Xt),$(Xs))},e.\u0275cmp=Ae({type:e,selectors:[["app-deep-page"]],viewQuery:function(i,s){if(i&1&&(Ll(t6,5),Ll(n6,5)),i&2){let o;ba(o=Da())&&(s.scrollPanel=o.first),ba(o=Da())&&(s.iframeRef=o.first)}},decls:50,vars:17,consts:[["scrollPanel",""],["placeholder",""],["iframeRef",""],[1,"scroll-panel",3,"scroll"],[1,"row","col-10","col-md-8","mx-auto"],[1,"text-center"],[1,"card-text","small","my-3"],[1,"fa-solid","fa-robot",2,"color","#19C37D"],[2,"color","green"],["href","https://chromewebstore.google.com/detail/deeppage/ohdjgphdgjdfmiamnjiooeifjanphhcg","target","_blank",1,"ms-2",2,"font-size","0.75rem"],["class","card-text",4,"ngIf"],[1,"input-group"],["list","urlOptions","type","text","placeholder","Enter or select URL...",1,"form-control",3,"ngModelChange","ngModel"],["id","urlOptions"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-right"],[1,"iframe-container","mt-3"],[3,"src","load",4,"ngIf","ngIfElse"],["class","justify-content-center",4,"ngFor","ngForOf"],["id","myCarousel","class","carousel slide","data-bs-ride","carousel",4,"ngIf"],[1,"row","fixed-bottom","justify-content-center",2,"background-color","#F7F7F7"],[1,"col-10","col-md-8"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type your question ...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fa","fa-arrow-up"],[1,"text-center","text-small","my-3","small"],["id","selectOption",1,"form-select","form-select-sm","w-auto","d-inline-block",3,"ngModelChange","ngModel"],[1,"card-text"],[3,"value"],[3,"load","src"],[1,"iframe-placeholder"],[1,"justify-content-center"],[1,"pb-0",3,"data"],[4,"ngIf"],["type","button",1,"btn","p-1",3,"click"],[1,"fa-regular","fa-thumbs-up"],[1,"fa-regular","fa-clipboard"],[1,"btn","fa-solid","fa-plus",2,"color","green",3,"click"],["id","myCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"my-3"],["role","progressbar","aria-label","Basic example","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress",2,"height","5px"],[1,"progress-bar"],["role","progressbar","aria-label","Basic example","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress","my-2",2,"height","5px"]],template:function(i,s){if(i&1){let o=Dn();R(0,"div",3,0),Me("scroll",function(){return We(o),Ke(s.onScroll())}),R(2,"div",4)(3,"div",5)(4,"h6",6),ce(5,"i",7),R(6,"b",8),U(7,"D"),P(),U(8,"eep"),R(9,"b",8),U(10,"P"),P(),U(11,"eek "),R(12,"a",9),U(13,"(Chrome Plugin)"),P()(),ve(14,r6,2,0,"h4",10),R(15,"div",11)(16,"input",12),Gi("ngModelChange",function(c){return We(o),Zs(s.url,c)||(s.url=c),Ke(c)}),P(),R(17,"datalist",13),ve(18,i6,1,1,"option",14),P(),R(19,"button",15),Me("click",function(){return We(o),Ke(s.loadUrl())}),ce(20,"i",16),P()(),R(21,"div",17),ve(22,s6,2,1,"iframe",18)(23,o6,2,1,"ng-template",null,1,Aa),P()(),ve(25,l6,3,2,"div",19)(26,u6,6,4,"div",20),P(),ce(27,"br")(28,"br")(29,"br"),U(30,"\xA0"),ce(31,"br")(32,"br")(33,"br"),P(),R(34,"div",21)(35,"div",22)(36,"div",23)(37,"input",24),Gi("ngModelChange",function(c){return We(o),Zs(s.newQuestion,c)||(s.newQuestion=c),Ke(c)}),Me("keyup.enter",function(){return We(o),Ke(s.sendMessage())}),P(),R(38,"button",25),Me("click",function(){return We(o),Ke(s.sendMessage())}),ce(39,"i",26),P()(),R(40,"div",27),ce(41,"i",7),U(42," \xA0using "),R(43,"select",28),Gi("ngModelChange",function(c){return We(o),Zs(s.selectedDBOption,c)||(s.selectedDBOption=c),Ke(c)}),ve(44,d6,2,2,"option",14),P(),U(45," \xA0with\xA0 "),R(46,"select",28),Gi("ngModelChange",function(c){return We(o),Zs(s.selectedEFOption,c)||(s.selectedEFOption=c),Ke(c)}),ve(47,h6,2,2,"option",14),P(),U(48),kt(49,"number"),P()()()}if(i&2){let o=Ca(24);j(14),J("ngIf",s.firstTimeOpen&&!s.requestStarted),j(2),Hi("ngModel",s.url),j(2),J("ngForOf",s.urls),j(4),J("ngIf",s.loadedUrl)("ngIfElse",o),j(3),J("ngForOf",s.messages),j(),J("ngIf",s.requestStarted),j(11),Hi("ngModel",s.newQuestion),j(),J("disabled",!s.enableSend),j(5),Hi("ngModel",s.selectedDBOption),j(),J("ngForOf",s.db_options),j(2),Hi("ngModel",s.selectedEFOption),j(),J("ngForOf",s.ef_options),j(),ft(" \xA0",s.requestTimer>0?kx(49,14,s.requestTimer,"1.2-2")+"s":""," ")}},dependencies:[Zt,Jt,mR,vR,Ua,yp,gp,lu,Kn,iM],styles:[".iframe-container[_ngcontent-%COMP%]{width:100%;height:300px;border:2px solid #ccc;border-radius:5px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}.iframe-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#aaa;font-style:italic;font-size:16px;background:#f8f9fa}"]});let n=e;return n})();var f6={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",enableTracing:!he.production},p6=[{path:"i/:folder/:id",component:Id,children:[{path:"**",component:Id}]},{path:"chat",component:gF},{path:"roadmap",component:fF},{path:":ghUser/articles",component:fD},{path:"articles",component:fD},{path:"crazycoupons",component:uF},{path:"contacts",component:j0},{path:":ghUser/contacts",component:j0},{path:"",component:uN},{path:":ghUser",component:hD,children:[{path:"**",component:hD}]}],mF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e}),e.\u0275inj=Mt({imports:[Na,I0.forRoot(p6,f6),I0]});let n=e;return n})();var yF=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Rt({type:e,bootstrap:[re]}),e.\u0275inj=Mt({providers:[mM(),{provide:Uc,useValue:he.firebaseConfig}],imports:[CM,wR,mF,HM.forRoot({loader:ii,markedOptions:{provide:M_,useValue:{gfm:!0,breaks:!1,pedantic:!1}},sanitize:En.NONE})]});let n=e;return n})();xx(re,function(){return[Jt,m0,_R,dN]},[]);DM().bootstrapModule(yF).catch(n=>console.error(n));
