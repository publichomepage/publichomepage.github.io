import{b as DS,c as SS,f as A2,g as AS}from"./chunk-E4ERW3Q5.js";import{a as IS,b as Zh,c as CS,d as TS,e as xS,f as Ov,g as kS,h as Xl,i as Fv,j as Jh,k as RS,l as MS,m as Lv,n as at,o as eo,p as xr,q as Xh,r as eu,s as NS,t as PS,u as Ki,v as kr}from"./chunk-75BEUDPJ.js";import{a as P,b as ne,c as Cn,e as si,g as D2,h as S2,i as Pv,j as y}from"./chunk-4ZZIO3ZI.js";var Cb=si(Ib=>{"use strict";Object.defineProperty(Ib,"__esModule",{value:!0});var Eb=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Ib.default=Eb});var Db=si(ed=>{"use strict";var P1=ed&&ed.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ed,"__esModule",{value:!0});var BG=P1((AS(),S2(A2))),qG=P1(Cb()),Tb=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=BG.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>y(this,null,function*(){var o,a,c;let l=null,d=null,h=null,p=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){let R=yield s.text();R===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=R:d=JSON.parse(R))}let b=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),E=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");b&&E&&E.length>1&&(h=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(l={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,p=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{let b=yield s.text();try{l=JSON.parse(b),Array.isArray(l)&&s.status===404&&(d=[],l=null,p=200,m="OK")}catch{s.status===404&&b===""?(p=204,m="No Content"):l={message:b}}if(l&&this.isMaybeSingle&&(!((c=l?.details)===null||c===void 0)&&c.includes("0 rows"))&&(l=null,p=200,m="OK"),l&&this.shouldThrowOnError)throw new qG.default(l)}return{error:l,data:d,count:h,status:p,statusText:m}}));return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,c;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(c=s?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};ed.default=Tb});var Ab=si(td=>{"use strict";var zG=td&&td.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(td,"__esModule",{value:!0});var HG=zG(Db()),Sb=class extends HG.default{select(e){let t=!1,r=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){let o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){let i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:i=r}={}){let s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;let c=[e?"analyze":null,t?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};td.default=Sb});var Pg=si(nd=>{"use strict";var GG=nd&&nd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(nd,"__esModule",{value:!0});var WG=GG(Ab()),xb=class extends WG.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){let r=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");let o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){let i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};nd.default=xb});var Rb=si(id=>{"use strict";var KG=id&&id.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(id,"__esModule",{value:!0});var rd=KG(Pg()),kb=class{constructor(e,{headers:t={},schema:r,fetch:i}){this.url=e,this.headers=t,this.schema=r,this.fetch=i}select(e,{head:t=!1,count:r}={}){let i=t?"HEAD":"GET",s=!1,o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new rd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){let i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){let o=e.reduce((a,c)=>a.concat(Object.keys(c)),[]);if(o.length>0){let a=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",a.join(","))}}return new rd.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){let o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){let c=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(c.length>0){let l=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",l.join(","))}}return new rd.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){let r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),this.headers.Prefer=i.join(","),new rd.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){let t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new rd.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};id.default=kb});var O1=si(Og=>{"use strict";Object.defineProperty(Og,"__esModule",{value:!0});Og.version=void 0;Og.version="0.0.0-automated"});var F1=si(Fg=>{"use strict";Object.defineProperty(Fg,"__esModule",{value:!0});Fg.DEFAULT_HEADERS=void 0;var QG=O1();Fg.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${QG.version}`}});var V1=si(sd=>{"use strict";var L1=sd&&sd.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sd,"__esModule",{value:!0});var YG=L1(Rb()),ZG=L1(Pg()),JG=F1(),Mb=class n{constructor(e,{headers:t={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},JG.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=i}from(e){let t=new URL(`${this.url}/${e}`);return new YG.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:i=!1,count:s}={}){let o,a=new URL(`${this.url}/rpc/${e}`),c;r||i?(o=r?"HEAD":"GET",Object.entries(t).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{a.searchParams.append(d,h)})):(o="POST",c=t);let l=Object.assign({},this.headers);return s&&(l.Prefer=`count=${s}`),new ZG.default({method:o,url:a,headers:l,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};sd.default=Mb});var H1=si(Qt=>{"use strict";var _c=Qt&&Qt.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Qt,"__esModule",{value:!0});Qt.PostgrestError=Qt.PostgrestBuilder=Qt.PostgrestTransformBuilder=Qt.PostgrestFilterBuilder=Qt.PostgrestQueryBuilder=Qt.PostgrestClient=void 0;var j1=_c(V1());Qt.PostgrestClient=j1.default;var U1=_c(Rb());Qt.PostgrestQueryBuilder=U1.default;var $1=_c(Pg());Qt.PostgrestFilterBuilder=$1.default;var B1=_c(Ab());Qt.PostgrestTransformBuilder=B1.default;var q1=_c(Db());Qt.PostgrestBuilder=q1.default;var z1=_c(Cb());Qt.PostgrestError=z1.default;Qt.default={PostgrestClient:j1.default,PostgrestQueryBuilder:U1.default,PostgrestFilterBuilder:$1.default,PostgrestTransformBuilder:B1.default,PostgrestBuilder:q1.default,PostgrestError:z1.default}});function OS(n,e){return Object.is(n,e)}var Ft=null,ef=!1,tf=1,oi=Symbol("SIGNAL");function je(n){let e=Ft;return Ft=n,e}function FS(){return Ft}var nu={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Uv(n){if(ef)throw new Error("");if(Ft===null)return;Ft.consumerOnSignalRead(n);let e=Ft.nextProducerIndex++;if(of(Ft),e<Ft.producerNode.length&&Ft.producerNode[e]!==n&&tu(Ft)){let t=Ft.producerNode[e];sf(t,Ft.producerIndexOfThis[e])}Ft.producerNode[e]!==n&&(Ft.producerNode[e]=n,Ft.producerIndexOfThis[e]=tu(Ft)?US(n,Ft,e):0),Ft.producerLastReadVersion[e]=n.version}function x2(){tf++}function LS(n){if(!(tu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===tf)){if(!n.producerMustRecompute(n)&&!Bv(n)){n.dirty=!1,n.lastCleanEpoch=tf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=tf}}function VS(n){if(n.liveConsumerNode===void 0)return;let e=ef;ef=!0;try{for(let t of n.liveConsumerNode)t.dirty||k2(t)}finally{ef=e}}function jS(){return Ft?.consumerAllowSignalWrites!==!1}function k2(n){n.dirty=!0,VS(n),n.consumerMarkedDirty?.(n)}function rf(n){return n&&(n.nextProducerIndex=0),je(n)}function $v(n,e){if(je(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(tu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)sf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Bv(n){of(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(LS(t),r!==t.version))return!0}return!1}function qv(n){if(of(n),tu(n))for(let e=0;e<n.producerNode.length;e++)sf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function US(n,e,t){if($S(n),n.liveConsumerNode.length===0&&BS(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=US(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function sf(n,e){if($S(n),n.liveConsumerNode.length===1&&BS(n))for(let r=0;r<n.producerNode.length;r++)sf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];of(i),i.producerIndexOfThis[r]=e}}function tu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function of(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function $S(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function BS(n){return n.producerNode!==void 0}function qS(n){let e=Object.create(R2);e.computation=n;let t=()=>{if(LS(e),Uv(e),e.value===nf)throw e.error;return e.value};return t[oi]=e,t}var Vv=Symbol("UNSET"),jv=Symbol("COMPUTING"),nf=Symbol("ERRORED"),R2=ne(P({},nu),{value:Vv,dirty:!0,error:null,equal:OS,producerMustRecompute(n){return n.value===Vv||n.value===jv},producerRecomputeValue(n){if(n.value===jv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=jv;let t=rf(n),r;try{r=n.computation()}catch(i){r=nf,n.error=i}finally{$v(n,t)}if(e!==Vv&&e!==nf&&r!==nf&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function M2(){throw new Error}var zS=M2;function HS(){zS()}function GS(n){zS=n}var N2=null;function WS(n){let e=Object.create(QS);e.value=n;let t=()=>(Uv(e),e.value);return t[oi]=e,t}function zv(n,e){jS()||HS(),n.equal(n.value,e)||(n.value=e,P2(n))}function KS(n,e){jS()||HS(),zv(n,e(n.value))}var QS=ne(P({},nu),{equal:OS,value:void 0});function P2(n){n.version++,x2(),VS(n),N2?.()}function ye(n){return typeof n=="function"}function ba(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var af=ba(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function to(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ht=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(s){e=s instanceof af?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{YS(s)}catch(o){e=e??[],o instanceof af?e=[...e,...o.errors]:e.push(o)}}if(e)throw new af(e)}}add(e){var t;if(e&&e!==this)if(this.closed)YS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&to(t,e)}remove(e){let{_finalizers:t}=this;t&&to(t,e),e instanceof n&&e._removeParent(this)}};ht.EMPTY=(()=>{let n=new ht;return n.closed=!0,n})();var Hv=ht.EMPTY;function cf(n){return n instanceof ht||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function YS(n){ye(n)?n():n.unsubscribe()}var ur={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ea={setTimeout(n,e,...t){let{delegate:r}=Ea;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ea;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function lf(n){Ea.setTimeout(()=>{let{onUnhandledError:e}=ur;if(e)e(n);else throw n})}function ru(){}var ZS=Gv("C",void 0,void 0);function JS(n){return Gv("E",void 0,n)}function XS(n){return Gv("N",n,void 0)}function Gv(n,e,t){return{kind:n,value:e,error:t}}var no=null;function Ia(n){if(ur.useDeprecatedSynchronousErrorHandling){let e=!no;if(e&&(no={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=no;if(no=null,t)throw r}}else n()}function eA(n){ur.useDeprecatedSynchronousErrorHandling&&no&&(no.errorThrown=!0,no.error=n)}var ro=class extends ht{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,cf(e)&&e.add(this)):this.destination=L2}static create(e,t,r){return new ai(e,t,r)}next(e){this.isStopped?Kv(XS(e),this):this._next(e)}error(e){this.isStopped?Kv(JS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Kv(ZS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},O2=Function.prototype.bind;function Wv(n,e){return O2.call(n,e)}var Qv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){uf(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){uf(r)}else uf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){uf(t)}}},ai=class extends ro{constructor(e,t,r){super();let i;if(ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&ur.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wv(e.next,s),error:e.error&&Wv(e.error,s),complete:e.complete&&Wv(e.complete,s)}):i=e}this.destination=new Qv(i)}};function uf(n){ur.useDeprecatedSynchronousErrorHandling?eA(n):lf(n)}function F2(n){throw n}function Kv(n,e){let{onStoppedNotification:t}=ur;t&&Ea.setTimeout(()=>t(n,e))}var L2={closed:!0,next:ru,error:F2,complete:ru};var Ca=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pn(n){return n}function Yv(...n){return Zv(n)}function Zv(n){return n.length===0?pn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var we=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=j2(t)?t:new ai(t,r,i);return Ia(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=tA(r),new r((i,s)=>{let o=new ai({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ca](){return this}pipe(...t){return Zv(t)(this)}toPromise(t){return t=tA(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function tA(n){var e;return(e=n??ur.Promise)!==null&&e!==void 0?e:Promise}function V2(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function j2(n){return n&&n instanceof ro||V2(n)&&cf(n)}function Jv(n){return ye(n?.lift)}function be(n){return e=>{if(Jv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(n,e,t,r,i){return new Xv(n,e,t,r,i)}var Xv=class extends ro{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ta(){return be((n,e)=>{let t=null;n._refCount++;let r=Ee(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Da=class extends we{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Jv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ht;let t=this.getSubject();e.add(this.source.subscribe(Ee(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ht.EMPTY)}return e}refCount(){return Ta()(this)}};var nA=ba(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ze=(()=>{class n extends we{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new df(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new nA}next(t){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Ia(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Hv:(this.currentObservers=null,s.push(t),new ht(()=>{this.currentObservers=null,to(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new we;return t.source=this,t}}return n.create=(e,t)=>new df(e,t),n})(),df=class extends ze{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Hv}};var Gt=class extends ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var iu={now(){return(iu.delegate||Date).now()},delegate:void 0};var hf=class extends ze{constructor(e=1/0,t=1/0,r=iu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var ff=class extends ht{constructor(e,t){super()}schedule(e,t=0){return this}};var su={setInterval(n,e,...t){let{delegate:r}=su;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=su;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Sa=class extends ff{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return su.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&su.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,to(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Aa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Aa.now=iu.now;var xa=class extends Aa{constructor(e,t=Aa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Qi=new xa(Sa),e_=Qi;var pf=class extends Sa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var gf=class extends xa{};var t_=new gf(pf);var gn=new we(n=>n.complete());function mf(n){return n&&ye(n.schedule)}function n_(n){return n[n.length-1]}function yf(n){return ye(n_(n))?n.pop():void 0}function Rr(n){return mf(n_(n))?n.pop():void 0}function rA(n,e){return typeof n_(n)=="number"?n.pop():e}var vf=n=>n&&typeof n.length=="number"&&typeof n!="function";function _f(n){return ye(n?.then)}function wf(n){return ye(n[Ca])}function bf(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function Ef(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function U2(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var If=U2();function Cf(n){return ye(n?.[If])}function Tf(n){return CS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Zh(t.read());if(i)return yield Zh(void 0);yield yield Zh(r)}}finally{t.releaseLock()}})}function Df(n){return ye(n?.getReader)}function tt(n){if(n instanceof we)return n;if(n!=null){if(wf(n))return $2(n);if(vf(n))return B2(n);if(_f(n))return q2(n);if(bf(n))return iA(n);if(Cf(n))return z2(n);if(Df(n))return H2(n)}throw Ef(n)}function $2(n){return new we(e=>{let t=n[Ca]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function B2(n){return new we(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function q2(n){return new we(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,lf)})}function z2(n){return new we(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function iA(n){return new we(e=>{G2(n,e).catch(t=>e.error(t))})}function H2(n){return iA(Tf(n))}function G2(n,e){var t,r,i,s;return IS(this,void 0,void 0,function*(){try{for(t=TS(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Tn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Yn(n,e=0){return be((t,r)=>{t.subscribe(Ee(r,i=>Tn(r,n,()=>r.next(i),e),()=>Tn(r,n,()=>r.complete(),e),i=>Tn(r,n,()=>r.error(i),e)))})}function dr(n,e=0){return be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function sA(n,e){return tt(n).pipe(dr(e),Yn(e))}function oA(n,e){return tt(n).pipe(dr(e),Yn(e))}function aA(n,e){return new we(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function cA(n,e){return new we(t=>{let r;return Tn(t,e,()=>{r=n[If](),Tn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}function Sf(n,e){if(!n)throw new Error("Iterable cannot be null");return new we(t=>{Tn(t,e,()=>{let r=n[Symbol.asyncIterator]();Tn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lA(n,e){return Sf(Tf(n),e)}function uA(n,e){if(n!=null){if(wf(n))return sA(n,e);if(vf(n))return aA(n,e);if(_f(n))return oA(n,e);if(bf(n))return Sf(n,e);if(Cf(n))return cA(n,e);if(Df(n))return lA(n,e)}throw Ef(n)}function Pe(n,e){return e?uA(n,e):tt(n)}function he(...n){let e=Rr(n);return Pe(n,e)}function ka(n,e){let t=ye(n)?n:()=>n,r=i=>i.error(t());return new we(e?i=>e.schedule(r,0,i):r)}function r_(n){return!!n&&(n instanceof we||ye(n.lift)&&ye(n.subscribe))}var ci=ba(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function dA(n){return n instanceof Date&&!isNaN(n)}function de(n,e){return be((t,r)=>{let i=0;t.subscribe(Ee(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:W2}=Array;function K2(n,e){return W2(e)?n(...e):n(e)}function Af(n){return de(e=>K2(n,e))}var{isArray:Q2}=Array,{getPrototypeOf:Y2,prototype:Z2,keys:J2}=Object;function xf(n){if(n.length===1){let e=n[0];if(Q2(e))return{args:e,keys:null};if(X2(e)){let t=J2(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function X2(n){return n&&typeof n=="object"&&Y2(n)===Z2}function kf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ou(...n){let e=Rr(n),t=yf(n),{args:r,keys:i}=xf(n);if(r.length===0)return Pe([],e);let s=new we(eU(r,e,i?o=>kf(i,o):pn));return t?s.pipe(Af(t)):s}function eU(n,e,t=pn){return r=>{hA(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)hA(e,()=>{let l=Pe(n[c],e),d=!1;l.subscribe(Ee(r,h=>{s[c]=h,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function hA(n,e,t){n?Tn(t,n,e):e()}function fA(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,h=!1,p=()=>{h&&!c.length&&!l&&e.complete()},m=b=>l<r?_(b):c.push(b),_=b=>{s&&e.next(b),l++;let E=!1;tt(t(b,d++)).subscribe(Ee(e,R=>{i?.(R),s?m(R):e.next(R)},()=>{E=!0},void 0,()=>{if(E)try{for(l--;c.length&&l<r;){let R=c.shift();o?Tn(e,o,()=>_(R)):_(R)}p()}catch(R){e.error(R)}}))};return n.subscribe(Ee(e,m,()=>{h=!0,p()})),()=>{a?.()}}function Et(n,e,t=1/0){return ye(e)?Et((r,i)=>de((s,o)=>e(r,s,i,o))(tt(n(r,i))),t):(typeof e=="number"&&(t=e),be((r,i)=>fA(r,i,n,t)))}function Yi(n=1/0){return Et(pn,n)}function pA(){return Yi(1)}function Ra(...n){return pA()(Pe(n,Rr(n)))}function Rf(n){return new we(e=>{tt(n()).subscribe(e)})}function i_(...n){let e=yf(n),{args:t,keys:r}=xf(n),i=new we(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let h=!1;tt(t[d]).subscribe(Ee(s,p=>{h||(h=!0,l--),a[d]=p},()=>c--,void 0,()=>{(!c||!h)&&(l||s.next(r?kf(r,a):a),s.complete())}))}});return e?i.pipe(Af(e)):i}function s_(n=0,e,t=e_){let r=-1;return e!=null&&(mf(e)?t=e:r=e),new we(i=>{let s=dA(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function au(...n){let e=Rr(n),t=rA(n,1/0),r=n;return r.length?r.length===1?tt(r[0]):Yi(t)(Pe(r,e)):gn}function Lt(n,e){return be((t,r)=>{let i=0;t.subscribe(Ee(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Zi(n){return be((e,t)=>{let r=null,i=!1,s;r=e.subscribe(Ee(t,void 0,void 0,o=>{s=tt(n(o,Zi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function gA(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(Ee(o,d=>{let h=l++;c=a?n(c,d,h):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function li(n,e){return ye(e)?Et(n,e,1):Et(n,1)}function o_(n,e=Qi){return be((t,r)=>{let i=null,s=null,o=null,a=()=>{if(i){i.unsubscribe(),i=null;let l=s;s=null,r.next(l)}};function c(){let l=o+n,d=e.now();if(d<l){i=this.schedule(void 0,l-d),r.add(i);return}a()}t.subscribe(Ee(r,l=>{s=l,o=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function Ji(n){return be((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ui(n){return n<=0?()=>gn:be((e,t)=>{let r=0;e.subscribe(Ee(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function cu(n){return de(()=>n)}function lu(n,e=pn){return n=n??tU,be((t,r)=>{let i,s=!0;t.subscribe(Ee(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function tU(n,e){return n===e}function Mf(n=nU){return be((e,t)=>{let r=!1;e.subscribe(Ee(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function nU(){return new ci}function io(n){return be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function $n(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Lt((i,s)=>n(i,s,r)):pn,ui(1),t?Ji(e):Mf(()=>new ci))}function Ma(n){return n<=0?()=>gn:be((e,t)=>{let r=[];e.subscribe(Ee(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function a_(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Lt((i,s)=>n(i,s,r)):pn,Ma(1),t?Ji(e):Mf(()=>new ci))}function uu(){return be((n,e)=>{let t,r=!1;n.subscribe(Ee(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function so(n,e){return be(gA(n,e,arguments.length>=2,!0))}function mA(n={}){let{connector:e=()=>new ze,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,d=!1,h=!1,p=()=>{a?.unsubscribe(),a=void 0},m=()=>{p(),o=c=void 0,d=h=!1},_=()=>{let b=o;m(),b?.unsubscribe()};return be((b,E)=>{l++,!h&&!d&&p();let R=c=c??e();E.add(()=>{l--,l===0&&!h&&!d&&(a=c_(_,i))}),R.subscribe(E),!o&&l>0&&(o=new ai({next:j=>R.next(j),error:j=>{h=!0,p(),a=c_(m,t,j),R.error(j)},complete:()=>{d=!0,p(),a=c_(m,r),R.complete()}}),tt(b).subscribe(o))})(s)}}function c_(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new ai({next:()=>{r.unsubscribe(),n()}});return tt(e(...t)).subscribe(r)}function Na(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,mA({connector:()=>new hf(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function di(...n){let e=Rr(n);return be((t,r)=>{(e?Ra(n,t,e):Ra(n,t)).subscribe(r)})}function Je(n,e){return be((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(Ee(r,c=>{i?.unsubscribe();let l=0,d=s++;tt(n(c,d)).subscribe(i=Ee(r,h=>r.next(e?e(c,h,d,l++):h),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Nf(n,e){return ye(e)?Je(()=>n,e):Je(()=>n)}function du(n){return be((e,t)=>{tt(n).subscribe(Ee(t,()=>t.complete(),ru)),!t.closed&&e.subscribe(t)})}function It(n,e,t){let r=ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?be((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(Ee(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pn}var sx="https://g.co/ng/security#xss",ie=class extends Error{constructor(e,t){super(_p(e,t)),this.code=e}};function _p(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Iu(n){return{toString:n}.toString()}var Pf="__parameters__";function rU(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function ox(n,e,t){return Iu(()=>{let r=rU(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let h=c.hasOwnProperty(Pf)?c[Pf]:Object.defineProperty(c,Pf,{value:[]})[Pf];for(;h.length<=d;)h.push(null);return(h[d]=h[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Wt=globalThis;function Ye(n){for(let e in n)if(n[e]===Ye)return e;throw Error("Could not find renamed property on target object.")}function iU(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function yn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(yn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function I_(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var sU=Ye({__forward_ref__:Ye});function as(n){return n.__forward_ref__=as,n.toString=function(){return yn(this())},n}function mn(n){return ax(n)?n():n}function ax(n){return typeof n=="function"&&n.hasOwnProperty(sU)&&n.__forward_ref__===as}function Y(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ct(n){return{providers:n.providers||[],imports:n.imports||[]}}function wp(n){return yA(n,lx)||yA(n,ux)}function cx(n){return wp(n)!==null}function yA(n,e){return n.hasOwnProperty(e)?n[e]:null}function oU(n){let e=n&&(n[lx]||n[ux]);return e||null}function vA(n){return n&&(n.hasOwnProperty(_A)||n.hasOwnProperty(aU))?n[_A]:null}var lx=Ye({\u0275prov:Ye}),_A=Ye({\u0275inj:Ye}),ux=Ye({ngInjectableDef:Ye}),aU=Ye({ngInjectorDef:Ye}),Z=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Y({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function dx(n){return n&&!!n.\u0275providers}var cU=Ye({\u0275cmp:Ye}),lU=Ye({\u0275dir:Ye}),uU=Ye({\u0275pipe:Ye}),dU=Ye({\u0275mod:Ye}),Wf=Ye({\u0275fac:Ye}),fu=Ye({__NG_ELEMENT_ID__:Ye}),wA=Ye({__NG_ENV_ID__:Ye});function gu(n){return typeof n=="string"?n:n==null?"":String(n)}function hU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():gu(n)}function fU(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ie(-200,n)}function Rw(n,e){throw new ie(-201,!1)}var xe=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(xe||{}),C_;function hx(){return C_}function Dn(n){let e=C_;return C_=n,e}function fx(n,e,t){let r=wp(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&xe.Optional)return null;if(e!==void 0)return e;Rw(n,"Injector")}var pU={},mu=pU,T_="__NG_DI_FLAG__",Kf="ngTempTokenPath",gU="ngTokenPath",mU=/\n/gm,yU="\u0275",bA="__source",Va;function vU(){return Va}function Xi(n){let e=Va;return Va=n,e}function _U(n,e=xe.Default){if(Va===void 0)throw new ie(-203,!1);return Va===null?fx(n,void 0,e):Va.get(n,e&xe.Optional?null:void 0,e)}function q(n,e=xe.Default){return(hx()||_U)(mn(n),e)}function G(n,e=xe.Default){return q(n,bp(e))}function bp(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function D_(n){let e=[];for(let t=0;t<n.length;t++){let r=mn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let i,s=xe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=wU(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(q(i,s))}else e.push(q(r))}return e}function px(n,e){return n[T_]=e,n.prototype[T_]=e,n}function wU(n){return n[T_]}function bU(n,e,t,r){let i=n[Kf];throw e[bA]&&i.unshift(e[bA]),n.message=EU(`
`+n.message,i,t,r),n[gU]=i,n[Kf]=null,n}function EU(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==yU?n.slice(2):n;let i=yn(e);if(Array.isArray(e))i=e.map(yn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):yn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(mU,`
  `)}`}var Ja=px(ox("Optional"),8);var Ep=px(ox("SkipSelf"),4);function uo(n,e){let t=n.hasOwnProperty(Wf);return t?n[Wf]:null}function IU(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function CU(n){return n.flat(Number.POSITIVE_INFINITY)}function Mw(n,e){n.forEach(t=>Array.isArray(t)?Mw(t,e):e(t))}function gx(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function TU(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function DU(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function Ip(n,e,t){let r=Cu(n,e);return r>=0?n[r|1]=t:(r=~r,DU(n,r,e,t)),r}function l_(n,e){let t=Cu(n,e);if(t>=0)return n[t|1]}function Cu(n,e){return SU(n,e,1)}function SU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Ua={},Sn=[],$a=new Z(""),mx=new Z("",-1),yx=new Z(""),Yf=class{get(e,t=mu){if(t===mu){let r=new Error(`NullInjectorError: No provider for ${yn(e)}!`);throw r.name="NullInjectorError",r}return t}},vx=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(vx||{}),Pr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pr||{}),ns=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ns||{});function AU(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function S_(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];kU(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function xU(n){return n===3||n===4||n===6}function kU(n){return n.charCodeAt(0)===64}function yu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?EA(n,t,i,null,e[++r]):EA(n,t,i,null,null))}}return n}function EA(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var _x="ng-template";function RU(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&AU(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Nw(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Nw(n){return n.type===4&&n.value!==_x}function MU(n,e,t){let r=n.type===4&&!t?_x:n.value;return e===r}function NU(n,e,t){let r=4,i=n.attrs,s=i!==null?FU(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!hr(r)&&!hr(c))return!1;if(o&&hr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!MU(n,c,t)||c===""&&e.length===1){if(hr(r))return!1;o=!0}}else if(r&8){if(i===null||!RU(n,i,c,t)){if(hr(r))return!1;o=!0}}else{let l=e[++a],d=PU(c,i,Nw(n),t);if(d===-1){if(hr(r))return!1;o=!0;continue}if(l!==""){let h;if(d>s?h="":h=i[d+1].toLowerCase(),r&2&&l!==h){if(hr(r))return!1;o=!0}}}}return hr(r)||o}function hr(n){return(n&1)===0}function PU(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return LU(e,n)}function wx(n,e,t=!1){for(let r=0;r<e.length;r++)if(NU(n,e[r],t))return!0;return!1}function OU(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function FU(n){for(let e=0;e<n.length;e++){let t=n[e];if(xU(t))return e}return n.length}function LU(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function VU(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function IA(n,e){return n?":not("+e.trim()+")":e}function jU(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!hr(o)&&(e+=IA(s,i),i=""),r=o,s=s||!hr(r);t++}return i!==""&&(e+=IA(s,i)),e}function UU(n){return n.map(jU).join(",")}function $U(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!hr(i))break;i=s}r++}return{attrs:e,classes:t}}function Re(n){return Iu(()=>{let e=Tx(n),t=ne(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===vx.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pr.Emulated,styles:n.styles||Sn,_:null,schemas:n.schemas||null,tView:null,id:""});Dx(t);let r=n.dependencies;return t.directiveDefs=Zf(r,!1),t.pipeDefs=Zf(r,!0),t.id=zU(t),t})}function BU(n){return rs(n)||bx(n)}function qU(n){return n!==null}function Tt(n){return Iu(()=>({type:n.type,bootstrap:n.bootstrap||Sn,declarations:n.declarations||Sn,imports:n.imports||Sn,exports:n.exports||Sn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function CA(n,e){if(n==null)return Ua;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=ns.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==ns.None?[r,a]:r,e[s]=o):t[s]=r}return t}function Dt(n){return Iu(()=>{let e=Tx(n);return Dx(e),e})}function cs(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function rs(n){return n[cU]||null}function bx(n){return n[lU]||null}function Ex(n){return n[uU]||null}function Ix(n){let e=rs(n)||bx(n)||Ex(n);return e!==null?e.standalone:!1}function Cx(n,e){let t=n[dU]||null;if(!t&&e===!0)throw new Error(`Type ${yn(n)} does not have '\u0275mod' property.`);return t}function Tx(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ua,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Sn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:CA(n.inputs,e),outputs:CA(n.outputs),debugInfo:null}}function Dx(n){n.features?.forEach(e=>e(n))}function Zf(n,e){if(!n)return null;let t=e?Ex:BU;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(qU)}function zU(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Cp(n){return{\u0275providers:n}}function HU(...n){return{\u0275providers:Sx(!0,n),\u0275fromNgModule:!0}}function Sx(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Mw(e,o=>{let a=o;A_(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ax(i,s),t}function Ax(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Pw(i,s=>{e(s,r)})}}function A_(n,e,t,r){if(n=mn(n),!n)return!1;let i=null,s=vA(n),o=!s&&rs(n);if(!s&&!o){let c=n.ngModule;if(s=vA(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)A_(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Mw(s.imports,d=>{A_(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&Ax(l,e)}if(!a){let l=uo(i)||(()=>new i);e({provide:i,useFactory:l,deps:Sn},i),e({provide:yx,useValue:i,multi:!0},i),e({provide:$a,useValue:()=>q(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Pw(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Pw(n,e){for(let t of n)dx(t)&&(t=t.\u0275providers),Array.isArray(t)?Pw(t,e):e(t)}var GU=Ye({provide:String,useValue:Ye});function xx(n){return n!==null&&typeof n=="object"&&GU in n}function WU(n){return!!(n&&n.useExisting)}function KU(n){return!!(n&&n.useFactory)}function Ba(n){return typeof n=="function"}function QU(n){return!!n.useClass}var Tp=new Z(""),Bf={},YU={},u_;function Ow(){return u_===void 0&&(u_=new Yf),u_}var vn=class{},vu=class extends vn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,k_(e,o=>this.processProvider(o)),this.records.set(mx,Pa(void 0,this)),i.has("environment")&&this.records.set(vn,Pa(void 0,this));let s=this.records.get(Tp);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(yx,Sn,xe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=je(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),je(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Xi(this),r=Dn(void 0),i;try{return e()}finally{Xi(t),Dn(r)}}get(e,t=mu,r=xe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wA))return e[wA](this);r=bp(r);let i,s=Xi(this),o=Dn(void 0);try{if(!(r&xe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=t$(e)&&wp(e);l&&this.injectableDefInScope(l)?c=Pa(x_(e),Bf):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&xe.Self?Ow():this.parent;return t=r&xe.Optional&&t===mu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Kf]=a[Kf]||[]).unshift(yn(e)),s)throw a;return bU(a,e,"R3InjectorError",this.source)}else throw a}finally{Dn(o),Xi(s)}}resolveInjectorInitializers(){let e=je(null),t=Xi(this),r=Dn(void 0),i;try{let s=this.get($a,Sn,xe.Self);for(let o of s)o()}finally{Xi(t),Dn(r),je(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(yn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(e){e=mn(e);let t=Ba(e)?e:mn(e&&e.provide),r=JU(e);if(!Ba(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Pa(void 0,Bf,!0),i.factory=()=>D_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=je(null);try{return t.value===Bf&&(t.value=YU,t.value=t.factory()),typeof t.value=="object"&&t.value&&e$(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{je(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=mn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function x_(n){let e=wp(n),t=e!==null?e.factory:uo(n);if(t!==null)return t;if(n instanceof Z)throw new ie(204,!1);if(n instanceof Function)return ZU(n);throw new ie(204,!1)}function ZU(n){if(n.length>0)throw new ie(204,!1);let t=oU(n);return t!==null?()=>t.factory(n):()=>new n}function JU(n){if(xx(n))return Pa(void 0,n.useValue);{let e=kx(n);return Pa(e,Bf)}}function kx(n,e,t){let r;if(Ba(n)){let i=mn(n);return uo(i)||x_(i)}else if(xx(n))r=()=>mn(n.useValue);else if(KU(n))r=()=>n.useFactory(...D_(n.deps||[]));else if(WU(n))r=()=>q(mn(n.useExisting));else{let i=mn(n&&(n.useClass||n.provide));if(XU(n))r=()=>new i(...D_(n.deps));else return uo(i)||x_(i)}return r}function Pa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function XU(n){return!!n.deps}function e$(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function t$(n){return typeof n=="function"||typeof n=="object"&&n instanceof Z}function k_(n,e){for(let t of n)Array.isArray(t)?k_(t,e):t&&dx(t)?k_(t.\u0275providers,e):e(t)}function Xn(n,e){n instanceof vu&&n.assertNotDestroyed();let t,r=Xi(n),i=Dn(void 0);try{return e()}finally{Xi(r),Dn(i)}}function Rx(){return hx()!==void 0||vU()!=null}function n$(n){if(!Rx())throw new ie(-203,!1)}function r$(n){let e=Wt.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function i$(n){return typeof n=="function"}var mi=0,Ce=1,me=2,rn=3,fr=4,An=5,_u=6,Jf=7,pr=8,qa=9,Or=10,ft=11,wu=12,TA=13,Xa=14,Jn=15,ho=16,Oa=17,hi=18,Dp=19,Mx=20,es=21,d_=22,Zn=23,sn=25,Nx=1;var fo=7,Xf=8,za=9,Bn=10,ep=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(ep||{});function ts(n){return Array.isArray(n)&&typeof n[Nx]=="object"}function yi(n){return Array.isArray(n)&&n[Nx]===!0}function Fw(n){return(n.flags&4)!==0}function Sp(n){return n.componentOffset>-1}function Ap(n){return(n.flags&1)===1}function is(n){return!!n.template}function R_(n){return(n[me]&512)!==0}var M_=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Px(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function ls(){return Ox}function Ox(n){return n.type.prototype.ngOnChanges&&(n.setInput=o$),s$}ls.ngInherit=!0;function s$(){let n=Lx(this),e=n?.current;if(e){let t=n.previous;if(t===Ua)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function o$(n,e,t,r,i){let s=this.declaredInputs[r],o=Lx(n)||a$(n,{previous:Ua,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new M_(l&&l.currentValue,t,c===Ua),Px(n,e,i,t)}var Fx="__ngSimpleChanges__";function Lx(n){return n[Fx]||null}function a$(n,e){return n[Fx]=e}var DA=null;var Mr=function(n,e,t){DA?.(n,e,t)},c$="svg",l$="math";function Fr(n){for(;Array.isArray(n);)n=n[mi];return n}function Vx(n,e){return Fr(e[n])}function gr(n,e){return Fr(e[n.index])}function jx(n,e){return n.data[e]}function xp(n,e){return n[e]}function us(n,e){let t=e[n];return ts(t)?t:t[mi]}function u$(n){return(n[me]&4)===4}function Lw(n){return(n[me]&128)===128}function d$(n){return yi(n[rn])}function Ha(n,e){return e==null?null:n[e]}function Ux(n){n[Oa]=0}function $x(n){n[me]&1024||(n[me]|=1024,Lw(n)&&Rp(n))}function h$(n,e){for(;n>0;)e=e[Xa],n--;return e}function kp(n){return!!(n[me]&9216||n[Zn]?.dirty)}function N_(n){n[Or].changeDetectionScheduler?.notify(8),n[me]&64&&(n[me]|=1024),kp(n)&&Rp(n)}function Rp(n){n[Or].changeDetectionScheduler?.notify(0);let e=po(n);for(;e!==null&&!(e[me]&8192||(e[me]|=8192,!Lw(e)));)e=po(e)}function Bx(n,e){if((n[me]&256)===256)throw new ie(911,!1);n[es]===null&&(n[es]=[]),n[es].push(e)}function f$(n,e){if(n[es]===null)return;let t=n[es].indexOf(e);t!==-1&&n[es].splice(t,1)}function po(n){let e=n[rn];return yi(e)?e[rn]:e}var Se={lFrame:Zx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var qx=!1;function p$(){return Se.lFrame.elementDepthCount}function g$(){Se.lFrame.elementDepthCount++}function m$(){Se.lFrame.elementDepthCount--}function zx(){return Se.bindingsEnabled}function Hx(){return Se.skipHydrationRootTNode!==null}function y$(n){return Se.skipHydrationRootTNode===n}function v$(){Se.skipHydrationRootTNode=null}function Ae(){return Se.lFrame.lView}function St(){return Se.lFrame.tView}function le(n){return Se.lFrame.contextLView=n,n[pr]}function ue(n){return Se.lFrame.contextLView=null,n}function _n(){let n=Gx();for(;n!==null&&n.type===64;)n=n.parent;return n}function Gx(){return Se.lFrame.currentTNode}function _$(){let n=Se.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function bo(n,e){let t=Se.lFrame;t.currentTNode=n,t.isParent=e}function Vw(){return Se.lFrame.isParent}function jw(){Se.lFrame.isParent=!1}function w$(){return Se.lFrame.contextLView}function Wx(){return qx}function SA(n){qx=n}function Tu(){let n=Se.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function b$(){return Se.lFrame.bindingIndex}function E$(n){return Se.lFrame.bindingIndex=n}function Uw(){return Se.lFrame.bindingIndex++}function $w(n){let e=Se.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function I$(){return Se.lFrame.inI18n}function C$(n,e){let t=Se.lFrame;t.bindingIndex=t.bindingRootIndex=n,P_(e)}function T$(){return Se.lFrame.currentDirectiveIndex}function P_(n){Se.lFrame.currentDirectiveIndex=n}function D$(n){let e=Se.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function Kx(){return Se.lFrame.currentQueryIndex}function Bw(n){Se.lFrame.currentQueryIndex=n}function S$(n){let e=n[Ce];return e.type===2?e.declTNode:e.type===1?n[An]:null}function Qx(n,e,t){if(t&xe.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&xe.Host);)if(i=S$(s),i===null||(s=s[Xa],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Se.lFrame=Yx();return r.currentTNode=e,r.lView=n,!0}function qw(n){let e=Yx(),t=n[Ce];Se.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Yx(){let n=Se.lFrame,e=n===null?null:n.child;return e===null?Zx(n):e}function Zx(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Jx(){let n=Se.lFrame;return Se.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var Xx=Jx;function zw(){let n=Jx();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function A$(n){return(Se.lFrame.contextLView=h$(n,Se.lFrame.contextLView))[pr]}function ds(){return Se.lFrame.selectedIndex}function go(n){Se.lFrame.selectedIndex=n}function Hw(){let n=Se.lFrame;return jx(n.tView,n.selectedIndex)}function x$(){return Se.lFrame.currentNamespace}var ek=!0;function Mp(){return ek}function Np(n){ek=n}function k$(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=Ox(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Pp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function qf(n,e,t){tk(n,e,3,t)}function zf(n,e,t,r){(n[me]&3)===t&&tk(n,e,t,r)}function h_(n,e){let t=n[me];(t&3)===e&&(t&=16383,t+=1,n[me]=t)}function tk(n,e,t,r){let i=r!==void 0?n[Oa]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Oa]+=65536),(a<s||s==-1)&&(R$(n,t,e,c),n[Oa]=(n[Oa]&4294901760)+c+2),c++}function AA(n,e){Mr(4,n,e);let t=je(null);try{e.call(n)}finally{je(t),Mr(5,n,e)}}function R$(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[me]>>14<n[Oa]>>16&&(n[me]&3)===e&&(n[me]+=16384,AA(a,s)):AA(a,s)}var ja=-1,mo=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function M$(n){return n instanceof mo}function N$(n){return(n.flags&8)!==0}function P$(n){return(n.flags&16)!==0}var f_={},O_=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=bp(r);let i=this.injector.get(e,f_,r);return i!==f_||t===f_?i:this.parentInjector.get(e,t,r)}};function nk(n){return n!==ja}function tp(n){return n&32767}function O$(n){return n>>16}function np(n,e){let t=O$(n),r=e;for(;t>0;)r=r[Xa],t--;return r}var F_=!0;function rp(n){let e=F_;return F_=n,e}var F$=256,rk=F$-1,ik=5,L$=0,Nr={};function V$(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(fu)&&(r=t[fu]),r==null&&(r=t[fu]=L$++);let i=r&rk,s=1<<i;e.data[n+(i>>ik)]|=s}function ip(n,e){let t=sk(n,e);if(t!==-1)return t;let r=e[Ce];r.firstCreatePass&&(n.injectorIndex=e.length,p_(r.data,n),p_(e,null),p_(r.blueprint,null));let i=Gw(n,e),s=n.injectorIndex;if(nk(i)){let o=tp(i),a=np(i,e),c=a[Ce].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function p_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function sk(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Gw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=uk(i),r===null)return ja;if(t++,i=i[Xa],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ja}function L_(n,e,t){V$(n,e,t)}function ok(n,e,t){if(t&xe.Optional||n!==void 0)return n;Rw(e,"NodeInjector")}function ak(n,e,t,r){if(t&xe.Optional&&r===void 0&&(r=null),!(t&(xe.Self|xe.Host))){let i=n[qa],s=Dn(void 0);try{return i?i.get(e,r,t&xe.Optional):fx(e,r,t&xe.Optional)}finally{Dn(s)}}return ok(r,e,t)}function ck(n,e,t,r=xe.Default,i){if(n!==null){if(e[me]&2048&&!(r&xe.Self)){let o=B$(n,e,t,r,Nr);if(o!==Nr)return o}let s=lk(n,e,t,r,Nr);if(s!==Nr)return s}return ak(e,t,r,i)}function lk(n,e,t,r,i){let s=U$(t);if(typeof s=="function"){if(!Qx(e,n,r))return r&xe.Host?ok(i,t,r):ak(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&xe.Optional))Rw(t);else return o}finally{Xx()}}else if(typeof s=="number"){let o=null,a=sk(n,e),c=ja,l=r&xe.Host?e[Jn][An]:null;for((a===-1||r&xe.SkipSelf)&&(c=a===-1?Gw(n,e):e[a+8],c===ja||!kA(r,!1)?a=-1:(o=e[Ce],a=tp(c),e=np(c,e)));a!==-1;){let d=e[Ce];if(xA(s,a,d.data)){let h=j$(a,e,t,o,r,l);if(h!==Nr)return h}c=e[a+8],c!==ja&&kA(r,e[Ce].data[a+8]===l)&&xA(s,a,e)?(o=d,a=tp(c),e=np(c,e)):a=-1}}return i}function j$(n,e,t,r,i,s){let o=e[Ce],a=o.data[n+8],c=r==null?Sp(a)&&F_:r!=o&&(a.type&3)!==0,l=i&xe.Host&&s===a,d=Hf(a,o,t,c,l);return d!==null?yo(e,o,d,a):Nr}function Hf(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,h=r?a:a+d,p=i?a+d:l;for(let m=h;m<p;m++){let _=o[m];if(m<c&&t===_||m>=c&&_.type===t)return m}if(i){let m=o[c];if(m&&is(m)&&m.type===t)return c}return null}function yo(n,e,t,r){let i=n[t],s=e.data;if(M$(i)){let o=i;o.resolving&&fU(hU(s[t]));let a=rp(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?Dn(o.injectImpl):null,d=Qx(n,r,xe.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&k$(t,s[t],e)}finally{l!==null&&Dn(l),rp(a),o.resolving=!1,Xx()}}return i}function U$(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(fu)?n[fu]:void 0;return typeof e=="number"?e>=0?e&rk:$$:e}function xA(n,e,t){let r=1<<n;return!!(t[e+(n>>ik)]&r)}function kA(n,e){return!(n&xe.Self)&&!(n&xe.Host&&e)}var lo=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return ck(this._tNode,this._lView,e,bp(r),t)}};function $$(){return new lo(_n(),Ae())}function Eo(n){return Iu(()=>{let e=n.prototype.constructor,t=e[Wf]||V_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Wf]||V_(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function V_(n){return ax(n)?()=>{let e=V_(mn(n));return e&&e()}:uo(n)}function B$(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[me]&2048&&!(o[me]&512);){let a=lk(s,o,t,r|xe.Self,Nr);if(a!==Nr)return a;let c=s.parent;if(!c){let l=o[Mx];if(l){let d=l.get(t,Nr,r);if(d!==Nr)return d}c=uk(o),o=o[Xa]}s=c}return i}function uk(n){let e=n[Ce],t=e.type;return t===2?e.declTNode:t===1?n[An]:null}function RA(n,e=null,t=null,r){let i=dk(n,e,t,r);return i.resolveInjectorInitializers(),i}function dk(n,e=null,t=null,r,i=new Set){let s=[t||Sn,HU(n)];return r=r||(typeof n=="object"?void 0:yn(n)),new vu(s,e||Ow(),r||null,i)}var ao=class ao{static create(e,t){if(Array.isArray(e))return RA({name:""},t,e,"");{let r=e.name??"";return RA({name:r},e.parent,e.providers,r)}}};ao.THROW_IF_NOT_FOUND=mu,ao.NULL=new Yf,ao.\u0275prov=Y({token:ao,providedIn:"any",factory:()=>q(mx)}),ao.__NG_ELEMENT_ID__=-1;var qn=ao;var q$=new Z("");q$.__NG_ELEMENT_ID__=n=>{let e=_n();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(n&xe.Optional)return null;throw new ie(204,!1)};var z$="ngOriginalError";function g_(n){return n[z$]}var hk=!0,Ww=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=H$,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),j_=class extends Ww{constructor(e){super(),this._lView=e}onDestroy(e){return Bx(this._lView,e),()=>f$(this._lView,e)}};function H$(){return new j_(Ae())}var hs=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var U_=class extends ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,Rx()&&(this.destroyRef=G(Ww,{optional:!0})??void 0,this.pendingTasks=G(hs,{optional:!0})??void 0)}emit(e){let t=je(null);try{super.next(e)}finally{je(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ht&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=U_;function sp(...n){}function fk(n){let e,t;function r(){n=sp;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function MA(n){return queueMicrotask(()=>n()),()=>{n=sp}}var Kw="isAngularZone",op=Kw+"_ID",G$=0,De=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=hk}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,Q$(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Kw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,W$,sp,sp);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},W$={};function Qw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function K$(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){fk(()=>{n.callbackScheduled=!1,$_(n),n.isCheckStableRunning=!0,Qw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$_(n)}function Q$(n){let e=()=>{K$(n)},t=G$++;n._inner=n._inner.fork({name:"angular",properties:{[Kw]:!0,[op]:t,[op+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(Y$(c))return r.invokeTask(s,o,a,c);try{return NA(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),PA(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return NA(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Z$(c)&&e(),PA(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,$_(n),Qw(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function $_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function NA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function PA(n){n._nesting--,Qw(n)}var ap=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Y$(n){return pk(n,"__ignore_ng_zone__")}function Z$(n){return pk(n,"__scheduler_tick__")}function pk(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function J$(n="zone.js",e){return n==="noop"?new ap:n==="zone.js"?new De(e):n}var fi=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&g_(e);for(;t&&g_(t);)t=g_(t);return t||null}},X$=new Z("",{providedIn:"root",factory:()=>{let n=G(De),e=G(fi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function eB(){return ec(_n(),Ae())}function ec(n,e){return new At(gr(n,e))}var At=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=eB;let n=e;return n})();function tB(n){return n instanceof At?n.nativeElement:n}function nB(){return this._results[Symbol.iterator]()}var B_=class n{get changes(){return this._changes??=new nt}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=n.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=nB)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=CU(e);(this._changesDetected=!IU(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function gk(n){return(n.flags&128)===128}var mk=new Map,rB=0;function iB(){return rB++}function sB(n){mk.set(n[Dp],n)}function q_(n){mk.delete(n[Dp])}var OA="__ngContext__";function ss(n,e){ts(e)?(n[OA]=e[Dp],sB(e)):n[OA]=e}function yk(n){return _k(n[wu])}function vk(n){return _k(n[fr])}function _k(n){for(;n!==null&&!yi(n);)n=n[fr];return n}var z_;function wk(n){z_=n}function oB(){if(z_!==void 0)return z_;if(typeof document<"u")return document;throw new ie(210,!1)}var Op=new Z("",{providedIn:"root",factory:()=>aB}),aB="ng",Yw=new Z(""),Kt=new Z("",{providedIn:"platform",factory:()=>"unknown"});var Zw=new Z("",{providedIn:"root",factory:()=>oB().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var cB="h",lB="b";var uB=()=>null;function Jw(n,e,t=!1){return uB(n,e,t)}var bk=!1,dB=new Z("",{providedIn:"root",factory:()=>bk});var Of;function hB(){if(Of===void 0&&(Of=null,Wt.trustedTypes))try{Of=Wt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Of}function Fp(n){return hB()?.createHTML(n)||n}var Ff;function fB(){if(Ff===void 0&&(Ff=null,Wt.trustedTypes))try{Ff=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Ff}function FA(n){return fB()?.createScriptURL(n)||n}var pi=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${sx})`}},H_=class extends pi{getTypeName(){return"HTML"}},G_=class extends pi{getTypeName(){return"Style"}},W_=class extends pi{getTypeName(){return"Script"}},K_=class extends pi{getTypeName(){return"URL"}},Q_=class extends pi{getTypeName(){return"ResourceURL"}};function er(n){return n instanceof pi?n.changingThisBreaksApplicationSecurity:n}function fs(n,e){let t=pB(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${sx})`)}return t===e}function pB(n){return n instanceof pi&&n.getTypeName()||null}function Ek(n){return new H_(n)}function Ik(n){return new G_(n)}function Ck(n){return new W_(n)}function Tk(n){return new K_(n)}function Dk(n){return new Q_(n)}function gB(n){let e=new Z_(n);return mB()?new Y_(e):e}var Y_=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Fp(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Z_=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Fp(e),t}};function mB(){try{return!!new window.DOMParser().parseFromString(Fp(""),"text/html")}catch{return!1}}var yB=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Lp(n){return n=String(n),n.match(yB)?n:"unsafe:"+n}function vi(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function Du(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var Sk=vi("area,br,col,hr,img,wbr"),Ak=vi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),xk=vi("rp,rt"),vB=Du(xk,Ak),_B=Du(Ak,vi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wB=Du(xk,vi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),LA=Du(Sk,_B,wB,vB),kk=vi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),bB=vi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),EB=vi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),IB=Du(kk,bB,EB),CB=vi("script,style,template"),J_=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=SB(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=DB(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=VA(e).toLowerCase();if(!LA.hasOwnProperty(t))return this.sanitizedSomething=!0,!CB.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!IB.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;kk[a]&&(c=Lp(c)),this.buf.push(" ",o,'="',jA(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=VA(e).toLowerCase();LA.hasOwnProperty(t)&&!Sk.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(jA(e))}};function TB(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function DB(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw Rk(e);return e}function SB(n){let e=n.firstChild;if(e&&TB(n,e))throw Rk(e);return e}function VA(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function Rk(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var AB=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,xB=/([^\#-~ |!])/g;function jA(n){return n.replace(/&/g,"&amp;").replace(AB,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(xB,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Lf;function Mk(n,e){let t=null;try{Lf=Lf||gB(n);let r=e?String(e):"";t=Lf.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Lf.getInertBodyElement(r)}while(r!==s);let a=new J_().sanitizeChildren(UA(t)||t);return Fp(a)}finally{if(t){let r=UA(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function UA(n){return"content"in n&&kB(n)?n.content:null}function kB(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var xn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(xn||{});function pt(n){let e=Nk();return e?e.sanitize(xn.URL,n)||"":fs(n,"URL")?er(n):Lp(gu(n))}function Vp(n){let e=Nk();if(e)return FA(e.sanitize(xn.RESOURCE_URL,n)||"");if(fs(n,"ResourceURL"))return FA(er(n));throw new ie(904,!1)}function Nk(){let n=Ae();return n&&n[Or].sanitizer}var RB=/^>|^->|<!--|-->|--!>|<!-$/g,MB=/(<|>)/g,NB="\u200B$1\u200B";function PB(n){return n.replace(RB,e=>e.replace(MB,NB))}function Xw(n){return n.ownerDocument.defaultView}function Pk(n){return n instanceof Function?n():n}function OB(n){return(n??G(qn)).get(Kt)==="browser"}var Lr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Lr||{}),FB;function e0(n,e){return FB(n,e)}function Fa(n,e,t,r,i){if(r!=null){let s,o=!1;yi(r)?s=r:ts(r)&&(o=!0,r=r[mi]);let a=Fr(r);n===0&&t!==null?i==null?Uk(e,t,a):cp(e,t,a,i||null,!0):n===1&&t!==null?cp(e,t,a,i||null,!0):n===2?YB(e,a,o):n===3&&e.destroyNode(a),s!=null&&JB(e,n,s,t,i)}}function LB(n,e){return n.createText(e)}function VB(n,e,t){n.setValue(e,t)}function jB(n,e){return n.createComment(PB(e))}function Ok(n,e,t){return n.createElement(e,t)}function UB(n,e){Fk(n,e),e[mi]=null,e[An]=null}function $B(n,e,t,r,i,s){r[mi]=i,r[An]=e,Up(n,r,t,1,i,s)}function Fk(n,e){e[Or].changeDetectionScheduler?.notify(9),Up(n,e,e[ft],2,null,null)}function BB(n){let e=n[wu];if(!e)return m_(n[Ce],n);for(;e;){let t=null;if(ts(e))t=e[wu];else{let r=e[Bn];r&&(t=r)}if(!t){for(;e&&!e[fr]&&e!==n;)ts(e)&&m_(e[Ce],e),e=e[rn];e===null&&(e=n),ts(e)&&m_(e[Ce],e),t=e&&e[fr]}e=t}}function qB(n,e,t,r){let i=Bn+r,s=t.length;r>0&&(t[i-1][fr]=e),r<s-Bn?(e[fr]=t[i],gx(t,Bn+r,e)):(t.push(e),e[fr]=null),e[rn]=t;let o=e[ho];o!==null&&t!==o&&Lk(o,e);let a=e[hi];a!==null&&a.insertView(n),N_(e),e[me]|=128}function Lk(n,e){let t=n[za],r=e[rn];if(ts(r))n[me]|=ep.HasTransplantedViews;else{let i=r[rn][Jn];e[Jn]!==i&&(n[me]|=ep.HasTransplantedViews)}t===null?n[za]=[e]:t.push(e)}function t0(n,e){let t=n[za],r=t.indexOf(e);t.splice(r,1)}function X_(n,e){if(n.length<=Bn)return;let t=Bn+e,r=n[t];if(r){let i=r[ho];i!==null&&i!==n&&t0(i,r),e>0&&(n[t-1][fr]=r[fr]);let s=Qf(n,Bn+e);UB(r[Ce],r);let o=s[hi];o!==null&&o.detachView(s[Ce]),r[rn]=null,r[fr]=null,r[me]&=-129}return r}function Vk(n,e){if(!(e[me]&256)){let t=e[ft];t.destroyNode&&Up(n,e,t,3,null,null),BB(e)}}function m_(n,e){if(e[me]&256)return;let t=je(null);try{e[me]&=-129,e[me]|=256,e[Zn]&&qv(e[Zn]),HB(n,e),zB(n,e),e[Ce].type===1&&e[ft].destroy();let r=e[ho];if(r!==null&&yi(e[rn])){r!==e[rn]&&t0(r,e);let i=e[hi];i!==null&&i.detachView(n)}q_(e)}finally{je(t)}}function zB(n,e){let t=n.cleanup,r=e[Jf];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Jf]=null);let i=e[es];if(i!==null){e[es]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function HB(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof mo)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Mr(4,a,c);try{c.call(a)}finally{Mr(5,a,c)}}else{Mr(4,i,s);try{s.call(i)}finally{Mr(5,i,s)}}}}}function jk(n,e,t){return GB(n,e.parent,t)}function GB(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[mi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Pr.None||s===Pr.Emulated)return null}return gr(r,t)}}function cp(n,e,t,r,i){n.insertBefore(e,t,r,i)}function Uk(n,e,t){n.appendChild(e,t)}function $A(n,e,t,r,i){r!==null?cp(n,e,t,r,i):Uk(n,e,t)}function $k(n,e){return n.parentNode(e)}function WB(n,e){return n.nextSibling(e)}function Bk(n,e,t){return QB(n,e,t)}function KB(n,e,t){return n.type&40?gr(n,t):null}var QB=KB,BA;function jp(n,e,t,r){let i=jk(n,r,e),s=e[ft],o=r.parent||e[An],a=Bk(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)$A(s,i,t[c],a,!1);else $A(s,i,t,a,!1);BA!==void 0&&BA(s,r,e,t,i)}function hu(n,e){if(e!==null){let t=e.type;if(t&3)return gr(e,n);if(t&4)return ew(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return hu(n,r);{let i=n[e.index];return yi(i)?ew(-1,i):Fr(i)}}else{if(t&128)return hu(n,e.next);if(t&32)return e0(e,n)()||Fr(n[e.index]);{let r=qk(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=po(n[Jn]);return hu(i,r)}else return hu(n,e.next)}}}return null}function qk(n,e){if(e!==null){let r=n[Jn][An],i=e.projection;return r.projection[i]}return null}function ew(n,e){let t=Bn+n+1;if(t<e.length){let r=e[t],i=r[Ce].firstChild;if(i!==null)return hu(r,i)}return e[fo]}function YB(n,e,t){n.removeChild(null,e,t)}function n0(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&ss(Fr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)n0(n,e,t.child,r,i,s,!1),Fa(e,n,i,a,s);else if(c&32){let l=e0(t,r),d;for(;d=l();)Fa(e,n,i,d,s);Fa(e,n,i,a,s)}else c&16?zk(n,e,r,t,i,s):Fa(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Up(n,e,t,r,i,s){n0(t,r,n.firstChild,e,i,s,!1)}function ZB(n,e,t){let r=e[ft],i=jk(n,t,e),s=t.parent||e[An],o=Bk(s,t,e);zk(r,0,e,t,i,o)}function zk(n,e,t,r,i,s){let o=t[Jn],c=o[An].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Fa(e,n,i,d,s)}else{let l=c,d=o[rn];gk(r)&&(l.flags|=128),n0(n,e,l,d,i,s,!0)}}function JB(n,e,t,r,i){let s=t[fo],o=Fr(t);s!==o&&Fa(e,n,r,s,i);for(let a=Bn;a<t.length;a++){let c=t[a];Up(c[Ce],c,n,e,r,s)}}function XB(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Lr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Lr.Important),n.setStyle(t,r,i,s))}}function e4(n,e,t){n.setAttribute(e,"style",t)}function Hk(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Gk(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&S_(n,e,r),i!==null&&Hk(n,e,i),s!==null&&e4(n,e,s)}var tr={};function L(n=1){Wk(St(),Ae(),ds()+n,!1)}function Wk(n,e,t,r){if(!r)if((e[me]&3)===3){let s=n.preOrderCheckHooks;s!==null&&qf(e,s,t)}else{let s=n.preOrderHooks;s!==null&&zf(e,s,0,t)}go(t)}function $(n,e=xe.Default){let t=Ae();if(t===null)return q(n,e);let r=_n();return ck(r,t,mn(n),e)}function Kk(){let n="invalid";throw new Error(n)}function Qk(n,e,t,r,i,s){let o=je(null);try{let a=null;i&ns.SignalBased&&(a=e[r][oi]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ns.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):Px(e,a,r,s)}finally{je(o)}}function t4(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)go(~i);else{let s=i,o=t[++r],a=t[++r];C$(o,s);let c=e[s];a(2,c)}}}finally{go(-1)}}function $p(n,e,t,r,i,s,o,a,c,l,d){let h=e.blueprint.slice();return h[mi]=i,h[me]=r|4|128|8|64,(l!==null||n&&n[me]&2048)&&(h[me]|=2048),Ux(h),h[rn]=h[Xa]=n,h[pr]=t,h[Or]=o||n&&n[Or],h[ft]=a||n&&n[ft],h[qa]=c||n&&n[qa]||null,h[An]=s,h[Dp]=iB(),h[_u]=d,h[Mx]=l,h[Jn]=e.type==2?n[Jn]:h,h}function tc(n,e,t,r,i){let s=n.data[e];if(s===null)s=n4(n,e,t,r,i),I$()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=_$();s.injectorIndex=o===null?-1:o.injectorIndex}return bo(s,!0),s}function n4(n,e,t,r,i){let s=Gx(),o=Vw(),a=o?s:s&&s.parent,c=n.data[e]=c4(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Yk(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Zk(n,e,t,r,i){let s=ds(),o=r&2;try{go(-1),o&&e.length>sn&&Wk(n,e,sn,!1),Mr(o?2:0,i),t(r,i)}finally{go(s),Mr(o?3:1,i)}}function r0(n,e,t){if(Fw(e)){let r=je(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{je(r)}}}function i0(n,e,t){zx()&&(p4(n,e,t,gr(t,e)),(t.flags&64)===64&&eR(n,e,t))}function s0(n,e,t=gr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function Jk(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=o0(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function o0(n,e,t,r,i,s,o,a,c,l,d){let h=sn+r,p=h+i,m=r4(h,p),_=typeof l=="function"?l():l;return m[Ce]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:_,incompleteFirstPass:!1,ssrId:d}}function r4(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:tr);return t}function i4(n,e,t,r){let s=r.get(dB,bk)||t===Pr.ShadowDom,o=n.selectRootElement(e,s);return s4(o),o}function s4(n){o4(n)}var o4=()=>null;function a4(n,e,t,r){let i=rR(e);i.push(t),n.firstCreatePass&&iR(n).push(r,i.length-1)}function c4(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Hx()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function qA(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=ns.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?zA(r,t,l,a,c):zA(r,t,l,a)}return r}function zA(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function l4(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let h=s[d],p=t?t.get(h):null,m=p?p.inputs:null,_=p?p.outputs:null;c=qA(0,h.inputs,d,c,m),l=qA(1,h.outputs,d,l,_);let b=c!==null&&o!==null&&!Nw(e)?I4(c,d,o):null;a.push(b)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function u4(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function a0(n,e,t,r,i,s,o,a){let c=gr(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(l0(n,t,d,r,i),Sp(e)&&d4(t,e.index)):e.type&3?(r=u4(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function d4(n,e){let t=us(e,n);t[me]&16||(t[me]|=64)}function c0(n,e,t,r){if(zx()){let i=r===null?null:{"":-1},s=m4(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Xk(n,e,t,o,i,a),i&&y4(t,r,i)}t.mergedAttrs=yu(t.mergedAttrs,t.attrs)}function Xk(n,e,t,r,i,s){for(let l=0;l<r.length;l++)L_(ip(t,e),n,r[l].type);_4(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=Yk(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=yu(t.mergedAttrs,d.hostAttrs),w4(n,t,e,c,d),v4(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let h=d.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}l4(n,t,s)}function h4(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;f4(o)!=a&&o.push(a),o.push(t,r,s)}}function f4(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function p4(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Sp(t)&&b4(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ip(t,e),ss(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=yo(e,n,a,t);if(ss(l,e),o!==null&&E4(e,a-i,l,c,t,o),is(c)){let d=us(t.index,e);d[pr]=yo(e,n,a,t)}}}function eR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=T$();try{go(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];P_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&g4(c,l)}}finally{go(-1),P_(o)}}function g4(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function m4(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(wx(e,o.selectors,!1))if(r||(r=[]),is(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;tw(n,e,c)}else r.unshift(o),tw(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function tw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function y4(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ie(-301,!1);r.push(e[i],s)}}}function v4(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;is(e)&&(t[""]=n)}}function _4(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function w4(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=uo(i.type,!0)),o=new mo(s,is(i),$);n.blueprint[r]=o,t[r]=o,h4(n,e,r,Yk(n,t,i.hostVars,tr),i)}function b4(n,e,t){let r=gr(e,n),i=Jk(t),s=n[Or].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Bp(n,$p(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function E4(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],h=o[a++];Qk(r,t,c,l,d,h)}}function I4(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function tR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function nR(n,e){let t=n.contentQueries;if(t!==null){let r=je(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Bw(s),a.contentQueries(2,e[o],o)}}}finally{je(r)}}}function Bp(n,e){return n[wu]?n[TA][fr]=e:n[wu]=e,n[TA]=e,e}function nw(n,e,t){Bw(0);let r=je(null);try{e(n,t)}finally{je(r)}}function rR(n){return n[Jf]??=[]}function iR(n){return n.cleanup??=[]}function sR(n,e){let t=n[qa],r=t?t.get(fi,null):null;r&&r.handleError(e)}function l0(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];Qk(d,l,r,a,c,i)}}function oR(n,e,t){let r=Vx(e,n);VB(n[ft],r,t)}function C4(n,e){let t=us(e,n),r=t[Ce];T4(r,t);let i=t[mi];i!==null&&t[_u]===null&&(t[_u]=Jw(i,t[qa])),u0(r,t,t[pr])}function T4(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function u0(n,e,t){qw(e);try{let r=n.viewQuery;r!==null&&nw(1,r,t);let i=n.template;i!==null&&Zk(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[hi]?.finishViewCreation(n),n.staticContentQueries&&nR(n,e),n.staticViewQueries&&nw(2,n.viewQuery,t);let s=n.components;s!==null&&D4(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[me]&=-5,zw()}}function D4(n,e){for(let t=0;t<e.length;t++)C4(n,e[t])}function aR(n,e,t,r){let i=je(null);try{let s=e.tView,a=n[me]&4096?4096:16,c=$p(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ho]=l;let d=n[hi];return d!==null&&(c[hi]=d.createEmbeddedView(s)),u0(s,c,t),c}finally{je(i)}}function rw(n,e){return!e||e.firstChild===null||gk(n)}function cR(n,e,t,r=!0){let i=e[Ce];if(qB(i,e,n,t),r){let o=ew(t,n),a=e[ft],c=$k(a,n[fo]);c!==null&&$B(i,n[An],a,e,c,o)}let s=e[_u];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function lp(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Fr(s)),yi(s)&&S4(s,r);let o=t.type;if(o&8)lp(n,e,t.child,r);else if(o&32){let a=e0(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=qk(e,t);if(Array.isArray(a))r.push(...a);else{let c=po(e[Jn]);lp(c[Ce],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function S4(n,e){for(let t=Bn;t<n.length;t++){let r=n[t],i=r[Ce].firstChild;i!==null&&lp(r[Ce],r,i,e)}n[fo]!==n[mi]&&e.push(n[fo])}var lR=[];function A4(n){return n[Zn]??x4(n)}function x4(n){let e=lR.pop()??Object.create(R4);return e.lView=n,e}function k4(n){n.lView[Zn]!==n&&(n.lView=null,lR.push(n))}var R4=ne(P({},nu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Rp(n.lView)},consumerOnSignalRead(){this.lView[Zn]=this}});function M4(n){let e=n[Zn]??Object.create(N4);return e.lView=n,e}var N4=ne(P({},nu),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=po(n.lView);for(;e&&!uR(e[Ce]);)e=po(e);e&&$x(e)},consumerOnSignalRead(){this.lView[Zn]=this}});function uR(n){return n.type!==2}var P4=100;function dR(n,e=!0,t=0){let r=n[Or],i=r.rendererFactory,s=!1;s||i.begin?.();try{O4(n,t)}catch(o){throw e&&sR(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function O4(n,e){let t=Wx();try{SA(!0),iw(n,e);let r=0;for(;kp(n);){if(r===P4)throw new ie(103,!1);r++,iw(n,1)}}finally{SA(t)}}function F4(n,e,t,r){let i=e[me];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Or].inlineEffectRunner?.flush(),qw(e);let a=!0,c=null,l=null;s||(uR(n)?(l=A4(e),c=rf(l)):FS()===null?(a=!1,l=M4(e),c=rf(l)):e[Zn]&&(qv(e[Zn]),e[Zn]=null));try{Ux(e),E$(n.bindingStartIndex),t!==null&&Zk(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&qf(e,m,null)}else{let m=n.preOrderHooks;m!==null&&zf(e,m,0,null),h_(e,0)}if(o||L4(e),hR(e,0),n.contentQueries!==null&&nR(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&qf(e,m)}else{let m=n.contentHooks;m!==null&&zf(e,m,1),h_(e,1)}t4(n,e);let h=n.components;h!==null&&pR(e,h,0);let p=n.viewQuery;if(p!==null&&nw(2,p,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&qf(e,m)}else{let m=n.viewHooks;m!==null&&zf(e,m,2),h_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[d_]){for(let m of e[d_])m();e[d_]=null}s||(e[me]&=-73)}catch(d){throw s||Rp(e),d}finally{l!==null&&($v(l,c),a&&k4(l)),zw()}}function hR(n,e){for(let t=yk(n);t!==null;t=vk(t))for(let r=Bn;r<t.length;r++){let i=t[r];fR(i,e)}}function L4(n){for(let e=yk(n);e!==null;e=vk(e)){if(!(e[me]&ep.HasTransplantedViews))continue;let t=e[za];for(let r=0;r<t.length;r++){let i=t[r];$x(i)}}}function V4(n,e,t){let r=us(e,n);fR(r,t)}function fR(n,e){Lw(n)&&iw(n,e)}function iw(n,e){let r=n[Ce],i=n[me],s=n[Zn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Bv(s)),o||=!1,s&&(s.dirty=!1),n[me]&=-9217,o)F4(r,n,r.template,n[pr]);else if(i&8192){hR(n,1);let a=r.components;a!==null&&pR(n,a,1)}}function pR(n,e,t){for(let r=0;r<e.length;r++)V4(n,e[r],t)}function d0(n,e){let t=Wx()?64:1088;for(n[Or].changeDetectionScheduler?.notify(e);n;){n[me]|=t;let r=po(n);if(R_(n)&&!r)return n;n=r}return null}var vo=class{get rootNodes(){let e=this._lView,t=e[Ce];return lp(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[pr]}set context(e){this._lView[pr]=e}get destroyed(){return(this._lView[me]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rn];if(yi(e)){let t=e[Xf],r=t?t.indexOf(this):-1;r>-1&&(X_(e,r),Qf(t,r))}this._attachedToViewContainer=!1}Vk(this._lView[Ce],this._lView)}onDestroy(e){Bx(this._lView,e)}markForCheck(){d0(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[me]&=-129}reattach(){N_(this._lView),this._lView[me]|=128}detectChanges(){this._lView[me]|=1024,dR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=R_(this._lView),t=this._lView[ho];t!==null&&!e&&t0(t,this._lView),Fk(this._lView[Ce],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=R_(this._lView),r=this._lView[ho];r!==null&&!t&&Lk(r,this._lView),N_(this._lView)}},_o=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$4;let n=e;return n})(),j4=_o,U4=class extends j4{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=aR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new vo(i)}};function $4(){return qp(_n(),Ae())}function qp(n,e){return n.type&4?new U4(e,n,ec(n,e)):null}var hre=new RegExp(`^(\\d+)*(${lB}|${cB})*(.*)`);var B4=()=>null;function sw(n,e){return B4(n,e)}var Ga=class{},gR=new Z("",{providedIn:"root",factory:()=>!1});var mR=new Z(""),yR=new Z(""),ow=class{},up=class{};function q4(n){let e=Error(`No component factory found for ${yn(n)}.`);return e[z4]=n,e}var z4="ngComponent";var aw=class{resolveComponentFactory(e){throw q4(e)}},R0=class R0{};R0.NULL=new aw;var Wa=R0,Ka=class{},kn=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>H4();let n=e;return n})();function H4(){let n=Ae(),e=_n(),t=us(e.index,n);return(ts(t)?t:n)[ft]}var G4=(()=>{let e=class e{};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();function dp(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=I_(i,a);else if(s==2){let c=a,l=e[++o];r=I_(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var hp=class extends Wa{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=rs(e);return new Qa(t,this.ngModule)}};function HA(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:ns.None;e?t.push({propName:o,templateName:r,isSignal:(a&ns.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function W4(n){let e=n.toLowerCase();return e==="svg"?c$:e==="math"?l$:null}var Qa=class extends up{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=HA(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return HA(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=UU(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=je(null);try{i=i||this.ngModule;let o=i instanceof vn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new O_(e,o):e,c=a.get(Ka,null);if(c===null)throw new ie(407,!1);let l=a.get(G4,null),d=a.get(Ga,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},p=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",_=r?i4(p,r,this.componentDef.encapsulation,a):Ok(p,m,W4(m)),b=512;this.componentDef.signals?b|=4096:this.componentDef.onPush||(b|=16);let E=null;_!==null&&(E=Jw(_,a,!0));let R=o0(0,null,null,1,0,null,null,null,null,null,null),j=$p(null,R,null,b,null,null,h,p,a,null,E);qw(j);let U,B,K=null;try{let Q=this.componentDef,T,w=null;Q.findHostDirectiveDefs?(T=[],w=new Map,Q.findHostDirectiveDefs(Q,T,w),T.push(Q)):T=[Q];let I=K4(j,_);K=Q4(I,_,Q,T,j,h,p),B=jx(R,sn),_&&J4(p,Q,_,r),t!==void 0&&X4(B,this.ngContentSelectors,t),U=Z4(K,Q,T,w,j,[e3]),u0(R,j,null)}catch(Q){throw K!==null&&q_(K),q_(j),Q}finally{zw()}return new cw(this.componentType,U,ec(B,j),j,B)}finally{je(s)}}},cw=class extends ow{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new vo(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;l0(s[Ce],s,i,e,t),this.previousInputValues.set(e,t);let o=us(this._tNode.index,s);d0(o,1)}}get injector(){return new lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function K4(n,e){let t=n[Ce],r=sn;return n[r]=e,tc(t,r,2,"#host",null)}function Q4(n,e,t,r,i,s,o){let a=i[Ce];Y4(r,n,e,o);let c=null;e!==null&&(c=Jw(e,i[qa]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let h=$p(i,Jk(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&tw(a,n,r.length-1),Bp(i,h),i[n.index]=h}function Y4(n,e,t,r){for(let i of n)e.mergedAttrs=yu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(dp(e,e.mergedAttrs,!0),t!==null&&Gk(r,t,e))}function Z4(n,e,t,r,i,s){let o=_n(),a=i[Ce],c=gr(o,i);Xk(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let h=o.directiveStart+d,p=yo(i,a,h,o);ss(p,i)}eR(a,i,o),c&&ss(c,i);let l=yo(i,a,o.directiveStart+o.componentOffset,o);if(n[pr]=i[pr]=l,s!==null)for(let d of s)d(l,e);return r0(a,o,i),l}function J4(n,e,t,r){if(r)S_(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=$U(e.selectors[0]);i&&S_(n,t,i),s&&s.length>0&&Hk(n,t,s.join(" "))}}function X4(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function e3(){let n=_n();Pp(Ae()[Ce],n)}var Rn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=t3;let n=e;return n})();function t3(){let n=_n();return _R(n,Ae())}var n3=Rn,vR=class extends n3{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ec(this._hostTNode,this._hostLView)}get injector(){return new lo(this._hostTNode,this._hostLView)}get parentInjector(){let e=Gw(this._hostTNode,this._hostLView);if(nk(e)){let t=np(e,this._hostLView),r=tp(e),i=t[Ce].data[r+8];return new lo(i,t)}else return new lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=GA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=sw(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,rw(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!i$(e),a;if(o)a=t;else{let _=t||{};a=_.index,r=_.injector,i=_.projectableNodes,s=_.environmentInjector||_.ngModuleRef}let c=o?e:new Qa(rs(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let b=(o?l:this.parentInjector).get(vn,null);b&&(s=b)}let d=rs(c.componentType??{}),h=sw(this._lContainer,d?.id??null),p=h?.firstChild??null,m=c.create(l,i,p,s);return this.insertImpl(m.hostView,a,rw(this._hostTNode,h)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(d$(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[rn],l=new vR(c,c[An],c[rn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return cR(o,i,s,r),e.attachToViewContainerRef(),gx(y_(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=GA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=X_(this._lContainer,t);r&&(Qf(y_(this._lContainer),t),Vk(r[Ce],r))}detach(e){let t=this._adjustIndex(e,-1),r=X_(this._lContainer,t);return r&&Qf(y_(this._lContainer),t)!=null?new vo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function GA(n){return n[Xf]}function y_(n){return n[Xf]||(n[Xf]=[])}function _R(n,e){let t,r=e[n.index];return yi(r)?t=r:(t=tR(r,e,null,n),e[n.index]=t,Bp(e,t)),i3(t,e,n,r),new vR(t,n,e)}function r3(n,e){let t=n[ft],r=t.createComment(""),i=gr(e,n),s=$k(t,i);return cp(t,s,r,WB(t,i),!1),r}var i3=a3,s3=()=>!1;function o3(n,e,t){return s3(n,e,t)}function a3(n,e,t,r){if(n[fo])return;let i;t.type&8?i=Fr(r):i=r3(e,t),n[fo]=i}var lw=class n{constructor(e){this.queryList=e,this.matches=null}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},uw=class n{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)h0(e,t).matches!==null&&this.queries[t].setDirty()}},dw=class{constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=g3(e):this.predicate=e}},hw=class n{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},fw=class n{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,c3(t,s)),this.matchTNodeWithReadOption(e,t,Hf(t,e,s,!1,!1))}else r===_o?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Hf(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===At||i===Rn||i===_o&&t.type&4)this.addMatch(t.index,-2);else{let s=Hf(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function c3(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function l3(n,e){return n.type&11?ec(n,e):n.type&4?qp(n,e):null}function u3(n,e,t,r){return t===-1?l3(e,n):t===-2?d3(n,e,r):yo(n,n[Ce],t,e)}function d3(n,e,t){if(t===At)return ec(e,n);if(t===_o)return qp(e,n);if(t===Rn)return _R(e,n)}function wR(n,e,t,r){let i=e[hi].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let l=o[c];if(l<0)a.push(null);else{let d=s[l];a.push(u3(e,d,o[c+1],t.metadata.read))}}i.matches=a}return i.matches}function pw(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=wR(n,e,i,t);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let l=s[a+1],d=e[-c];for(let h=Bn;h<d.length;h++){let p=d[h];p[ho]===p[rn]&&pw(p[Ce],p,l,r)}if(d[za]!==null){let h=d[za];for(let p=0;p<h.length;p++){let m=h[p];pw(m[Ce],m,l,r)}}}}}return r}function h3(n,e){return n[hi].queries[e].queryList}function f3(n,e,t){let r=new B_((t&4)===4);return a4(n,e,r,r.destroy),(e[hi]??=new uw).queries.push(new lw(r))-1}function p3(n,e,t){let r=St();return r.firstCreatePass&&(m3(r,new dw(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),f3(r,Ae(),e)}function g3(n){return n.split(",").map(e=>e.trim())}function m3(n,e,t){n.queries===null&&(n.queries=new hw),n.queries.track(new fw(e,t))}function h0(n,e){return n.queries.getByIndex(e)}function y3(n,e){let t=n[Ce],r=h0(t,e);return r.crossesNgTemplate?pw(t,n,e,[]):wR(t,n,r,e)}var WA=new Set;function nc(n){WA.has(n)||(WA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function v3(n){return typeof n=="function"&&n[oi]!==void 0}function Su(n,e){nc("NgSignals");let t=WS(n),r=t[oi];return e?.equal&&(r.equal=e.equal),t.set=i=>zv(r,i),t.update=i=>KS(r,i),t.asReadonly=_3.bind(t),t}function _3(){let n=this[oi];if(n.readonlyFn===void 0){let e=()=>this();e[oi]=n,n.readonlyFn=e}return n.readonlyFn}function bR(n){return v3(n)&&typeof n.set=="function"}function w3(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(C3))}return s}return fp.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((h,p)=>{a.push(""),o.push(r(h).then(m=>{a[l+p]=m,d.splice(d.indexOf(h),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>T3(s));e.push(c)}),E3(),Promise.all(e).then(()=>{})}var fp=new Map,b3=new Set;function E3(){let n=fp;return fp=new Map,n}function I3(){return fp.size===0}function C3(n){return typeof n=="string"?n:n.text()}function T3(n){b3.delete(n)}function D3(n){return Object.getPrototypeOf(n.prototype).constructor}function gt(n){let e=D3(n.type),t=!0,r=[n];for(;e;){let i;if(is(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Vf(n.inputs),o.inputTransforms=Vf(n.inputTransforms),o.declaredInputs=Vf(n.declaredInputs),o.outputs=Vf(n.outputs);let a=i.hostBindings;a&&R3(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&x3(n,c),l&&k3(n,l),S3(n,i),iU(n.outputs,i.outputs),is(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===gt&&(t=!1)}}e=Object.getPrototypeOf(e)}A3(r)}function S3(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function A3(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=yu(i.hostAttrs,t=yu(t,i.hostAttrs))}}function Vf(n){return n===Ua?{}:n===Sn?[]:n}function x3(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function k3(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function R3(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var os=class{},bu=class{};var pp=class extends os{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hp(this);let s=Cx(e);this._bootstrapComponents=Pk(s.bootstrap),this._r3Injector=dk(e,t,[{provide:os,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver},...r],yn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gp=class extends bu{constructor(e){super(),this.moduleType=e}create(e){return new pp(this.moduleType,e,[])}};function M3(n,e,t){return new pp(n,e,t,!1)}var gw=class extends os{constructor(e){super(),this.componentFactoryResolver=new hp(this),this.instance=null;let t=new vu([...e.providers,{provide:os,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver}],e.parent||Ow(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function zp(n,e,t=null){return new gw({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function ER(n){return f0(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function N3(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function f0(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function p0(n,e,t){return n[e]=t}function gi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function g0(n,e,t,r){let i=gi(n,e,t);return gi(n,e+1,r)||i}function P3(n,e,t,r,i){let s=g0(n,e,t,r);return gi(n,e+2,i)||s}function O3(n){return(n.flags&32)===32}function F3(n,e,t,r,i,s,o,a,c){let l=e.consts,d=tc(e,n,4,o||null,a||null);c0(e,t,d,Ha(l,c)),Pp(e,d);let h=d.tView=o0(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),h.queries=e.queries.embeddedTView(d)),d}function IR(n,e,t,r,i,s,o,a,c,l){let d=t+sn,h=e.firstCreatePass?F3(d,e,n,r,i,s,o,a,c):e.data[d];bo(h,!1);let p=L3(e,n,h,t);Mp()&&jp(e,n,p,h),ss(p,n);let m=tR(p,n,p,h);return n[d]=m,Bp(n,m),o3(m,h,n),Ap(h)&&i0(e,n,h),c!=null&&s0(n,h,l),h}function ge(n,e,t,r,i,s,o,a){let c=Ae(),l=St(),d=Ha(l.consts,s);return IR(c,l,n,e,t,r,i,d,o,a),ge}var L3=V3;function V3(n,e,t,r){return Np(!0),e[ft].createComment("")}var La=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(La||{}),CR=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})(),co=class co{constructor(){this.ngZone=G(De),this.scheduler=G(Ga),this.errorHandler=G(fi,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of co.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};co.PHASES=[La.EarlyRead,La.Write,La.MixedReadWrite,La.Read],co.\u0275prov=Y({token:co,providedIn:"root",factory:()=>new co});var mw=co,yw=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function m0(n,e){!e?.injector&&n$(m0);let t=e?.injector??G(qn);return OB(t)?(nc("NgAfterNextRender"),U3(n,t,e,!0)):$3}function j3(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function U3(n,e,t,r){let i=e.get(CR);i.impl??=e.get(mw);let s=t?.phase??La.MixedReadWrite,o=new yw(i.impl,j3(n,s),r,e.get(Ww));return i.impl.register(o),o}var $3={destroy(){}};function y0(n,e,t,r){return gi(n,Uw(),t)?e+gu(t)+r:tr}function B3(n,e,t,r,i,s){let o=b$(),a=g0(n,o,t,i);return $w(2),a?e+gu(t)+r+gu(i)+s:tr}function jf(n,e){return n<<17|e<<2}function wo(n){return n>>17&32767}function q3(n){return(n&2)==2}function z3(n,e){return n&131071|e<<17}function vw(n){return n|2}function Ya(n){return(n&131068)>>2}function v_(n,e){return n&-131069|e<<2}function H3(n){return(n&1)===1}function _w(n){return n|1}function G3(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=wo(o),c=Ya(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let h=t;d=h[1],(d===null||Cu(h,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let p=wo(n[a+1]);n[r+1]=jf(p,a),p!==0&&(n[p+1]=v_(n[p+1],r)),n[a+1]=z3(n[a+1],r)}else n[r+1]=jf(a,0),a!==0&&(n[a+1]=v_(n[a+1],r)),a=r;else n[r+1]=jf(c,0),a===0?a=r:n[c+1]=v_(n[c+1],r),c=r;l&&(n[r+1]=vw(n[r+1])),KA(n,d,r,!0),KA(n,d,r,!1),W3(e,d,n,r,s),o=jf(a,c),s?e.classBindings=o:e.styleBindings=o}function W3(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Cu(s,e)>=0&&(t[r+1]=_w(t[r+1]))}function KA(n,e,t,r){let i=n[t+1],s=e===null,o=r?wo(i):Ya(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];K3(c,e)&&(a=!0,n[o+1]=r?_w(l):vw(l)),o=r?wo(l):Ya(l)}a&&(n[t+1]=r?vw(i):_w(i))}function K3(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Cu(n,e)>=0:!1}var Vt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function TR(n){return n.substring(Vt.key,Vt.keyEnd)}function Q3(n){return n.substring(Vt.value,Vt.valueEnd)}function Y3(n){return AR(n),DR(n,Za(n,0,Vt.textEnd))}function DR(n,e){let t=Vt.textEnd;return t===e?-1:(e=Vt.keyEnd=J3(n,Vt.key=e,t),Za(n,e,t))}function Z3(n){return AR(n),SR(n,Za(n,0,Vt.textEnd))}function SR(n,e){let t=Vt.textEnd,r=Vt.key=Za(n,e,t);return t===r?-1:(r=Vt.keyEnd=X3(n,r,t),r=QA(n,r,t,58),r=Vt.value=Za(n,r,t),r=Vt.valueEnd=eq(n,r,t),QA(n,r,t,59))}function AR(n){Vt.key=0,Vt.keyEnd=0,Vt.value=0,Vt.valueEnd=0,Vt.textEnd=n.length}function Za(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function J3(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function X3(n,e,t){let r;for(;e<t&&((r=n.charCodeAt(e))===45||r===95||(r&-33)>=65&&(r&-33)<=90||r>=48&&r<=57);)e++;return e}function QA(n,e,t,r){return e=Za(n,e,t),e<t&&e++,e}function eq(n,e,t){let r=-1,i=-1,s=-1,o=e,a=o;for(;o<t;){let c=n.charCodeAt(o++);if(c===59)return a;c===34||c===39?a=o=YA(n,c,o,t):e===o-4&&s===85&&i===82&&r===76&&c===40?a=o=YA(n,41,o,t):c>32&&(a=o),s=i,i=r,r=c&-33}return a}function YA(n,e,t,r){let i=-1,s=t;for(;s<r;){let o=n.charCodeAt(s++);if(o==e&&i!==92)return s;o==92&&i===92?i=0:i=o}throw new Error}function W(n,e,t){let r=Ae(),i=Uw();if(gi(r,i,e)){let s=St(),o=Hw();a0(s,o,r,n,e,r[ft],t,!1)}return W}function ww(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";l0(n,t,s[o],o,r)}function mr(n,e,t){return xR(n,e,t,!1),mr}function rc(n,e){return xR(n,e,null,!0),rc}function v0(n){kR(NR,tq,n,!1)}function tq(n,e){for(let t=Z3(e);t>=0;t=SR(e,t))NR(n,TR(e),Q3(e))}function nq(n,e){for(let t=Y3(e);t>=0;t=DR(e,t))Ip(n,TR(e),!0)}function xR(n,e,t,r){let i=Ae(),s=St(),o=$w(2);if(s.firstUpdatePass&&MR(s,n,o,r),e!==tr&&gi(i,o,e)){let a=s.data[ds()];PR(s,a,i,i[ft],n,i[o+1]=lq(e,t),r,o)}}function kR(n,e,t,r){let i=St(),s=$w(2);i.firstUpdatePass&&MR(i,null,s,r);let o=Ae();if(t!==tr&&gi(o,s,t)){let a=i.data[ds()];if(OR(a,r)&&!RR(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=I_(c,t||"")),ww(i,a,o,t,r)}else cq(i,a,o,o[ft],o[s+1],o[s+1]=aq(n,e,t),r,s)}}function RR(n,e){return e>=n.expandoStartIndex}function MR(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[ds()],o=RR(n,t);OR(s,r)&&e===null&&!o&&(e=!1),e=rq(i,s,e,r),G3(i,s,e,t,o,r)}}function rq(n,e,t,r){let i=D$(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=__(null,n,e,t,r),t=Eu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=__(i,n,e,t,r),s===null){let c=iq(n,e,r);c!==void 0&&Array.isArray(c)&&(c=__(null,n,e,c[1],r),c=Eu(c,e.attrs,r),sq(n,e,r,c))}else s=oq(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function iq(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ya(r)!==0)return n[wo(r)]}function sq(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[wo(i)]=r}function oq(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Eu(r,o,t)}return Eu(r,e.attrs,t)}function __(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Eu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Eu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Ip(n,o,t?!0:e[++s]))}return n===void 0?null:n}function aq(n,e,t){if(t==null||t==="")return Sn;let r=[],i=er(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function NR(n,e,t){Ip(n,e,er(t))}function cq(n,e,t,r,i,s,o,a){i===tr&&(i=Sn);let c=0,l=0,d=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;d!==null||h!==null;){let p=c<i.length?i[c+1]:void 0,m=l<s.length?s[l+1]:void 0,_=null,b;d===h?(c+=2,l+=2,p!==m&&(_=h,b=m)):h===null||d!==null&&d<h?(c+=2,_=d):(l+=2,_=h,b=m),_!==null&&PR(n,e,t,r,_,b,o,a),d=c<i.length?i[c]:null,h=l<s.length?s[l]:null}}function PR(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=H3(l)?ZA(c,e,t,i,Ya(l),o):void 0;if(!mp(d)){mp(s)||q3(l)&&(s=ZA(c,null,t,i,a,o));let h=Vx(ds(),t);XB(r,o,h,i,s)}}function ZA(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,h=d===null,p=t[i+1];p===tr&&(p=h?Sn:void 0);let m=h?l_(p,r):d===r?p:void 0;if(l&&!mp(m)&&(m=l_(c,r)),mp(m)&&(a=m,o))return a;let _=n[i+1];i=o?wo(_):Ya(_)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=l_(c,r))}return a}function mp(n){return n!==void 0}function lq(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=yn(er(n)))),n}function OR(n,e){return(n.flags&(e?8:16))!==0}function Hp(n,e,t){let r=Ae(),i=y0(r,n,e,t);kR(Ip,nq,i,!0)}function uq(n,e,t,r,i,s){let o=e.consts,a=Ha(o,i),c=tc(e,n,2,r,a);return c0(e,t,c,Ha(o,s)),c.attrs!==null&&dp(c,c.attrs,!1),c.mergedAttrs!==null&&dp(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function D(n,e,t,r){let i=Ae(),s=St(),o=sn+n,a=i[ft],c=s.firstCreatePass?uq(o,s,i,e,t,r):s.data[o],l=dq(s,i,c,a,e,n);i[o]=l;let d=Ap(c);return bo(c,!0),Gk(a,l,c),!O3(c)&&Mp()&&jp(s,i,l,c),p$()===0&&ss(l,i),g$(),d&&(i0(s,i,c),r0(s,c,i)),r!==null&&s0(i,c),D}function A(){let n=_n();Vw()?jw():(n=n.parent,bo(n,!1));let e=n;y$(e)&&v$(),m$();let t=St();return t.firstCreatePass&&(Pp(t,n),Fw(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&N$(e)&&ww(t,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&P$(e)&&ww(t,e,Ae(),e.stylesWithoutHost,!1),A}function re(n,e,t,r){return D(n,e,t,r),A(),re}var dq=(n,e,t,r,i,s)=>(Np(!0),Ok(r,i,x$()));function hq(n,e,t,r,i){let s=e.consts,o=Ha(s,r),a=tc(e,n,8,"ng-container",o);o!==null&&dp(a,o,!0);let c=Ha(s,i);return c0(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function _0(n,e,t){let r=Ae(),i=St(),s=n+sn,o=i.firstCreatePass?hq(s,i,r,e,t):i.data[s];bo(o,!0);let a=fq(i,r,o,n);return r[s]=a,Mp()&&jp(i,r,a,o),ss(a,r),Ap(o)&&(i0(i,r,o),r0(i,o,r)),t!=null&&s0(r,o),_0}function w0(){let n=_n(),e=St();return Vw()?jw():(n=n.parent,bo(n,!1)),e.firstCreatePass&&(Pp(e,n),Fw(n)&&e.queries.elementEnd(n)),w0}var fq=(n,e,t,r)=>(Np(!0),jB(e[ft],""));function yt(){return Ae()}var oo=void 0;function pq(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var gq=["en",[["a","p"],["AM","PM"],oo],[["AM","PM"],oo,oo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],oo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],oo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",oo,"{1} 'at' {0}",oo],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",pq],w_={};function b0(n){let e=mq(n),t=JA(e);if(t)return t;let r=e.split("-")[0];if(t=JA(r),t)return t;if(r==="en")return gq;throw new ie(701,!1)}function JA(n){return n in w_||(w_[n]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[n]),w_[n]}var ic=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(ic||{});function mq(n){return n.toLowerCase().replace(/_/g,"-")}var yp="en-US";var yq=yp;function vq(n){typeof n=="string"&&(yq=n.toLowerCase().replace(/_/g,"-"))}var _q=(n,e,t)=>{};function oe(n,e,t,r){let i=Ae(),s=St(),o=_n();return FR(s,i,i[ft],o,n,e,r),oe}function wq(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Jf],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function FR(n,e,t,r,i,s,o){let a=Ap(r),l=n.firstCreatePass&&iR(n),d=e[pr],h=rR(e),p=!0;if(r.type&3||o){let b=gr(r,e),E=o?o(b):b,R=h.length,j=o?B=>o(Fr(B[r.index])):r.index,U=null;if(!o&&a&&(U=wq(n,e,i,r.index)),U!==null){let B=U.__ngLastListenerFn__||U;B.__ngNextListenerFn__=s,U.__ngLastListenerFn__=s,p=!1}else{s=ex(r,e,d,s),_q(b,i,s);let B=t.listen(E,i,s);h.push(s,B),l&&l.push(i,j,R,R+1)}}else s=ex(r,e,d,s);let m=r.outputs,_;if(p&&m!==null&&(_=m[i])){let b=_.length;if(b)for(let E=0;E<b;E+=2){let R=_[E],j=_[E+1],K=e[R][j].subscribe(s),Q=h.length;h.push(s,K),l&&l.push(i,r.index,Q,-(Q+1))}}}function XA(n,e,t,r){let i=je(null);try{return Mr(6,e,t),t(r)!==!1}catch(s){return sR(n,s),!1}finally{Mr(7,e,t),je(i)}}function ex(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?us(n.index,e):e;d0(o,5);let a=XA(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=XA(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function pe(n=1){return A$(n)}function bq(n,e){let t=null,r=OU(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?wx(n,s,!0):VU(r,s))return i}return t}function LR(n){let e=Ae()[Jn][An];if(!e.projection){let t=n?n.length:1,r=e.projection=TU(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?bq(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function VR(n,e=0,t,r,i,s){let o=Ae(),a=St(),c=r?n+1:null;c!==null&&IR(o,a,c,r,i,s,null,t);let l=tc(a,sn+n,16,null,t||null);l.projection===null&&(l.projection=e),jw();let h=!o[_u]||Hx();o[Jn][An].projection[l.projection]===null&&c!==null?Eq(o,a,c):h&&(l.flags&32)!==32&&ZB(a,o,l)}function Eq(n,e,t){let r=sn+t,i=e.data[r],s=n[r],o=sw(s,i.tView.ssrId),a=aR(n,i,void 0,{dehydratedView:o});cR(s,a,0,rw(i,o))}function on(n,e,t){return Gp(n,"",e,"",t),on}function Gp(n,e,t,r,i){let s=Ae(),o=y0(s,e,t,r);if(o!==tr){let a=St(),c=Hw();a0(a,c,s,n,o,s[ft],i,!1)}return Gp}function Io(n,e,t){p3(n,e,t)}function ps(n){let e=Ae(),t=St(),r=Kx();Bw(r+1);let i=h0(t,r);if(n.dirty&&u$(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=y3(e,r);n.reset(s,tB),n.notifyOnChanges()}return!0}return!1}function gs(){return h3(Ae(),Kx())}function Iq(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Co(n){let e=w$();return xp(e,sn+n)}function N(n,e=""){let t=Ae(),r=St(),i=n+sn,s=r.firstCreatePass?tc(r,i,1,e,null):r.data[i],o=Cq(r,t,s,e,n);t[i]=o,Mp()&&jp(r,t,o,s),bo(s,!1)}var Cq=(n,e,t,r,i)=>(Np(!0),LB(e[ft],r));function Ue(n){return ct("",n,""),Ue}function ct(n,e,t){let r=Ae(),i=y0(r,n,e,t);return i!==tr&&oR(r,ds(),i),ct}function Wp(n,e,t,r,i){let s=Ae(),o=B3(s,n,e,t,r,i);return o!==tr&&oR(s,ds(),o),Wp}function Vr(n,e,t){bR(e)&&(e=e());let r=Ae(),i=Uw();if(gi(r,i,e)){let s=St(),o=Hw();a0(s,o,r,n,e,r[ft],t,!1)}return Vr}function _i(n,e){let t=bR(n);return t&&n.set(e),t}function jr(n,e){let t=Ae(),r=St(),i=_n();return FR(r,t,t[ft],i,n,e),jr}function Tq(n,e,t){let r=St();if(r.firstCreatePass){let i=is(n);bw(t,r.data,r.blueprint,i,!0),bw(e,r.data,r.blueprint,i,!1)}}function bw(n,e,t,r,i){if(n=mn(n),Array.isArray(n))for(let s=0;s<n.length;s++)bw(n[s],e,t,r,i);else{let s=St(),o=Ae(),a=_n(),c=Ba(n)?n:mn(n.provide),l=kx(n),d=a.providerIndexes&1048575,h=a.directiveStart,p=a.providerIndexes>>20;if(Ba(n)||!n.multi){let m=new mo(l,i,$),_=E_(c,e,i?d:d+p,h);_===-1?(L_(ip(a,o),s,c),b_(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[_]=m,o[_]=m)}else{let m=E_(c,e,d+p,h),_=E_(c,e,d,d+p),b=m>=0&&t[m],E=_>=0&&t[_];if(i&&!E||!i&&!b){L_(ip(a,o),s,c);let R=Aq(i?Sq:Dq,t.length,i,r,l);!i&&E&&(t[_].providerFactory=R),b_(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(R),o.push(R)}else{let R=jR(t[i?_:m],l,!i&&r);b_(s,n,m>-1?m:_,R)}!i&&r&&E&&t[_].componentProviders++}}}function b_(n,e,t,r){let i=Ba(e),s=QU(e);if(i||s){let c=(s?mn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function jR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function E_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Dq(n,e,t,r){return Ew(this.multi,[])}function Sq(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=yo(t,t[Ce],this.providerFactory.index,r);s=a.slice(0,o),Ew(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Ew(i,s);return s}function Ew(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function Aq(n,e,t,r,i){let s=new mo(n,t,$);return s.multi=[],s.index=e,s.componentProviders=0,jR(s,i,r&&!t),s}function sc(n,e=[]){return t=>{t.providersResolver=(r,i)=>Tq(r,i?i(n):n,e)}}var xq=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Sx(!1,r.type),s=i.length>0?zp([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Y({token:e,providedIn:"environment",factory:()=>new e(q(vn))});let n=e;return n})();function Au(n){nc("NgStandalone"),n.getStandaloneInjector=e=>e.get(xq).getOrCreateStandaloneInjector(n)}function UR(n,e,t){let r=n.\u0275cmp;r.directiveDefs=Zf(e,!1),r.pipeDefs=Zf(t,!0)}function Kp(n,e,t,r){return $R(Ae(),Tu(),n,e,t,r)}function Qp(n,e,t,r,i){return BR(Ae(),Tu(),n,e,t,r,i)}function E0(n,e){let t=n[e];return t===tr?void 0:t}function $R(n,e,t,r,i,s){let o=e+t;return gi(n,o,i)?p0(n,o+1,s?r.call(s,i):r(i)):E0(n,o+1)}function BR(n,e,t,r,i,s,o){let a=e+t;return g0(n,a,i,s)?p0(n,a+2,o?r.call(o,i,s):r(i,s)):E0(n,a+2)}function kq(n,e,t,r,i,s,o,a){let c=e+t;return P3(n,c,i,s,o)?p0(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):E0(n,c+3)}function xt(n,e){let t=St(),r,i=n+sn;t.firstCreatePass?(r=Rq(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=uo(r.type,!0)),o,a=Dn($);try{let c=rp(!1),l=s();return rp(c),Iq(t,Ae(),i,l),l}finally{Dn(a)}}function Rq(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Mn(n,e,t){let r=n+sn,i=Ae(),s=xp(i,r);return I0(i,r)?$R(i,Tu(),e,s.transform,t,s):s.transform(t)}function qR(n,e,t,r){let i=n+sn,s=Ae(),o=xp(s,i);return I0(s,i)?BR(s,Tu(),e,o.transform,t,r,o):o.transform(t,r)}function oc(n,e,t,r,i){let s=n+sn,o=Ae(),a=xp(o,s);return I0(o,s)?kq(o,Tu(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function I0(n,e){return n[Ce].data[e].pure}function To(n,e){return qp(n,e)}var Uf=null;function Mq(n){Uf!==null&&(n.defaultEncapsulation!==Uf.defaultEncapsulation||n.preserveWhitespaces!==Uf.preserveWhitespaces)||(Uf=n)}var Yp=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var C0=new Z(""),xu=new Z(""),Zp=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,T0||(Nq(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(q(De),q(Jp),q(xu))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Jp=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return T0?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function Nq(n){T0=n}var T0;function ms(n){return!!n&&typeof n.then=="function"}function D0(n){return!!n&&typeof n.subscribe=="function"}var Xp=new Z(""),zR=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=G(Xp,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(ms(o))r.push(o);else if(D0(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),eg=new Z("");function Pq(){GS(()=>{throw new ie(600,!1)})}function Oq(n){return n.isBoundToModule}var Fq=10;function Lq(n,e,t){try{let r=t();return ms(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function HR(n,e){return Array.isArray(e)?e.reduce(HR,n):P(P({},n),e)}var wi=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=G(X$),this.afterRenderManager=G(CR),this.zonelessEnabled=G(gR),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ze,this.afterTick=new ze,this.componentTypes=[],this.components=[],this.isStable=G(hs).hasPendingTasks.pipe(de(r=>!r)),this._injector=G(vn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof up;if(!this._injector.get(zR).done){let m=!s&&Ix(r),_=!1;throw new ie(405,_)}let a;s?a=r:a=this._injector.get(Wa).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=Oq(a)?void 0:this._injector.get(os),l=i||a.selector,d=a.create(qn.NULL,[],l,c),h=d.location.nativeElement,p=d.injector.get(C0,null);return p?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),Gf(this.components,d),p?.unregisterApplication(h)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ie(101,!1);let r=je(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,je(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(Ka,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<Fq;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)Vq(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>kp(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;Gf(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(eg,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Gf(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ie(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Gf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Vq(n,e,t,r){if(!t&&!kp(n))return;dR(n,e,t&&!r?0:1)}var Iw=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},tg=(()=>{let e=class e{compileModuleSync(r){return new gp(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=Cx(r),o=Pk(s.declarations).reduce((a,c)=>{let l=rs(c);return l&&a.push(new Qa(l)),a},[]);return new Iw(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),jq=new Z("");function Uq(n,e,t){let r=new gp(t);return Promise.resolve(r)}function tx(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var $q=(()=>{let e=class e{constructor(){this.zone=G(De),this.changeDetectionScheduler=G(Ga),this.applicationRef=G(wi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Bq({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(ne(P({},GR()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:$a,multi:!0,useFactory:()=>{let r=G($q,{optional:!0});return()=>r.initialize()}},{provide:$a,multi:!0,useFactory:()=>{let r=G(qq);return()=>{r.initialize()}}},e===!0?{provide:mR,useValue:!0}:[],{provide:yR,useValue:t??hk}]}function GR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var qq=(()=>{let e=class e{constructor(){this.subscription=new ht,this.initialized=!1,this.zone=G(De),this.pendingTasks=G(hs)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var zq=(()=>{let e=class e{constructor(){this.appRef=G(wi),this.taskService=G(hs),this.ngZone=G(De),this.zonelessEnabled=G(gR),this.disableScheduling=G(mR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ht,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(op):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(yR,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ap||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?MA:fk;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(op+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,MA(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Hq(){return typeof $localize<"u"&&$localize.locale||yp}var ng=new Z("",{providedIn:"root",factory:()=>G(ng,xe.Optional|xe.SkipSelf)||Hq()});var S0=new Z("");function $f(n){return!!n.platformInjector}function Gq(n){let e=$f(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{$f(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(fi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),$f(n)){let s=()=>e.destroy(),o=n.platformInjector.get(S0);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{Gf(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return Lq(r,t,()=>{let s=e.get(zR);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(ng,yp);if(vq(o||yp),$f(n)){let a=e.get(wi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return Wq(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function Wq(n,e){let t=n.injector.get(wi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ie(-403,!1);e.push(n)}var WR=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=i?.scheduleInRootZone,o=()=>J$(i?.ngZone,ne(P({},GR({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:s})),a=i?.ignoreChangesOutsideZone,c=[Bq({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:Ga,useExisting:zq}],l=M3(r.moduleType,this.injector,c);return Gq({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let s=HR({},i);return Uq(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(S0,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(q(qn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),pu=null,KR=new Z("");function Kq(n){if(pu&&!pu.get(KR,!1))throw new ie(400,!1);Pq(),pu=n;let e=n.get(WR);return Zq(n),e}function A0(n,e,t=[]){let r=`Platform: ${e}`,i=new Z(r);return(s=[])=>{let o=QR();if(!o||o.injector.get(KR,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):Kq(Qq(a,r))}return Yq(i)}}function Qq(n=[],e){return qn.create({name:e,providers:[{provide:Tp,useValue:"platform"},{provide:S0,useValue:new Set([()=>pu=null])},...n]})}function Yq(n){let e=QR();if(!e)throw new ie(401,!1);return e}function QR(){return pu?.get(WR)??null}function Zq(n){n.get(Yw,null)?.forEach(t=>t())}function x0(){return!1}var Ur=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Jq;let n=e;return n})();function Jq(n){return Xq(_n(),Ae(),(n&16)===16)}function Xq(n,e,t){if(Sp(n)&&!t){let r=us(n.index,e);return new vo(r,r)}else if(n.type&175){let r=e[Jn];return new vo(r,e)}return null}var Cw=class{constructor(){}supports(e){return ER(e)}create(e){return new Tw(e)}},ez=(n,e)=>e,Tw=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ez}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<nx(r,i,s)?t:r,a=nx(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let p=0;p<l;p++){let m=p<s.length?s[p]:s[p]=0,_=m+p;d<=_&&_<l&&(s[p]=m+1)}let h=o.previousIndex;s[h]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!ER(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,N3(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new Dw(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new vp),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new vp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Dw=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Sw=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},vp=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new Sw,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function nx(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var Aw=class{constructor(){}supports(e){return e instanceof Map||f0(e)}create(){return new xw}},xw=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||f0(e)))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new kw(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},kw=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function rx(){return new k0([new Cw])}var k0=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||rx()),deps:[[e,new Ep,new Ja]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new ie(901,!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:rx});let n=e;return n})();function ix(){return new rg([new Aw])}var rg=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||ix()),deps:[[e,new Ep,new Ja]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new ie(901,!1)}};e.\u0275prov=Y({token:e,providedIn:"root",factory:ix});let n=e;return n})();var YR=A0(null,"core",[]),ZR=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(q(wi))},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({});let n=e;return n})();var JR=new Z("");function ig(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ku(n,e){nc("NgSignals");let t=qS(n);return e?.equal&&(t[oi].equal=e.equal),t}function yr(n){let e=je(null);try{return n()}finally{je(e)}}function XR(n){let e=rs(n);if(!e)return null;let t=new Qa(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var aM=null;function vr(){return aM}function cM(n){aM??=n}var sg=class{};var jt=new Z(""),B0=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(iz),providedIn:"platform"});let n=e;return n})(),lM=new Z(""),iz=(()=>{let e=class e extends B0{constructor(){super(),this._doc=G(jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return vr().getBaseHref(this._doc)}onPopState(r){let i=vr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=vr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function q0(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function eM(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function bi(n){return n&&n[0]!=="?"?"?"+n:n}var Do=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(z0),providedIn:"root"});let n=e;return n})(),uM=new Z(""),z0=(()=>{let e=class e extends Do{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??G(jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return q0(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+bi(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+bi(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+bi(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(q(B0),q(uM,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),dM=(()=>{let e=class e extends Do{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=q0(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+bi(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+bi(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(q(B0),q(uM,8))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),cc=(()=>{let e=class e{constructor(r){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=az(eM(tM(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+bi(i))}normalize(r){return e.stripTrailingSlash(oz(this._basePath,tM(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+bi(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+bi(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=bi,e.joinWithSlash=q0,e.stripTrailingSlash=eM,e.\u0275fac=function(i){return new(i||e)(q(Do))},e.\u0275prov=Y({token:e,factory:()=>sz(),providedIn:"root"});let n=e;return n})();function sz(){return new cc(q(Do))}function oz(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function tM(n){return n.replace(/\/index.html$/,"")}function az(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var hM=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(hM||{});var Ei={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Ru(n,e){let t=b0(n),r=t[ic.NumberSymbols][e];if(typeof r>"u"){if(e===Ei.CurrencyDecimal)return t[ic.NumberSymbols][Ei.Decimal];if(e===Ei.CurrencyGroup)return t[ic.NumberSymbols][Ei.Group]}return r}function cz(n,e){return b0(n)[ic.NumberFormats][e]}var lz=/^(\d+)?\.((\d+)(-(\d+))?)?$/,nM=22,og=".",Mu="0",uz=";",dz=",",M0="#";function hz(n,e,t,r,i,s,o=!1){let a="",c=!1;if(!isFinite(n))a=Ru(t,Ei.Infinity);else{let l=mz(n);o&&(l=gz(l));let d=e.minInt,h=e.minFrac,p=e.maxFrac;if(s){let j=s.match(lz);if(j===null)throw new Error(`${s} is not a valid digit info`);let U=j[1],B=j[3],K=j[5];U!=null&&(d=N0(U)),B!=null&&(h=N0(B)),K!=null?p=N0(K):B!=null&&h>p&&(p=h)}yz(l,h,p);let m=l.digits,_=l.integerLen,b=l.exponent,E=[];for(c=m.every(j=>!j);_<d;_++)m.unshift(0);for(;_<0;_++)m.unshift(0);_>0?E=m.splice(_,m.length):(E=m,m=[0]);let R=[];for(m.length>=e.lgSize&&R.unshift(m.splice(-e.lgSize,m.length).join(""));m.length>e.gSize;)R.unshift(m.splice(-e.gSize,m.length).join(""));m.length&&R.unshift(m.join("")),a=R.join(Ru(t,r)),E.length&&(a+=Ru(t,i)+E.join("")),b&&(a+=Ru(t,Ei.Exponential)+"+"+b)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function fz(n,e,t){let r=cz(e,hM.Decimal),i=pz(r,Ru(e,Ei.MinusSign));return hz(n,i,e,Ei.Group,Ei.Decimal,t)}function pz(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(uz),i=r[0],s=r[1],o=i.indexOf(og)!==-1?i.split(og):[i.substring(0,i.lastIndexOf(Mu)+1),i.substring(i.lastIndexOf(Mu)+1)],a=o[0],c=o[1]||"";t.posPre=a.substring(0,a.indexOf(M0));for(let d=0;d<c.length;d++){let h=c.charAt(d);h===Mu?t.minFrac=t.maxFrac=d+1:h===M0?t.maxFrac=d+1:t.posSuf+=h}let l=a.split(dz);if(t.gSize=l[1]?l[1].length:0,t.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,s){let d=i.length-t.posPre.length-t.posSuf.length,h=s.indexOf(M0);t.negPre=s.substring(0,h).replace(/'/g,""),t.negSuf=s.slice(h+d).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function gz(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function mz(n){let e=Math.abs(n)+"",t=0,r,i,s,o,a;for((i=e.indexOf(og))>-1&&(e=e.replace(og,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===Mu;s++);if(s===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===Mu;)a--;for(i-=s,r=[],o=0;s<=a;s++,o++)r[o]=Number(e.charAt(s))}return i>nM&&(r=r.splice(0,nM-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function yz(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,s=Math.min(Math.max(e,i),t),o=s+n.integerLen,a=r[o];if(o>0){r.splice(Math.max(n.integerLen,o));for(let h=o;h<r.length;h++)r[h]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,o=s+1),r[0]=0;for(let h=1;h<o;h++)r[h]=0}if(a>=5)if(o-1<0){for(let h=0;h>o;h--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[o-1]++;for(;i<Math.max(0,s);i++)r.push(0);let c=s!==0,l=e+n.integerLen,d=r.reduceRight(function(h,p,m,_){return p=p+h,_[m]=p<10?p:p-10,c&&(_[m]===0&&m>=l?_.pop():c=!1),p>=10?1:0},0);d&&(r.unshift(d),n.integerLen++)}function N0(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function ag(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var P0=/\s+/,rM=[],lc=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=rM,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(P0):rM}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(P0):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(P0).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)($(At),$(kn))},e.\u0275dir=Dt({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var O0=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Bt=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new O0(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),iM(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);iM(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(Rn),$(_o),$(k0))},e.\u0275dir=Dt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function iM(n,e){n.context.$implicit=e.item}var qt=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new F0,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){sM("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){sM("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(Rn),$(_o))},e.\u0275dir=Dt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),F0=class{constructor(){this.$implicit=null,this.ngIf=null}};function sM(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${yn(e)}'.`)}var fM=(()=>{let e=class e{constructor(r,i,s){this._ngEl=r,this._differs=i,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(r){this._ngStyle=r,!this._differ&&r&&(this._differ=this._differs.find(r).create())}ngDoCheck(){if(this._differ){let r=this._differ.diff(this._ngStyle);r&&this._applyChanges(r)}}_setStyle(r,i){let[s,o]=r.split("."),a=s.indexOf("-")===-1?void 0:Lr.DashCase;i!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${i}${o}`:i,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(r){r.forEachRemovedItem(i=>this._setStyle(i.key,null)),r.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),r.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}};e.\u0275fac=function(i){return new(i||e)($(At),$(rg),$(kn))},e.\u0275dir=Dt({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let n=e;return n})();function H0(n,e){return new ie(2100,!1)}var L0=class{createSubscription(e,t){return yr(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){yr(()=>e.unsubscribe())}},V0=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},vz=new V0,_z=new L0,pM=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(ms(r))return vz;if(D0(r))return _z;throw H0(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)($(Ur,16))},e.\u0275pipe=cs({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();function wz(n,e){return{key:n,value:e}}var ys=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=oM}transform(r,i=oM){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let s=this.differ.diff(r),o=i!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(wz(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)($(rg,16))},e.\u0275pipe=cs({name:"keyvalue",type:e,pure:!1,standalone:!0});let n=e;return n})();function oM(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var gM=(()=>{let e=class e{constructor(r){this._locale=r}transform(r,i,s){if(!bz(r))return null;s||=this._locale;try{let o=Ez(r);return fz(o,s,i)}catch(o){throw H0(e,o.message)}}};e.\u0275fac=function(i){return new(i||e)($(ng,16))},e.\u0275pipe=cs({name:"number",type:e,pure:!0,standalone:!0});let n=e;return n})();function bz(n){return!(n==null||n===""||n!==n)}function Ez(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var uc=(()=>{let e=class e{transform(r,i,s){if(r==null)return null;if(!this.supports(r))throw H0(e,r);return r.slice(i,s)}supports(r){return typeof r=="string"||Array.isArray(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=cs({name:"slice",type:e,pure:!1,standalone:!0});let n=e;return n})();var dc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({});let n=e;return n})(),G0="browser",Iz="server";function vs(n){return n===G0}function _s(n){return n===Iz}var mM=(()=>{let e=class e{};e.\u0275prov=Y({token:e,providedIn:"root",factory:()=>vs(G(Kt))?new j0(G(jt),window):new U0});let n=e;return n})(),j0=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=Cz(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function Cz(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var U0=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ac=class{};var Pu=class{},lg=class{},Nn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var K0=class{encodeKey(e){return yM(e)}encodeValue(e){return yM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function Tz(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var Dz=/%(\d[a-f0-9])/gi,Sz={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function yM(n){return encodeURIComponent(n).replace(Dz,(e,t)=>Sz[t]??e)}function cg(n){return`${n}`}var bs=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new K0,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Tz(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(cg):[cg(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(cg(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(cg(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Q0=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Az(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function vM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function _M(n){return typeof Blob<"u"&&n instanceof Blob}function wM(n){return typeof FormData<"u"&&n instanceof FormData}function xz(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Nu=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(Az(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Nn,this.context??=new Q0,!this.params)this.params=new bs,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||vM(this.body)||_M(this.body)||wM(this.body)||xz(this.body)?this.body:this.body instanceof bs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||wM(this.body)?null:_M(this.body)?this.body.type||null:vM(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof bs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,m)=>p.set(m,e.setHeaders[m]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((p,m)=>p.set(m,e.setParams[m]),d)),new n(t,r,o,{params:d,headers:l,context:h,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},Es=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Es||{}),Ou=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Nn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},ug=class n extends Ou{constructor(e={}){super(e),this.type=Es.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fu=class n extends Ou{constructor(e={}){super(e),this.type=Es.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ws=class extends Ou{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},CM=200,kz=204;function W0(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Ii=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof Nu)o=r;else{let l;s.headers instanceof Nn?l=s.headers:l=new Nn(s.headers);let d;s.params&&(s.params instanceof bs?d=s.params:d=new bs({fromObject:s.params})),o=new Nu(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=he(o).pipe(li(l=>this.handler.handle(l)));if(r instanceof Nu||s.observe==="events")return a;let c=a.pipe(Lt(l=>l instanceof Fu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(de(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(de(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(de(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(de(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new bs().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,W0(s,i))}post(r,i,s={}){return this.request("POST",r,W0(s,i))}put(r,i,s={}){return this.request("PUT",r,W0(s,i))}};e.\u0275fac=function(i){return new(i||e)(q(Pu))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Rz=/^\)\]\}',?\n/,Mz="X-Request-URL";function bM(n){if(n.url)return n.url;let e=Mz.toLocaleLowerCase();return n.headers.get(e)}var Nz=(()=>{let e=class e{constructor(){this.fetchImpl=G(Y0,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=G(De)}handle(r){return new we(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(Z0,o=>i.error(new ws({error:o}))),()=>s.abort()})}doRequest(r,i,s){return y(this,null,function*(){let o=this.createRequestInit(r),a;try{let _=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,P({signal:i},o)));Pz(_),s.next({type:Es.Sent}),a=yield _}catch(_){s.error(new ws({error:_,status:_.status??0,statusText:_.statusText,url:r.urlWithParams,headers:_.headers}));return}let c=new Nn(a.headers),l=a.statusText,d=bM(a)??r.urlWithParams,h=a.status,p=null;if(r.reportProgress&&s.next(new ug({headers:c,status:h,statusText:l,url:d})),a.body){let _=a.headers.get("content-length"),b=[],E=a.body.getReader(),R=0,j,U,B=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>y(this,null,function*(){for(;;){let{done:Q,value:T}=yield E.read();if(Q)break;if(b.push(T),R+=T.length,r.reportProgress){U=r.responseType==="text"?(U??"")+(j??=new TextDecoder).decode(T,{stream:!0}):void 0;let w=()=>s.next({type:Es.DownloadProgress,total:_?+_:void 0,loaded:R,partialText:U});B?B.run(w):w()}}}));let K=this.concatChunks(b,R);try{let Q=a.headers.get("Content-Type")??"";p=this.parseBody(r,K,Q)}catch(Q){s.error(new ws({error:Q,headers:new Nn(a.headers),status:a.status,statusText:a.statusText,url:bM(a)??r.urlWithParams}));return}}h===0&&(h=p?CM:0),h>=200&&h<300?(s.next(new Fu({body:p,headers:c,status:h,statusText:l,url:d})),s.complete()):s.error(new ws({error:p,headers:c,status:h,statusText:l,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(Rz,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Y0=class{};function Z0(){}function Pz(n){n.then(Z0,Z0)}function Oz(n,e){return e(n)}function Fz(n,e,t){return(r,i)=>Xn(t,()=>e(r,s=>n(s,i)))}var TM=new Z(""),Lz=new Z(""),Vz=new Z("",{providedIn:"root",factory:()=>!0});var EM=(()=>{let e=class e extends Pu{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=G(hs),this.contributeToStability=G(Vz)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(TM),...this.injector.get(Lz,[])]));this.chain=i.reduceRight((s,o)=>Fz(s,o,this.injector),Oz)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(io(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(q(lg),q(vn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();var jz=/^\)\]\}',?\n/;function Uz(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var IM=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ie(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Pe(i.\u0275loadImpl()):he(null)).pipe(Je(()=>new we(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((E,R)=>a.setRequestHeader(E,R.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let E=r.detectContentTypeHeader();E!==null&&a.setRequestHeader("Content-Type",E)}if(r.responseType){let E=r.responseType.toLowerCase();a.responseType=E!=="json"?E:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let E=a.statusText||"OK",R=new Nn(a.getAllResponseHeaders()),j=Uz(a)||r.url;return l=new ug({headers:R,status:a.status,statusText:E,url:j}),l},h=()=>{let{headers:E,status:R,statusText:j,url:U}=d(),B=null;R!==kz&&(B=typeof a.response>"u"?a.responseText:a.response),R===0&&(R=B?CM:0);let K=R>=200&&R<300;if(r.responseType==="json"&&typeof B=="string"){let Q=B;B=B.replace(jz,"");try{B=B!==""?JSON.parse(B):null}catch(T){B=Q,K&&(K=!1,B={error:T,text:B})}}K?(o.next(new Fu({body:B,headers:E,status:R,statusText:j,url:U||void 0})),o.complete()):o.error(new ws({error:B,headers:E,status:R,statusText:j,url:U||void 0}))},p=E=>{let{url:R}=d(),j=new ws({error:E,status:a.status||0,statusText:a.statusText||"Unknown Error",url:R||void 0});o.error(j)},m=!1,_=E=>{m||(o.next(d()),m=!0);let R={type:Es.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(R.total=E.total),r.responseType==="text"&&a.responseText&&(R.partialText=a.responseText),o.next(R)},b=E=>{let R={type:Es.UploadProgress,loaded:E.loaded};E.lengthComputable&&(R.total=E.total),o.next(R)};return a.addEventListener("load",h),a.addEventListener("error",p),a.addEventListener("timeout",p),a.addEventListener("abort",p),r.reportProgress&&(a.addEventListener("progress",_),c!==null&&a.upload&&a.upload.addEventListener("progress",b)),a.send(c),o.next({type:Es.Sent}),()=>{a.removeEventListener("error",p),a.removeEventListener("abort",p),a.removeEventListener("load",h),a.removeEventListener("timeout",p),r.reportProgress&&(a.removeEventListener("progress",_),c!==null&&a.upload&&a.upload.removeEventListener("progress",b)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(q(ac))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),DM=new Z(""),$z="XSRF-TOKEN",Bz=new Z("",{providedIn:"root",factory:()=>$z}),qz="X-XSRF-TOKEN",zz=new Z("",{providedIn:"root",factory:()=>qz}),dg=class{},Hz=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=ag(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(q(jt),q(Kt),q(Bz))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function Gz(n,e){let t=n.url.toLowerCase();if(!G(DM)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=G(dg).getToken(),i=G(zz);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function SM(...n){let e=[Ii,IM,EM,{provide:Pu,useExisting:EM},{provide:lg,useFactory:()=>G(Nz,{optional:!0})??G(IM)},{provide:TM,useValue:Gz,multi:!0},{provide:DM,useValue:!0},{provide:dg,useClass:Hz}];for(let t of n)e.push(...t.\u0275providers);return Cp(e)}var tb=class extends sg{constructor(){super(...arguments),this.supportsDOMEvents=!0}},nb=class n extends tb{static makeCurrent(){cM(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Wz();return t==null?null:Kz(t)}resetBaseElement(){Lu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ag(document.cookie,e)}},Lu=null;function Wz(){return Lu=Lu||document.querySelector("base"),Lu?Lu.getAttribute("href"):null}function Kz(n){return new URL(n,document.baseURI).pathname}var rb=class{addToWindow(e){Wt.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new ie(5103,!1);return s},Wt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Wt.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Wt.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Wt.frameworkStabilizers||(Wt.frameworkStabilizers=[]),Wt.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?vr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},Qz=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),hg=new Z(""),RM=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new ie(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(q(hg),q(De))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),Vu=class{constructor(e){this._doc=e}},X0="ng-app-id",MM=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=_s(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${X0}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(X0),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(X0,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(q(jt),q(Op),q(Zw,8),q(Kt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),eb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sb=/%COMP%/g,NM="%COMP%",Yz=`_nghost-${NM}`,Zz=`_ngcontent-${NM}`,Jz=!0,Xz=new Z("",{providedIn:"root",factory:()=>Jz});function eH(n){return Zz.replace(sb,n)}function tH(n){return Yz.replace(sb,n)}function PM(n,e){return e.map(t=>t.replace(sb,n))}var AM=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=_s(c),this.defaultRenderer=new ju(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Pr.ShadowDom&&(i=ne(P({},i),{encapsulation:Pr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof fg?s.applyToHost(r):s instanceof Uu&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(i.encapsulation){case Pr.Emulated:o=new fg(l,d,i,this.appId,h,a,c,p);break;case Pr.ShadowDom:return new ib(l,d,r,i,a,c,this.nonce,p);default:o=new Uu(l,d,i,h,a,c,p);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(q(RM),q(MM),q(Op),q(Xz),q(jt),q(Kt),q(De),q(Zw))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),ju=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(eb[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(xM(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(xM(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=eb[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=eb[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Lr.DashCase|Lr.Important)?e.style.setProperty(t,r,i&Lr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Lr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=vr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function xM(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ib=class extends ju{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=PM(i.id,i.styles);for(let d of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Uu=class extends ju{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?PM(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},fg=class extends Uu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=eH(l),this.hostAttr=tH(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},nH=(()=>{let e=class e extends Vu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(q(jt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),rH=(()=>{let e=class e extends Vu{constructor(r){super(r),this.delegate=G(JR,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(q(jt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),kM=["alt","control","meta","shift"],iH={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},oH=(()=>{let e=class e extends Vu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),kM.forEach(d=>{let h=i.indexOf(d);h>-1&&(i.splice(h,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=iH[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),kM.forEach(a=>{if(a!==s){let c=sH[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(q(jt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function aH(){nb.makeCurrent()}function cH(){return new fi}function lH(){return wk(document),document}var uH=[{provide:Kt,useValue:G0},{provide:Yw,useValue:aH,multi:!0},{provide:jt,useFactory:lH,deps:[]}],OM=A0(YR,"browser",uH),dH=new Z(""),hH=[{provide:xu,useClass:rb,deps:[]},{provide:C0,useClass:Zp,deps:[De,Jp,xu]},{provide:Zp,useClass:Zp,deps:[De,Jp,xu]}],fH=[{provide:Tp,useValue:"root"},{provide:fi,useFactory:cH,deps:[]},{provide:hg,useClass:nH,multi:!0,deps:[jt,De,Kt]},{provide:hg,useClass:oH,multi:!0,deps:[jt]},{provide:hg,useClass:rH,multi:!0},AM,MM,RM,{provide:Ka,useExisting:AM},{provide:ac,useClass:Qz,deps:[]},[]],FM=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:Op,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(q(dH,12))},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({providers:[...fH,...hH],imports:[dc,ZR]});let n=e;return n})(),LM=(()=>{let e=class e{constructor(r){this._doc=r,this._dom=vr()}addTag(r,i=!1){return r?this._getOrCreateElement(r,i):null}addTags(r,i=!1){return r?r.reduce((s,o)=>(o&&s.push(this._getOrCreateElement(o,i)),s),[]):[]}getTag(r){return r&&this._doc.querySelector(`meta[${r}]`)||null}getTags(r){if(!r)return[];let i=this._doc.querySelectorAll(`meta[${r}]`);return i?[].slice.call(i):[]}updateTag(r,i){if(!r)return null;i=i||this._parseSelector(r);let s=this.getTag(i);return s?this._setMetaElementAttributes(r,s):this._getOrCreateElement(r,!0)}removeTag(r){this.removeTagElement(this.getTag(r))}removeTagElement(r){r&&this._dom.remove(r)}_getOrCreateElement(r,i=!1){if(!i){let a=this._parseSelector(r),c=this.getTags(a).filter(l=>this._containsAttributes(r,l))[0];if(c!==void 0)return c}let s=this._dom.createElement("meta");return this._setMetaElementAttributes(r,s),this._doc.getElementsByTagName("head")[0].appendChild(s),s}_setMetaElementAttributes(r,i){return Object.keys(r).forEach(s=>i.setAttribute(this._getMetaKeyMap(s),r[s])),i}_parseSelector(r){let i=r.name?"name":"property";return`${i}="${r[i]}"`}_containsAttributes(r,i){return Object.keys(r).every(s=>i.getAttribute(this._getMetaKeyMap(s))===r[s])}_getMetaKeyMap(r){return pH[r]||r}};e.\u0275fac=function(i){return new(i||e)(q(jt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),pH={httpEquiv:"http-equiv"},Pn=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(q(jt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var So=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=q(gH),s},providedIn:"root"});let n=e;return n})(),gH=(()=>{let e=class e extends So{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case xn.NONE:return i;case xn.HTML:return fs(i,"HTML")?er(i):Mk(this._doc,String(i)).toString();case xn.STYLE:return fs(i,"Style")?er(i):i;case xn.SCRIPT:if(fs(i,"Script"))return er(i);throw new ie(5200,!1);case xn.URL:return fs(i,"URL")?er(i):Lp(String(i));case xn.RESOURCE_URL:if(fs(i,"ResourceURL"))return er(i);throw new ie(5201,!1);default:throw new ie(5202,!1)}}bypassSecurityTrustHtml(r){return Ek(r)}bypassSecurityTrustStyle(r){return Ik(r)}bypassSecurityTrustScript(r){return Ck(r)}bypassSecurityTrustUrl(r){return Tk(r)}bypassSecurityTrustResourceUrl(r){return Dk(r)}};e.\u0275fac=function(i){return new(i||e)(q(jt))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function cb(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var xo=cb();function qM(n){xo=n}var zM=/[&<>"']/,mH=new RegExp(zM.source,"g"),HM=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,yH=new RegExp(HM.source,"g"),vH={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},VM=n=>vH[n];function zn(n,e){if(e){if(zM.test(n))return n.replace(mH,VM)}else if(HM.test(n))return n.replace(yH,VM);return n}var _H=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function wH(n){return n.replace(_H,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var bH=/(^|[^\[])\^/g;function Ke(n,e){let t=typeof n=="string"?n:n.source;e=e||"";let r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(bH,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function jM(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var Bu={exec:()=>null};function UM(n,e){let t=n.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=t.split(/ \|/),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function pg(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function EH(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function $M(n,e,t,r){let i=e.href,s=e.title?zn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:zn(o)}}function IH(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var fc=class{options;rules;lexer;constructor(e){this.options=e||xo}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:pg(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=IH(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let i=pg(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=pg(r.replace(/^ *>[ \t]?/gm,""),`
`);let i=this.lexer.state.top;this.lexer.state.top=!0;let s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",c="",l=!1;for(;e;){let d=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let h=t[2].split(`
`,1)[0].replace(/^\t+/,R=>" ".repeat(3*R.length)),p=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,c=h.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=h.slice(m),m+=t[1].length);let _=!1;if(!h&&/^ *$/.test(p)&&(a+=p+`
`,e=e.substring(p.length+1),d=!0),!d){let R=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),j=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),U=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),B=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){let K=e.split(`
`,1)[0];if(p=K,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),U.test(p)||B.test(p)||R.test(p)||j.test(e))break;if(p.search(/[^ ]/)>=m||!p.trim())c+=`
`+p.slice(m);else{if(_||h.search(/[^ ]/)>=4||U.test(h)||B.test(h)||j.test(h))break;c+=`
`+p}!_&&!p.trim()&&(_=!0),a+=K+`
`,e=e.substring(K.length+1),h=p.slice(m)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let b=null,E;this.options.gfm&&(b=/^\[[ xX]\] /.exec(c),b&&(E=b[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!b,checked:E,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){let h=s.items[d].tokens.filter(m=>m.type==="space"),p=h.length>0&&h.some(m=>/\n.*\n/.test(m.raw));s.loose=p}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=UM(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of s)o.rows.push(UM(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:zn(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let o=pg(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=EH(t[2],"()");if(o>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),$M(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return $M(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,c,l=o,d=0,h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+o);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(c=[...a].length,i[3]||i[4]){l+=c;continue}else if((i[5]||i[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);let p=[...i[0]][0].length,m=e.slice(0,o+i.index+p+c);if(Math.min(o,c)%2){let b=m.slice(1,-1);return{type:"em",raw:m,text:b,tokens:this.lexer.inlineTokens(b)}}let _=m.slice(2,-2);return{type:"strong",raw:m,text:_,tokens:this.lexer.inlineTokens(_)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=zn(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=zn(t[1]),i="mailto:"+r):(r=zn(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=zn(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=zn(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=zn(t[0]),{type:"text",raw:t[0],text:r}}}},CH=/^(?: *(?:\n|$))+/,TH=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,DH=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,zu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,SH=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,GM=/(?:[*+-]|\d{1,9}[.)])/,WM=Ke(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,GM).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),lb=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,AH=/^[^\n]+/,ub=/(?!\s*\])(?:\\.|[^\[\]\\])+/,xH=Ke(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ub).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),kH=Ke(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,GM).getRegex(),yg="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",db=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,RH=Ke("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",db).replace("tag",yg).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),KM=Ke(lb).replace("hr",zu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yg).getRegex(),MH=Ke(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",KM).getRegex(),hb={blockquote:MH,code:TH,def:xH,fences:DH,heading:SH,hr:zu,html:RH,lheading:WM,list:kH,newline:CH,paragraph:KM,table:Bu,text:AH},BM=Ke("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",zu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yg).getRegex(),NH=ne(P({},hb),{table:BM,paragraph:Ke(lb).replace("hr",zu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",BM).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",yg).getRegex()}),PH=ne(P({},hb),{html:Ke(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",db).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Bu,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ke(lb).replace("hr",zu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",WM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),QM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,OH=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,YM=/^( {2,}|\\)\n(?!\s*$)/,FH=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Hu="\\p{P}\\p{S}",LH=Ke(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Hu).getRegex(),VH=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,jH=Ke(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Hu).getRegex(),UH=Ke("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Hu).getRegex(),$H=Ke("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Hu).getRegex(),BH=Ke(/\\([punct])/,"gu").replace(/punct/g,Hu).getRegex(),qH=Ke(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),zH=Ke(db).replace("(?:-->|$)","-->").getRegex(),HH=Ke("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",zH).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),mg=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,GH=Ke(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",mg).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ZM=Ke(/^!?\[(label)\]\[(ref)\]/).replace("label",mg).replace("ref",ub).getRegex(),JM=Ke(/^!?\[(ref)\](?:\[\])?/).replace("ref",ub).getRegex(),WH=Ke("reflink|nolink(?!\\()","g").replace("reflink",ZM).replace("nolink",JM).getRegex(),fb={_backpedal:Bu,anyPunctuation:BH,autolink:qH,blockSkip:VH,br:YM,code:OH,del:Bu,emStrongLDelim:jH,emStrongRDelimAst:UH,emStrongRDelimUnd:$H,escape:QM,link:GH,nolink:JM,punctuation:LH,reflink:ZM,reflinkSearch:WH,tag:HH,text:FH,url:Bu},KH=ne(P({},fb),{link:Ke(/^!?\[(label)\]\((.*?)\)/).replace("label",mg).getRegex(),reflink:Ke(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",mg).getRegex()}),ob=ne(P({},fb),{escape:Ke(QM).replace("])","~|])").getRegex(),url:Ke(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),QH=ne(P({},ob),{br:Ke(YM).replace("{2,}","*").getRegex(),text:Ke(ob.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),gg={normal:hb,gfm:NH,pedantic:PH},$u={normal:fb,gfm:ob,breaks:QH,pedantic:KH},Ci=class n{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||xo,this.options.tokenizer=this.options.tokenizer||new fc,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:gg.normal,inline:$u.normal};this.options.pedantic?(t.block=gg.pedantic,t.inline=$u.pedantic):this.options.gfm&&(t.block=gg.gfm,this.options.breaks?t.inline=$u.breaks:t.inline=$u.gfm),this.tokenizer.rules=t}static get rules(){return{block:gg,inline:$u}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,c=e.slice(1),l;this.options.extensions.startBlock.forEach(d=>{l=d.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,c,l;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,l)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),p;this.options.extensions.startInline.forEach(m=>{p=m.call({lexer:this},h),typeof p=="number"&&p>=0&&(d=Math.min(d,p))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},st=class{options;constructor(e){this.options=e||xo}code(e,t,r){let i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+zn(i)+'">'+(r?e:zn(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:zn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){let i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){let r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){let i=jM(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){let i=jM(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}},qu=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},Ti=class n{options;renderer;textRenderer;constructor(e){this.options=e||xo,this.options.renderer=this.options.renderer||new st,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new qu}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{let o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,wH(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=s,a="",c="";for(let d=0;d<o.header.length;d++)c+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(c);let l="";for(let d=0;d<o.rows.length;d++){let h=o.rows[d];c="";for(let p=0;p<h.length;p++)c+=this.renderer.tablecell(this.parseInline(h[p].tokens),{header:!1,align:o.align[p]});l+=this.renderer.tablerow(c)}r+=this.renderer.table(a,l);continue}case"blockquote":{let o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{let o=s,a=o.ordered,c=o.start,l=o.loose,d="";for(let h=0;h<o.items.length;h++){let p=o.items[h],m=p.checked,_=p.task,b="";if(p.task){let E=this.renderer.checkbox(!!m);l?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=E+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=E+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:E+" "}):b+=E+" "}b+=this.parse(p.tokens,l),d+=this.renderer.listitem(b,_,!!m)}r+=this.renderer.list(d,a,c);continue}case"html":{let o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{let o=s;r+=t.text(o.text);break}case"html":{let o=s;r+=t.html(o.text);break}case"link":{let o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{let o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{let o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{let o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{let o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{let o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{let o=s;r+=t.text(o.text);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},hc=class{options;constructor(e){this.options=e||xo}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},ab=class{defaults=cb();options=this.setOptions;parse=this.#s(Ci.lex,Ti.parse);parseInline=this.#s(Ci.lexInline,Ti.parseInline);Parser=Ti;Renderer=st;TextRenderer=qu;Lexer=Ci;Tokenizer=fc;Hooks=hc;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i=P({},r);if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let c=s.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){let s=this.defaults.renderer||new st(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.renderer[a],l=s[a];s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new fc(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,c=r.tokenizer[a],l=s[a];s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new hc;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.hooks[a],l=s[a];hc.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(c.call(s,d)).then(p=>l.call(s,p));let h=c.call(s,d);return l.call(s,h)}:s[a]=(...d)=>{let h=c.apply(s,d);return h===!1&&(h=l.apply(s,d)),h}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults=P(P({},this.defaults),i)}),this}setOptions(e){return this.defaults=P(P({},this.defaults),e),this}lexer(e,t){return Ci.lex(e,t??this.defaults)}parser(e,t){return Ti.parse(e,t??this.defaults)}#s(e,t){return(r,i)=>{let s=P({},i),o=P(P({},this.defaults),s);this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let a=this.#l(!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#l(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+zn(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Ao=new ab;function Fe(n,e){return Ao.parse(n,e)}Fe.options=Fe.setOptions=function(n){return Ao.setOptions(n),Fe.defaults=Ao.defaults,qM(Fe.defaults),Fe};Fe.getDefaults=cb;Fe.defaults=xo;Fe.use=function(...n){return Ao.use(...n),Fe.defaults=Ao.defaults,qM(Fe.defaults),Fe};Fe.walkTokens=function(n,e){return Ao.walkTokens(n,e)};Fe.parseInline=Ao.parseInline;Fe.Parser=Ti;Fe.parser=Ti.parse;Fe.Renderer=st;Fe.TextRenderer=qu;Fe.Lexer=Ci;Fe.lexer=Ci.lex;Fe.Tokenizer=fc;Fe.Hooks=hc;Fe.parse=Fe;var oie=Fe.options,aie=Fe.setOptions,cie=Fe.use,lie=Fe.walkTokens,uie=Fe.parseInline;var die=Ti.parse,hie=Ci.lex;var YH=["*"],ZH="Copy",JH="Copied",XH=(()=>{let e=class e{constructor(){this._buttonClick$=new ze,this.copied$=this._buttonClick$.pipe(Je(()=>au(he(!0),s_(3e3).pipe(cu(!1)))),lu(),Na(1)),this.copiedText$=this.copied$.pipe(di(!1),de(r=>r?JH:ZH))}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Re({type:e,selectors:[["markdown-clipboard"]],standalone:!0,features:[Au],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,s){i&1&&(D(0,"button",0),xt(1,"async"),oe("click",function(){return s.onCopyToClipboardClick()}),N(2),xt(3,"async"),A()),i&2&&(rc("copied",Mn(1,3,s.copied$)),L(2),Ue(Mn(3,5,s.copiedText$)))},dependencies:[pM],encapsulation:2,changeDetection:0});let n=e;return n})(),eG=new Z("CLIPBOARD_OPTIONS");var pb=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(pb||{}),e1=new Z("MARKED_EXTENSIONS"),gb=new Z("MARKED_OPTIONS"),tG="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",nG="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",rG="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",iG="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",sG="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",oG="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",t1=new Z("SECURITY_CONTEXT");var an=(()=>{let e=class e{get options(){return this._options}set options(r){this._options=P(P({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,s,o,a,c,l){this.clipboardOptions=r,this.extensions=i,this.platform=o,this.securityContext=a,this.http=c,this.sanitizer=l,this.DEFAULT_MARKED_OPTIONS={renderer:new st},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new ze,this.reload$=this._reload$.asObservable(),this.options=s}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:l}=i,d=P(P({},this.options),i.markedOptions),h=d.renderer||this.renderer||new st;this.extensions&&(this.renderer=this.extendsRendererForExtensions(h)),c&&(this.renderer=this.extendsRendererForMermaid(h));let p=this.trimIndentation(r),m=s?this.decodeHtml(p):p,_=a?this.parseEmoji(m):m,b=this.parseMarked(_,d,o);return(l?b:this.sanitizer.sanitize(this.securityContext,b))||""}render(r,i=this.DEFAULT_RENDER_OPTIONS,s){let{clipboard:o,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:h}=i;c&&this.renderKatex(r,P(P({},this.DEFAULT_KATEX_OPTIONS),l)),d&&this.renderMermaid(r,P(P({},this.DEFAULT_MERMAID_OPTIONS),h)),o&&this.renderClipboard(r,s,P(P(P({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(oG);return this.http.get(r,{responseType:"text"}).pipe(de(i=>this.handleExtension(r,i)))}highlight(r){if(!vs(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,s=>s.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!vs(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&Fe.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let s=r.code;return r.code=function(o,a,c){return a==="mermaid"?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let s=r.lastIndexOf("://"),o=s>-1?r.substring(s+4):r,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&d!=="md"?"```"+d+`
`+i+"\n```":i}parseMarked(r,i,s=!1){if(i.renderer){let o=P({},i.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,Fe.use({renderer:o})}return s?Fe.parseInline(r,i):Fe.parse(r,i)}parseEmoji(r){if(!vs(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(tG);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(vs(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(nG);renderMathInElement(r,i)}}renderClipboard(r,i,s){if(!vs(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(iG);if(!i)throw new Error(sG);let{buttonComponent:o,buttonTemplate:a}=s,c=r.querySelectorAll("pre");for(let l=0;l<c.length;l++){let d=c.item(l),h=document.createElement("div");h.style.position="relative",d.parentNode.insertBefore(h,d),h.appendChild(d);let p=document.createElement("div");p.classList.add("markdown-clipboard-toolbar"),p.style.position="absolute",p.style.top=".5em",p.style.right=".5em",p.style.zIndex="1",h.insertAdjacentElement("beforeend",p),h.onmouseenter=()=>p.classList.add("hover"),h.onmouseleave=()=>p.classList.remove("hover");let m;if(o){let b=i.createComponent(o);m=b.hostView,b.changeDetectorRef.markForCheck()}else if(a)m=i.createEmbeddedView(a);else{let b=i.createComponent(XH);m=b.hostView,b.changeDetectorRef.markForCheck()}let _;m.rootNodes.forEach(b=>{p.appendChild(b),_=new ClipboardJS(b,{text:()=>d.innerText})}),m.onDestroy(()=>_.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!vs(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(rG);let s=r.querySelectorAll(".mermaid");s.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:s}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(s=>{let o=i;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(i)&&(i=o),o?s.substring(o):s}).join(`
`)}};e.\u0275fac=function(i){return new(i||e)(q(eG,8),q(e1,8),q(gb,8),q(Kt),q(t1),q(Ii,8),q(So))},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})(),On=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,s){this.element=r,this.markdownService=i,this.viewContainerRef=s,this.error=new nt,this.load=new nt,this.ready=new nt,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new ze}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(du(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return y(this,null,function*(){let s={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,s);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,pb.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,pb.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++){let a=i instanceof Array?i:[i];s.item(o).classList.add(...a)}}setPluginOptions(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(i).forEach(a=>{let c=i[a];if(c){let l=this.toLispCase(a);s.item(o).setAttribute(l,c.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let s=r.toString();for(let o=0,a=i.length;o<a;o++)s=s.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return s.slice(0,1)==="-"&&(s=s.slice(1)),s}};e.\u0275fac=function(i){return new(i||e)($(At),$(an),$(Rn))},e.\u0275cmp=Re({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[ls,Au],ngContentSelectors:YH,decls:1,vars:0,template:function(i,s){i&1&&(LR(),VR(0))},encapsulation:2});let n=e;return n})();function aG(n){return[an,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],{provide:e1,useValue:n?.markedExtensions??[]},{provide:t1,useValue:n?.sanitize??xn.HTML}]}var n1=(()=>{let e=class e{static forRoot(r){return{ngModule:e,providers:[aG(r)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({imports:[dc]});let n=e;return n})(),XM;(function(n){let e;(function(i){i.Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox"})(e=n.SecurityLevel||(n.SecurityLevel={}));let t;(function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"})(t=n.Theme||(n.Theme={}));let r;(function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(r=n.LogLevel||(n.LogLevel={}))})(XM||(XM={}));var d1=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)($(kn),$(At))},e.\u0275dir=Dt({type:e});let n=e;return n})(),yb=(()=>{let e=class e extends d1{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275dir=Dt({type:e,features:[gt]});let n=e;return n})(),Tg=new Z("");var lG={provide:Tg,useExisting:as(()=>Is),multi:!0};function uG(){let n=vr()?vr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var dG=new Z(""),Is=(()=>{let e=class e extends d1{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!uG())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)($(kn),$(At),$(dG,8))},e.\u0275dir=Dt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&oe("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[sc([lG]),gt]});let n=e;return n})();var h1=new Z(""),f1=new Z("");function p1(n){return n!=null}function g1(n){return ms(n)?Pe(n):n}function m1(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function y1(n,e){return e.map(t=>t(n))}function hG(n){return!n.validate}function v1(n){return n.map(e=>hG(e)?e:t=>e.validate(t))}function fG(n){if(!n)return null;let e=n.filter(p1);return e.length==0?null:function(t){return m1(y1(t,e))}}function vb(n){return n!=null?fG(v1(n)):null}function pG(n){if(!n)return null;let e=n.filter(p1);return e.length==0?null:function(t){let r=y1(t,e).map(g1);return i_(r).pipe(de(m1))}}function _b(n){return n!=null?pG(v1(n)):null}function r1(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function gG(n){return n._rawValidators}function mG(n){return n._rawAsyncValidators}function mb(n){return n?Array.isArray(n)?n:[n]:[]}function _g(n,e){return Array.isArray(n)?n.includes(e):n===e}function i1(n,e){let t=mb(e);return mb(n).forEach(i=>{_g(t,i)||t.push(i)}),t}function s1(n,e){return mb(e).filter(t=>!_g(n,t))}var wg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=vb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=_b(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},mc=class extends wg{get formDirective(){return null}get path(){return null}},Zu=class extends wg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},bg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},yG={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Gie=ne(P({},yG),{"[class.ng-submitted]":"isSubmitted"}),vc=(()=>{let e=class e extends bg{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(Zu,2))},e.\u0275dir=Dt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&rc("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[gt]});let n=e;return n})(),_1=(()=>{let e=class e extends bg{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(mc,10))},e.\u0275dir=Dt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&rc("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[gt]});let n=e;return n})();var Gu="VALID",vg="INVALID",pc="PENDING",Wu="DISABLED",yc=class{},Eg=class extends yc{constructor(e,t){super(),this.value=e,this.source=t}},Qu=class extends yc{constructor(e,t){super(),this.pristine=e,this.source=t}},Yu=class extends yc{constructor(e,t){super(),this.touched=e,this.source=t}},gc=class extends yc{constructor(e,t){super(),this.status=e,this.source=t}};function w1(n){return(Dg(n)?n.validators:n)||null}function vG(n){return Array.isArray(n)?vb(n):n||null}function b1(n,e){return(Dg(e)?e.asyncValidators:n)||null}function _G(n){return Array.isArray(n)?_b(n):n||null}function Dg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function wG(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ie(1e3,"");if(!r[t])throw new ie(1001,"")}function bG(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ie(1002,"")})}var Ig=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=ku(()=>this.statusReactive()),this.statusReactive=Su(void 0),this._pristine=ku(()=>this.pristineReactive()),this.pristineReactive=Su(!0),this._touched=ku(()=>this.touchedReactive()),this.touchedReactive=Su(!1),this._events=new ze,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return yr(this.statusReactive)}set status(e){yr(()=>this.statusReactive.set(e))}get valid(){return this.status===Gu}get invalid(){return this.status===vg}get pending(){return this.status==pc}get disabled(){return this.status===Wu}get enabled(){return this.status!==Wu}get pristine(){return yr(this.pristineReactive)}set pristine(e){yr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return yr(this.touchedReactive)}set touched(e){yr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(i1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(i1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(s1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(s1(e,this._rawAsyncValidators))}hasValidator(e){return _g(this._rawValidators,e)}hasAsyncValidator(e){return _g(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ne(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Yu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Yu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ne(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Qu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Qu(!0,r))}markAsPending(e={}){this.status=pc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ne(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Wu,this.errors=null,this._forEachChild(i=>{i.disable(ne(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eg(this.value,r)),this._events.next(new gc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ne(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Gu,this._forEachChild(r=>{r.enable(ne(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ne(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gu||this.status===pc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Eg(this.value,t)),this._events.next(new gc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ne(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Wu:Gu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=g1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new gc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Wu:this.errors?vg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pc)?pc:this._anyControlsHaveStatus(vg)?vg:Gu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Qu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Yu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Dg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vG(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_G(this._rawAsyncValidators)}},Cg=class extends Ig{constructor(e,t,r){super(w1(t),b1(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){bG(this,!0,e),Object.keys(e).forEach(r=>{wG(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Sg=new Z("CallSetDisabledState",{providedIn:"root",factory:()=>Ag}),Ag="always";function EG(n,e){return[...e.path,n]}function E1(n,e,t=Ag){I1(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),CG(n,e),DG(n,e),TG(n,e),IG(n,e)}function o1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function IG(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function I1(n,e){let t=gG(n);e.validator!==null?n.setValidators(r1(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=mG(n);e.asyncValidator!==null?n.setAsyncValidators(r1(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();o1(e._rawValidators,i),o1(e._rawAsyncValidators,i)}function CG(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&C1(n,e)})}function TG(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&C1(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function C1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function DG(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function SG(n,e){n==null,I1(n,e)}function AG(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function xG(n){return Object.getPrototypeOf(n.constructor)===yb}function kG(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function RG(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Is?t=s:xG(s)?r=s:i=s}),i||r||t||null}var MG={provide:mc,useExisting:as(()=>wb)},Ku=Promise.resolve(),wb=(()=>{let e=class e extends mc{get submitted(){return yr(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=ku(()=>this.submittedReactive()),this.submittedReactive=Su(!1),this._directives=new Set,this.ngSubmit=new nt,this.form=new Cg({},vb(r),_b(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Ku.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),E1(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Ku.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Ku.then(()=>{let i=this._findContainer(r.path),s=new Cg({});SG(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Ku.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Ku.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),kG(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)($(h1,10),$(f1,10),$(Sg,8))},e.\u0275dir=Dt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&oe("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sc([MG]),gt]});let n=e;return n})();function a1(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function c1(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var NG=class extends Ig{constructor(e=null,t,r){super(w1(t),b1(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Dg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(c1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){a1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){a1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){c1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var PG={provide:Zu,useExisting:as(()=>ko)},l1=Promise.resolve(),ko=(()=>{let e=class e extends Zu{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new NG,this._registered=!1,this.name="",this.update=new nt,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=RG(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),AG(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){E1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){l1.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&ig(i);l1.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?EG(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)($(mc,9),$(h1,10),$(f1,10),$(Tg,10),$(Ur,8),$(Sg,8))},e.\u0275dir=Dt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sc([PG]),gt,ls]});let n=e;return n})(),T1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Dt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var OG=new Z("");var FG={provide:Tg,useExisting:as(()=>xg),multi:!0};function D1(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function LG(n){return n.split(":")[0]}var xg=(()=>{let e=class e extends yb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i=this._getOptionId(r),s=D1(i,r);this.setProperty("value",s)}registerOnChange(r){this.onChange=i=>{this.value=this._getOptionValue(i),r(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),r))return i;return null}_getOptionValue(r){let i=LG(r);return this._optionMap.has(i)?this._optionMap.get(i):r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275dir=Dt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,s){i&1&&oe("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[sc([FG]),gt]});let n=e;return n})(),S1=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(r){this._select!=null&&(this._select._optionMap.set(this.id,r),this._setElementValue(D1(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._setElementValue(r),this._select&&this._select.writeValue(this._select.value)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)($(At),$(kn),$(xg,9))},e.\u0275dir=Dt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),VG={provide:Tg,useExisting:as(()=>A1),multi:!0};function u1(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function jG(n){return n.split(":")[0]}var A1=(()=>{let e=class e extends yb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(r){this._compareWith=r}writeValue(r){this.value=r;let i;if(Array.isArray(r)){let s=r.map(o=>this._getOptionId(o));i=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(r){this.onChange=i=>{let s=[],o=i.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],d=this._getOptionValue(l.value);s.push(d)}}else{let a=i.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let d=this._getOptionValue(l.value);s.push(d)}}}this.value=s,r(s)}}_registerOption(r){let i=(this._idCounter++).toString();return this._optionMap.set(i,r),i}_getOptionId(r){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,r))return i;return null}_getOptionValue(r){let i=jG(r);return this._optionMap.has(i)?this._optionMap.get(i)._value:r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275dir=Dt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,s){i&1&&oe("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[sc([VG]),gt]});let n=e;return n})(),x1=(()=>{let e=class e{constructor(r,i,s){this._element=r,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(r){this._select!=null&&(this._value=r,this._setElementValue(u1(this.id,r)),this._select.writeValue(this._select.value))}set value(r){this._select?(this._value=r,this._setElementValue(u1(this.id,r)),this._select.writeValue(this._select.value)):this._setElementValue(r)}_setElementValue(r){this._renderer.setProperty(this._element.nativeElement,"value",r)}_setSelected(r){this._renderer.setProperty(this._element.nativeElement,"selected",r)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)($(At),$(kn),$(A1,9))},e.\u0275dir=Dt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var k1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({});let n=e;return n})();var R1=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Sg,useValue:r.callSetDisabledState??Ag}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({imports:[k1]});let n=e;return n})(),M1=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:OG,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Sg,useValue:r.callSetDisabledState??Ag}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({imports:[k1]});let n=e;return n})();var ae={production:!0,host:"https://publichome.page",port:"8888",eventBusURL:"https://publichome.page:8888/eventbus/",defaultFirm:"SS",redirect_url:"https://publichome.page/u",client_id:"8c987bdba61457c20417",client_secret:"DONT_SEND_FROM_FRONT_END",gh_default_user_repo:"publichomepage",gh_dr_folder:"my/main",gh_dr_url:"https://raw.githubusercontent.com",gh_api_url:"https://api.github.com",gh_auth_url:"https://github.com/login/oauth/authorize",gh_private_dr_folder:"my",js_deliver:{enabled:!0,url:"https://cdn.jsdelivr.net/gh",version:"my@main"},supabase:{url:"https://typxscdilfdoojpvltpu.supabase.co",key:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR5cHhzY2RpbGZkb29qcHZsdHB1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc1MTAxNjUsImV4cCI6MjA2MzA4NjE2NX0.iGs-gu6YFWvidGZjpLNQRh2rOBz_SP7dIoEPnX2sLTQ"},paypal:{clientId:"AT0mPVwfaTYBL98tGhMDLAC1xipOay7r4XRsgPIupHCbqYdJtb4V37CwRjnlfgnTBIR5WODmtFvJjIun",planId:"P-8U0801659U631744PNATP3PA",planIdWithCoupon:"P-XYZ",couponCode:"SOLOPRENEUR"},pineconeConfig:{apiKey:"pcsk_3Akhgu_3pS3hHzA7fBJmnHNVg9e7grZFj8pjvPtiQ9uCVA2n2UURFEmrZjXy1fi4XQSwEP",index:"example-index"},openApiKey:"ABCD",firebaseConfig:{apiKey:"AIzaSyBdEWJQNGtrtL88aX5sE2VGEqYpWLXtpFQ",authDomain:"publichomepage-b872d.firebaseapp.com",projectId:"publichomepage-b872d",storageBucket:"publichomepage-b872d.appspot.com",messagingSenderId:"850538578524",appId:"1:850538578524:web:56c70f38ac285bffd5dc99",measurementId:"G-TRBD0HQFWM"}};var cn=(()=>{let e=class e{constructor(){this._event=new ze,this.event$=this._event.asObservable()}send(r){this._event.next(r)}observable(){return this.event$}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function UG(n,e){n&1&&re(0,"app-footer")}var qe=class qe{constructor(e){this.messaging=e,this.sponserVisible=!0,this.footerVisible=!0,localStorage.setItem("debug","true"),qe.iconsColorByBrandKey.set("facebook","#3b5998"),qe.iconsColorByBrandKey.set("youtube","#ed302f"),qe.iconsColorByBrandKey.set("discord","#7289DA"),qe.iconsColorByBrandKey.set("linkedin","#0082ca"),qe.iconsColorByBrandKey.set("github","#bcbcbc"),qe.iconsColorByBrandKey.set("link","green"),qe.iconsColorByBrandKey.set("self","green"),qe.iconsColorByBrandKey.set("whatsapp","green"),qe.iconsColorByBrandKey.set("instagram","blue"),this.messaging.event$.subscribe(t=>{let r=t;switch(r.cmd){case"host":r.file=="IaComponent"&&(this.sponserVisible=!1,this.footerVisible=!1);break;case"UserContext":break;default:break}})}loadScript(e){let t=document.body,r=document.createElement("script");r.innerHTML="",r.src=e,r.async=!1,t.appendChild(r)}};qe.title="Public Homepage",qe.ghUserLoaded=ae.gh_default_user_repo,qe.readme_home=`${ae.gh_dr_url}/${ae.gh_default_user_repo}/${ae.gh_dr_folder}/README.md`,qe.user_contacts=`${ae.gh_dr_url}/${ae.gh_default_user_repo}/${ae.gh_dr_folder}/contacts.md`,qe.fab_questions_list2=`${ae.gh_dr_url}/${ae.gh_default_user_repo}/${ae.gh_dr_folder}/questions/ds-list2.md`,qe.YOUR_READ_ME="",qe.ghUser={name:qe.title,blog:"/"},qe.userContext={username:"",status:"0",directory:{},youtube_links:new Set,leetcode_links:new Set,assessment:{}},qe.INTERNAL_FOLDERS=["my","roadmap","questions","articles","faqs","coding","credits","README.md","contacts.md","assessments"],qe.homeUser={name:qe.title,blog:"/"},qe.navLinks=[{link:"#about",text:"About"}],qe.contactLinksByKey=new Map,qe.contactTextsByKey=new Map,qe.contactHostNameByKeys=new Map,qe.iconsColorByBrandKey=new Map,qe.\u0275fac=function(t){return new(t||qe)($(cn))},qe.\u0275cmp=Re({type:qe,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,r){t&1&&(re(0,"app-navbar")(1,"router-outlet"),ge(2,UG,1,0,"app-footer",0)),t&2&&(L(2),W("ngIf",r.footerVisible))}});var J=qe;var N1=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-O6E4JZHF.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};var Ju=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},Rg=class extends Ju{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Mg=class extends Ju{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Ng=class extends Ju{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}},bb=function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n}(bb||{});var $G=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Xu=class{constructor(e,{headers:t={},customFetch:r,region:i=bb.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=N1(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return $G(this,void 0,void 0,function*(){try{let{headers:i,method:s,body:o}=t,a={},{region:c}=t;c||(c=this.region),c&&c!=="any"&&(a["x-region"]=c);let l;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",l=o):typeof o=="string"?(a["Content-Type"]="text/plain",l=o):typeof FormData<"u"&&o instanceof FormData?l=o:(a["Content-Type"]="application/json",l=JSON.stringify(o)));let d=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:l}).catch(_=>{throw new Rg(_)}),h=d.headers.get("x-relay-error");if(h&&h==="true")throw new Mg(d);if(!d.ok)throw new Ng(d);let p=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield d.json():p==="application/octet-stream"?m=yield d.blob():p==="text/event-stream"?m=d:p==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(i){return{data:null,error:i}}})}};var G1=D2(H1(),1),{PostgrestClient:W1,PostgrestQueryBuilder:mse,PostgrestFilterBuilder:yse,PostgrestTransformBuilder:vse,PostgrestBuilder:_se,PostgrestError:XG}=G1.default;var K1="2.11.2";var Q1={"X-Client-Info":`realtime-js/${K1}`},Y1="1.0.0",Lg=1e4,Z1=1e3,wc=function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n}(wc||{}),Hn=function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n}(Hn||{}),nr=function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n}(nr||{}),Nb=function(n){return n.websocket="websocket",n}(Nb||{}),Mo=function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n}(Mo||{});var Vg=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){let t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){let i=t.getUint8(1),s=t.getUint8(2),o=this.HEADER_LENGTH+2,a=r.decode(e.slice(o,o+i));o=o+i;let c=r.decode(e.slice(o,o+s));o=o+s;let l=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}};var bc=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var rt=function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n}(rt||{}),Ob=(n,e,t={})=>{var r;let i=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=e5(o,n,e,i),s),{})},e5=(n,e,t,r)=>{let i=e.find(a=>a.name===n),s=i?.type,o=t[n];return s&&!r.includes(s)?J1(s,o):Pb(o)},J1=(n,e)=>{if(n.charAt(0)==="_"){let t=n.slice(1,n.length);return i5(e,t)}switch(n){case rt.bool:return t5(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return n5(e);case rt.json:case rt.jsonb:return r5(e);case rt.timestamp:return s5(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return Pb(e);default:return Pb(e)}},Pb=n=>n,t5=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},n5=n=>{if(typeof n=="string"){let e=parseFloat(n);if(!Number.isNaN(e))return e}return n},r5=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},i5=(n,e)=>{if(typeof n!="string")return n;let t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let s,o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>J1(e,a))}return n},s5=n=>typeof n=="string"?n.replace(" ","T"):n,jg=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};var Ec=class{constructor(e,t,r={},i=Lg){this.channel=e,this.event=t,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var od=class n{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,s,o),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,i){let s=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(s,(l,d)=>{o[l]||(c[l]=d)}),this.map(o,(l,d)=>{let h=s[l];if(h){let p=d.map(E=>E.presence_ref),m=h.map(E=>E.presence_ref),_=d.filter(E=>m.indexOf(E.presence_ref)<0),b=h.filter(E=>p.indexOf(E.presence_ref)<0);_.length>0&&(a[l]=_),b.length>0&&(c[l]=b)}else a[l]=d}),this.syncDiff(s,{joins:a,leaves:c},r,i)}static syncDiff(e,t,r,i){let{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,c)=>{var l;let d=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),d.length>0){let h=e[a].map(m=>m.presence_ref),p=d.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,d,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;let d=c.map(h=>h.presence_ref);l=l.filter(h=>d.indexOf(h.presence_ref)<0),e[a]=l,i(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{let i=e[r];return"metas"in i?t[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[r]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Si=function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n}(Si||{});var ad=class n{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=Hn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Ec(this,nr.join,this.params,this.timeout),this.rejoinTimer=new bc(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Hn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Hn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Hn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(nr.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new od(this),this.broadcastEndpointURL=jg(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(d=>e?.(Si.CHANNEL_ERROR,d)),this._onClose(()=>e?.(Si.CLOSED));let c={},l={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",h=>y(this,[h],function*({postgres_changes:d}){var p;if(this.socket.setAuth(),d===void 0){e?.(Si.SUBSCRIBED);return}else{let m=this.bindings.postgres_changes,_=(p=m?.length)!==null&&p!==void 0?p:0,b=[];for(let E=0;E<_;E++){let R=m[E],{filter:{event:j,schema:U,table:B,filter:K}}=R,Q=d&&d[E];if(Q&&Q.event===j&&Q.schema===U&&Q.table===B&&Q.filter===K)b.push(Object.assign(Object.assign({},R),{id:Q.id}));else{this.unsubscribe(),e?.(Si.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=b,e&&e(Si.SUBSCRIBED);return}})).receive("error",d=>{e?.(Si.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e?.(Si.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(r){return y(this,arguments,function*(e,t={}){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(){return y(this,arguments,function*(e={}){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,r){return this._on(e,t,r)}send(r){return y(this,arguments,function*(e,t={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){let{event:o,payload:a}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{let d=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return yield(s=d.body)===null||s===void 0?void 0:s.cancel(),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,c,l;let d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(c=(a=this.params)===null||a===void 0?void 0:a.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),d.receive("ok",()=>o("ok")),d.receive("error",()=>o("error")),d.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Hn.leaving;let t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(nr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(r=>{let i=new Ec(this,nr.leave,{},e);i.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_fetchWithTimeout(e,t,r){return y(this,null,function*(){let i=new AbortController,s=setTimeout(()=>i.abort(),r),o=yield this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(s),o})}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Ec(this,e,t,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var i,s;let o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:d}=nr;if(r&&[a,c,l,d].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,t,r);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var _,b,E;return((_=m.filter)===null||_===void 0?void 0:_.event)==="*"||((E=(b=m.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var _,b,E,R,j,U;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){let B=m.id,K=(_=m.filter)===null||_===void 0?void 0:_.event;return B&&((b=t.ids)===null||b===void 0?void 0:b.includes(B))&&(K==="*"||K?.toLocaleLowerCase()===((E=t.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{let B=(j=(R=m?.filter)===null||R===void 0?void 0:R.event)===null||j===void 0?void 0:j.toLocaleLowerCase();return B==="*"||B===((U=t?.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){let _=p.data,{schema:b,table:E,commit_timestamp:R,type:j,errors:U}=_;p=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:R,eventType:j,new:{},old:{},errors:U}),this._getPayloadRecords(_))}m.callback(p,r)})}_isClosed(){return this.state===Hn.closed}_isJoined(){return this.state===Hn.joined}_isJoining(){return this.state===Hn.joining}_isLeaving(){return this.state===Hn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){let i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){let r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&n.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(nr.close,{},e)}_onError(e){this._on(nr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Hn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){let t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ob(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ob(e.columns,e.old_record)),t}};var a5=()=>{},c5=typeof WebSocket<"u",l5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,cd=class{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Q1,this.params={},this.timeout=Lg,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=a5,this.conn=null,this.sendBuffer=[],this.serializer=new Vg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>import("./chunk-O6E4JZHF.js").then(({default:c})=>c(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Nb.websocket}`,this.httpEndpoint=jg(e),t?.transport?this.transport=t.transport:this.transport=null,t?.params&&(this.params=t.params),t?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t?.timeout&&(this.timeout=t.timeout),t?.logger&&(this.logger=t.logger),t?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);let i=(r=t?.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=t?.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t?.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t?.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new bc(()=>y(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(t?.fetch),t?.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=t?.worker||!1,this.workerUrl=t?.workerUrl}this.accessToken=t?.accessToken||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(c5){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new Fb(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-EBX5AHPI.js").then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Y1}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return y(this,null,function*(){let t=yield e.unsubscribe();return this.channels.length===0&&this.disconnect(),t})}removeAllChannels(){return y(this,null,function*(){let e=yield Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e})}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case wc.connecting:return Mo.Connecting;case wc.open:return Mo.Open;case wc.closing:return Mo.Closing;default:return Mo.Closed}}isConnected(){return this.connectionState()===Mo.Open}channel(e,t={config:{}}){let r=new ad(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){let{topic:t,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(e=null){return y(this,null,function*(){let t=e||this.accessToken&&(yield this.accessToken())||this.accessTokenValue;if(t){let r=null;try{r=JSON.parse(atob(t.split(".")[1]))}catch{}if(r&&r.exp&&!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`);this.accessTokenValue=t,this.channels.forEach(i=>{t&&i.updateJoinPayload({access_token:t}),i.joinedOnce&&i._isJoined()&&i._push(nr.access_token,{access_token:t})})}})}sendHeartbeat(){return y(this,null,function*(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Z1,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}})}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:r,event:i,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){return y(this,null,function*(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(nr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;let r=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${r}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{let r=new Blob([l5],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}};var Fb=class{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=wc.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}};var Ic=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function kt(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Ug=class extends Ic{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},No=class extends Ic{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var u5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Bg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-O6E4JZHF.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},X1=()=>u5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-O6E4JZHF.js")).Response:Response}),$g=n=>{if(Array.isArray(n))return n.map(t=>$g(t));if(typeof n=="function"||n!==Object(n))return n;let e={};return Object.entries(n).forEach(([t,r])=>{let i=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=$g(r)}),e};var Po=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Lb=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),d5=(n,e,t)=>Po(void 0,void 0,void 0,function*(){let r=yield X1();n instanceof r&&!t?.noResolveJson?n.json().then(i=>{e(new Ug(Lb(i),n.status||500))}).catch(i=>{e(new No(Lb(i),i))}):e(new No(Lb(n),n))}),h5=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),t))};function ld(n,e,t,r,i,s){return Po(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,h5(e,r,i,s)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>d5(c,a,r))})})}function Cc(n,e,t,r){return Po(this,void 0,void 0,function*(){return ld(n,"GET",e,t,r)})}function $r(n,e,t,r,i){return Po(this,void 0,void 0,function*(){return ld(n,"POST",e,r,i,t)})}function eN(n,e,t,r,i){return Po(this,void 0,void 0,function*(){return ld(n,"PUT",e,r,i,t)})}function tN(n,e,t,r){return Po(this,void 0,void 0,function*(){return ld(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function qg(n,e,t,r,i){return Po(this,void 0,void 0,function*(){return ld(n,"DELETE",e,r,i,t)})}var Fn=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},f5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},nN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},zg=class{constructor(e,t={},r,i){this.url=e,this.headers=t,this.bucketId=r,this.fetch=Bg(i)}uploadOrUpdate(e,t,r,i){return Fn(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},nN),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)}),c=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),c&&s.append("metadata",this.encodeMetadata(c))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let l=this._removeEmptyFolders(t),d=this._getFinalPath(l),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),p=yield h.json();return h.ok?{data:{path:l,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(s){if(kt(s))return{data:null,error:s};throw s}})}upload(e,t,r){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,i){return Fn(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c,l=Object.assign({upsert:nN.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",l.cacheControl)):(c=r,d["cache-control"]=`max-age=${l.cacheControl}`,d["content-type"]=l.contentType);let h=yield this.fetch(a.toString(),{method:"PUT",body:c,headers:d}),p=yield h.json();return h.ok?{data:{path:s,fullPath:p.Key},error:null}:{data:null,error:p}}catch(c){if(kt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return Fn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");let s=yield $r(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new Ic("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}})}update(e,t,r){return Fn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Fn(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(kt(i))return{data:null,error:i};throw i}})}copy(e,t,r){return Fn(this,void 0,void 0,function*(){try{return{data:{path:(yield $r(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(kt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,r){return Fn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield $r(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers}),o=r?.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(kt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,r){return Fn(this,void 0,void 0,function*(){try{let i=yield $r(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(kt(i))return{data:null,error:i};throw i}})}download(e,t){return Fn(this,void 0,void 0,function*(){let i=typeof t?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(t?.transform||{}),o=s?`?${s}`:"";try{let a=this._getFinalPath(e);return{data:yield(yield Cc(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(kt(a))return{data:null,error:a};throw a}})}info(e){return Fn(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{let r=yield Cc(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:$g(r),error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}})}exists(e){return Fn(this,void 0,void 0,function*(){let t=this._getFinalPath(e);try{return yield tN(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(kt(r)&&r instanceof No){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){let r=this._getFinalPath(e),i=[],s=t?.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&i.push(s);let a=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${l}`)}}}remove(e){return Fn(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}})}list(e,t,r){return Fn(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},f5),t),{prefix:e||""});return{data:yield $r(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(kt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};var rN="2.7.1";var iN={"X-Client-Info":`storage-js/${rN}`};var Tc=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},Hg=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},iN),t),this.fetch=Bg(r)}listBuckets(){return Tc(this,void 0,void 0,function*(){try{return{data:yield Cc(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(kt(e))return{data:null,error:e};throw e}})}getBucket(e){return Tc(this,void 0,void 0,function*(){try{return{data:yield Cc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Tc(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Tc(this,void 0,void 0,function*(){try{return{data:yield eN(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(kt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Tc(this,void 0,void 0,function*(){try{return{data:yield $r(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Tc(this,void 0,void 0,function*(){try{return{data:yield qg(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(kt(t))return{data:null,error:t};throw t}})}};var ud=class extends Hg{constructor(e,t={},r){super(e,t,r)}from(e){return new zg(this.url,this.headers,e,this.fetch)}};var sN="2.49.4";var dd="";typeof Deno<"u"?dd="deno":typeof document<"u"?dd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?dd="react-native":dd="node";var p5={"X-Client-Info":`supabase-js-${dd}/${sN}`},oN={headers:p5},aN={schema:"public"},cN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},lN={};AS();var g5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},m5=n=>{let e;return n?e=n:typeof fetch>"u"?e=DS:e=fetch,(...t)=>e(...t)},y5=()=>typeof Headers>"u"?SS:Headers,uN=(n,e,t)=>{let r=m5(t),i=y5();return(s,o)=>g5(void 0,void 0,void 0,function*(){var a;let c=(a=yield e())!==null&&a!==void 0?a:n,l=new i(o?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),r(s,Object.assign(Object.assign({},o),{headers:l}))})};var v5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})};function dN(n){return n.replace(/\/$/,"")}function hN(n,e){let{db:t,auth:r,realtime:i,global:s}=n,{db:o,auth:a,realtime:c,global:l}=e,d={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),r),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},l),s),accessToken:()=>v5(this,void 0,void 0,function*(){return""})};return n.accessToken?d.accessToken=n.accessToken:delete d.accessToken,d}var Gg="2.69.1";var Oo=30*1e3,Wg=3,Kg=Wg*Oo,fN="http://localhost:9999",pN="supabase.auth.token";var gN={"X-Client-Info":`gotrue-js/${Gg}`};var hd="X-Supabase-Api-Version",Vb={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,yN=6e5;var fd=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function _e(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var Qg=class extends fd{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};function vN(n){return _e(n)&&n.name==="AuthApiError"}var Dc=class extends fd{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},Br=class extends fd{constructor(e,t,r,i){super(e,r,i),this.name=t,this.status=r}},rr=class extends Br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function _N(n){return _e(n)&&n.name==="AuthSessionMissingError"}var Sc=class extends Br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Fo=class extends Br{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},Lo=class extends Br{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function wN(n){return _e(n)&&n.name==="AuthImplicitGrantRedirectError"}var pd=class extends Br{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},Ac=class extends Br{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function Yg(n){return _e(n)&&n.name==="AuthRetryableFetchError"}var gd=class extends Br{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}};var Ai=class extends Br{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};var bN="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),EN=` 	
\r=`.split(""),_5=(()=>{let n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<EN.length;e+=1)n[EN[e].charCodeAt(0)]=-2;for(let e=0;e<bN.length;e+=1)n[bN[e].charCodeAt(0)]=e;return n})();function IN(n,e,t){let r=_5[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function jb(n){let e=[],t=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{E5(o,r,t)};for(let o=0;o<n.length;o+=1)IN(n.charCodeAt(o),i,s);return e.join("")}function w5(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function b5(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}w5(r,e)}}function E5(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function CN(n){let e=[],t={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<n.length;i+=1)IN(n.charCodeAt(i),t,r);return new Uint8Array(e)}function TN(n){let e=[];return b5(n,t=>e.push(t)),new Uint8Array(e)}function DN(n){return Math.round(Date.now()/1e3)+n}function SN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){let e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}var br=()=>typeof window<"u"&&typeof document<"u",Vo={tested:!1,writable:!1},Cs=()=>{if(!br())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Vo.tested)return Vo.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Vo.tested=!0,Vo.writable=!0}catch{Vo.tested=!0,Vo.writable=!1}return Vo.writable};function AN(n){let e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return t.searchParams.forEach((r,i)=>{e[i]=r}),e}var Zg=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>import("./chunk-O6E4JZHF.js").then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},xN=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Ub=(n,e,t)=>y(void 0,null,function*(){yield n.setItem(e,JSON.stringify(t))}),yd=(n,e)=>y(void 0,null,function*(){let t=yield n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),vd=(n,e)=>y(void 0,null,function*(){yield n.removeItem(e)}),md=class n{constructor(){this.promise=new n.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};md.promiseConstructor=Promise;function Jg(n){let e=n.split(".");if(e.length!==3)throw new Ai("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!mN.test(e[r]))throw new Ai("JWT not in base64url format");return{header:JSON.parse(jb(e[0])),payload:JSON.parse(jb(e[1])),signature:CN(e[2]),raw:{header:e[0],payload:e[1]}}}function kN(n){return y(this,null,function*(){return yield new Promise(e=>{setTimeout(()=>e(null),n)})})}function RN(n,e){return new Promise((r,i)=>{y(this,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield n(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})})}function I5(n){return("0"+n.toString(16)).substr(-2)}function C5(){let e=new Uint32Array(56);if(typeof crypto>"u"){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length,i="";for(let s=0;s<56;s++)i+=t.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,I5).join("")}function T5(n){return y(this,null,function*(){let t=new TextEncoder().encode(n),r=yield crypto.subtle.digest("SHA-256",t),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})}function D5(n){return y(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let t=yield T5(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function jo(n,e,t=!1){return y(this,null,function*(){let r=C5(),i=r;t&&(i+="/PASSWORD_RECOVERY"),yield Ub(n,`${e}-code-verifier`,i);let s=yield D5(r);return[s,r===s?"plain":"s256"]})}var S5=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MN(n){let e=n.headers.get(hd);if(!e||!e.match(S5))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function NN(n){if(!n)throw new Error("Missing exp claim");let e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function PN(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var A5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},Uo=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),x5=[502,503,504];function ON(n){return y(this,null,function*(){var e;if(!xN(n))throw new Ac(Uo(n),0);if(x5.includes(n.status))throw new Ac(Uo(n),n.status);let t;try{t=yield n.json()}catch(s){throw new Dc(Uo(s),s)}let r,i=MN(n);if(i&&i.getTime()>=Vb["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new gd(Uo(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new rr}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new gd(Uo(t),n.status,t.weak_password.reasons);throw new Qg(Uo(t),n.status||500,r)})}var k5=(n,e,t,r)=>{let i={method:n,headers:e?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),t))};function ke(n,e,t,r){return y(this,null,function*(){var i;let s=Object.assign({},r?.headers);s[hd]||(s[hd]=Vb["2024-01-01"].name),r?.jwt&&(s.Authorization=`Bearer ${r.jwt}`);let o=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(o.redirect_to=r.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield R5(n,e,t+a,{headers:s,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}})}function R5(n,e,t,r,i,s){return y(this,null,function*(){let o=k5(e,r,i,s),a;try{a=yield n(t,Object.assign({},o))}catch(c){throw console.error(c),new Ac(Uo(c),0)}if(a.ok||(yield ON(a)),r?.noResolveJson)return a;try{return yield a.json()}catch(c){yield ON(c)}})}function xi(n){var e;let t=null;M5(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=DN(n.expires_in)));let r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function $b(n){let e=xi(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function qr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function FN(n){return{data:n,error:null}}function LN(n){let{action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s}=n,o=A5(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:r,redirect_to:i,verification_type:s},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function VN(n){return n}function M5(n){return n.access_token&&n.refresh_token&&n.expires_in}var N5=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t},xc=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Zg(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e,t="global"){return y(this,null,function*(){try{return yield ke(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}inviteUserByEmail(r){return y(this,arguments,function*(e,t={}){try{return yield ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:qr})}catch(i){if(_e(i))return{data:{user:null},error:i};throw i}})}generateLink(e){return y(this,null,function*(){try{let{options:t}=e,r=N5(e,["options"]),i=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),yield ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:LN,redirectTo:t?.redirectTo})}catch(t){if(_e(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return y(this,null,function*(){try{return yield ke(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qr})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}})}listUsers(e){return y(this,null,function*(){var t,r,i,s,o,a,c;try{let l={nextPage:null,lastPage:0,total:0},d=yield ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:VN});if(d.error)throw d.error;let h=yield d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(_=>{let b=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(_.split(";")[1].split("=")[1]);l[`${E}Page`]=b}),l.total=parseInt(p)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(_e(l))return{data:{users:[]},error:l};throw l}})}getUserById(e){return y(this,null,function*(){try{return yield ke(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qr})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return y(this,null,function*(){try{return yield ke(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:qr})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}})}deleteUser(e,t=!1){return y(this,null,function*(){try{return yield ke(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:qr})}catch(r){if(_e(r))return{data:{user:null},error:r};throw r}})}_listFactors(e){return y(this,null,function*(){try{let{data:t,error:r}=yield ke(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:r}}catch(t){if(_e(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return y(this,null,function*(){try{return{data:yield ke(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(_e(t))return{data:null,error:t};throw t}})}};var jN={getItem:n=>Cs()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{Cs()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{Cs()&&globalThis.localStorage.removeItem(n)}};function Bb(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function UN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var $o={debug:!!(globalThis&&Cs()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},_d=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Xg=class extends _d{};function qb(n,e,t){return y(this,null,function*(){$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);let r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),$o.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),yield Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},i=>y(this,null,function*(){if(i){$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield t()}finally{$o.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(e===0)throw $o.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Xg(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if($o.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield t()}})))})}UN();var P5={url:fN,storageKey:pN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:gN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};function $N(n,e,t){return y(this,null,function*(){return yield t()})}var zb=(()=>{class n{constructor(t){var r,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=n.nextInstanceID,n.nextInstanceID+=1,this.instanceID>0&&br()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},P5),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new xc({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Zg(s.fetch),this.lock=s.lock||$N,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:br()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=qb:this.lock=$N,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Cs()?this.storage=jN:(this.memoryStorage={},this.storage=Bb(this.memoryStorage)):(this.memoryStorage={},this.storage=Bb(this.memoryStorage)),br()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",o=>y(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gg}) ${new Date().toISOString()}`,...t),this}initialize(){return y(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=y(this,null,function*(){return yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return y(this,null,function*(){var t;try{let r=AN(window.location.href),i="none";if(this._isImplicitGrantCallback(r)?i="implicit":(yield this._isPKCECallback(r))&&(i="pkce"),br()&&this.detectSessionInUrl&&i!=="none"){let{data:s,error:o}=yield this._getSessionFromURL(r,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),wN(o)){let l=(t=o.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return yield this._removeSession(),{error:o}}let{session:a,redirectType:c}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),yield this._saveSession(a),setTimeout(()=>y(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",a):yield this._notifyAllSubscribers("SIGNED_IN",a)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(r){return _e(r)?{error:r}:{error:new Dc("Unexpected error during initialization",r)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(t){return y(this,null,function*(){var r,i,s;try{let o=yield ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=t?.options)===null||s===void 0?void 0:s.captchaToken}},xform:xi}),{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,d=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(_e(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(t){return y(this,null,function*(){var r,i,s;try{let o;if("email"in t){let{email:h,password:p,options:m}=t,_=null,b=null;this.flowType==="pkce"&&([_,b]=yield jo(this.storage,this.storageKey)),o=yield ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:h,password:p,data:(r=m?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:_,code_challenge_method:b},xform:xi})}else if("phone"in t){let{phone:h,password:p,options:m}=t;o=yield ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(i=m?.data)!==null&&i!==void 0?i:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:xi})}else throw new Fo("You must provide either an email or phone number and a password");let{data:a,error:c}=o;if(c||!a)return{data:{user:null,session:null},error:c};let l=a.session,d=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(o){if(_e(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(t){return y(this,null,function*(){try{let r;if("email"in t){let{email:o,password:a,options:c}=t;r=yield ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:$b})}else if("phone"in t){let{phone:o,password:a,options:c}=t;r=yield ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:$b})}else throw new Fo("You must provide either an email or phone number and a password");let{data:i,error:s}=r;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Sc}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOAuth(t){return y(this,null,function*(){var r,i,s,o;return yield this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=t.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(t){return y(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>y(this,null,function*(){return this._exchangeCodeForSession(t)}))})}_exchangeCodeForSession(t){return y(this,null,function*(){let r=yield yd(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(r??"").split("/");try{let{data:o,error:a}=yield ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:xi});if(yield vd(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Sc}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(_e(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(t){return y(this,null,function*(){try{let{options:r,provider:i,token:s,access_token:o,nonce:a}=t,c=yield ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:xi}),{data:l,error:d}=c;return d?{data:{user:null,session:null},error:d}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Sc}:(l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:d})}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}})}signInWithOtp(t){return y(this,null,function*(){var r,i,s,o,a;try{if("email"in t){let{email:c,options:l}=t,d=null,h=null;this.flowType==="pkce"&&([d,h]=yield jo(this.storage,this.storageKey));let{error:p}=yield ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l?.data)!==null&&r!==void 0?r:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:d,code_challenge_method:h},redirectTo:l?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){let{phone:c,options:l}=t,{data:d,error:h}=yield ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(s=l?.data)!==null&&s!==void 0?s:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(a=l?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:h}}throw new Fo("You must provide either an email or phone number.")}catch(c){if(_e(c))return{data:{user:null,session:null},error:c};throw c}})}verifyOtp(t){return y(this,null,function*(){var r,i;try{let s,o;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,o=(i=t.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=yield ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:xi});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let l=a.session,d=a.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:d,session:l},error:null}}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(t){return y(this,null,function*(){var r,i,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield jo(this.storage,this.storageKey)),yield ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=t?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:FN})}catch(o){if(_e(o))return{data:null,error:o};throw o}})}reauthenticate(){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return y(this,null,function*(){try{return yield this._useSession(t=>y(this,null,function*(){let{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new rr;let{error:s}=yield ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}}))}catch(t){if(_e(t))return{data:{user:null,session:null},error:t};throw t}})}resend(t){return y(this,null,function*(){try{let r=`${this.url}/resend`;if("email"in t){let{email:i,type:s,options:o}=t,{error:a}=yield ke(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){let{phone:i,type:s,options:o}=t,{data:a,error:c}=yield ke(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:c}}throw new Fo("You must provide either an email or phone number and a type")}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}})}getSession(){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return this._useSession(r=>y(this,null,function*(){return r}))}))})}_acquireLock(t,r){return y(this,null,function*(){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=y(this,null,function*(){return yield i,yield r()});return this.pendingInLock.push(y(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,t,()=>y(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push(y(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(t){return y(this,null,function*(){this._debug("#_useSession","begin");try{let r=yield this.__loadSession();return yield t(r)}finally{this._debug("#_useSession","end")}})}__loadSession(){return y(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null,r=yield yd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!t)return{data:{session:null},error:null};let i=t.expires_at?t.expires_at*1e3-Date.now()<Kg:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.storage.isServer){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,d,h)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,d,h))})}return{data:{session:t},error:null}}let{session:s,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(t){return y(this,null,function*(){return t?yield this._getUser(t):(yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._getUser()})))})}_getUser(t){return y(this,null,function*(){try{return t?yield ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qr}):yield this._useSession(r=>y(this,null,function*(){var i,s,o;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new rr}:yield ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:qr})}))}catch(r){if(_e(r))return _N(r)&&(yield this._removeSession(),yield vd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}})}updateUser(i){return y(this,arguments,function*(t,r={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._updateUser(t,r)}))})}_updateUser(i){return y(this,arguments,function*(t,r={}){try{return yield this._useSession(s=>y(this,null,function*(){let{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new rr;let c=o.session,l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=yield jo(this.storage,this.storageKey));let{data:h,error:p}=yield ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:c.access_token,xform:qr});if(p)throw p;return c.user=h.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}}))}catch(s){if(_e(s))return{data:{user:null},error:s};throw s}})}setSession(t){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._setSession(t)}))})}_setSession(t){return y(this,null,function*(){try{if(!t.access_token||!t.refresh_token)throw new rr;let r=Date.now()/1e3,i=r,s=!0,o=null,{payload:a}=Jg(t.access_token);if(a.exp&&(i=a.exp,s=i<=r),s){let{session:c,error:l}=yield this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};o=c}else{let{data:c,error:l}=yield this._getUser(t.access_token);if(l)throw l;o={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(r){if(_e(r))return{data:{session:null,user:null},error:r};throw r}})}refreshSession(t){return y(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._refreshSession(t)}))})}_refreshSession(t){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;if(!t){let{data:a,error:c}=r;if(c)throw c;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!t?.refresh_token)throw new rr;let{session:s,error:o}=yield this._callRefreshToken(t.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}})}_getSessionFromURL(t,r){return y(this,null,function*(){try{if(!br())throw new Lo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Lo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new pd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Lo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new pd("No code detected.");let{data:U,error:B}=yield this._exchangeCodeForSession(t.code);if(B)throw B;let K=new URL(window.location.href);return K.searchParams.delete("code"),window.history.replaceState(window.history.state,"",K.toString()),{data:{session:U.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:c,expires_at:l,token_type:d}=t;if(!o||!c||!a||!d)throw new Lo("No session defined in URL");let h=Math.round(Date.now()/1e3),p=parseInt(c),m=h+p;l&&(m=parseInt(l));let _=m-h;_*1e3<=Oo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${p}s`);let b=m-p;h-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,m,h):h-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,m,h);let{data:E,error:R}=yield this._getUser(o);if(R)throw R;let j={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:p,expires_at:m,refresh_token:a,token_type:d,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:j,redirectType:t.type},error:null}}catch(i){if(_e(i))return{data:{session:null,redirectType:null},error:i};throw i}})}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}_isPKCECallback(t){return y(this,null,function*(){let r=yield yd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)})}signOut(){return y(this,arguments,function*(t={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){return yield this._signOut(t)}))})}_signOut(){return y(this,arguments,function*({scope:t}={scope:"global"}){return yield this._useSession(r=>y(this,null,function*(){var i;let{data:s,error:o}=r;if(o)return{error:o};let a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=yield this.admin.signOut(a,t);if(c&&!(vN(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(yield this._removeSession(),yield vd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))})}onAuthStateChange(t){let r=SN(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),y(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){this._emitInitialSession(r)}))}),{data:{subscription:i}}}_emitInitialSession(t){return y(this,null,function*(){return yield this._useSession(r=>y(this,null,function*(){var i,s;try{let{data:{session:o},error:a}=r;if(a)throw a;yield(i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",t,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",t,"error",o),console.error(o)}}))})}resetPasswordForEmail(i){return y(this,arguments,function*(t,r={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield jo(this.storage,this.storageKey,!0));try{return yield ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(_e(a))return{data:null,error:a};throw a}})}getUserIdentities(){return y(this,null,function*(){var t;try{let{data:r,error:i}=yield this.getUser();if(i)throw i;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(_e(r))return{data:null,error:r};throw r}})}linkIdentity(t){return y(this,null,function*(){var r;try{let{data:i,error:s}=yield this._useSession(o=>y(this,null,function*(){var a,c,l,d,h;let{data:p,error:m}=o;if(m)throw m;let _=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield ke(this.fetch,"GET",_,{headers:this.headers,jwt:(h=(d=p.session)===null||d===void 0?void 0:d.access_token)!==null&&h!==void 0?h:void 0})}));if(s)throw s;return br()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:t.provider,url:i?.url},error:null}}catch(i){if(_e(i))return{data:{provider:t.provider,url:null},error:i};throw i}})}unlinkIdentity(t){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)throw a;return yield ke(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})}))}catch(r){if(_e(r))return{data:null,error:r};throw r}})}_refreshAccessToken(t){return y(this,null,function*(){let r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return yield RN(s=>y(this,null,function*(){return s>0&&(yield kN(200*Math.pow(2,s-1))),this._debug(r,"refreshing attempt",s),yield ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:xi})}),(s,o)=>{let a=200*Math.pow(2,s);return o&&Yg(o)&&Date.now()+a-i<Oo})}catch(i){if(this._debug(r,"error",i),_e(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(r,"end")}})}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}_handleProviderSignIn(t,r){return y(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),br()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}})}_recoverAndRefresh(){return y(this,null,function*(){var t;let r="#_recoverAndRefresh()";this._debug(r,"begin");try{let i=yield yd(this.storage,this.storageKey);if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&(yield this._removeSession());return}let s=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Kg;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Kg}s`),s){if(this.autoRefreshToken&&i.refresh_token){let{error:o}=yield this._callRefreshToken(i.refresh_token);o&&(console.error(o),Yg(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}})}_callRefreshToken(t){return y(this,null,function*(){var r,i;if(!t)throw new rr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new md;let{data:o,error:a}=yield this._refreshAccessToken(t);if(a)throw a;if(!o.session)throw new rr;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let c={session:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(s,"error",o),_e(o)){let a={session:null,error:o};return Yg(o)||(yield this._removeSession()),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(t,r,i=!0){return y(this,null,function*(){let s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(c=>y(this,null,function*(){try{yield c.callback(t,r)}catch(l){o.push(l)}}));if(yield Promise.all(a),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(t){return y(this,null,function*(){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,yield Ub(this.storage,this.storageKey,t)})}_removeSession(){return y(this,null,function*(){this._debug("#_removeSession()"),yield vd(this.storage,this.storageKey),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&br()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}_startAutoRefresh(){return y(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let t=setInterval(()=>this._autoRefreshTokenTick(),Oo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(()=>y(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return y(this,null,function*(){this._debug("#_stopAutoRefresh()");let t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)})}startAutoRefresh(){return y(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return y(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return y(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>y(this,null,function*(){try{let t=Date.now();try{return yield this._useSession(r=>y(this,null,function*(){let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((i.expires_at*1e3-t)/Oo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Oo}ms, refresh threshold is ${Wg} ticks`),s<=Wg&&(yield this._callRefreshToken(i.refresh_token))}))}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(t){if(t.isAcquireTimeout||t instanceof _d)this._debug("auto refresh token tick lock not available");else throw t}})}_handleVisibilityChange(){return y(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!br()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>y(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}})}_onVisibilityChanged(t){return y(this,null,function*(){let r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(yield this.initializePromise,yield this._acquireLock(-1,()=>y(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(t,r,i){return y(this,null,function*(){let s=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[o,a]=yield jo(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(c.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${s.join("&")}`})}_unenroll(t){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:s,error:o}=r;return o?{data:null,error:o}:yield ke(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(_e(r))return{data:null,error:r};throw r}})}_enroll(t){return y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i,s;let{data:o,error:a}=r;if(a)return{data:null,error:a};let c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:d}=yield ke(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return d?{data:null,error:d}:(t.factorType==="totp"&&(!((s=l?.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})}))}catch(r){if(_e(r))return{data:null,error:r};throw r}})}_verify(t){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:s,error:o}=r;if(o)return{data:null,error:o};let{data:a,error:c}=yield ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:c})}))}catch(r){if(_e(r))return{data:null,error:r};throw r}}))})}_challenge(t){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){try{return yield this._useSession(r=>y(this,null,function*(){var i;let{data:s,error:o}=r;return o?{data:null,error:o}:yield ke(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(r){if(_e(r))return{data:null,error:r};throw r}}))})}_challengeAndVerify(t){return y(this,null,function*(){let{data:r,error:i}=yield this._challenge({factorId:t.factorId});return i?{data:null,error:i}:yield this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})})}_listFactors(){return y(this,null,function*(){let{data:{user:t},error:r}=yield this.getUser();if(r)return{data:null,error:r};let i=t?.factors||[],s=i.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=i.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:i,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return y(this,null,function*(){return this._acquireLock(-1,()=>y(this,null,function*(){return yield this._useSession(t=>y(this,null,function*(){var r,i;let{data:{session:s},error:o}=t;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:a}=Jg(s.access_token),c=null;a.aal&&(c=a.aal);let l=c;((i=(r=s.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");let h=a.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}))})}fetchJwk(i){return y(this,arguments,function*(t,r={keys:[]}){let s=r.keys.find(c=>c.kid===t);if(s||(s=this.jwks.keys.find(c=>c.kid===t),s&&this.jwks_cached_at+yN>Date.now()))return s;let{data:o,error:a}=yield ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!o.keys||o.keys.length===0)throw new Ai("JWKS is empty");if(this.jwks=o,this.jwks_cached_at=Date.now(),s=o.keys.find(c=>c.kid===t),!s)throw new Ai("No matching signing key found in JWKS");return s})}getClaims(i){return y(this,arguments,function*(t,r={keys:[]}){try{let s=t;if(!s){let{data:b,error:E}=yield this.getSession();if(E||!b.session)return{data:null,error:E};s=b.session.access_token}let{header:o,payload:a,signature:c,raw:{header:l,payload:d}}=Jg(s);if(NN(a.exp),!o.kid||o.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){let{error:b}=yield this.getUser(s);if(b)throw b;return{data:{claims:a,header:o,signature:c},error:null}}let h=PN(o.alg),p=yield this.fetchJwk(o.kid,r),m=yield crypto.subtle.importKey("jwk",p,h,!0,["verify"]);if(!(yield crypto.subtle.verify(h,m,c,TN(`${l}.${d}`))))throw new Ai("Invalid JWT signature");return{data:{claims:a,header:o,signature:c},error:null}}catch(s){if(_e(s))return{data:null,error:s};throw s}})}}return n.nextInstanceID=0,n})();var O5=zb,Hb=O5;var em=class extends Hb{constructor(e){super(e)}};var F5=function(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(h){o(h)}}function c(d){try{l(r.throw(d))}catch(h){o(h)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})},tm=class{constructor(e,t,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");let a=dN(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let c=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l={db:aN,realtime:lN,auth:Object.assign(Object.assign({},cN),{storageKey:c}),global:oN},d=hN(r??{},l);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=uN(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new W1(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Xu(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new ud(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return F5(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:c},l,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new em({url:this.authUrl,headers:Object.assign(Object.assign({},h),l),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new cd(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var BN=(n,e,t)=>new tm(n,e,t);var kc=(()=>{let e=class e{constructor(){this.session=null,this.supabase=BN(ae.supabase.url,ae.supabase.key)}getSupabaseClient(){return this.supabase}signInWithGitHub(r="",i="read:user"){return y(this,null,function*(){return this.supabase.auth.signInWithOAuth({provider:"github",options:{redirectTo:window.location.origin+r,scopes:i}})})}getSession(){return y(this,null,function*(){let{data:{session:r},error:i}=yield this.supabase.auth.getSession();if(!r)throw i;return this.session=r,r})}getUserDataProperty(r){if(this.session&&this.session.user&&this.session.user.user_metadata){let i=this.session.user.user_metadata;return i.hasOwnProperty(r)?i[r]:null}return null}getChannelSubscriptionId(r,i){let s=r.filter(o=>o.channel===i);return s.length>0&&s[0].channel===i?s[0].paypal:""}signoutSession(){return y(this,null,function*(){yield this.supabase.auth.signOut(),this.session=null})}isLoggedIn(){return this.session!==null}getCachedSeession(){return this.session}updateUserData(r){return y(this,null,function*(){return this.supabase.auth.updateUser({data:r})})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Te="primary",Pd=Symbol("RouteTitle"),Zb=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Fc(n){return new Zb(n)}function L5(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function V5(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!zr(n[t],e[t]))return!1;return!0}function zr(n,e){let t=n?Jb(n):void 0,r=e?Jb(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!XN(n[i],e[i]))return!1;return!0}function Jb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function XN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function eP(n){return n.length>0?n[n.length-1]:null}function Ds(n){return r_(n)?n:ms(n)?Pe(Promise.resolve(n)):he(n)}var j5={exact:nP,subset:rP},tP={exact:U5,subset:$5,ignored:()=>!0};function qN(n,e,t){return j5[t.paths](n.root,e.root,t.matrixParams)&&tP[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function U5(n,e){return zr(n,e)}function nP(n,e,t){if(!qo(n.segments,e.segments)||!im(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!nP(n.children[r],e.children[r],t))return!1;return!0}function $5(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>XN(n[t],e[t]))}function rP(n,e,t){return iP(n,e,e.segments,t)}function iP(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!qo(i,t)||e.hasChildren()||!im(i,t,r))}else if(n.segments.length===t.length){if(!qo(n.segments,t)||!im(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!rP(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!qo(n.segments,i)||!im(n.segments,i,r)||!n.children[Te]?!1:iP(n.children[Te],e,s,r)}}function im(n,e,t){return e.every((r,i)=>tP[t](n[i].parameters,r.parameters))}var Ri=class{constructor(e=new He([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fc(this.queryParams),this._queryParamMap}toString(){return z5.serialize(this)}},He=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return sm(this)}},Bo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Fc(this.parameters),this._parameterMap}toString(){return oP(this)}};function B5(n,e){return qo(n,e)&&n.every((t,r)=>zr(t.parameters,e[r].parameters))}function qo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function q5(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Te&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Te&&(t=t.concat(e(i,r)))}),t}var Od=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>new Lc,providedIn:"root"});let n=e;return n})(),Lc=class{parse(e){let t=new eE(e);return new Ri(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wd(e.root,!0)}`,r=W5(e.queryParams),i=typeof e.fragment=="string"?`#${H5(e.fragment)}`:"";return`${t}${r}${i}`}},z5=new Lc;function sm(n){return n.segments.map(e=>oP(e)).join("/")}function wd(n,e){if(!n.hasChildren())return sm(n);if(e){let t=n.children[Te]?wd(n.children[Te],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==Te&&r.push(`${i}:${wd(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=q5(n,(r,i)=>i===Te?[wd(n.children[Te],!1)]:[`${i}:${wd(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Te]!=null?`${sm(n)}/${t[0]}`:`${sm(n)}/(${t.join("//")})`}}function sP(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function nm(n){return sP(n).replace(/%3B/gi,";")}function H5(n){return encodeURI(n)}function Xb(n){return sP(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function om(n){return decodeURIComponent(n)}function zN(n){return om(n.replace(/\+/g,"%20"))}function oP(n){return`${Xb(n.path)}${G5(n.parameters)}`}function G5(n){return Object.entries(n).map(([e,t])=>`;${Xb(e)}=${Xb(t)}`).join("")}function W5(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${nm(t)}=${nm(i)}`).join("&"):`${nm(t)}=${nm(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var K5=/^[^\/()?;#]+/;function Wb(n){let e=n.match(K5);return e?e[0]:""}var Q5=/^[^\/()?;=#]+/;function Y5(n){let e=n.match(Q5);return e?e[0]:""}var Z5=/^[^=?&#]+/;function J5(n){let e=n.match(Z5);return e?e[0]:""}var X5=/^[^&#]+/;function e6(n){let e=n.match(X5);return e?e[0]:""}var eE=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new He([],{}):new He([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Te]=new He(e,t)),r}parseSegment(){let e=Wb(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new Bo(om(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Y5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Wb(this.remaining);i&&(r=i,this.capture(r))}e[om(t)]=om(r)}parseQueryParam(e){let t=J5(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=e6(this.remaining);o&&(r=o,this.capture(r))}let i=zN(t),s=zN(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Wb(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ie(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Te);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[Te]:new He([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function aP(n){return n.segments.length>0?new He([],{[Te]:n}):n}function cP(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=cP(i);if(r===Te&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new He(n.segments,e);return t6(t)}function t6(n){if(n.numberOfChildren===1&&n.children[Te]){let e=n.children[Te];return new He(n.segments.concat(e.segments),e.children)}return n}function Dd(n){return n instanceof Ri}function n6(n,e,t=null,r=null){let i=lP(n);return uP(i,e,t,r)}function lP(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new He(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=aP(r);return e??i}function uP(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Kb(i,i,i,t,r);let s=r6(e);if(s.toRoot())return Kb(i,i,new He([],{}),t,r);let o=i6(s,i,n),a=o.processChildren?Id(o.segmentGroup,o.index,s.commands):hP(o.segmentGroup,o.index,s.commands);return Kb(i,o.segmentGroup,a,t,r)}function am(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Sd(n){return typeof n=="object"&&n!=null&&n.outlets}function Kb(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=dP(n,e,t);let a=aP(cP(o));return new Ri(a,s,i)}function dP(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=dP(s,e,t)}),new He(n.segments,r)}var cm=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&am(r[0]))throw new ie(4003,!1);let i=r.find(Sd);if(i&&i!==eP(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function r6(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new cm(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new cm(t,e,r)}var Nc=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function i6(n,e,t){if(n.isAbsolute)return new Nc(e,!0,0);if(!t)return new Nc(e,!1,NaN);if(t.parent===null)return new Nc(t,!0,0);let r=am(n.commands[0])?0:1,i=t.segments.length-1+r;return s6(t,i,n.numberOfDoubleDots)}function s6(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ie(4005,!1);i=r.segments.length}return new Nc(r,!1,i-s)}function o6(n){return Sd(n[0])?n[0].outlets:{[Te]:n}}function hP(n,e,t){if(n??=new He([],{}),n.segments.length===0&&n.hasChildren())return Id(n,e,t);let r=a6(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new He(n.segments.slice(0,r.pathIndex),{});return s.children[Te]=new He(n.segments.slice(r.pathIndex),n.children),Id(s,0,i)}else return r.match&&i.length===0?new He(n.segments,{}):r.match&&!n.hasChildren()?tE(n,e,t):r.match?Id(n,0,i):tE(n,e,t)}function Id(n,e,t){if(t.length===0)return new He(n.segments,{});{let r=o6(t),i={};if(Object.keys(r).some(s=>s!==Te)&&n.children[Te]&&n.numberOfChildren===1&&n.children[Te].segments.length===0){let s=Id(n.children[Te],e,t);return new He(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=hP(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new He(n.segments,i)}}function a6(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Sd(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!GN(c,l,o))return s;r+=2}else{if(!GN(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function tE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Sd(s)){let c=c6(s.outlets);return new He(r,c)}if(i===0&&am(t[0])){let c=n.segments[e];r.push(new Bo(c.path,HN(t[0]))),i++;continue}let o=Sd(s)?s.outlets[Te]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&am(a)?(r.push(new Bo(o,HN(a))),i+=2):(r.push(new Bo(o,{})),i++)}return new He(r,{})}function c6(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=tE(new He([],{}),0,r))}),e}function HN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function GN(n,e,t){return n==t.path&&zr(e,t.parameters)}var Cd="imperative",zt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(zt||{}),ir=class{constructor(e,t){this.id=e,this.url=t}},Vc=class extends ir{constructor(e,t,r="imperative",i=null){super(e,t),this.type=zt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Mi=class extends ir{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=zt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Wn||{}),lm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(lm||{}),ki=class extends ir{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=zt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ts=class extends ir{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=zt.NavigationSkipped}},Ad=class extends ir{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=zt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},um=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nE=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rE=class extends ir{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=zt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},iE=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sE=class extends ir{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oE=class{constructor(e){this.route=e,this.type=zt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},aE=class{constructor(e){this.route=e,this.type=zt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},cE=class{constructor(e){this.snapshot=e,this.type=zt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lE=class{constructor(e){this.snapshot=e,this.type=zt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},uE=class{constructor(e){this.snapshot=e,this.type=zt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dE=class{constructor(e){this.snapshot=e,this.type=zt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},dm=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=zt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},xd=class{},jc=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function l6(n,e){return n.providers&&!n._injector&&(n._injector=zp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Er(n){return n.outlet||Te}function u6(n,e){let t=n.filter(r=>Er(r)===e);return t.push(...n.filter(r=>Er(r)!==e)),t}function Fd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var hE=class{get injector(){return Fd(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ld(this.rootInjector),this.attachRef=null}},Ld=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new hE(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(q(vn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),hm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=fE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=fE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=pE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return pE(e,this._root).map(t=>t.value)}};function fE(n,e){if(n===e.value)return e;for(let t of e.children){let r=fE(n,t);if(r)return r}return null}function pE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=pE(n,t);if(r.length)return r.unshift(e),r}return[]}var Gn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Mc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var fm=class extends hm{constructor(e,t){super(e),this.snapshot=t,IE(this,e)}toString(){return this.snapshot.toString()}};function fP(n){let e=d6(n),t=new Gt([new Bo("",{})]),r=new Gt({}),i=new Gt({}),s=new Gt({}),o=new Gt(""),a=new Ln(t,r,s,o,i,Te,n,e.root);return a.snapshot=e.root,new fm(new Gn(a,[]),e)}function d6(n){let e={},t={},r={},i="",s=new Pc([],e,r,i,t,Te,n,null,{});return new gm("",new Gn(s,[]))}var Ln=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(de(l=>l[Pd]))??he(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(de(e=>Fc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(de(e=>Fc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&gP(i)&&(r.resolve[Pd]=i.title),r}var Pc=class{get title(){return this.data?.[Pd]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},gm=class extends hm{constructor(e,t){super(t),this.url=e,IE(this,t)}toString(){return pP(this._root)}};function IE(n,e){e.value._routerState=n,e.children.forEach(t=>IE(n,t))}function pP(n){let e=n.children.length>0?` { ${n.children.map(pP).join(", ")} } `:"";return`${n.value}${e}`}function Qb(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,zr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),zr(e.params,t.params)||n.paramsSubject.next(t.params),V5(e.url,t.url)||n.urlSubject.next(t.url),zr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function gE(n,e){let t=zr(n.params,e.params)&&B5(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||gE(n.parent,e.parent))}function gP(n){return typeof n.title=="string"||n.title===null}var CE=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Te,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=G(Ld),this.location=G(Rn),this.changeDetector=G(Ur),this.inputBinder=G(wm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new mE(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Dt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ls]});let n=e;return n})(),mE=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ln?this.route:e===Ld?this.childContexts:this.parent.get(e,t)}},wm=new Z(""),WN=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=ou([i.queryParams,i.params,i.data]).pipe(Je(([o,a,c],l)=>(c=P(P(P({},o),a),c),l===0?he(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=XR(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function h6(n,e,t){let r=kd(n,e._root,t?t._root:void 0);return new fm(r,e)}function kd(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=f6(n,e,t);return new Gn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>kd(n,a)),o}}let r=p6(e.value),i=e.children.map(s=>kd(n,s));return new Gn(r,i)}}function f6(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return kd(n,r,i);return kd(n,r)})}function p6(n){return new Ln(new Gt(n.url),new Gt(n.params),new Gt(n.queryParams),new Gt(n.fragment),new Gt(n.data),n.outlet,n.component,n)}var Rd=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},mP="ngNavigationCancelingError";function mm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Dd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yP(!1,Wn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function yP(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[mP]=!0,t.cancellationCode=e,t}function g6(n){return vP(n)&&Dd(n.url)}function vP(n){return!!n&&n[mP]}var m6=(n,e,t,r)=>de(i=>(new yE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),yE=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Qb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Mc(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Mc(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Mc(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new dE(s.value.snapshot))}),e.children.length&&this.forwardEvent(new lE(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Qb(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Qb(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},ym=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Oc=class{constructor(e,t){this.component=e,this.route=t}};function y6(n,e,t){let r=n._root,i=e?e._root:null;return bd(r,i,t,[r.value])}function v6(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function $c(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!cx(n)?n:e.get(n):r}function bd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Mc(e);return n.children.forEach(o=>{_6(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Td(a,t.getContext(o),i)),i}function _6(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=w6(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ym(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?bd(n,e,a?a.children:null,r,i):bd(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Oc(a.outlet.component,o))}else o&&Td(e,a,i),i.canActivateChecks.push(new ym(r)),s.component?bd(n,null,a?a.children:null,r,i):bd(n,null,t,r,i);return i}function w6(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!qo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!qo(n.url,e.url)||!zr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gE(n,e)||!zr(n.queryParams,e.queryParams);case"paramsChange":default:return!gE(n,e)}}function Td(n,e,t){let r=Mc(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Td(o,e.children.getContext(s),t):Td(o,null,t):Td(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Oc(e.outlet.component,i)):t.canDeactivateChecks.push(new Oc(null,i)):t.canDeactivateChecks.push(new Oc(null,i))}function Vd(n){return typeof n=="function"}function b6(n){return typeof n=="boolean"}function E6(n){return n&&Vd(n.canLoad)}function I6(n){return n&&Vd(n.canActivate)}function C6(n){return n&&Vd(n.canActivateChild)}function T6(n){return n&&Vd(n.canDeactivate)}function D6(n){return n&&Vd(n.canMatch)}function _P(n){return n instanceof ci||n?.name==="EmptyError"}var rm=Symbol("INITIAL_VALUE");function Uc(){return Je(n=>ou(n.map(e=>e.pipe(ui(1),di(rm)))).pipe(de(e=>{for(let t of e)if(t!==!0){if(t===rm)return rm;if(t===!1||S6(t))return t}return!0}),Lt(e=>e!==rm),ui(1)))}function S6(n){return Dd(n)||n instanceof Rd}function A6(n,e){return Et(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?he(ne(P({},t),{guardsResult:!0})):x6(o,r,i,n).pipe(Et(a=>a&&b6(a)?k6(r,s,n,e):he(a)),de(a=>ne(P({},t),{guardsResult:a})))})}function x6(n,e,t,r){return Pe(n).pipe(Et(i=>O6(i.component,i.route,t,e,r)),$n(i=>i!==!0,!0))}function k6(n,e,t,r){return Pe(e).pipe(li(i=>Ra(M6(i.route.parent,r),R6(i.route,r),P6(n,i.path,t),N6(n,i.route,t))),$n(i=>i!==!0,!0))}function R6(n,e){return n!==null&&e&&e(new uE(n)),he(!0)}function M6(n,e){return n!==null&&e&&e(new cE(n)),he(!0)}function N6(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return he(!0);let i=r.map(s=>Rf(()=>{let o=Fd(e)??t,a=$c(s,o),c=I6(a)?a.canActivate(e,n):Xn(o,()=>a(e,n));return Ds(c).pipe($n())}));return he(i).pipe(Uc())}function P6(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>v6(o)).filter(o=>o!==null).map(o=>Rf(()=>{let a=o.guards.map(c=>{let l=Fd(o.node)??t,d=$c(c,l),h=C6(d)?d.canActivateChild(r,n):Xn(l,()=>d(r,n));return Ds(h).pipe($n())});return he(a).pipe(Uc())}));return he(s).pipe(Uc())}function O6(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return he(!0);let o=s.map(a=>{let c=Fd(e)??i,l=$c(a,c),d=T6(l)?l.canDeactivate(n,e,t,r):Xn(c,()=>l(n,e,t,r));return Ds(d).pipe($n())});return he(o).pipe(Uc())}function F6(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return he(!0);let s=i.map(o=>{let a=$c(o,n),c=E6(a)?a.canLoad(e,t):Xn(n,()=>a(e,t));return Ds(c)});return he(s).pipe(Uc(),wP(r))}function wP(n){return Yv(It(e=>{if(typeof e!="boolean")throw mm(n,e)}),de(e=>e===!0))}function L6(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return he(!0);let s=i.map(o=>{let a=$c(o,n),c=D6(a)?a.canMatch(e,t):Xn(n,()=>a(e,t));return Ds(c)});return he(s).pipe(Uc(),wP(r))}var Md=class{constructor(e){this.segmentGroup=e||null}},Nd=class extends Error{constructor(e){super(),this.urlTree=e}};function Rc(n){return ka(new Md(n))}function V6(n){return ka(new ie(4e3,!1))}function j6(n){return ka(yP(!1,Wn.GuardRejected))}var vE=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return he(r);if(i.numberOfChildren>1||!i.children[Te])return V6(`${e.redirectTo}`);i=i.children[Te]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,params:m,data:_,title:b}=i,E=Xn(s,()=>a({params:m,data:_,queryParams:c,fragment:l,routeConfig:d,url:h,outlet:p,title:b}));if(E instanceof Ri)throw new Nd(E);t=E}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Nd(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ri(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new He(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ie(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},_E={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function U6(n,e,t,r,i){let s=bP(n,e,t);return s.matched?(r=l6(e,r),L6(r,e,t,i).pipe(de(o=>o===!0?s:P({},_E)))):he(s)}function bP(n,e,t){if(e.path==="**")return $6(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},_E):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||L5)(t,n,e);if(!i)return P({},_E);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?P(P({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function $6(n){return{matched:!0,parameters:n.length>0?eP(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function KN(n,e,t,r){return t.length>0&&z6(n,t,r)?{segmentGroup:new He(e,q6(r,new He(t,n.children))),slicedSegments:[]}:t.length===0&&H6(n,t,r)?{segmentGroup:new He(n.segments,B6(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new He(n.segments,n.children),slicedSegments:t}}function B6(n,e,t,r){let i={};for(let s of t)if(bm(n,e,s)&&!r[Er(s)]){let o=new He([],{});i[Er(s)]=o}return P(P({},r),i)}function q6(n,e){let t={};t[Te]=e;for(let r of n)if(r.path===""&&Er(r)!==Te){let i=new He([],{});t[Er(r)]=i}return t}function z6(n,e,t){return t.some(r=>bm(n,e,r)&&Er(r)!==Te)}function H6(n,e,t){return t.some(r=>bm(n,e,r))}function bm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function G6(n,e,t){return e.length===0&&!n.children[t]}var wE=class{};function W6(n,e,t,r,i,s,o="emptyOnly"){return new bE(n,e,t,r,i,o,s).recognize()}var K6=31,bE=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new vE(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=KN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(de(({children:t,rootSnapshot:r})=>{let i=new Gn(r,t),s=new gm("",i),o=n6(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Pc([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Te,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Te,t).pipe(de(r=>({children:r,rootSnapshot:t})),Zi(r=>{if(r instanceof Nd)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Md?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(de(o=>o instanceof Gn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Pe(s).pipe(li(o=>{let a=r.children[o],c=u6(t,o);return this.processSegmentGroup(e,c,a,o,i)}),so((o,a)=>(o.push(...a),o)),Ji(null),a_(),Et(o=>{if(o===null)return Rc(r);let a=EP(o);return Q6(a),he(a)}))}processSegment(e,t,r,i,s,o,a){return Pe(t).pipe(li(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Zi(l=>{if(l instanceof Md)return he(null);throw l}))),$n(c=>!!c),Zi(c=>{if(_P(c))return G6(r,i,s)?he(new wE):Rc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Er(r)!==o&&(o===Te||!bm(i,s,r))?Rc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Rc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:h,remainingSegments:p}=bP(t,i,s);if(!c)return Rc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>K6&&(this.allowRedirects=!1));let m=new Pc(s,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,QN(i),Er(i),i.component??i._loadedComponent??null,i,YN(i)),_=pm(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(_.params),m.data=Object.freeze(_.data);let b=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,h,m,e);return this.applyRedirects.lineralizeSegments(i,b).pipe(Et(E=>this.processSegment(e,r,t,E.concat(p),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=U6(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Je(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Je(({routes:l})=>{let d=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=c,_=new Pc(p,h,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,QN(r),Er(r),r.component??r._loadedComponent??null,r,YN(r)),b=pm(_,o,this.paramsInheritanceStrategy);_.params=Object.freeze(b.params),_.data=Object.freeze(b.data);let{segmentGroup:E,slicedSegments:R}=KN(t,p,m,l);if(R.length===0&&E.hasChildren())return this.processChildren(d,l,E,_).pipe(de(U=>new Gn(_,U)));if(l.length===0&&R.length===0)return he(new Gn(_,[]));let j=Er(r)===s;return this.processSegment(d,l,E,R,j?Te:s,!0,_).pipe(de(U=>new Gn(_,U instanceof Gn?[U]:[])))}))):Rc(t)))}getChildConfig(e,t,r){return t.children?he({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?he({routes:t._loadedRoutes,injector:t._loadedInjector}):F6(e,t,r,this.urlSerializer).pipe(Et(i=>i?this.configLoader.loadChildren(e,t).pipe(It(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):j6(t))):he({routes:[],injector:e})}};function Q6(n){n.sort((e,t)=>e.value.outlet===Te?-1:t.value.outlet===Te?1:e.value.outlet.localeCompare(t.value.outlet))}function Y6(n){let e=n.value.routeConfig;return e&&e.path===""}function EP(n){let e=[],t=new Set;for(let r of n){if(!Y6(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=EP(r.children);e.push(new Gn(r.value,i))}return e.filter(r=>!t.has(r))}function QN(n){return n.data||{}}function YN(n){return n.resolve||{}}function Z6(n,e,t,r,i,s){return Et(o=>W6(n,e,t,r,o.extractedUrl,i,s).pipe(de(({state:a,tree:c})=>ne(P({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function J6(n,e){return Et(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return he(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of IP(c))o.add(l);let a=0;return Pe(o).pipe(li(c=>s.has(c)?X6(c,r,n,e):(c.data=pm(c,c.parent,n).resolve,he(void 0))),It(()=>a++),Ma(1),Et(c=>a===o.size?he(t):gn))})}function IP(n){let e=n.children.map(t=>IP(t)).flat();return[n,...e]}function X6(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!gP(i)&&(s[Pd]=i.title),e8(s,n,e,r).pipe(de(o=>(n._resolvedData=o,n.data=pm(n,n.parent,t).resolve,null)))}function e8(n,e,t,r){let i=Jb(n);if(i.length===0)return he({});let s={};return Pe(i).pipe(Et(o=>t8(n[o],e,t,r).pipe($n(),It(a=>{if(a instanceof Rd)throw mm(new Lc,a);s[o]=a}))),Ma(1),cu(s),Zi(o=>_P(o)?gn:ka(o)))}function t8(n,e,t,r){let i=Fd(e)??r,s=$c(n,i),o=s.resolve?s.resolve(e,t):Xn(i,()=>s(e,t));return Ds(o)}function Yb(n){return Je(e=>{let t=n(e);return t?Pe(t).pipe(de(()=>e)):he(e)})}var CP=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===Te);return i}getResolvedTitleForRoute(r){return r.data[Pd]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(n8),providedIn:"root"});let n=e;return n})(),n8=(()=>{let e=class e extends CP{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(q(Pn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),jd=new Z("",{providedIn:"root",factory:()=>({})}),r8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Re({type:e,selectors:[["ng-component"]],standalone:!0,features:[Au],decls:1,vars:0,template:function(i,s){i&1&&re(0,"router-outlet")},dependencies:[CE],encapsulation:2});let n=e;return n})();function TE(n){let e=n.children&&n.children.map(TE),t=e?ne(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Te&&(t.component=r8),t}var vm=new Z(""),DE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=G(tg)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return he(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Ds(r.loadComponent()).pipe(de(TP),It(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),io(()=>{this.componentLoaders.delete(r)})),s=new Da(i,()=>new ze).pipe(Ta());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return he({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=i8(i,this.compiler,r,this.onLoadEndListener).pipe(io(()=>{this.childrenLoaders.delete(i)})),a=new Da(o,()=>new ze).pipe(Ta());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function i8(n,e,t,r){return Ds(n.loadChildren()).pipe(de(TP),Et(i=>i instanceof bu||Array.isArray(i)?he(i):Pe(e.compileModuleAsync(i))),de(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(vm,[],{optional:!0,self:!0}).flat()),{routes:o.map(TE),injector:s}}))}function s8(n){return n&&typeof n=="object"&&"default"in n}function TP(n){return s8(n)?n.default:n}var SE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(o8),providedIn:"root"});let n=e;return n})(),o8=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),DP=new Z(""),SP=new Z("");function a8(n,e,t){let r=n.get(SP),i=n.get(jt);return n.get(De).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),c8(n))),{onViewTransitionCreated:c}=r;return c&&Xn(n,()=>c({transition:a,from:e,to:t})),o})}function c8(n){return new Promise(e=>{m0({read:()=>setTimeout(e)},{injector:n})})}var l8=new Z(""),AE=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ze,this.transitionAbortSubject=new ze,this.configLoader=G(DE),this.environmentInjector=G(vn),this.urlSerializer=G(Od),this.rootContexts=G(Ld),this.location=G(cc),this.inputBindingEnabled=G(wm,{optional:!0})!==null,this.titleStrategy=G(CP),this.options=G(jd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=G(SE),this.createViewTransition=G(DP,{optional:!0}),this.navigationErrorHandler=G(l8,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>he(void 0),this.rootComponentType=null;let r=s=>this.events.next(new oE(s)),i=s=>this.events.next(new aE(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ne(P(P({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Gt({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Cd,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Lt(o=>o.id!==0),de(o=>ne(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Je(o=>{let a=!1,c=!1;return he(o).pipe(Je(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Wn.SupersededByNewNavigation),gn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?ne(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&h!=="reload"){let p="";return this.events.next(new Ts(l.id,this.urlSerializer.serialize(l.rawUrl),p,lm.IgnoredSameUrlNavigation)),l.resolve(!1),gn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return he(l).pipe(Je(p=>{let m=this.transitions?.getValue();return this.events.next(new Vc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?gn:Promise.resolve(p)}),Z6(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),It(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=ne(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new um(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:b,extras:E}=l,R=new Vc(p,this.urlSerializer.serialize(m),_,b);this.events.next(R);let j=fP(this.rootComponentType).snapshot;return this.currentTransition=o=ne(P({},l),{targetSnapshot:j,urlAfterRedirects:m,extras:ne(P({},E),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,he(o)}else{let p="";return this.events.next(new Ts(l.id,this.urlSerializer.serialize(l.extractedUrl),p,lm.IgnoredByUrlHandlingStrategy)),l.resolve(!1),gn}}),It(l=>{let d=new nE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),de(l=>(this.currentTransition=o=ne(P({},l),{guards:y6(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),A6(this.environmentInjector,l=>this.events.next(l)),It(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw mm(this.urlSerializer,l.guardsResult);let d=new rE(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),Lt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Wn.GuardRejected),!1)),Yb(l=>{if(l.guards.canActivateChecks.length)return he(l).pipe(It(d=>{let h=new iE(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Je(d=>{let h=!1;return he(d).pipe(J6(this.paramsInheritanceStrategy,this.environmentInjector),It({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",Wn.NoDataFromResolver)}}))}),It(d=>{let h=new sE(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),Yb(l=>{let d=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(It(m=>{h.component=m}),de(()=>{})));for(let m of h.children)p.push(...d(m));return p};return ou(d(l.targetSnapshot.root)).pipe(Ji(null),ui(1))}),Yb(()=>this.afterPreactivation()),Je(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return h?Pe(h).pipe(de(()=>o)):he(o)}),de(l=>{let d=h6(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=ne(P({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),It(()=>{this.events.next(new xd)}),m6(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),ui(1),It({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Mi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),du(this.transitionAbortSubject.pipe(It(l=>{throw l}))),io(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Wn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Zi(l=>{if(c=!0,vP(l))this.events.next(new ki(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),g6(l)?this.events.next(new jc(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Ad(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let h=Xn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(h instanceof Rd){let{message:p,cancellationCode:m}=mm(this.urlSerializer,h);this.events.next(new ki(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new jc(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(d);let p=r.errorHandler(l);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return gn}))}))}cancelNavigationTransition(r,i,s){let o=new ki(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function u8(n){return n!==Cd}var d8=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(h8),providedIn:"root"});let n=e;return n})(),EE=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},h8=(()=>{let e=class e extends EE{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),AP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:()=>G(f8),providedIn:"root"});let n=e;return n})(),f8=(()=>{let e=class e extends AP{constructor(){super(...arguments),this.location=G(cc),this.urlSerializer=G(Od),this.options=G(jd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=G(SE),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ri,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=fP(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Vc)this.stateMemento=this.createStateMemento();else if(r instanceof Ts)this.rawUrlTree=i.initialUrl;else if(r instanceof um){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof xd?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof ki&&(r.code===Wn.GuardRejected||r.code===Wn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ad?this.restoreHistory(i,!0):r instanceof Mi&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof Ri?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=P(P({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=P(P({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ed=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ed||{});function xP(n,e){n.events.pipe(Lt(t=>t instanceof Mi||t instanceof ki||t instanceof Ad||t instanceof Ts),de(t=>t instanceof Mi||t instanceof Ts?Ed.COMPLETE:(t instanceof ki?t.code===Wn.Redirect||t.code===Wn.SupersededByNewNavigation:!1)?Ed.REDIRECTING:Ed.FAILED),Lt(t=>t!==Ed.REDIRECTING),ui(1)).subscribe(()=>{e()})}function p8(n){throw n}var g8={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},m8={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=G(Yp),this.stateManager=G(AP),this.options=G(jd,{optional:!0})||{},this.pendingTasks=G(hs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=G(AE),this.urlSerializer=G(Od),this.location=G(cc),this.urlHandlingStrategy=G(SE),this._events=new ze,this.errorHandler=this.options.errorHandler||p8,this.navigated=!1,this.routeReuseStrategy=G(d8),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=G(vm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!G(wm,{optional:!0}),this.eventsSubscription=new ht,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ki&&i.code!==Wn.Redirect&&i.code!==Wn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Mi)this.navigated=!0;else if(i instanceof jc){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=P({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||u8(s.source)},a);this.scheduleNavigation(c,Cd,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}v8(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Cd,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=P({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(TE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,h=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=s?s.snapshot:this.routerState.snapshot.root;p=lP(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),p=this.currentUrlTree.root}return uP(p,r,h,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Dd(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Cd,null,i)}navigate(r,i={skipLocationChange:!1}){return y8(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=P({},g8):i===!1?s=P({},m8):s=i,Dd(r))return qN(this.currentUrlTree,r,s);let o=this.parseUrl(r);return qN(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((p,m)=>{c=p,l=m});let h=this.pendingTasks.add();return xP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(p=>Promise.reject(p))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function y8(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}function v8(n){return!(n instanceof xd)&&!(n instanceof jc)}var _m=class{};var _8=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Lt(r=>r instanceof Mi),li(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=zp(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return Pe(s).pipe(Yi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=he(null);let o=s.pipe(Et(a=>a===null?he(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Pe([o,a]).pipe(Yi())}else return o})}};e.\u0275fac=function(i){return new(i||e)(q(wn),q(tg),q(vn),q(_m),q(DE))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),kP=new Z(""),w8=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Vc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Mi?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Ts&&r.code===lm.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof dm&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new dm(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Kk()},e.\u0275prov=Y({token:e,factory:e.\u0275fac});let n=e;return n})();function b8(n){return n.routerState.root}function Ud(n,e){return{\u0275kind:n,\u0275providers:e}}function E8(){let n=G(qn);return e=>{let t=n.get(wi);if(e!==t.components[0])return;let r=n.get(wn),i=n.get(RP);n.get(xE)===1&&r.initialNavigation(),n.get(MP,null,xe.Optional)?.setUpPreloading(),n.get(kP,null,xe.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var RP=new Z("",{factory:()=>new ze}),xE=new Z("",{providedIn:"root",factory:()=>1});function I8(){return Ud(2,[{provide:xE,useValue:0},{provide:Xp,multi:!0,deps:[qn],useFactory:e=>{let t=e.get(lM,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(wn),s=e.get(RP);xP(i,()=>{r(!0)}),e.get(AE).afterPreactivation=()=>(r(!0),s.closed?he(void 0):s),i.initialNavigation()}))}}])}function C8(){return Ud(3,[{provide:Xp,multi:!0,useFactory:()=>{let e=G(wn);return()=>{e.setUpLocationChangeListener()}}},{provide:xE,useValue:2}])}var MP=new Z("");function T8(n){return Ud(0,[{provide:MP,useExisting:_8},{provide:_m,useExisting:n}])}function D8(){return Ud(8,[WN,{provide:wm,useExisting:WN}])}function S8(n){let e=[{provide:DP,useValue:a8},{provide:SP,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Ud(9,e)}var ZN=new Z("ROUTER_FORROOT_GUARD"),A8=[cc,{provide:Od,useClass:Lc},wn,Ld,{provide:Ln,useFactory:b8,deps:[wn]},DE,[]],kE=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[A8,[],{provide:vm,multi:!0,useValue:r},{provide:ZN,useFactory:M8,deps:[[wn,new Ja,new Ep]]},{provide:jd,useValue:i||{}},i?.useHash?k8():R8(),x8(),i?.preloadingStrategy?T8(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?N8(i):[],i?.bindToComponentInputs?D8().\u0275providers:[],i?.enableViewTransitions?S8().\u0275providers:[],P8()]}}static forChild(r){return{ngModule:e,providers:[{provide:vm,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(q(ZN,8))},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({});let n=e;return n})();function x8(){return{provide:kP,useFactory:()=>{let n=G(mM),e=G(De),t=G(jd),r=G(AE),i=G(Od);return t.scrollOffset&&n.setOffset(t.scrollOffset),new w8(i,r,n,e,t)}}}function k8(){return{provide:Do,useClass:dM}}function R8(){return{provide:Do,useClass:z0}}function M8(n){return"guarded"}function N8(n){return[n.initialNavigation==="disabled"?C8().\u0275providers:[],n.initialNavigation==="enabledBlocking"?I8().\u0275providers:[]]}var JN=new Z("");function P8(){return[{provide:JN,useFactory:E8},{provide:eg,multi:!0,useExisting:JN}]}function O8(n,e){n&1&&(D(0,"a",14)(1,"i",15),N(2,"\xA0Chat"),A()())}function F8(n,e){if(n&1&&(D(0,"li",11)(1,"a",16),N(2),A()()),n&2){let t=e.$implicit;L(),W("href",t.link,pt),L(),Ue(t.text)}}var NP=(()=>{let e=class e{constructor(r,i,s,o){this.cdRef=r,this.messaging=i,this.supabaseService=s,this.router=o,this.navUser=J.homeUser,this.photoUrl="",this.navLinks=J.navLinks,this.contactsFileFound=!1,this.userLoaded=J.ghUserLoaded,this.isHomeGHUser=!0,i.event$.subscribe(a=>{let c=a;switch(this.userLoaded=J.ghUserLoaded,this.isHomeGHUser=this.userLoaded==ae.gh_default_user_repo,c.cmd){case"UserDirectory":this.isHomeGHUser?this.navLinks.push({link:"#projects",text:"Solutions"}):this.navLinks.forEach(d=>{let h=J.navLinks.indexOf(d);J.navLinks[h].link=J.ghUser.blog}),this.navUser=J.ghUser,J.userContext.directory.folders.forEach(d=>{let h=d.charAt(0).toUpperCase()+d.slice(1),p=d.toLowerCase();p.endsWith("contacts")||this.navLinks.push({link:this.getNavLink(p),text:h})}),this.addAContactLink();break;case"PageFile":switch(c.file){case"HomeGHUser":break;default:break}break;default:break}})}getNavLink(r){return this.isHomeGHUser?"/"+r:`/${J.userContext.username}/${r}`}addAContactLink(){let r=J.userContext.directory;r.files&&r.files.includes("contacts.md")?this.navLinks.push({link:this.getNavLink("contacts"),text:"Contacts"}):this.navLinks.push({link:"#about",text:"Contact"})}ngOnInit(){}isLoggedIn(){return this.supabaseService.isLoggedIn()}signinWithGitHub(){return y(this,null,function*(){let r=window.location.pathname,{data:i,error:s}=yield this.supabaseService.signInWithGitHub(r);s&&console.error("Login error:",s.message)})}};e.\u0275fac=function(i){return new(i||e)($(Ur),$(cn),$(kc),$(wn))},e.\u0275cmp=Re({type:e,selectors:[["app-navbar"]],decls:18,vars:10,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container"],["href","/"],[1,"fa-solid","fa-link",2,"color","green"],[1,"navbar-brand",3,"href"],["href","/chat",4,"ngIf"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav","navbar-nav","ml-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","js-scroll-trigger",3,"click"],[1,"fa-solid","fa-crown"],["href","/chat"],[1,"fa-solid","fa-bolt","lightning-text"],[1,"nav-link","js-scroll-trigger",3,"href"]],template:function(i,s){i&1&&(D(0,"nav",0)(1,"div",1)(2,"span")(3,"a",2),re(4,"i",3),A(),D(5,"a",4)(6,"b"),N(7),A(),ge(8,O8,3,0,"a",5),A()(),D(9,"button",6),re(10,"span",7),A(),D(11,"div",8)(12,"ul",9),ge(13,F8,3,2,"li",10),xt(14,"slice"),D(15,"li",11)(16,"a",12),oe("click",function(){return s.signinWithGitHub()}),re(17,"i",13),A()()()()()()),i&2&&(L(5),W("href",s.userLoaded,pt),L(2),ct("\xA0",s.navUser.name,""),L(),W("ngIf",s.isHomeGHUser),L(5),W("ngForOf",oc(14,6,s.navLinks,0,7)),L(4),mr("color",s.isLoggedIn()?"green":"#FFD43B"))},dependencies:[Bt,qt,uc],styles:["@keyframes _ngcontent-%COMP%_blink{0%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(1.2)}to{opacity:1;transform:scale(1)}}.lightning-text[_ngcontent-%COMP%]{font-size:.5em;color:#ff4500;text-transform:lowercase;margin-left:5px;animation:_ngcontent-%COMP%_blink 2s infinite}"]});let n=e;return n})();var Me=class n{static parseHtmlLine(e){return e.includes("Widget:")?{Widget:"NAVI"}:{PageType:e}}static isMobileBrowser(){let e=navigator.userAgent||window.opera;return!!(/android/i.test(e)||/iPad|iPhone|iPod/.test(e)&&!window.MSStream)}static toString(e){return e==null?"":typeof e=="string"?e:String(e)}static unescape(e){return e=this.toString(e),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")}static getTodaysDate(e){let t=new Date().toUTCString();return t=t.replaceAll(" ",e),t.replace(",","")}static getBasePath(e){let t="",r=e.snapshot.url[0];return r&&r.path&&(t=r.path),r&&r.path?.toLocaleLowerCase()}static getUrl(e){let t=e.url;for(;t!==decodeURIComponent(t);)t=decodeURIComponent(t);let r=t.indexOf("?");return r>0?e.url.substring(0,r):e.url}static getRouterUrl(e,t){return this.getUrl(e).replace("/"+t,"")}static getRouteParam(e,t){return e.snapshot.paramMap.get(t)?.toLocaleLowerCase()}static getQueryParam(e,t){return e.snapshot.queryParamMap.get(t)}static getFirstLineEnd(e){return e.indexOf(`
`)}static getFirstLine(e){let t=e.indexOf(`
`);return t!==-1?e.substring(0,t):e}static getDataValueFromString(e){let t=e.charAt(0);return t=="["?(e=e.replace(/'/g,'"'),e=JSON.parse(e),e):t=="'"||t=="`"||t=='"'?(e=e.replace(/'/g,'"'),JSON.parse(e)):new Number(e)}static getFilesInFolder(e,t){return e.files.filter(r=>r.includes(t))}static getFileNameWithoutCurrentFolder(e,t){return n.getFileName(e.substring(e.indexOf(t)+t.length+1),!0)}static getFileName(e,t=!1){let i=(t?e:e.substring(e.lastIndexOf("/")+1)).replace(/[-_]/g," ");return i.substring(0,i.lastIndexOf("."))}static getFileNameWithCategory(e,t=!1){let r="",i=e.lastIndexOf("/");e.indexOf("/")!=-1&&(r=t?e.substring(0,e.indexOf("/")):e.substring(e.lastIndexOf("/",i-1)+1,i));let a=e.substring(i+1).replace(/[-_]/g," ");return{Category:r,File:a.substring(0,a.lastIndexOf("."))}}static closestHost(e){let t=e.replace("www.",""),r=t.substring(0,t.lastIndexOf("."));r!=""&&(t=r);let i=t.substring(t.indexOf("."));i!=""&&(t=i);let s=new Map;return s.set("raw.githubusercontent","github"),s.set(".githubusercontent","github"),s.set("youtu","youtube"),s.set(".publichome","publichome"),s.has(t)?s.get(t):t}static getHostText(e){switch(e){case"youtube":return"YouTube";case"github":return"Github";case"linkedin":return"Linkedin";default:break}return e}static getFontAwesomeIconByKey(e){let t=this.closestHost(e),r=t;switch(t){case"subscribe":return"bell";case"payment":return"credit-card";case"self":return"handshake";default:break}return r}computeGitSha(e){return y(this,null,function*(){let r=`blob ${new Blob([e]).size}\0${e}`,i=yield crypto.subtle.digest("SHA-1",new TextEncoder().encode(r));return this.bufferToHex(i)})}bufferToHex(e){let t=new Uint8Array(e);return Array.from(t).map(r=>r.toString(16).padStart(2,"0")).join("")}static getIconForKeyWithColor(e){let t="link",r=J.contactHostNameByKeys.get(e);r&&(t=this.getFontAwesomeIconByKey(r.toLocaleLowerCase()));let i=J.iconsColorByBrandKey.get(t.toLowerCase());return[t,i]}static getGhUserFilePath(e,t,r=!1){let i=`${ae.gh_dr_url}/${e}/${ae.gh_dr_folder}/${t}`;return ae.js_deliver.enabled&&(i=`${ae.js_deliver.url}/${e}/${ae.js_deliver.version}/${t}`),r?`${ae.gh_api_url}/repos/${e}/${ae.gh_private_dr_folder}/contents/${t}`:i}static getActionByService(e){let t=new Map;t.set("self","notificationhook"),t.set("payment","pagehook");let r=t.get(e);return r||"notificationhook"}};var sr=class{constructor(e){if(this.githubService=e,this.router=G(wn),this.route=G(Ln),this.messaging=G(cn),this.routerFileUrl="",this.hasPrivateAccess=!1,this.githubUser=ae.gh_default_user_repo,this.basePath="",this.articleFolderName="",this.isHomePageGHUser=!1,this.basePath=Me.getBasePath(this.route),this.basePath=="i"||J.INTERNAL_FOLDERS.includes(this.basePath)){let t=Me.getRouteParam(this.route,"folder");t||(t=this.basePath),this.articleFolderName=t}else console.debug("It is a user's public article !!");this.githubUser=Me.getRouteParam(this.route,"ghUser"),this.githubUser||(this.githubUser=ae.gh_default_user_repo,this.isHomePageGHUser=!0),this.routerFileUrl=Me.getRouterUrl(this.router,this.githubUser),this.githubUser&&this.githubService.getJwtToken(this.githubUser).then(t=>this.githubService.getAccessToken(t).then(r=>{this.hasPrivateAccess=r!=null})).finally(()=>{this.userInitialised(),this.initialiseUserContext(this.githubUser)})}initialiseUserContext(e){return y(this,null,function*(){this.githubService.get("users/"+e).then(t=>{J.ghUser=JSON.parse(t),J.userContext.username=e,this.githubService.getGhDirectoryContents(e).then(r=>{J.userContext.directory=r,this.messaging.send({cmd:"UserDirectory"})})}).finally(()=>{J.ghUserLoaded=e,this.messaging.send({cmd:"UserContext"})})})}getFolderName(){return this.articleFolderName}};function ln(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function Em(n,e,t,r){if(typeof t!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>Em.bind(null,n,s,i,r),t)():Promise.resolve().then(()=>n.registry[e]?n.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),t)():t(r))}function PP(n,e,t,r){let i=r;n.registry[t]||(n.registry[t]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(c=>(a=c,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),n.registry[t].push({hook:r,orig:i})}function OP(n,e,t){if(!n.registry[e])return;let r=n.registry[e].map(i=>i.orig).indexOf(t);r!==-1&&n.registry[e].splice(r,1)}var FP=Function.bind,LP=FP.bind(FP);function VP(n,e,t){let r=LP(OP,null).apply(null,t?[e,t]:[e]);n.api={remove:r},n.remove=r,["before","error","after","wrap"].forEach(i=>{let s=t?[e,i,t]:[e,i];n[i]=n.api[i]=LP(PP,null).apply(null,s)})}function L8(){let n=Symbol("Singular"),e={registry:{}},t=Em.bind(null,e,n);return VP(t,e,n),t}function V8(){let n={registry:{}},e=Em.bind(null,n);return VP(e,n),e}var jP={Singular:L8,Collection:V8};var j8="0.0.0-development",U8=`octokit-endpoint.js/${j8} ${ln()}`,$8={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":U8},mediaType:{format:""}};function B8(n){return n?Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=n[t],e),{}):{}}function q8(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function BP(n,e){let t=Object.assign({},n);return Object.keys(e).forEach(r=>{q8(e[r])?r in n?t[r]=BP(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function UP(n){for(let e in n)n[e]===void 0&&delete n[e];return n}function ME(n,e,t){if(typeof e=="string"){let[i,s]=e.split(" ");t=Object.assign(s?{method:i,url:s}:{url:i},t)}else t=Object.assign({},e);t.headers=B8(t.headers),UP(t),UP(t.headers);let r=BP(n||{},t);return t.url==="/graphql"&&(n&&n.mediaType.previews?.length&&(r.mediaType.previews=n.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function z8(n,e){let t=/\?/.test(n)?"&":"?",r=Object.keys(e);return r.length===0?n:n+t+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var H8=/\{[^}]+\}/g;function G8(n){return n.replace(/^\W+|\W+$/g,"").split(/,/)}function W8(n){let e=n.match(H8);return e?e.map(G8).reduce((t,r)=>t.concat(r),[]):[]}function $P(n,e){let t={__proto__:null};for(let r of Object.keys(n))e.indexOf(r)===-1&&(t[r]=n[r]);return t}function qP(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function qc(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Bd(n,e,t){return e=n==="+"||n==="#"?qP(e):qc(e),t?qc(t)+"="+e:e}function Bc(n){return n!=null}function RE(n){return n===";"||n==="&"||n==="?"}function K8(n,e,t,r){var i=n[t],s=[];if(Bc(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(Bd(e,i,RE(e)?t:""));else if(r==="*")Array.isArray(i)?i.filter(Bc).forEach(function(o){s.push(Bd(e,o,RE(e)?t:""))}):Object.keys(i).forEach(function(o){Bc(i[o])&&s.push(Bd(e,i[o],o))});else{let o=[];Array.isArray(i)?i.filter(Bc).forEach(function(a){o.push(Bd(e,a))}):Object.keys(i).forEach(function(a){Bc(i[a])&&(o.push(qc(a)),o.push(Bd(e,i[a].toString())))}),RE(e)?s.push(qc(t)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?Bc(i)&&s.push(qc(t)):i===""&&(e==="&"||e==="?")?s.push(qc(t)+"="):i===""&&s.push("");return s}function Q8(n){return{expand:Y8.bind(null,n)}}function Y8(n,e){var t=["+","#",".","/",";","?","&"];return n=n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="",c=[];if(t.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(l){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(l);c.push(K8(e,a,d[1],d[2]||d[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(c.length!==0?a:"")+c.join(o)}else return c.join(",")}else return qP(s)}),n==="/"?n:n.replace(/\/$/,"")}function zP(n){let e=n.method.toUpperCase(),t=(n.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},n.headers),i,s=$P(n,["method","baseUrl","url","headers","request","mediaType"]),o=W8(t);t=Q8(t).expand(s),/^http/.test(t)||(t=n.baseUrl+t);let a=Object.keys(n).filter(d=>o.includes(d)).concat("baseUrl"),c=$P(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(n.mediaType.format&&(r.accept=r.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${n.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&n.mediaType.previews?.length)){let d=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=d.concat(n.mediaType.previews).map(h=>{let p=n.mediaType.format?`.${n.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${p}`}).join(",")}return["GET","HEAD"].includes(e)?t=z8(t,c):"data"in c?i=c.data:Object.keys(c).length&&(i=c),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:t,headers:r},typeof i<"u"?{body:i}:null,n.request?{request:n.request}:null)}function Z8(n,e,t){return zP(ME(n,e,t))}function HP(n,e){let t=ME(n,e),r=Z8.bind(null,t);return Object.assign(r,{DEFAULTS:t,defaults:HP.bind(null,t),merge:ME.bind(null,t),parse:zP})}var GP=HP(null,$8);var Ni=class extends Error{name;status;request;response;constructor(e,t,r){super(e),this.name="HttpError",this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);let i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}};var J8="0.0.0-development",X8={headers:{"user-agent":`octokit-request.js/${J8} ${ln()}`}};function e9(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function WP(n){return y(this,null,function*(){let e=n.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let t=n.request?.log||console,r=n.request?.parseSuccessResponseBody!==!1,i=e9(n.body)||Array.isArray(n.body)?JSON.stringify(n.body):n.body,s=Object.fromEntries(Object.entries(n.headers).map(([h,p])=>[h,String(p)])),o;try{o=yield e(n.url,P({method:n.method,body:i,redirect:n.request?.redirect,headers:s,signal:n.request?.signal},n.body&&{duplex:"half"}))}catch(h){let p="Unknown Error";if(h instanceof Error){if(h.name==="AbortError")throw h.status=500,h;p=h.message,h.name==="TypeError"&&"cause"in h&&(h.cause instanceof Error?p=h.cause.message:typeof h.cause=="string"&&(p=h.cause))}let m=new Ni(p,500,{request:n});throw m.cause=h,m}let a=o.status,c=o.url,l={};for(let[h,p]of o.headers)l[h]=p;let d={url:c,status:a,headers:l,data:""};if("deprecation"in l){let h=l.link&&l.link.match(/<([^>]+)>; rel="deprecation"/),p=h&&h.pop();t.warn(`[@octokit/request] "${n.method} ${n.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${p?`. See ${p}`:""}`)}if(a===204||a===205)return d;if(n.method==="HEAD"){if(a<400)return d;throw new Ni(o.statusText,a,{response:d,request:n})}if(a===304)throw d.data=yield NE(o),new Ni("Not modified",a,{response:d,request:n});if(a>=400)throw d.data=yield NE(o),new Ni(t9(d.data),a,{response:d,request:n});return d.data=r?yield NE(o):o.body,d})}function NE(n){return y(this,null,function*(){let e=n.headers.get("content-type");return/application\/json/.test(e)?n.json().catch(()=>n.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?n.text():n.arrayBuffer()})}function t9(n){if(typeof n=="string")return n;if(n instanceof ArrayBuffer)return"Unknown error";if("message"in n){let e="documentation_url"in n?` - ${n.documentation_url}`:"";return Array.isArray(n.errors)?`${n.message}: ${n.errors.map(t=>JSON.stringify(t)).join(", ")}${e}`:`${n.message}${e}`}return`Unknown error: ${JSON.stringify(n)}`}function PE(n,e){let t=n.defaults(e);return Object.assign(function(i,s){let o=t.merge(i,s);if(!o.request||!o.request.hook)return WP(t.parse(o));let a=(c,l)=>WP(t.parse(t.merge(c,l)));return Object.assign(a,{endpoint:t,defaults:PE.bind(null,t)}),o.request.hook(a,o)},{endpoint:t,defaults:PE.bind(null,t)})}var Ge=PE(GP,X8);var n9="0.0.0-development";function r9(n){return`Request failed due to following response errors:
`+n.errors.map(e=>` - ${e.message}`).join(`
`)}var i9=class extends Error{constructor(n,e,t){super(r9(t)),this.request=n,this.headers=e,this.response=t,this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},s9=["method","baseUrl","url","headers","request","query","mediaType"],o9=["query","method","url"],KP=/\/api\/v3\/?$/;function a9(n,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in t)if(o9.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let r=typeof e=="string"?Object.assign({query:e},t):e,i=Object.keys(r).reduce((o,a)=>s9.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||n.endpoint.DEFAULTS.baseUrl;return KP.test(s)&&(i.url=s.replace(KP,"/api/graphql")),n(i).then(o=>{if(o.data.errors){let a={};for(let c of Object.keys(o.headers))a[c]=o.headers[c];throw new i9(i,a,o.data)}return o.data.data})}function OE(n,e){let t=n.defaults(e);return Object.assign((i,s)=>a9(t,i,s),{defaults:OE.bind(null,t),endpoint:t.endpoint})}var Bce=OE(Ge,{headers:{"user-agent":`octokit-graphql.js/${n9} ${ln()}`},method:"POST",url:"/graphql"});function QP(n){return OE(n,{method:"POST",url:"/graphql"})}var c9=/^v1\./,l9=/^ghs_/,u9=/^ghu_/;function d9(n){return y(this,null,function*(){let e=n.split(/\./).length===3,t=c9.test(n)||l9.test(n),r=u9.test(n);return{type:"token",token:n,tokenType:e?"app":t?"installation":r?"user-to-server":"oauth"}})}function h9(n){return n.split(/\./).length===3?`bearer ${n}`:`token ${n}`}function f9(n,e,t,r){return y(this,null,function*(){let i=e.endpoint.merge(t,r);return i.headers.authorization=h9(n),e(i)})}var YP=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(d9.bind(null,e),{hook:f9.bind(null,e)})};var FE="6.1.2";var ZP=()=>{},p9=console.warn.bind(console),g9=console.error.bind(console),JP=`octokit-core.js/${FE} ${ln()}`,LE=(()=>{class n{static VERSION=FE;static defaults(t){return class extends this{constructor(...i){let s=i[0]||{};if(typeof t=="function"){super(t(s));return}super(Object.assign({},t,s,s.userAgent&&t.userAgent?{userAgent:`${s.userAgent} ${t.userAgent}`}:null))}}}static plugins=[];static plugin(...t){let r=this.plugins;return class extends this{static plugins=r.concat(t.filter(s=>!r.includes(s)))}}constructor(t={}){let r=new jP.Collection,i={baseUrl:Ge.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(i.headers["user-agent"]=t.userAgent?`${t.userAgent} ${JP}`:JP,t.baseUrl&&(i.baseUrl=t.baseUrl),t.previews&&(i.mediaType.previews=t.previews),t.timeZone&&(i.headers["time-zone"]=t.timeZone),this.request=Ge.defaults(i),this.graphql=QP(this.request).defaults(i),this.log=Object.assign({debug:ZP,info:ZP,warn:p9,error:g9},t.log),this.hook=r,t.authStrategy){let o=t,{authStrategy:a}=o,c=Cn(o,["authStrategy"]),l=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:c},t.auth));r.wrap("request",l.hook),this.auth=l}else if(!t.auth)this.auth=()=>y(this,null,function*(){return{type:"unauthenticated"}});else{let a=YP(t.auth);r.wrap("request",a.hook),this.auth=a}let s=this.constructor;for(let a=0;a<s.plugins.length;++a)Object.assign(this,s.plugins[a](this,t))}request;graphql;log;hook;auth}return n})();function m9(n){let e=n.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(e.baseUrl)?"https://github.com":e.baseUrl.replace("/api/v3","")}function Im(n,e,t){return y(this,null,function*(){let r=P({baseUrl:m9(n),headers:{accept:"application/json"}},t),i=yield n(e,r);if("error"in i.data){let s=new Ni(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:n.endpoint.merge(e,r)});throw s.response=i,s}return i})}function nO(n){return y(this,null,function*(){let e=n.request||Ge,t=yield Im(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,code:n.code,redirect_uri:n.redirectUrl}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=XP(i,t.data.expires_in),r.refreshTokenExpiresAt=XP(i,t.data.refresh_token_expires_in)}delete r.scopes}return ne(P({},t),{authentication:r})})}function XP(n,e){return new Date(n+e*1e3).toISOString()}function rO(n){return y(this,null,function*(){let e=n.request||Ge,t={client_id:n.clientId};return"scopes"in n&&Array.isArray(n.scopes)&&(t.scope=n.scopes.join(" ")),Im(e,"POST /login/device/code",t)})}function VE(n){return y(this,null,function*(){let e=n.request||Ge,t=yield Im(e,"POST /login/oauth/access_token",{client_id:n.clientId,device_code:n.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),r={clientType:n.clientType,clientId:n.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in n&&(r.clientSecret=n.clientSecret),n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=eO(i,t.data.expires_in),r.refreshTokenExpiresAt=eO(i,t.data.refresh_token_expires_in)}delete r.scopes}return ne(P({},t),{authentication:r})})}function eO(n,e){return new Date(n+e*1e3).toISOString()}function iO(n){return y(this,null,function*(){let t=yield(n.request||Ge)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`},client_id:n.clientId,access_token:n.token}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.token,scopes:t.data.scopes};return t.data.expires_at&&(r.expiresAt=t.data.expires_at),n.clientType==="github-app"&&delete r.scopes,ne(P({},t),{authentication:r})})}function sO(n){return y(this,null,function*(){let e=n.request||Ge,t=yield Im(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,grant_type:"refresh_token",refresh_token:n.refreshToken}),r=new Date(t.headers.date).getTime(),i={clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:tO(r,t.data.expires_in),refreshTokenExpiresAt:tO(r,t.data.refresh_token_expires_in)};return ne(P({},t),{authentication:i})})}function tO(n,e){return new Date(n+e*1e3).toISOString()}function oO(n){return y(this,null,function*(){let e=n.request||Ge,t=btoa(`${n.clientId}:${n.clientSecret}`),r=yield e("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token}),i={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:r.data.token,scopes:r.data.scopes};return r.data.expires_at&&(i.expiresAt=r.data.expires_at),n.clientType==="github-app"&&delete i.scopes,ne(P({},r),{authentication:i})})}function aO(n){return y(this,null,function*(){let e=n.request||Ge,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function cO(n){return y(this,null,function*(){let e=n.request||Ge,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function uO(n,e){return y(this,null,function*(){let t=y9(n,e.auth);if(t)return t;let{data:r}=yield rO({clientType:n.clientType,clientId:n.clientId,request:e.request||n.request,scopes:e.auth.scopes||n.scopes});yield n.onVerification(r);let i=yield jE(e.request||n.request,n.clientId,n.clientType,r);return n.authentication=i,i})}function y9(n,e){if(e.refresh===!0||!n.authentication)return!1;if(n.clientType==="github-app")return n.authentication;let t=n.authentication,r=("scopes"in e&&e.scopes||n.scopes).join(" "),i=t.scopes.join(" ");return r===i?t:!1}function lO(n){return y(this,null,function*(){yield new Promise(e=>setTimeout(e,n*1e3))})}function jE(n,e,t,r){return y(this,null,function*(){try{let i={clientId:e,request:n,code:r.device_code},{authentication:s}=t==="oauth-app"?yield VE(ne(P({},i),{clientType:"oauth-app"})):yield VE(ne(P({},i),{clientType:"github-app"}));return P({type:"token",tokenType:"oauth"},s)}catch(i){if(!i.response)throw i;let s=i.response.data.error;if(s==="authorization_pending")return yield lO(r.interval),jE(n,e,t,r);if(s==="slow_down")return yield lO(r.interval+5),jE(n,e,t,r);throw i}})}function v9(n,e){return y(this,null,function*(){return uO(n,{auth:e})})}function _9(n,e,t,r){return y(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);let{token:s}=yield uO(n,{request:e,auth:{type:"oauth"}});return i.headers.authorization=`token ${s}`,e(i)})}var w9="0.0.0-development";function dO(n){let e=n.request||Ge.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${w9} ${ln()}`}}),s=n,{request:t=e}=s,r=Cn(s,["request"]),i=n.clientType==="github-app"?ne(P({},r),{clientType:"github-app",request:t}):ne(P({},r),{clientType:"oauth-app",request:t,scopes:n.scopes||[]});if(!n.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!n.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(v9.bind(null,i),{hook:_9.bind(null,i)})}var fO="0.0.0-development";function hO(n){return y(this,null,function*(){if("code"in n.strategyOptions){let{authentication:e}=yield nO(ne(P({clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}));return P({type:"token",tokenType:"oauth"},e)}if("onVerification"in n.strategyOptions){let t=yield dO(ne(P({clientType:n.clientType,clientId:n.clientId,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}))({type:"oauth"});return P({clientSecret:n.clientSecret},t)}if("token"in n.strategyOptions)return P({type:"token",tokenType:"oauth",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions);throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")})}function UE(t){return y(this,arguments,function*(n,e={}){if(n.authentication||(n.authentication=n.clientType==="oauth-app"?yield hO(n):yield hO(n)),n.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");let r=n.authentication;if("expiresAt"in r&&(e.type==="refresh"||new Date(r.expiresAt)<new Date)){let{authentication:i}=yield sO({clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,refreshToken:r.refreshToken,request:n.request});n.authentication=P({tokenType:"oauth",type:"token"},i)}if(e.type==="refresh"){if(n.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!r.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");yield n.onTokenCreated?.(n.authentication,{type:e.type})}if(e.type==="check"||e.type==="reset"){let i=e.type==="check"?iO:oO;try{let{authentication:s}=yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request});return n.authentication=P({tokenType:"oauth",type:"token"},s),e.type==="reset"&&(yield n.onTokenCreated?.(n.authentication,{type:e.type})),n.authentication}catch(s){throw s.status===404&&(s.message="[@octokit/auth-oauth-user] Token is invalid",n.authentication.invalid=!0),s}}if(e.type==="delete"||e.type==="deleteAuthorization"){let i=e.type==="delete"?aO:cO;try{yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request})}catch(s){if(s.status!==404)throw s}return n.authentication.invalid=!0,n.authentication}return n.authentication})}var b9=/\/applications\/[^/]+\/(token|grant)s?/;function qd(n){return n&&b9.test(n)}function E9(i,s,o){return y(this,arguments,function*(n,e,t,r={}){let a=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(a.url))return e(a);if(qd(a.url)){let l=btoa(`${n.clientId}:${n.clientSecret}`);return a.headers.authorization=`basic ${l}`,e(a)}let{token:c}=n.clientType==="oauth-app"?yield UE(ne(P({},n),{request:e})):yield UE(ne(P({},n),{request:e}));return a.headers.authorization="token "+c,e(a)})}function Cm(o){var a=o,{clientId:n,clientSecret:e,clientType:t="oauth-app",request:r=Ge.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${fO} ${ln()}`}}),onTokenCreated:i}=a,s=Cn(a,["clientId","clientSecret","clientType","request","onTokenCreated"]);let c=Object.assign({clientType:t,clientId:n,clientSecret:e,onTokenCreated:i,strategyOptions:s,request:r});return Object.assign(UE.bind(null,c),{hook:E9.bind(null,c)})}Cm.VERSION=fO;function I9(n,e){return y(this,null,function*(){if(e.type==="oauth-app")return{type:"oauth-app",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`}};if("factory"in e){let i=P(P({},e),n),{type:s}=i,o=Cn(i,["type"]);return e.factory(o)}let t=P({clientId:n.clientId,clientSecret:n.clientSecret,request:n.request},e);return(n.clientType==="oauth-app"?yield Cm(ne(P({},t),{clientType:n.clientType})):yield Cm(ne(P({},t),{clientType:n.clientType})))()})}function C9(n,e,t,r){return y(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);if(n.clientType==="github-app"&&!qd(i.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let s=btoa(`${n.clientId}:${n.clientSecret}`);i.headers.authorization=`basic ${s}`;try{return yield e(i)}catch(o){throw o.status!==401||(o.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),o}})}var T9="0.0.0-development";function pO(n){let e=Object.assign({request:Ge.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${T9} ${ln()}`}}),clientType:"oauth-app"},n);return Object.assign(I9.bind(null,e),{hook:C9.bind(null,e)})}function mO(n){return n.includes("-----BEGIN RSA PRIVATE KEY-----")}function yO(n){return n.includes("-----BEGIN OPENSSH PRIVATE KEY-----")}function $E(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function vO(n){let e=n.trim().split(`
`).slice(1,-1).join(""),t=atob(e);return $E(t)}function _O(n,e){return`${gO(n)}.${gO(e)}`}function wO(n){for(var e="",t=new Uint8Array(n),r=t.byteLength,i=0;i<r;i++)e+=String.fromCharCode(t[i]);return bO(btoa(e))}function bO(n){return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gO(n){return bO(btoa(JSON.stringify(n)))}var{subtle:BE}=globalThis.crypto;function EO(t){return y(this,arguments,function*({privateKey:n,payload:e}){let r=n;if(mO(r))throw new Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");if(yO(r))throw new Error("[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s={alg:"RS256",typ:"JWT"},o=vO(r),a=yield BE.importKey("pkcs8",o,i,!1,["sign"]),c=_O(s,e),l=$E(c),d=yield BE.sign(i.name,a,l),h=wO(d);return`${c}.${h}`})}function qE(r){return y(this,arguments,function*({id:n,privateKey:e,now:t=Math.floor(Date.now()/1e3)}){let i=e.replace(/\\n/g,`
`),s=t-30,o=s+60*10,c=yield EO({privateKey:i,payload:{iat:s,exp:o,iss:n}});return{appId:n,expiration:o,token:c}})}var zc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,CO=new Set,zE=typeof process=="object"&&process?process:{},TO=(n,e,t,r)=>{typeof zE.emitWarning=="function"?zE.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)},Tm=globalThis.AbortController,IO=globalThis.AbortSignal;if(typeof Tm>"u"){IO=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},Tm=class{constructor(){e()}signal=new IO;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let n=zE.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{n&&(n=!1,TO("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var D9=n=>!CO.has(n),Hle=Symbol("type"),Ss=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),DO=n=>Ss(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?Hc:null:null,Hc=class extends Array{constructor(e){super(e),this.fill(0)}},HE=class n{heap;length;static#s=!1;static create(e){let t=DO(e);if(!t)return[];n.#s=!0;let r=new n(e,t);return n.#s=!1,r}constructor(e,t){if(!n.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Dm=class n{#s;#l;#g;#m;#k;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#r;#n;#e;#u;#h;#c;#o;#v;#a;#_;#w;#f;#b;#D;#d;static unsafeExposeInternals(e){return{starts:e.#w,ttls:e.#f,sizes:e.#_,keyMap:e.#r,keyList:e.#n,valList:e.#e,next:e.#u,prev:e.#h,get head(){return e.#c},get tail(){return e.#o},free:e.#v,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,r,i,s)=>e.#P(t,r,i,s),moveToTail:t=>e.#x(t),indexes:t=>e.#E(t),rindexes:t=>e.#I(t),isStale:t=>e.#p(t)}}get max(){return this.#s}get maxSize(){return this.#l}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#k}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(e){let{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:d,noDisposeOnSet:h,noUpdateTTL:p,maxSize:m=0,maxEntrySize:_=0,sizeCalculation:b,fetchMethod:E,memoMethod:R,noDeleteOnFetchRejection:j,noDeleteOnStaleGet:U,allowStaleOnFetchRejection:B,allowStaleOnFetchAbort:K,ignoreFetchAbort:Q}=e;if(t!==0&&!Ss(t))throw new TypeError("max option must be a nonnegative integer");let T=t?DO(t):Array;if(!T)throw new Error("invalid max value: "+t);if(this.#s=t,this.#l=m,this.maxEntrySize=_||this.#l,this.sizeCalculation=b,this.sizeCalculation){if(!this.#l&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(R!==void 0&&typeof R!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=R,E!==void 0&&typeof E!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#k=E,this.#D=!!E,this.#r=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#u=new T(t),this.#h=new T(t),this.#c=0,this.#o=0,this.#v=HE.create(t),this.#i=0,this.#y=0,typeof l=="function"&&(this.#g=l),typeof d=="function"?(this.#m=d,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#b=!!this.#g,this.#d=!!this.#m,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!j,this.allowStaleOnFetchRejection=!!B,this.allowStaleOnFetchAbort=!!K,this.ignoreFetchAbort=!!Q,this.maxEntrySize!==0){if(this.#l!==0&&!Ss(this.#l))throw new TypeError("maxSize must be a positive integer if specified");if(!Ss(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#$()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!U,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Ss(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Ss(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#s===0&&this.ttl===0&&this.#l===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#l){let w="LRU_CACHE_UNBOUNDED";D9(w)&&(CO.add(w),TO("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",w,n))}}getRemainingTTL(e){return this.#r.has(e)?1/0:0}#O(){let e=new Hc(this.#s),t=new Hc(this.#s);this.#f=e,this.#w=t,this.#F=(s,o,a=zc.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#p(s)&&this.#C(this.#n[s],"expire")},o+1);c.unref&&c.unref()}},this.#S=s=>{t[s]=e[s]!==0?zc.now():0},this.#T=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();let l=s.now-c;s.remainingTTL=a-l}};let r=0,i=()=>{let s=zc.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#r.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let l=(r||i())-c;return a-l},this.#p=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#S=()=>{};#T=()=>{};#F=()=>{};#p=()=>!1;#$(){let e=new Hc(this.#s);this.#y=0,this.#_=e,this.#A=t=>{this.#y-=e[t],e[t]=0},this.#L=(t,r,i,s)=>{if(this.#t(r))return 0;if(!Ss(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!Ss(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#M=(t,r,i)=>{if(e[t]=r,this.#l){let s=this.#l-e[t];for(;this.#y>s;)this.#N(!0)}this.#y+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#y)}}#A=e=>{};#M=(e,t,r)=>{};#L=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#E({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#V(t)||((e||!this.#p(t))&&(yield t),t===this.#c));)t=this.#h[t]}*#I({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#c;!(!this.#V(t)||((e||!this.#p(t))&&(yield t),t===this.#o));)t=this.#u[t]}#V(e){return e!==void 0&&this.#r.get(this.#n[e])===e}*entries(){for(let e of this.#E())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#I())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#E()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#I()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#E())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#I())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#E()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#n[r],this))return this.get(this.#n[r],t)}}forEach(e,t=this){for(let r of this.#E()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}rforEach(e,t=this){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}purgeStale(){let e=!1;for(let t of this.#I({allowStale:!0}))this.#p(t)&&(this.#C(this.#n[t],"expire"),e=!0);return e}info(e){let t=this.#r.get(e);if(t===void 0)return;let r=this.#e[t],i=this.#t(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#f&&this.#w){let o=this.#f[t],a=this.#w[t];if(o&&a){let c=o-(zc.now()-a);s.ttl=c,s.start=Date.now()}}return this.#_&&(s.size=this.#_[t]),s}dump(){let e=[];for(let t of this.#E({allowStale:!0})){let r=this.#n[t],i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#f&&this.#w){o.ttl=this.#f[t];let a=zc.now()-this.#w[t];o.start=Math.floor(Date.now()-a)}this.#_&&(o.size=this.#_[t]),e.unshift([r,o])}return e}load(e){this.clear();for(let[t,r]of e){if(r.start){let i=Date.now()-r.start;r.start=zc.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,d=this.#L(e,t,r.size||0,a);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#C(e,"set"),this;let h=this.#i===0?void 0:this.#r.get(e);if(h===void 0)h=this.#i===0?this.#o:this.#v.length!==0?this.#v.pop():this.#i===this.#s?this.#N(!1):this.#i,this.#n[h]=e,this.#e[h]=t,this.#r.set(e,h),this.#u[this.#o]=h,this.#h[h]=this.#o,this.#o=h,this.#i++,this.#M(h,d,c),c&&(c.set="add"),l=!1;else{this.#x(h);let p=this.#e[h];if(t!==p){if(this.#D&&this.#t(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=p;m!==void 0&&!o&&(this.#b&&this.#g?.(m,e,"set"),this.#d&&this.#a?.push([m,e,"set"]))}else o||(this.#b&&this.#g?.(p,e,"set"),this.#d&&this.#a?.push([p,e,"set"]));if(this.#A(h),this.#M(h,d,c),this.#e[h]=t,c){c.set="replace";let m=p&&this.#t(p)?p.__staleWhileFetching:p;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#f&&this.#O(),this.#f&&(l||this.#F(h,i,s),c&&this.#T(c,h)),!o&&this.#d&&this.#a){let p=this.#a,m;for(;m=p?.shift();)this.#m?.(...m)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#c];if(this.#N(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}}#N(e){let t=this.#c,r=this.#n[t],i=this.#e[t];return this.#D&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#b||this.#d)&&(this.#b&&this.#g?.(i,r,"evict"),this.#d&&this.#a?.push([i,r,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#v.push(t)),this.#i===1?(this.#c=this.#o=0,this.#v.length=0):this.#c=this.#u[t],this.#r.delete(r),this.#i--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#r.get(e);if(s!==void 0){let o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(s))i&&(i.has="stale",this.#T(i,s));else return r&&this.#S(s),i&&(i.has="hit",this.#T(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#r.get(e);if(i===void 0||!r&&this.#p(i))return;let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#P(e,t,r,i){let s=t===void 0?void 0:this.#e[t];if(this.#t(s))return s;let o=new Tm,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:r,context:i},l=(b,E=!1)=>{let{aborted:R}=o.signal,j=r.ignoreFetchAbort&&b!==void 0;if(r.status&&(R&&!E?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,j&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),R&&!j&&!E)return h(o.signal.reason);let U=m;return this.#e[t]===m&&(b===void 0?U.__staleWhileFetching?this.#e[t]=U.__staleWhileFetching:this.#C(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,b,c.options))),b},d=b=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=b),h(b)),h=b=>{let{aborted:E}=o.signal,R=E&&r.allowStaleOnFetchAbort,j=R||r.allowStaleOnFetchRejection,U=j||r.noDeleteOnFetchRejection,B=m;if(this.#e[t]===m&&(!U||B.__staleWhileFetching===void 0?this.#C(e,"fetch"):R||(this.#e[t]=B.__staleWhileFetching)),j)return r.status&&B.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),B.__staleWhileFetching;if(B.__returned===B)throw b},p=(b,E)=>{let R=this.#k?.(e,s,c);R&&R instanceof Promise&&R.then(j=>b(j===void 0?void 0:j),E),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(b(void 0),r.allowStaleOnFetchAbort&&(b=j=>l(j,!0)))})};r.status&&(r.status.fetchDispatched=!0);let m=new Promise(p).then(l,d),_=Object.assign(m,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,_,ne(P({},c.options),{status:void 0})),t=this.#r.get(e)):this.#e[t]=_,_}#t(e){if(!this.#D)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Tm}fetch(r){return y(this,arguments,function*(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:l=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:h=this.noUpdateTTL,noDeleteOnFetchRejection:p=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:_=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:E,forceRefresh:R=!1,status:j,signal:U}=t;if(!this.#D)return j&&(j.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:j});let B={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:c,size:l,sizeCalculation:d,noUpdateTTL:h,noDeleteOnFetchRejection:p,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:b,ignoreFetchAbort:_,status:j,signal:U},K=this.#r.get(e);if(K===void 0){j&&(j.fetch="miss");let Q=this.#P(e,K,B,E);return Q.__returned=Q}else{let Q=this.#e[K];if(this.#t(Q)){let x=i&&Q.__staleWhileFetching!==void 0;return j&&(j.fetch="inflight",x&&(j.returnedStale=!0)),x?Q.__staleWhileFetching:Q.__returned=Q}let T=this.#p(K);if(!R&&!T)return j&&(j.fetch="hit"),this.#x(K),s&&this.#S(K),j&&this.#T(j,K),Q;let w=this.#P(e,K,B,E),S=w.__staleWhileFetching!==void 0&&i;return j&&(j.fetch=T?"stale":"refresh",S&&T&&(j.returnedStale=!0)),S?w.__staleWhileFetching:w.__returned=w}})}forceFetch(r){return y(this,arguments,function*(e,t={}){let i=yield this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i})}memo(e,t={}){let r=this.#R;if(!r)throw new Error("no memoMethod provided to constructor");let l=t,{context:i,forceRefresh:s}=l,o=Cn(l,["context","forceRefresh"]),a=this.get(e,o);if(!s&&a!==void 0)return a;let c=r(e,a,{options:o,context:i});return this.set(e,c,o),c}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#r.get(e);if(a!==void 0){let c=this.#e[a],l=this.#t(c);return o&&this.#T(o,a),this.#p(a)?(o&&(o.get="stale"),l?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.#C(e,"expire"),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#x(a),i&&this.#S(a),c))}else o&&(o.get="miss")}#j(e,t){this.#h[t]=e,this.#u[e]=t}#x(e){e!==this.#o&&(e===this.#c?this.#c=this.#u[e]:this.#j(this.#h[e],this.#u[e]),this.#j(this.#o,e),this.#o=e)}delete(e){return this.#C(e,"delete")}#C(e,t){let r=!1;if(this.#i!==0){let i=this.#r.get(e);if(i!==void 0)if(r=!0,this.#i===1)this.#U(t);else{this.#A(i);let s=this.#e[i];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#b||this.#d)&&(this.#b&&this.#g?.(s,e,t),this.#d&&this.#a?.push([s,e,t])),this.#r.delete(e),this.#n[i]=void 0,this.#e[i]=void 0,i===this.#o)this.#o=this.#h[i];else if(i===this.#c)this.#c=this.#u[i];else{let o=this.#h[i];this.#u[o]=this.#u[i];let a=this.#u[i];this.#h[a]=this.#h[i]}this.#i--,this.#v.push(i)}}if(this.#d&&this.#a?.length){let i=this.#a,s;for(;s=i?.shift();)this.#m?.(...s)}return r}clear(){return this.#U("delete")}#U(e){for(let t of this.#I({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#n[t];this.#b&&this.#g?.(r,i,e),this.#d&&this.#a?.push([r,i,e])}}if(this.#r.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#f&&this.#w&&(this.#f.fill(0),this.#w.fill(0)),this.#_&&this.#_.fill(0),this.#c=0,this.#o=0,this.#v.length=0,this.#y=0,this.#i=0,this.#d&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#m?.(...r)}}};function Sm(r){return y(this,arguments,function*({appId:n,privateKey:e,timeDifference:t}){try{let i=yield qE({id:n,privateKey:e,now:t&&Math.floor(Date.now()/1e3)+t});return{type:"app",token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(i){throw e==="-----BEGIN RSA PRIVATE KEY-----"?new Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):i}})}function S9(){return new Dm({max:15e3,ttl:1e3*60*59})}function A9(n,e){return y(this,null,function*(){let t=AO(e),r=yield n.get(t);if(!r)return;let[i,s,o,a,c,l]=r.split("|"),d=e.permissions||c.split(/,/).reduce((h,p)=>(/!$/.test(p)?h[p.slice(0,-1)]="write":h[p]="read",h),{});return{token:i,createdAt:s,expiresAt:o,permissions:d,repositoryIds:e.repositoryIds,repositoryNames:e.repositoryNames,singleFileName:l,repositorySelection:a}})}function x9(n,e,t){return y(this,null,function*(){let r=AO(e),i=e.permissions?"":Object.keys(t.permissions).map(o=>`${o}${t.permissions[o]==="write"?"!":""}`).join(","),s=[t.token,t.createdAt,t.expiresAt,t.repositorySelection,i,t.singleFileName].join("|");yield n.set(r,s)})}function AO({installationId:n,permissions:e={},repositoryIds:t=[],repositoryNames:r=[]}){let i=Object.keys(e).sort().map(a=>e[a]==="read"?a:`${a}!`).join(","),s=t.sort().join(","),o=r.join(",");return[n,s,o,i].filter(Boolean).join("|")}function SO({installationId:n,token:e,createdAt:t,expiresAt:r,repositorySelection:i,permissions:s,repositoryIds:o,repositoryNames:a,singleFileName:c}){return Object.assign({type:"token",tokenType:"installation",token:e,installationId:n,permissions:s,createdAt:t,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,a?{repositoryNames:a}:null,c?{singleFileName:c}:null)}function xO(n,e,t){return y(this,null,function*(){let r=Number(e.installationId||n.installationId);if(!r)throw new Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(e.factory){let j=P(P({},n),e),{type:U,factory:B,oauthApp:K}=j,Q=Cn(j,["type","factory","oauthApp"]);return B(Q)}let i=Object.assign({installationId:r},e);if(!e.refresh){let U=yield A9(n.cache,i);if(U){let{token:B,createdAt:K,expiresAt:Q,permissions:T,repositoryIds:w,repositoryNames:I,singleFileName:S,repositorySelection:x}=U;return SO({installationId:r,token:B,createdAt:K,expiresAt:Q,permissions:T,repositorySelection:x,repositoryIds:w,repositoryNames:I,singleFileName:S})}}let s=yield Sm(n),o=t||n.request,{data:{token:a,expires_at:c,repositories:l,permissions:d,repository_selection:h,single_file:p}}=yield o("POST /app/installations/{installation_id}/access_tokens",{installation_id:r,repository_ids:e.repositoryIds,repositories:e.repositoryNames,permissions:e.permissions,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${s.token}`}}),m=d||{},_=h||"all",b=l?l.map(U=>U.id):void 0,E=l?l.map(U=>U.name):void 0,R=new Date().toISOString();return yield x9(n.cache,i,{token:a,createdAt:R,expiresAt:c,repositorySelection:_,permissions:m,repositoryIds:b,repositoryNames:E,singleFileName:p}),SO({installationId:r,token:a,createdAt:R,expiresAt:c,repositorySelection:_,permissions:m,repositoryIds:b,repositoryNames:E,singleFileName:p})})}function k9(n,e){return y(this,null,function*(){switch(e.type){case"app":return Sm(n);case"oauth-app":return n.oauthApp({type:"oauth-app"});case"installation":return xO(n,ne(P({},e),{type:"installation"}));case"oauth-user":return n.oauthApp(e);default:throw new Error(`Invalid auth type: ${e.type}`)}})}var R9=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/app/installation-requests","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"];function M9(n){let t=`^(?:${n.map(r=>r.split("/").map(i=>i.startsWith("{")?"(?:.+?)":i).join("/")).map(r=>`(?:${r})`).join("|")})$`;return new RegExp(t,"i")}var N9=M9(R9);function P9(n){return!!n&&N9.test(n.split("?")[0])}var O9=5*1e3;function F9(n){return!(n.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||n.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}function L9(n,e,t,r){return y(this,null,function*(){let i=e.endpoint.merge(t,r),s=i.url;if(/\/login\/oauth\/access_token$/.test(s))return e(i);if(P9(s.replace(e.endpoint.DEFAULTS.baseUrl,""))){let{token:c}=yield Sm(n);i.headers.authorization=`bearer ${c}`;let l;try{l=yield e(i)}catch(d){if(F9(d)||typeof d.response.headers.date>"u")throw d;let h=Math.floor((Date.parse(d.response.headers.date)-Date.parse(new Date().toString()))/1e3);n.log.warn(d.message),n.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${h} seconds. Retrying request with the difference accounted for.`);let{token:p}=yield Sm(ne(P({},n),{timeDifference:h}));return i.headers.authorization=`bearer ${p}`,e(i)}return l}if(qd(s)){let c=yield n.oauthApp({type:"oauth-app"});return i.headers.authorization=c.headers.authorization,e(i)}let{token:o,createdAt:a}=yield xO(n,{},e.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,kO(n,e,i,a)})}function kO(n,e,t,r,i=0){return y(this,null,function*(){let s=+new Date-+new Date(r);try{return yield e(t)}catch(o){if(o.status!==401)throw o;if(s>=O9)throw i>0&&(o.message=`After ${i} retries within ${s/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let a=i*1e3;return n.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${a/1e3}s)`),yield new Promise(c=>setTimeout(c,a)),kO(n,e,t,r,i)}})}var V9="7.1.1";function GE(n){if(!n.appId)throw new Error("[@octokit/auth-app] appId option is required");if(!n.privateKey)throw new Error("[@octokit/auth-app] privateKey option is required");if("installationId"in n&&!n.installationId)throw new Error("[@octokit/auth-app] installationId is set to a falsy value");let e=Object.assign({warn:console.warn.bind(console)},n.log),t=n.request||Ge.defaults({headers:{"user-agent":`octokit-auth-app.js/${V9} ${ln()}`}}),r=Object.assign({request:t,cache:S9()},n,n.installationId?{installationId:Number(n.installationId)}:{},{log:e,oauthApp:pO({clientType:"github-app",clientId:n.clientId||"",clientSecret:n.clientSecret||"",request:t})});return Object.assign(k9.bind(null,r),{hook:L9.bind(null,r)})}var Rt=(()=>{let e=class e{constructor(r){this._http=r,this.applicationId="1012063",this.privateKey=`-----BEGIN PRIVATE KEY-----
  MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCnxYEcKaEsyRx7
  8VicDgz+XwMOECEVLtMWwmfn0bdilPKLVTJRZF12Hz0BAckilc3nW7tTAikDpXyw
  efTnmt9DQhI6mAlpfIx8l7yNoucj1xxOzclZy6noOke9CSjhu8UhcrRd6XoYGvQH
  vKjttln1tv0EgyIREnAbHNPhK8b1SpHE/MzaJs9yCNU4lidwmHEl/hw+lzrUp+O2
  7Gi38WLJEaycChXtq94b6z5866cqgi0pPz+FTQNHlRg2rei2XGfb7pHxzQPkouS1
  Cg+3NZ15cPv9jsAk15HRMr/1fV8xk4JZ+V403zlCAl6gKaogfeZbC+3OTPNKvw4o
  HVHlcSYPAgMBAAECggEAGjDcCgB5t9shhjvUIHCVGLTObkiYUY1AyOHKhMcZgNtN
  zfCb7VbkvEb+KAUWWD7YqRCJ+thwfLA9+fLgB7QGvKI45ErN1VjrOZwahGX0/YRc
  V/UKROlleep3PoyKhEri6GjWvX5wYAj9JaQPHyUDgDdz4ltyWwXs2F60uQczhSFB
  NIeF55lyN3/cqBUHNQalrlD64LXwZLzviS8dpTIH1Qsp+S7TJgGM9NgeQ8yYiyzz
  tduux+gu6IxgL1aOgBiBonRFZdfAySws1mUhYvPWr1fzn64kaYsiDqXwCdmKmzxx
  +RbXGWvKX/wctN6454E1UlTPWVVOx4SHZ4Yf03ulWQKBgQDb4ZQqHb0chwFvHTIW
  pIc5DMmepQ2+/syxXumjrNMpi3sltmnGNu/n7DebuiyZOaFlHrDKLcC4WO/ILPe6
  O1A/LjgliTsHiQYmaB/XRj5iy6pGYra0esxFuhWZeYTJ00yBwpWGpAh91TvpxGcR
  PweOToPvq+nZi6tgVbMRu5gUkwKBgQDDVJ1yPYSAhnBDGkXU8XQp1jrKkzxwO7Zo
  UDAJ69LbTmC6rw7s4ZRT6KmS/7p3g7HXz1HQaEN7u1fzie5I8AZvhE21y42w9+z2
  r41rW+Q/IM+3102L6Okm9o91aLCIozyWgoBWXuXM67/oj4HlXgTZOVeiGZAcwN7o
  2PUjkrpyFQKBgEts4RdlZiawBQTpnfH4dE5UnaDm+4UmAG9joH+93B2nNBImtbgB
  xl/nPtgTkBLrmvqGAZ0I/s/96hrfmgbvK8LQhwARSAd4sHxiQXHmLaZUOM+2MvhM
  G2BbyecAsVVOPzNP3Vz3TdZkXA3/il93II9nTYjcjvZKG/qKy0ds82kzAoGBAIAo
  KTFGKYSGMGvmdgDT9upoM6Sr29CrbO+eBRbNUkgvcYmqx/klvEMdeP0Iqlg14N5+
  mOhLMFOjRH52dhAG48IRJUds6Wc+E4x6/Cd/YA8HQSIWsjtksmytAsz+xiywJVV/
  BCMnGlFMMFqupYRPHpFDbTre2M30wYw2pQgVAh1NAoGBANDbSx25LnRwUlgsA1Go
  c6YXlZ+ggQfjYfCjMjj26I/nLzxCQe3Ghw/dSI0IVQ6kjFWkNVllEaA7ESxMKAtq
  W+9Tc4e7MN5sqQoTIos0um2l+7BJaft/14WB1GxQiK2grgff8BtiQQuUORBl/F4g
  D2tNDflWM97viVfizU9grXkW
  -----END PRIVATE KEY-----`,this.installationId="Iv23li7aCJeV1yPt8rcr",this.accessToken=null,this.fetchOptions={},this.httpHeaders=new Nn({Accept:"application/json"}),this.ghUser={authenticated:!1,name:"",login:"",avatar_url:"/assets/github-logo.png",email:""},this.token={access_token:"",scope:"",token_type:""},this.octokit=new LE({authStrategy:GE,auth:{appId:this.applicationId,privateKey:this.privateKey}})}getInstallationId(r){return y(this,null,function*(){this.installationId="";try{let i=yield this.octokit.request("GET /repos/{owner}/my/installation",{owner:r,repo:"my"});return i.status==200?(this.installationId=i.data.id,this.octokit=new LE({authStrategy:GE,auth:{appId:this.applicationId,privateKey:this.privateKey,installationId:this.installationId}}),this.installationId):null}catch(i){console.debug("Error fetching InstallationId :",i)}return null})}getJwtToken(r,i=""){return y(this,null,function*(){let s=null;if(r)try{yield this.getInstallationId(r)}catch(o){console.debug("Error fetching InstallationId :",o)}if(this.installationId)try{let o=yield this.octokit.auth({type:"app"});o.token&&(this.fetchOptions={headers:{Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${o.token}`,"X-GitHub-Api-Version":"2022-11-28"}},s=o.token)}catch(o){throw console.error("Error fetching JWT:",o),o}return s})}getAccessToken(r){return y(this,null,function*(){if(this.accessToken=null,this.installationId)try{let i=yield fetch(`https://api.github.com/app/installations/${this.installationId}/access_tokens`,ne(P({},this.fetchOptions),{method:"POST"}));if(i.ok){let s=yield i.json();this.fetchOptions={headers:{"X-GitHub-Api-Version":"2022-11-28",Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${s.token}`}},this.accessToken=s.token}return this.accessToken}catch(i){throw console.error("Error fetching AccessToken:",i),i}return this.accessToken})}getInstalledContent(r,i="README.md"){return y(this,null,function*(){let s="Resource not Found";try{s=yield this.get(`repos/${r}/my/contents/${i}`)}catch(o){console.error("Error fetching repository:",o)}return s})}setToken(r){this.token=r}hasOrganisationMembership(r,i){return fetch("https://api.github.com/user/orgs",{headers:{Authorization:`Bearer ${i}`,Accept:"application/vnd.github.v3+json"}}).then(s=>s.json()).then(s=>!!s.some(a=>a.login===r)).catch(s=>(console.error("Error fetching user organizations:",s),!1))}getSavedToken(){return this.ghUser.authenticated?this.token.access_token:""}getSavedUser(){return this.ghUser}isAuthenticated(){return this.ghUser.authenticated}setUserAuthenticated(r){this.ghUser.authenticated=r}setEmail(r){this.ghUser.email=r}getEmail(){return this.ghUser.email}setName(r){this.ghUser.name=r}setUserId(r){this.ghUser.login=r}getUserId(){return this.ghUser.login}setAvatar(r){return this.ghUser.avatar_url=r}creatHttpHeaders(r){return this.httpHeaders.append("Authorization","Bearer "+r)}getAuthUrl(){return`${ae.gh_auth_url}?client_id=${ae.client_id}`}getInstalledAccessToken(){return this.accessToken}hasInstalledAccessToken(){return this.accessToken!=null}getToken(r){return ae.production?this._http.get(`${ae.host}/ghproxy.php?code=${r}`):this._http.get(`${ae.host}/token/ghproxy.php?code=${r}`)}getUser(r){return this._http.get(`${ae.gh_api_url}/user`,{headers:this.creatHttpHeaders(r)})}getInternalArticleContent(r,i=""){return r=i?`${i}/${r}`:r,this.getMdFileContent(ae.gh_default_user_repo,r)}getReadMeContent(r){let i=`${ae.gh_dr_url}/${r}/${ae.gh_dr_folder}/README.md`;return ae.js_deliver.enabled&&(i=`${ae.js_deliver.url}/${r}/${ae.js_deliver.version}/README.md`),fetch(i,this.fetchOptions).then(s=>s.ok?s.text():Promise.reject("Resource not found"))}getFileContent(r,i,s){return s=i?`${i}/${s}`:s,this.getMdFileContent(r,s)}getMdFileContent(r,i){i=i.replace(/^\/?/,"")+(i.endsWith(".md")?"":".md");let s=Me.getGhUserFilePath(r,i,this.accessToken!=null);return this.getLocalFileContent(s)}getLocalFileContent(r){return fetch(r,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("Resource not found"))}getGhDirectoryContents(r,i=!0,s=""){let o=`${ae.gh_api_url}/repos/${r}/my/git/trees/main`;i||(o=`${ae.gh_api_url}/repos/${r}/my/contents/${s}?ref=main`),o+=i?"?recursive=1":"";let a={root:"/",files:[],folders:[]};return fetch(o,this.fetchOptions).then(c=>c.ok?c.json():Promise.reject("Directory not found")).then(c=>{let l;if(c.tree?l=c.tree:l=c,l&&l.forEach(d=>{if(d.type==="tree"||d.type==="dir"){let h=d.path.split("/")[0];a.folders.includes(h)||a.folders.push(h)}else(d.type==="file"||d.type==="blob"&&d.path!=".DS_Store")&&a.files.push(d.path)}),s){let d=Me.getFilesInFolder(a,s);a.root=s,a.files=d}return Promise.resolve(a)}).catch(c=>Promise.reject("Folder not found"))}getFirstCertificate(r="certificates"){return this.getGhDirectoryContents(ae.gh_default_user_repo,!1,r).then(i=>{let s=i;return s.files&&s.files.length==0?Promise.reject(""):Promise.resolve(`${ae.gh_dr_url}/${ae.gh_default_user_repo}/${ae.gh_dr_folder}/${s.files[0]}`)})}get(r){return fetch(`${ae.gh_api_url}/${r}`,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("Resource not found"))}checkRepoExist(r,i="my_test",s=""){return y(this,null,function*(){return fetch(`${ae.gh_api_url}/repos/${r}/${i}`).then(o=>o.ok?o.json():Promise.reject("Repo doesn't exist!"))})}createRepo(r,i="my_test"){return y(this,null,function*(){return fetch(`${ae.gh_api_url}/user/repos`,{method:"POST",headers:{Authorization:`Bearer ${r}`,Accept:"application/vnd.github.v3+json"},body:JSON.stringify({name:i,description:"My public homepage",private:!1,auto_init:!0})}).then(s=>s.ok?s.json():Promise.reject("Unable to create repository"))})}pushReadme(r,i,s,o="my_test"){return y(this,null,function*(){let a=btoa(unescape(encodeURIComponent(s)));return fetch(`${ae.gh_api_url}/repos/${r}/${o}/contents/README.md`,{headers:{Authorization:`Bearer ${i}`}}).then(c=>c.ok?c.status===404?fetch(`${ae.gh_api_url}/repos/${r}/${o}/contents/README.md`,{method:"PUT",headers:{Authorization:`token ${i}`,Accept:"application/vnd.github.v3+json"},body:JSON.stringify({message:"Create README",content:a})}):c.json():Promise.reject("Homepage not found!")).then(c=>this.updateReadme(r,i,a)).catch(c=>(console.error("Error creating README.md:",c),Promise.reject("Error creating README.md")))})}updateReadme(r,i,s,o="my_test"){return y(this,null,function*(){return fetch(`${ae.gh_api_url}/repos/${r}/${o}/contents/README.md`,{method:"PUT",headers:{Authorization:`Bearer ${i}`,Accept:"application/vnd.github.v3+json"},body:JSON.stringify({message:"Update README",content:s})}).then(a=>a.ok?a.json():Promise.reject("Error updating homepage")).catch(a=>(console.error("Error updating homepage:",a),Promise.reject("Error updating homepage")))})}decodeBase64(r){return decodeURIComponent(escape(atob(r)))}encodeBase64(r){return btoa(unescape(encodeURIComponent(r)))}getHomepageContent(r,i,s="my_test"){return fetch(`${ae.gh_api_url}/repos/${r}/${s}/contents/README.md`,{headers:{Authorization:`Bearer ${i}`,Accept:"application/vnd.github.v3+json"}}).then(o=>o.ok?o.json():Promise.reject("Homepage not found !")).then(o=>({content:this.decodeBase64(o.content),sha:o.sha}))}computeGitSha(r){return y(this,null,function*(){let s=`blob ${new Blob([r]).size}\0${r}`,o=yield crypto.subtle.digest("SHA-1",new TextEncoder().encode(s));return this.bufferToHex(o)})}bufferToHex(r){let i=new Uint8Array(r);return Array.from(i).map(s=>s.toString(16).padStart(2,"0")).join("")}};e.\u0275fac=function(i){return new(i||e)(q(Ii))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var RO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Re({type:e,selectors:[["app-webfront-jumbotron"]],decls:39,vars:0,consts:[[1,"masthead"],[1,"container","px-4","px-lg-5","d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","justify-content-center"],[1,"text-center"],[1,"mx-auto","my-0","text-uppercase"],[1,"text-white-50","mx-auto","mt-2","mb-5"],["href","#about",1,"btn","btn-primary"],["id","about",1,"about-section","text-center"],[1,"container","px-lg-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"text-white","mb-4"],[1,"text-white-50"],[1,"row","py-4","justify-content-center"],["id","contactForm","data-sb-form-api-token","API_TOKEN",1,"form-signup"],[1,"row","input-group-newsletter","justify-content-center"],[1,"col-6"],["id","emailAddress","type","email","placeholder","Enter email address...","aria-label","Enter email address...","data-sb-validations","required,email",1,"form-control"],[1,"col-auto"],["id","submitButton","type","Submit","onclick","sendMessage()",1,"btn","btn-primary"],["data-sb-feedback","emailAddress:required",1,"invalid-feedback","mt-2"],["data-sb-feedback","emailAddress:email",1,"invalid-feedback","mt-2"],["id","submitSuccessMessage",1,"d-none"],[1,"text-center","mb-3","mt-2","text-white"],[1,"fw-bolder"],["href",""],["id","submitErrorMessage",1,"d-none"],[1,"text-center","text-danger","mb-3","mt-2"]],template:function(i,s){i&1&&(D(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),N(5,"Own your own Homepage"),A(),D(6,"h2",5),N(7,"Want to Own a Public Homepage ?"),A(),D(8,"a",6),N(9,"Get Started"),A()()()()(),D(10,"section",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2",11),N(15,"Your PublicHome.Page is Your secret sauce!"),A(),D(16,"div",12),N(17," Boost your business or portfolio's visibility to millions with a strong public presence. It's easy to get started ! Contact us today and elevate your brand. "),A()()(),D(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16),re(22,"input",17),A(),D(23,"div",18)(24,"button",19),N(25,"Notify"),A()()(),D(26,"div",20),N(27,"An email is required."),A(),D(28,"div",21),N(29,"Email is not valid."),A(),D(30,"div",22)(31,"div",23)(32,"div",24),N(33,"Thank you for your interest!"),A(),re(34,"br")(35,"a",25),A()(),D(36,"div",26)(37,"div",27),N(38,"Error sending message!"),A()()()()()())},dependencies:[T1,_1,wb]});let n=e;return n})();var MO=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.homePageFile=J.readme_home;let o=s.snapshot.url[0];o&&o.path=="questions"&&(this.homePageFile=J.fab_questions_list2)}};e.\u0275fac=function(i){return new(i||e)($(Rt),$(wn),$(Ln))},e.\u0275cmp=Re({type:e,selectors:[["app-webfront-main"]],decls:5,vars:1,consts:[[1,"container"],["id","questions",1,"row","justify-content-center"],[1,""],[1,"container",3,"src"]],template:function(i,s){i&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),N(4,`
            `),A()()()()),i&2&&(L(3),W("src",s.homePageFile))},dependencies:[On]});let n=e;return n})();var NO=(()=>{let e=class e extends sr{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.metaService=o}userInitialised(){this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":J.homeUser=J.ghUser;break;case"UserDirectory":this.messaging.send({cmd:"PageFile",file:"HomeGHUser"});break;default:break}})}ngOnInit(){this.metaService.addTag({name:"keywords",content:"My Brand, Your brand, Your landing page, Resume Builder, Resume"}),this.metaService.addTag({name:"description",content:"Own your Own page ! Create your brand, Reach millions"})}ngOnDestroy(){}};e.\u0275fac=function(i){return new(i||e)($(an),$(Rt),$(Pn),$(LM))},e.\u0275cmp=Re({type:e,selectors:[["home"]],features:[gt],decls:2,vars:0,template:function(i,s){i&1&&re(0,"app-webfront-jumbotron")(1,"app-webfront-main")},dependencies:[RO,MO]});let n=e;return n})();function $9(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function B9(n,e){var t=document.querySelector('script[src="'.concat(n,'"]'));if(t===null)return null;var r=OO(n,e),i=t.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(r.dataset).length)return null;var s=!0;return Object.keys(i.dataset).forEach(function(o){i.dataset[o]!==r.dataset[o]&&(s=!1)}),s?t:null}function q9(n){var e=n.url,t=n.attributes,r=n.onSuccess,i=n.onError,s=OO(e,t);s.onerror=i,s.onload=r,document.head.insertBefore(s,document.head.firstElementChild)}function z9(n){var e=n.sdkBaseUrl,t=n.environment,r=$9(n,["sdkBaseUrl","environment"]),i=e||W9(t),s=r,o=Object.keys(s).filter(function(l){return typeof s[l]<"u"&&s[l]!==null&&s[l]!==""}).reduce(function(l,d){var h=s[d].toString();return d=H9(d),d.substring(0,4)==="data"||d==="crossorigin"?l.attributes[d]=h:l.queryParams[d]=h,l},{queryParams:{},attributes:{}}),a=o.queryParams,c=o.attributes;return a["merchant-id"]&&a["merchant-id"].indexOf(",")!==-1&&(c["data-merchant-id"]=a["merchant-id"],a["merchant-id"]="*"),{url:"".concat(i,"?").concat(G9(a)),attributes:c}}function H9(n){var e=function(t,r){return(r?"-":"")+t.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function G9(n){var e="";return Object.keys(n).forEach(function(t){e.length!==0&&(e+="&"),e+=t+"="+n[t]}),e}function W9(n){return n==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function OO(n,e){e===void 0&&(e={});var t=document.createElement("script");return t.src=n,Object.keys(e).forEach(function(r){t.setAttribute(r,e[r]),r==="data-csp-nonce"&&t.setAttribute("nonce",e["data-csp-nonce"])}),t}function FO(n,e){if(e===void 0&&(e=Promise),LO(n,e),typeof document>"u")return e.resolve(null);var t=z9(n),r=t.url,i=t.attributes,s=i["data-namespace"]||"paypal",o=PO(s);return i["data-js-sdk-library"]||(i["data-js-sdk-library"]="paypal-js"),B9(r,i)&&o?e.resolve(o):K9({url:r,attributes:i},e).then(function(){var a=PO(s);if(a)return a;throw new Error("The window.".concat(s," global variable is not available."))})}function K9(n,e){e===void 0&&(e=Promise),LO(n,e);var t=n.url,r=n.attributes;if(typeof t!="string"||t.length===0)throw new Error("Invalid url.");if(typeof r<"u"&&typeof r!="object")throw new Error("Expected attributes to be an object.");return new e(function(i,s){if(typeof document>"u")return i();q9({url:t,attributes:r,onSuccess:function(){return i()},onError:function(){var o=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return s(o)}})})}function PO(n){return window[n]}function LO(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");var t=n.environment;if(t&&t!=="production"&&t!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var Q9=n=>({"text-center":n});function Y9(n,e){if(n&1&&(D(0,"div")(1,"a",19),N(2,"Dab Me Up\xA0"),re(3,"i",20),A()()),n&2){let t=e.$implicit;L(),on("href",t.value,pt)}}function Z9(n,e){if(n&1&&(D(0,"div")(1,"markdown",17),N(2,`
                    `),A(),ge(3,Y9,4,1,"div",18),xt(4,"keyvalue"),re(5,"hr"),A()),n&2){let t=pe();L(),W("data",t.creatorMessageForServiceOfferings),L(2),W("ngForOf",Mn(4,2,t.subscriptionServices))}}function J9(n,e){n&1&&(D(0,"div")(1,"h6",21),N(2,"You have an active subscription to publish!"),A(),re(3,"img",22),D(4,"h6",9),N(5,"Contact us to learn more about automation hooks!"),A()())}function X9(n,e){if(n&1&&ge(0,J9,6,0,"div",14),n&2){let t=pe();W("ngIf",t.hasOncePaidAndValidSubscription)}}function eW(n,e){if(n&1&&(D(0,"h2"),N(1),A()),n&2){let t=pe(2);L(),Ue(t.contacts_title)}}function tW(n,e){if(n&1&&(D(0,"a",25),re(1,"i"),N(2),A()),n&2){let t=e.ngIf,r=pe().$implicit,i=pe(2);on("href",i.availableLinks.get(r.key),pt),L(),Hp("fa-brands fa-",t[0],""),mr("color",t[1]),L(),ct(" ",i.availableTexts.get(r.key),"")}}function nW(n,e){if(n&1&&(D(0,"a",25),N(1),A()),n&2){let t=pe().$implicit,r=pe(2);W("href",r.availableLinks.get(t.key),pt),L(),Ue(r.availableLinks.get(t.key))}}function rW(n,e){if(n&1&&(D(0,"div"),ge(1,tW,3,7,"a",24)(2,nW,2,2,"ng-template",null,1,To),A()),n&2){let t=e.$implicit,r=Co(3),i=pe(2);L(),W("ngIf",i.getIconForKeyWithColor(t.key))("ngIfElse",r)}}function iW(n,e){if(n&1&&(D(0,"div",7)(1,"div",6),re(2,"img",23),D(3,"h5"),N(4),A(),D(5,"p"),N(6),A(),ge(7,eW,2,1,"h2",14)(8,rW,4,2,"div",18),xt(9,"keyvalue"),xt(10,"slice"),A()()),n&2){let t=pe();L(2),on("src",t.userData.avatar_url,pt),L(2),Ue(t.userData.name||t.userData.login),L(2),Ue(t.userData.bio),L(),W("ngIf",t.contacts_title),L(),W("ngForOf",oc(10,7,Mn(9,5,t.availableLinks),0,7))}}function sW(n,e){if(n&1){let t=yt();D(0,"div")(1,"a",26),oe("click",function(){le(t);let i=pe();return ue(i.signoutSession())}),N(2,"Signout"),A()()}}function oW(n,e){if(n&1&&(D(0,"a",27),re(1,"img",28),A()),n&2){let t=e.$implicit;L(),on("src",t,pt)}}var WE=(()=>{let e=class e extends sr{constructor(r,i,s,o,a){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.supabaseService=o,this.ngZone=a,this.badgesAvailable=[],this.contactPageContent="Loading..",this.contactsContent="",this.availableLinks=new Map,this.availableTexts=new Map,this.useUsersContent=!1,this.firstList=!0,this.firstHtml=!0,this.contacts_title="",this.userData={},this.certificateLink="",this.subscriptionServices=new Map,this.creatorMessageForServiceOfferings="",this.hasOncePaidAndValidSubscription=!1,this.iamtheowner=!1,this.userHasSubscriptionsFor=[],this.EXCEPTIONAL_USER="sandipsahoo2k2",this.paypalButtonLoaded=!1}isOwnerLoggedIn(){return this.supabaseService.isLoggedIn()&&this.iamtheowner}isLoggedIn(){return this.supabaseService.isLoggedIn()}signinWithGitHub(){return y(this,null,function*(){let r=window.location.pathname,{data:i,error:s}=yield this.supabaseService.signInWithGitHub(r);s&&console.error("Login error:",s.message)})}signoutSession(){this.supabaseService.signoutSession(),this.iamtheowner=!1}updateSubscriptionId(r,i){return y(this,null,function*(){let s=this.supabaseService.getChannelSubscriptionId(this.userHasSubscriptionsFor,r);if(s&&s!=i){alert("You already have a subscription for this channel. Please cancel it before creating a new one.");return}if(s&&s==i){alert("You already have a subscription for this channel. Please check your PayPal account.");return}this.userHasSubscriptionsFor.push({channel:r,paypal:i});let{data:o,error:a}=yield this.supabaseService.updateUserData({homepage_subscriptions:this.userHasSubscriptionsFor});a?console.error("Update error:",a.message):console.debug("User data updated")})}getOnApproveHandler(){return(r,i)=>(this.updateSubscriptionId(J.ghUserLoaded,r.subscriptionID),Promise.resolve())}renderPayPalButton(){paypal.Buttons({style:{layout:"vertical",color:"gold",shape:"rect",label:"subscribe",height:35},createSubscription:function(r,i){return i.subscription.create({plan_id:ae.paypal.planId})},onInit:function(r,i){console.debug("PayPal initialized")},onCancel:function(r){console.debug("PayPal cancelled")},onError:function(r){console.error("PayPal init error",r)},onApprove:this.getOnApproveHandler()}).render("#paypal-button-container"),this.paypalButtonLoaded=!0}userInitialised(){this.supabaseService.getSupabaseClient().auth.onAuthStateChange((r,i)=>{(r==="SIGNED_IN"||i!=null&&i.user!=null)&&(this.paypalButtonLoaded||setTimeout(()=>{this.ngZone.runOutsideAngular(()=>{this.renderPayPalButton()})},1e3))}),this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":this.titleService.setTitle(J.ghUser.name),this.userData=J.ghUser,this.githubService.getMdFileContent(J.ghUserLoaded,this.routerFileUrl).then(o=>this.contactPageContent=o),this.supabaseSessionInit();break;case"UserDirectory":let s=Me.getFilesInFolder(J.userContext.directory,"certificates/badges");for(let o of s){let a=Me.getGhUserFilePath(J.ghUserLoaded,o,this.githubService.hasInstalledAccessToken());this.badgesAvailable.push(a),this.badgesAvailable.length==1&&(this.certificateLink=this.badgesAvailable[0])}break;default:break}})}hasValidPaypalSubscription(){this.hasOncePaidAndValidSubscription=!1;let r=this.supabaseService.getUserDataProperty("homepage_subscriptions");if(r&&r.length>0){let i=this.supabaseService.getChannelSubscriptionId(r,J.ghUserLoaded);i!=""&&this.supabaseService.getSupabaseClient().functions.invoke("paypal-subscription",{body:{subscription_id:i}}).then(({data:s,error:o})=>o?(alert("Error checking your subscription, please check your paypal or retry later."),console.error("Error checking subscription:",o.message),!1):s.status=="ACTIVE"?(this.hasOncePaidAndValidSubscription=!0,!0):(alert("Your subscription is not active. Please check your PayPal account."),!1)).catch(s=>(alert("Error checking your subscription, please check your paypal or retry later."),console.error("Unexpected error invoking function:",s.message||s),!1))}}supabaseSessionInit(){return y(this,null,function*(){try{let r=yield this.supabaseService.getSession();if(r&&r.user){if(r.user.user_metadata){let i=r.user.user_metadata.preferred_username;J.ghUserLoaded==ae.gh_default_user_repo&&i==this.EXCEPTIONAL_USER?this.iamtheowner=!0:this.iamtheowner=i==J.ghUserLoaded}this.userHasSubscriptionsFor=r.user.user_metadata.homepage_subscriptions||[],this.hasValidPaypalSubscription()}}catch{console.error("Error getting session")}})}ngAfterViewInit(){return y(this,null,function*(){if(!(yield FO({clientId:ae.paypal.clientId,vault:!0,intent:"subscription",disableFunding:"credit,card"}))){console.error("PayPal SDK failed to load");return}})}ngOnInit(){return y(this,null,function*(){J.contactLinksByKey.clear(),this.markdownService.renderer.html=r=>(this.useUsersContent=this.firstHtml?Me.getFirstLine(r)=="<!-- My Contacts -->":this.useUsersContent,this.firstHtml=!1,r),this.markdownService.renderer.blockquote=r=>(this.creatorMessageForServiceOfferings=r,""),this.markdownService.renderer.link=(r,i,s)=>(this.handleDabMeUp(r,s),st.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.list=(r,i,s)=>this.firstList||!this.useUsersContent?(this.firstList=!1,""):st.prototype.list.call(this.markdownService.renderer,r,i,s)})}handleDabMeUp(r,i){i=="DabMeUp"&&r.split(",").forEach(o=>{let[a,c]=o.split(":"),l=Me.getActionByService(a);l&&this.subscriptionServices.set(l,"https://paypal.me/")})}onMarkdownReady(){this.firstHtml,this.availableLinks=J.contactLinksByKey,this.availableTexts=J.contactTextsByKey,this.messaging.send({cmd:"PageFile",file:"Contacts"})}getIconForKeyWithColor(r){return Me.getIconForKeyWithColor(r)}hasBrandLink(r){let i=J.contactHostNameByKeys.get(r);return i?J.iconsColorByBrandKey.has(i):!1}};e.\u0275fac=function(i){return new(i||e)($(an),$(Rt),$(Pn),$(kc),$(De))},e.\u0275cmp=Re({type:e,selectors:[["app-contact"]],features:[gt],decls:21,vars:10,consts:[["isAOwner",""],["nonbrandLink",""],[1,"container"],[1,"row","justify-content-center",3,"ngClass"],[1,"col-lg-8"],[1,"container",3,"ready","data"],[1,"col-lg-6"],[1,"row","justify-content-center"],[3,"hidden"],[1,"text-center"],["id","paypal-button-container",1,"my-3"],[4,"ngIf","ngIfElse"],["class","row justify-content-center",4,"ngIf"],[1,"row"],[4,"ngIf"],[1,"d-flex","justify-content-center"],["href","/certificates",4,"ngFor","ngForOf"],[3,"data"],[4,"ngFor","ngForOf"],[1,"btn","btn-warning","my-2",2,"width","100%",3,"href"],[1,"fa-solid","fa-handshake-angle","fa-beat","fa-xl",2,"color","#B197FC"],[1,"text-center","text-info"],["src","/assets/img/g-play.png","alt","Download android app to publish content",1,""],["alt","Passport Pic",1,"col-4","rounded-circle","light-bordered-img",3,"src"],["class","btn btn-outline-secondary my-2","style","width:100%","target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",1,"btn","btn-outline-secondary","my-2",2,"width","100%",3,"href"],[1,"btn","btn-warning","my-3",3,"click"],["href","/certificates"],["alt","Thumbnail Image",3,"src"]],template:function(i,s){if(i&1){let o=yt();D(0,"div",2)(1,"div",3)(2,"div",4)(3,"markdown",5),oe("ready",function(){return le(o),ue(s.onMarkdownReady())}),N(4,`
            `),A()(),D(5,"div",6)(6,"div",7)(7,"div",8)(8,"h6",9)(9,"b"),N(10,"Setup my Channel"),A()(),re(11,"div",10)(12,"hr"),A(),ge(13,Z9,6,4,"div",11)(14,X9,1,1,"ng-template",null,0,To),A()(),ge(16,iW,11,11,"div",12),D(17,"div",13),ge(18,sW,3,0,"div",14),D(19,"div",15),ge(20,oW,2,1,"a",16),A()()()()}if(i&2){let o=Co(15);L(),W("ngClass",Kp(8,Q9,!s.useUsersContent)),L(2),W("data",s.contactPageContent),L(4),W("hidden",!s.isOwnerLoggedIn()),L(6),W("ngIf",!s.iamtheowner)("ngIfElse",o),L(3),W("ngIf",!s.useUsersContent),L(2),W("ngIf",s.isLoggedIn()),L(2),W("ngForOf",s.badgesAvailable)}},dependencies:[lc,Bt,qt,On,uc,ys],styles:[".hover-warning[_ngcontent-%COMP%]:hover{color:#000!important;background-color:#ffc107!important;border-color:#ffc107!important}.btn-outline-warnig-deep[_ngcontent-%COMP%]{color:#d4a300;border-color:#d4a300}.light-bordered-img[_ngcontent-%COMP%]{border:2px solid #f0f0f0;padding:2px;box-shadow:0 0 2px #0000000d}"]});let n=e;return n})();function aW(n,e){if(n&1&&(D(0,"a",9),re(1,"i"),A()),n&2){let t=e.ngIf,r=pe().$implicit,i=pe();W("href",i.availableLinks.get(r.key),pt),L(),Hp("fa-brands fa-",t[0],""),mr("color",t[1])}}function cW(n,e){if(n&1&&(D(0,"a",9),re(1,"i",10),A()),n&2){let t=pe().$implicit,r=pe();W("href",r.availableLinks.get(t.key),pt)}}function lW(n,e){if(n&1&&(D(0,"li"),ge(1,aW,2,6,"a",8)(2,cW,2,1,"ng-template",null,0,To),A()),n&2){let t=e.$implicit,r=Co(3),i=pe();L(),W("ngIf",i.hasBrandLink(t.key)&&i.getIconForKeyWithColor(t.key))("ngIfElse",r)}}var VO=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.messaging=i,this.route=s,this.footerNote="Copyright",this.contactsFileUrl=J.user_contacts,this.availableLinks=new Map,this.iconsByKey=J.iconsColorByBrandKey,this.oldRender={}}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"UserDirectory":this.footerNote="Powered By",this.loadContacts(J.userContext.username);break;case"PageFile":switch(i.file){case"HomeGHUser":this.footerNote="Copyright";break;case"Contacts":this.availableLinks=J.contactLinksByKey;break;default:break}break;default:break}}),this.loadContacts(ae.gh_default_user_repo)}loadContacts(r){this.githubService.getMdFileContent(r,"contacts.md").then(i=>{J.contactLinksByKey.clear(),this.parseMarkdownWithCustomRenderer(i)}).catch(i=>{console.log("Contacts not available")}).finally(()=>{this.availableLinks=J.contactLinksByKey})}parseMarkdownWithCustomRenderer(r){let i=new st;return i.link=(s,o,a)=>(this.collectContactsLinks(s,o,a),st.prototype.link.call(i,s,o,a)),Fe(r,{renderer:i})}collectContactsLinks(r,i,s){J.contactLinksByKey.set(s,r);try{if(r){let o=new URL(r),a=o.hostname;if(a.length>0){let c=Me.closestHost(a);J.contactHostNameByKeys.set(s,c),J.iconsColorByBrandKey.has(c)?J.contactTextsByKey.set(s,this.getHostText(c)):J.contactTextsByKey.set(s,s!=r?Me.unescape(s):this.getHostText(c))}else if(o.protocol=="mailto:"||o.protocol=="tel:"){let c=Me.unescape(s);J.contactTextsByKey.set(s,Me.unescape(s)),J.contactHostNameByKeys.set(s,c)}else J.contactLinksByKey.delete(s)}}catch{J.contactLinksByKey.delete(s)}}hasBrandLink(r){let i=J.contactHostNameByKeys.get(r);return i?J.iconsColorByBrandKey.has(i):!1}getIconForKeyWithColor(r){return Me.getIconForKeyWithColor(r)}getHostText(r){return Me.getHostText(r)}ngAfterViewInit(){}};e.\u0275fac=function(i){return new(i||e)($(Rt),$(cn),$(Ln))},e.\u0275cmp=Re({type:e,selectors:[["app-footer"]],decls:12,vars:8,consts:[["nonbrandLink",""],["id","contact",1,"text-center"],[1,"container"],[1,"socials-media","text-center"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"credits"],["href","/"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"fa-solid","fa-link"]],template:function(i,s){i&1&&(D(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4),ge(4,lW,4,2,"li",5),xt(5,"keyvalue"),xt(6,"slice"),A()(),D(7,"div",6),N(8),D(9,"a",7),N(10,"www.publichome.page"),A(),N(11," All rights reserved. "),A()()()),i&2&&(L(4),W("ngForOf",oc(6,4,Mn(5,2,s.availableLinks),0,7)),L(4),ct(" ",s.footerNote," \xA9 "))},dependencies:[Bt,qt,uc,ys],styles:['#contact[_ngcontent-%COMP%]{background:#f7f7f7;padding-top:25px;padding-bottom:25px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]{width:100%}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;float:none;margin:0}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-right:10px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:24px;color:#999;letter-spacing:.1em;font-weight:500;background:transparent;text-transform:uppercase;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8a07e;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.1em;font-weight:500;margin-top:0;text-transform:uppercase}.credits[_ngcontent-%COMP%]{font-size:13px}pre.code[_ngcontent-%COMP%]{white-space:pre-wrap}pre.code[_ngcontent-%COMP%]:before{counter-reset:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";width:8em;padding-left:auto;margin-left:auto;text-align:right}']});let n=e;return n})();var jO=(()=>{let e=class e{constructor(){this.WIT_URL="https://api.wit.ai/message?v=20211010&q=",this.WIT_TOKEN="GLM547LWVQYPHR6QWS5ADO3YYTB6ZRI3"}getIntent(r){return y(this,null,function*(){return fetch(`https://api.wit.ai/message?v=20211010&q=${encodeURIComponent(r.substring(0,250))}`,{headers:{Authorization:`Bearer ${this.WIT_TOKEN}`}}).then(i=>i.ok?i.json():Promise.reject(i.statusText))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Yt=[];for(Am=0;Am<256;++Am)Yt.push((Am+256).toString(16).slice(1));var Am;function UO(n,e=0){return(Yt[n[e+0]]+Yt[n[e+1]]+Yt[n[e+2]]+Yt[n[e+3]]+"-"+Yt[n[e+4]]+Yt[n[e+5]]+"-"+Yt[n[e+6]]+Yt[n[e+7]]+"-"+Yt[n[e+8]]+Yt[n[e+9]]+"-"+Yt[n[e+10]]+Yt[n[e+11]]+Yt[n[e+12]]+Yt[n[e+13]]+Yt[n[e+14]]+Yt[n[e+15]]).toLowerCase()}var xm,dW=new Uint8Array(16);function KE(){if(!xm&&(xm=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!xm))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return xm(dW)}var hW=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),QE={randomUUID:hW};function fW(n,e,t){if(QE.randomUUID&&!e&&!n)return QE.randomUUID();n=n||{};var r=n.random||(n.rng||KE)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return UO(r)}var YE=fW;var $O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},BO={};var As,ZE;(function(){var n;function e(T,w){function I(){}I.prototype=w.prototype,T.D=w.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(S,x,M){for(var C=Array(arguments.length-2),ni=2;ni<arguments.length;ni++)C[ni-2]=arguments[ni];return w.prototype[x].apply(S,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,w,I){I||(I=0);var S=Array(16);if(typeof w=="string")for(var x=0;16>x;++x)S[x]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(x=0;16>x;++x)S[x]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=T.g[0],I=T.g[1],x=T.g[2];var M=T.g[3],C=w+(M^I&(x^M))+S[0]+3614090360&4294967295;w=I+(C<<7&4294967295|C>>>25),C=M+(x^w&(I^x))+S[1]+3905402710&4294967295,M=w+(C<<12&4294967295|C>>>20),C=x+(I^M&(w^I))+S[2]+606105819&4294967295,x=M+(C<<17&4294967295|C>>>15),C=I+(w^x&(M^w))+S[3]+3250441966&4294967295,I=x+(C<<22&4294967295|C>>>10),C=w+(M^I&(x^M))+S[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=M+(x^w&(I^x))+S[5]+1200080426&4294967295,M=w+(C<<12&4294967295|C>>>20),C=x+(I^M&(w^I))+S[6]+2821735955&4294967295,x=M+(C<<17&4294967295|C>>>15),C=I+(w^x&(M^w))+S[7]+4249261313&4294967295,I=x+(C<<22&4294967295|C>>>10),C=w+(M^I&(x^M))+S[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=M+(x^w&(I^x))+S[9]+2336552879&4294967295,M=w+(C<<12&4294967295|C>>>20),C=x+(I^M&(w^I))+S[10]+4294925233&4294967295,x=M+(C<<17&4294967295|C>>>15),C=I+(w^x&(M^w))+S[11]+2304563134&4294967295,I=x+(C<<22&4294967295|C>>>10),C=w+(M^I&(x^M))+S[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=M+(x^w&(I^x))+S[13]+4254626195&4294967295,M=w+(C<<12&4294967295|C>>>20),C=x+(I^M&(w^I))+S[14]+2792965006&4294967295,x=M+(C<<17&4294967295|C>>>15),C=I+(w^x&(M^w))+S[15]+1236535329&4294967295,I=x+(C<<22&4294967295|C>>>10),C=w+(x^M&(I^x))+S[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=M+(I^x&(w^I))+S[6]+3225465664&4294967295,M=w+(C<<9&4294967295|C>>>23),C=x+(w^I&(M^w))+S[11]+643717713&4294967295,x=M+(C<<14&4294967295|C>>>18),C=I+(M^w&(x^M))+S[0]+3921069994&4294967295,I=x+(C<<20&4294967295|C>>>12),C=w+(x^M&(I^x))+S[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=M+(I^x&(w^I))+S[10]+38016083&4294967295,M=w+(C<<9&4294967295|C>>>23),C=x+(w^I&(M^w))+S[15]+3634488961&4294967295,x=M+(C<<14&4294967295|C>>>18),C=I+(M^w&(x^M))+S[4]+3889429448&4294967295,I=x+(C<<20&4294967295|C>>>12),C=w+(x^M&(I^x))+S[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=M+(I^x&(w^I))+S[14]+3275163606&4294967295,M=w+(C<<9&4294967295|C>>>23),C=x+(w^I&(M^w))+S[3]+4107603335&4294967295,x=M+(C<<14&4294967295|C>>>18),C=I+(M^w&(x^M))+S[8]+1163531501&4294967295,I=x+(C<<20&4294967295|C>>>12),C=w+(x^M&(I^x))+S[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=M+(I^x&(w^I))+S[2]+4243563512&4294967295,M=w+(C<<9&4294967295|C>>>23),C=x+(w^I&(M^w))+S[7]+1735328473&4294967295,x=M+(C<<14&4294967295|C>>>18),C=I+(M^w&(x^M))+S[12]+2368359562&4294967295,I=x+(C<<20&4294967295|C>>>12),C=w+(I^x^M)+S[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=M+(w^I^x)+S[8]+2272392833&4294967295,M=w+(C<<11&4294967295|C>>>21),C=x+(M^w^I)+S[11]+1839030562&4294967295,x=M+(C<<16&4294967295|C>>>16),C=I+(x^M^w)+S[14]+4259657740&4294967295,I=x+(C<<23&4294967295|C>>>9),C=w+(I^x^M)+S[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=M+(w^I^x)+S[4]+1272893353&4294967295,M=w+(C<<11&4294967295|C>>>21),C=x+(M^w^I)+S[7]+4139469664&4294967295,x=M+(C<<16&4294967295|C>>>16),C=I+(x^M^w)+S[10]+3200236656&4294967295,I=x+(C<<23&4294967295|C>>>9),C=w+(I^x^M)+S[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=M+(w^I^x)+S[0]+3936430074&4294967295,M=w+(C<<11&4294967295|C>>>21),C=x+(M^w^I)+S[3]+3572445317&4294967295,x=M+(C<<16&4294967295|C>>>16),C=I+(x^M^w)+S[6]+76029189&4294967295,I=x+(C<<23&4294967295|C>>>9),C=w+(I^x^M)+S[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=M+(w^I^x)+S[12]+3873151461&4294967295,M=w+(C<<11&4294967295|C>>>21),C=x+(M^w^I)+S[15]+530742520&4294967295,x=M+(C<<16&4294967295|C>>>16),C=I+(x^M^w)+S[2]+3299628645&4294967295,I=x+(C<<23&4294967295|C>>>9),C=w+(x^(I|~M))+S[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=M+(I^(w|~x))+S[7]+1126891415&4294967295,M=w+(C<<10&4294967295|C>>>22),C=x+(w^(M|~I))+S[14]+2878612391&4294967295,x=M+(C<<15&4294967295|C>>>17),C=I+(M^(x|~w))+S[5]+4237533241&4294967295,I=x+(C<<21&4294967295|C>>>11),C=w+(x^(I|~M))+S[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=M+(I^(w|~x))+S[3]+2399980690&4294967295,M=w+(C<<10&4294967295|C>>>22),C=x+(w^(M|~I))+S[10]+4293915773&4294967295,x=M+(C<<15&4294967295|C>>>17),C=I+(M^(x|~w))+S[1]+2240044497&4294967295,I=x+(C<<21&4294967295|C>>>11),C=w+(x^(I|~M))+S[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=M+(I^(w|~x))+S[15]+4264355552&4294967295,M=w+(C<<10&4294967295|C>>>22),C=x+(w^(M|~I))+S[6]+2734768916&4294967295,x=M+(C<<15&4294967295|C>>>17),C=I+(M^(x|~w))+S[13]+1309151649&4294967295,I=x+(C<<21&4294967295|C>>>11),C=w+(x^(I|~M))+S[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=M+(I^(w|~x))+S[11]+3174756917&4294967295,M=w+(C<<10&4294967295|C>>>22),C=x+(w^(M|~I))+S[2]+718787259&4294967295,x=M+(C<<15&4294967295|C>>>17),C=I+(M^(x|~w))+S[9]+3951481745&4294967295,T.g[0]=T.g[0]+w&4294967295,T.g[1]=T.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+x&4294967295,T.g[3]=T.g[3]+M&4294967295}r.prototype.u=function(T,w){w===void 0&&(w=T.length);for(var I=w-this.blockSize,S=this.B,x=this.h,M=0;M<w;){if(x==0)for(;M<=I;)i(this,T,M),M+=this.blockSize;if(typeof T=="string"){for(;M<w;)if(S[x++]=T.charCodeAt(M++),x==this.blockSize){i(this,S),x=0;break}}else for(;M<w;)if(S[x++]=T[M++],x==this.blockSize){i(this,S),x=0;break}}this.h=x,this.o+=w},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var w=1;w<T.length-8;++w)T[w]=0;var I=8*this.o;for(w=T.length-8;w<T.length;++w)T[w]=I&255,I/=256;for(this.u(T),T=Array(16),w=I=0;4>w;++w)for(var S=0;32>S;S+=8)T[I++]=this.g[w]>>>S&255;return T};function s(T,w){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=w(T)}function o(T,w){this.h=w;for(var I=[],S=!0,x=T.length-1;0<=x;x--){var M=T[x]|0;S&&M==w||(I[x]=M,S=!1)}this.g=I}var a={};function c(T){return-128<=T&&128>T?s(T,function(w){return new o([w|0],0>w?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return E(l(-T));for(var w=[],I=1,S=0;T>=I;S++)w[S]=T/I|0,I*=4294967296;return new o(w,0)}function d(T,w){if(T.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T.charAt(0)=="-")return E(d(T.substring(1),w));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(w,8)),S=h,x=0;x<T.length;x+=8){var M=Math.min(8,T.length-x),C=parseInt(T.substring(x,x+M),w);8>M?(M=l(Math.pow(w,M)),S=S.j(M).add(l(C))):(S=S.j(I),S=S.add(l(C)))}return S}var h=c(0),p=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(b(this))return-E(this).m();for(var T=0,w=1,I=0;I<this.g.length;I++){var S=this.i(I);T+=(0<=S?S:4294967296+S)*w,w*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(b(this))return"-"+E(this).toString(T);for(var w=l(Math.pow(T,6)),I=this,S="";;){var x=B(I,w).g;I=R(I,x.j(w));var M=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=x,_(I))return M+S;for(;6>M.length;)M="0"+M;S=M+S}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(var w=0;w<T.g.length;w++)if(T.g[w]!=0)return!1;return!0}function b(T){return T.h==-1}n.l=function(T){return T=R(this,T),b(T)?-1:_(T)?0:1};function E(T){for(var w=T.g.length,I=[],S=0;S<w;S++)I[S]=~T.g[S];return new o(I,~T.h).add(p)}n.abs=function(){return b(this)?E(this):this},n.add=function(T){for(var w=Math.max(this.g.length,T.g.length),I=[],S=0,x=0;x<=w;x++){var M=S+(this.i(x)&65535)+(T.i(x)&65535),C=(M>>>16)+(this.i(x)>>>16)+(T.i(x)>>>16);S=C>>>16,M&=65535,C&=65535,I[x]=C<<16|M}return new o(I,I[I.length-1]&-2147483648?-1:0)};function R(T,w){return T.add(E(w))}n.j=function(T){if(_(this)||_(T))return h;if(b(this))return b(T)?E(this).j(E(T)):E(E(this).j(T));if(b(T))return E(this.j(E(T)));if(0>this.l(m)&&0>T.l(m))return l(this.m()*T.m());for(var w=this.g.length+T.g.length,I=[],S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var x=0;x<T.g.length;x++){var M=this.i(S)>>>16,C=this.i(S)&65535,ni=T.i(x)>>>16,Pl=T.i(x)&65535;I[2*S+2*x]+=C*Pl,j(I,2*S+2*x),I[2*S+2*x+1]+=M*Pl,j(I,2*S+2*x+1),I[2*S+2*x+1]+=C*ni,j(I,2*S+2*x+1),I[2*S+2*x+2]+=M*ni,j(I,2*S+2*x+2)}for(S=0;S<w;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=w;S<2*w;S++)I[S]=0;return new o(I,0)};function j(T,w){for(;(T[w]&65535)!=T[w];)T[w+1]+=T[w]>>>16,T[w]&=65535,w++}function U(T,w){this.g=T,this.h=w}function B(T,w){if(_(w))throw Error("division by zero");if(_(T))return new U(h,h);if(b(T))return w=B(E(T),w),new U(E(w.g),E(w.h));if(b(w))return w=B(T,E(w)),new U(E(w.g),w.h);if(30<T.g.length){if(b(T)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var I=p,S=w;0>=S.l(T);)I=K(I),S=K(S);var x=Q(I,1),M=Q(S,1);for(S=Q(S,2),I=Q(I,2);!_(S);){var C=M.add(S);0>=C.l(T)&&(x=x.add(I),M=C),S=Q(S,1),I=Q(I,1)}return w=R(T,x.j(w)),new U(x,w)}for(x=h;0<=T.l(w);){for(I=Math.max(1,Math.floor(T.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),M=l(I),C=M.j(w);b(C)||0<C.l(T);)I-=S,M=l(I),C=M.j(w);_(M)&&(M=p),x=x.add(M),T=R(T,C)}return new U(x,T)}n.A=function(T){return B(this,T).h},n.and=function(T){for(var w=Math.max(this.g.length,T.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)&T.i(S);return new o(I,this.h&T.h)},n.or=function(T){for(var w=Math.max(this.g.length,T.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)|T.i(S);return new o(I,this.h|T.h)},n.xor=function(T){for(var w=Math.max(this.g.length,T.g.length),I=[],S=0;S<w;S++)I[S]=this.i(S)^T.i(S);return new o(I,this.h^T.h)};function K(T){for(var w=T.g.length+1,I=[],S=0;S<w;S++)I[S]=T.i(S)<<1|T.i(S-1)>>>31;return new o(I,T.h)}function Q(T,w){var I=w>>5;w%=32;for(var S=T.g.length-I,x=[],M=0;M<S;M++)x[M]=0<w?T.i(M+I)>>>w|T.i(M+I+1)<<32-w:T.i(M+I);return new o(x,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ZE=BO.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,As=BO.Integer=o}).apply(typeof $O<"u"?$O:typeof self<"u"?self:typeof window<"u"?window:{});var km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pi={};var JE,pW,Gc,XE,zd,Rm,eI,tI,nI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,g){return u==Array.prototype||u==Object.prototype||(u[f]=g.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof km=="object"&&km];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=t(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var v=0;v<u.length-1;v++){var k=u[v];if(!(k in g))break e;g=g[k]}u=u[u.length-1],v=g[u],f=f(v),f!=v&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var g=0,v=!1,k={next:function(){if(!v&&g<u.length){var F=g++;return{value:f(F,u[F]),done:!1}}return v=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,g){return g})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,g){return u.call.apply(u.bind,arguments)}function h(u,f,g){if(!u)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,v),u.apply(f,k)}}return function(){return u.apply(f,arguments)}}function p(u,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,p.apply(null,arguments)}function m(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),u.apply(this,v)}}function _(u,f){function g(){}g.prototype=f.prototype,u.aa=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Qb=function(v,k,F){for(var X=Array(arguments.length-2),Qe=2;Qe<arguments.length;Qe++)X[Qe-2]=arguments[Qe];return f.prototype[k].apply(v,X)}}function b(u){let f=u.length;if(0<f){let g=Array(f);for(let v=0;v<f;v++)g[v]=u[v];return g}return[]}function E(u,f){for(let g=1;g<arguments.length;g++){let v=arguments[g];if(c(v)){let k=u.length||0,F=v.length||0;u.length=k+F;for(let X=0;X<F;X++)u[k+X]=v[X]}else u.push(v)}}class R{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function j(u){return/^[\s\xa0]*$/.test(u)}function U(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function B(u){return B[" "](u),u}B[" "]=function(){};var K=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function Q(u,f,g){for(let v in u)f.call(g,u[v],v,u)}function T(u,f){for(let g in u)f.call(void 0,u[g],g,u)}function w(u){let f={};for(let g in u)f[g]=u[g];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(u,f){let g,v;for(let k=1;k<arguments.length;k++){v=arguments[k];for(g in v)u[g]=v[g];for(let F=0;F<I.length;F++)g=I[F],Object.prototype.hasOwnProperty.call(v,g)&&(u[g]=v[g])}}function x(u){var f=1;u=u.split(":");let g=[];for(;0<f&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function M(u){a.setTimeout(()=>{throw u},0)}function C(){var u=lv;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ni{constructor(){this.h=this.g=null}add(f,g){let v=Pl.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var Pl=new R(()=>new Gj,u=>u.reset());class Gj{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ol,Fl=!1,lv=new ni,ED=()=>{let u=a.Promise.resolve(void 0);Ol=()=>{u.then(Wj)}};var Wj=()=>{for(var u;u=C();){try{u.h.call(u.g)}catch(g){M(g)}var f=Pl;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Fl=!1};function zi(){this.s=this.s,this.C=this.C}zi.prototype.s=!1,zi.prototype.ma=function(){this.s||(this.s=!0,this.N())},zi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Xt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Xt.prototype.h=function(){this.defaultPrevented=!0};var Kj=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function Ll(u,f){if(Xt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var g=this.type=u.type,v=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(K){e:{try{B(f.nodeName);var k=!0;break e}catch{}k=!1}k||(f=null)}}else g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Qj[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ll.aa.h.call(this)}}_(Ll,Xt);var Qj={2:"touch",3:"pen",4:"mouse"};Ll.prototype.h=function(){Ll.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Vl="closure_listenable_"+(1e6*Math.random()|0),Yj=0;function Zj(u,f,g,v,k){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=k,this.key=++Yj,this.da=this.fa=!1}function Ph(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Oh(u){this.src=u,this.g={},this.h=0}Oh.prototype.add=function(u,f,g,v,k){var F=u.toString();u=this.g[F],u||(u=this.g[F]=[],this.h++);var X=dv(u,f,v,k);return-1<X?(f=u[X],g||(f.fa=!1)):(f=new Zj(f,this.src,F,!!v,k),f.fa=g,u.push(f)),f};function uv(u,f){var g=f.type;if(g in u.g){var v=u.g[g],k=Array.prototype.indexOf.call(v,f,void 0),F;(F=0<=k)&&Array.prototype.splice.call(v,k,1),F&&(Ph(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function dv(u,f,g,v){for(var k=0;k<u.length;++k){var F=u[k];if(!F.da&&F.listener==f&&F.capture==!!g&&F.ha==v)return k}return-1}var hv="closure_lm_"+(1e6*Math.random()|0),fv={};function ID(u,f,g,v,k){if(v&&v.once)return TD(u,f,g,v,k);if(Array.isArray(f)){for(var F=0;F<f.length;F++)ID(u,f[F],g,v,k);return null}return g=yv(g),u&&u[Vl]?u.K(f,g,l(v)?!!v.capture:!!v,k):CD(u,f,g,!1,v,k)}function CD(u,f,g,v,k,F){if(!f)throw Error("Invalid event type");var X=l(k)?!!k.capture:!!k,Qe=gv(u);if(Qe||(u[hv]=Qe=new Oh(u)),g=Qe.add(f,g,v,X,F),g.proxy)return g;if(v=Jj(),g.proxy=v,v.src=u,v.listener=g,u.addEventListener)Kj||(k=X),k===void 0&&(k=!1),u.addEventListener(f.toString(),v,k);else if(u.attachEvent)u.attachEvent(SD(f.toString()),v);else if(u.addListener&&u.removeListener)u.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Jj(){function u(g){return f.call(u.src,u.listener,g)}let f=Xj;return u}function TD(u,f,g,v,k){if(Array.isArray(f)){for(var F=0;F<f.length;F++)TD(u,f[F],g,v,k);return null}return g=yv(g),u&&u[Vl]?u.L(f,g,l(v)?!!v.capture:!!v,k):CD(u,f,g,!0,v,k)}function DD(u,f,g,v,k){if(Array.isArray(f))for(var F=0;F<f.length;F++)DD(u,f[F],g,v,k);else v=l(v)?!!v.capture:!!v,g=yv(g),u&&u[Vl]?(u=u.i,f=String(f).toString(),f in u.g&&(F=u.g[f],g=dv(F,g,v,k),-1<g&&(Ph(F[g]),Array.prototype.splice.call(F,g,1),F.length==0&&(delete u.g[f],u.h--)))):u&&(u=gv(u))&&(f=u.g[f.toString()],u=-1,f&&(u=dv(f,g,v,k)),(g=-1<u?f[u]:null)&&pv(g))}function pv(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Vl])uv(f.i,u);else{var g=u.type,v=u.proxy;f.removeEventListener?f.removeEventListener(g,v,u.capture):f.detachEvent?f.detachEvent(SD(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=gv(f))?(uv(g,u),g.h==0&&(g.src=null,f[hv]=null)):Ph(u)}}}function SD(u){return u in fv?fv[u]:fv[u]="on"+u}function Xj(u,f){if(u.da)u=!0;else{f=new Ll(f,this);var g=u.listener,v=u.ha||u.src;u.fa&&pv(u),u=g.call(v,f)}return u}function gv(u){return u=u[hv],u instanceof Oh?u:null}var mv="__closure_events_fn_"+(1e9*Math.random()>>>0);function yv(u){return typeof u=="function"?u:(u[mv]||(u[mv]=function(f){return u.handleEvent(f)}),u[mv])}function en(){zi.call(this),this.i=new Oh(this),this.M=this,this.F=null}_(en,zi),en.prototype[Vl]=!0,en.prototype.removeEventListener=function(u,f,g,v){DD(this,u,f,g,v)};function hn(u,f){var g,v=u.F;if(v)for(g=[];v;v=v.F)g.push(v);if(u=u.M,v=f.type||f,typeof f=="string")f=new Xt(f,u);else if(f instanceof Xt)f.target=f.target||u;else{var k=f;f=new Xt(v,u),S(f,k)}if(k=!0,g)for(var F=g.length-1;0<=F;F--){var X=f.g=g[F];k=Fh(X,v,!0,f)&&k}if(X=f.g=u,k=Fh(X,v,!0,f)&&k,k=Fh(X,v,!1,f)&&k,g)for(F=0;F<g.length;F++)X=f.g=g[F],k=Fh(X,v,!1,f)&&k}en.prototype.N=function(){if(en.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var g=u.g[f],v=0;v<g.length;v++)Ph(g[v]);delete u.g[f],u.h--}}this.F=null},en.prototype.K=function(u,f,g,v){return this.i.add(String(u),f,!1,g,v)},en.prototype.L=function(u,f,g,v){return this.i.add(String(u),f,!0,g,v)};function Fh(u,f,g,v){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var k=!0,F=0;F<f.length;++F){var X=f[F];if(X&&!X.da&&X.capture==g){var Qe=X.listener,Ht=X.ha||X.src;X.fa&&uv(u.i,X),k=Qe.call(Ht,v)!==!1&&k}}return k&&!v.defaultPrevented}function AD(u,f,g){if(typeof u=="function")g&&(u=p(u,g));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function xD(u){u.g=AD(()=>{u.g=null,u.i&&(u.i=!1,xD(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class e2 extends zi{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:xD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function jl(u){zi.call(this),this.h=u,this.g={}}_(jl,zi);var kD=[];function RD(u){Q(u.g,function(f,g){this.g.hasOwnProperty(g)&&pv(f)},u),u.g={}}jl.prototype.N=function(){jl.aa.N.call(this),RD(this)},jl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vv=a.JSON.stringify,t2=a.JSON.parse,n2=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function _v(){}_v.prototype.h=null;function MD(u){return u.h||(u.h=u.i())}function ND(){}var Ul={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wv(){Xt.call(this,"d")}_(wv,Xt);function bv(){Xt.call(this,"c")}_(bv,Xt);var Ys={},PD=null;function Lh(){return PD=PD||new en}Ys.La="serverreachability";function OD(u){Xt.call(this,Ys.La,u)}_(OD,Xt);function $l(u){let f=Lh();hn(f,new OD(f))}Ys.STAT_EVENT="statevent";function FD(u,f){Xt.call(this,Ys.STAT_EVENT,u),this.stat=f}_(FD,Xt);function fn(u){let f=Lh();hn(f,new FD(f,u))}Ys.Ma="timingevent";function LD(u,f){Xt.call(this,Ys.Ma,u),this.size=f}_(LD,Xt);function Bl(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function ql(){this.g=!0}ql.prototype.xa=function(){this.g=!1};function r2(u,f,g,v,k,F){u.info(function(){if(u.g)if(F)for(var X="",Qe=F.split("&"),Ht=0;Ht<Qe.length;Ht++){var Be=Qe[Ht].split("=");if(1<Be.length){var tn=Be[0];Be=Be[1];var nn=tn.split("_");X=2<=nn.length&&nn[1]=="type"?X+(tn+"="+Be+"&"):X+(tn+"=redacted&")}}else X=null;else X=F;return"XMLHTTP REQ ("+v+") [attempt "+k+"]: "+f+`
`+g+`
`+X})}function i2(u,f,g,v,k,F,X){u.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+k+"]: "+f+`
`+g+`
`+F+" "+X})}function ya(u,f,g,v){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+o2(u,g)+(v?" "+v:"")})}function s2(u,f){u.info(function(){return"TIMEOUT: "+f})}ql.prototype.info=function(){};function o2(u,f){if(!u.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(u=0;u<g.length;u++)if(Array.isArray(g[u])){var v=g[u];if(!(2>v.length)){var k=v[1];if(Array.isArray(k)&&!(1>k.length)){var F=k[0];if(F!="noop"&&F!="stop"&&F!="close")for(var X=1;X<k.length;X++)k[X]=""}}}}return vv(g)}catch{return f}}var Vh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},VD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ev;function jh(){}_(jh,_v),jh.prototype.g=function(){return new XMLHttpRequest},jh.prototype.i=function(){return{}},Ev=new jh;function Hi(u,f,g,v){this.j=u,this.i=f,this.l=g,this.R=v||1,this.U=new jl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jD}function jD(){this.i=null,this.g="",this.h=!1}var UD={},Iv={};function Cv(u,f,g){u.L=1,u.v=qh(ri(f)),u.m=g,u.P=!0,$D(u,null)}function $D(u,f){u.F=Date.now(),Uh(u),u.A=ri(u.v);var g=u.A,v=u.R;Array.isArray(v)||(v=[String(v)]),tS(g.i,"t",v),u.C=0,g=u.j.J,u.h=new jD,u.g=_S(u.j,g?f:null,!u.m),0<u.O&&(u.M=new e2(p(u.Y,u,u.g),u.O)),f=u.U,g=u.g,v=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(kD[0]=k.toString()),k=kD);for(var F=0;F<k.length;F++){var X=ID(g,k[F],v||f.handleEvent,!1,f.h||f);if(!X)break;f.g[X.key]=X}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),$l(),r2(u.i,u.u,u.A,u.l,u.R,u.m)}Hi.prototype.ca=function(u){u=u.target;let f=this.M;f&&ii(u)==3?f.j():this.Y(u)},Hi.prototype.Y=function(u){try{if(u==this.g)e:{let nn=ii(this.g);var f=this.g.Ba();let wa=this.g.Z();if(!(3>nn)&&(nn!=3||this.g&&(this.h.h||this.g.oa()||cS(this.g)))){this.J||nn!=4||f==7||(f==8||0>=wa?$l(3):$l(2)),Tv(this);var g=this.g.Z();this.X=g;t:if(BD(this)){var v=cS(this.g);u="";var k=v.length,F=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zs(this),zl(this);var X="";break t}this.h.i=new a.TextDecoder}for(f=0;f<k;f++)this.h.h=!0,u+=this.h.i.decode(v[f],{stream:!(F&&f==k-1)});v.length=0,this.h.g+=u,this.C=0,X=this.h.g}else X=this.g.oa();if(this.o=g==200,i2(this.i,this.u,this.A,this.l,this.R,nn,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Qe,Ht=this.g;if((Qe=Ht.g?Ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Qe)){var Be=Qe;break t}}Be=null}if(g=Be)ya(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dv(this,g);else{this.o=!1,this.s=3,fn(12),Zs(this),zl(this);break e}}if(this.P){g=!0;let lr;for(;!this.J&&this.C<X.length;)if(lr=a2(this,X),lr==Iv){nn==4&&(this.s=4,fn(14),g=!1),ya(this.i,this.l,null,"[Incomplete Response]");break}else if(lr==UD){this.s=4,fn(15),ya(this.i,this.l,X,"[Invalid Chunk]"),g=!1;break}else ya(this.i,this.l,lr,null),Dv(this,lr);if(BD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nn!=4||X.length!=0||this.h.h||(this.s=1,fn(16),g=!1),this.o=this.o&&g,!g)ya(this.i,this.l,X,"[Invalid Chunked Response]"),Zs(this),zl(this);else if(0<X.length&&!this.W){this.W=!0;var tn=this.j;tn.g==this&&tn.ba&&!tn.M&&(tn.j.info("Great, no buffering proxy detected. Bytes received: "+X.length),Mv(tn),tn.M=!0,fn(11))}}else ya(this.i,this.l,X,null),Dv(this,X);nn==4&&Zs(this),this.o&&!this.J&&(nn==4?gS(this.j,this):(this.o=!1,Uh(this)))}else C2(this.g),g==400&&0<X.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),Zs(this),zl(this)}}}catch{}finally{}};function BD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function a2(u,f){var g=u.C,v=f.indexOf(`
`,g);return v==-1?Iv:(g=Number(f.substring(g,v)),isNaN(g)?UD:(v+=1,v+g>f.length?Iv:(f=f.slice(v,v+g),u.C=v+g,f)))}Hi.prototype.cancel=function(){this.J=!0,Zs(this)};function Uh(u){u.S=Date.now()+u.I,qD(u,u.I)}function qD(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Bl(p(u.ba,u),f)}function Tv(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Hi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(s2(this.i,this.A),this.L!=2&&($l(),fn(17)),Zs(this),this.s=2,zl(this)):qD(this,this.S-u)};function zl(u){u.j.G==0||u.J||gS(u.j,u)}function Zs(u){Tv(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,RD(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Dv(u,f){try{var g=u.j;if(g.G!=0&&(g.g==u||Sv(g.h,u))){if(!u.K&&Sv(g.h,u)&&g.G==3){try{var v=g.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var k=v;if(k[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<u.F)Kh(g),Gh(g);else break e;Rv(g),fn(18)}}else g.za=k[1],0<g.za-g.T&&37500>k[2]&&g.F&&g.v==0&&!g.C&&(g.C=Bl(p(g.Za,g),6e3));if(1>=GD(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else Xs(g,11)}else if((u.K||g.g==u)&&Kh(g),!j(f))for(k=g.Da.g.parse(f),f=0;f<k.length;f++){let Be=k[f];if(g.T=Be[0],Be=Be[1],g.G==2)if(Be[0]=="c"){g.K=Be[1],g.ia=Be[2];let tn=Be[3];tn!=null&&(g.la=tn,g.j.info("VER="+g.la));let nn=Be[4];nn!=null&&(g.Aa=nn,g.j.info("SVER="+g.Aa));let wa=Be[5];wa!=null&&typeof wa=="number"&&0<wa&&(v=1.5*wa,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;let lr=u.g;if(lr){let Yh=lr.g?lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yh){var F=v.h;F.g||Yh.indexOf("spdy")==-1&&Yh.indexOf("quic")==-1&&Yh.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Av(F,F.h),F.h=null))}if(v.D){let Nv=lr.g?lr.g.getResponseHeader("X-HTTP-Session-Id"):null;Nv&&(v.ya=Nv,et(v.I,v.D,Nv))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-u.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var X=u;if(v.qa=vS(v,v.J?v.ia:null,v.W),X.K){WD(v.h,X);var Qe=X,Ht=v.L;Ht&&(Qe.I=Ht),Qe.B&&(Tv(Qe),Uh(Qe)),v.g=X}else fS(v);0<g.i.length&&Wh(g)}else Be[0]!="stop"&&Be[0]!="close"||Xs(g,7);else g.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Xs(g,7):kv(g):Be[0]!="noop"&&g.l&&g.l.ta(Be),g.v=0)}}$l(4)}catch{}}var c2=class{constructor(u,f){this.g=u,this.map=f}};function zD(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function HD(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function GD(u){return u.h?1:u.g?u.g.size:0}function Sv(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Av(u,f){u.g?u.g.add(f):u.h=f}function WD(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}zD.prototype.cancel=function(){if(this.i=KD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function KD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let g of u.g.values())f=f.concat(g.D);return f}return b(u.i)}function l2(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],g=u.length,v=0;v<g;v++)f.push(u[v]);return f}f=[],g=0;for(v in u)f[g++]=u[v];return f}function u2(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var g=0;g<u;g++)f.push(g);return f}f=[],g=0;for(let v in u)f[g++]=v;return f}}}function QD(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var g=u2(u),v=l2(u),k=v.length,F=0;F<k;F++)f.call(void 0,v[F],g&&g[F],u)}var YD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function d2(u,f){if(u){u=u.split("&");for(var g=0;g<u.length;g++){var v=u[g].indexOf("="),k=null;if(0<=v){var F=u[g].substring(0,v);k=u[g].substring(v+1)}else F=u[g];f(F,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function Js(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Js){this.h=u.h,$h(this,u.j),this.o=u.o,this.g=u.g,Bh(this,u.s),this.l=u.l;var f=u.i,g=new Wl;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),ZD(this,g),this.m=u.m}else u&&(f=String(u).match(YD))?(this.h=!1,$h(this,f[1]||"",!0),this.o=Hl(f[2]||""),this.g=Hl(f[3]||"",!0),Bh(this,f[4]),this.l=Hl(f[5]||"",!0),ZD(this,f[6]||"",!0),this.m=Hl(f[7]||"")):(this.h=!1,this.i=new Wl(null,this.h))}Js.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Gl(f,JD,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Gl(f,JD,!0),"@"),u.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&u.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Gl(g,g.charAt(0)=="/"?p2:f2,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Gl(g,m2)),u.join("")};function ri(u){return new Js(u)}function $h(u,f,g){u.j=g?Hl(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Bh(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function ZD(u,f,g){f instanceof Wl?(u.i=f,y2(u.i,u.h)):(g||(f=Gl(f,g2)),u.i=new Wl(f,u.h))}function et(u,f,g){u.i.set(f,g)}function qh(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Hl(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Gl(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,h2),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function h2(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var JD=/[#\/\?@]/g,f2=/[#\?:]/g,p2=/[#\?]/g,g2=/[#\?@]/g,m2=/#/g;function Wl(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Gi(u){u.g||(u.g=new Map,u.h=0,u.i&&d2(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}n=Wl.prototype,n.add=function(u,f){Gi(this),this.i=null,u=va(this,u);var g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function XD(u,f){Gi(u),f=va(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function eS(u,f){return Gi(u),f=va(u,f),u.g.has(f)}n.forEach=function(u,f){Gi(this),this.g.forEach(function(g,v){g.forEach(function(k){u.call(f,k,v,this)},this)},this)},n.na=function(){Gi(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let v=0;v<f.length;v++){let k=u[v];for(let F=0;F<k.length;F++)g.push(f[v])}return g},n.V=function(u){Gi(this);let f=[];if(typeof u=="string")eS(this,u)&&(f=f.concat(this.g.get(va(this,u))));else{u=Array.from(this.g.values());for(let g=0;g<u.length;g++)f=f.concat(u[g])}return f},n.set=function(u,f){return Gi(this),this.i=null,u=va(this,u),eS(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function tS(u,f,g){XD(u,f),0<g.length&&(u.i=null,u.g.set(va(u,f),b(g)),u.h+=g.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var v=f[g];let F=encodeURIComponent(String(v)),X=this.V(v);for(v=0;v<X.length;v++){var k=F;X[v]!==""&&(k+="="+encodeURIComponent(String(X[v]))),u.push(k)}}return this.i=u.join("&")};function va(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function y2(u,f){f&&!u.j&&(Gi(u),u.i=null,u.g.forEach(function(g,v){var k=v.toLowerCase();v!=k&&(XD(this,v),tS(this,k,g))},u)),u.j=f}function v2(u,f){let g=new ql;if(a.Image){let v=new Image;v.onload=m(Wi,g,"TestLoadImage: loaded",!0,f,v),v.onerror=m(Wi,g,"TestLoadImage: error",!1,f,v),v.onabort=m(Wi,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=m(Wi,g,"TestLoadImage: timeout",!1,f,v),a.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=u}else f(!1)}function _2(u,f){let g=new ql,v=new AbortController,k=setTimeout(()=>{v.abort(),Wi(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:v.signal}).then(F=>{clearTimeout(k),F.ok?Wi(g,"TestPingServer: ok",!0,f):Wi(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(k),Wi(g,"TestPingServer: error",!1,f)})}function Wi(u,f,g,v,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),v(g)}catch{}}function w2(){this.g=new n2}function b2(u,f,g){let v=g||"";try{QD(u,function(k,F){let X=k;l(k)&&(X=vv(k)),f.push(v+F+"="+encodeURIComponent(X))})}catch(k){throw f.push(v+"type="+encodeURIComponent("_badmap")),k}}function Kl(u){this.l=u.Ub||null,this.j=u.eb||!1}_(Kl,_v),Kl.prototype.g=function(){return new zh(this.l,this.j)},Kl.prototype.i=function(u){return function(){return u}}({});function zh(u,f){en.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(zh,en),n=zh.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Yl(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ql(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Yl(this)),this.g&&(this.readyState=3,Yl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;nS(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function nS(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Ql(this):Yl(this),this.readyState==3&&nS(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Ql(this))},n.Qa=function(u){this.g&&(this.response=u,Ql(this))},n.ga=function(){this.g&&Ql(this)};function Ql(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Yl(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function Yl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(zh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function rS(u){let f="";return Q(u,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function xv(u,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=rS(g),typeof u=="string"?g!=null&&encodeURIComponent(String(g)):et(u,f,g))}function dt(u){en.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(dt,en);var E2=/^https?$/i,I2=["POST","PUT"];n=dt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ev.g(),this.v=this.o?MD(this.o):MD(Ev),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(F){iS(this,F);return}if(u=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var k in v)g.set(k,v[k]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(let F of v.keys())g.set(F,v.get(F));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(F=>F.toLowerCase()=="content-type"),k=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(I2,f,void 0))||v||k||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[F,X]of g)this.g.setRequestHeader(F,X);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aS(this),this.u=!0,this.g.send(u),this.u=!1}catch(F){iS(this,F)}};function iS(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,sS(u),Hh(u)}function sS(u){u.A||(u.A=!0,hn(u,"complete"),hn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,hn(this,"complete"),hn(this,"abort"),Hh(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Hh(this,!0)),dt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?oS(this):this.bb())},n.bb=function(){oS(this)};function oS(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ii(u)!=4||u.Z()!=2)){if(u.u&&ii(u)==4)AD(u.Ea,0,u);else if(hn(u,"readystatechange"),ii(u)==4){u.h=!1;try{let X=u.Z();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=X===0){var k=String(u.D).match(YD)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),v=!E2.test(k?k.toLowerCase():"")}g=v}if(g)hn(u,"complete"),hn(u,"success");else{u.m=6;try{var F=2<ii(u)?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.Z()+"]",sS(u)}}finally{Hh(u)}}}}function Hh(u,f){if(u.g){aS(u);let g=u.g,v=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||hn(u,"ready");try{g.onreadystatechange=v}catch{}}}function aS(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ii(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),t2(f)}};function cS(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function C2(u){let f={};u=(u.g&&2<=ii(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<u.length;v++){if(j(u[v]))continue;var g=x(u[v]);let k=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();let F=f[k]||[];f[k]=F,F.push(g)}T(f,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zl(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function lS(u){this.Aa=0,this.i=[],this.j=new ql,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zl("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zl("baseRetryDelayMs",5e3,u),this.cb=Zl("retryDelaySeedMs",1e4,u),this.Wa=Zl("forwardChannelMaxRetries",2,u),this.wa=Zl("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new zD(u&&u.concurrentRequestLimit),this.Da=new w2,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=lS.prototype,n.la=8,n.G=1,n.connect=function(u,f,g,v){fn(0),this.W=u,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=vS(this,null,this.W),Wh(this)};function kv(u){if(uS(u),u.G==3){var f=u.U++,g=ri(u.I);if(et(g,"SID",u.K),et(g,"RID",f),et(g,"TYPE","terminate"),Jl(u,g),f=new Hi(u,u.j,f),f.L=2,f.v=qh(ri(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=_S(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Uh(f)}yS(u)}function Gh(u){u.g&&(Mv(u),u.g.cancel(),u.g=null)}function uS(u){Gh(u),u.u&&(a.clearTimeout(u.u),u.u=null),Kh(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Wh(u){if(!HD(u.h)&&!u.s){u.s=!0;var f=u.Ga;Ol||ED(),Fl||(Ol(),Fl=!0),lv.add(f,u),u.B=0}}function T2(u,f){return GD(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Bl(p(u.Ga,u,f),mS(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let k=new Hi(this,this.j,u),F=this.o;if(this.S&&(F?(F=w(F),S(F,this.S)):F=this.S),this.m!==null||this.O||(k.H=F,F=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=hS(this,k,f),g=ri(this.I),et(g,"RID",u),et(g,"CVER",22),this.D&&et(g,"X-HTTP-Session-Id",this.D),Jl(this,g),F&&(this.O?f="headers="+encodeURIComponent(String(rS(F)))+"&"+f:this.m&&xv(g,this.m,F)),Av(this.h,k),this.Ua&&et(g,"TYPE","init"),this.P?(et(g,"$req",f),et(g,"SID","null"),k.T=!0,Cv(k,g,null)):Cv(k,g,f),this.G=2}}else this.G==3&&(u?dS(this,u):this.i.length==0||HD(this.h)||dS(this))};function dS(u,f){var g;f?g=f.l:g=u.U++;let v=ri(u.I);et(v,"SID",u.K),et(v,"RID",g),et(v,"AID",u.T),Jl(u,v),u.m&&u.o&&xv(v,u.m,u.o),g=new Hi(u,u.j,g,u.B+1),u.m===null&&(g.H=u.o),f&&(u.i=f.D.concat(u.i)),f=hS(u,g,1e3),g.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Av(u.h,g),Cv(g,v,f)}function Jl(u,f){u.H&&Q(u.H,function(g,v){et(f,v,g)}),u.l&&QD({},function(g,v){et(f,v,g)})}function hS(u,f,g){g=Math.min(u.i.length,g);var v=u.l?p(u.l.Na,u.l,u):null;e:{var k=u.i;let F=-1;for(;;){let X=["count="+g];F==-1?0<g?(F=k[0].g,X.push("ofs="+F)):F=0:X.push("ofs="+F);let Qe=!0;for(let Ht=0;Ht<g;Ht++){let Be=k[Ht].g,tn=k[Ht].map;if(Be-=F,0>Be)F=Math.max(0,k[Ht].g-100),Qe=!1;else try{b2(tn,X,"req"+Be+"_")}catch{v&&v(tn)}}if(Qe){v=X.join("&");break e}}}return u=u.i.splice(0,g),f.D=u,v}function fS(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Ol||ED(),Fl||(Ol(),Fl=!0),lv.add(f,u),u.v=0}}function Rv(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Bl(p(u.Fa,u),mS(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,pS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Bl(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),Gh(this),pS(this))};function Mv(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function pS(u){u.g=new Hi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ri(u.qa);et(f,"RID","rpc"),et(f,"SID",u.K),et(f,"AID",u.T),et(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(f,"TO",u.ja),et(f,"TYPE","xmlhttp"),Jl(u,f),u.m&&u.o&&xv(f,u.m,u.o),u.L&&(u.g.I=u.L);var g=u.g;u=u.ia,g.L=1,g.v=qh(ri(f)),g.m=null,g.P=!0,$D(g,u)}n.Za=function(){this.C!=null&&(this.C=null,Gh(this),Rv(this),fn(19))};function Kh(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function gS(u,f){var g=null;if(u.g==f){Kh(u),Mv(u),u.g=null;var v=2}else if(Sv(u.h,f))g=f.D,WD(u.h,f),v=1;else return;if(u.G!=0){if(f.o)if(v==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var k=u.B;v=Lh(),hn(v,new LD(v,g)),Wh(u)}else fS(u);else if(k=f.s,k==3||k==0&&0<f.X||!(v==1&&T2(u,f)||v==2&&Rv(u)))switch(g&&0<g.length&&(f=u.h,f.i=f.i.concat(g)),k){case 1:Xs(u,5);break;case 4:Xs(u,10);break;case 3:Xs(u,6);break;default:Xs(u,2)}}}function mS(u,f){let g=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(g*=2),g*f}function Xs(u,f){if(u.j.info("Error code "+f),f==2){var g=p(u.fb,u),v=u.Xa;let k=!v;v=new Js(v||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||$h(v,"https"),qh(v),k?v2(v.toString(),g):_2(v.toString(),g)}else fn(2);u.G=0,u.l&&u.l.sa(f),yS(u),uS(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function yS(u){if(u.G=0,u.ka=[],u.l){let f=KD(u.h);(f.length!=0||u.i.length!=0)&&(E(u.ka,f),E(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function vS(u,f,g){var v=g instanceof Js?ri(g):new Js(g);if(v.g!="")f&&(v.g=f+"."+v.g),Bh(v,v.s);else{var k=a.location;v=k.protocol,f=f?f+"."+k.hostname:k.hostname,k=+k.port;var F=new Js(null);v&&$h(F,v),f&&(F.g=f),k&&Bh(F,k),g&&(F.l=g),v=F}return g=u.D,f=u.ya,g&&f&&et(v,g,f),et(v,"VER",u.la),Jl(u,v),v}function _S(u,f,g){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new dt(new Kl({eb:g})):new dt(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function wS(){}n=wS.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qh(){}Qh.prototype.g=function(u,f){return new Un(u,f)};function Un(u,f){en.call(this),this.g=new lS(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!j(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!j(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new _a(this)}_(Un,en),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){kv(this.g)},Un.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.u&&(g={},g.__data__=vv(u),u=g);f.i.push(new c2(f.Ya++,u)),f.G==3&&Wh(f)},Un.prototype.N=function(){this.g.l=null,delete this.j,kv(this.g),delete this.g,Un.aa.N.call(this)};function bS(u){wv.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}_(bS,wv);function ES(){bv.call(this),this.status=1}_(ES,bv);function _a(u){this.g=u}_(_a,wS),_a.prototype.ua=function(){hn(this.g,"a")},_a.prototype.ta=function(u){hn(this.g,new bS(u))},_a.prototype.sa=function(u){hn(this.g,new ES)},_a.prototype.ra=function(){hn(this.g,"b")},Qh.prototype.createWebChannel=Qh.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,nI=Pi.createWebChannelTransport=function(){return new Qh},tI=Pi.getStatEventTarget=function(){return Lh()},eI=Pi.Event=Ys,Rm=Pi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vh.NO_ERROR=0,Vh.TIMEOUT=8,Vh.HTTP_ERROR=6,zd=Pi.ErrorCode=Vh,VD.COMPLETE="complete",XE=Pi.EventType=VD,ND.EventType=Ul,Ul.OPEN="a",Ul.CLOSE="b",Ul.ERROR="c",Ul.MESSAGE="d",en.prototype.listen=en.prototype.K,Gc=Pi.WebChannel=ND,pW=Pi.FetchXmlHttpFactory=Kl,dt.prototype.listenOnce=dt.prototype.L,dt.prototype.getLastError=dt.prototype.Ka,dt.prototype.getLastErrorCode=dt.prototype.Ba,dt.prototype.getStatus=dt.prototype.Z,dt.prototype.getResponseJson=dt.prototype.Oa,dt.prototype.getResponseText=dt.prototype.oa,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Ha,JE=Pi.XhrIo=dt}).apply(typeof km<"u"?km:typeof self<"u"?self:typeof window<"u"?window:{});var qO="@firebase/firestore";var Pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");var Il="10.14.0";var Os=new Xh("@firebase/firestore");function Zc(){return Os.logLevel}function GF(n){Os.setLogLevel(n)}function H(n,...e){if(Os.logLevel<=xr.DEBUG){let t=e.map(aT);Os.debug(`Firestore (${Il}): ${n}`,...t)}}function vt(n,...e){if(Os.logLevel<=xr.ERROR){let t=e.map(aT);Os.error(`Firestore (${Il}): ${n}`,...t)}}function Ir(n,...e){if(Os.logLevel<=xr.WARN){let t=e.map(aT);Os.warn(`Firestore (${Il}): ${n}`,...t)}}function aT(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function se(n="Unexpected state"){let e=`FIRESTORE (${Il}) INTERNAL ASSERTION FAILED: `+n;throw vt(e),new Error(e)}function ce(n,e){n||se()}function WF(n,e){n||se()}function ee(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends RS{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ut=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var $m=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},cI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Pt.UNAUTHENTICATED))}shutdown(){}},lI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},uI=class{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ce(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Ut;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ut,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ut)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new $m(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new Pt(e)}},dI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},hI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ce(this.o===void 0);let r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ce(typeof t.token=="string"),this.R=t.token,new fI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function yW(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Bm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=yW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ve(n,e){return n<e?-1:n>e?1:0}function ol(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function KF(n){return n+"\0"}var lt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var fe=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new lt(0,0))}static max(){return new n(new lt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var qm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&se(),r===void 0?r=e.length-t:r>e.length-t&&se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ve=class n extends qm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},vW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,_t=class n extends qm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return vW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ve.fromString(e))}static fromName(e){return new n(Ve.fromString(e).popFirst(5))}static empty(){return new n(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ve.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ve(e.slice()))}};var al=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function gI(n){return n.fields.find(e=>e.kind===2)}function Ho(n){return n.fields.filter(e=>e.kind!==2)}al.UNKNOWN_ID=-1;var rl=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var nh=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,ar.min())}};function QF(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=fe.fromTimestamp(r===1e9?new lt(t+1,0):new lt(t,r));return new ar(i,te.empty(),e)}function YF(n){return new ar(n.readTime,n.key,-1)}var ar=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(fe.min(),te.empty(),-1)}static max(){return new n(fe.max(),te.empty(),-1)}};function cT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:ve(n.largestBatchId,e.largestBatchId))}var ZF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",zm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Hs(n){return y(this,null,function*(){if(n.code!==V.FAILED_PRECONDITION||n.message!==ZF)throw n;H("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var Hm=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Ut,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Zo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=lT(r.target.error);this.V.reject(new Zo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new Zo(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(H("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new yI(t)}},Fs=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Xl())===12.2&&vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return H("SimpleDb","Removing database:",e),Go(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Jh())return!1;if(n.v())return!0;let e=Xl(),t=n.S(e),r=0<t&&t<10,i=JF(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return y(this,null,function*(){return this.db||(H("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new Zo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new z(V.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new z(V.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Zo(e,o))},i.onupgradeneeded=s=>{H("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{H("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return y(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=Hm.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),O.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(H("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function JF(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var mI=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Go(this.B.delete())}},Zo=class extends z{constructor(e,t){super(V.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Gs(n){return n.name==="IndexedDbTransactionError"}var yI=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(H("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(H("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Go(r)}add(e){return H("SimpleDb","ADD",this.store.name,e,e),Go(this.store.add(e))}get(e){return Go(this.store.get(e)).next(t=>(t===void 0&&(t=null),H("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return H("SimpleDb","DELETE",this.store.name,e),Go(this.store.delete(e))}count(){return H("SimpleDb","COUNT",this.store.name),Go(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new O((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new O((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){H("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new O((r,i)=>{t.onerror=s=>{let o=lT(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new O((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new mI(a),l=t(a.primaryKey,a.value,c);if(l instanceof O){let d=l.catch(h=>(c.done(),O.reject(h)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>O.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Go(n){return new O((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=lT(r.target.error);t(i)}})}var zO=!1;function lT(n){let e=Fs.S(Xl());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return zO||(zO=!0,setTimeout(()=>{throw r},0)),r}}return n}var vI=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){H("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>y(this,null,function*(){this.task=null;try{H("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Gs(t)?H("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Hs(t)}yield this.X(6e4)}))}},_I=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return y(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return O.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return H("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(H("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=YF(s);cT(o,r)>0&&(r=o)}),new ar(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var Kn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ih(n){return n==null}function rh(n){return n===0&&1/n==-1/0}function XF(n){return typeof n=="number"&&Number.isInteger(n)&&!rh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function bn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HO(e)),e=_W(n.get(t),e);return HO(e)}function _W(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function HO(n){return n+""}function Gr(n){let e=n.length;if(ce(e>=2),e===2)return ce(n.charAt(0)===""&&n.charAt(1)===""),Ve.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&se(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:se()}s=o+2}return new Ve(r)}var GO=["userId","batchId"];function Fm(n,e){return[n,bn(e)]}function eL(n,e,t){return[n,bn(e),t]}var wW={},bW=["prefixPath","collectionGroup","readTime","documentId"],EW=["prefixPath","collectionGroup","documentId"],IW=["collectionGroup","readTime","prefixPath","documentId"],CW=["canonicalId","targetId"],TW=["targetId","path"],DW=["path","targetId"],SW=["collectionId","parent"],AW=["indexId","uid"],xW=["uid","sequenceNumber"],kW=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],RW=["indexId","uid","orderedDocumentKey"],MW=["userId","collectionPath","documentId"],NW=["userId","collectionPath","largestBatchId"],PW=["userId","collectionGroup","largestBatchId"],tL=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],OW=[...tL,"documentOverlays"],nL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],rL=nL,uT=[...rL,"indexConfiguration","indexState","indexEntries"],FW=uT,LW=[...uT,"globals"];var ih=class extends zm{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function $t(n,e){let t=ee(n);return Fs.F(t._e,e)}function WO(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function la(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var it=class n{constructor(e,t){this.comparator=e,this.root=t||Kr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nl(this.root,e,this.comparator,!0)}},nl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Kr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();let e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}};Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1;Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Kr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class n{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gm(this.data.getIterator())}getIteratorFrom(e){return new Gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Gm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Wc(n){return n.hasNext()?n.getNext():void 0}var Qn=class n{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ze(_t.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ol(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Wm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function sL(){return typeof atob<"u"}var bt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Wm("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};bt.EMPTY_BYTE_STRING=new bt("");var VW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Li(n){if(ce(!!n),typeof n=="string"){let e=0,t=VW.exec(n);if(ce(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(n.seconds),nanos:ot(n.nanos)}}function ot(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ls(n){return typeof n=="string"?bt.fromBase64String(n):bt.fromUint8Array(n)}function Vy(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function dT(n){let e=n.mapValue.fields.__previous_value__;return Vy(e)?dT(e):e}function sh(n){let e=Li(n.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}var wI=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Vs=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ns={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lm={nullValue:"NULL_VALUE"};function Jo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vy(n)?4:oL(n)?9007199254740991:jy(n)?10:11:se()}function Zr(n,e){if(n===e)return!0;let t=Jo(n);if(t!==Jo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sh(n).isEqual(sh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Li(i.timestampValue),a=Li(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ls(i.bytesValue).isEqual(Ls(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ot(i.doubleValue),a=ot(s.doubleValue);return o===a?rh(o)===rh(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return ol(n.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(WO(o)!==WO(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Zr(o[c],a[c])))return!1;return!0}(n,e);default:return se()}}function oh(n,e){return(n.values||[]).find(t=>Zr(t,e))!==void 0}function js(n,e){if(n===e)return 0;let t=Jo(n),r=Jo(e);if(t!==r)return ve(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ve(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ot(s.integerValue||s.doubleValue),c=ot(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return KO(n.timestampValue,e.timestampValue);case 4:return KO(sh(n),sh(e));case 5:return ve(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Ls(s),c=Ls(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ve(a[l],c[l]);if(d!==0)return d}return ve(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ve(ot(s.latitude),ot(o.latitude));return a!==0?a:ve(ot(s.longitude),ot(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return QO(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let h=s.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,b=ve(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=_?.values)===null||d===void 0?void 0:d.length)||0);return b!==0?b:QO(m,_)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ns.mapValue&&o===Ns.mapValue)return 0;if(s===Ns.mapValue)return 1;if(o===Ns.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let p=ve(c[h],d[h]);if(p!==0)return p;let m=js(a[c[h]],l[d[h]]);if(m!==0)return m}return ve(c.length,d.length)}(n.mapValue,e.mapValue);default:throw se()}}function KO(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ve(n,e);let t=Li(n),r=Li(e),i=ve(t.seconds,r.seconds);return i!==0?i:ve(t.nanos,r.nanos)}function QO(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=js(t[i],r[i]);if(s)return s}return ve(t.length,r.length)}function cl(n){return bI(n)}function bI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Li(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ls(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=bI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${bI(t.fields[o])}`;return i+"}"}(n.mapValue):se()}function Xo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function EI(n){return!!n&&"integerValue"in n}function ah(n){return!!n&&"arrayValue"in n}function YO(n){return!!n&&"nullValue"in n}function ZO(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vm(n){return!!n&&"mapValue"in n}function jy(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Zd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return la(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Zd(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Zd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var aL={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function jW(n){return"nullValue"in n?Lm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Xo(Vs.empty(),te.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?jy(n)?aL:{mapValue:{}}:se()}function UW(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Xo(Vs.empty(),te.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?aL:"mapValue"in n?jy(n)?{mapValue:{}}:Ns:se()}function JO(n,e){let t=js(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function XO(n,e){let t=js(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var dn=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Vm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zd(t)}setAll(e){let t=_t.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Zd(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Vm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Vm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){la(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Zd(this.value))}};function cL(n){let e=[];return la(n.fields,(t,r)=>{let i=new _t([t]);if(Vm(r)){let s=cL(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Qn(e)}var Ot=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,fe.min(),fe.min(),fe.min(),dn.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,fe.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,fe.min(),fe.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,fe.min(),fe.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Jr=class{constructor(e,t){this.position=e,this.inclusive=t}};function eF(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),t.key):r=js(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tF(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zr(n.position[t],e.position[t]))return!1;return!0}var ea=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $W(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Km=class{},Ne=class n extends Km{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new TI(e,t,r):t==="array-contains"?new AI(e,r):t==="in"?new Qm(e,r):t==="not-in"?new xI(e,r):t==="array-contains-any"?new kI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new DI(e,r):new SI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(js(t,this.value)):t!==null&&Jo(this.value)===Jo(t)&&this.matchesComparison(js(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},We=class n extends Km{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ll(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ll(n){return n.op==="and"}function II(n){return n.op==="or"}function hT(n){return lL(n)&&ll(n)}function lL(n){for(let e of n.filters)if(e instanceof We)return!1;return!0}function CI(n){if(n instanceof Ne)return n.field.canonicalString()+n.op.toString()+cl(n.value);if(hT(n))return n.filters.map(e=>CI(e)).join(",");{let e=n.filters.map(t=>CI(t)).join(",");return`${n.op}(${e})`}}function uL(n,e){return n instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&Zr(r.value,i.value)}(n,e):n instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&uL(o,i.filters[a]),!0):!1}(n,e):void se()}function dL(n,e){let t=n.filters.concat(e);return We.create(t,n.op)}function hL(n){return n instanceof Ne?function(t){return`${t.field.canonicalString()} ${t.op} ${cl(t.value)}`}(n):n instanceof We?function(t){return t.op.toString()+" {"+t.getFilters().map(hL).join(" ,")+"}"}(n):"Filter"}var TI=class extends Ne{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},DI=class extends Ne{constructor(e,t){super(e,"in",t),this.keys=fL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},SI=class extends Ne{constructor(e,t){super(e,"not-in",t),this.keys=fL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function fL(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}var AI=class extends Ne{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ah(t)&&oh(t.arrayValue,this.value)}},Qm=class extends Ne{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&oh(this.value.arrayValue,t)}},xI=class extends Ne{constructor(e,t){super(e,"not-in",t)}matches(e){if(oh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!oh(this.value.arrayValue,t)}},kI=class extends Ne{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ah(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oh(this.value.arrayValue,r))}};var RI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function MI(n,e=null,t=[],r=[],i=null,s=null,o=null){return new RI(n,e,t,r,i,s,o)}function ta(n){let e=ee(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>CI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ih(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>cl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>cl(r)).join(",")),e.ue=t}return e.ue}function Ch(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$W(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tF(n.startAt,e.startAt)&&tF(n.endAt,e.endAt)}function Ym(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Zm(n,e){return n.filters.filter(t=>t instanceof Ne&&t.field.isEqual(e))}function nF(n,e,t){let r=Lm,i=!0;for(let s of Zm(n,e)){let o=Lm,a=!0;switch(s.op){case"<":case"<=":o=jW(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Lm}JO({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];JO({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function rF(n,e,t){let r=Ns,i=!0;for(let s of Zm(n,e)){let o=Ns,a=!0;switch(s.op){case">=":case">":o=UW(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Ns}XO({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];XO({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Cr=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function pL(n,e,t,r,i,s,o,a){return new Cr(n,e,t,r,i,s,o,a)}function Cl(n){return new Cr(n)}function iF(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function fT(n){return n.collectionGroup!==null}function il(n){let e=ee(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(_t.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ea(s,r))}),t.has(_t.keyField().canonicalString())||e.ce.push(new ea(_t.keyField(),r))}return e.ce}function En(n){let e=ee(n);return e.le||(e.le=BW(e,il(n))),e.le}function BW(n,e){if(n.limitType==="F")return MI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ea(i.field,s)});let t=n.endAt?new Jr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Jr(n.startAt.position,n.startAt.inclusive):null;return MI(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function NI(n,e){let t=n.filters.concat([e]);return new Cr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Jm(n,e,t){return new Cr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Th(n,e){return Ch(En(n),En(e))&&n.limitType===e.limitType}function gL(n){return`${ta(En(n))}|lt:${n.limitType}`}function Jc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>hL(i)).join(", ")}]`),Ih(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>cl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>cl(i)).join(",")),`Target(${r})`}(En(n))}; limitType=${n.limitType})`}function Dh(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of il(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=eF(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,il(r),i)||r.endAt&&!function(o,a,c){let l=eF(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,il(r),i))}(n,e)}function mL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yL(n){return(e,t)=>{let r=!1;for(let i of il(n)){let s=qW(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qW(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?js(c,l):se()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}var Xr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){la(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return iL(this.inner)}size(){return this.innerSize}};var zW=new it(te.comparator);function Vn(){return zW}var vL=new it(te.comparator);function Qd(...n){let e=vL;for(let t of n)e=e.insert(t.key,t);return e}function _L(n){let e=vL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wr(){return Jd()}function wL(){return Jd()}function Jd(){return new Xr(n=>n.toString(),(n,e)=>n.isEqual(e))}var HW=new it(te.comparator),GW=new Ze(te.comparator);function Ie(...n){let e=GW;for(let t of n)e=e.add(t);return e}var WW=new Ze(ve);function pT(){return WW}function gT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rh(e)?"-0":e}}function bL(n){return{integerValue:""+n}}function EL(n,e){return XF(e)?bL(e):gT(n,e)}var ul=class{constructor(){this._=void 0}};function KW(n,e,t){return n instanceof Us?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Vy(s)&&(s=dT(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Vi?CL(n,e):n instanceof ji?TL(n,e):function(i,s){let o=IL(i,s),a=sF(o)+sF(i.Pe);return EI(o)&&EI(i.Pe)?bL(a):gT(i.serializer,a)}(n,e)}function QW(n,e,t){return n instanceof Vi?CL(n,e):n instanceof ji?TL(n,e):t}function IL(n,e){return n instanceof $s?function(r){return EI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Us=class extends ul{},Vi=class extends ul{constructor(e){super(),this.elements=e}};function CL(n,e){let t=DL(e);for(let r of n.elements)t.some(i=>Zr(i,r))||t.push(r);return{arrayValue:{values:t}}}var ji=class extends ul{constructor(e){super(),this.elements=e}};function TL(n,e){let t=DL(e);for(let r of n.elements)t=t.filter(i=>!Zr(i,r));return{arrayValue:{values:t}}}var $s=class extends ul{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function sF(n){return ot(n.integerValue||n.doubleValue)}function DL(n){return ah(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var na=class{constructor(e,t){this.field=e,this.transform=t}};function YW(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Vi&&i instanceof Vi||r instanceof ji&&i instanceof ji?ol(r.elements,i.elements,Zr):r instanceof $s&&i instanceof $s?Zr(r.Pe,i.Pe):r instanceof Us&&i instanceof Us}(n.transform,e.transform)}var PI=class{constructor(e,t){this.version=e,this.transformResults=t}},mt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var dl=class{};function SL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qs(n.key,mt.none()):new Bs(n.key,n.data,mt.none());{let t=n.data,r=dn.empty(),i=new Ze(_t.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Tr(n.key,r,new Qn(i.toArray()),mt.none())}}function ZW(n,e,t){n instanceof Bs?function(i,s,o){let a=i.value.clone(),c=aF(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Tr?function(i,s,o){if(!jm(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=aF(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(AL(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Xd(n,e,t,r){return n instanceof Bs?function(s,o,a,c){if(!jm(s.precondition,o))return a;let l=s.value.clone(),d=cF(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Tr?function(s,o,a,c){if(!jm(s.precondition,o))return a;let l=cF(s.fieldTransforms,c,o),d=o.data;return d.setAll(AL(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(s,o,a){return jm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function JW(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=IL(r.transform,i||null);s!=null&&(t===null&&(t=dn.empty()),t.set(r.field,s))}return t||null}function oF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ol(r,i,(s,o)=>YW(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Bs=class extends dl{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Tr=class extends dl{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function AL(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function aF(n,e,t){let r=new Map;ce(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,QW(o,a,t[i]))}return r}function cF(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,KW(s,o,e))}return r}var qs=class extends dl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ch=class extends dl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&ZW(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Xd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Xd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=wL();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=SL(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(fe.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&ol(this.mutations,e.mutations,(t,r)=>oF(t,r))&&ol(this.baseMutations,e.baseMutations,(t,r)=>oF(t,r))}},OI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ce(e.mutations.length===r.length);let i=function(){return HW}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var uh=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var FI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Mt,Le;function xL(n){switch(n){default:return se();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function kL(n){if(n===void 0)return vt("GRPC error has no .code"),V.UNKNOWN;switch(n){case Mt.OK:return V.OK;case Mt.CANCELLED:return V.CANCELLED;case Mt.UNKNOWN:return V.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return V.INTERNAL;case Mt.UNAVAILABLE:return V.UNAVAILABLE;case Mt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Mt.NOT_FOUND:return V.NOT_FOUND;case Mt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Mt.ABORTED:return V.ABORTED;case Mt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Mt.DATA_LOSS:return V.DATA_LOSS;default:return se()}}(Le=Mt||(Mt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";var lF=null;function RL(){return new TextEncoder}var XW=new As([4294967295,4294967295],0);function uF(n){let e=RL().encode(n),t=new ZE;return t.update(e),new Uint8Array(t.digest())}function dF(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new As([t,r],0),new As([i,s],0)]}var LI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yo(`Invalid padding: ${t}`);if(r<0)throw new Yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=As.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(As.fromNumber(r)));return i.compare(XW)===1&&(i=new As([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=uF(e),[r,i]=dF(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=uF(e),[r,i]=dF(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Yo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var dh=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,hh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(fe.min(),i,new it(ve),Vn(),Ie())}},hh=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ie(),Ie(),Ie())}};var sl=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Xm=class{constructor(e,t){this.targetId=e,this.me=t}},ey=class{constructor(e,t,r=bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},ty=class{constructor(){this.fe=0,this.ge=fF(),this.pe=bt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),t=Ie(),r=Ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:se()}}),new hh(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=fF()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},VI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vn(),this.qe=hF(),this.Qe=new it(ve)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Ym(s))if(r===0){let o=new te(s.path);this.Ue(t,o,Ot.newNoDocument(o,fe.min()))}else ce(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}lF?.et(function(d,h,p,m,_){var b,E,R,j,U,B;let K={localCacheCount:d,existenceFilterCount:h.count,databaseId:p.database,projectId:p.projectId},Q=h.unchangedNames;return Q&&(K.bloomFilter={applied:_===0,hashCount:(b=Q?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(j=(R=(E=Q?.bits)===null||E===void 0?void 0:E.bitmap)===null||R===void 0?void 0:R.length)!==null&&j!==void 0?j:0,padding:(B=(U=Q?.bits)===null||U===void 0?void 0:U.padding)!==null&&B!==void 0?B:0,mightContain:T=>{var w;return(w=m?.mightContain(T))!==null&&w!==void 0&&w}}),K}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ls(r).toUint8Array()}catch(c){if(c instanceof Wm)return Ir("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new LI(o,i,s)}catch(c){return Ir(c instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Ym(a.target)){let c=new te(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ot.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new dh(e,t,this.Qe,this.ke,r);return this.ke=Vn(),this.qe=hF(),this.Qe=new it(ve),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new ty,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ze(ve),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||H("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ty),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function hF(){return new it(te.comparator)}function fF(){return new it(te.comparator)}var eK={asc:"ASCENDING",desc:"DESCENDING"},tK={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nK={and:"AND",or:"OR"},jI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function UI(n,e){return n.useProto3Json||Ih(e)?e:{value:e}}function hl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ML(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rK(n,e){return hl(n,e.toTimestamp())}function wt(n){return ce(!!n),fe.fromTimestamp(function(t){let r=Li(t);return new lt(r.seconds,r.nanos)}(n))}function mT(n,e){return $I(n,e).canonicalString()}function $I(n,e){let t=function(i){return new Ve(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function NL(n){let e=Ve.fromString(n);return ce(qL(e)),e}function fh(n,e){return mT(n.databaseId,e.path)}function Qr(n,e){let t=NL(e);if(t.get(1)!==n.databaseId.projectId)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(FL(t))}function PL(n,e){return mT(n.databaseId,e)}function OL(n){let e=NL(n);return e.length===4?Ve.emptyPath():FL(e)}function BI(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function FL(n){return ce(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function pF(n,e,t){return{name:fh(n,e),fields:t.value.mapValue.fields}}function LL(n,e,t){let r=Qr(n,e.name),i=wt(e.updateTime),s=e.createTime?wt(e.createTime):fe.min(),o=new dn({mapValue:{fields:e.fields}}),a=Ot.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function iK(n,e){return"found"in e?function(r,i){ce(!!i.found),i.found.name,i.found.updateTime;let s=Qr(r,i.found.name),o=wt(i.found.updateTime),a=i.found.createTime?wt(i.found.createTime):fe.min(),c=new dn({mapValue:{fields:i.found.fields}});return Ot.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){ce(!!i.missing),ce(!!i.readTime);let s=Qr(r,i.missing),o=wt(i.readTime);return Ot.newNoDocument(s,o)}(n,e):se()}function sK(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(ce(d===void 0||typeof d=="string"),bt.fromBase64String(d||"")):(ce(d===void 0||d instanceof Buffer||d instanceof Uint8Array),bt.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?V.UNKNOWN:kL(l.code);return new z(d,l.message||"")}(o);t=new ey(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Qr(n,r.document.name),s=wt(r.document.updateTime),o=r.document.createTime?wt(r.document.createTime):fe.min(),a=new dn({mapValue:{fields:r.document.fields}}),c=Ot.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new sl(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Qr(n,r.document),s=r.readTime?wt(r.readTime):fe.min(),o=Ot.newNoDocument(i,s),a=r.removedTargetIds||[];t=new sl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Qr(n,r.document),s=r.removedTargetIds||[];t=new sl([],s,i,null)}else{if(!("filter"in e))return se();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new FI(i,s),a=r.targetId;t=new Xm(a,o)}}return t}function ph(n,e){let t;if(e instanceof Bs)t={update:pF(n,e.key,e.value)};else if(e instanceof qs)t={delete:fh(n,e.key)};else if(e instanceof Tr)t={update:pF(n,e.key,e.data),updateMask:dK(e.fieldMask)};else{if(!(e instanceof ch))return se();t={verify:fh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Us)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Vi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $s)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw se()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:rK(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:se()}(n,e.precondition)),t}function qI(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?mt.updateTime(wt(s.updateTime)):s.exists!==void 0?mt.exists(s.exists):mt.none()}(e.currentDocument):mt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)ce(a.setToServerValue==="REQUEST_TIME"),c=new Us;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Vi(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new ji(d)}else"increment"in a?c=new $s(o,a.increment):se();let l=_t.fromServerFormat(a.fieldPath);return new na(l,c)}(n,i)):[];if(e.update){e.update.name;let i=Qr(n,e.update.name),s=new dn({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new Qn(l.map(d=>_t.fromServerFormat(d)))}(e.updateMask);return new Tr(i,s,o,t,r)}return new Bs(i,s,t,r)}if(e.delete){let i=Qr(n,e.delete);return new qs(i,t)}if(e.verify){let i=Qr(n,e.verify);return new ch(i,t)}return se()}function oK(n,e){return n&&n.length>0?(ce(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?wt(i.updateTime):wt(s);return o.isEqual(fe.min())&&(o=wt(s)),new PI(o,i.transformResults||[])}(t,e))):[]}function VL(n,e){return{documents:[PL(n,e.path)]}}function jL(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=PL(n,i);let s=function(l){if(l.length!==0)return BL(We.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(p){return{field:Xc(p.field),direction:cK(p.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=UI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function UL(n){let e=OL(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ce(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(h){let p=$L(h);return p instanceof We&&hT(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(h){return h.map(p=>function(_){return new ea(el(_.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,Ih(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(h){let p=!!h.before,m=h.values||[];return new Jr(m,p)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let p=!h.before,m=h.values||[];return new Jr(m,p)}(t.endAt)),pL(e,i,o,s,a,"F",c,l)}function aK(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function $L(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=el(t.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=el(t.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=el(t.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=el(t.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(n):n.fieldFilter!==void 0?function(t){return Ne.create(el(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return We.create(t.compositeFilter.filters.map(r=>$L(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return se()}}(t.compositeFilter.op))}(n):se()}function cK(n){return eK[n]}function lK(n){return tK[n]}function uK(n){return nK[n]}function Xc(n){return{fieldPath:n.canonicalString()}}function el(n){return _t.fromServerFormat(n.fieldPath)}function BL(n){return n instanceof Ne?function(t){if(t.op==="=="){if(ZO(t.value))return{unaryFilter:{field:Xc(t.field),op:"IS_NAN"}};if(YO(t.value))return{unaryFilter:{field:Xc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ZO(t.value))return{unaryFilter:{field:Xc(t.field),op:"IS_NOT_NAN"}};if(YO(t.value))return{unaryFilter:{field:Xc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xc(t.field),op:lK(t.op),value:t.value}}}(n):n instanceof We?function(t){let r=t.getFilters().map(i=>BL(i));return r.length===1?r[0]:{compositeFilter:{op:uK(t.op),filters:r}}}(n):se()}function dK(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qL(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var fl=class n{constructor(e,t,r,i,s=fe.min(),o=fe.min(),a=bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ny=class{constructor(e){this.ct=e}};function hK(n,e){let t;if(e.document)t=LL(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=te.fromSegments(e.noDocument.path),i=ia(e.noDocument.readTime);t=Ot.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return se();{let r=te.fromSegments(e.unknownDocument.path),i=ia(e.unknownDocument.version);t=Ot.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new lt(i[0],i[1]);return fe.fromTimestamp(s)}(e.readTime)),t}function gF(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:ry(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:fh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:hl(s,o.version.toTimestamp()),createTime:hl(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ra(e.version)};else{if(!e.isUnknownDocument())return se();r.unknownDocument={path:t.path.toArray(),version:ra(e.version)}}return r}function ry(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ra(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ia(n){let e=new lt(n.seconds,n.nanoseconds);return fe.fromTimestamp(e)}function Wo(n,e){let t=(e.baseMutations||[]).map(s=>qI(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>qI(n.ct,s)),i=lt.fromMillis(e.localWriteTimeMs);return new lh(e.batchId,i,t,r)}function Yd(n){let e=ia(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ia(n.lastLimboFreeSnapshotVersion):fe.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return ce(s.documents.length===1),En(Cl(OL(s.documents[0])))}(n.query):function(s){return En(UL(s))}(n.query),new fl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,bt.fromBase64String(n.resumeToken))}function zL(n,e){let t=ra(e.snapshotVersion),r=ra(e.lastLimboFreeSnapshotVersion),i;i=Ym(e.target)?VL(n.ct,e.target):jL(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ta(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function yT(n){let e=UL({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Jm(e,e.limit,"L"):e}function rI(n,e){return new uh(e.largestBatchId,qI(n.ct,e.overlayMutation))}function mF(n,e){let t=e.path.lastSegment();return[n,bn(e.path.popLast()),t]}function yF(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:ra(r.readTime),documentKey:bn(r.documentKey.path),largestBatchId:r.largestBatchId}}var zI=class{getBundleMetadata(e,t){return vF(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ia(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return vF(e).put(function(i){return{bundleId:i.id,createTime:ra(wt(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return _F(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:yT(s.bundledQuery),readTime:ia(s.readTime)}}(r)})}saveNamedQuery(e,t){return _F(e).put(function(i){return{name:i.name,readTime:ra(wt(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function vF(n){return $t(n,"bundles")}function _F(n){return $t(n,"namedQueries")}var iy=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return Hd(e).get(mF(this.userId,t)).next(r=>r?rI(this.serializer,r):null)}getOverlays(e,t){let r=Wr();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new uh(t,o);i.push(this.ht(e,a))}),O.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(bn(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(Hd(e).j("collectionPathOverlayIndex",a))}),O.waitFor(s)}getOverlaysForCollection(e,t,r){let i=Wr(),s=bn(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Hd(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=rI(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=Wr(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Hd(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let h=rI(this.serializer,l);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return Hd(e).put(function(i,s,o){let[a,c,l]=mF(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:ph(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function Hd(n){return $t(n,"documentOverlays")}var HI=class{Pt(e){return $t(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?bt.fromUint8Array(r):bt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Oi=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ot(e.integerValue));else if("doubleValue"in e){let r=ot(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),rh(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Li(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ls(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?oL(e)?this.dt(t,Number.MAX_SAFE_INTEGER):jy(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):se()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ot(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),te.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Oi.vt=new Oi;function fK(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function wF(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=fK(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var GI=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=wF(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=wF(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},WI=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},KI=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},Ko=class{constructor(){this.jt=new GI,this.Ht=new WI(this.jt),this.Jt=new KI(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var Qo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function xs(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=bF(n.arrayValue,e.arrayValue),t!==0?t:(t=bF(n.directionalValue,e.directionalValue),t!==0?t:te.comparator(n.documentKey,e.documentKey)))}function bF(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var sy=class{constructor(e){this.Xt=new Ze((t,r)=>_t.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(ce(e.collectionGroup===this.collectionId),this.nn)return!1;let t=gI(e);if(t!==void 0&&!this.sn(t))return!1;let r=Ho(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ze(_t.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new rl(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new rl(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new rl(r.field,r.dir==="asc"?0:1)));return new al(al.UNKNOWN_ID,this.collectionId,t,nh.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function HL(n){var e,t;if(ce(n instanceof Ne||n instanceof We),n instanceof Ne){if(n instanceof Qm){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ne.create(n.field,"==",s)))||[];return We.create(i,"or")}return n}let r=n.filters.map(i=>HL(i));return We.create(r,n.op)}function pK(n){if(n.getFilters().length===0)return[];let e=ZI(HL(n));return ce(GL(e)),QI(e)||YI(e)?[e]:e.getFilters()}function QI(n){return n instanceof Ne}function YI(n){return n instanceof We&&hT(n)}function GL(n){return QI(n)||YI(n)||function(t){if(t instanceof We&&II(t)){for(let r of t.getFilters())if(!QI(r)&&!YI(r))return!1;return!0}return!1}(n)}function ZI(n){if(ce(n instanceof Ne||n instanceof We),n instanceof Ne)return n;if(n.filters.length===1)return ZI(n.filters[0]);let e=n.filters.map(r=>ZI(r)),t=We.create(e,n.op);return t=oy(t),GL(t)?t:(ce(t instanceof We),ce(ll(t)),ce(t.filters.length>1),t.filters.reduce((r,i)=>vT(r,i)))}function vT(n,e){let t;return ce(n instanceof Ne||n instanceof We),ce(e instanceof Ne||e instanceof We),t=n instanceof Ne?e instanceof Ne?function(i,s){return We.create([i,s],"and")}(n,e):EF(n,e):e instanceof Ne?EF(e,n):function(i,s){if(ce(i.filters.length>0&&s.filters.length>0),ll(i)&&ll(s))return dL(i,s.getFilters());let o=II(i)?i:s,a=II(i)?s:i,c=o.filters.map(l=>vT(l,a));return We.create(c,"or")}(n,e),oy(t)}function EF(n,e){if(ll(e))return dL(e,n.getFilters());{let t=e.filters.map(r=>vT(n,r));return We.create(t,"or")}}function oy(n){if(ce(n instanceof Ne||n instanceof We),n instanceof Ne)return n;let e=n.getFilters();if(e.length===1)return oy(e[0]);if(lL(n))return n;let t=e.map(i=>oy(i)),r=[];return t.forEach(i=>{i instanceof Ne?r.push(i):i instanceof We&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:We.create(r,n.op)}var JI=class{constructor(){this.un=new gh}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(ar.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},gh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ze(Ve.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Ve.comparator)).toArray()}};var Mm=new Uint8Array(0),XI=class{constructor(e,t){this.databaseId=t,this.cn=new gh,this.ln=new Xr(r=>ta(r),(r,i)=>Ch(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:bn(i)};return IF(e).put(s)}return O.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[KF(t),""],!1,!0);return IF(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(Gr(o.parent))}return r})}addFieldIndex(e,t){let r=Gd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=Qc(e);return s.next(a=>{o.put(yF(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=Gd(e),i=Qc(e),s=Kc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=Gd(e),r=Kc(e),i=Qc(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return O.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new sy(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Kc(e),i=!0,s=new Map;return O.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=Ie(),a=[];return O.forEach(s,(c,l)=>{H("IndexedDbIndexManager",`Using index ${function(U){return`id=${U.indexId}|cg=${U.collectionGroup}|f=${U.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`}(c)} to execute ${ta(t)}`);let d=function(U,B){let K=gI(B);if(K===void 0)return null;for(let Q of Zm(U,K.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(l,c),h=function(U,B){let K=new Map;for(let Q of Ho(B))for(let T of Zm(U,Q.fieldPath))switch(T.op){case"==":case"in":K.set(Q.fieldPath.canonicalString(),T.value);break;case"not-in":case"!=":return K.set(Q.fieldPath.canonicalString(),T.value),Array.from(K.values())}return null}(l,c),p=function(U,B){let K=[],Q=!0;for(let T of Ho(B)){let w=T.kind===0?nF(U,T.fieldPath,U.startAt):rF(U,T.fieldPath,U.startAt);K.push(w.value),Q&&(Q=w.inclusive)}return new Jr(K,Q)}(l,c),m=function(U,B){let K=[],Q=!0;for(let T of Ho(B)){let w=T.kind===0?rF(U,T.fieldPath,U.endAt):nF(U,T.fieldPath,U.endAt);K.push(w.value),Q&&(Q=w.inclusive)}return new Jr(K,Q)}(l,c),_=this.In(c,l,p),b=this.In(c,l,m),E=this.Tn(c,l,h),R=this.En(c.indexId,d,_,p.inclusive,b,m.inclusive,E);return O.forEach(R,j=>r.G(j,t.limit).next(U=>{U.forEach(B=>{let K=te.fromSegments(B.documentKey);o.has(K)||(o=o.add(K),a.push(K))})}))}).next(()=>a)}return O.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=pK(We.create(e.filters,"and")).map(r=>MI(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),d=[];for(let h=0;h<c;++h){let p=t?this.dn(t[h/l]):Mm,m=this.An(e,p,r[h%l],i),_=this.Rn(e,p,s[h%l],o),b=a.map(E=>this.An(e,p,E,!0));d.push(...this.createRange(m,_,b))}return d}An(e,t,r,i){let s=new Qo(e,te.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new Qo(e,te.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new sy(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return O.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ze(_t.comparator),d=!1;for(let h of c.filters)for(let p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?d=!0:l=l.add(p.field));for(let h of c.orderBy)h.field.isKeyField()||(l=l.add(h.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new Ko;for(let i of Ho(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);Oi.vt.It(s,o)}return r.zt()}dn(e){let t=new Ko;return Oi.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new Ko;return Oi.vt.It(Xo(this.databaseId,t),r.Yt(function(s){let o=Ho(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Ko);let s=0;for(let o of Ho(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&ah(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);Oi.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new Ko;c.seed(a.zt()),Oi.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Ne&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=Gd(e),i=Qc(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return O.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,h){let p=h?new nh(h.sequenceNumber,new ar(ia(h.readTime),new te(Gr(h.documentKey)),h.largestBatchId)):nh.empty(),m=d.fields.map(([_,b])=>new rl(_t.fromServerFormat(_),b));return new al(d.indexId,d.collectionGroup,m,p)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ve(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=Gd(e),s=Qc(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>O.forEach(a,c=>s.put(yF(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return O.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?O.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),O.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(s,c);return l.isEqual(d)?O.resolve():this.bn(e,s,c,l,d)}))))})}Dn(e,t,r,i){return Kc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Kc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Kc(e),s=new Ze(xs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new Qo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Ze(xs),i=this.Vn(t,e);if(i==null)return r;let s=gI(t);if(s!=null){let o=e.data.field(s.fieldPath);if(ah(o))for(let a of o.arrayValue.values||[])r=r.add(new Qo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new Qo(t.indexId,e.key,Mm,i));return r}bn(e,t,r,i,s){H("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,d,h,p){let m=c.getIterator(),_=l.getIterator(),b=Wc(m),E=Wc(_);for(;b||E;){let R=!1,j=!1;if(b&&E){let U=d(b,E);U<0?j=!0:U>0&&(R=!0)}else b!=null?j=!0:R=!0;R?(h(E),E=Wc(_)):j?(p(b),b=Wc(m)):(b=Wc(m),E=Wc(_))}}(i,s,xs,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),O.waitFor(o)}yn(e){let t=1;return Qc(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>xs(o,a)).filter((o,a,c)=>!a||xs(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=xs(o,e),c=xs(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Mm,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Mm,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return xs(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(CF)}getMinOffset(e,t){return O.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||se())).next(CF)}};function IF(n){return $t(n,"collectionParents")}function Kc(n){return $t(n,"indexEntries")}function Gd(n){return $t(n,"indexConfiguration")}function Qc(n){return $t(n,"indexState")}function CF(n){ce(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;cT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ar(e.readTime,e.documentKey,t)}var TF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},or=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function WL(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(d,h,p)=>(a++,p.delete()));s.push(c.next(()=>{ce(a===1)}));let l=[];for(let d of t.mutations){let h=eL(e,d.key.path,t.batchId);s.push(i.delete(h)),l.push(d.key)}return O.waitFor(s).next(()=>l)}function ay(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw se();e=n.noDocument}return JSON.stringify(e).length}or.DEFAULT_COLLECTION_PERCENTILE=10,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,or.DEFAULT=new or(41943040,or.DEFAULT_COLLECTION_PERCENTILE,or.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),or.DISABLED=new or(-1,0,0);var cy=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){ce(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=tl(e),o=ks(e);return o.add({}).next(a=>{ce(typeof a=="number");let c=new lh(a,t,r,i),l=function(m,_,b){let E=b.baseMutations.map(j=>ph(m.ct,j)),R=b.mutations.map(j=>ph(m.ct,j));return{userId:_,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:E,mutations:R}}(this.serializer,this.userId,c),d=[],h=new Ze((p,m)=>ve(p.canonicalString(),m.canonicalString()));for(let p of i){let m=eL(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),d.push(o.put(l)),d.push(s.put(m,wW))}return h.forEach(p=>{d.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),O.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return ks(e).get(t).next(r=>r?(ce(r.userId===this.userId),Wo(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?O.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return ks(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(ce(a.batchId>=r),s=Wo(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return ks(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).U("userMutationsIndex",t).next(r=>r.map(i=>Wo(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Fm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return tl(e).J({range:i},(o,a,c)=>{let[l,d,h]=o,p=Gr(d);if(l===this.userId&&t.path.isEqual(p))return ks(e).get(h).next(m=>{if(!m)throw se();ce(m.userId===this.userId),s.push(Wo(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(ve),i=[];return t.forEach(s=>{let o=Fm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=tl(e).J({range:a},(l,d,h)=>{let[p,m,_]=l,b=Gr(m);p===this.userId&&s.path.isEqual(b)?r=r.add(_):h.done()});i.push(c)}),O.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=Fm(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ze(ve);return tl(e).J({range:o},(c,l,d)=>{let[h,p,m]=c,_=Gr(p);h===this.userId&&r.isPrefixOf(_)?_.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(ks(e).get(s).next(o=>{if(o===null)throw se();ce(o.userId===this.userId),r.push(Wo(this.serializer,o))}))}),O.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return WL(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),O.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return O.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return tl(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=Gr(s[1]);i.push(c)}else a.done()}).next(()=>{ce(i.length===0)})})}containsKey(e,t){return KL(e,this.userId,t)}Nn(e){return QL(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function KL(n,e,t){let r=Fm(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return tl(n).J({range:s,H:!0},(a,c,l)=>{let[d,h,p]=a;d===e&&h===i&&(o=!0),l.done()}).next(()=>o)}function ks(n){return $t(n,"mutations")}function tl(n){return $t(n,"documentMutations")}function QL(n){return $t(n,"mutationQueues")}var pl=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var eC=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new pl(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>fe.fromTimestamp(new lt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Yc(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(ce(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return Yc(e).J((o,a)=>{let c=Yd(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>O.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Yc(e).J((r,i)=>{let s=Yd(i);t(s)})}qn(e){return DF(e).get("targetGlobalKey").next(t=>(ce(t!==null),t))}Qn(e,t){return DF(e).put("targetGlobalKey",t)}Kn(e,t){return Yc(e).put(zL(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=ta(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Yc(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=Yd(a);Ch(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=Rs(e);return t.forEach(o=>{let a=bn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),O.waitFor(i)}removeMatchingKeys(e,t,r){let i=Rs(e);return O.forEach(t,s=>{let o=bn(s.path);return O.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=Rs(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Rs(e),s=Ie();return i.J({range:r,H:!0},(o,a,c)=>{let l=Gr(o[1]),d=new te(l);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=bn(t.path),i=IDBKeyRange.bound([r],[KF(r)],!1,!0),s=0;return Rs(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Yc(e).get(t).next(r=>r?Yd(r):null)}};function Yc(n){return $t(n,"targets")}function DF(n){return $t(n,"targetGlobal")}function Rs(n){return $t(n,"targetDocuments")}function SF([n,e],[t,r]){let i=ve(n,t);return i===0?ve(e,r):i}var tC=class{constructor(e){this.Un=e,this.buffer=new Ze(SF),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();SF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},nC=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){H("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gs(t)?H("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Hs(t)}yield this.Hn(3e5)}))}},rC=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return O.resolve(Kn.oe);let r=new tC(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(TF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TF):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(s=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),Zc()<=xr.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}};function gK(n,e){return new rC(n,e)}var iC=class{constructor(e,t){this.db=e,this.garbageCollector=gK(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Nm(e,r)}removeReference(e,t,r){return Nm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nm(e,t)}nr(e,t){return function(i,s){let o=!1;return QL(i).Y(a=>KL(i,a,s).next(c=>(c&&(o=!0),O.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,fe.min()),Rs(e).delete(function(h){return[0,bn(h.path)]}(o))))});i.push(c)}}).next(()=>O.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nm(e,t)}tr(e,t){let r=Rs(e),i,s=Kn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==Kn.oe&&t(new te(Gr(i)),s),s=l,i=c):s=Kn.oe}).next(()=>{s!==Kn.oe&&t(new te(Gr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Nm(n,e){return Rs(n).put(function(r,i){return{targetId:0,path:bn(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var ly=class{constructor(){this.changes=new Xr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ot.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sC=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zo(e).put(r)}removeEntry(e,t,r){return zo(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],ry(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Ot.newInvalidDocument(t);return zo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wd(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Ot.newInvalidDocument(t)};return zo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Wd(t))},(i,s)=>{r={document:this.ir(t,s),size:ay(s)}}).next(()=>r)}getEntries(e,t){let r=Vn();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=Vn(),i=new it(te.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,ay(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return O.resolve();let i=new Ze(kF);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(Wd(i.first()),Wd(i.last())),o=i.getIterator(),a=o.getNext();return zo(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{let h=te.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&kF(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(Wd(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),ry(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zo(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=Vn();for(let h of l){let p=this.ir(te.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(Dh(t,p)||i.has(p.key))&&(d=d.insert(p.key,p))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=Vn(),o=xF(t,r),a=xF(t,ar.max());return zo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let h=this.ir(te.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(h.key,h),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new oC(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return AF(e).get("remoteDocumentGlobalKey").next(t=>(ce(!!t),t))}rr(e,t){return AF(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=hK(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(fe.min())))return r}return Ot.newInvalidDocument(e)}};function YL(n){return new sC(n)}var oC=class extends ly{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Xr(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ze((s,o)=>ve(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=gF(this.cr.serializer,o);i=i.add(s.path.popLast());let l=ay(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=gF(this.cr.serializer,o.convertToNoDocument(fe.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),O.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function AF(n){return $t(n,"remoteDocumentGlobal")}function zo(n){return $t(n,"remoteDocumentsV14")}function Wd(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function xF(n,e){let t=e.documentKey.path.toArray();return[n,ry(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function kF(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=ve(t[s],r[s]),i)return i;return i=ve(t.length,r.length),i||(i=ve(t[t.length-2],r[r.length-2]),i||ve(t[t.length-1],r[r.length-1]))}var aC=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var uy=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Xd(r.mutation,i,Qn.empty(),lt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ie()){let i=Wr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Qd();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Wr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Vn(),o=Jd(),a=function(){return Jd()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Tr)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Xd(d.mutation,l,d.mutation.getFieldMask(),lt.now())):o.set(l.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var h;return a.set(l,new aC(d,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Jd(),i=new it((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Qn.empty();d=a.applyToLocalView(l,d),r.set(c,d);let h=(i.get(a.batchId)||Ie()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=wL();d.forEach(p=>{if(!s.has(p)){let m=SL(t.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,h))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Wr()),a=-1,c=s;return o.next(l=>O.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?O.resolve():this.remoteDocumentCache.getEntry(e,d).next(p=>{c=c.insert(d,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ie())).next(d=>({batchId:a,changes:_L(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=Qd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Qd();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let l=function(h,p){return new Cr(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Ot.newInvalidDocument(d)))});let a=Qd();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Xd(d.mutation,l,Qn.empty(),lt.now()),Dh(t,l)&&(a=a.insert(c,l))}),a})}};var cC=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:wt(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:yT(i.bundledQuery),readTime:wt(i.readTime)}}(t)),O.resolve()}};var lC=class{constructor(){this.overlays=new it(te.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Wr();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Wr(),s=t.length+1,o=new te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new it((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Wr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Wr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return O.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new uh(t,r));let s=this.Ir.get(t);s===void 0&&(s=Ie(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var uC=class{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var mh=class{constructor(){this.Tr=new Ze(Nt.Er),this.dr=new Ze(Nt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Nt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Nt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new te(new Ve([])),r=new Nt(t,e),i=new Nt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new te(new Ve([])),r=new Nt(t,e),i=new Nt(t,e+1),s=Ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Nt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Nt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return te.comparator(e.key,t.key)||ve(e.wr,t.wr)}static Ar(e,t){return ve(e.wr,t.wr)||te.comparator(e.key,t.key)}};var dC=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ze(Nt.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new lh(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Nt(t,0),i=new Nt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(ve);return t.forEach(i=>{let s=new Nt(i,0),o=new Nt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;te.isDocumentKey(s)||(s=s.child(""));let o=new Nt(new te(s),0),a=new Ze(ve);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ce(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let s=new Nt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Nt(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var hC=class{constructor(e){this.Mr=e,this.docs=function(){return new it(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Ot.newInvalidDocument(t))}getEntries(e,t){let r=Vn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ot.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Vn(),o=t.path,a=new te(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||cT(YF(d),r)<=0||(i.has(d.key)||Dh(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){se()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fC(this)}getSize(e){return O.resolve(this.size)}},fC=class extends ly{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var pC=class{constructor(e){this.persistence=e,this.Nr=new Xr(t=>ta(t),Ch),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mh,this.targetCount=0,this.kr=pl.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new pl(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var dy=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Kn(0),this.Kr=!1,this.Kr=!0,this.$r=new uC,this.referenceDelegate=e(this),this.Ur=new pC(this),this.indexManager=new JI,this.remoteDocumentCache=function(i){return new hC(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ny(t),this.Gr=new cC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new dC(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){H("MemoryPersistence","Starting transaction:",e);let i=new gC(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},gC=class extends zm{constructor(e){super(),this.currentSequenceNumber=e}},hy=class n{constructor(e){this.persistence=e,this.Jr=new mh,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=te.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,fe.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var mC=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new Hm("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GO,{unique:!0}),c.createObjectStore("documentMutations")}(e),RF(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=O.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),RF(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:fe.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",GO,{unique:!0});let h=l.store("mutations"),p=d.map(m=>h.put(m));return O.waitFor(p)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:MW});l.createIndex("collectionPathOverlayIndex",NW,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",PW,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:bW});l.createIndex("documentKeyIndex",EW),l.createIndex("collectionGroupIndex",IW)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:AW}).createIndex("sequenceNumberIndex",xW,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:kW}).createIndex("documentKeyIndex",RW,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=ay(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>O.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>O.forEach(a,c=>{ce(c.userId===s.userId);let l=Wo(this.serializer,c);return WL(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Ve(o),l=function(h){return[0,bn(h)]}(c);s.push(t.get(l).next(d=>d?O.resolve():(h=>t.put({targetId:0,path:bn(h),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>O.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:SW});let r=t.store("collectionParents"),i=new gh,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:bn(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Ve(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=Gr(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=Yd(i),o=zL(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(h){return h.document?new te(Ve.fromString(h.document.name).popFirst(5)):h.noDocument?te.fromSegments(h.noDocument.path):h.unknownDocument?te.fromSegments(h.unknownDocument.path):se()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>O.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=YL(this.serializer),s=new dy(hy.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:Ie();Wo(this.serializer,c).keys().forEach(h=>d=d.add(h)),a.set(c.userId,d)}),O.forEach(a,(c,l)=>{let d=new Pt(l),h=iy.lt(this.serializer,d),p=s.getIndexManager(d),m=cy.lt(d,this.serializer,p,s.referenceDelegate);return new uy(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new ih(t,Kn.oe),c).next()})})}};function RF(n){n.createObjectStore("targetDocuments",{keyPath:TW}).createIndex("documentTargetsIndex",DW,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CW,{unique:!0}),n.createObjectStore("targetGlobal")}var iI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yC=class n{constructor(e,t,r,i,s,o,a,c,l,d,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=d,this.hi=h,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=p=>Promise.resolve(),!n.D())throw new z(V.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iC(this,i),this.Ai=t+"main",this.serializer=new ny(c),this.Ri=new Fs(this.Ai,this.hi,new mC(this.serializer)),this.$r=new HI,this.Ur=new eC(this.referenceDelegate,this.serializer),this.remoteDocumentCache=YL(this.serializer),this.Gr=new zI,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&vt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(V.FAILED_PRECONDITION,iI);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Kn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>y(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>y(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>y(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Pm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Gs(e))return H("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return H("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Kd(e).get("owner").next(t=>O.resolve(this.vi(t)))}Ci(e){return Pm(e).delete(this.clientId)}Fi(){return y(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=$t(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return O.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?O.resolve(!0):Kd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new z(V.FAILED_PRECONDITION,iI);return!1}}return!(!this.networkEnabled||!this.inForeground)||Pm(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&H("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return y(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new ih(e,Kn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Pm(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return cy.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new XI(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return iy.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){H("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?LW:c===16?FW:c===15?uT:c===14?rL:c===13?nL:c===12?OW:c===11?tL:void se()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new ih(a,this.Qr?this.Qr.next():Kn.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new z(V.FAILED_PRECONDITION,ZF);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return Kd(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new z(V.FAILED_PRECONDITION,iI)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Kd(e).put("owner",t)}static D(){return Fs.D()}bi(e){let t=Kd(e);return t.get("owner").next(r=>this.vi(r)?(H("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):O.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Fv()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return H("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){vt("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function Kd(n){return $t(n,"owner")}function Pm(n){return $t(n,"clientMetadata")}function _T(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var vC=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ie(),i=Ie();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var _C=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fy=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Fv()?8:JF(Xl())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new _C;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Zc()<=xr.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Jc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(Zc()<=xr.DEBUG&&H("QueryEngine","Query:",Jc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Zc()<=xr.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Jc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(t))):O.resolve())}Yi(e,t){if(iF(t))return O.resolve(null);let r=En(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Jm(t,null,"F"),r=En(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ie(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,Jm(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return iF(t)||i.isEqual(fe.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?O.resolve(null):(Zc()<=xr.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jc(t)),this.rs(e,o,t,QF(i,-1)).next(a=>a))})}ts(e,t){let r=new Ze(yL(e));return t.forEach((i,s)=>{Dh(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Zc()<=xr.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Jc(t)),this.Ji.getDocumentsMatchingQuery(e,t,ar.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var wC=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new it(ve),this._s=new Xr(s=>ta(s),Ch),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uy(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function ZL(n,e,t,r){return new wC(n,e,t,r)}function JL(n,e){return y(this,null,function*(){let t=ee(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ie();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function mK(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let h=l.batch,p=h.keys(),m=O.resolve();return p.forEach(_=>{m=m.next(()=>d.getEntry(c,_)).next(b=>{let E=l.docVersions.get(_);ce(E!==null),b.version.compareTo(E)<0&&(h.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),d.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function XL(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function yK(n,e){let t=ee(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,h)=>{let p=i.get(h);if(!p)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,h).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(bt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(h,m),function(b,E,R){return b.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(p,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let c=Vn(),l=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(eV(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(fe.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(h=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function eV(n,e,t){let r=Ie(),i=Ie();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Vn();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(fe.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):H("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function vK(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gl(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new fl(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function ml(n,e,t){return y(this,null,function*(){let r=ee(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Gs(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function py(n,e,t){let r=ee(n),i=fe.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let h=ee(c),p=h._s.get(d);return p!==void 0?O.resolve(h.os.get(p)):h.Ur.getTargetData(l,d)}(r,o,En(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:fe.min(),t?s:Ie())).next(a=>(rV(r,mL(e),a),{documents:a,Ts:s})))}function tV(n,e){let t=ee(n),r=ee(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function nV(n,e){let t=ee(n),r=t.us.get(e)||fe.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,QF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(rV(t,e,i),i))}function rV(n,e,t){let r=n.us.get(e)||fe.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function _K(n,e,t,r){return y(this,null,function*(){let i=ee(n),s=Ie(),o=Vn();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(s=s.add(d));let h=e.ds(l);h.setReadTime(e.As(l.metadata.readTime)),o=o.insert(d,h)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield gl(i,function(d){return En(Cl(Ve.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>eV(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function wK(r,i){return y(this,arguments,function*(n,e,t=Ie()){let s=yield gl(n,En(yT(e.bundledQuery))),o=ee(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=wt(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let l=s.withResumeToken(bt.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(l.targetId,l),o.Ur.updateTargetData(a,l).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function MF(n,e){return`firestore_clients_${n}_${e}`}function NF(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sI(n,e){return`firestore_targets_${n}_${e}`}var gy=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new z(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(vt("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},eh=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new z(r.error.code,r.error.message))),s?new n(e,r.state,i):(vt("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},my=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=pT();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=XF(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(vt("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},bC=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(vt("SharedClientState",`Failed to parse online state: ${e}`),null)}},yh=class{constructor(){this.activeTargetIds=pT()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},th=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new it(ve),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=MF(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new yh),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return y(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(MF(this.persistenceKey,r));if(i){let s=my.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(sI(this.persistenceKey,e));if(i){let s=eh.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sI(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return H("SharedClientState","READ",e,t),t}setItem(e,t){H("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){H("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(H("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>y(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=Kn.oe;if(s!=null)try{let a=JSON.parse(s);ce(typeof a=="number"),o=a}catch(a){vt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==Kn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new gy(this.currentUser,e,t,r),s=NF(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=NF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=sI(this.persistenceKey,e),s=new eh(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return my.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return gy.Rs(new Pt(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return eh.Rs(i,t)}Ls(e){return bC.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return y(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);H("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=pT();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},yy=class{constructor(){this.so=new yh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yh,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var EC=class{_o(e){}shutdown(){}};var vy=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Om=null;function oI(){return Om===null?Om=function(){return 268435456+Math.round(2147483648*Math.random())}():Om++,"0x"+Om.toString(16)}var bK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var IC=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var un="WebChannelConnection",CC=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=oI(),c=this.xo(t,r.toUriEncodedString());H("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(H("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Ir("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Il}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=bK[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=oI();return new Promise((o,a)=>{let c=new JE;c.setWithCredentials(!0),c.listenOnce(XE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case zd.NO_ERROR:let d=c.getResponseJson();H(un,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case zd.TIMEOUT:H(un,`RPC '${e}' ${s} timed out`),a(new z(V.DEADLINE_EXCEEDED,"Request time out"));break;case zd.HTTP_ERROR:let h=c.getStatus();if(H(un,`RPC '${e}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let m=p?.error;if(m&&m.status&&m.message){let _=function(E){let R=E.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(R)>=0?R:V.UNKNOWN}(m.status);a(new z(_,m.message))}else a(new z(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new z(V.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{H(un,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);H(un,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=oI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=nI(),a=tI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");H(un,`Creating RPC '${e}' stream ${i}: ${d}`,c);let h=o.createWebChannel(d,c),p=!1,m=!1,_=new IC({Io:E=>{m?H(un,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(p||(H(un,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),H(un,`RPC '${e}' stream ${i} sending:`,E),h.send(E))},To:()=>h.close()}),b=(E,R,j)=>{E.listen(R,U=>{try{j(U)}catch(B){setTimeout(()=>{throw B},0)}})};return b(h,Gc.EventType.OPEN,()=>{m||(H(un,`RPC '${e}' stream ${i} transport opened.`),_.yo())}),b(h,Gc.EventType.CLOSE,()=>{m||(m=!0,H(un,`RPC '${e}' stream ${i} transport closed`),_.So())}),b(h,Gc.EventType.ERROR,E=>{m||(m=!0,Ir(un,`RPC '${e}' stream ${i} transport errored:`,E),_.So(new z(V.UNAVAILABLE,"The operation could not be completed")))}),b(h,Gc.EventType.MESSAGE,E=>{var R;if(!m){let j=E.data[0];ce(!!j);let U=j,B=U.error||((R=U[0])===null||R===void 0?void 0:R.error);if(B){H(un,`RPC '${e}' stream ${i} received error:`,B);let K=B.status,Q=function(I){let S=Mt[I];if(S!==void 0)return kL(S)}(K),T=B.message;Q===void 0&&(Q=V.INTERNAL,T="Unknown error status: "+K+" with message "+B.message),m=!0,_.So(new z(Q,T)),h.close()}else H(un,`RPC '${e}' stream ${i} received:`,j),_.bo(j)}}),b(a,eI.STAT_EVENT,E=>{E.stat===Rm.PROXY?H(un,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Rm.NOPROXY&&H(un,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}};function iV(){return typeof window<"u"?window:null}function Um(){return typeof document<"u"?document:null}function Sh(n){return new jI(n,!0)}var vh=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var _y=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new vh(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(vt(t.toString()),vt("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new z(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},TC=class extends _y{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=sK(this.serializer,e),r=function(s){if(!("targetChange"in s))return fe.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?fe.min():o.readTime?wt(o.readTime):fe.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=BI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Ym(c)?{documents:VL(s,c)}:{query:jL(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ML(s,o.resumeToken);let l=UI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(fe.min())>0){a.readTime=hl(s,o.snapshotVersion.toTimestamp());let l=UI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=aK(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=BI(this.serializer),t.removeTarget=e,this.a_(t)}},DC=class extends _y{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=oK(e.writeResults,e.commitTime),r=wt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=BI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>ph(this.serializer,r))};this.a_(t)}};var SC=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,$I(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(V.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,$I(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},AC=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(vt(t),this.D_=!1):H("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var xC=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Ws(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=ee(c);l.L_.add(4),yield Tl(l),l.q_.set("Unknown"),l.L_.delete(4),yield Ah(l)})}(this))}))}),this.q_=new AC(r,i)}};function Ah(n){return y(this,null,function*(){if(Ws(n))for(let e of n.B_)yield e(!0)})}function Tl(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function Uy(n,e){let t=ee(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ET(t)?bT(t):Sl(t).r_()&&wT(t,e))}function yl(n,e){let t=ee(n),r=Sl(t);t.N_.delete(e),r.r_()&&sV(t,e),t.N_.size===0&&(r.r_()?r.o_():Ws(t)&&t.q_.set("Unknown"))}function wT(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sl(n).A_(e)}function sV(n,e){n.Q_.xe(e),Sl(n).R_(e)}function bT(n){n.Q_=new VI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Sl(n).start(),n.q_.v_()}function ET(n){return Ws(n)&&!Sl(n).n_()&&n.N_.size>0}function Ws(n){return ee(n).L_.size===0}function oV(n){n.Q_=void 0}function EK(n){return y(this,null,function*(){n.q_.set("Online")})}function IK(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{wT(n,e)})})}function CK(n,e){return y(this,null,function*(){oV(n),ET(n)?(n.q_.M_(e),bT(n)):n.q_.set("Unknown")})}function TK(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof ey&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wy(n,r)}else if(e instanceof sl?n.Q_.Ke(e):e instanceof Xm?n.Q_.He(e):n.Q_.We(e),!t.isEqual(fe.min()))try{let r=yield XL(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(bt.EMPTY_BYTE_STRING,d.snapshotVersion)),sV(s,c);let h=new fl(d.target,c,l,d.sequenceNumber);wT(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){H("RemoteStore","Failed to raise snapshot:",r),yield wy(n,r)}})}function wy(n,e,t){return y(this,null,function*(){if(!Gs(e))throw e;n.L_.add(1),yield Tl(n),n.q_.set("Offline"),t||(t=()=>XL(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ah(n)}))})}function aV(n,e){return e().catch(t=>wy(n,t,e))}function Dl(n){return y(this,null,function*(){let e=ee(n),t=zs(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;DK(e);)try{let i=yield vK(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,SK(e,i)}catch(i){yield wy(e,i)}cV(e)&&lV(e)})}function DK(n){return Ws(n)&&n.O_.length<10}function SK(n,e){n.O_.push(e);let t=zs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function cV(n){return Ws(n)&&!zs(n).n_()&&n.O_.length>0}function lV(n){zs(n).start()}function AK(n){return y(this,null,function*(){zs(n).p_()})}function xK(n){return y(this,null,function*(){let e=zs(n);for(let t of n.O_)e.m_(t.mutations)})}function kK(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=OI.from(r,e,t);yield aV(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Dl(n)})}function RK(n,e){return y(this,null,function*(){e&&zs(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return xL(o)&&o!==V.ABORTED}(i.code)){let s=r.O_.shift();zs(r).s_(),yield aV(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Dl(r)}})}(n,e)),cV(n)&&lV(n)})}function PF(n,e){return y(this,null,function*(){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=Ws(t);t.L_.add(3),yield Tl(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ah(t)})}function kC(n,e){return y(this,null,function*(){let t=ee(n);e?(t.L_.delete(2),yield Ah(t)):e||(t.L_.add(2),yield Tl(t),t.q_.set("Unknown"))})}function Sl(n){return n.K_||(n.K_=function(t,r,i){let s=ee(t);return s.w_(),new TC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:EK.bind(null,n),Ro:IK.bind(null,n),mo:CK.bind(null,n),d_:TK.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),ET(n)?bT(n):n.q_.set("Unknown")):(yield n.K_.stop(),oV(n))}))),n.K_}function zs(n){return n.U_||(n.U_=function(t,r,i){let s=ee(t);return s.w_(),new DC(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AK.bind(null,n),mo:RK.bind(null,n),f_:xK.bind(null,n),g_:kK.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield Dl(n)):(yield n.U_.stop(),n.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var RC=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ut,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Al(n,e){if(vt("AsyncQueue",`${e}: ${n}`),Gs(n))return new z(V.UNAVAILABLE,`${e}: ${n}`);throw n}var by=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=Qd(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ey=class{constructor(){this.W_=new it(te.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},vl=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,by.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var MC=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},NC=class{constructor(){this.queries=OF(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ee(t),s=i.queries;i.queries=OF(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new z(V.ABORTED,"Firestore shutting down"))}};function OF(){return new Xr(n=>gL(n),Th)}function IT(n,e){return y(this,null,function*(){let t=ee(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new MC,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=Al(o,`Initialization of query '${Jc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&TT(t)})}function CT(n,e){return y(this,null,function*(){let t=ee(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function MK(n,e){let t=ee(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&TT(t)}function NK(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function TT(n){n.Y_.forEach(e=>{e.next()})}var PC,FF;(FF=PC||(PC={})).ea="default",FF.Cache="cache";var _h=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new vl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==PC.Cache}};var OC=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Iy=class{constructor(e){this.serializer=e}Es(e){return Qr(this.serializer,e)}ds(e){return e.metadata.exists?LL(this.serializer,e.document,!1):Ot.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return wt(e)}},FC=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uV(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ve.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Iy(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||Ie()).add(s);t.set(o,a)}}return t}complete(){return y(this,null,function*(){let e=yield _K(this.localStore,new Iy(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield wK(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function uV(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Cy=class{constructor(e){this.key=e}},Ty=class{constructor(e){this.key=e}},Dy=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=yL(e),this.Ra=new by(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Ey,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,h)=>{let p=i.get(d),m=Dh(this.query,h)?h:null,_=!!p&&this.mutatedKeys.has(p.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),E=!1;p&&m?p.data.isEqual(m.data)?_!==b&&(r.track({type:3,doc:m}),E=!0):this.ga(p,m)||(r.track({type:2,doc:m}),E=!0,(c&&this.Aa(m,c)>0||l&&this.Aa(m,l)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),E=!0):p&&!m&&(r.track({type:1,doc:p}),E=!0,(c||l)&&(a=!0)),E&&(m?(o=o.add(m),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,h)=>function(m,_){let b=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return b(m)-b(_)}(d.type,h.type)||this.Aa(d.doc,h.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new vl(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ey,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Ty(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Cy(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return vl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},LC=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},VC=class{constructor(e){this.key=e,this.va=!1}},jC=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xr(a=>gL(a),Th),this.Ma=new Map,this.xa=new Set,this.Oa=new it(te.comparator),this.Na=new Map,this.La=new mh,this.Ba={},this.ka=new Map,this.qa=pl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function PK(n,e,t=!0){return y(this,null,function*(){let r=$y(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield dV(r,e,t,!0),i})}function OK(n,e){return y(this,null,function*(){let t=$y(n);yield dV(t,e,!0,!1)})}function dV(n,e,t,r){return y(this,null,function*(){let i=yield gl(n.localStore,En(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield DT(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&Uy(n.remoteStore,i),a})}function DT(n,e,t,r,i){return y(this,null,function*(){n.Ka=(h,p,m)=>function(b,E,R,j){return y(this,null,function*(){let U=E.view.ma(R);U.ns&&(U=yield py(b.localStore,E.query,!1).then(({documents:T})=>E.view.ma(T,U)));let B=j&&j.targetChanges.get(E.targetId),K=j&&j.targetMismatches.get(E.targetId)!=null,Q=E.view.applyChanges(U,b.isPrimaryClient,B,K);return UC(b,E.targetId,Q.wa),Q.snapshot})}(n,h,p,m);let s=yield py(n.localStore,e,!0),o=new Dy(e,s.Ts),a=o.ma(s.documents),c=hh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);UC(n,t,l.wa);let d=new LC(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function FK(n,e,t){return y(this,null,function*(){let r=ee(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Th(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield ml(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&yl(r.remoteStore,i.targetId),_l(r,i.targetId)}).catch(Hs))):(_l(r,i.targetId),yield ml(r.localStore,i.targetId,!0))})}function LK(n,e){return y(this,null,function*(){let t=ee(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),yl(t.remoteStore,r.targetId))})}function VK(n,e,t){return y(this,null,function*(){let r=kT(n);try{let i=yield function(o,a){let c=ee(o),l=lt.now(),d=a.reduce((m,_)=>m.add(_.key),Ie()),h,p;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let _=Vn(),b=Ie();return c.cs.getEntries(m,d).next(E=>{_=E,_.forEach((R,j)=>{j.isValidDocument()||(b=b.add(R))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,_)).next(E=>{h=E;let R=[];for(let j of a){let U=JW(j,h.get(j.key).overlayedDocument);U!=null&&R.push(new Tr(j.key,U,cL(U.value.mapValue),mt.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,R,a)}).next(E=>{p=E;let R=E.applyToLocalDocumentSet(h,b);return c.documentOverlayCache.saveOverlays(m,E.batchId,R)})}).then(()=>({batchId:p.batchId,changes:_L(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new it(ve)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Bi(r,i.changes),yield Dl(r.remoteStore)}catch(i){let s=Al(i,"Failed to persist write");t.reject(s)}})}function hV(n,e){return y(this,null,function*(){let t=ee(n);try{let r=yield yK(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ce(o.va):i.removedDocuments.size>0&&(ce(o.va),o.va=!1))}),yield Bi(t,r,e)}catch(r){yield Hs(r)}})}function LF(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ee(o);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let p of h.j_)p.Z_(a)&&(l=!0)}),l&&TT(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function jK(n,e,t){return y(this,null,function*(){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new it(te.comparator);o=o.insert(s,Ot.newNoDocument(s,fe.min()));let a=Ie().add(s),c=new dh(fe.min(),new Map,new it(ve),o,a);yield hV(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),xT(r)}else yield ml(r.localStore,e,!1).then(()=>_l(r,e,t)).catch(Hs)})}function UK(n,e){return y(this,null,function*(){let t=ee(n),r=e.batch.batchId;try{let i=yield mK(t.localStore,e);AT(t,r,null),ST(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bi(t,i)}catch(i){yield Hs(i)}})}function $K(n,e,t){return y(this,null,function*(){let r=ee(n);try{let i=yield function(o,a){let c=ee(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(ce(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);AT(r,e,t),ST(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bi(r,i)}catch(i){yield Hs(i)}})}function BK(n,e){return y(this,null,function*(){let t=ee(n);Ws(t.remoteStore)||H("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=ee(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Al(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function ST(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function AT(n,e,t){let r=ee(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function _l(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||fV(n,r)})}function fV(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(yl(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),xT(n))}function UC(n,e,t){for(let r of t)r instanceof Cy?(n.La.addReference(r.key,e),qK(n,r)):r instanceof Ty?(H("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||fV(n,r.key)):se()}function qK(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(H("SyncEngine","New document in limbo: "+t),n.xa.add(r),xT(n))}function xT(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new te(Ve.fromString(e)),r=n.qa.next();n.Na.set(r,new VC(t)),n.Oa=n.Oa.insert(t,r),Uy(n.remoteStore,new fl(En(Cl(t.path)),r,"TargetPurposeLimboResolution",Kn.oe))}}function Bi(n,e,t){return y(this,null,function*(){let r=ee(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=vC.Wi(c.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=ee(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>O.forEach(l,p=>O.forEach(p.$i,m=>d.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>O.forEach(p.Ui,m=>d.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!Gs(h))throw h;H("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let p=h.targetId;if(!h.fromCache){let m=d.os.get(p),_=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(_);d.os=d.os.insert(p,b)}}})}(r.localStore,s))})}function zK(n,e){return y(this,null,function*(){let t=ee(n);if(!t.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield JL(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new z(V.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bi(t,r.hs)}})}function HK(n,e){let t=ee(n),r=t.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let i=Ie(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function GK(n,e){return y(this,null,function*(){let t=ee(n),r=yield py(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&UC(t,e.targetId,i.wa),i})}function WK(n,e){return y(this,null,function*(){let t=ee(n);return nV(t.localStore,e).then(r=>Bi(t,r))})}function KK(n,e,t,r){return y(this,null,function*(){let i=ee(n),s=yield function(a,c){let l=ee(a),d=ee(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",h=>d.Mn(h,c).next(p=>p?l.localDocuments.getDocuments(h,p):O.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield Dl(i.remoteStore):t==="acknowledged"||t==="rejected"?(AT(i,e,r||null),ST(i,e),function(a,c){ee(ee(a).mutationQueue).On(c)}(i.localStore,e)):se(),yield Bi(i,s)):H("SyncEngine","Cannot apply mutation batch with id: "+e)})}function QK(n,e){return y(this,null,function*(){let t=ee(n);if($y(t),kT(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield VF(t,r.toArray());t.Qa=!0,yield kC(t.remoteStore,!0);for(let s of i)Uy(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(_l(t,o),ml(t.localStore,o,!0))),yl(t.remoteStore,o)}),yield i,yield VF(t,r),function(o){let a=ee(o);a.Na.forEach((c,l)=>{yl(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new it(te.comparator)}(t),t.Qa=!1,yield kC(t.remoteStore,!1)}})}function VF(n,e,t){return y(this,null,function*(){let r=ee(n),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield gl(r.localStore,En(c[0]));for(let l of c){let d=r.Fa.get(l),h=yield GK(r,d);h.snapshot&&s.push(h.snapshot)}}else{let l=yield tV(r.localStore,o);a=yield gl(r.localStore,l),yield DT(r,pV(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function pV(n){return pL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function YK(n){return function(t){return ee(ee(t).persistence).Qi()}(ee(n).localStore)}function ZK(n,e,t,r){return y(this,null,function*(){let i=ee(n);if(i.Qa)return void H("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield nV(i.localStore,mL(s[0])),a=dh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",bt.EMPTY_BYTE_STRING);yield Bi(i,o,a);break}case"rejected":yield ml(i.localStore,e,!0),_l(i,e,r);break;default:se()}})}function JK(n,e,t){return y(this,null,function*(){let r=$y(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){H("SyncEngine","Adding an already active target "+i);continue}let s=yield tV(r.localStore,i),o=yield gl(r.localStore,s);yield DT(r,pV(s),o.targetId,!1,o.resumeToken),Uy(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield ml(r.localStore,i,!1).then(()=>{yl(r.remoteStore,i),_l(r,i)}).catch(Hs))}})}function $y(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=hV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jK.bind(null,e),e.Ca.d_=MK.bind(null,e.eventManager),e.Ca.$a=NK.bind(null,e.eventManager),e}function kT(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=UK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=$K.bind(null,e),e}function XK(n,e,t){let r=ee(n);(function(s,o,a){return y(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,_){let b=ee(m),E=wt(_.createTime);return b.persistence.runTransaction("hasNewerBundle","readonly",R=>b.Gr.getBundleMetadata(R,_.id)).then(R=>!!R&&R.createTime.compareTo(E)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(uV(c));let l=new FC(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let p=yield l.la(d);p&&a._updateProgress(p),d=yield o.Ua()}let h=yield l.complete();return yield Bi(s,h.Ia,void 0),yield function(m,_){let b=ee(m);return b.persistence.runTransaction("Save bundle","readwrite",E=>b.Gr.saveBundleMetadata(E,_))}(s.localStore,c),a._completeWith(h.progress),Promise.resolve(h.Pa)}catch(c){return Ir("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var $C=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=Sh(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return ZL(this.persistence,new fy,t.initialUser,this.serializer)}Ga(t){return new dy(hy.Zr,this.serializer)}Wa(t){return new yy}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Sy=class n extends $C{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return y(this,null,function*(){yield Pv(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield kT(this.Ja.syncEngine),yield Dl(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return ZL(this.persistence,new fy,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new nC(r,e.asyncQueue,t)}Ha(e,t){let r=new _I(t,this.persistence);return new vI(e.asyncQueue,r)}Ga(e){let t=_T(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?or.withCacheSize(this.cacheSizeBytes):or.DEFAULT;return new yC(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,iV(),Um(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new yy}},BC=class n extends Sy{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return y(this,null,function*(){yield Pv(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof th&&(this.sharedClientState.syncEngine={no:KK.bind(null,t),ro:ZK.bind(null,t),io:JK.bind(null,t),Qi:YK.bind(null,t),eo:WK.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>y(this,null,function*(){yield QK(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=iV();if(!th.D(t))throw new z(V.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=_T(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new th(t,e.asyncQueue,r,e.clientId,e.initialUser)}},RT=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>LF(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=zK.bind(null,this.syncEngine),yield kC(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new NC}()}createDatastore(t){let r=Sh(t.databaseInfo.databaseId),i=function(o){return new CC(o)}(t.databaseInfo);return function(o,a,c,l){return new SC(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new xC(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>LF(this.syncEngine,r,0),function(){return vy.D()?new vy:new EC}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,h){let p=new jC(s,o,a,c,l,d);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(s){return y(this,null,function*(){let o=ee(s);H("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Tl(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function jF(n,e=10240){let t=0;return{read(){return y(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return y(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var wl=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):vt("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var qC=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Ut,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return y(this,null,function*(){return this.metadata.promise})}Ua(){return y(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return y(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new OC(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return y(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return y(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return y(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var zC=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(V.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return y(this,null,function*(){let o=ee(i),a={documents:s.map(h=>fh(o.serializer,h))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Ve.emptyPath(),a,s.length),l=new Map;c.forEach(h=>{let p=iK(o.serializer,h);l.set(p.key.toString(),p)});let d=[];return s.forEach(h=>{let p=l.get(h.toString());ce(!!p),d.push(p)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new qs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return y(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=te.fromPath(r);this.mutations.push(new ch(i,this.precondition(i)))}),yield function(r,i){return y(this,null,function*(){let s=ee(r),o={writes:i.map(a=>ph(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Ve.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw se();t=fe.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new z(V.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fe.min())?mt.exists(!1):mt.updateTime(t):mt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fe.min()))throw new z(V.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mt.updateTime(t)}return mt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var HC=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new vh(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>y(this,null,function*(){let e=new zC(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ih(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!xL(t)}return!1}};var GC=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Pt.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){H("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ut;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Al(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function aI(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield JL(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function UF(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield MT(n);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>PF(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>PF(e.remoteStore,i)),n._onlineComponents=e})}function MT(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield aI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ir("Error using user provided cache. Falling back to memory cache: "+t),yield aI(n,new $C)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield aI(n,new $C);return n._offlineComponents})}function By(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield UF(n,n._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield UF(n,new RT))),n._onlineComponents})}function gV(n){return MT(n).then(e=>e.persistence)}function NT(n){return MT(n).then(e=>e.localStore)}function mV(n){return By(n).then(e=>e.remoteStore)}function PT(n){return By(n).then(e=>e.syncEngine)}function e7(n){return By(n).then(e=>e.datastore)}function bl(n){return y(this,null,function*(){let e=yield By(n),t=e.eventManager;return t.onListen=PK.bind(null,e.syncEngine),t.onUnlisten=FK.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OK.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=LK.bind(null,e.syncEngine),t})}function t7(n){return n.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield gV(n),t=yield mV(n);return e.setNetworkEnabled(!0),function(i){let s=ee(i);return s.L_.delete(0),Ah(s)}(t)}))}function n7(n){return n.asyncQueue.enqueue(()=>y(this,null,function*(){let e=yield gV(n),t=yield mV(n);return e.setNetworkEnabled(!1),function(i){return y(this,null,function*(){let s=ee(i);s.L_.add(0),yield Tl(s),s.q_.set("Offline")})}(t)}))}function r7(n,e){let t=new Ut;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s,o){return y(this,null,function*(){try{let a=yield function(l,d){let h=ee(l);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new z(V.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=Al(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield NT(n),e,t)})),t.promise}function yV(n,e,t={}){let r=new Ut;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new wl({next:p=>{d.Za(),o.enqueueAndForget(()=>CT(s,h));let m=p.docs.has(a);!m&&p.fromCache?l.reject(new z(V.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&c&&c.source==="server"?l.reject(new z(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new _h(Cl(a.path),d,{includeMetadataChanges:!0,_a:!0});return IT(s,h)}(yield bl(n),n.asyncQueue,e,t,r)})),r.promise}function i7(n,e){let t=new Ut;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s,o){return y(this,null,function*(){try{let a=yield py(i,s,!0),c=new Dy(s,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=Al(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield NT(n),e,t)})),t.promise}function vV(n,e,t={}){let r=new Ut;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new wl({next:p=>{d.Za(),o.enqueueAndForget(()=>CT(s,h)),p.fromCache&&c.source==="server"?l.reject(new z(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),h=new _h(a,d,{includeMetadataChanges:!0,_a:!0});return IT(s,h)}(yield bl(n),n.asyncQueue,e,t,r)})),r.promise}function s7(n,e){let t=new wl(e);return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s){ee(i).Y_.add(s),s.next()}(yield bl(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(i,s){ee(i).Y_.delete(s)}(yield bl(n),t)}))}}function o7(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?RL().encode(o):o,function(d,h){return new qC(d,h)}(function(d,h){if(d instanceof Uint8Array)return jF(d,h);if(d instanceof ArrayBuffer)return jF(new Uint8Array(d),h);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,Sh(e));n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){XK(yield PT(n),i,r)}))}function a7(n,e){return n.asyncQueue.enqueue(()=>y(this,null,function*(){return function(r,i){let s=ee(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield NT(n),e)}))}function _V(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var $F=new Map;function OT(n,e,t){if(!t)throw new z(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function FT(n,e,t,r){if(e===!0&&r===!0)throw new z(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function BF(n){if(!te.isDocumentKey(n))throw new z(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qF(n){if(te.isDocumentKey(n))throw new z(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qy(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":se()}function $e(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=qy(n);throw new z(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wV(n,e){if(e<=0)throw new z(V.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Ay=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}FT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_V((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},sa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ay({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ay(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cI;switch(r.type){case"firstParty":return new hI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=$F.get(t);r&&(H("ComponentProvider","Removing Datastore"),$F.delete(t),r.terminate())}(this),Promise.resolve()}};function bV(n,e,t,r={}){var i;let s=(n=$e(n,sa))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ir("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Pt.MOCK_USER;else{a=kS(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new z(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Pt(l)}n._authCredentials=new lI(new $m(a,c))}}var Zt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Xe=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Yr=class n extends Zt{constructor(e,t,r){super(e,t,Cl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function LT(n,e,...t){if(n=at(n),OT("collection","path",e),n instanceof sa){let r=Ve.fromString(e,...t);return qF(r),new Yr(n,null,r)}{if(!(n instanceof Xe||n instanceof Yr))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ve.fromString(e,...t));return qF(r),new Yr(n.firestore,null,r)}}function EV(n,e){if(n=$e(n,sa),OT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new z(V.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zt(n,null,function(r){return new Cr(Ve.emptyPath(),r)}(e))}function xh(n,e,...t){if(n=at(n),arguments.length===1&&(e=Bm.newId()),OT("doc","path",e),n instanceof sa){let r=Ve.fromString(e,...t);return BF(r),new Xe(n,null,new te(r))}{if(!(n instanceof Xe||n instanceof Yr))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ve.fromString(e,...t));return BF(r),new Xe(n.firestore,n instanceof Yr?n.converter:null,new te(r))}}function VT(n,e){return n=at(n),e=at(e),(n instanceof Xe||n instanceof Yr)&&(e instanceof Xe||e instanceof Yr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function jT(n,e){return n=at(n),e=at(e),n instanceof Zt&&e instanceof Zt&&n.firestore===e.firestore&&Th(n._query,e._query)&&n.converter===e.converter}var xy=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new vh(this,"async_queue_retry"),this.Vu=()=>{let r=Um();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Um();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Um();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Ut;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Gs(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw vt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=RC.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&se()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function WC(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var KC=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ut,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var IV=-1,ut=class extends sa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new xy,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new xy(e),this._firestoreClient=void 0,yield e}})}};function Jt(n){if(n._terminated)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CV(n),n._firestoreClient}function CV(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new wI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_V(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new GC(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function TV(n,e){Ir("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return SV(n,RT.provider,{build:r=>new Sy(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function DV(n){return y(this,null,function*(){Ir("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();SV(n,RT.provider,{build:t=>new BC(t,e.cacheSizeBytes)})})}function SV(n,e,t){if((n=$e(n,ut))._firestoreClient||n._terminated)throw new z(V.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new z(V.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},CV(n)}function AV(n){if(n._initialized&&!n._terminated)throw new z(V.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Ut;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{yield function(r){return y(this,null,function*(){if(!Fs.D())return Promise.resolve();let i=r+"main";yield Fs.delete(i)})}(_T(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function xV(n){return function(t){let r=new Ut;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return BK(yield PT(t),r)})),r.promise}(Jt(n=$e(n,ut)))}function kV(n){return t7(Jt(n=$e(n,ut)))}function RV(n){return n7(Jt(n=$e(n,ut)))}function MV(n,e){let t=Jt(n=$e(n,ut)),r=new KC;return o7(t,n._databaseId,e,r),r}function NV(n,e){return a7(Jt(n=$e(n,ut)),e).then(t=>t?new Zt(n,null,t.query):null)}var ei=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(bt.fromBase64String(e))}catch(t){throw new z(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Dr=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ui=class{constructor(e){this._methodName=e}};var oa=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}};var wh=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var c7=/^__.*__$/,QC=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bs(e,this.data,t,this.fieldTransforms)}},ky=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Tr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function PV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}var Ry=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return My(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(PV(this.Cu)&&c7.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},YC=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sh(e)}Qu(e,t,r,i=!1){return new Ry({Cu:e,methodName:t,qu:r,path:_t.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function ua(n){let e=n._freezeSettings(),t=Sh(n._databaseId);return new YC(n._databaseId,!!e.ignoreUndefinedProperties,t)}function zy(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);BT("Data must be an object, but it was:",o,r);let a=LV(r,o),c,l;if(s.merge)c=new Qn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let p=tT(e,h,t);if(!o.contains(p))throw new z(V.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);jV(d,p)||d.push(p)}c=new Qn(d),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new QC(new dn(a),c,l)}var bh=class n extends Ui{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function OV(n,e,t){return new Ry({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var ZC=class n extends Ui{_toFieldTransform(e){return new na(e.path,new Us)}isEqual(e){return e instanceof n}},JC=class n extends Ui{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=OV(this,e,!0),r=this.Ku.map(s=>da(s,t)),i=new Vi(r);return new na(e.path,i)}isEqual(e){return e instanceof n&&Lv(this.Ku,e.Ku)}},XC=class n extends Ui{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=OV(this,e,!0),r=this.Ku.map(s=>da(s,t)),i=new ji(r);return new na(e.path,i)}isEqual(e){return e instanceof n&&Lv(this.Ku,e.Ku)}},eT=class n extends Ui{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new $s(e.serializer,EL(e.serializer,this.$u));return new na(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function UT(n,e,t,r){let i=n.Qu(1,e,t);BT("Data must be an object, but it was:",i,r);let s=[],o=dn.empty();la(r,(c,l)=>{let d=qT(e,c,t);l=at(l);let h=i.Nu(d);if(l instanceof bh)s.push(d);else{let p=da(l,h);p!=null&&(s.push(d),o.set(d,p))}});let a=new Qn(s);return new ky(o,a,i.fieldTransforms)}function $T(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[tT(e,r,t)],c=[i];if(s.length%2!=0)throw new z(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(tT(e,s[p])),c.push(s[p+1]);let l=[],d=dn.empty();for(let p=a.length-1;p>=0;--p)if(!jV(l,a[p])){let m=a[p],_=c[p];_=at(_);let b=o.Nu(m);if(_ instanceof bh)l.push(m);else{let E=da(_,b);E!=null&&(l.push(m),d.set(m,E))}}let h=new Qn(l);return new ky(d,h,o.fieldTransforms)}function FV(n,e,t,r=!1){return da(t,n.Qu(r?4:3,e))}function da(n,e){if(VV(n=at(n)))return BT("Unsupported field value:",e,n),LV(n,e);if(n instanceof Ui)return function(r,i){if(!PV(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=da(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=at(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return EL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=lt.fromDate(r);return{timestampValue:hl(i.serializer,s)}}if(r instanceof lt){let s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hl(i.serializer,s)}}if(r instanceof oa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ei)return{bytesValue:ML(i.serializer,r._byteString)};if(r instanceof Xe){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wh)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return gT(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${qy(r)}`)}(n,e)}function LV(n,e){let t={};return iL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):la(n,(r,i)=>{let s=da(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function VV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof lt||n instanceof oa||n instanceof ei||n instanceof Xe||n instanceof Ui||n instanceof wh)}function BT(n,e,t){if(!VV(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=qy(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function tT(n,e,t){if((e=at(e))instanceof Dr)return e._internalPath;if(typeof e=="string")return qT(n,e);throw My("Field path arguments must be of type string or ",n,!1,void 0,t)}var l7=new RegExp("[~\\*/\\[\\]]");function qT(n,e,t){if(e.search(l7)>=0)throw My(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Dr(...e.split("."))._internalPath}catch{throw My(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function My(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new z(V.INVALID_ARGUMENT,a+n+c)}function jV(n,e){return n.some(t=>t.isEqual(e))}var aa=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new nT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Hy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},nT=class extends aa{data(){return super.data()}};function Hy(n,e){return typeof e=="string"?qT(n,e):e instanceof Dr?e._internalPath:e._delegate._internalPath}function UV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Eh=class{},ca=class extends Eh{};function qi(n,e,...t){let r=[];e instanceof Eh&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof rT).length,a=s.filter(c=>c instanceof Ny).length;if(o>1||o>0&&a>0)throw new z(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Ny=class n extends ca{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return YV(e._query,t),new Zt(e.firestore,e.converter,NI(e._query,t))}_parse(e){let t=ua(e.firestore);return function(s,o,a,c,l,d,h){let p;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HF(h,d);let m=[];for(let _ of h)m.push(zF(c,s,_));p={arrayValue:{values:m}}}else p=zF(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HF(h,d),p=FV(a,o,h,d==="in"||d==="not-in");return Ne.create(l,d,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function $V(n,e,t){let r=e,i=Hy("where",n);return Ny._create(i,r,t)}var rT=class n extends Eh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:We.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)YV(o,c),o=NI(o,c)}(e._query,t),new Zt(e.firestore,e.converter,NI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var iT=class n extends ca{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ea(s,o)}(e._query,this._field,this._direction);return new Zt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Cr(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function BV(n,e="asc"){let t=e,r=Hy("orderBy",n);return iT._create(r,t)}var Py=class n extends ca{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Zt(e.firestore,e.converter,Jm(e._query,this._limit,this._limitType))}};function qV(n){return wV("limit",n),Py._create("limit",n,"F")}function zV(n){return wV("limitToLast",n),Py._create("limitToLast",n,"L")}var Oy=class n extends ca{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QV(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(i,s){return new Cr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function HV(...n){return Oy._create("startAt",n,!0)}function GV(...n){return Oy._create("startAfter",n,!1)}var Fy=class n extends ca{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=QV(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,function(i,s){return new Cr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function WV(...n){return Fy._create("endBefore",n,!1)}function KV(...n){return Fy._create("endAt",n,!0)}function QV(n,e,t,r){if(t[0]=at(t[0]),t[0]instanceof aa)return function(s,o,a,c,l){if(!c)throw new z(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let h of il(s))if(h.field.isKeyField())d.push(Xo(o,c.key));else{let p=c.data.field(h.field);if(Vy(p))throw new z(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){let m=h.field.canonicalString();throw new z(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(p)}return new Jr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=ua(n.firestore);return function(o,a,c,l,d,h){let p=o.explicitOrderBy;if(d.length>p.length)throw new z(V.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let _=0;_<d.length;_++){let b=d[_];if(p[_].field.isKeyField()){if(typeof b!="string")throw new z(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof b}`);if(!fT(o)&&b.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${b}' contains a slash.`);let E=o.path.child(Ve.fromString(b));if(!te.isDocumentKey(E))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);let R=new te(E);m.push(Xo(a,R))}else{let E=FV(c,l,b);m.push(E)}}return new Jr(m,h)}(n._query,n.firestore._databaseId,i,e,t,r)}}function zF(n,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new z(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fT(e)&&t.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ve.fromString(t));if(!te.isDocumentKey(r))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xo(n,new te(r))}if(t instanceof Xe)return Xo(n,t._key);throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qy(t)}.`)}function HF(n,e){if(!Array.isArray(n)||n.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YV(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var El=class{convertValue(e,t="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ls(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return la(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ot(o.doubleValue));return new wh(s)}convertGeoPoint(e){return new oa(ot(e.latitude),ot(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=dT(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sh(e));default:return null}}convertTimestamp(e){let t=Li(e);return new lt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ve.fromString(e);ce(qL(r));let i=new Vs(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(t)||vt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Gy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var sT=class extends El{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,t)}};var Fi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},cr=class extends aa{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ps(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Hy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ps=class extends cr{data(e={}){return super.data(e)}},Sr=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Fi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ps(this._firestore,this._userDataWriter,r.key,r,new Fi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ps(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Fi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:u7(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function u7(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}function zT(n,e){return n instanceof cr&&e instanceof cr?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sr&&e instanceof Sr&&n._firestore===e._firestore&&jT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function ZV(n){n=$e(n,Xe);let e=$e(n.firestore,ut);return yV(Jt(e),n._key).then(t=>KT(e,n,t))}var $i=class extends El{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,t)}};function JV(n){n=$e(n,Xe);let e=$e(n.firestore,ut),t=Jt(e),r=new $i(e);return r7(t,n._key).then(i=>new cr(e,r,n._key,i,new Fi(i!==null&&i.hasLocalMutations,!0),n.converter))}function XV(n){n=$e(n,Xe);let e=$e(n.firestore,ut);return yV(Jt(e),n._key,{source:"server"}).then(t=>KT(e,n,t))}function ej(n){n=$e(n,Zt);let e=$e(n.firestore,ut),t=Jt(e),r=new $i(e);return UV(n._query),vV(t,n._query).then(i=>new Sr(e,r,n,i))}function tj(n){n=$e(n,Zt);let e=$e(n.firestore,ut),t=Jt(e),r=new $i(e);return i7(t,n._query).then(i=>new Sr(e,r,n,i))}function nj(n){n=$e(n,Zt);let e=$e(n.firestore,ut),t=Jt(e),r=new $i(e);return vV(t,n._query,{source:"server"}).then(i=>new Sr(e,r,n,i))}function HT(n,e,t){n=$e(n,Xe);let r=$e(n.firestore,ut),i=Gy(n.converter,e,t);return xl(r,[zy(ua(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mt.none())])}function GT(n,e,t,...r){n=$e(n,Xe);let i=$e(n.firestore,ut),s=ua(i),o;return o=typeof(e=at(e))=="string"||e instanceof Dr?$T(s,"updateDoc",n._key,e,t,r):UT(s,"updateDoc",n._key,e),xl(i,[o.toMutation(n._key,mt.exists(!0))])}function rj(n){return xl($e(n.firestore,ut),[new qs(n._key,mt.none())])}function ij(n,e){let t=$e(n.firestore,ut),r=xh(n),i=Gy(n.converter,e);return xl(t,[zy(ua(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,mt.exists(!1))]).then(()=>r)}function WT(n,...e){var t,r,i;n=at(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||WC(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(WC(e[o])){let h=e[o];e[o]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,d;if(n instanceof Xe)l=$e(n.firestore,ut),d=Cl(n._key.path),c={next:h=>{e[o]&&e[o](KT(l,n,h))},error:e[o+1],complete:e[o+2]};else{let h=$e(n,Zt);l=$e(h.firestore,ut),d=h._query;let p=new $i(l);c={next:m=>{e[o]&&e[o](new Sr(l,p,h,m))},error:e[o+1],complete:e[o+2]},UV(n._query)}return function(p,m,_,b){let E=new wl(b),R=new _h(m,E,_);return p.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return IT(yield bl(p),R)})),()=>{E.Za(),p.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return CT(yield bl(p),R)}))}}(Jt(l),d,a,c)}function sj(n,e){return s7(Jt(n=$e(n,ut)),WC(e)?e:{next:e})}function xl(n,e){return function(r,i){let s=new Ut;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return VK(yield PT(r),i,s)})),s.promise}(Jt(n),e)}function KT(n,e,t){let r=t.docs.get(e._key),i=new $i(n);return new cr(n,i,e._key,r,new Fi(t.hasPendingWrites,t.fromCache),e.converter)}var d7={maxAttempts:5};var Ly=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ua(e)}set(e,t,r){this._verifyNotCommitted();let i=Ms(e,this._firestore),s=Gy(i.converter,t,r),o=zy(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,mt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=Ms(e,this._firestore),o;return o=typeof(t=at(t))=="string"||t instanceof Dr?$T(this._dataReader,"WriteBatch.update",s._key,t,r,i):UT(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,mt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=Ms(e,this._firestore);return this._mutations=this._mutations.concat(new qs(t._key,mt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ms(n,e){if((n=at(n)).firestore!==e)throw new z(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var oT=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ua(t)}get(t){let r=Ms(t,this._firestore),i=new sT(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return se();let o=s[0];if(o.isFoundDocument())return new aa(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new aa(this._firestore,i,r._key,null,r.converter);throw se()})}set(t,r,i){let s=Ms(t,this._firestore),o=Gy(s.converter,r,i),a=zy(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=Ms(t,this._firestore),a;return a=typeof(r=at(r))=="string"||r instanceof Dr?$T(this._dataReader,"Transaction.update",o._key,r,i,s):UT(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=Ms(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=Ms(e,this._firestore),r=new $i(this._firestore);return super.get(e).then(i=>new cr(this._firestore,r,t._key,i._document,new Fi(!1,!1),t.converter))}};function oj(n,e,t){n=$e(n,ut);let r=Object.assign(Object.assign({},d7),t);return function(s){if(s.maxAttempts<1)throw new z(V.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new Ut;return s.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){let l=yield e7(s);new HC(s.asyncQueue,l,a,o,c).au()})),c.promise}(Jt(n),i=>e(new oT(n,i)),r)}function aj(){return new bh("deleteField")}function cj(){return new ZC("serverTimestamp")}function lj(...n){return new JC("arrayUnion",n)}function uj(...n){return new XC("arrayRemove",n)}function Wy(n){return new eT("increment",n)}(function(e,t=!0){(function(i){Il=i})(NS),eu(new eo("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ut(new uI(r.getProvider("auth-internal")),new pI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vs(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ki(qO,"4.7.3",e),Ki(qO,"4.7.3","esm2017")})();var h7="firebase",f7="10.14.1";Ki(h7,f7,"app");var p7=(n,e)=>{let t=e?[e]:PS(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},ha=class{constructor(){return p7(g7)}},g7="app-check";function QT(){}var Ky=class{zone;delegate;constructor(e,t=t_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},YT=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",QT,{},QT,QT)),t.pipe(It({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Qy=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ky(Zone.current)),this.insideAngular=t.run(()=>new Ky(Zone.current,Qi)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(q(De))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function m7(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function jn(n){return y7(m7())(n)}function y7(n){return function(t){return t=t.lift(new YT(n.ngZone)),t.pipe(dr(n.outsideAngular),Yn(n.insideAngular))}}var v7=new Map,_7={activated:!1,tokenObservers:[]},w7={initialized:!1,enabled:!1};function Ar(n){return v7.get(n)||Object.assign({},_7)}function mj(){return w7}var b7="https://content-firebaseappcheck.googleapis.com/v1";var E7="exchangeDebugToken",hj={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},mde=24*60*60*1e3;var JT=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Ov,this.pending.promise.catch(t=>{}),yield I7(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ov,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function I7(n){return new Promise(e=>{setTimeout(e,n)})}var C7={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ks=new MS("appCheck","AppCheck",C7);function yj(n){if(!Ar(n).activated)throw Ks.create("use-before-activation",{appName:n.name})}function vj(r,i){return y(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw Ks.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Ks.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw Ks.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Ks.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(d[1])*1e3,p=Date.now();return{token:l.token,expireTimeMillis:p+h,issuedAtTimeMillis:p}})}function _j(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${b7}/projects/${t}/apps/${r}:${E7}?key=${i}`,body:{debug_token:e}}}var T7="firebase-app-check-database",D7=1,XT="firebase-app-check-store";var Yy=null;function S7(){return Yy||(Yy=new Promise((n,e)=>{try{let t=indexedDB.open(T7,D7);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ks.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(XT,{keyPath:"compositeKey"})}}}catch(t){e(Ks.create("storage-open",{originalErrorMessage:t?.message}))}}),Yy)}function A7(n,e){return x7(k7(n),e)}function x7(n,e){return y(this,null,function*(){let r=(yield S7()).transaction(XT,"readwrite"),s=r.objectStore(XT).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Ks.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function k7(n){return`${n.options.appId}-${n.name}`}var eD=new Xh("@firebase/app-check");function ZT(n,e){return Jh()?A7(n,e).catch(t=>{eD.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wj(){return mj().enabled}function bj(){return y(this,null,function*(){let n=mj();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var R7={error:"UNKNOWN_ERROR"};function M7(n){return xS.encodeString(JSON.stringify(n),!1)}function tD(n,e=!1){return y(this,null,function*(){let t=n.app;yj(t);let r=Ar(t),i=r.token,s;if(i&&!kh(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(kh(c)?i=c:yield ZT(t,void 0))}if(!e&&i&&kh(i))return{token:i.token};let o=!1;if(wj()){r.exchangeTokenPromise||(r.exchangeTokenPromise=vj(_j(t,yield bj()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield ZT(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Ar(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?eD.warn(c.message):eD.error(c),s=c}let a;return i?s?kh(i)?a={token:i.token,internalError:s}:a=pj(s):(a={token:i.token},r.token=i,yield ZT(t,i)):a=pj(s),o&&F7(t,a),a})}function N7(n){return y(this,null,function*(){let e=n.app;yj(e);let{provider:t}=Ar(e);if(wj()){let r=yield bj(),{token:i}=yield vj(_j(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function P7(n,e,t,r){let{app:i}=n,s=Ar(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&kh(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),fj(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>fj(n))}function Ej(n,e){let t=Ar(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function fj(n){let{app:e}=n,t=Ar(e),r=t.tokenRefresher;r||(r=O7(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function O7(n){let{app:e}=n;return new JT(()=>y(this,null,function*(){let t=Ar(e),r;if(t.token?r=yield tD(n,!0):r=yield tD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Ar(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},hj.RETRIAL_MIN_WAIT,hj.RETRIAL_MAX_WAIT)}function F7(n,e){let t=Ar(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function kh(n){return n.expireTimeMillis-Date.now()>0}function pj(n){return{token:M7(R7),error:n}}var nD=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Ar(this.app);for(let t of e)Ej(this.app,t.next);return Promise.resolve()}};function L7(n,e){return new nD(n,e)}function V7(n){return{getToken:e=>tD(n,e),getLimitedUseToken:()=>N7(n),addTokenListener:e=>P7(n,"INTERNAL",e),removeTokenListener:e=>Ej(n.app,e)}}var j7="@firebase/app-check",U7="0.8.8";var $7="app-check",gj="app-check-internal";function B7(){eu(new eo($7,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return L7(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(gj).initialize()})),eu(new eo(gj,n=>{let e=n.getProvider("app-check").getImmediate();return V7(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ki(j7,U7)}B7();var q7=["localhost","0.0.0.0","127.0.0.1"],Ade=typeof window<"u"&&q7.includes(window.location.hostname);var z7="firebase",H7="10.14.1";kr.registerVersion(z7,H7,"app-compat");var G7=["ngOnDestroy"],Tj=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(G7.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let h=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,h),h})})})});var rD=class{constructor(e){return e}},kl=new Z("angularfire2.app.options"),Zy=new Z("angularfire2.app.name");function Jy(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=kr.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>kr.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;W7("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new rD(o)}var W7=(n,...e)=>{x0()&&typeof console<"u"&&console[n](...e)};function Xy(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return K7(i,o)||(Cj("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Q7?" You may need to reload as Firebase is not HMR aware.":""}`),Cj("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function K7(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var Q7=typeof module<"u"&&!!module.hot,Cj=(n,...e)=>{x0()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var iD=new Z("angularfire2.auth.use-emulator"),sD=new Z("angularfire2.auth.settings"),oD=new Z("angularfire2.auth.tenant-id"),aD=new Z("angularfire2.auth.langugage-code"),cD=new Z("angularfire2.auth.use-device-language"),lD=new Z("angularfire.auth.persistence"),uD=(n,e,t,r,i,s,o,a)=>Xy(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]),Dj=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,d,h,p,m){let _=new ze,b=he(void 0).pipe(Yn(o.outsideAngular),Je(()=>s.runOutsideAngular(()=>import("./chunk-NLQML6YK.js"))),de(()=>Jy(t,s,r)),de(E=>uD(E,s,a,l,d,h,c,p)),Na({bufferSize:1,refCount:!1}));if(_s(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=he(null);else{b.pipe($n()).subscribe();let E=b.pipe(Je(U=>U.getRedirectResult().then(B=>B,()=>null)),jn,Na({bufferSize:1,refCount:!1})),R=b.pipe(Je(U=>new we(B=>({unsubscribe:s.runOutsideAngular(()=>U.onAuthStateChanged(K=>B.next(K),K=>B.error(K),()=>B.complete()))})))),j=b.pipe(Je(U=>new we(B=>({unsubscribe:s.runOutsideAngular(()=>U.onIdTokenChanged(K=>B.next(K),K=>B.error(K),()=>B.complete()))}))));this.authState=E.pipe(Nf(R),dr(o.outsideAngular),Yn(o.insideAngular)),this.user=E.pipe(Nf(j),dr(o.outsideAngular),Yn(o.insideAngular)),this.idToken=this.user.pipe(Je(U=>U?Pe(U.getIdToken()):he(null))),this.idTokenResult=this.user.pipe(Je(U=>U?Pe(U.getIdTokenResult()):he(null))),this.credential=au(E,_,this.authState.pipe(Lt(U=>!U))).pipe(de(U=>U?.user?U:null),dr(o.outsideAngular),Yn(o.insideAngular))}return Tj(this,b,s,{spy:{apply:(E,R,j)=>{(E.startsWith("signIn")||E.startsWith("createUser"))&&j.then(U=>_.next(U))}}})}static \u0275fac=function(r){return new(r||n)(q(kl),q(Zy,8),q(Kt),q(De),q(Qy),q(iD,8),q(sD,8),q(oD,8),q(aD,8),q(cD,8),q(lD,8),q(ha,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var J7="@firebase/firestore-compat",X7="0.3.38";function mD(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new z("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Sj(){if(typeof Uint8Array>"u")throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function Aj(){if(!sL())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}var ev=class n{constructor(e){this._delegate=e}static fromBase64String(e){return Aj(),new n(ei.fromBase64String(e))}static fromUint8Array(e){return Sj(),new n(ei.fromUint8Array(e))}toBase64(){return Aj(),this._delegate.toBase64()}toUint8Array(){return Sj(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function dD(n){return eQ(n,["next","error","complete"])}function eQ(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var hD=class{enableIndexedDbPersistence(e,t){return TV(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return DV(e._delegate)}clearIndexedDbPersistence(e){return AV(e._delegate)}},tv=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vs||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ir("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){bV(this._delegate,e,t,r)}enableNetwork(){return kV(this._delegate)}disableNetwork(){return RV(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,FT("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return xV(this._delegate)}onSnapshotsInSync(e){return sj(this._delegate,e)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nl(this,LT(this._delegate,e))}catch(t){throw In(t,"collection()","Firestore.collection()")}}doc(e){try{return new ti(this,xh(this._delegate,e))}catch(t){throw In(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ma(this,EV(this._delegate,e))}catch(t){throw In(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return oj(this._delegate,t=>e(new nv(this,t)))}batch(){return Jt(this._delegate),new rv(new Ly(this._delegate,e=>xl(this._delegate,e)))}loadBundle(e){return MV(this._delegate,e)}namedQuery(e){return NV(this._delegate,e).then(t=>t?new ma(this,t):null)}},Rl=class extends El{constructor(e){super(),this.firestore=e}convertBytes(e){return new ev(new ei(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return ti.forKey(t,this.firestore,null)}};function tQ(n){GF(n)}var nv=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Rl(e)}get(e){let t=fa(e);return this._delegate.get(t).then(r=>new pa(this._firestore,new cr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=fa(e);return r?(mD("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=fa(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=fa(e);return this._delegate.delete(t),this}},rv=class{constructor(e){this._delegate=e}set(e,t,r){let i=fa(e);return r?(mD("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=fa(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=fa(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ml=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Ps(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new ga(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new Rl(e),t),i.set(t,s)),s}};Ml.INSTANCES=new WeakMap;var ti=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rl(e)}static forPath(e,t,r){if(e.length%2!==0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Xe(t._delegate,r,new te(e)))}static forKey(e,t,r){return new n(t,new Xe(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Nl(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nl(this.firestore,LT(this._delegate,e))}catch(t){throw In(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=at(e),e instanceof Xe?VT(this._delegate,e):!1}set(e,t){t=mD("DocumentReference.set",t);try{return t?HT(this._delegate,e,t):HT(this._delegate,e)}catch(r){throw In(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?GT(this._delegate,e):GT(this._delegate,e,t,...r)}catch(i){throw In(i,"updateDoc()","DocumentReference.update()")}}delete(){return rj(this._delegate)}onSnapshot(...e){let t=xj(e),r=kj(e,i=>new pa(this.firestore,new cr(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return WT(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=JV(this._delegate):e?.source==="server"?t=XV(this._delegate):t=ZV(this._delegate),t.then(r=>new pa(this.firestore,new cr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ml.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function In(n,e,t){return n.message=n.message.replace(e,t),n}function xj(n){for(let e of n)if(typeof e=="object"&&!dD(e))return e;return{}}function kj(n,e){var t,r;let i;return dD(n[0])?i=n[0]:dD(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var pa=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ti(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return zT(this._delegate,e._delegate)}},ga=class extends pa{data(e){let t=this._delegate.data(e);return this._delegate._converter||WF(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},ma=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Rl(e)}where(e,t,r){try{return new n(this.firestore,qi(this._delegate,$V(e,t,r)))}catch(i){throw In(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,qi(this._delegate,BV(e,t)))}catch(r){throw In(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,qi(this._delegate,qV(e)))}catch(t){throw In(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,qi(this._delegate,zV(e)))}catch(t){throw In(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,qi(this._delegate,HV(...e)))}catch(t){throw In(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,qi(this._delegate,GV(...e)))}catch(t){throw In(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,qi(this._delegate,WV(...e)))}catch(t){throw In(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,qi(this._delegate,KV(...e)))}catch(t){throw In(t,"endAt()","Query.endAt()")}}isEqual(e){return jT(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=tj(this._delegate):e?.source==="server"?t=nj(this._delegate):t=ej(this._delegate),t.then(r=>new Rh(this.firestore,new Sr(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=xj(e),r=kj(e,i=>new Rh(this.firestore,new Sr(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return WT(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ml.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},fD=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new ga(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Rh=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ma(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new ga(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new fD(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new ga(this._firestore,r))})}isEqual(e){return zT(this._delegate,e._delegate)}},Nl=class n extends ma{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new ti(this.firestore,e):null}doc(e){try{return e===void 0?new ti(this.firestore,xh(this._delegate)):new ti(this.firestore,xh(this._delegate,e))}catch(t){throw In(t,"doc()","CollectionReference.doc()")}}add(e){return ij(this._delegate,e).then(t=>new ti(this.firestore,t))}isEqual(e){return VT(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ml.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function fa(n){return $e(n,Xe)}var pD=class n{constructor(...e){this._delegate=new Dr(...e)}static documentId(){return new n(_t.keyField().canonicalString())}isEqual(e){return e=at(e),e instanceof Dr?this._delegate._internalPath.isEqual(e._internalPath):!1}};var gD=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=cj();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=aj();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=lj(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=uj(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Wy(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var nQ={Firestore:tv,GeoPoint:oa,Timestamp:lt,Blob:ev,Transaction:nv,WriteBatch:rv,DocumentReference:ti,DocumentSnapshot:pa,Query:ma,QueryDocumentSnapshot:ga,QuerySnapshot:Rh,CollectionReference:Nl,FieldPath:pD,FieldValue:gD,setLogLevel:tQ,CACHE_SIZE_UNLIMITED:IV};function rQ(n,e){n.INTERNAL.registerComponent(new eo("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},nQ)))}function iQ(n){rQ(n,(e,t)=>new tv(e,t,new hD)),n.registerVersion(J7,X7)}iQ(kr);function sQ(n,e=Qi){return new we(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function Rj(n,e){return sQ(n,e)}function oQ(n,e){return Rj(n,e).pipe(di(void 0),uu(),de(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function _D(n,e){return Rj(n,e).pipe(de(t=>({payload:t,type:"query"})))}var iv=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=Pj(r,t);return new ov(i,s,this.afs)}snapshotChanges(){return oQ(this.ref,this.afs.schedulers.outsideAngular).pipe(jn)}valueChanges(e={}){return this.snapshotChanges().pipe(de(({payload:t})=>e.idField?ne(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Pe(this.ref.get(e)).pipe(jn)}};function sv(n,e){return _D(n,e).pipe(di(void 0),uu(),de(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(h=>h.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(h=>h.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function Mj(n,e,t){return sv(n,t).pipe(so((r,i)=>aQ(r,i.map(s=>s.payload),e),[]),lu(),de(r=>r.map(i=>({type:i.type,payload:i}))))}function aQ(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=cQ(n,r))}),n}function yD(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function cQ(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return yD(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return yD(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return yD(n,e.oldIndex,1);break}return n}function Nj(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var ov=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=sv(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(de(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(di(void 0),uu(),Lt(([r,i])=>i.length>0||!r),de(([,r])=>r),jn)}auditTrail(e){return this.stateChanges(e).pipe(so((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Nj(e);return Mj(this.query,t,this.afs.schedulers.outsideAngular).pipe(jn)}valueChanges(e={}){return _D(this.query,this.afs.schedulers.outsideAngular).pipe(de(t=>t.payload.docs.map(r=>e.idField?ne(P({},r.data()),{[e.idField]:r.id}):r.data())),jn)}get(e){return Pe(this.query.get(e)).pipe(jn)}add(e){return this.ref.add(e)}doc(e){return new iv(this.ref.doc(e),this.afs)}},vD=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?sv(this.query,this.afs.schedulers.outsideAngular).pipe(jn):sv(this.query,this.afs.schedulers.outsideAngular).pipe(de(t=>t.filter(r=>e.indexOf(r.type)>-1)),Lt(t=>t.length>0),jn)}auditTrail(e){return this.stateChanges(e).pipe(so((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=Nj(e);return Mj(this.query,t,this.afs.schedulers.outsideAngular).pipe(jn)}valueChanges(e={}){return _D(this.query,this.afs.schedulers.outsideAngular).pipe(de(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),jn)}get(e){return Pe(this.query.get(e)).pipe(jn)}},lQ=new Z("angularfire2.enableFirestorePersistence"),uQ=new Z("angularfire2.firestore.persistenceSettings"),dQ=new Z("angularfire2.firestore.settings"),hQ=new Z("angularfire2.firestore.use-emulator");function Pj(n,e=t=>t){return{query:e(n),ref:n}}var Oj=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,d,h,p,m,_,b,E,R,j){this.schedulers=c;let U=Jy(t,a,r),B=d;h&&uD(U,a,p,_,b,E,m,R),[this.firestore,this.persistenceEnabled$]=Xy(`${U.name}.firestore`,"AngularFirestore",U.name,()=>{let K=a.runOutsideAngular(()=>U.firestore());if(s&&K.settings(s),B&&K.useEmulator(...B),i&&!_s(o)){let Q=()=>{try{return Pe(K.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(T){return typeof console<"u"&&console.warn(T),he(!1)}};return[K,a.runOutsideAngular(Q)]}else return[K,he(!1)]},[s,B,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=Pj(i,r),a=this.schedulers.ngZone.run(()=>s);return new ov(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new vD(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new iv(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(q(kl),q(Zy,8),q(lQ,8),q(dQ,8),q(Kt),q(De),q(Qy),q(uQ,8),q(hQ,8),q(Dj,8),q(iD,8),q(sD,8),q(oD,8),q(aD,8),q(cD,8),q(lD,8),q(ha,8))};static \u0275prov=Y({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Fj=(()=>{let e=class e{constructor(r){this.store=r,this.TABLE_NAME="user_speech",this.uuid=YE()}setRecordUid(r){r&&(this.uuid=r)}getRecordUid(){return this.uuid}getRecord(r){return this.store.collection(this.TABLE_NAME).doc(r).valueChanges()}incrementHits(r="Navi"){return y(this,null,function*(){this.store.doc(`${r}/config`).set({numberOfHits:Wy(1)},{merge:!0}).catch(i=>console.error("Error incrementing hit counter : ",i))})}saveAppScore(r,i="Navi"){return y(this,null,function*(){r.updated_at=new Date,this.store.doc(`${i}/config`).set(r,{merge:!0}).catch(s=>(console.error("Error upserting : ",s),s))})}getAppdata(r="Navi"){return this.store.doc(`${r}/config`).valueChanges()}saveSpeech(r){return y(this,null,function*(){return r.id=this.uuid,r.updated_at=new Date,this.store.collection(this.TABLE_NAME).doc(this.uuid).set(r,{merge:!0}).then(()=>this.uuid).catch(i=>(console.error("Error upserting : ",i),i.status)),this.uuid})}};e.\u0275fac=function(i){return new(i||e)(q(Oj))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var gQ=(n,e)=>({"btn-success pulse-animation":n,"btn-danger":e});function mQ(n,e){if(n&1){let t=yt();D(0,"p"),N(1,"Try saying \u{1F5E3}\uFE0F "),D(2,"span",18),N(3),A(),N(4," or "),D(5,"span",14),N(6),A(),N(7,". Say "),D(8,"span",18),N(9),A(),N(10," to clean the board. "),D(11,"button",19),oe("click",function(){le(t);let i=pe();return ue(i.toggleListening())}),re(12,"i",20),A(),N(13,"\xA0 "),D(14,"a",21),oe("click",function(){le(t);let i=pe();return ue(i.copyVoiceSmithLink())}),D(15,"i",22),oe("click",function(){le(t);let i=pe();return ue(i.copyVoiceSmithLink())}),A(),N(16,"\xA0 "),D(17,"span",23),N(18),A()(),N(19,"\xA0 "),D(20,"a",24),re(21,"i",25),A(),D(22,"span",26),N(23,"Desktop-only / "),D(24,"span",27),N(25,"Mobile-limited"),A()()()}if(n&2){let t=pe();L(3),Ue(t.START_COMMAND),L(3),Ue(t.STOP_COMMAND),L(3),Ue(t.CLEAR_COMMAND),L(2),W("ngClass",Qp(7,gQ,t.listening,!t.listening)),L(),W("ngClass",t.listening?"fa-microphone":"fa-microphone-slash"),L(3),W("ngClass",t.copied?"fa-solid":"fa-regular"),L(3),Ue(t.getRecordUid())}}function yQ(n,e){n&1&&(D(0,"span",29),N(1,"Listening"),A())}function vQ(n,e){n&1&&(D(0,"span",29),N(1,"Stopped"),A())}function _Q(n,e){if(n&1&&(D(0,"p"),N(1,"Transcript will appear in the space below as your host speaks. "),ge(2,yQ,2,0,"span",28)(3,vQ,2,0,"span",28),A()),n&2){let t=pe();L(2),W("ngIf",t.listening),L(),W("ngIf",!t.listening)}}function wQ(n,e){if(n&1&&(D(0,"span",30),N(1),D(2,"span",13),N(3),A()()),n&2){let t=e.$implicit,r=pe();W("ngClass",r.isLeader(t.key)?"badge badge-border-success":"badge badge-border-danger"),L(),ct("",t.key,"\xA0"),L(2),Ue(t.value)}}var av=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.zone=r,this.witaiService=i,this.messaging=s,this.database=o,this.route=a,this.router=c,this.START_COMMAND="start listening",this.STOP_COMMAND="stop listening",this.CLEAR_COMMAND="clear",this.MAX_SPEECH_TIME=5,this.test_command="start listening",this.fillerWords=["oh","ok","okay","um","uh","it's like","like","you know","basically","actually","so","right","I mean","well","just","er","anyway","now","let me think","haha","bla","really","and","well"],this.probableFillers=["fine","good","awesome"],this.unwantedVerbs=["am","is","are","were","do","did","done","doing","go","going","worked","work","working"],this.listening=!1,this.speaking=!1,this.fullTranscript=`Hi there! \u{1F44B} I am nA'vI
I would love to hear your story.
\u{1F3A4} Tell me something about yourself ..

Say "${this.START_COMMAND}" to begin \u{1F680}`,this.interimTranscript="",this.currentTerm="",this.verbsMap=new Map,this.leaderwordsMap=new Map,this.fillerWordsMap=new Map,this.goodbadwordsMap=new Map,this.sentenseClarity={good:0,bad:0},this.previousTime=0,this.totalWords=0,this.prevSentense="",this.isMobile=!1,this.minutes=this.MAX_SPEECH_TIME,this.seconds=0,this.speechTime="",this.voiceMode=!1,this.copied=!1,this.totalScore=0,this.appData={numberOfHits:0,highestScore:0},this.leadershipWords=["lead","vision","empower","collaborate","adapt","communicate","integrate","mentore","mentor","account","innovate","innovation","resilient","resilience","delegate","resolve","include","strategic","motivate","empower","encourage","impact","growth","deliver","delivering","collaboration"],this.createTimer=()=>{this.timerInterval=setInterval(()=>{this.updateTime()},1e3),this.speechTime=""},this.updateTime=()=>{this.seconds>0?this.seconds--:this.minutes>0?(this.minutes--,this.seconds=59):(console.debug("Time's up!"),this.stopListening()),this.speechTime=`${this.minutes}m ${this.seconds}s`},this.clearTimer=()=>{this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.minutes=this.MAX_SPEECH_TIME,this.seconds=0},this.myTask=()=>{let d=performance.now(),h=d-this.previousTime;h!=d&&h>5,requestAnimationFrame(this.myTask)},this.isMobile=Me.isMobileBrowser();let l=Me.getQueryParam(a,"vid");o.setRecordUid(l),this.initCompromiseNLP(),l?(this.voiceMode=!1,this.fullTranscript="",this.database.getRecord(l).subscribe(d=>{if(d){let h=d.message;this.updateFullText(h)}})):(this.voiceMode=!0,this.initAnnyang())}setStartCommand(r){this.START_COMMAND=r}setStopCommand(r){this.STOP_COMMAND=r}setClearCommand(r){this.CLEAR_COMMAND=r}getRecordUid(){return this.database.getRecordUid().split("-")[0]}getVoiceSmithLink(){return`${ae.host}/voicesmith?vid=${this.database.getRecordUid()}`}copyVoiceSmithLink(){return y(this,null,function*(){try{yield navigator.clipboard.writeText(this.getVoiceSmithLink()),this.copied=!0}catch{console.error("Failed to copy the link")}})}isLeader(r){return this.leaderwordsMap.get(r)!=null}analyseClarity(r){return y(this,null,function*(){if(r){let i=r.trim().split(" ").length;i>=5&&i<=20?(this.sentenseClarity.good++,this.totalScore++):this.sentenseClarity.bad++,this.totalWords+=i}})}analyseVerbs(r){return y(this,null,function*(){let i=r.match("#Verb").out("array");return i.forEach(s=>{let o=s.toLowerCase();this.unwantedVerbs.includes(o)||(this.verbsMap.has(o)?this.verbsMap.set(o,this.verbsMap.get(o)+1):this.verbsMap.set(o,1),this.totalScore++)}),i.length})}analyseFillers(r){return y(this,null,function*(){let i=r.lookup(this.fillerWords).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.fillerWordsMap.has(o)?this.fillerWordsMap.set(o,this.fillerWordsMap.get(o)+1):this.fillerWordsMap.set(o,1),this.totalScore=this.totalScore-2,this.goodbadwordsMap.set(o,this.fillerWordsMap.get(o))}),i.length>0})}analyseLeaedershipQualities(r){return y(this,null,function*(){let i=r.compute("root").lookup(this.leadershipWords,{form:"root"}).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.leaderwordsMap.has(o)?this.leaderwordsMap.set(o,this.leaderwordsMap.get(o)+1):this.leaderwordsMap.set(o,1),this.totalScore=this.totalScore+3,this.goodbadwordsMap.set(o,this.leaderwordsMap.get(o))}),i.length})}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"SpeechToText":this.analyseClarity(i.payload);let s=this.nlp(i.payload);this.analyseFillers(s),this.analyseVerbs(s),this.analyseLeaedershipQualities(s),this.voiceMode&&(this.witaiService.getIntent(i.payload).then(o=>{}),this.database.saveSpeech({message:i.payload}));break;default:break}}),this.database.getAppdata().subscribe(r=>{this.appData=r})}initCompromiseNLP(){this.loadExternalScript("https://unpkg.com/compromise").then(()=>{this.nlp=window.nlp,this.nlp&&this.nlp.compile(this.leadershipWords)})}initAnnyang(){this.loadExternalScript("assets/annyang.js").then(()=>{this.initializeSpeechRecognition()})}stopListening(){this.listening&&this.voiceMode&&this.database.saveSpeech({message:this.STOP_COMMAND}),this.listening=!1,this.interimTranscript="",this.clearTimer(),this.totalScore>this.appData.highestScore&&this.database.saveAppScore({highestScore:this.totalScore})}startListening(){this.listening||this.database.incrementHits(),this.fullTranscript="",this.listening=!0,this.clearMaps(),this.createTimer(),this.totalScore=0}clearCommand(){this.fullTranscript="",this.interimTranscript="",this.clearMaps(),this.totalScore=0}toggleListening(){this.listening=!this.listening,this.listening?this.startListening():this.stopListening()}clearMaps(){this.leaderwordsMap.clear(),this.verbsMap.clear(),this.fillerWordsMap.clear(),this.goodbadwordsMap.clear(),this.previousTime=0,this.totalWords=0,this.sentenseClarity={good:0,bad:0},this.timerInterval&&(clearInterval(this.timerInterval),this.speechTime="")}initializeSpeechRecognition(){if(this.annyang=window.annyang,this.annyang){let r={"Stop listening":()=>{this.zone.run(()=>{this.stopListening()})},"Start listening":()=>{this.zone.run(()=>{this.startListening()})},Clear:()=>{this.zone.run(()=>{this.clearCommand()})}};this.annyang.addCallback("result",(i,s,o)=>{if(this.listening){let a=this.previousTime?o-this.previousTime>=300:!1;this.previousTime=o,this.zone.run(()=>{if(this.interimTranscript="",s&&i[0]){if(this.isMobile){let l=i[0].trim();if(this.prevSentense==l)return;this.prevSentense=l}let c=i[0]+(a?". ":" ");this.updateFullText(c)}else this.interimTranscript+=i})}}),this.annyang.addCallback("soundstart",()=>{console.debug("sound detected"),this.zone.run(()=>{this.speaking=!0})}),this.annyang.addCommands(r),this.recognition=this.annyang.getSpeechRecognizer(),this.recognition?(this.recognition.interimResults=!this.isMobile,this.annyang.start({autoRestart:!0,continuous:!0}),console.debug("Speech recognition started")):console.error("Voice is not supported in this browser.")}else console.error("Voice is not supported in this browser.")}loadExternalScript(r){return new Promise((i,s)=>{let o=document.createElement("script");o.src=r,o.type="application/javascript",o.onload=()=>{i()},o.onerror=()=>{s("Script load error")},document.body.appendChild(o)})}updateFullText(r){this.voiceMode?r.includes(this.START_COMMAND)||(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r):r.includes(this.CLEAR_COMMAND)?this.clearCommand():r.includes(this.STOP_COMMAND)?this.stopListening():(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r,this.listening=!0)}};e.\u0275fac=function(i){return new(i||e)($(De),$(jO),$(cn),$(Fj),$(Ln),$(wn))},e.\u0275cmp=Re({type:e,selectors:[["app-voice-smith"]],decls:45,vars:16,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-8"],[4,"ngIf"],["id","voice-output"],[1,"float-end"],[1,"fa-regular","fa-clock"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"small"],[1,"badge","badge-border-info"],[1,"badge","text-bg-light"],[1,"badge","badge-border-danger"],[1,"badge","badge-border-primary"],[1,"card-text"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"badge","badge-border-success"],[1,"btn","rounded-circle","justify-content-center","align-items-center",3,"click","ngClass"],[1,"fas",3,"ngClass"],["target","_blank",1,"text-decoration-none",3,"click"],[1,"fa-clipboard",3,"click","ngClass"],[1,"badge","rounded-pill","text-bg-primary"],["href","https://www.merriam-webster.com/word-of-the-day","target","_blank",1,""],[1,"fa-solid","fa-lightbulb",2,"color","#efbc06"],[1,"d-sm-none","badge","badge-border-success"],[1,"text-strike-black"],["class","badge text-bg-primary",4,"ngIf"],[1,"badge","text-bg-primary"],[3,"ngClass"]],template:function(i,s){i&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1),ge(4,mQ,26,10,"p",3)(5,_Q,4,2,"p",3),A(),D(6,"div",4),N(7),D(8,"em"),N(9),A()(),D(10,"div",5),N(11),D(12,"span"),N(13),A(),N(14,"\xA0"),re(15,"i",6),N(16,"\xA0"),D(17,"span"),N(18),A()()(),D(19,"div",7)(20,"div",8)(21,"div",9)(22,"h5",10),N(23,"Strength Board : "),D(24,"span",11),N(25),A()(),D(26,"p")(27,"span",12),N(28,"Actions\xA0"),D(29,"span",13),N(30),A()(),N(31," | "),D(32,"span",14),N(33,"Fillers\xA0"),D(34,"span",13),N(35),A()(),N(36," | "),D(37,"span",15),N(38,"Clarity\xA0"),D(39,"span",13),N(40),A()()(),re(41,"hr"),D(42,"div",16),ge(43,wQ,4,3,"span",17),xt(44,"keyvalue"),A()()()()()()),i&2&&(L(4),W("ngIf",s.voiceMode),L(),W("ngIf",!s.voiceMode),L(2),ct("",s.fullTranscript," "),L(2),Ue(s.interimTranscript),L(2),Wp("Highest : ",s.appData.highestScore," | Tried : ",s.appData.numberOfHits," | "),L(2),ct("Words : ",s.totalWords,""),L(5),Ue(s.speechTime),L(7),Ue(s.totalScore),L(5),Ue(s.verbsMap.size),L(5),Ue(s.fillerWordsMap.size),L(5),Wp("",s.sentenseClarity.good,"/",s.sentenseClarity.bad,""),L(3),W("ngForOf",Mn(44,14,s.goodbadwordsMap)))},dependencies:[lc,Bt,qt,ys],styles:["#voice-output[_ngcontent-%COMP%]{font-size:1.4em;line-height:1.6;border:1px solid #ccc;padding:20px;min-height:200px;background-color:#f9f9f9;margin-top:10px;white-space:pre-wrap}.typing-cursor[_ngcontent-%COMP%]{border-right:2px solid black;animation:_ngcontent-%COMP%_blink 1s steps(1) infinite}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #007bffb3}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 0 #007bffb3}50%{transform:scale(1.1);box-shadow:0 0 10px #00ff7bb3}to{transform:scale(1);box-shadow:0 0 #007bffb3}}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}.badge-border-primary[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-primary);color:var(--bs-primary)!important}.badge-border-danger[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-danger);color:var(--bs-danger)!important}.badge-border-info[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-info);color:var(--bs-info)!important}.text-strike-black[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#000}"]});let n=e;return n})();var wD=(()=>{let e=class e extends sr{constructor(r,i,s,o){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=o,this.homePageContent="Loading..",this.imgLayout="LayoutMix",this.firstHeading=!1,this.firstPara=!1,this.loadNewWidget=!1,this.usersFileAlreadyLoaded=!1}userInitialised(){this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":this.titleService.setTitle(J.ghUser.name),this.routerFileUrl?this.githubService.getMdFileContent(this.basePath,this.routerFileUrl).then(s=>{this.homePageContent=s,this.usersFileAlreadyLoaded=!0}).catch(s=>this.homePageContent=s).finally(()=>{this.usersFileAlreadyLoaded||(J.YOUR_READ_ME?this.homePageContent=J.YOUR_READ_ME:this.githubService.getInstalledAccessToken()?this.githubService.getInstalledContent(J.ghUserLoaded).then(s=>{this.homePageContent=s}):this.githubService.getReadMeContent(J.ghUserLoaded).then(s=>{this.homePageContent=s}).catch(s=>{console.log(J.ghUserLoaded+" not available")}))}):this.githubService.getMdFileContent(J.ghUserLoaded,"README.md").then(s=>{this.homePageContent=s}).catch(s=>{console.log(J.ghUserLoaded+" not available")});break;case"UserDirectory":break;default:break}})}ngAfterViewInit(){}ngOnInit(){if(J.INTERNAL_FOLDERS.includes(this.basePath)){this.router.navigate(["/i"+Me.getUrl(this.router)]);return}this.markdownService.renderer.html=r=>(Me.getFirstLine(r).includes("Widget")&&(this.loadNewWidget=!0),this.imgLayout=="<!-- Theme:Classic, ImgAlign:Left Widget:NAVI-->"||this.imgLayout,r),this.markdownService.renderer.heading=(r,i,s)=>i==1&&!this.firstHeading?(this.firstHeading=!0,`<h1 class="first-heading">${s}</h1>`):st.prototype.heading.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.paragraph=r=>r.startsWith("<a")&&r.endsWith("</a>")?r:this.firstHeading&&!this.firstPara?(this.firstPara=!0,`<p class="first-para">${r}<p>`):`<p>${r}<p>`,this.markdownService.renderer.link=(r,i,s)=>st.prototype.link.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.image=(r,i,s)=>`<img src="${r}" class="img-fluid mx-auto d-block" alt="${s}">`}onMarkdownReady(){if(this.applyLastHeadingStyle(),this.loadNewWidget){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(av);r.appendChild(i.location.nativeElement)}}}applyLastHeadingStyle(){let r=document.querySelectorAll("h1");if(r.length>1){let i=r[r.length-1];i.classList.add("cta");let s=i.nextElementSibling;for(;s;)s.classList.add("cta"),s=s.nextElementSibling}}};e.\u0275fac=function(i){return new(i||e)($(an),$(Rt),$(Pn),$(Rn))},e.\u0275cmp=Re({type:e,selectors:[["app-ghhome"]],features:[gt],decls:5,vars:1,consts:[["mdContent",""],[1,"container"],[1,"row","justify-content-center"],[1,"container",3,"ready","data"]],template:function(i,s){if(i&1){let o=yt();D(0,"div",1)(1,"div",2,0)(3,"markdown",3),oe("ready",function(){return le(o),ue(s.onMarkdownReady())}),N(4,`
        `),A()()()}i&2&&(L(3),W("data",s.homePageContent))},dependencies:[On],styles:[".badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}"]});let n=e;return n})();function bQ(n,e){if(n&1&&(D(0,"div",6)(1,"div",7)(2,"a",8),re(3,"img",9),A(),D(4,"div",10)(5,"a",11)(6,"h5",12),N(7),A()()()()()),n&2){let t=e.$implicit,r=pe();L(2),W("href",r.galaryLinks.get(t.key),pt),L(),on("alt",t.key),W("src",t.value,pt),L(2),W("href",r.galaryLinks.get(t.key),pt),L(2),Ue(t.key)}}var Lj=(()=>{let e=class e extends sr{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.markdownContent="Loading..",this.galaryLinks=new Map,this.galaryImgs=new Map}userInitialised(){this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":this.titleService.setTitle(J.ghUser.name),this.githubService.getReadMeContent(this.routerFileUrl).then(s=>this.markdownContent=s);break;default:break}})}ngOnInit(){this.markdownService.renderer.link=(r,i,s)=>(this.galaryLinks.set(s,r),st.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.image=(r,i,s)=>(this.galaryImgs.set(s,r),s)}onMarkdownReady(){}};e.\u0275fac=function(i){return new(i||e)($(an),$(Rt),$(Pn))},e.\u0275cmp=Re({type:e,selectors:[["app-crazy-coupons"]],features:[gt],decls:8,vars:4,consts:[[1,"container","mt-5"],[1,"row"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"container"],[1,"row","justify-content-center"],[3,"ready","data"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],["target","_blank","rel","noopener noreferrer",1,"text-decoration-none",3,"href"],[1,"card-title"]],template:function(i,s){i&1&&(D(0,"div",0)(1,"div",1),ge(2,bQ,8,5,"div",2),xt(3,"keyvalue"),A()(),D(4,"div",3)(5,"div",4)(6,"markdown",5),oe("ready",function(){return s.onMarkdownReady()}),N(7,`
        `),A()()()),i&2&&(L(2),W("ngForOf",Mn(3,2,s.galaryImgs)),L(4),W("data",s.markdownContent))},dependencies:[Bt,On,ys],styles:['@import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css";.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#333;margin-top:4px;text-align:left;line-height:1.2}.card-body[_ngcontent-%COMP%]{padding:8px}.card[_ngcontent-%COMP%]{border:none}']});let n=e;return n})();var cv=(()=>{let e=class e{constructor(r,i){this.renderer=r,this.el=i}ngOnInit(){let r=this.renderer.createElement("script");r.src="https://giscus.app/client.js",r.setAttribute("data-repo","publichomepage/discuss"),r.setAttribute("data-repo-id","R_kgDONHZY8A"),r.setAttribute("data-category","Announcements"),r.setAttribute("data-category-id","DIC_kwDONHZY8M4CjyZp"),r.setAttribute("data-mapping","pathname"),r.setAttribute("data-reactions-enabled","1"),r.setAttribute("data-emit-metadata","1"),r.setAttribute("data-theme","light"),r.setAttribute("data-lang","en"),r.setAttribute("crossorigin","anonymous"),r.async=!0;let i=this.el.nativeElement.querySelector("#discuss-pane");this.renderer.appendChild(i,r),window.addEventListener("message",this.handleMessage.bind(this))}ngOnDestroy(){window.removeEventListener("message",this.handleMessage.bind(this))}handleMessage(r){if(r.origin!=="https://giscus.app"||!(typeof r.data=="object"&&r.data.giscus))return;let i=r.data.giscus;console.log("GiscusData"+JSON.stringify(r.data))}};e.\u0275fac=function(i){return new(i||e)($(kn),$(At))},e.\u0275cmp=Re({type:e,selectors:[["app-giscus-widget"]],decls:1,vars:0,consts:[["id","discuss-pane"]],template:function(i,s){i&1&&re(0,"div",0)}});let n=e;return n})();var Mh=(()=>{let e=class e{};e.NEW_USER_CHANNEL="https://discord.com/api/webhooks/1161881028474966077/1NlJyAYOMZbQTZmbVL_WAEm4S_whyKQ275RsOf3PHYqF7naHYmx9z9lFNW2kqzlLr0I-",e.WEB_ERROR_CHANNEL="https://discord.com/api/webhooks/1161880477750272000/I-DJecqOhonKLsy75jP6iVeGxpqxMuu8WZ8wgBd31o4rZzF49vXnjKo9Tv0p5S6HTm7j",e.PUBLISHING_HELP_CHANNEL="https://discord.com/api/webhooks/1161873930991190078/FHGUfffC-VfjGOrLv9OU0EAkmeqM0-3o6phOYtg3cGkjG1E57_CPSAhQ0_pJO6AYNLC7",e.INTERVIEW_ASSISTANCE_CHANNEL="https://discord.com/api/webhooks/1177388543023272059/Tqt3tk3Bm3tvd6aZksnQ9-crhr8qWTby6HEWguT3nb5DG-10Y7zV3vh84D7utAdTvL17",e.DEFAULT_PAGE_COUNT=777,e.DEFAULT_PAGE_LIKES=17,e.MAX_SIDE_PANEL_VIDEO_LINKS=5,e.MAX_QUESTION_TIMEOUT=2500,e.JUDGE_0_SUBMISSION_URL="https://judge0-ce.p.rapidapi.com/submissions?base64_encoded=true&fields=*",e.DRAFT_HEADER="<!-- Draft -->",e.DRAFT_PAGE_LINK="/faqs/draft_content",e.CODING_QUESTIONS_CONTENT_HEADER="<!-- question -->",e.CODING_SOLUTIONS_CONTENT_HEADER="<!-- correct_solution -->",e.CODING_ONE_TEST_CASE_CONTENT_HEADER="<!-- runOneTestCaseHandler -->",e.CODING_ALL_TESTS_CONTENT_HEADER="<!-- runAllTestCases -->",e.SELECTIFY_ANSWER_CONTENT_HEADER="<!-- Answer[ ]?=(.*)-->",e.ASSESSMENT_FOLDER_HEADER="<!-- Assessment Folder : (?<name>\\S+) -->",e.ASSESSMENT_KNOWLEDGE_CHECK_HEADER=/<!-- Knowledge Check | (\w+) | (\S+) | (\w+) -->/g,e.ASSESSMENT_QUESTIONS_FILE_NAME_SYNTAX="(?<qId>\\d+)-(?<qName>\\S+).md",e.SELECT_OPTIONS_HEADER="<!-- Select options -->";let n=e;return n})();var jj=(()=>{let e=class e{constructor(r){this.sanitizer=r}transform(r){return this.sanitizer.bypassSecurityTrustResourceUrl(r)}};e.\u0275fac=function(i){return new(i||e)($(So,16))},e.\u0275pipe=cs({name:"safe",type:e,pure:!0});let n=e;return n})();var IQ=(n,e)=>({"fa-play":n,"fa-pause":e});function CQ(n,e){if(n&1&&(D(0,"li")(1,"a",21),N(2),A()()),n&2){let t=e.$implicit,r=pe(2);L(),Gp("href","/i/",t,"",pt),L(),Ue(r.getFileName(t))}}function TQ(n,e){if(n&1&&(D(0,"div",14)(1,"div",15),N(2),D(3,"a",16),re(4,"i",17),A()(),D(5,"div",18)(6,"div",19)(7,"div",8)(8,"ul",20),ge(9,CQ,3,3,"li",10),A()()()()()),n&2){let t=pe();L(2),ct("",t.folderName," "),L(7),W("ngForOf",t.filesAvailable)}}function DQ(n,e){if(n&1&&(D(0,"div",22)(1,"div",23)(2,"p"),N(3,"Try these challenge questions and get better on this topic."),A(),D(4,"a",24),re(5,"i",25),N(6,"\xA0Knowledge Check"),A()()()),n&2){let t=pe();L(4),on("href",t.assementLink,pt)}}function SQ(n,e){n&1&&(D(0,"div")(1,"b"),N(2,"Practice questions"),A()())}function AQ(n,e){if(n&1&&(D(0,"li")(1,"a",26),N(2),A()()),n&2){let t=e.$implicit;L(),on("href",t,pt),L(),Ue(t.split("problems")[1])}}function xQ(n,e){n&1&&(D(0,"div",27)(1,"b"),N(2,"Video reference"),A()())}function kQ(n,e){if(n&1&&(D(0,"div",28),re(1,"iframe",29),xt(2,"safe"),A()),n&2){let t=e.$implicit;L(),W("src",Mn(2,1,t),Vp)}}function RQ(n,e){if(n&1){let t=yt();D(0,"a",30),oe("click",function(){le(t);let i=pe();return ue(i.speakText())}),re(1,"i",31),A()}if(n&2){let t=pe();L(),W("ngClass",Qp(1,IQ,!t.isPaused,t.isPaused))}}var Nh=(()=>{let e=class e extends sr{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.viewContainer=G(Rn),this.filesAvailable=[],this.availableYoutubeLinks=new Set,this.leetcodeLinks=new Set,this.folderName="",this.readmeFileUrlContent="",this.readmeFileUrl="",this.assementLink="",this.speechContent=null,this.isPaused=!1,this.isSpeaking=!1,this.isDraftArticle=!1,this.loadPlugin=!1,this.firstLineProcessed=!1,this.hasSelectOptionsHeader=!1,this.speechSir=window.speechSynthesis}userInitialised(){this.messaging.event$.subscribe(r=>{switch(r.cmd){case"UserContext":this.folderName=this.articleFolderName;let s=Me.getRouterUrl(this.router,this.basePath+"/"+this.folderName);s.endsWith(".md")||(s=s+".md"),this.readmeFileUrl=Me.getGhUserFilePath(J.ghUserLoaded,`${this.folderName}/${s}`,this.githubService.hasInstalledAccessToken()),this.readmeFileUrl&&this.githubService.getLocalFileContent(this.readmeFileUrl).then(o=>{this.readmeFileUrlContent=o}).catch(o=>this.readmeFileUrlContent=o);break;case"UserDirectory":this.githubService.getGhDirectoryContents(this.githubUser,!0,this.getFolderName()).then(o=>{this.filesAvailable=o.files.filter(a=>!a.includes("README.md"))});break;default:break}})}getFolderName(){let r=this.routerFileUrl.substring(this.routerFileUrl.lastIndexOf("/")+1);return r.endsWith("md")?super.getFolderName():r}ngOnInit(){this.router.events.subscribe(r=>{r.type==15&&this.ngOnDestroy()}),this.markdownService.renderer.html=r=>{if(this.processFirstLine(r),this.isDraftArticle)return"";let i=r.match(Mh.ASSESSMENT_FOLDER_HEADER);if(i!=null&&i.groups&&i.groups.name){let s=i.groups.name;return this.assementLink=s.includes("http")?s:`/assessments/${s}`,""}return this.hasSelectOptionsHeader=r.includes(Mh.SELECT_OPTIONS_HEADER),r},this.markdownService.renderer.list=(r,i,s)=>{if(this.hasSelectOptionsHeader){let o=r.split(`
`).map(a=>`<option>${a.trim()}</option>`).join("");return this.hasSelectOptionsHeader=!1,`<select class="form-select form-select-lg mb-3">${o}</select>`}return st.prototype.list.call(this.markdownService.renderer,r,i,s)}}processFirstLine(r){if(this.firstLineProcessed)return;let i=Me.parseHtmlLine(r);switch(i.PageType){case Mh.DRAFT_HEADER:{this.isDraftArticle=!0;break}case"Assessment":break;default:break}i.Widget=="NAVI"&&(this.loadPlugin=!0),this.firstLineProcessed=!0}speakText(){this.isPaused?this.resumeSpeech():this.isSpeaking?this.pauseSpeech():this.startSpeech()}startSpeech(){!this.isSpeaking&&this.speechContent!=null&&(this.speechSir.speak(this.speechContent),this.isSpeaking=!0)}pauseSpeech(){!this.isPaused&&this.isSpeaking&&(this.speechSir.pause(),this.isPaused=!0)}resumeSpeech(){this.isPaused&&this.isSpeaking&&(this.speechSir.resume(),this.isPaused=!1)}onMarkdownReady(){if(this.availableYoutubeLinks=J.userContext.youtube_links,this.leetcodeLinks=J.userContext.leetcode_links,this.isDraftArticle)this.router.navigate([Mh.DRAFT_PAGE_LINK]);else if(this.router.navigate([this.router.url]),this.loadPlugin){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(av);r.appendChild(i.location.nativeElement)}}}speechReady(r){this.isDraftArticle||(this.speechContent=r?new SpeechSynthesisUtterance(r):null,this.speechContent!=null&&(this.speechContent.pitch=1,this.speechContent.rate=1,this.speechContent.volume=1,this.speechContent.lang="en-US"))}ngOnDestroy(){this.speechSir&&this.speechContent!=null&&this.speechSir.cancel()}getFileName(r){return this.folderName=="faqs"?Me.getFileNameWithoutCurrentFolder(r,this.folderName):Me.getFileName(r)}};e.\u0275fac=function(i){return new(i||e)($(an),$(Rt),$(Pn))},e.\u0275cmp=Re({type:e,selectors:[["app-internal-articles"]],features:[gt],decls:16,vars:8,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"container",3,"ready","load","data"],[1,"col-lg-4"],["class","card mb-4 my-3",4,"ngIf"],["class","card my-3 text-center border-success",4,"ngIf"],[4,"ngIf"],[1,"text-truncate"],[1,"list-unstyled","mb-0"],[4,"ngFor","ngForOf"],["class","text-capitalize my-2",4,"ngIf"],["class","card mb-4",4,"ngFor","ngForOf"],["class","float",3,"click",4,"ngIf"],[1,"card","mb-4","my-3"],[1,"card-header","text-capitalize"],["href","/articles"],[1,"fa-solid","fa-magnifying-glass","float-right",2,"color","darkorange"],[1,"card-body","scrollable-card"],[1,"row"],[1,"list-unstyled","mb-0","text-capitalize"],[3,"href"],[1,"card","my-3","text-center","border-success"],[1,"card-body"],[1,"btn","btn-warning",3,"href"],[1,"fa-regular","fa-lightbulb"],["target","_blank",3,"href"],[1,"text-capitalize","my-2"],[1,"card","mb-4"],["width","100%","height","200","allowfullscreen","",1,"rounded-2",3,"src"],[1,"float",3,"click"],[1,"fa","my-float",3,"ngClass"]],template:function(i,s){i&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),oe("ready",function(){return s.onMarkdownReady()})("load",function(a){return s.speechReady(a)}),N(4,`
            `),A()(),D(5,"div",4),ge(6,TQ,10,2,"div",5)(7,DQ,7,1,"div",6)(8,SQ,3,0,"div",7),D(9,"div",8)(10,"ul",9),ge(11,AQ,3,2,"li",10),A()(),ge(12,xQ,3,0,"div",11)(13,kQ,3,3,"div",12),re(14,"app-giscus-widget"),A()()(),ge(15,RQ,2,4,"a",13)),i&2&&(L(3),W("data",s.readmeFileUrlContent),L(3),W("ngIf",s.folderName),L(),W("ngIf",s.assementLink),L(),W("ngIf",s.leetcodeLinks.size>0),L(3),W("ngForOf",s.leetcodeLinks),L(),W("ngIf",s.availableYoutubeLinks.size>0),L(),W("ngForOf",s.availableYoutubeLinks),L(2),W("ngIf",s.speechContent))},dependencies:[lc,Bt,qt,On,cv,jj],styles:[".scrollable-card[_ngcontent-%COMP%]{max-height:350px;overflow-y:auto}"]});let n=e;return n})();var Uj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Re({type:e,selectors:[["app-roadmap"]],decls:37,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-lg-4"],[1,"my-3"],[1,"step","step-active"],[1,"circle"],[1,"fa","fa-check"],[1,"title"],[1,"caption"],[1,"step"],[1,"circle",2,"background-color","green"],["target","_blank","href","https://youtube.com/shorts/-sNJ3WmU83E?feature=share"],[1,"fab","fa-youtube","fa-xl",2,"color","#ed302f"],[1,"circle",2,"background-color","yellowgreen"],["href","https://interviewdose.com/roadmap","target","_blank"]],template:function(i,s){i&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),N(4,"Roadmap"),A(),N(5," '"),D(6,"div",4)(7,"div")(8,"div",5),re(9,"i",6),A()(),D(10,"div")(11,"div",7),N(12,"What's Next ?"),A(),D(13,"div",8),N(14,"Payment integration for your service"),A()()(),D(15,"div",9)(16,"div")(17,"div",10),N(18,"2"),A()(),D(19,"div")(20,"div",7)(21,"a",11),re(22,"i",12),A(),N(23,"DeepPeek Search"),A(),D(24,"div",8),N(25,"DeepPeek AI search enabled in your pages"),A()()(),D(26,"div",9)(27,"div")(28,"div",13),N(29,"1"),A()(),D(30,"div")(31,"div",7),N(32,"Menifesting the World's simplest HomePage"),A(),D(33,"div",8),N(34,"This is THE simplest developer friendly webpage builder on earth today: Forked from "),D(35,"a",14),N(36,"https://interviewdose.com"),A()()()()()()())},styles:['.step[_ngcontent-%COMP%]{position:relative;min-height:1em;color:gray}.title[_ngcontent-%COMP%]{line-height:1.5em;font-weight:700}.caption[_ngcontent-%COMP%]{font-size:.8em}.step[_ngcontent-%COMP%] + .step[_ngcontent-%COMP%]{margin-top:1.5em}.step[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{position:static;height:0}.step[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(:first-child){margin-left:1.5em;padding-left:1em}.circle[_ngcontent-%COMP%]{background:gray;position:relative;width:1.5em;height:1.5em;line-height:1.5em;border-radius:100%;color:#fff;text-align:center;box-shadow:0 0 0 3px #fff}.circle[_ngcontent-%COMP%]:after{content:" ";position:absolute;display:block;inset:1px 50%;height:100%;width:1px;transform:scaleY(2);transform-origin:50% -100%;background-color:#00000040;z-index:-1}.step[_ngcontent-%COMP%]:last-child   .circle[_ngcontent-%COMP%]:after{display:none}.step.step-active[_ngcontent-%COMP%]{color:#4285f4}.step.step-active[_ngcontent-%COMP%]   .circle[_ngcontent-%COMP%]{background-color:#4285f4}']});let n=e;return n})();var $j=(()=>{let e=class e{constructor(r){this.messaging=r,this.recognition=new webkitSpeechRecognition,this.isStoppedSpeechRecog=!1,this.text="",this.tempWords=""}init(){this.recognition.interimResults=!0,this.recognition.lang="en-US",this.recognition.addEventListener("result",r=>{var i=r.results[0][0].transcript;if(this.tempWords=i,i){let s={cmd:"speech",payload:i};this.messaging.send(s)}})}start(){this.isStoppedSpeechRecog=!1,this.recognition.start(),console.log("Speech recognition started"),this.recognition.addEventListener("end",()=>{this.isStoppedSpeechRecog?(this.recognition.stop(),console.log("End speech recognition")):(this.wordConcat(),this.recognition.start())})}stop(){this.isStoppedSpeechRecog=!0,this.wordConcat(),this.recognition.stop(),console.log("End speech recognition")}wordConcat(){this.text=this.text+" "+this.tempWords+".",this.tempWords=""}};e.\u0275fac=function(i){return new(i||e)(q(cn))},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var NQ=["searchInput"],PQ=n=>({transform:n});function OQ(n,e){n&1&&(D(0,"div",12),N(1,"Listening... "),D(2,"div",13)(3,"span",14),N(4,"Loading..."),A()()())}function FQ(n,e){n&1&&(D(0,"div",12),N(1,"Listening "),re(2,"i",15),A())}function LQ(n,e){if(n&1&&(D(0,"div",16),re(1,"i",17),N(2),A()),n&2){let t=pe();L(2),ct("\xA0",t.lastSpeechText,"")}}function VQ(n,e){if(n&1&&(D(0,"h6",25),N(1),A()),n&2){let t=pe().ngIf;L(),ct(" ~ ",t.Category,"")}}function jQ(n,e){if(n&1&&(_0(0),D(1,"h2",22),N(2),A(),D(3,"i"),ge(4,VQ,2,1,"h6",23),A(),re(5,"a",24),w0()),n&2){let t=e.ngIf,r=pe().$implicit,i=pe();L(2),Ue(t.File),L(2),W("ngIf",t.Category),L(),on("href",i.createClickableLink(r),pt)}}function UQ(n,e){if(n&1){let t=yt();D(0,"div",18)(1,"div",19),oe("mouseenter",function(){let i=le(t).$implicit,s=pe();return ue(s.onCardHover(!0,i))})("mouseleave",function(){let i=le(t).$implicit,s=pe();return ue(s.onCardHover(!1,i))}),D(2,"div",20),ge(3,jQ,6,3,"ng-container",21),A()()()}if(n&2){let t=e.$implicit,r=pe();L(),on("id",t),W("ngStyle",Kp(3,PQ,r.getRandomRotation(t))),L(2),W("ngIf",r.getFileNameWithCategory(t))}}var bD=(()=>{let e=class e extends Nh{constructor(r,i,s,o,a){super(i,r,s),this.filterText="",this.lastSpeechText="",this.articleFound=!1,this.filteredFiles=[],this.cachedRotations={},this.userTyping=!1,this.ghuserName="",a.event$.subscribe(c=>{let l=c;switch(l.cmd){case"speech":this.articleFound=!1,this.filterText=l.payload?l.payload:"",this.lastSpeechText=this.filterText.substring(0,25),this.searchKey(),this.articleFound||(this.filterText="",this.filteredFiles=this.filesAvailable);break;case"UserDirectory":setTimeout(()=>{this.filteredFiles=this.filesAvailable},1e3);break;default:break}}),o.init(),o.start()}ngOnInit(){this.ghuserName=J.ghUserLoaded}onUserInput(){this.userTyping=!0}clickArticle(r){this.router.navigate(["/i"+r])}searchKey(){let r=this.filterText.trim().split(/\s+/).map(s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")),i=new RegExp(r.join("|"),"i");this.filteredFiles=this.filterText===""?this.filesAvailable:this.filesAvailable.filter(s=>i.test(s)?(this.articleFound=!0,this.userTyping||this.searchInput.nativeElement.select(),!0):!1)}getRandomRotation(r){if(!this.cachedRotations[r]){let o=Math.random()*4+-2;this.cachedRotations[r]=`rotate(${o}deg)`}return this.cachedRotations[r]}onCardHover(r,i){let s=document.getElementById(i);s&&(r?s.style.transform="":s.style.transform=this.cachedRotations[i])}getFileNameWithCategory(r,i=!1){return Me.getFileNameWithCategory(r,i)}createClickableLink(r){let i=r.lastIndexOf(".md");return i!=-1&&(r=r.substring(0,i)),this.isHomePageGHUser?`/i/${r}`:`/${this.githubUser}/${r}`}};e.\u0275fac=function(i){return new(i||e)($(Rt),$(an),$(Pn),$($j),$(cn))},e.\u0275cmp=Re({type:e,selectors:[["app-search-articles"]],viewQuery:function(i,s){if(i&1&&Io(NQ,7),i&2){let o;ps(o=gs())&&(s.searchInput=o.first)}},features:[gt],decls:15,vars:5,consts:[["searchInput",""],[1,"container","px-5"],[1,"row","mx-auto","mb-4","rounded-3","align-items-center","justify-content-center"],[1,"container-fluid","py-3","text-center"],[1,"display-4","fw-bold"],[1,"col-lg-6"],["class","fs-6 text-muted float-end",4,"ngIf"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type or Speak to search ...",1,"form-control","border","border-success",3,"ngModelChange","input","ngModel"],["class","fs-6 text-muted text-center",4,"ngIf"],[1,"row"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"fs-6","text-muted","float-end"],["role","status",1,"spinner-border","spinner-border-sm","text-secondary"],[1,"sr-only"],[1,"fa-solid","fa-check",2,"color","#63E6BE"],[1,"fs-6","text-muted","text-center"],[1,"fa-brands","fa-searchengin"],[1,"col-md-3"],[1,"card","mb-4","border-primary","card-hover",3,"mouseenter","mouseleave","id","ngStyle"],[1,"card-body","text-success"],[4,"ngIf"],[1,"card-title","text-capitalize"],["class","card-subtitle text-muted text-end",4,"ngIf"],[1,"stretched-link",3,"href"],[1,"card-subtitle","text-muted","text-end"]],template:function(i,s){if(i&1){let o=yt();D(0,"div",1)(1,"div",2)(2,"div",3)(3,"h1",4),N(4,"Search Articles"),A()(),D(5,"div",5),ge(6,OQ,5,0,"div",6)(7,FQ,3,0,"div",6),D(8,"div",7)(9,"input",8,0),jr("ngModelChange",function(c){return le(o),_i(s.filterText,c)||(s.filterText=c),ue(c)}),oe("ngModelChange",function(){return le(o),ue(s.searchKey())})("input",function(){return le(o),ue(s.onUserInput())}),A()(),ge(11,LQ,3,1,"div",9),A()(),D(12,"div",10),ge(13,UQ,4,5,"div",11),A(),re(14,"app-giscus-widget"),A()}i&2&&(L(6),W("ngIf",!s.articleFound),L(),W("ngIf",s.articleFound),L(2),Vr("ngModel",s.filterText),L(2),W("ngIf",!s.articleFound),L(2),W("ngForOf",s.filteredFiles))},dependencies:[Is,vc,Bt,qt,fM,ko,cv],styles:[".card-hover[_ngcontent-%COMP%]{transition:transform .3s ease,box-shadow .3s ease,background-color .3s ease}.card-hover[_ngcontent-%COMP%]:hover{box-shadow:0 10px 20px #0000004d;background-color:silver}"]});let n=e;return n})();var $Q=["scrollPanel"],BQ=["iframeRef"];function qQ(n,e){n&1&&(D(0,"h4",29),N(1,"Deep Search in your page"),A())}function zQ(n,e){if(n&1&&re(0,"option",30),n&2){let t=e.$implicit;W("value",t.name)}}function HQ(n,e){if(n&1){let t=yt();D(0,"iframe",31,2),oe("load",function(){le(t);let i=pe();return ue(i.captureTextContent())}),A()}if(n&2){let t=pe();W("src",t.safeUrl,Vp)}}function GQ(n,e){if(n&1&&(D(0,"div",32),N(1),A()),n&2){let t=pe();L(),Ue(t.iFramePlaceholder)}}function WQ(n,e){if(n&1){let t=yt();D(0,"div")(1,"b"),N(2,"Follow-up :\xA0"),A(),N(3),D(4,"i",39),oe("click",function(i){le(t);let s=pe(2).$implicit,o=pe();return ue(o.setNewQuestion(s.followUp?s.followUp:"",i))}),A()()}if(n&2){let t=pe(2).$implicit;L(3),Ue(t.followUp)}}function KQ(n,e){if(n&1){let t=yt();D(0,"div")(1,"button",36),oe("click",function(){le(t);let i=pe(2);return ue(i.aiUserLiked("like"))}),re(2,"i",37),A(),D(3,"button",36),oe("click",function(){le(t);let i=pe(2);return ue(i.aiUserLiked("clipped"))}),re(4,"i",38),A(),ge(5,WQ,5,1,"div",35),A()}if(n&2){let t=pe().$implicit;L(5),W("ngIf",t.followUp)}}function QQ(n,e){if(n&1&&(D(0,"div",33),re(1,"markdown",34),ge(2,KQ,6,1,"div",35),A()),n&2){let t=e.$implicit;L(),W("data",t.content),L(),W("ngIf",t.from!="You")}}function YQ(n,e){if(n&1&&(D(0,"div",40)(1,"div",41)(2,"div",42),re(3,"div",43),A(),D(4,"div",44),re(5,"div",43),A()()()),n&2){let t=pe();L(3),v0(t.firstStyle),L(2),v0(t.secondStyle)}}function ZQ(n,e){if(n&1&&(D(0,"option",30),N(1),A()),n&2){let t=e.$implicit;W("value",t.value),L(),ct(" ",t.label," ")}}function JQ(n,e){if(n&1&&(D(0,"option",30),N(1),A()),n&2){let t=e.$implicit;W("value",t.value),L(),ct(" ",t.label," ")}}var Bj=(()=>{let e=class e{captureTextContent(){setTimeout(()=>{let r=this.iframeRef?.nativeElement;try{if(r&&r.contentWindow&&r.contentWindow.document)try{console.log("Inside iframe content window");let i=r.contentWindow.document.body.innerText;if(i&&this.contextLoaded==!1){this.contextLoaded=!0;let s=Date.now();this.addDeepContext(i).subscribe(o=>{this.requestTimer=(Date.now()-s)/1e3,console.log("Added the page content to search"),setTimeout(()=>{this.newQuestion.trim()==""&&(this.newQuestion="Who is John Doe ?",this.enableSend=!0,this.sendIsDisabled=!1,this.contextLoaded=!1)},4e3)},o=>{this.iFramePlaceholder="Error ! No response from response from Deep API : "+o,console.error(this.iFramePlaceholder),alert("Check Deep API, Could not add to context ! Refresh the page and try again later.")})}}catch{console.error("Unable to access iframe content due to CORS restrictions."),this.iFramePlaceholder="CORS restriction prevents accessing iframe content",alert("CORS restriction ! Pages from publichome are allowed.")}else alert("CORS restriction ! Pages from publichome are allowed.")}catch{this.iFramePlaceholder="CORS restriction prevents accessing iframe content",alert("CORS restriction ! Pages from publichome are allowed.")}},2e3)}setStyles(){this.firstStyle=`width: ${this.firstProgress}%`,this.secondStyle=`width: ${this.secondProgress}%`}constructor(r,i,s,o,a,c,l){this.ghService=r,this.httpClient=i,this.messaging=s,this.renderer=o,this.el=a,this.markdownService=c,this.sanitizer=l,this.urls=[{name:"https://publichome.page/simpleresume"},{name:"https://publichome.page/voicesmith"},{name:"https://publichome.page/nritutor"},{name:"https://publichome.page/kantabanji"},{name:"https://publichome.page/ramasahoo"}],this.db_options=[{value:"R",label:"Redis"},{value:"C",label:"Chroma"}],this.selectedDBOption=this.db_options[0].value,this.ef_options=[{value:"L",label:"ST"},{value:"O",label:"OA"}],this.selectedEFOption=this.ef_options[0].value,this.requestTimer=0,this.messages=[],this.newQuestion="",this.currentQuestion="",this.aiAnswer="",this.max_context_size=6,this.enableSend=!1,this.firstTimeOpen=!0,this.liked=!1,this.requestStarted=!1,this.firstProgress=25,this.secondProgress=10,this.firstStyle="width: 25%",this.secondStyle="width: 10%",this.activeIndex=0,this.iFramePlaceholder="Enter a publichome.page URL to deep search...",this.url="https://publichome.page/simpleresume",this.loadedUrl="",this.contextLoaded=!1,this.sendIsDisabled=!0,this.initialConversation=[{role:"system",content:"You are in a job interview."}],this.messaging.send({cmd:"host",file:"IaComponent"})}ngOnInit(){this.markdownService.renderer.text=r=>{let i=r;return r}}loadUrl(){this.url.trim()&&this.url.startsWith("https://publichome.page/")?(this.loadedUrl=this.url,this.safeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(this.url)):alert(`Please enter a valid publichome.page URL
If you are interested in enabling AI search for your site contact us or try our chrome plugin.`)}setNewQuestion(r,i=null){this.newQuestion=r,i!=null?(i.currentTarget.hidden=!0,this.sendMessage()):this.sendMessage()}sendMessage(){if(this.enableSend&&this.newQuestion.trim()!==""){this.enableSend=!1,this.startTimer(),this.messages.push({from:"You",content:`<b>You: </b>${this.newQuestion}`});let r=Date.now();this.queryDeepApi(this.newQuestion).subscribe(i=>{this.requestTimer=(Date.now()-r)/1e3,this.parseDeepResponse(i.answer)},i=>{console.error("Error ! No response from response from Deep API : ",i),alert("DeepPage API is down !!"),this.resetMembers()}),this.currentQuestion=this.newQuestion,this.newQuestion=""}}parseDeepResponse(r){localStorage.setItem(this.currentQuestion,r),this.aiAnswer=r;let i="";this.aiAnswer&&(this.aiAnswer=this.aiAnswer.trim());let s=`<i class="fa-solid fa-robot" style="color:#19C37D">:</i> ${this.aiAnswer}`;this.messages.push({from:"DP",content:s,followUp:i}),this.resetMembers(),this.scrollToBottom()}aiUserLiked(r){this.liked=!0}onScroll(){}addDeepContext(r){let i="https://api.publichome.page/vector/data",s=new Nn({"Content-Type":"application/json"}),o={options:this.selectedDBOption+":"+this.selectedEFOption,web_link:this.loadedUrl,web_content:r};return this.httpClient.post(i,o,{headers:s})}queryDeepApi(r){let i="https://api.publichome.page/webpeek",s=new Nn({"Content-Type":"application/json"}),o={options:this.selectedDBOption+":"+this.selectedEFOption,web_link:this.loadedUrl,query:r};return this.httpClient.post(i,o,{headers:s})}scrollPageToBottom(){this.enableSend=!0,this.firstTimeOpen=!1;let r=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=(window.scrollY||window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop)+r;this.renderer.setProperty(document.documentElement,"scrollTop",s),this.renderer.setProperty(document.body,"scrollTop",s)}resetMembers(){this.stopTimer(),this.enableSend=!0,this.firstTimeOpen=!1,this.liked=!1,this.requestStarted=!1,this.timerInterval=null,this.firstProgress=25,this.secondProgress=10}scrollToBottom(){try{this.scrollPanel.nativeElement.scrollTop=this.scrollPanel.nativeElement.scrollHeight}catch{}}ngOnDestroy(){this.stopTimer()}random(r){return Math.floor(Math.random()*r+1)}startTimer(){this.requestStarted=!0,this.timerInterval=setInterval(()=>{this.firstProgress=this.firstProgress+this.random(40),this.secondProgress=this.secondProgress+this.random(20),this.firstProgress>100&&(this.firstProgress=0),this.secondProgress>100&&(this.secondProgress=0),this.setStyles(),this.scrollToBottom()},500)}stopTimer(){this.requestStarted=!1,this.timerInterval!=null&&clearInterval(this.timerInterval)}};e.\u0275fac=function(i){return new(i||e)($(Rt),$(Ii),$(cn),$(kn),$(At),$(an),$(So))},e.\u0275cmp=Re({type:e,selectors:[["app-deep-page"]],viewQuery:function(i,s){if(i&1&&(Io($Q,5),Io(BQ,5)),i&2){let o;ps(o=gs())&&(s.scrollPanel=o.first),ps(o=gs())&&(s.iframeRef=o.first)}},decls:50,vars:17,consts:[["scrollPanel",""],["placeholder",""],["iframeRef",""],[1,"scroll-panel",3,"scroll"],[1,"row","col-10","col-md-8","mx-auto"],[1,"text-center"],[1,"card-text","small","my-3"],[1,"fa-solid","fa-robot",2,"color","#19C37D"],[2,"color","green"],["href","https://chromewebstore.google.com/detail/deeppage/ohdjgphdgjdfmiamnjiooeifjanphhcg","target","_blank",1,"ms-2",2,"font-size","0.75rem"],["class","card-text",4,"ngIf"],[1,"input-group"],["list","urlOptions","type","text","placeholder","Enter or select URL...",1,"form-control",3,"ngModelChange","ngModel"],["id","urlOptions"],[3,"value",4,"ngFor","ngForOf"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fas","fa-arrow-right"],[1,"iframe-container","mt-3"],[3,"src","load",4,"ngIf","ngIfElse"],["class","justify-content-center",4,"ngFor","ngForOf"],["id","myCarousel","class","carousel slide","data-bs-ride","carousel",4,"ngIf"],[1,"row","fixed-bottom","justify-content-center",2,"background-color","#F7F7F7"],[1,"col-10","col-md-8"],[1,"input-group","input-group-lg"],["type","text","placeholder","Type your question ...",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click","disabled"],[1,"fa","fa-arrow-up"],[1,"text-center","text-small","my-3","small"],["id","selectOption",1,"form-select","form-select-sm","w-auto","d-inline-block",3,"ngModelChange","ngModel"],[1,"card-text"],[3,"value"],[3,"load","src"],[1,"iframe-placeholder"],[1,"justify-content-center"],[1,"pb-0",3,"data"],[4,"ngIf"],["type","button",1,"btn","p-1",3,"click"],[1,"fa-regular","fa-thumbs-up"],[1,"fa-regular","fa-clipboard"],[1,"btn","fa-solid","fa-plus",2,"color","green",3,"click"],["id","myCarousel","data-bs-ride","carousel",1,"carousel","slide"],[1,"my-3"],["role","progressbar","aria-label","Basic example","aria-valuenow","25","aria-valuemin","0","aria-valuemax","100",1,"progress",2,"height","5px"],[1,"progress-bar"],["role","progressbar","aria-label","Basic example","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress","my-2",2,"height","5px"]],template:function(i,s){if(i&1){let o=yt();D(0,"div",3,0),oe("scroll",function(){return le(o),ue(s.onScroll())}),D(2,"div",4)(3,"div",5)(4,"h6",6),re(5,"i",7),D(6,"b",8),N(7,"D"),A(),N(8,"eep"),D(9,"b",8),N(10,"P"),A(),N(11,"eek "),D(12,"a",9),N(13,"(Chrome Plugin)"),A()(),ge(14,qQ,2,0,"h4",10),D(15,"div",11)(16,"input",12),jr("ngModelChange",function(c){return le(o),_i(s.url,c)||(s.url=c),ue(c)}),A(),D(17,"datalist",13),ge(18,zQ,1,1,"option",14),A(),D(19,"button",15),oe("click",function(){return le(o),ue(s.loadUrl())}),re(20,"i",16),A()(),D(21,"div",17),ge(22,HQ,2,1,"iframe",18)(23,GQ,2,1,"ng-template",null,1,To),A()(),ge(25,QQ,3,2,"div",19)(26,YQ,6,4,"div",20),A(),re(27,"br")(28,"br")(29,"br"),N(30,"\xA0"),re(31,"br")(32,"br")(33,"br"),A(),D(34,"div",21)(35,"div",22)(36,"div",23)(37,"input",24),jr("ngModelChange",function(c){return le(o),_i(s.newQuestion,c)||(s.newQuestion=c),ue(c)}),oe("keyup.enter",function(){return le(o),ue(s.sendMessage())}),A(),D(38,"button",25),oe("click",function(){return le(o),ue(s.sendMessage())}),re(39,"i",26),A()(),D(40,"div",27),re(41,"i",7),N(42," \xA0using "),D(43,"select",28),jr("ngModelChange",function(c){return le(o),_i(s.selectedDBOption,c)||(s.selectedDBOption=c),ue(c)}),ge(44,ZQ,2,2,"option",14),A(),N(45," \xA0with\xA0 "),D(46,"select",28),jr("ngModelChange",function(c){return le(o),_i(s.selectedEFOption,c)||(s.selectedEFOption=c),ue(c)}),ge(47,JQ,2,2,"option",14),A(),N(48),xt(49,"number"),A()()()}if(i&2){let o=Co(24);L(14),W("ngIf",s.firstTimeOpen&&!s.requestStarted),L(2),Vr("ngModel",s.url),L(2),W("ngForOf",s.urls),L(4),W("ngIf",s.loadedUrl)("ngIfElse",o),L(3),W("ngForOf",s.messages),L(),W("ngIf",s.requestStarted),L(11),Vr("ngModel",s.newQuestion),L(),W("disabled",!s.enableSend),L(5),Vr("ngModel",s.selectedDBOption),L(),W("ngForOf",s.db_options),L(2),Vr("ngModel",s.selectedEFOption),L(),W("ngForOf",s.ef_options),L(),ct(" \xA0",s.requestTimer>0?qR(49,14,s.requestTimer,"1.2-2")+"s":""," ")}},dependencies:[S1,x1,Is,xg,vc,Bt,qt,ko,On,gM],styles:[".iframe-container[_ngcontent-%COMP%]{width:100%;height:300px;border:2px solid #ccc;border-radius:5px;overflow:hidden;background:#fff;display:flex;align-items:center;justify-content:center}.iframe-container[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:none}.iframe-placeholder[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#aaa;font-style:italic;font-size:16px;background:#f8f9fa}"]});let n=e;return n})();var Qs=(()=>{let e=class e{constructor(){this.STORAGE_KEY="markdown_content"}save(r){localStorage.setItem(this.STORAGE_KEY,r)}load(){return localStorage.getItem(this.STORAGE_KEY)}clear(){localStorage.removeItem(this.STORAGE_KEY)}get(r){return localStorage.getItem(r)}set(r,i){localStorage.setItem(r,i)}clearKey(r){localStorage.removeItem(r)}};e.BUSINESS_FLOW="signup",e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var eY=["textAreaRef"];function tY(n,e){if(n&1){let t=yt();D(0,"span",46),oe("click",function(){let i=le(t).$implicit,s=pe(2);return ue(s.addEmoji(i))}),N(1),A()}if(n&2){let t=e.$implicit;on("title",t),L(),ct(" ",t," ")}}function nY(n,e){if(n&1&&(D(0,"div",43)(1,"div",44),ge(2,tY,2,2,"span",45),A()()),n&2){let t=pe();L(2),W("ngForOf",t.symbols)}}function rY(n,e){n&1&&(D(0,"li")(1,"a",47),re(2,"i",48),N(3,"Pull my homepage"),A()())}function iY(n,e){if(n&1){let t=yt();D(0,"li")(1,"a",49),oe("click",function(){le(t);let i=pe();return ue(i.logout())}),re(2,"i",50),N(3,"Logout"),A()()}}var qj=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.supabaseService=i,this.localStorage=s,this.saveSubject=new ze,this.makeItMineButtonText="Love it ! Make it mine...",this.serverSyncRequired=!1,this.symbols=["\u2705","\u2714\uFE0F","\u2713","\u274C","\u2716\uFE0F","\u{1F4AF}","\u2605","\u2606","\u2728","\u{1F4AB}","\u{1F389}","\u{1F3C6}","\u{1F4CC}","\u{1F4CD}","\u{1F4EC}","\u{1F4A1}","\u{1F4DD}","\u{1F9E0}","\u{1F3AF}","\u{1F50D}","\u{1F525}","\u26A1","\u{1F4A5}","\u{1F680}","\u{1F4A9}","\u2764\uFE0F","\u{1F499}","\u{1F49A}","\u{1F49B}","\u{1F494}","\u{1F600}","\u{1F60E}","\u{1F60D}","\u{1F929}","\u{1F973}","\u{1F622}","\u2610","\u2611","\u2612","\u{1F7E9}","\u{1F7E5}","\u{1F381}"],this.markdownContent="# My little dabbling here !",this.isAuthenticated=!1,this.leftPaneWidth=500,this.rightPaneWidth=window.innerWidth-this.leftPaneWidth-10,this.resizing=!1,this.showEmojiPicker=!1}onMouseMove(r){this.resizing&&(this.leftPaneWidth=r.clientX,this.rightPaneWidth=window.innerWidth-this.leftPaneWidth-10)}stopResizing(){this.resizing=!1}insertYoutube(){this.applyFormat('<iframe width="560" height="315" src="https://www.youtube.com/embed/VIDEO_ID" frameborder="0" allowfullscreen></iframe>')}insertHtmlTable(){this.applyFormat(`
<table class="table table-bordered">
<thead>
  <tr><th>Header 1</th><th>Header 2</th></tr>
</thead>
<tbody>
  <tr><td>Row 1 Col 1</td><td>Row 1 Col 2</td></tr>
  <tr><td>Row 2 Col 1</td><td>Row 2 Col 2</td></tr>
</tbody>
</table>
`)}selectFileType(r){let i="";switch(r){case"designer":i="/assets/interior-designer.md";break;case"resume":i="/assets/simple-resume.md";break;case"tutor":i="/assets/nri-tutor.md";break;case"e-commerce":i="/assets/e-commerce.md";break;case"writer":default:i="/assets/poem-with-md.md";break}this.githubService.getLocalFileContent(i).then(s=>{this.markdownContent=s}).catch(s=>{console.error("Error fetching file:",s)})}applyFormat(r){let i=document.querySelector("textarea"),s=i.selectionStart,o=i.selectionEnd,a=this.markdownContent.substring(s,o),c="";switch(r){case"bold":c=`**${a||"bold text"}**`;break;case"italic":c=`*${a||"italic text"}*`;break;case"pre":c=`
<pre>
${a||"code block"}
</pre>`;break;case"heading":c=`# ${a||"Heading"}`;break;case"list":c=`- ${a||"List item"}`;break;case"image":c=`
![Alt text](/assets/img/flower-pic.jpg)`;break;case"imageHtml":c=`
<img src="/assets/img/flower-pic.jpg" alt="Sample Image" style="max-width: 200px;">`;break;case"link":c="[Link text](https://example.com)";break;case"code":c=`\`${a||"code"}\``;break;case"quote":c=`
> ${a||"Quote"}`;break;case"table":c=`
| Header 1 | Header 2 |
|----------|----------|
| Row 1 Col 1   | Row 1 Col 2   |
| Row 2 Col 1   | Row 2 Col 2   |`;break;case"hr":c=`
---
`;break;case"br":c=`
<br>
`;break;case"youtube":c=`
<iframe width="560" height="315" src="https://www.youtube.com/embed/VIDEO_ID" frameborder="0" allowfullscreen></iframe>`;break;case"bootstrapGrid":c=`
<div class="row">
  <div class="col">
    This is the first line of text.<br>
    This is the second line, aligned left.
  </div>
  <div class="col">
    <img src="/assets/img/flower-pic.jpg" alt="Sample Image" style="max-width: 200px;"
  </div>
</div>`;break;case"htmlTable":c=`
<table style="border-collapse: collapse; width: 100%;">
  <tr>
    <td style="vertical-align: top; padding-right: 1rem;">
      This is the first line of text.<br>
      This is the second line, aligned left.
    </td>
    <td style="vertical-align: top;">
      <img src="/assets/img/flower-pic.jpg" alt="Sample Image" style="max-width: 200px;">
    </td>
  </tr>
</table>`;break;case"html":c=`<div>${a||"HTML content"}</div>`;break;case"emoji":c=":smile:";break;default:c=a||"";break}this.markdownContent=this.markdownContent.substring(0,s)+c+this.markdownContent.substring(o),document.execCommand("insertText",!1,c),setTimeout(()=>{i.setSelectionRange(s,s+c.length),i.focus()})}setSelectionWithUndoRedo(r,i,s){setTimeout(()=>{document.execCommand("insertText",!1,i),s.setSelectionRange(r,r+i.length),s.focus()})}toggleEmojiPicker(){this.showEmojiPicker=!this.showEmojiPicker}handleTab(r){if(r.key==="Tab"){r.preventDefault();let i=r.target,s=i.selectionStart,o=i.selectionEnd,a="	";this.markdownContent=this.markdownContent.substring(0,s)+a+this.markdownContent.substring(o),setTimeout(()=>{i.selectionStart=i.selectionEnd=s+a.length},0)}}insertAtCursor(r){let i=this.textAreaRef.nativeElement;if(i.focus(),document.queryCommandSupported("insertText"))document.execCommand("insertText",!1,r);else{let s=i.selectionStart,o=i.selectionEnd,a=i.value.substring(0,s),c=i.value.substring(o);i.value=a+r+c,i.selectionStart=i.selectionEnd=s+r.length}this.markdownContent=i.value}addEmoji(r){let i=r,s=document.querySelector("textarea");if(s){let o=s.selectionStart||0,a=s.selectionEnd||0;this.markdownContent=this.markdownContent.slice(0,o)+i+this.markdownContent.slice(a),document.execCommand("insertText",!1,i),setTimeout(()=>s.focus(),0)}this.showEmojiPicker=!1}startResizing(r){r.preventDefault(),this.resizing=!0}onDone(){alert("Pushing content to repo...")}createOrUpdateMyHomePage(){let r=this.supabaseService.getCachedSeession();r==null||r!=null&&r.provider_token==null?(this.localStorage.set(Qs.BUSINESS_FLOW,"signup"),this.signupWithGitHub()):this.updateMyHomePage(this.supabaseService.getCachedSeession())}signupWithGitHub(){return y(this,null,function*(){let{data:r,error:i}=yield this.supabaseService.signInWithGitHub("/dabble","public_repo");i&&console.error("Login error:",i.message)})}onContentChange(){this.saveSubject.next(this.markdownContent)}ngOnDestroy(){this.saveSubject.complete()}clearStorage(){this.localStorage.clear()}ngOnInit(){return y(this,null,function*(){let r=this.localStorage.load();r&&(this.markdownContent=r),this.saveSubject.pipe(o_(5e3)).subscribe(i=>{i==null||i.trim()==""||(this.localStorage.save(i),this.serverSyncRequired=!0)});try{let i=yield this.supabaseService.getSession();i&&i.provider_token?this.githubService.getHomepageContent(i.user.user_metadata.preferred_username,i.provider_token).then(s=>y(this,null,function*(){if(console.log("File exists:",s.sha),s){this.makeItMineButtonText="Update my homepage";let o=yield this.githubService.computeGitSha(this.markdownContent);this.serverSyncRequired=o!=s.sha}})).catch(s=>{s=="Repo doesn't exist!"?this.createMyHomepageRepo(i):console.error("Repo:",s)}):(this.supabaseService.signoutSession(),this.localStorage.clearKey(Qs.BUSINESS_FLOW))}catch(i){console.error("Error fetching session:",i)}})}createMyHomepageRepo(r){this.localStorage.get(Qs.BUSINESS_FLOW)=="signup"&&this.githubService.createRepo(r.provider_token).then(i=>{this.localStorage.clearKey(Qs.BUSINESS_FLOW),console.debug("Repo created :",i),this.updateMyHomePage(r)}).catch(i=>{console.error("Error creating repo:",i)})}updateMyHomePage(r){r.provider_token&&this.githubService.pushReadme(r.user.user_metadata.preferred_username,r.provider_token,this.markdownContent).then(i=>{console.debug("Readme pushed successfully:",i)})}isLoggedIn(){return this.supabaseService.isLoggedIn()}logout(){this.supabaseService.signoutSession(),this.localStorage.clearKey(Qs.BUSINESS_FLOW)}};e.\u0275fac=function(i){return new(i||e)($(Rt),$(kc),$(Qs))},e.\u0275cmp=Re({type:e,selectors:[["app-dabble"]],viewQuery:function(i,s){if(i&1&&Io(eY,5),i&2){let o;ps(o=gs())&&(s.textAreaRef=o.first)}},hostBindings:function(i,s){i&1&&oe("mousemove",function(a){return s.onMouseMove(a)},!1,Xw)("mouseup",function(){return s.stopResizing()},!1,Xw)},decls:88,vars:10,consts:[["textAreaRef",""],[1,"container"],[1,"row","justify-content-center"],[1,"toolbar","mb-2","d-flex","flex-wrap","gap-1"],["title","Heading",1,"btn","btn-sm","btn-light",3,"click"],["title","Bold",1,"btn","btn-sm","btn-light",3,"click"],["title","Italic",1,"btn","btn-sm","btn-light",3,"click"],["title","Bullet List",1,"btn","btn-sm","btn-light",3,"click"],["title","Image",1,"btn","btn-sm","btn-light",3,"click"],["title","Link",1,"btn","btn-sm","btn-light",3,"click"],["title","Code",1,"btn","btn-sm","btn-light",3,"click"],["title","Quote",1,"btn","btn-sm","btn-light",3,"click"],["title","<pre>",1,"btn","btn-sm","btn-light",3,"click"],["title","Horizontal line",1,"btn","btn-sm","btn-light",3,"click"],["title","New line",1,"btn","btn-sm","btn-light",3,"click"],["title","Table",1,"btn","btn-sm","btn-light",3,"click"],[2,"width","1px","background","#ccc","height","32px","margin","0 10px"],["title","Image Html",1,"btn","btn-sm","btn-light",3,"click"],["title","HTML Table",1,"btn","btn-sm","btn-light",3,"click"],["title","Bootstrap Table",1,"btn","btn-sm","btn-light",3,"click"],["title","YouTube Video",1,"btn","btn-sm","btn-light",3,"click"],["title","Emoji",1,"btn","btn-sm","btn-light",3,"click"],["class","symbol-panel border p-2 rounded shadow-sm bg-light",4,"ngIf"],[1,"ms-auto","d-flex","align-items-center","gap-2"],["dropdown","",1,"dropdown"],["data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-sm","btn-outline-danger","dropdown-toggle",2,"font-size","0.8rem"],[1,"fa-solid","fa-list","fa-xs"],[1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-header"],[1,"dropdown-item",3,"click"],[1,"dropdown-divider"],[4,"ngIf"],["href","https://www.markdownguide.org/basic-syntax/","target","_blank",1,"dropdown-item",2,"font-size","0.8rem"],[1,"fa-solid","fa-info","fa-xs","me-2"],[1,"editor-container"],[1,"left-pane"],["rows","25","placeholder","A little dabbling here...",1,"form-control",3,"ngModelChange","keydown","ngModel"],[1,"separator",3,"mousedown"],[1,"right-pane"],[1,"markdown-scaled",3,"data"],[1,"d-flex","mt-3"],[1,"ms-auto"],[1,"btn","btn-secondary",3,"click"],[1,"symbol-panel","border","p-2","rounded","shadow-sm","bg-light"],[1,"d-flex","flex-wrap","gap-2"],["class","symbol-btn",3,"title","click",4,"ngFor","ngForOf"],[1,"symbol-btn",3,"click","title"],["href","#",1,"dropdown-item",2,"font-size","0.8rem"],[1,"fa-solid","fa-sync","me-2"],[1,"dropdown-item",2,"font-size","0.8rem",3,"click"],[1,"fa-solid","fa-arrow-right-from-bracket","fa-xs","me-2"]],template:function(i,s){if(i&1){let o=yt();D(0,"div",1)(1,"div",2)(2,"div")(3,"div",3)(4,"button",4),oe("click",function(){return le(o),ue(s.applyFormat("heading"))}),N(5,"H"),A(),D(6,"button",5),oe("click",function(){return le(o),ue(s.applyFormat("bold"))}),D(7,"b"),N(8,"B"),A()(),D(9,"button",6),oe("click",function(){return le(o),ue(s.applyFormat("italic"))}),D(10,"i"),N(11,"\u{1D456}"),A()(),D(12,"button",7),oe("click",function(){return le(o),ue(s.applyFormat("list"))}),N(13,"\u2022"),A(),D(14,"button",8),oe("click",function(){return le(o),ue(s.applyFormat("image"))}),N(15,"\u{1F5BC}\uFE0F"),A(),D(16,"button",9),oe("click",function(){return le(o),ue(s.applyFormat("link"))}),N(17,"\u{1F517}"),A(),D(18,"button",10),oe("click",function(){return le(o),ue(s.applyFormat("code"))}),N(19,"`"),A(),D(20,"button",11),oe("click",function(){return le(o),ue(s.applyFormat("quote"))}),N(21,"\u275D"),A(),D(22,"button",12),oe("click",function(){return le(o),ue(s.applyFormat("pre"))}),N(23,"\u2328\uFE0F"),A(),D(24,"button",13),oe("click",function(){return le(o),ue(s.applyFormat("hr"))}),N(25,"-"),A(),D(26,"button",14),oe("click",function(){return le(o),ue(s.applyFormat("br"))}),N(27,"\u21B5"),A(),D(28,"button",15),oe("click",function(){return le(o),ue(s.applyFormat("table"))}),N(29,"\u{1F4CB}"),A(),re(30,"div",16),D(31,"button",17),oe("click",function(){return le(o),ue(s.applyFormat("imageHtml"))}),N(32,"\u{1F304}"),A(),D(33,"button",18),oe("click",function(){return le(o),ue(s.applyFormat("htmlTable"))}),N(34,"\u{1F4CA}"),A(),D(35,"button",19),oe("click",function(){return le(o),ue(s.applyFormat("bootstrapGrid"))}),N(36,"\u{1F171}\uFE0F"),A(),D(37,"button",20),oe("click",function(){return le(o),ue(s.applyFormat("youtube"))}),N(38,"\u{1F4FA}"),A(),D(39,"button",21),oe("click",function(){return le(o),ue(s.toggleEmojiPicker())}),N(40,"\u{1F604}"),A(),ge(41,nY,3,1,"div",22),D(42,"div",23)(43,"div",24)(44,"a",25),re(45,"i",26),A(),D(46,"ul",27)(47,"li")(48,"h6",28),N(49,"Templates"),A()(),D(50,"li")(51,"a",29),oe("click",function(){return le(o),ue(s.selectFileType("writer"))}),N(52,"Writer's Den"),A()(),D(53,"li")(54,"a",29),oe("click",function(){return le(o),ue(s.selectFileType("resume"))}),N(55,"E-Resume"),A()(),D(56,"li")(57,"a",29),oe("click",function(){return le(o),ue(s.selectFileType("tutor"))}),N(58,"Math Tutor"),A()(),D(59,"li")(60,"a",29),oe("click",function(){return le(o),ue(s.selectFileType("speaker"))}),N(61,"Social worker"),A()(),D(62,"li")(63,"a",29),oe("click",function(){return le(o),ue(s.selectFileType("designer"))}),N(64,"Interior Designer"),A()(),D(65,"li")(66,"a",29),oe("click",function(){return le(o),ue(s.selectFileType("e-commerce"))}),N(67,"Amazon Seller"),A()(),D(68,"li"),re(69,"hr",30),A(),ge(70,rY,4,0,"li",31),D(71,"li")(72,"a",32),re(73,"i",33),N(74,"More syntax"),A()(),ge(75,iY,4,0,"li",31),A()()()(),D(76,"div",34)(77,"div",35)(78,"textarea",36,0),jr("ngModelChange",function(c){return le(o),_i(s.markdownContent,c)||(s.markdownContent=c),ue(c)}),oe("keydown",function(c){return le(o),ue(s.handleTab(c))})("ngModelChange",function(){return le(o),ue(s.onContentChange())}),N(80,"                    "),A()(),D(81,"div",37),oe("mousedown",function(c){return le(o),ue(s.startResizing(c))}),A(),D(82,"div",38),re(83,"markdown",39),A()(),D(84,"div",40)(85,"div",41)(86,"button",42),oe("click",function(){return le(o),ue(s.createOrUpdateMyHomePage())}),N(87),A()()()()()()}i&2&&(L(41),W("ngIf",s.showEmojiPicker),L(29),W("ngIf",s.serverSyncRequired),L(5),W("ngIf",s.isLoggedIn()),L(2),mr("width",s.leftPaneWidth,"px"),L(),Vr("ngModel",s.markdownContent),L(4),mr("width",s.rightPaneWidth,"px"),L(),W("data",s.markdownContent),L(4),Ue(s.makeItMineButtonText))},dependencies:[Is,vc,Bt,qt,ko,On],styles:[".editor-container[_ngcontent-%COMP%]{display:flex;width:100%;height:80vh;overflow:hidden;border:1px solid #ccc;border-radius:6px}.left-pane[_ngcontent-%COMP%], .right-pane[_ngcontent-%COMP%]{height:100%;overflow:auto;border-right:1px solid #ddd;box-sizing:border-box;padding:1rem;background-color:#fdfdfd}.right-pane[_ngcontent-%COMP%]{border-left:1px solid #ddd}.markdown-scaled[_ngcontent-%COMP%]{transform:scale(.9);transform-origin:top left}.markdown-scaled[_ngcontent-%COMP%]{display:inline-block;width:100%}.left-pane[_ngcontent-%COMP%]:last-child, .right-pane[_ngcontent-%COMP%]:last-child{border-right:none}textarea[_ngcontent-%COMP%]{width:100%;height:100%;resize:none;border:none;outline:none;font-family:monospace;font-size:1rem;background:transparent}.separator[_ngcontent-%COMP%]{width:5px;cursor:col-resize;background-color:#eee;height:100%;transition:background .2s}.separator[_ngcontent-%COMP%]:hover{background-color:#ccc}"]});let n=e;return n})();var sY={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",enableTracing:!ae.production},oY=[{path:"i/:folder/:id",component:Nh,children:[{path:"**",component:Nh}]},{path:"dabble",component:qj},{path:"chat",component:Bj},{path:"roadmap",component:Uj},{path:":ghUser/articles",component:bD},{path:"articles",component:bD},{path:"crazycoupons",component:Lj},{path:"contacts",component:WE},{path:":ghUser/contacts",component:WE},{path:"",component:NO},{path:":ghUser",component:wD,children:[{path:"**",component:wD}]}],zj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tt({type:e}),e.\u0275inj=Ct({imports:[dc,kE.forRoot(oY,sY),kE]});let n=e;return n})();var Hj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tt({type:e,bootstrap:[J]}),e.\u0275inj=Ct({providers:[SM(),{provide:kl,useValue:ae.firebaseConfig}],imports:[M1,FM,R1,zj,n1.forRoot({loader:Ii,markedOptions:{provide:gb,useValue:{gfm:!0,breaks:!1,pedantic:!1}},sanitize:xn.NONE})]});let n=e;return n})();UR(J,function(){return[qt,CE,NP,VO]},[]);OM().bootstrapModule(Hj).catch(n=>console.error(n));
