import{A as tr,a as M,b as Z,c as en,d as rm,e as b,f as rD,g as ud,h as iD,i as sD,j as oD,k as im,l as aD,m as Nc,n as sm,o as ld,p as cD,q as uD,r as om,s as Ye,t as us,u as er,v as dd,w as Pc,x as lD,y as dD,z as si}from"./chunk-AGPXAQQT.js";function hD(n,e){return Object.is(n,e)}var gt=null,hd=!1,fd=1,oi=Symbol("SIGNAL");function Se(n){let e=gt;return gt=n,e}function fD(){return gt}var Fc={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function um(n){if(hd)throw new Error("");if(gt===null)return;gt.consumerOnSignalRead(n);let e=gt.nextProducerIndex++;if(yd(gt),e<gt.producerNode.length&&gt.producerNode[e]!==n&&Oc(gt)){let t=gt.producerNode[e];md(t,gt.producerIndexOfThis[e])}gt.producerNode[e]!==n&&(gt.producerNode[e]=n,gt.producerIndexOfThis[e]=Oc(gt)?yD(n,gt,e):0),gt.producerLastReadVersion[e]=n.version}function DO(){fd++}function pD(n){if(!(Oc(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===fd)){if(!n.producerMustRecompute(n)&&!dm(n)){n.dirty=!1,n.lastCleanEpoch=fd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=fd}}function gD(n){if(n.liveConsumerNode===void 0)return;let e=hd;hd=!0;try{for(let t of n.liveConsumerNode)t.dirty||CO(t)}finally{hd=e}}function mD(){return gt?.consumerAllowSignalWrites!==!1}function CO(n){n.dirty=!0,gD(n),n.consumerMarkedDirty?.(n)}function gd(n){return n&&(n.nextProducerIndex=0),Se(n)}function lm(n,e){if(Se(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Oc(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)md(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function dm(n){yd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(pD(t),r!==t.version))return!0}return!1}function hm(n){if(yd(n),Oc(n))for(let e=0;e<n.producerNode.length;e++)md(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function yD(n,e,t){if(vD(n),n.liveConsumerNode.length===0&&wD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=yD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function md(n,e){if(vD(n),n.liveConsumerNode.length===1&&wD(n))for(let r=0;r<n.producerNode.length;r++)md(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];yd(i),i.producerIndexOfThis[r]=e}}function Oc(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function yd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function vD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function wD(n){return n.producerNode!==void 0}function _D(n){let e=Object.create(TO);e.computation=n;let t=()=>{if(pD(e),um(e),e.value===pd)throw e.error;return e.value};return t[oi]=e,t}var am=Symbol("UNSET"),cm=Symbol("COMPUTING"),pd=Symbol("ERRORED"),TO=Z(M({},Fc),{value:am,dirty:!0,error:null,equal:hD,producerMustRecompute(n){return n.value===am||n.value===cm},producerRecomputeValue(n){if(n.value===cm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=cm;let t=gd(n),r;try{r=n.computation()}catch(i){r=pd,n.error=i}finally{lm(n,t)}if(e!==am&&e!==pd&&r!==pd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function SO(){throw new Error}var ED=SO;function ID(){ED()}function bD(n){ED=n}var AO=null;function DD(n){let e=Object.create(TD);e.value=n;let t=()=>(um(e),e.value);return t[oi]=e,t}function fm(n,e){mD()||ID(),n.equal(n.value,e)||(n.value=e,xO(n))}function CD(n,e){mD()||ID(),fm(n,e(n.value))}var TD=Z(M({},Fc),{equal:hD,value:void 0});function xO(n){n.version++,DO(),gD(n),AO?.()}function ue(n){return typeof n=="function"}function go(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var vd=go(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ls(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var tt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ue(r))try{r()}catch(s){e=s instanceof vd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{SD(s)}catch(o){e=e??[],o instanceof vd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new vd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)SD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ls(t,e)}remove(e){let{_finalizers:t}=this;t&&ls(t,e),e instanceof n&&e._removeParent(this)}};tt.EMPTY=(()=>{let n=new tt;return n.closed=!0,n})();var pm=tt.EMPTY;function wd(n){return n instanceof tt||n&&"closed"in n&&ue(n.remove)&&ue(n.add)&&ue(n.unsubscribe)}function SD(n){ue(n)?n():n.unsubscribe()}var On={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var mo={setTimeout(n,e,...t){let{delegate:r}=mo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=mo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _d(n){mo.setTimeout(()=>{let{onUnhandledError:e}=On;if(e)e(n);else throw n})}function Vc(){}var AD=gm("C",void 0,void 0);function xD(n){return gm("E",void 0,n)}function MD(n){return gm("N",n,void 0)}function gm(n,e,t){return{kind:n,value:e,error:t}}var ds=null;function yo(n){if(On.useDeprecatedSynchronousErrorHandling){let e=!ds;if(e&&(ds={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ds;if(ds=null,t)throw r}}else n()}function RD(n){On.useDeprecatedSynchronousErrorHandling&&ds&&(ds.errorThrown=!0,ds.error=n)}var hs=class extends tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wd(e)&&e.add(this)):this.destination=kO}static create(e,t,r){return new Tr(e,t,r)}next(e){this.isStopped?ym(MD(e),this):this._next(e)}error(e){this.isStopped?ym(xD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ym(AD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},MO=Function.prototype.bind;function mm(n,e){return MO.call(n,e)}var vm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Ed(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Ed(r)}else Ed(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Ed(t)}}},Tr=class extends hs{constructor(e,t,r){super();let i;if(ue(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&On.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mm(e.next,s),error:e.error&&mm(e.error,s),complete:e.complete&&mm(e.complete,s)}):i=e}this.destination=new vm(i)}};function Ed(n){On.useDeprecatedSynchronousErrorHandling?RD(n):_d(n)}function RO(n){throw n}function ym(n,e){let{onStoppedNotification:t}=On;t&&mo.setTimeout(()=>t(n,e))}var kO={closed:!0,next:Vc,error:RO,complete:Vc};var vo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zt(n){return n}function wm(...n){return _m(n)}function _m(n){return n.length===0?zt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var he=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=PO(t)?t:new Tr(t,r,i);return yo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=kD(r),new r((i,s)=>{let o=new Tr({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[vo](){return this}pipe(...t){return _m(t)(this)}toPromise(t){return t=kD(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function kD(n){var e;return(e=n??On.Promise)!==null&&e!==void 0?e:Promise}function NO(n){return n&&ue(n.next)&&ue(n.error)&&ue(n.complete)}function PO(n){return n&&n instanceof hs||NO(n)&&wd(n)}function Em(n){return ue(n?.lift)}function me(n){return e=>{if(Em(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(n,e,t,r,i){return new Im(n,e,t,r,i)}var Im=class extends hs{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function wo(){return me((n,e)=>{let t=null;n._refCount++;let r=ye(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var _o=class extends he{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Em(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tt;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tt.EMPTY)}return e}refCount(){return wo()(this)}};var ND=go(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ke=(()=>{class n extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Id(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ND}next(t){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){yo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?pm:(this.currentObservers=null,s.push(t),new tt(()=>{this.currentObservers=null,ls(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new he;return t.source=this,t}}return n.create=(e,t)=>new Id(e,t),n})(),Id=class extends ke{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:pm}};var Ct=class extends ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Lc={now(){return(Lc.delegate||Date).now()},delegate:void 0};var bd=class extends ke{constructor(e=1/0,t=1/0,r=Lc){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Dd=class extends tt{constructor(e,t){super()}schedule(e,t=0){return this}};var jc={setInterval(n,e,...t){let{delegate:r}=jc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=jc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Eo=class extends Dd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return jc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&jc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ls(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Io=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Io.now=Lc.now;var bo=class extends Io{constructor(e,t=Io.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Do=new bo(Eo),bm=Do;var Cd=class extends Eo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Td=class extends bo{};var Dm=new Td(Cd);var qt=new he(n=>n.complete());function Sd(n){return n&&ue(n.schedule)}function Cm(n){return n[n.length-1]}function Ad(n){return ue(Cm(n))?n.pop():void 0}function nr(n){return Sd(Cm(n))?n.pop():void 0}function PD(n,e){return typeof Cm(n)=="number"?n.pop():e}var xd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Md(n){return ue(n?.then)}function Rd(n){return ue(n[vo])}function kd(n){return Symbol.asyncIterator&&ue(n?.[Symbol.asyncIterator])}function Nd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function OO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Pd=OO();function Od(n){return ue(n?.[Pd])}function Fd(n){return iD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ud(t.read());if(i)return yield ud(void 0);yield yield ud(r)}}finally{t.releaseLock()}})}function Vd(n){return ue(n?.getReader)}function qe(n){if(n instanceof he)return n;if(n!=null){if(Rd(n))return FO(n);if(xd(n))return VO(n);if(Md(n))return LO(n);if(kd(n))return OD(n);if(Od(n))return jO(n);if(Vd(n))return UO(n)}throw Nd(n)}function FO(n){return new he(e=>{let t=n[vo]();if(ue(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VO(n){return new he(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function LO(n){return new he(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_d)})}function jO(n){return new he(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function OD(n){return new he(e=>{BO(n,e).catch(t=>e.error(t))})}function UO(n){return OD(Fd(n))}function BO(n,e){var t,r,i,s;return rD(this,void 0,void 0,function*(){try{for(t=sD(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function tn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function In(n,e=0){return me((t,r)=>{t.subscribe(ye(r,i=>tn(r,n,()=>r.next(i),e),()=>tn(r,n,()=>r.complete(),e),i=>tn(r,n,()=>r.error(i),e)))})}function Fn(n,e=0){return me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function FD(n,e){return qe(n).pipe(Fn(e),In(e))}function VD(n,e){return qe(n).pipe(Fn(e),In(e))}function LD(n,e){return new he(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function jD(n,e){return new he(t=>{let r;return tn(t,e,()=>{r=n[Pd](),tn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ue(r?.return)&&r.return()})}function Ld(n,e){if(!n)throw new Error("Iterable cannot be null");return new he(t=>{tn(t,e,()=>{let r=n[Symbol.asyncIterator]();tn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function UD(n,e){return Ld(Fd(n),e)}function BD(n,e){if(n!=null){if(Rd(n))return FD(n,e);if(xd(n))return LD(n,e);if(Md(n))return VD(n,e);if(kd(n))return Ld(n,e);if(Od(n))return jD(n,e);if(Vd(n))return UD(n,e)}throw Nd(n)}function be(n,e){return e?BD(n,e):qe(n)}function oe(...n){let e=nr(n);return be(n,e)}function Co(n,e){let t=ue(n)?n:()=>n,r=i=>i.error(t());return new he(e?i=>e.schedule(r,0,i):r)}function Tm(n){return!!n&&(n instanceof he||ue(n.lift)&&ue(n.subscribe))}var Sr=go(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function $D(n){return n instanceof Date&&!isNaN(n)}function se(n,e){return me((t,r)=>{let i=0;t.subscribe(ye(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:$O}=Array;function zO(n,e){return $O(e)?n(...e):n(e)}function jd(n){return se(e=>zO(n,e))}var{isArray:qO}=Array,{getPrototypeOf:HO,prototype:GO,keys:WO}=Object;function Ud(n){if(n.length===1){let e=n[0];if(qO(e))return{args:e,keys:null};if(KO(e)){let t=WO(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function KO(n){return n&&typeof n=="object"&&HO(n)===GO}function Bd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Uc(...n){let e=nr(n),t=Ad(n),{args:r,keys:i}=Ud(n);if(r.length===0)return be([],e);let s=new he(QO(r,e,i?o=>Bd(i,o):zt));return t?s.pipe(jd(t)):s}function QO(n,e,t=zt){return r=>{zD(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)zD(e,()=>{let l=be(n[c],e),d=!1;l.subscribe(ye(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function zD(n,e,t){n?tn(t,n,e):e()}function qD(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},m=D=>l<r?w(D):c.push(D),w=D=>{s&&e.next(D),l++;let C=!1;qe(t(D,d++)).subscribe(ye(e,P=>{i?.(P),s?m(P):e.next(P)},()=>{C=!0},void 0,()=>{if(C)try{for(l--;c.length&&l<r;){let P=c.shift();o?tn(e,o,()=>w(P)):w(P)}g()}catch(P){e.error(P)}}))};return n.subscribe(ye(e,m,()=>{f=!0,g()})),()=>{a?.()}}function ut(n,e,t=1/0){return ue(e)?ut((r,i)=>se((s,o)=>e(r,s,i,o))(qe(n(r,i))),t):(typeof e=="number"&&(t=e),me((r,i)=>qD(r,i,n,t)))}function ai(n=1/0){return ut(zt,n)}function HD(){return ai(1)}function To(...n){return HD()(be(n,nr(n)))}function $d(n){return new he(e=>{qe(n()).subscribe(e)})}function Sm(...n){let e=Ad(n),{args:t,keys:r}=Ud(n),i=new he(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;qe(t[d]).subscribe(ye(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Bd(r,a):a),s.complete())}))}});return e?i.pipe(jd(e)):i}function Am(n=0,e,t=bm){let r=-1;return e!=null&&(Sd(e)?t=e:r=e),new he(i=>{let s=$D(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Bc(...n){let e=nr(n),t=PD(n,1/0),r=n;return r.length?r.length===1?qe(r[0]):ai(t)(be(r,e)):qt}function mt(n,e){return me((t,r)=>{let i=0;t.subscribe(ye(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ci(n){return me((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ye(t,void 0,void 0,o=>{s=qe(n(o,ci(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function GD(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(ye(o,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Ar(n,e){return ue(e)?ut(n,e,1):ut(n,1)}function ui(n){return me((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xr(n){return n<=0?()=>qt:me((e,t)=>{let r=0;e.subscribe(ye(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function $c(n){return se(()=>n)}function zc(n,e=zt){return n=n??YO,me((t,r)=>{let i,s=!0;t.subscribe(ye(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function YO(n,e){return n===e}function zd(n=ZO){return me((e,t)=>{let r=!1;e.subscribe(ye(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function ZO(){return new Sr}function fs(n){return me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function hn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,s)=>n(i,s,r)):zt,xr(1),t?ui(e):zd(()=>new Sr))}function So(n){return n<=0?()=>qt:me((e,t)=>{let r=[];e.subscribe(ye(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function xm(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mt((i,s)=>n(i,s,r)):zt,So(1),t?ui(e):zd(()=>new Sr))}function qc(){return me((n,e)=>{let t,r=!1;n.subscribe(ye(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function ps(n,e){return me(GD(n,e,arguments.length>=2,!0))}function WD(n={}){let{connector:e=()=>new ke,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,c,l=0,d=!1,f=!1,g=()=>{a?.unsubscribe(),a=void 0},m=()=>{g(),o=c=void 0,d=f=!1},w=()=>{let D=o;m(),D?.unsubscribe()};return me((D,C)=>{l++,!f&&!d&&g();let P=c=c??e();C.add(()=>{l--,l===0&&!f&&!d&&(a=Mm(w,i))}),P.subscribe(C),!o&&l>0&&(o=new Tr({next:O=>P.next(O),error:O=>{f=!0,g(),a=Mm(m,t,O),P.error(O)},complete:()=>{d=!0,g(),a=Mm(m,r),P.complete()}}),qe(D).subscribe(o))})(s)}}function Mm(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new Tr({next:()=>{r.unsubscribe(),n()}});return qe(e(...t)).subscribe(r)}function Ao(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,WD({connector:()=>new bd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Mr(...n){let e=nr(n);return me((t,r)=>{(e?To(n,t,e):To(n,t)).subscribe(r)})}function Be(n,e){return me((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ye(r,c=>{i?.unsubscribe();let l=0,d=s++;qe(n(c,d)).subscribe(i=ye(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function qd(n,e){return ue(e)?Be(()=>n,e):Be(()=>n)}function Hc(n){return me((e,t)=>{qe(n).subscribe(ye(t,()=>t.complete(),Vc)),!t.closed&&e.subscribe(t)})}function lt(n,e,t){let r=ue(n)||e||t?{next:n,error:e,complete:t}:n;return r?me((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ye(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):zt}var kC="https://g.co/ng/security#xss",ee=class extends Error{constructor(e,t){super(xh(e,t)),this.code=e}};function xh(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function ru(n){return{toString:n}.toString()}var Hd="__parameters__";function JO(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function NC(n,e,t){return ru(()=>{let r=JO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(Hd)?c[Hd]:Object.defineProperty(c,Hd,{value:[]})[Hd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Un=globalThis;function je(n){for(let e in n)if(n[e]===je)return e;throw Error("Could not find renamed property on target object.")}function XO(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Gt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Gt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function qm(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var eF=je({__forward_ref__:je});function Mh(n){return n.__forward_ref__=Mh,n.toString=function(){return Gt(this())},n}function Ht(n){return PC(n)?n():n}function PC(n){return typeof n=="function"&&n.hasOwnProperty(eF)&&n.__forward_ref__===Mh}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Tt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rh(n){return KD(n,FC)||KD(n,VC)}function OC(n){return Rh(n)!==null}function KD(n,e){return n.hasOwnProperty(e)?n[e]:null}function tF(n){let e=n&&(n[FC]||n[VC]);return e||null}function QD(n){return n&&(n.hasOwnProperty(YD)||n.hasOwnProperty(nF))?n[YD]:null}var FC=je({\u0275prov:je}),YD=je({\u0275inj:je}),VC=je({ngInjectableDef:je}),nF=je({ngInjectorDef:je}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function LC(n){return n&&!!n.\u0275providers}var rF=je({\u0275cmp:je}),iF=je({\u0275dir:je}),sF=je({\u0275pipe:je}),oF=je({\u0275mod:je}),nh=je({\u0275fac:je}),Wc=je({__NG_ELEMENT_ID__:je}),ZD=je({__NG_ENV_ID__:je});function Qc(n){return typeof n=="string"?n:n==null?"":String(n)}function aF(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Qc(n)}function cF(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ee(-200,n)}function Gy(n,e){throw new ee(-201,!1)}var ve=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ve||{}),Hm;function jC(){return Hm}function nn(n){let e=Hm;return Hm=n,e}function UC(n,e,t){let r=Rh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ve.Optional)return null;if(e!==void 0)return e;Gy(n,"Injector")}var uF={},Yc=uF,Gm="__NG_DI_FLAG__",rh="ngTempTokenPath",lF="ngTokenPath",dF=/\n/gm,hF="\u0275",JD="__source",No;function fF(){return No}function li(n){let e=No;return No=n,e}function pF(n,e=ve.Default){if(No===void 0)throw new ee(-203,!1);return No===null?UC(n,void 0,e):No.get(n,e&ve.Optional?null:void 0,e)}function L(n,e=ve.Default){return(jC()||pF)(Ht(n),e)}function B(n,e=ve.Default){return L(n,kh(e))}function kh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Wm(n){let e=[];for(let t=0;t<n.length;t++){let r=Ht(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ee(900,!1);let i,s=ve.Default;for(let o=0;o<r.length;o++){let a=r[o],c=gF(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(L(i,s))}else e.push(L(r))}return e}function BC(n,e){return n[Gm]=e,n.prototype[Gm]=e,n}function gF(n){return n[Gm]}function mF(n,e,t,r){let i=n[rh];throw e[JD]&&i.unshift(e[JD]),n.message=yF(`
`+n.message,i,t,r),n[lF]=i,n[rh]=null,n}function yF(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==hF?n.slice(2):n;let i=Gt(e);if(Array.isArray(e))i=e.map(Gt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Gt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(dF,`
  `)}`}var Wo=BC(NC("Optional"),8);var Nh=BC(NC("SkipSelf"),4);function vs(n,e){let t=n.hasOwnProperty(nh);return t?n[nh]:null}function Wy(n,e){n.forEach(t=>Array.isArray(t)?Wy(t,e):e(t))}function $C(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ih(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function vF(n,e){let t=[];for(let r=0;r<n;r++)t.push(e);return t}function wF(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function Ky(n,e,t){let r=iu(n,e);return r>=0?n[r|1]=t:(r=~r,wF(n,r,e,t)),r}function Rm(n,e){let t=iu(n,e);if(t>=0)return n[t|1]}function iu(n,e){return _F(n,e,1)}function _F(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Oo={},rn=[],Fo=new H(""),zC=new H("",-1),qC=new H(""),sh=class{get(e,t=Yc){if(t===Yc){let r=new Error(`NullInjectorError: No provider for ${Gt(e)}!`);throw r.name="NullInjectorError",r}return t}},HC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(HC||{}),sr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(sr||{}),fi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(fi||{});function EF(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Km(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];bF(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function IF(n){return n===3||n===4||n===6}function bF(n){return n.charCodeAt(0)===64}function Zc(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?XD(n,t,i,null,e[++r]):XD(n,t,i,null,null))}}return n}function XD(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var GC="ng-template";function DF(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&EF(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Qy(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Qy(n){return n.type===4&&n.value!==GC}function CF(n,e,t){let r=n.type===4&&!t?GC:n.value;return e===r}function TF(n,e,t){let r=4,i=n.attrs,s=i!==null?xF(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Vn(r)&&!Vn(c))return!1;if(o&&Vn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!CF(n,c,t)||c===""&&e.length===1){if(Vn(r))return!1;o=!0}}else if(r&8){if(i===null||!DF(n,i,c,t)){if(Vn(r))return!1;o=!0}}else{let l=e[++a],d=SF(c,i,Qy(n),t);if(d===-1){if(Vn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Vn(r))return!1;o=!0}}}}return Vn(r)||o}function Vn(n){return(n&1)===0}function SF(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return MF(e,n)}function WC(n,e,t=!1){for(let r=0;r<e.length;r++)if(TF(n,e[r],t))return!0;return!1}function AF(n){let e=n.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function xF(n){for(let e=0;e<n.length;e++){let t=n[e];if(IF(t))return e}return n.length}function MF(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function RF(n,e){e:for(let t=0;t<e.length;t++){let r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function eC(n,e){return n?":not("+e.trim()+")":e}function kF(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Vn(o)&&(e+=eC(s,i),i=""),r=o,s=s||!Vn(r);t++}return i!==""&&(e+=eC(s,i)),e}function NF(n){return n.map(kF).join(",")}function PF(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!Vn(i))break;i=s}r++}return{attrs:e,classes:t}}function He(n){return ru(()=>{let e=JC(n),t=Z(M({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===HC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||sr.Emulated,styles:n.styles||rn,_:null,schemas:n.schemas||null,tView:null,id:""});XC(t);let r=n.dependencies;return t.directiveDefs=oh(r,!1),t.pipeDefs=oh(r,!0),t.id=VF(t),t})}function OF(n){return pi(n)||KC(n)}function FF(n){return n!==null}function St(n){return ru(()=>({type:n.type,bootstrap:n.bootstrap||rn,declarations:n.declarations||rn,imports:n.imports||rn,exports:n.exports||rn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function tC(n,e){if(n==null)return Oo;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=fi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==fi.None?[r,a]:r,e[s]=o):t[s]=r}return t}function cr(n){return ru(()=>{let e=JC(n);return XC(e),e})}function su(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function pi(n){return n[rF]||null}function KC(n){return n[iF]||null}function QC(n){return n[sF]||null}function YC(n){let e=pi(n)||KC(n)||QC(n);return e!==null?e.standalone:!1}function ZC(n,e){let t=n[oF]||null;if(!t&&e===!0)throw new Error(`Type ${Gt(n)} does not have '\u0275mod' property.`);return t}function JC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Oo,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||rn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:tC(n.inputs,e),outputs:tC(n.outputs),debugInfo:null}}function XC(n){n.features?.forEach(e=>e(n))}function oh(n,e){if(!n)return null;let t=e?QC:OF;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(FF)}function VF(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Ph(n){return{\u0275providers:n}}function LF(...n){return{\u0275providers:eT(!0,n),\u0275fromNgModule:!0}}function eT(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Wy(e,o=>{let a=o;Qm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&tT(i,s),t}function tT(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Yy(i,s=>{e(s,r)})}}function Qm(n,e,t,r){if(n=Ht(n),!n)return!1;let i=null,s=QD(n),o=!s&&pi(n);if(!s&&!o){let c=n.ngModule;if(s=QD(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Qm(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Wy(s.imports,d=>{Qm(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&tT(l,e)}if(!a){let l=vs(i)||(()=>new i);e({provide:i,useFactory:l,deps:rn},i),e({provide:qC,useValue:i,multi:!0},i),e({provide:Fo,useValue:()=>L(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Yy(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Yy(n,e){for(let t of n)LC(t)&&(t=t.\u0275providers),Array.isArray(t)?Yy(t,e):e(t)}var jF=je({provide:String,useValue:je});function nT(n){return n!==null&&typeof n=="object"&&jF in n}function UF(n){return!!(n&&n.useExisting)}function BF(n){return!!(n&&n.useFactory)}function Vo(n){return typeof n=="function"}function $F(n){return!!n.useClass}var Oh=new H(""),Jd={},zF={},km;function Zy(){return km===void 0&&(km=new sh),km}var Wt=class{},Jc=class extends Wt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zm(e,o=>this.processProvider(o)),this.records.set(zC,xo(void 0,this)),i.has("environment")&&this.records.set(Wt,xo(void 0,this));let s=this.records.get(Oh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(qC,rn,ve.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=li(this),r=nn(void 0),i;try{return e()}finally{li(t),nn(r)}}get(e,t=Yc,r=ve.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ZD))return e[ZD](this);r=kh(r);let i,s=li(this),o=nn(void 0);try{if(!(r&ve.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=KF(e)&&Rh(e);l&&this.injectableDefInScope(l)?c=xo(Ym(e),Jd):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ve.Self?Zy():this.parent;return t=r&ve.Optional&&t===Yc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[rh]=a[rh]||[]).unshift(Gt(e)),s)throw a;return mF(a,e,"R3InjectorError",this.source)}else throw a}finally{nn(o),li(s)}}resolveInjectorInitializers(){let e=Se(null),t=li(this),r=nn(void 0),i;try{let s=this.get(Fo,rn,ve.Self);for(let o of s)o()}finally{li(t),nn(r),Se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Gt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ee(205,!1)}processProvider(e){e=Ht(e);let t=Vo(e)?e:Ht(e&&e.provide),r=HF(e);if(!Vo(e)&&e.multi===!0){let i=this.records.get(t);i||(i=xo(void 0,Jd,!0),i.factory=()=>Wm(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Se(null);try{return t.value===Jd&&(t.value=zF,t.value=t.factory()),typeof t.value=="object"&&t.value&&WF(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Ht(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ym(n){let e=Rh(n),t=e!==null?e.factory:vs(n);if(t!==null)return t;if(n instanceof H)throw new ee(204,!1);if(n instanceof Function)return qF(n);throw new ee(204,!1)}function qF(n){if(n.length>0)throw new ee(204,!1);let t=tF(n);return t!==null?()=>t.factory(n):()=>new n}function HF(n){if(nT(n))return xo(void 0,n.useValue);{let e=rT(n);return xo(e,Jd)}}function rT(n,e,t){let r;if(Vo(n)){let i=Ht(n);return vs(i)||Ym(i)}else if(nT(n))r=()=>Ht(n.useValue);else if(BF(n))r=()=>n.useFactory(...Wm(n.deps||[]));else if(UF(n))r=()=>L(Ht(n.useExisting));else{let i=Ht(n&&(n.useClass||n.provide));if(GF(n))r=()=>new i(...Wm(n.deps));else return vs(i)||Ym(i)}return r}function xo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function GF(n){return!!n.deps}function WF(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function KF(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function Zm(n,e){for(let t of n)Array.isArray(t)?Zm(t,e):t&&LC(t)?Zm(t.\u0275providers,e):e(t)}function Tn(n,e){n instanceof Jc&&n.assertNotDestroyed();let t,r=li(n),i=nn(void 0);try{return e()}finally{li(r),nn(i)}}function iT(){return jC()!==void 0||fF()!=null}function QF(n){if(!iT())throw new ee(-203,!1)}function YF(n){let e=Un.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function ZF(n){return typeof n=="function"}var Pr=0,Ee=1,le=2,Kt=3,jn=4,on=5,Xc=6,ah=7,Bn=8,Lo=9,or=10,yt=11,eu=12,nC=13,Ko=14,Cn=15,jo=16,Mo=17,Uo=18,Fh=19,sT=20,di=21,Nm=22,bn=23,sn=25,oT=1;var ws=7,ch=8,uh=9,Dn=10,lh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(lh||{});function hi(n){return Array.isArray(n)&&typeof n[oT]=="object"}function Or(n){return Array.isArray(n)&&n[oT]===!0}function aT(n){return(n.flags&4)!==0}function Vh(n){return n.componentOffset>-1}function Jy(n){return(n.flags&1)===1}function gi(n){return!!n.template}function Jm(n){return(n[le]&512)!==0}var Xm=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function cT(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ts(){return uT}function uT(n){return n.type.prototype.ngOnChanges&&(n.setInput=XF),JF}Ts.ngInherit=!0;function JF(){let n=dT(this),e=n?.current;if(e){let t=n.previous;if(t===Oo)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function XF(n,e,t,r,i){let s=this.declaredInputs[r],o=dT(n)||eV(n,{previous:Oo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Xm(l&&l.currentValue,t,c===Oo),cT(n,e,i,t)}var lT="__ngSimpleChanges__";function dT(n){return n[lT]||null}function eV(n,e){return n[lT]=e}var rC=null;var rr=function(n,e,t){rC?.(n,e,t)},tV="svg",nV="math";function ar(n){for(;Array.isArray(n);)n=n[Pr];return n}function hT(n,e){return ar(e[n])}function $n(n,e){return ar(e[n.index])}function fT(n,e){return n.data[e]}function Xy(n,e){return n[e]}function vi(n,e){let t=e[n];return hi(t)?t:t[Pr]}function ev(n){return(n[le]&128)===128}function rV(n){return Or(n[Kt])}function dh(n,e){return e==null?null:n[e]}function pT(n){n[Mo]=0}function gT(n){n[le]&1024||(n[le]|=1024,ev(n)&&jh(n))}function iV(n,e){for(;n>0;)e=e[Ko],n--;return e}function Lh(n){return!!(n[le]&9216||n[bn]?.dirty)}function ey(n){n[or].changeDetectionScheduler?.notify(8),n[le]&64&&(n[le]|=1024),Lh(n)&&jh(n)}function jh(n){n[or].changeDetectionScheduler?.notify(0);let e=_s(n);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!ev(e)));)e=_s(e)}function mT(n,e){if((n[le]&256)===256)throw new ee(911,!1);n[di]===null&&(n[di]=[]),n[di].push(e)}function sV(n,e){if(n[di]===null)return;let t=n[di].indexOf(e);t!==-1&&n[di].splice(t,1)}function _s(n){let e=n[Kt];return Or(e)?e[Kt]:e}var we={lFrame:AT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var yT=!1;function oV(){return we.lFrame.elementDepthCount}function aV(){we.lFrame.elementDepthCount++}function cV(){we.lFrame.elementDepthCount--}function vT(){return we.bindingsEnabled}function wT(){return we.skipHydrationRootTNode!==null}function uV(n){return we.skipHydrationRootTNode===n}function lV(){we.skipHydrationRootTNode=null}function Ae(){return we.lFrame.lView}function an(){return we.lFrame.tView}function Qo(n){return we.lFrame.contextLView=n,n[Bn]}function Yo(n){return we.lFrame.contextLView=null,n}function pn(){let n=_T();for(;n!==null&&n.type===64;)n=n.parent;return n}function _T(){return we.lFrame.currentTNode}function dV(){let n=we.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ou(n,e){let t=we.lFrame;t.currentTNode=n,t.isParent=e}function ET(){return we.lFrame.isParent}function IT(){we.lFrame.isParent=!1}function hV(){return we.lFrame.contextLView}function bT(){return yT}function iC(n){yT=n}function Uh(){let n=we.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function fV(){return we.lFrame.bindingIndex}function pV(n){return we.lFrame.bindingIndex=n}function DT(){return we.lFrame.bindingIndex++}function tv(n){let e=we.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function gV(){return we.lFrame.inI18n}function mV(n,e){let t=we.lFrame;t.bindingIndex=t.bindingRootIndex=n,ty(e)}function yV(){return we.lFrame.currentDirectiveIndex}function ty(n){we.lFrame.currentDirectiveIndex=n}function vV(n){let e=we.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function CT(n){we.lFrame.currentQueryIndex=n}function wV(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[on]:null}function TT(n,e,t){if(t&ve.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ve.Host);)if(i=wV(s),i===null||(s=s[Ko],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=we.lFrame=ST();return r.currentTNode=e,r.lView=n,!0}function nv(n){let e=ST(),t=n[Ee];we.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function ST(){let n=we.lFrame,e=n===null?null:n.child;return e===null?AT(n):e}function AT(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xT(){let n=we.lFrame;return we.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var MT=xT;function rv(){let n=xT();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _V(n){return(we.lFrame.contextLView=iV(n,we.lFrame.contextLView))[Bn]}function wi(){return we.lFrame.selectedIndex}function Es(n){we.lFrame.selectedIndex=n}function RT(){let n=we.lFrame;return fT(n.tView,n.selectedIndex)}function EV(){return we.lFrame.currentNamespace}var kT=!0;function iv(){return kT}function sv(n){kT=n}function IV(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=uT(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function ov(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Xd(n,e,t){NT(n,e,3,t)}function eh(n,e,t,r){(n[le]&3)===t&&NT(n,e,t,r)}function Pm(n,e){let t=n[le];(t&3)===e&&(t&=16383,t+=1,n[le]=t)}function NT(n,e,t,r){let i=r!==void 0?n[Mo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Mo]+=65536),(a<s||s==-1)&&(bV(n,t,e,c),n[Mo]=(n[Mo]&4294901760)+c+2),c++}function sC(n,e){rr(4,n,e);let t=Se(null);try{e.call(n)}finally{Se(t),rr(5,n,e)}}function bV(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[le]>>14<n[Mo]>>16&&(n[le]&3)===e&&(n[le]+=16384,sC(a,s)):sC(a,s)}var Po=-1,Is=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function DV(n){return n instanceof Is}function CV(n){return(n.flags&8)!==0}function TV(n){return(n.flags&16)!==0}var Om={},ny=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=kh(r);let i=this.injector.get(e,Om,r);return i!==Om||t===Om?i:this.parentInjector.get(e,t,r)}};function PT(n){return n!==Po}function hh(n){return n&32767}function SV(n){return n>>16}function fh(n,e){let t=SV(n),r=e;for(;t>0;)r=r[Ko],t--;return r}var ry=!0;function ph(n){let e=ry;return ry=n,e}var AV=256,OT=AV-1,FT=5,xV=0,ir={};function MV(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wc)&&(r=t[Wc]),r==null&&(r=t[Wc]=xV++);let i=r&OT,s=1<<i;e.data[n+(i>>FT)]|=s}function gh(n,e){let t=VT(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,Fm(r.data,n),Fm(e,null),Fm(r.blueprint,null));let i=av(n,e),s=n.injectorIndex;if(PT(i)){let o=hh(i),a=fh(i,e),c=a[Ee].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Fm(n,e){n.push(0,0,0,0,0,0,0,0,e)}function VT(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function av(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=$T(i),r===null)return Po;if(t++,i=i[Ko],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Po}function iy(n,e,t){MV(n,e,t)}function LT(n,e,t){if(t&ve.Optional||n!==void 0)return n;Gy(e,"NodeInjector")}function jT(n,e,t,r){if(t&ve.Optional&&r===void 0&&(r=null),!(t&(ve.Self|ve.Host))){let i=n[Lo],s=nn(void 0);try{return i?i.get(e,r,t&ve.Optional):UC(e,r,t&ve.Optional)}finally{nn(s)}}return LT(r,e,t)}function UT(n,e,t,r=ve.Default,i){if(n!==null){if(e[le]&2048&&!(r&ve.Self)){let o=OV(n,e,t,r,ir);if(o!==ir)return o}let s=BT(n,e,t,r,ir);if(s!==ir)return s}return jT(e,t,r,i)}function BT(n,e,t,r,i){let s=NV(t);if(typeof s=="function"){if(!TT(e,n,r))return r&ve.Host?LT(i,t,r):jT(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ve.Optional))Gy(t);else return o}finally{MT()}}else if(typeof s=="number"){let o=null,a=VT(n,e),c=Po,l=r&ve.Host?e[Cn][on]:null;for((a===-1||r&ve.SkipSelf)&&(c=a===-1?av(n,e):e[a+8],c===Po||!aC(r,!1)?a=-1:(o=e[Ee],a=hh(c),e=fh(c,e)));a!==-1;){let d=e[Ee];if(oC(s,a,d.data)){let f=RV(a,e,t,o,r,l);if(f!==ir)return f}c=e[a+8],c!==Po&&aC(r,e[Ee].data[a+8]===l)&&oC(s,a,e)?(o=d,a=hh(c),e=fh(c,e)):a=-1}}return i}function RV(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],c=r==null?Vh(a)&&ry:r!=o&&(a.type&3)!==0,l=i&ve.Host&&s===a,d=kV(a,o,t,c,l);return d!==null?Bo(e,o,d,a):ir}function kV(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let m=f;m<g;m++){let w=o[m];if(m<c&&t===w||m>=c&&w.type===t)return m}if(i){let m=o[c];if(m&&gi(m)&&m.type===t)return c}return null}function Bo(n,e,t,r){let i=n[t],s=e.data;if(DV(i)){let o=i;o.resolving&&cF(aF(s[t]));let a=ph(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?nn(o.injectImpl):null,d=TT(n,r,ve.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&IV(t,s[t],e)}finally{l!==null&&nn(l),ph(a),o.resolving=!1,MT()}}return i}function NV(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Wc)?n[Wc]:void 0;return typeof e=="number"?e>=0?e&OT:PV:e}function oC(n,e,t){let r=1<<n;return!!(t[e+(n>>FT)]&r)}function aC(n,e){return!(n&ve.Self)&&!(n&ve.Host&&e)}var ys=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return UT(this._tNode,this._lView,e,kh(r),t)}};function PV(){return new ys(pn(),Ae())}function Bh(n){return ru(()=>{let e=n.prototype.constructor,t=e[nh]||sy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[nh]||sy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function sy(n){return PC(n)?()=>{let e=sy(Ht(n));return e&&e()}:vs(n)}function OV(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[le]&2048&&!(o[le]&512);){let a=BT(s,o,t,r|ve.Self,ir);if(a!==ir)return a;let c=s.parent;if(!c){let l=o[sT];if(l){let d=l.get(t,ir,r);if(d!==ir)return d}c=$T(o),o=o[Ko]}s=c}return i}function $T(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[on]:null}function cC(n,e=null,t=null,r){let i=zT(n,e,t,r);return i.resolveInjectorInitializers(),i}function zT(n,e=null,t=null,r,i=new Set){let s=[t||rn,LF(n)];return r=r||(typeof n=="object"?void 0:Gt(n)),new Jc(s,e||Zy(),r||null,i)}var gs=class gs{static create(e,t){if(Array.isArray(e))return cC({name:""},t,e,"");{let r=e.name??"";return cC({name:r},e.parent,e.providers,r)}}};gs.THROW_IF_NOT_FOUND=Yc,gs.NULL=new sh,gs.\u0275prov=$({token:gs,providedIn:"any",factory:()=>L(zC)}),gs.__NG_ELEMENT_ID__=-1;var fn=gs;var FV=new H("");FV.__NG_ELEMENT_ID__=n=>{let e=pn();if(e===null)throw new ee(204,!1);if(e.type&2)return e.value;if(n&ve.Optional)return null;throw new ee(204,!1)};var VV="ngOriginalError";function Vm(n){return n[VV]}var qT=!0,cv=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=LV,e.__NG_ENV_ID__=r=>r;let n=e;return n})(),oy=class extends cv{constructor(e){super(),this._lView=e}onDestroy(e){return mT(this._lView,e),()=>sV(this._lView,e)}};function LV(){return new oy(Ae())}var _i=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})();var ay=class extends ke{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,iT()&&(this.destroyRef=B(cv,{optional:!0})??void 0,this.pendingTasks=B(_i,{optional:!0})??void 0)}emit(e){let t=Se(null);try{super.next(e)}finally{Se(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof tt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ze=ay;function mh(...n){}function HT(n){let e,t;function r(){n=mh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function uC(n){return queueMicrotask(()=>n()),()=>{n=mh}}var uv="isAngularZone",yh=uv+"_ID",jV=0,_e=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ze(!1),this.onMicrotaskEmpty=new Ze(!1),this.onStable=new Ze(!1),this.onError=new Ze(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=qT}=e;if(typeof Zone>"u")throw new ee(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,$V(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(uv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ee(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ee(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,UV,mh,mh);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},UV={};function lv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function BV(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){HT(()=>{n.callbackScheduled=!1,cy(n),n.isCheckStableRunning=!0,lv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),cy(n)}function $V(n){let e=()=>{BV(n)},t=jV++;n._inner=n._inner.fork({name:"angular",properties:{[uv]:!0,[yh]:t,[yh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(zV(c))return r.invokeTask(s,o,a,c);try{return lC(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),dC(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return lC(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!qV(c)&&e(),dC(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,cy(n),lv(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function cy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function lC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function dC(n){n._nesting--,lv(n)}var vh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ze,this.onMicrotaskEmpty=new Ze,this.onStable=new Ze,this.onError=new Ze}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function zV(n){return GT(n,"__ignore_ng_zone__")}function qV(n){return GT(n,"__scheduler_tick__")}function GT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function HV(n="zone.js",e){return n==="noop"?new vh:n==="zone.js"?new _e(e):n}var Rr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Vm(e);for(;t&&Vm(t);)t=Vm(t);return t||null}},GV=new H("",{providedIn:"root",factory:()=>{let n=B(_e),e=B(Rr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function WV(){return $h(pn(),Ae())}function $h(n,e){return new Ei($n(n,e))}var Ei=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=WV;let n=e;return n})();function WT(n){return(n.flags&128)===128}var KT=new Map,KV=0;function QV(){return KV++}function YV(n){KT.set(n[Fh],n)}function uy(n){KT.delete(n[Fh])}var hC="__ngContext__";function bs(n,e){hi(e)?(n[hC]=e[Fh],YV(e)):n[hC]=e}function QT(n){return ZT(n[eu])}function YT(n){return ZT(n[jn])}function ZT(n){for(;n!==null&&!Or(n);)n=n[jn];return n}var ly;function JT(n){ly=n}function ZV(){if(ly!==void 0)return ly;if(typeof document<"u")return document;throw new ee(210,!1)}var zh=new H("",{providedIn:"root",factory:()=>JV}),JV="ng",dv=new H(""),At=new H("",{providedIn:"platform",factory:()=>"unknown"});var hv=new H("",{providedIn:"root",factory:()=>ZV().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var XV="h",eL="b";var tL=()=>null;function fv(n,e,t=!1){return tL(n,e,t)}var XT=!1,nL=new H("",{providedIn:"root",factory:()=>XT});var Gd;function rL(){if(Gd===void 0&&(Gd=null,Un.trustedTypes))try{Gd=Un.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gd}function qh(n){return rL()?.createHTML(n)||n}var kr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kC})`}},dy=class extends kr{getTypeName(){return"HTML"}},hy=class extends kr{getTypeName(){return"Style"}},fy=class extends kr{getTypeName(){return"Script"}},py=class extends kr{getTypeName(){return"URL"}},gy=class extends kr{getTypeName(){return"ResourceURL"}};function ur(n){return n instanceof kr?n.changingThisBreaksApplicationSecurity:n}function Ss(n,e){let t=iL(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${kC})`)}return t===e}function iL(n){return n instanceof kr&&n.getTypeName()||null}function eS(n){return new dy(n)}function tS(n){return new hy(n)}function nS(n){return new fy(n)}function rS(n){return new py(n)}function iS(n){return new gy(n)}function sL(n){let e=new yy(n);return oL()?new my(e):e}var my=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(qh(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},yy=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=qh(e),t}};function oL(){try{return!!new window.DOMParser().parseFromString(qh(""),"text/html")}catch{return!1}}var aL=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hh(n){return n=String(n),n.match(aL)?n:"unsafe:"+n}function Fr(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function au(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var sS=Fr("area,br,col,hr,img,wbr"),oS=Fr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),aS=Fr("rp,rt"),cL=au(aS,oS),uL=au(oS,Fr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lL=au(aS,Fr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),fC=au(sS,uL,lL,cL),cS=Fr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),dL=Fr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),hL=Fr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),fL=au(cS,dL,hL),pL=Fr("script,style,template"),vy=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=yL(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=mL(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=pC(e).toLowerCase();if(!fC.hasOwnProperty(t))return this.sanitizedSomething=!0,!pL.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!fL.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=s.value;cS[a]&&(c=Hh(c)),this.buf.push(" ",o,'="',gC(c),'"')}return this.buf.push(">"),!0}endElement(e){let t=pC(e).toLowerCase();fC.hasOwnProperty(t)&&!sS.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(gC(e))}};function gL(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function mL(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw uS(e);return e}function yL(n){let e=n.firstChild;if(e&&gL(n,e))throw uS(e);return e}function pC(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function uS(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var vL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wL=/([^\#-~ |!])/g;function gC(n){return n.replace(/&/g,"&amp;").replace(vL,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(wL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Wd;function lS(n,e){let t=null;try{Wd=Wd||sL(n);let r=e?String(e):"";t=Wd.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=Wd.getInertBodyElement(r)}while(r!==s);let a=new vy().sanitizeChildren(mC(t)||t);return qh(a)}finally{if(t){let r=mC(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function mC(n){return"content"in n&&_L(n)?n.content:null}function _L(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var gn=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(gn||{});function Qt(n){let e=EL();return e?e.sanitize(gn.URL,n)||"":Ss(n,"URL")?ur(n):Hh(Qc(n))}function EL(){let n=Ae();return n&&n[or].sanitizer}function dS(n){return n instanceof Function?n():n}function IL(n){return(n??B(fn)).get(At)==="browser"}var Nr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Nr||{}),bL;function pv(n,e){return bL(n,e)}function Ro(n,e,t,r,i){if(r!=null){let s,o=!1;Or(r)?s=r:hi(r)&&(o=!0,r=r[Pr]);let a=ar(r);n===0&&t!==null?i==null?yS(e,t,a):wh(e,t,a,i||null,!0):n===1&&t!==null?wh(e,t,a,i||null,!0):n===2?FL(e,a,o):n===3&&e.destroyNode(a),s!=null&&LL(e,n,s,t,i)}}function DL(n,e){return n.createText(e)}function CL(n,e,t){n.setValue(e,t)}function hS(n,e,t){return n.createElement(e,t)}function TL(n,e){fS(n,e),e[Pr]=null,e[on]=null}function SL(n,e,t,r,i,s){r[Pr]=i,r[on]=e,Gh(n,r,t,1,i,s)}function fS(n,e){e[or].changeDetectionScheduler?.notify(9),Gh(n,e,e[yt],2,null,null)}function AL(n){let e=n[eu];if(!e)return Lm(n[Ee],n);for(;e;){let t=null;if(hi(e))t=e[eu];else{let r=e[Dn];r&&(t=r)}if(!t){for(;e&&!e[jn]&&e!==n;)hi(e)&&Lm(e[Ee],e),e=e[Kt];e===null&&(e=n),hi(e)&&Lm(e[Ee],e),t=e&&e[jn]}e=t}}function xL(n,e,t,r){let i=Dn+r,s=t.length;r>0&&(t[i-1][jn]=e),r<s-Dn?(e[jn]=t[i],$C(t,Dn+r,e)):(t.push(e),e[jn]=null),e[Kt]=t;let o=e[jo];o!==null&&t!==o&&pS(o,e);let a=e[Uo];a!==null&&a.insertView(n),ey(e),e[le]|=128}function pS(n,e){let t=n[uh],r=e[Kt];if(hi(r))n[le]|=lh.HasTransplantedViews;else{let i=r[Kt][Cn];e[Cn]!==i&&(n[le]|=lh.HasTransplantedViews)}t===null?n[uh]=[e]:t.push(e)}function gv(n,e){let t=n[uh],r=t.indexOf(e);t.splice(r,1)}function wy(n,e){if(n.length<=Dn)return;let t=Dn+e,r=n[t];if(r){let i=r[jo];i!==null&&i!==n&&gv(i,r),e>0&&(n[t-1][jn]=r[jn]);let s=ih(n,Dn+e);TL(r[Ee],r);let o=s[Uo];o!==null&&o.detachView(s[Ee]),r[Kt]=null,r[jn]=null,r[le]&=-129}return r}function gS(n,e){if(!(e[le]&256)){let t=e[yt];t.destroyNode&&Gh(n,e,t,3,null,null),AL(e)}}function Lm(n,e){if(e[le]&256)return;let t=Se(null);try{e[le]&=-129,e[le]|=256,e[bn]&&hm(e[bn]),RL(n,e),ML(n,e),e[Ee].type===1&&e[yt].destroy();let r=e[jo];if(r!==null&&Or(e[Kt])){r!==e[Kt]&&gv(r,e);let i=e[Uo];i!==null&&i.detachView(n)}uy(e)}finally{Se(t)}}function ML(n,e){let t=n.cleanup,r=e[ah];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[ah]=null);let i=e[di];if(i!==null){e[di]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function RL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Is)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];rr(4,a,c);try{c.call(a)}finally{rr(5,a,c)}}else{rr(4,i,s);try{s.call(i)}finally{rr(5,i,s)}}}}}function mS(n,e,t){return kL(n,e.parent,t)}function kL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Pr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===sr.None||s===sr.Emulated)return null}return $n(r,t)}}function wh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function yS(n,e,t){n.appendChild(e,t)}function yC(n,e,t,r,i){r!==null?wh(n,e,t,r,i):yS(n,e,t)}function vS(n,e){return n.parentNode(e)}function NL(n,e){return n.nextSibling(e)}function wS(n,e,t){return OL(n,e,t)}function PL(n,e,t){return n.type&40?$n(n,t):null}var OL=PL,vC;function mv(n,e,t,r){let i=mS(n,r,e),s=e[yt],o=r.parent||e[on],a=wS(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)yC(s,i,t[c],a,!1);else yC(s,i,t,a,!1);vC!==void 0&&vC(s,r,e,t,i)}function Gc(n,e){if(e!==null){let t=e.type;if(t&3)return $n(e,n);if(t&4)return _y(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Gc(n,r);{let i=n[e.index];return Or(i)?_y(-1,i):ar(i)}}else{if(t&128)return Gc(n,e.next);if(t&32)return pv(e,n)()||ar(n[e.index]);{let r=_S(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=_s(n[Cn]);return Gc(i,r)}else return Gc(n,e.next)}}}return null}function _S(n,e){if(e!==null){let r=n[Cn][on],i=e.projection;return r.projection[i]}return null}function _y(n,e){let t=Dn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return Gc(r,i)}return e[ws]}function FL(n,e,t){n.removeChild(null,e,t)}function yv(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&bs(ar(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)yv(n,e,t.child,r,i,s,!1),Ro(e,n,i,a,s);else if(c&32){let l=pv(t,r),d;for(;d=l();)Ro(e,n,i,d,s);Ro(e,n,i,a,s)}else c&16?ES(n,e,r,t,i,s):Ro(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Gh(n,e,t,r,i,s){yv(t,r,n.firstChild,e,i,s,!1)}function VL(n,e,t){let r=e[yt],i=mS(n,t,e),s=t.parent||e[on],o=wS(s,t,e);ES(r,0,e,t,i,o)}function ES(n,e,t,r,i,s){let o=t[Cn],c=o[on].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Ro(e,n,i,d,s)}else{let l=c,d=o[Kt];WT(r)&&(l.flags|=128),yv(n,e,l,d,i,s,!0)}}function LL(n,e,t,r,i){let s=t[ws],o=ar(t);s!==o&&Ro(e,n,r,s,i);for(let a=Dn;a<t.length;a++){let c=t[a];Gh(c[Ee],c,n,e,r,s)}}function jL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Nr.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Nr.Important),n.setStyle(t,r,i,s))}}function UL(n,e,t){n.setAttribute(e,"style",t)}function IS(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function bS(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Km(n,e,r),i!==null&&IS(n,e,i),s!==null&&UL(n,e,s)}var Sn={};function ie(n=1){DS(an(),Ae(),wi()+n,!1)}function DS(n,e,t,r){if(!r)if((e[le]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Xd(e,s,t)}else{let s=n.preOrderHooks;s!==null&&eh(e,s,0,t)}Es(t)}function te(n,e=ve.Default){let t=Ae();if(t===null)return L(n,e);let r=pn();return UT(r,t,Ht(n),e)}function CS(){let n="invalid";throw new Error(n)}function TS(n,e,t,r,i,s){let o=Se(null);try{let a=null;i&fi.SignalBased&&(a=e[r][oi]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&fi.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):cT(e,a,r,s)}finally{Se(o)}}function BL(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Es(~i);else{let s=i,o=t[++r],a=t[++r];mV(o,s);let c=e[s];a(2,c)}}}finally{Es(-1)}}function Wh(n,e,t,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[Pr]=i,f[le]=r|4|128|8|64,(l!==null||n&&n[le]&2048)&&(f[le]|=2048),pT(f),f[Kt]=f[Ko]=n,f[Bn]=t,f[or]=o||n&&n[or],f[yt]=a||n&&n[yt],f[Lo]=c||n&&n[Lo]||null,f[on]=s,f[Fh]=QV(),f[Xc]=d,f[sT]=l,f[Cn]=e.type==2?n[Cn]:f,f}function cu(n,e,t,r,i){let s=n.data[e];if(s===null)s=$L(n,e,t,r,i),gV()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=dV();s.injectorIndex=o===null?-1:o.injectorIndex}return ou(s,!0),s}function $L(n,e,t,r,i){let s=_T(),o=ET(),a=o?s:s&&s.parent,c=n.data[e]=WL(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function SS(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function AS(n,e,t,r,i){let s=wi(),o=r&2;try{Es(-1),o&&e.length>sn&&DS(n,e,sn,!1),rr(o?2:0,i),t(r,i)}finally{Es(s),rr(o?3:1,i)}}function xS(n,e,t){if(aT(e)){let r=Se(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Se(r)}}}function MS(n,e,t){vT()&&(XL(n,e,t,$n(t,e)),(t.flags&64)===64&&FS(n,e,t))}function RS(n,e,t=$n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function kS(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=vv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function vv(n,e,t,r,i,s,o,a,c,l,d){let f=sn+r,g=f+i,m=zL(f,g),w=typeof l=="function"?l():l;return m[Ee]={type:n,blueprint:m,template:t,queries:null,viewQuery:a,declTNode:e,data:m.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function zL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Sn);return t}function qL(n,e,t,r){let s=r.get(nL,XT)||t===sr.ShadowDom,o=n.selectRootElement(e,s);return HL(o),o}function HL(n){GL(n)}var GL=()=>null;function WL(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return wT()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function wC(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=fi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?_C(r,t,l,a,c):_C(r,t,l,a)}return r}function _C(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function KL(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,m=g?g.inputs:null,w=g?g.outputs:null;c=wC(0,f.inputs,d,c,m),l=wC(1,f.outputs,d,l,w);let D=c!==null&&o!==null&&!Qy(e)?cj(c,d,o):null;a.push(D)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function QL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function NS(n,e,t,r,i,s,o,a){let c=$n(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(wv(n,t,d,r,i),Vh(e)&&YL(t,e.index)):e.type&3?(r=QL(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function YL(n,e){let t=vi(e,n);t[le]&16||(t[le]|=64)}function PS(n,e,t,r){if(vT()){let i=r===null?null:{"":-1},s=tj(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&OS(n,e,t,o,i,a),i&&nj(t,r,i)}t.mergedAttrs=Zc(t.mergedAttrs,t.attrs)}function OS(n,e,t,r,i,s){for(let l=0;l<r.length;l++)iy(gh(t,e),n,r[l].type);ij(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=SS(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Zc(t.mergedAttrs,d.hostAttrs),sj(n,t,e,c,d),rj(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}KL(n,t,s)}function ZL(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;JL(o)!=a&&o.push(a),o.push(t,r,s)}}function JL(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function XL(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Vh(t)&&oj(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||gh(t,e),bs(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=Bo(e,n,a,t);if(bs(l,e),o!==null&&aj(e,a-i,l,c,t,o),gi(c)){let d=vi(t.index,e);d[Bn]=Bo(e,n,a,t)}}}function FS(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=yV();try{Es(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];ty(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ej(c,l)}}finally{Es(-1),ty(o)}}function ej(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function tj(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(WC(e,o.selectors,!1))if(r||(r=[]),gi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Ey(n,e,c)}else r.unshift(o),Ey(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ey(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function nj(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new ee(-301,!1);r.push(e[i],s)}}}function rj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;gi(e)&&(t[""]=n)}}function ij(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function sj(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=vs(i.type,!0)),o=new Is(s,gi(i),te);n.blueprint[r]=o,t[r]=o,ZL(n,e,r,SS(n,t,i.hostVars,Sn),i)}function oj(n,e,t){let r=$n(e,n),i=kS(t),s=n[or].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Kh(n,Wh(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function aj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];TS(r,t,c,l,d,f)}}function cj(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function VS(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function LS(n,e){let t=n.contentQueries;if(t!==null){let r=Se(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];CT(s),a.contentQueries(2,e[o],o)}}}finally{Se(r)}}}function Kh(n,e){return n[eu]?n[nC][jn]=e:n[eu]=e,n[nC]=e,e}function Iy(n,e,t){CT(0);let r=Se(null);try{e(n,t)}finally{Se(r)}}function uj(n){return n[ah]??=[]}function lj(n){return n.cleanup??=[]}function jS(n,e){let t=n[Lo],r=t?t.get(Rr,null):null;r&&r.handleError(e)}function wv(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];TS(d,l,r,a,c,i)}}function US(n,e,t){let r=hT(e,n);CL(n[yt],r,t)}function dj(n,e){let t=vi(e,n),r=t[Ee];hj(r,t);let i=t[Pr];i!==null&&t[Xc]===null&&(t[Xc]=fv(i,t[Lo])),_v(r,t,t[Bn])}function hj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function _v(n,e,t){nv(e);try{let r=n.viewQuery;r!==null&&Iy(1,r,t);let i=n.template;i!==null&&AS(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Uo]?.finishViewCreation(n),n.staticContentQueries&&LS(n,e),n.staticViewQueries&&Iy(2,n.viewQuery,t);let s=n.components;s!==null&&fj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[le]&=-5,rv()}}function fj(n,e){for(let t=0;t<e.length;t++)dj(n,e[t])}function BS(n,e,t,r){let i=Se(null);try{let s=e.tView,a=n[le]&4096?4096:16,c=Wh(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[jo]=l;let d=n[Uo];return d!==null&&(c[Uo]=d.createEmbeddedView(s)),_v(s,c,t),c}finally{Se(i)}}function by(n,e){return!e||e.firstChild===null||WT(n)}function $S(n,e,t,r=!0){let i=e[Ee];if(xL(i,e,n,t),r){let o=_y(t,n),a=e[yt],c=vS(a,n[ws]);c!==null&&SL(i,n[on],a,e,c,o)}let s=e[Xc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function _h(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(ar(s)),Or(s)&&pj(s,r);let o=t.type;if(o&8)_h(n,e,t.child,r);else if(o&32){let a=pv(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=_S(e,t);if(Array.isArray(a))r.push(...a);else{let c=_s(e[Cn]);_h(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function pj(n,e){for(let t=Dn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&_h(r[Ee],r,i,e)}n[ws]!==n[Pr]&&e.push(n[ws])}var zS=[];function gj(n){return n[bn]??mj(n)}function mj(n){let e=zS.pop()??Object.create(vj);return e.lView=n,e}function yj(n){n.lView[bn]!==n&&(n.lView=null,zS.push(n))}var vj=Z(M({},Fc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{jh(n.lView)},consumerOnSignalRead(){this.lView[bn]=this}});function wj(n){let e=n[bn]??Object.create(_j);return e.lView=n,e}var _j=Z(M({},Fc),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=_s(n.lView);for(;e&&!qS(e[Ee]);)e=_s(e);e&&gT(e)},consumerOnSignalRead(){this.lView[bn]=this}});function qS(n){return n.type!==2}var Ej=100;function HS(n,e=!0,t=0){let r=n[or],i=r.rendererFactory,s=!1;s||i.begin?.();try{Ij(n,t)}catch(o){throw e&&jS(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Ij(n,e){let t=bT();try{iC(!0),Dy(n,e);let r=0;for(;Lh(n);){if(r===Ej)throw new ee(103,!1);r++,Dy(n,1)}}finally{iC(t)}}function bj(n,e,t,r){let i=e[le];if((i&256)===256)return;let s=!1,o=!1;!s&&e[or].inlineEffectRunner?.flush(),nv(e);let a=!0,c=null,l=null;s||(qS(n)?(l=gj(e),c=gd(l)):fD()===null?(a=!1,l=wj(e),c=gd(l)):e[bn]&&(hm(e[bn]),e[bn]=null));try{pT(e),pV(n.bindingStartIndex),t!==null&&AS(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let m=n.preOrderCheckHooks;m!==null&&Xd(e,m,null)}else{let m=n.preOrderHooks;m!==null&&eh(e,m,0,null),Pm(e,0)}if(o||Dj(e),GS(e,0),n.contentQueries!==null&&LS(n,e),!s)if(d){let m=n.contentCheckHooks;m!==null&&Xd(e,m)}else{let m=n.contentHooks;m!==null&&eh(e,m,1),Pm(e,1)}BL(n,e);let f=n.components;f!==null&&KS(e,f,0);let g=n.viewQuery;if(g!==null&&Iy(2,g,r),!s)if(d){let m=n.viewCheckHooks;m!==null&&Xd(e,m)}else{let m=n.viewHooks;m!==null&&eh(e,m,2),Pm(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Nm]){for(let m of e[Nm])m();e[Nm]=null}s||(e[le]&=-73)}catch(d){throw s||jh(e),d}finally{l!==null&&(lm(l,c),a&&yj(l)),rv()}}function GS(n,e){for(let t=QT(n);t!==null;t=YT(t))for(let r=Dn;r<t.length;r++){let i=t[r];WS(i,e)}}function Dj(n){for(let e=QT(n);e!==null;e=YT(e)){if(!(e[le]&lh.HasTransplantedViews))continue;let t=e[uh];for(let r=0;r<t.length;r++){let i=t[r];gT(i)}}}function Cj(n,e,t){let r=vi(e,n);WS(r,t)}function WS(n,e){ev(n)&&Dy(n,e)}function Dy(n,e){let r=n[Ee],i=n[le],s=n[bn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&dm(s)),o||=!1,s&&(s.dirty=!1),n[le]&=-9217,o)bj(r,n,r.template,n[Bn]);else if(i&8192){GS(n,1);let a=r.components;a!==null&&KS(n,a,1)}}function KS(n,e,t){for(let r=0;r<e.length;r++)Cj(n,e[r],t)}function Ev(n,e){let t=bT()?64:1088;for(n[or].changeDetectionScheduler?.notify(e);n;){n[le]|=t;let r=_s(n);if(Jm(n)&&!r)return n;n=r}return null}var Ds=class{get rootNodes(){let e=this._lView,t=e[Ee];return _h(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bn]}set context(e){this._lView[Bn]=e}get destroyed(){return(this._lView[le]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Kt];if(Or(e)){let t=e[ch],r=t?t.indexOf(this):-1;r>-1&&(wy(e,r),ih(t,r))}this._attachedToViewContainer=!1}gS(this._lView[Ee],this._lView)}onDestroy(e){mT(this._lView,e)}markForCheck(){Ev(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){ey(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,HS(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Jm(this._lView),t=this._lView[jo];t!==null&&!e&&gv(t,this._lView),fS(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ee(902,!1);this._appRef=e;let t=Jm(this._lView),r=this._lView[jo];r!==null&&!t&&pS(r,this._lView),ey(this._lView)}},Qh=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Aj;let n=e;return n})(),Tj=Qh,Sj=class extends Tj{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=BS(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ds(i)}};function Aj(){return QS(pn(),Ae())}function QS(n,e){return n.type&4?new Sj(e,n,$h(n,e)):null}var _Q=new RegExp(`^(\\d+)*(${eL}|${XV})*(.*)`);var xj=()=>null;function Cy(n,e){return xj(n,e)}var $o=class{},YS=new H("",{providedIn:"root",factory:()=>!1});var ZS=new H(""),JS=new H(""),Ty=class{},Eh=class{};function Mj(n){let e=Error(`No component factory found for ${Gt(n)}.`);return e[Rj]=n,e}var Rj="ngComponent";var Sy=class{resolveComponentFactory(e){throw Mj(e)}},Lv=class Lv{};Lv.NULL=new Sy;var zo=Lv,qo=class{},uu=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>kj();let n=e;return n})();function kj(){let n=Ae(),e=pn(),t=vi(e.index,n);return(hi(t)?t:n)[yt]}var Nj=(()=>{let e=class e{};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>null});let n=e;return n})();function Ay(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=qm(i,a);else if(s==2){let c=a,l=e[++o];r=qm(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ih=class extends zo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=pi(e);return new Ho(t,this.ngModule)}};function EC(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:fi.None;e?t.push({propName:o,templateName:r,isSignal:(a&fi.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function Pj(n){let e=n.toLowerCase();return e==="svg"?tV:e==="math"?nV:null}var Ho=class extends Eh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=EC(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return EC(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=NF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Se(null);try{i=i||this.ngModule;let o=i instanceof Wt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new ny(e,o):e,c=a.get(qo,null);if(c===null)throw new ee(407,!1);let l=a.get(Nj,null),d=a.get($o,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),m=this.componentDef.selectors[0][0]||"div",w=r?qL(g,r,this.componentDef.encapsulation,a):hS(g,m,Pj(m)),D=512;this.componentDef.signals?D|=4096:this.componentDef.onPush||(D|=16);let C=null;w!==null&&(C=fv(w,a,!0));let P=vv(0,null,null,1,0,null,null,null,null,null,null),O=Wh(null,P,null,D,null,null,f,g,a,null,C);nv(O);let F,U,Q=null;try{let z=this.componentDef,I,v=null;z.findHostDirectiveDefs?(I=[],v=new Map,z.findHostDirectiveDefs(z,I,v),I.push(z)):I=[z];let _=Oj(O,w);Q=Fj(_,w,z,I,O,f,g),U=fT(P,sn),w&&jj(g,z,w,r),t!==void 0&&Uj(U,this.ngContentSelectors,t),F=Lj(Q,z,I,v,O,[Bj]),_v(P,O,null)}catch(z){throw Q!==null&&uy(Q),uy(O),z}finally{rv()}return new xy(this.componentType,F,$h(U,O),O,U)}finally{Se(s)}}},xy=class extends Ty{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ds(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;wv(s[Ee],s,i,e,t),this.previousInputValues.set(e,t);let o=vi(this._tNode.index,s);Ev(o,1)}}get injector(){return new ys(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Oj(n,e){let t=n[Ee],r=sn;return n[r]=e,cu(t,r,2,"#host",null)}function Fj(n,e,t,r,i,s,o){let a=i[Ee];Vj(r,n,e,o);let c=null;e!==null&&(c=fv(e,i[Lo]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Wh(i,kS(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Ey(a,n,r.length-1),Kh(i,f),i[n.index]=f}function Vj(n,e,t,r){for(let i of n)e.mergedAttrs=Zc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Ay(e,e.mergedAttrs,!0),t!==null&&bS(r,t,e))}function Lj(n,e,t,r,i,s){let o=pn(),a=i[Ee],c=$n(o,i);OS(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=Bo(i,a,f,o);bs(g,i)}FS(a,i,o),c&&bs(c,i);let l=Bo(i,a,o.directiveStart+o.componentOffset,o);if(n[Bn]=i[Bn]=l,s!==null)for(let d of s)d(l,e);return xS(a,o,i),l}function jj(n,e,t,r){if(r)Km(n,t,["ng-version","18.2.5"]);else{let{attrs:i,classes:s}=PF(e.selectors[0]);i&&Km(n,t,i),s&&s.length>0&&IS(n,t,s.join(" "))}}function Uj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function Bj(){let n=pn();ov(Ae()[Ee],n)}var lr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=$j;let n=e;return n})();function $j(){let n=pn();return qj(n,Ae())}var zj=lr,XS=class extends zj{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return $h(this._hostTNode,this._hostLView)}get injector(){return new ys(this._hostTNode,this._hostLView)}get parentInjector(){let e=av(this._hostTNode,this._hostLView);if(PT(e)){let t=fh(e,this._hostLView),r=hh(e),i=t[Ee].data[r+8];return new ys(i,t)}else return new ys(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=IC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Dn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Cy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,by(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!ZF(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new Ho(pi(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let D=(o?l:this.parentInjector).get(Wt,null);D&&(s=D)}let d=pi(c.componentType??{}),f=Cy(this._lContainer,d?.id??null),g=f?.firstChild??null,m=c.create(l,i,g,s);return this.insertImpl(m.hostView,a,by(this._hostTNode,f)),m}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(rV(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Kt],l=new XS(c,c[on],c[Kt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return $S(o,i,s,r),e.attachToViewContainerRef(),$C(jm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=IC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=wy(this._lContainer,t);r&&(ih(jm(this._lContainer),t),gS(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=wy(this._lContainer,t);return r&&ih(jm(this._lContainer),t)!=null?new Ds(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function IC(n){return n[ch]}function jm(n){return n[ch]||(n[ch]=[])}function qj(n,e){let t,r=e[n.index];return Or(r)?t=r:(t=VS(r,e,null,n),e[n.index]=t,Kh(e,t)),Gj(t,e,n,r),new XS(t,n,e)}function Hj(n,e){let t=n[yt],r=t.createComment(""),i=$n(e,n),s=vS(t,i);return wh(t,s,r,NL(t,i),!1),r}var Gj=Qj,Wj=()=>!1;function Kj(n,e,t){return Wj(n,e,t)}function Qj(n,e,t,r){if(n[ws])return;let i;t.type&8?i=ar(r):i=Hj(e,t),n[ws]=i}var bC=new Set;function Zo(n){bC.has(n)||(bC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function lu(n,e){Zo("NgSignals");let t=DD(n),r=t[oi];return e?.equal&&(r.equal=e.equal),t.set=i=>fm(r,i),t.update=i=>CD(r,i),t.asReadonly=Yj.bind(t),t}function Yj(){let n=this[oi];if(n.readonlyFn===void 0){let e=()=>this();e[oi]=n,n.readonlyFn=e}return n.readonlyFn}function Zj(n){let e=[],t=new Map;function r(i){let s=t.get(i);if(!s){let o=n(i);t.set(i,s=o.then(t2))}return s}return bh.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,d=i.styleUrls;i.styleUrls.forEach((f,g)=>{a.push(""),o.push(r(f).then(m=>{a[l+g]=m,d.splice(d.indexOf(f),1),d.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>n2(s));e.push(c)}),Xj(),Promise.all(e).then(()=>{})}var bh=new Map,Jj=new Set;function Xj(){let n=bh;return bh=new Map,n}function e2(){return bh.size===0}function t2(n){return typeof n=="string"?n:n.text()}function n2(n){Jj.delete(n)}function r2(n){return Object.getPrototypeOf(n.prototype).constructor}function Ii(n){let e=r2(n.type),t=!0,r=[n];for(;e;){let i;if(gi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ee(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Kd(n.inputs),o.inputTransforms=Kd(n.inputTransforms),o.declaredInputs=Kd(n.declaredInputs),o.outputs=Kd(n.outputs);let a=i.hostBindings;a&&c2(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&o2(n,c),l&&a2(n,l),i2(n,i),XO(n.outputs,i.outputs),gi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ii&&(t=!1)}}e=Object.getPrototypeOf(e)}s2(r)}function i2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function s2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Zc(i.hostAttrs,t=Zc(t,i.hostAttrs))}}function Kd(n){return n===Oo?{}:n===rn?[]:n}function o2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function a2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function c2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var mi=class{},tu=class{};var Dh=class extends mi{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ih(this);let s=ZC(e);this._bootstrapComponents=dS(s.bootstrap),this._r3Injector=zT(e,t,[{provide:mi,useValue:this},{provide:zo,useValue:this.componentFactoryResolver},...r],Gt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ch=class extends tu{constructor(e){super(),this.moduleType=e}create(e){return new Dh(this.moduleType,e,[])}};function u2(n,e,t){return new Dh(n,e,t,!1)}var My=class extends mi{constructor(e){super(),this.componentFactoryResolver=new Ih(this),this.instance=null;let t=new Jc([...e.providers,{provide:mi,useValue:this},{provide:zo,useValue:this.componentFactoryResolver}],e.parent||Zy(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Yh(n,e,t=null){return new My({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function eA(n){return Iv(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function l2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Iv(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function bv(n,e,t){return n[e]=t}function yi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Dv(n,e,t,r){let i=yi(n,e,t);return yi(n,e+1,r)||i}function d2(n,e,t,r,i){let s=Dv(n,e,t,r);return yi(n,e+2,i)||s}function h2(n){return(n.flags&32)===32}function f2(n,e,t,r,i,s,o,a,c){let l=e.consts,d=cu(e,n,4,o||null,a||null);PS(e,t,d,dh(l,c)),ov(e,d);let f=d.tView=vv(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function tA(n,e,t,r,i,s,o,a,c,l){let d=t+sn,f=e.firstCreatePass?f2(d,e,n,r,i,s,o,a,c):e.data[d];ou(f,!1);let g=p2(e,n,f,t);iv()&&mv(e,n,g,f),bs(g,n);let m=VS(g,n,g,f);return n[d]=m,Kh(n,m),Kj(m,f,n),Jy(f)&&MS(e,n,f),c!=null&&RS(n,f,l),f}function vt(n,e,t,r,i,s,o,a){let c=Ae(),l=an(),d=dh(l.consts,s);return tA(c,l,n,e,t,r,i,d,o,a),vt}var p2=g2;function g2(n,e,t,r){return sv(!0),e[yt].createComment("")}var ko=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ko||{}),nA=(()=>{let e=class e{constructor(){this.impl=null}execute(){this.impl?.execute()}};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>new e});let n=e;return n})(),ms=class ms{constructor(){this.ngZone=B(_e),this.scheduler=B($o),this.errorHandler=B(Rr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}execute(){this.executing=!0;for(let e of ms.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&this.sequences.delete(e);for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}};ms.PHASES=[ko.EarlyRead,ko.Write,ko.MixedReadWrite,ko.Read],ms.\u0275prov=$({token:ms,providedIn:"root",factory:()=>new ms});var Ry=ms,ky=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy()}};function Cv(n,e){!e?.injector&&QF(Cv);let t=e?.injector??B(fn);return IL(t)?(Zo("NgAfterNextRender"),y2(n,t,e,!0)):v2}function m2(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function y2(n,e,t,r){let i=e.get(nA);i.impl??=e.get(Ry);let s=t?.phase??ko.MixedReadWrite,o=new ky(i.impl,m2(n,s),r,e.get(cv));return i.impl.register(o),o}var v2={destroy(){}};function Tv(n,e,t,r){return yi(n,DT(),t)?e+Qc(t)+r:Sn}function w2(n,e,t,r,i,s){let o=fV(),a=Dv(n,o,t,i);return tv(2),a?e+Qc(t)+r+Qc(i)+s:Sn}function Qd(n,e){return n<<17|e<<2}function Cs(n){return n>>17&32767}function _2(n){return(n&2)==2}function E2(n,e){return n&131071|e<<17}function Ny(n){return n|2}function Go(n){return(n&131068)>>2}function Um(n,e){return n&-131069|e<<2}function I2(n){return(n&1)===1}function Py(n){return n|1}function b2(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Cs(o),c=Go(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||iu(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=Cs(n[a+1]);n[r+1]=Qd(g,a),g!==0&&(n[g+1]=Um(n[g+1],r)),n[a+1]=E2(n[a+1],r)}else n[r+1]=Qd(a,0),a!==0&&(n[a+1]=Um(n[a+1],r)),a=r;else n[r+1]=Qd(c,0),a===0?a=r:n[c+1]=Um(n[c+1],r),c=r;l&&(n[r+1]=Ny(n[r+1])),DC(n,d,r,!0),DC(n,d,r,!1),D2(e,d,n,r,s),o=Qd(a,c),s?e.classBindings=o:e.styleBindings=o}function D2(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&iu(s,e)>=0&&(t[r+1]=Py(t[r+1]))}function DC(n,e,t,r){let i=n[t+1],s=e===null,o=r?Cs(i):Go(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];C2(c,e)&&(a=!0,n[o+1]=r?Py(l):Ny(l)),o=r?Cs(l):Go(l)}a&&(n[t+1]=r?Ny(i):Py(i))}function C2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?iu(n,e)>=0:!1}var Ln={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function T2(n){return n.substring(Ln.key,Ln.keyEnd)}function S2(n){return A2(n),rA(n,iA(n,0,Ln.textEnd))}function rA(n,e){let t=Ln.textEnd;return t===e?-1:(e=Ln.keyEnd=x2(n,Ln.key=e,t),iA(n,e,t))}function A2(n){Ln.key=0,Ln.keyEnd=0,Ln.value=0,Ln.valueEnd=0,Ln.textEnd=n.length}function iA(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function x2(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function pe(n,e,t){let r=Ae(),i=DT();if(yi(r,i,e)){let s=an(),o=RT();NS(s,o,r,n,e,r[yt],t,!1)}return pe}function Oy(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";wv(n,t,s[o],o,r)}function Jo(n,e,t){return sA(n,e,t,!1),Jo}function du(n,e){return sA(n,e,null,!0),du}function M2(n,e){for(let t=S2(e);t>=0;t=rA(e,t))Ky(n,T2(e),!0)}function sA(n,e,t,r){let i=Ae(),s=an(),o=tv(2);if(s.firstUpdatePass&&aA(s,n,o,r),e!==Sn&&yi(i,o,e)){let a=s.data[wi()];cA(s,a,i,i[yt],n,i[o+1]=L2(e,t),r,o)}}function R2(n,e,t,r){let i=an(),s=tv(2);i.firstUpdatePass&&aA(i,null,s,r);let o=Ae();if(t!==Sn&&yi(o,s,t)){let a=i.data[wi()];if(uA(a,r)&&!oA(i,s)){let c=r?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(t=qm(c,t||"")),Oy(i,a,o,t,r)}else V2(i,a,o,o[yt],o[s+1],o[s+1]=F2(n,e,t),r,s)}}function oA(n,e){return e>=n.expandoStartIndex}function aA(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[wi()],o=oA(n,t);uA(s,r)&&e===null&&!o&&(e=!1),e=k2(i,s,e,r),b2(i,s,e,t,o,r)}}function k2(n,e,t,r){let i=vV(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Bm(null,n,e,t,r),t=nu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Bm(i,n,e,t,r),s===null){let c=N2(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Bm(null,n,e,c[1],r),c=nu(c,e.attrs,r),P2(n,e,r,c))}else s=O2(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function N2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Go(r)!==0)return n[Cs(r)]}function P2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Cs(i)]=r}function O2(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=nu(r,o,t)}return nu(r,e.attrs,t)}function Bm(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=nu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function nu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),Ky(n,o,t?!0:e[++s]))}return n===void 0?null:n}function F2(n,e,t){if(t==null||t==="")return rn;let r=[],i=ur(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function V2(n,e,t,r,i,s,o,a){i===Sn&&(i=rn);let c=0,l=0,d=0<i.length?i[0]:null,f=0<s.length?s[0]:null;for(;d!==null||f!==null;){let g=c<i.length?i[c+1]:void 0,m=l<s.length?s[l+1]:void 0,w=null,D;d===f?(c+=2,l+=2,g!==m&&(w=f,D=m)):f===null||d!==null&&d<f?(c+=2,w=d):(l+=2,w=f,D=m),w!==null&&cA(n,e,t,r,w,D,o,a),d=c<i.length?i[c]:null,f=l<s.length?s[l]:null}}function cA(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=I2(l)?CC(c,e,t,i,Go(l),o):void 0;if(!Th(d)){Th(s)||_2(l)&&(s=CC(c,null,t,i,a,o));let f=hT(wi(),t);jL(r,o,f,i,s)}}function CC(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Sn&&(g=f?rn:void 0);let m=f?Rm(g,r):d===r?g:void 0;if(l&&!Th(m)&&(m=Rm(c,r)),Th(m)&&(a=m,o))return a;let w=n[i+1];i=o?Cs(w):Go(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Rm(c,r))}return a}function Th(n){return n!==void 0}function L2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Gt(ur(n)))),n}function uA(n,e){return(n.flags&(e?8:16))!==0}function Zh(n,e,t){let r=Ae(),i=Tv(r,n,e,t);R2(Ky,M2,i,!0)}function j2(n,e,t,r,i,s){let o=e.consts,a=dh(o,i),c=cu(e,n,2,r,a);return PS(e,t,c,dh(o,s)),c.attrs!==null&&Ay(c,c.attrs,!1),c.mergedAttrs!==null&&Ay(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function K(n,e,t,r){let i=Ae(),s=an(),o=sn+n,a=i[yt],c=s.firstCreatePass?j2(o,s,i,e,t,r):s.data[o],l=U2(s,i,c,a,e,n);i[o]=l;let d=Jy(c);return ou(c,!0),bS(a,l,c),!h2(c)&&iv()&&mv(s,i,l,c),oV()===0&&bs(l,i),aV(),d&&(MS(s,i,c),xS(s,c,i)),r!==null&&RS(i,c),K}function J(){let n=pn();ET()?IT():(n=n.parent,ou(n,!1));let e=n;uV(e)&&lV(),cV();let t=an();return t.firstCreatePass&&(ov(t,n),aT(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&CV(e)&&Oy(t,e,Ae(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&TV(e)&&Oy(t,e,Ae(),e.stylesWithoutHost,!1),J}function Fe(n,e,t,r){return K(n,e,t,r),J(),Fe}var U2=(n,e,t,r,i,s)=>(sv(!0),hS(r,i,EV()));function Jh(){return Ae()}var Sh="en-US";var B2=Sh;function $2(n){typeof n=="string"&&(B2=n.toLowerCase().replace(/_/g,"-"))}var z2=(n,e,t)=>{};function Ft(n,e,t,r){let i=Ae(),s=an(),o=pn();return H2(s,i,i[yt],o,n,e,r),Ft}function q2(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[ah],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function H2(n,e,t,r,i,s,o){let a=Jy(r),l=n.firstCreatePass&&lj(n),d=e[Bn],f=uj(e),g=!0;if(r.type&3||o){let D=$n(r,e),C=o?o(D):D,P=f.length,O=o?U=>o(ar(U[r.index])):r.index,F=null;if(!o&&a&&(F=q2(n,e,i,r.index)),F!==null){let U=F.__ngLastListenerFn__||F;U.__ngNextListenerFn__=s,F.__ngLastListenerFn__=s,g=!1}else{s=SC(r,e,d,s),z2(D,i,s);let U=t.listen(C,i,s);f.push(s,U),l&&l.push(i,O,P,P+1)}}else s=SC(r,e,d,s);let m=r.outputs,w;if(g&&m!==null&&(w=m[i])){let D=w.length;if(D)for(let C=0;C<D;C+=2){let P=w[C],O=w[C+1],Q=e[P][O].subscribe(s),z=f.length;f.push(s,Q),l&&l.push(i,r.index,z,-(z+1))}}}function TC(n,e,t,r){let i=Se(null);try{return rr(6,e,t),t(r)!==!1}catch(s){return jS(n,s),!1}finally{rr(7,e,t),Se(i)}}function SC(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?vi(n.index,e):e;Ev(o,5);let a=TC(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=TC(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function nt(n=1){return _V(n)}function G2(n,e){let t=null,r=AF(n);for(let i=0;i<e.length;i++){let s=e[i];if(s==="*"){t=i;continue}if(r===null?WC(n,s,!0):RF(r,s))return i}return t}function lA(n){let e=Ae()[Cn][on];if(!e.projection){let t=n?n.length:1,r=e.projection=vF(t,null),i=r.slice(),s=e.child;for(;s!==null;){if(s.type!==128){let o=n?G2(s,n):0;o!==null&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s)}s=s.next}}}function dA(n,e=0,t,r,i,s){let o=Ae(),a=an(),c=r?n+1:null;c!==null&&tA(o,a,c,r,i,s,null,t);let l=cu(a,sn+n,16,null,t||null);l.projection===null&&(l.projection=e),IT();let f=!o[Xc]||wT();o[Cn][on].projection[l.projection]===null&&c!==null?W2(o,a,c):f&&(l.flags&32)!==32&&VL(a,o,l)}function W2(n,e,t){let r=sn+t,i=e.data[r],s=n[r],o=Cy(s,i.tView.ssrId),a=BS(n,i,void 0,{dehydratedView:o});$S(s,a,0,by(i,o))}function As(n,e,t){return hA(n,"",e,"",t),As}function hA(n,e,t,r,i){let s=Ae(),o=Tv(s,e,t,r);if(o!==Sn){let a=an(),c=RT();NS(a,c,s,n,o,s[yt],i,!1)}return hA}function K2(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Xh(n){let e=hV();return Xy(e,sn+n)}function ne(n,e=""){let t=Ae(),r=an(),i=n+sn,s=r.firstCreatePass?cu(r,i,1,e,null):r.data[i],o=Q2(r,t,s,e,n);t[i]=o,iv()&&mv(r,t,o,s),ou(s,!1)}var Q2=(n,e,t,r,i)=>(sv(!0),DL(e[yt],r));function wt(n){return An("",n,""),wt}function An(n,e,t){let r=Ae(),i=Tv(r,n,e,t);return i!==Sn&&US(r,wi(),i),An}function Sv(n,e,t,r,i){let s=Ae(),o=w2(s,n,e,t,r,i);return o!==Sn&&US(s,wi(),o),Sv}function Y2(n,e,t){let r=an();if(r.firstCreatePass){let i=gi(n);Fy(t,r.data,r.blueprint,i,!0),Fy(e,r.data,r.blueprint,i,!1)}}function Fy(n,e,t,r,i){if(n=Ht(n),Array.isArray(n))for(let s=0;s<n.length;s++)Fy(n[s],e,t,r,i);else{let s=an(),o=Ae(),a=pn(),c=Vo(n)?n:Ht(n.provide),l=rT(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Vo(n)||!n.multi){let m=new Is(l,i,te),w=zm(c,e,i?d:d+g,f);w===-1?(iy(gh(a,o),s,c),$m(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(m),o.push(m)):(t[w]=m,o[w]=m)}else{let m=zm(c,e,d+g,f),w=zm(c,e,d,d+g),D=m>=0&&t[m],C=w>=0&&t[w];if(i&&!C||!i&&!D){iy(gh(a,o),s,c);let P=X2(i?J2:Z2,t.length,i,r,l);!i&&C&&(t[w].providerFactory=P),$m(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else{let P=fA(t[i?w:m],l,!i&&r);$m(s,n,m>-1?m:w,P)}!i&&r&&C&&t[w].componentProviders++}}}function $m(n,e,t,r){let i=Vo(e),s=$F(e);if(i||s){let c=(s?Ht(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function fA(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function zm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function Z2(n,e,t,r){return Vy(this.multi,[])}function J2(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Bo(t,t[Ee],this.providerFactory.index,r);s=a.slice(0,o),Vy(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Vy(i,s);return s}function Vy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function X2(n,e,t,r,i){let s=new Is(n,t,te);return s.multi=[],s.index=e,s.componentProviders=0,fA(s,i,r&&!t),s}function pA(n,e=[]){return t=>{t.providersResolver=(r,i)=>Y2(r,i?i(n):n,e)}}var eU=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=eT(!1,r.type),s=i.length>0?Yh([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=$({token:e,providedIn:"environment",factory:()=>new e(L(Wt))});let n=e;return n})();function hu(n){Zo("NgStandalone"),n.getStandaloneInjector=e=>e.get(eU).getOrCreateStandaloneInjector(n)}function gA(n,e,t){let r=n.\u0275cmp;r.directiveDefs=oh(e,!1),r.pipeDefs=oh(t,!0)}function mA(n,e,t,r){return vA(Ae(),Uh(),n,e,t,r)}function yA(n,e,t,r,i){return tU(Ae(),Uh(),n,e,t,r,i)}function Av(n,e){let t=n[e];return t===Sn?void 0:t}function vA(n,e,t,r,i,s){let o=e+t;return yi(n,o,i)?bv(n,o+1,s?r.call(s,i):r(i)):Av(n,o+1)}function tU(n,e,t,r,i,s,o){let a=e+t;return Dv(n,a,i,s)?bv(n,a+2,o?r.call(o,i,s):r(i,s)):Av(n,a+2)}function nU(n,e,t,r,i,s,o,a){let c=e+t;return d2(n,c,i,s,o)?bv(n,c+3,a?r.call(a,i,s,o):r(i,s,o)):Av(n,c+3)}function Yt(n,e){let t=an(),r,i=n+sn;t.firstCreatePass?(r=rU(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=vs(r.type,!0)),o,a=nn(te);try{let c=ph(!1),l=s();return ph(c),K2(t,Ae(),i,l),l}finally{nn(a)}}function rU(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function zn(n,e,t){let r=n+sn,i=Ae(),s=Xy(i,r);return wA(i,r)?vA(i,Uh(),e,s.transform,t,s):s.transform(t)}function Xo(n,e,t,r,i){let s=n+sn,o=Ae(),a=Xy(o,s);return wA(o,s)?nU(o,Uh(),e,a.transform,t,r,i,a):a.transform(t,r,i)}function wA(n,e){return n[Ee].data[e].pure}function ef(n,e){return QS(n,e)}var Yd=null;function iU(n){Yd!==null&&(n.defaultEncapsulation!==Yd.defaultEncapsulation||n.preserveWhitespaces!==Yd.preserveWhitespaces)||(Yd=n)}var tf=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();var xv=new H(""),fu=new H(""),nf=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Mv||(sU(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(L(_e),L(rf),L(fu))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),rf=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Mv?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})();function sU(n){Mv=n}var Mv;function bi(n){return!!n&&typeof n.then=="function"}function Rv(n){return!!n&&typeof n.subscribe=="function"}var sf=new H(""),_A=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=B(sf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(bi(o))r.push(o);else if(Rv(o)){let a=new Promise((c,l)=>{o.subscribe({complete:c,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),of=new H("");function oU(){bD(()=>{throw new ee(600,!1)})}function aU(n){return n.isBoundToModule}var cU=10;function uU(n,e,t){try{let r=t();return bi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function EA(n,e){return Array.isArray(e)?e.reduce(EA,n):M(M({},n),e)}var Vr=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(GV),this.afterRenderManager=B(nA),this.zonelessEnabled=B(YS),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ke,this.afterTick=new ke,this.componentTypes=[],this.components=[],this.isStable=B(_i).hasPendingTasks.pipe(se(r=>!r)),this._injector=B(Wt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let r;return new Promise(i=>{r=this.isStable.subscribe({next:s=>{s&&i()}})}).finally(()=>{r.unsubscribe()})}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Eh;if(!this._injector.get(_A).done){let m=!s&&YC(r),w=!1;throw new ee(405,w)}let a;s?a=r:a=this._injector.get(zo).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=aU(a)?void 0:this._injector.get(mi),l=i||a.selector,d=a.create(fn.NULL,[],l,c),f=d.location.nativeElement,g=d.injector.get(xv,null);return g?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),th(this.components,d),g?.unregisterApplication(f)}),this._loadComponent(d),d}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ee(101,!1);let r=Se(null);try{this._runningTick=!0,this.synchronize()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1,Se(r),this.afterTick.next()}}synchronize(){let r=null;this._injector.destroyed||(r=this._injector.get(qo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let i=0;for(;this.dirtyFlags!==0&&i++<cU;)this.synchronizeOnce(r)}synchronizeOnce(r){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(i);for(let{_lView:s,notifyErrorHandler:o}of this._views)lU(s,o,i,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else r?.begin?.(),r?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:r})=>Lh(r))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;th(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(of,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>th(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new ee(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function th(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function lU(n,e,t,r){if(!t&&!Lh(n))return;HS(n,e,t&&!r?0:1)}var Ly=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},af=(()=>{let e=class e{compileModuleSync(r){return new Ch(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=ZC(r),o=dS(s.declarations).reduce((a,c)=>{let l=pi(c);return l&&a.push(new Ho(l)),a},[]);return new Ly(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),dU=new H("");function hU(n,e,t){let r=new Ch(t);return Promise.resolve(r)}function AC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var fU=(()=>{let e=class e{constructor(){this.zone=B(_e),this.changeDetectionScheduler=B($o),this.applicationRef=B(Vr)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function pU({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new _e(Z(M({},IA()),{scheduleInRootZone:t})),[{provide:_e,useFactory:n},{provide:Fo,multi:!0,useFactory:()=>{let r=B(fU,{optional:!0});return()=>r.initialize()}},{provide:Fo,multi:!0,useFactory:()=>{let r=B(gU);return()=>{r.initialize()}}},e===!0?{provide:ZS,useValue:!0}:[],{provide:JS,useValue:t??qT}]}function IA(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var gU=(()=>{let e=class e{constructor(){this.subscription=new tt,this.initialized=!1,this.zone=B(_e),this.pendingTasks=B(_i)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var mU=(()=>{let e=class e{constructor(){this.appRef=B(Vr),this.taskService=B(_i),this.ngZone=B(_e),this.zonelessEnabled=B(YS),this.disableScheduling=B(ZS,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new tt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(yh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(JS,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof vh||!this.zoneIsDefined)}notify(r){if(!this.zonelessEnabled&&r===5)return;switch(r){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let i=this.useMicrotaskScheduler?uC:HT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(yh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){throw this.taskService.remove(r),i}finally{this.cleanup()}this.useMicrotaskScheduler=!0,uC(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let r=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(r)}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function yU(){return typeof $localize<"u"&&$localize.locale||Sh}var kv=new H("",{providedIn:"root",factory:()=>B(kv,ve.Optional|ve.SkipSelf)||yU()});var Nv=new H("");function Zd(n){return!!n.platformInjector}function vU(n){let e=Zd(n)?n.r3Injector:n.moduleRef.injector,t=e.get(_e);return t.run(()=>{Zd(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Rr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Zd(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Nv);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else n.moduleRef.onDestroy(()=>{th(n.allPlatformModules,n.moduleRef),i.unsubscribe()});return uU(r,t,()=>{let s=e.get(_A);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(kv,Sh);if($2(o||Sh),Zd(n)){let a=e.get(Vr);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return wU(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function wU(n,e){let t=n.injector.get(Vr);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ee(-403,!1);e.push(n)}var bA=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=i?.scheduleInRootZone,o=()=>HV(i?.ngZone,Z(M({},IA({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing})),{scheduleInRootZone:s})),a=i?.ignoreChangesOutsideZone,c=[pU({ngZoneFactory:o,ignoreChangesOutsideZone:a}),{provide:$o,useExisting:mU}],l=u2(r.moduleType,this.injector,c);return vU({moduleRef:l,allPlatformModules:this._modules})}bootstrapModule(r,i=[]){let s=EA({},i);return hU(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ee(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(Nv,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(L(fn))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"platform"});let n=e;return n})(),Kc=null,DA=new H("");function _U(n){if(Kc&&!Kc.get(DA,!1))throw new ee(400,!1);oU(),Kc=n;let e=n.get(bA);return bU(n),e}function Pv(n,e,t=[]){let r=`Platform: ${e}`,i=new H(r);return(s=[])=>{let o=CA();if(!o||o.injector.get(DA,!1)){let a=[...t,...s,{provide:i,useValue:!0}];n?n(a):_U(EU(a,r))}return IU(i)}}function EU(n=[],e){return fn.create({name:e,providers:[{provide:Oh,useValue:"platform"},{provide:Nv,useValue:new Set([()=>Kc=null])},...n]})}function IU(n){let e=CA();if(!e)throw new ee(401,!1);return e}function CA(){return Kc?.get(bA)??null}function bU(n){n.get(dv,null)?.forEach(t=>t())}function Ov(){return!1}var qn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=DU;let n=e;return n})();function DU(n){return CU(pn(),Ae(),(n&16)===16)}function CU(n,e,t){if(Vh(n)&&!t){let r=vi(n.index,e);return new Ds(r,r)}else if(n.type&175){let r=e[Cn];return new Ds(r,e)}return null}var jy=class{constructor(){}supports(e){return eA(e)}create(e){return new Uy(e)}},TU=(n,e)=>e,Uy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||TU}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<xC(r,i,s)?t:r,a=xC(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let m=g<s.length?s[g]:s[g]=0,w=m+g;d<=w&&w<l&&(s[g]=m+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!eA(e))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,l2(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new By(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Ah),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Ah),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},By=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},$y=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Ah=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new $y,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function xC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}var zy=class{constructor(){}supports(e){return e instanceof Map||Iv(e)}create(){return new qy}},qy=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Iv(e)))throw new ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let s=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let i=this._records.get(e);this._maybeAddToChanges(i,t);let s=i._prev,o=i._next;return s&&(s._next=o),o&&(o._prev=s),i._next=null,i._prev=null,i}let r=new Hy(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},Hy=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function MC(){return new Fv([new jy])}var Fv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||MC()),deps:[[e,new Nh,new Wo]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new ee(901,!1)}};e.\u0275prov=$({token:e,providedIn:"root",factory:MC});let n=e;return n})();function RC(){return new Vv([new zy])}var Vv=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||RC()),deps:[[e,new Nh,new Wo]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i)return i;throw new ee(901,!1)}};e.\u0275prov=$({token:e,providedIn:"root",factory:RC});let n=e;return n})();var TA=Pv(null,"core",[]),SA=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(L(Vr))},e.\u0275mod=St({type:e}),e.\u0275inj=Tt({});let n=e;return n})();var AA=new H("");function pu(n,e){Zo("NgSignals");let t=_D(n);return e?.equal&&(t[oi].equal=e.equal),t}function Hn(n){let e=Se(null);try{return n()}finally{Se(e)}}function xA(n){let e=pi(n);if(!e)return null;let t=new Ho(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var VA=null;function Di(){return VA}function LA(n){VA??=n}var cf=class{};var _t=new H(""),Wv=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>B(MU),providedIn:"platform"});let n=e;return n})(),jA=new H(""),MU=(()=>{let e=class e extends Wv{constructor(){super(),this._doc=B(_t),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Di().getBaseHref(this._doc)}onPopState(r){let i=Di().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Di().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>new e,providedIn:"platform"});let n=e;return n})();function Kv(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function MA(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Lr(n){return n&&n[0]!=="?"?"?"+n:n}var xs=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>B(Qv),providedIn:"root"});let n=e;return n})(),UA=new H(""),Qv=(()=>{let e=class e extends xs{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??B(_t).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Kv(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Lr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Lr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Lr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Wv),L(UA,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),BA=(()=>{let e=class e extends xs{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Kv(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Lr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Lr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(L(Wv),L(UA,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),ta=(()=>{let e=class e{constructor(r){this._subject=new Ze,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=NU(MA(RA(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Lr(i))}normalize(r){return e.stripTrailingSlash(kU(this._basePath,RA(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Lr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Lr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Lr,e.joinWithSlash=Kv,e.stripTrailingSlash=MA,e.\u0275fac=function(i){return new(i||e)(L(xs))},e.\u0275prov=$({token:e,factory:()=>RU(),providedIn:"root"});let n=e;return n})();function RU(){return new ta(L(xs))}function kU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function RA(n){return n.replace(/\/index.html$/,"")}function NU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function uf(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var jv=/\s+/,kA=[],lf=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=kA,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(jv):kA}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(jv):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(jv).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(te(Ei),te(uu))},e.\u0275dir=cr({type:e,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0});let n=e;return n})();var Uv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},dr=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Uv(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),NA(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);NA(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(te(lr),te(Qh),te(Fv))},e.\u0275dir=cr({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let n=e;return n})();function NA(n,e){n.context.$implicit=e.item}var Ci=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new Bv,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){PA("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){PA("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(te(lr),te(Qh))},e.\u0275dir=cr({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let n=e;return n})(),Bv=class{constructor(){this.$implicit=null,this.ngIf=null}};function PA(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${Gt(e)}'.`)}function $A(n,e){return new ee(2100,!1)}var $v=class{createSubscription(e,t){return Hn(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Hn(()=>e.unsubscribe())}},zv=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},PU=new zv,OU=new $v,zA=(()=>{let e=class e{constructor(r){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=r}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(r){if(!this._obj){if(r)try{this.markForCheckOnValueUpdate=!1,this._subscribe(r)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return r!==this._obj?(this._dispose(),this.transform(r)):this._latestValue}_subscribe(r){this._obj=r,this._strategy=this._selectStrategy(r),this._subscription=this._strategy.createSubscription(r,i=>this._updateLatestValue(r,i))}_selectStrategy(r){if(bi(r))return PU;if(Rv(r))return OU;throw $A(e,r)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(r,i){r===this._obj&&(this._latestValue=i,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}};e.\u0275fac=function(i){return new(i||e)(te(qn,16))},e.\u0275pipe=su({name:"async",type:e,pure:!1,standalone:!0});let n=e;return n})();function FU(n,e){return{key:n,value:e}}var Ti=(()=>{let e=class e{constructor(r){this.differs=r,this.keyValues=[],this.compareFn=OA}transform(r,i=OA){if(!r||!(r instanceof Map)&&typeof r!="object")return null;this.differ??=this.differs.find(r).create();let s=this.differ.diff(r),o=i!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(FU(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(i),this.compareFn=i),this.keyValues}};e.\u0275fac=function(i){return new(i||e)(te(Vv,16))},e.\u0275pipe=su({name:"keyvalue",type:e,pure:!1,standalone:!0});let n=e;return n})();function OA(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let i=String(t),s=String(r);return i==s?0:i<s?-1:1}var na=(()=>{let e=class e{transform(r,i,s){if(r==null)return null;if(!this.supports(r))throw $A(e,r);return r.slice(i,s)}supports(r){return typeof r=="string"||Array.isArray(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275pipe=su({name:"slice",type:e,pure:!1,standalone:!0});let n=e;return n})();var df=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=St({type:e}),e.\u0275inj=Tt({});let n=e;return n})(),Yv="browser",VU="server";function Si(n){return n===Yv}function Ai(n){return n===VU}var qA=(()=>{let e=class e{};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>Si(B(At))?new qv(B(_t),window):new Hv});let n=e;return n})(),qv=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=LU(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function LU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Hv=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ea=class{};var mu=class{},ff=class{},Gn=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Jv=class{encodeKey(e){return HA(e)}encodeValue(e){return HA(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function jU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var UU=/%(\d[a-f0-9])/gi,BU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function HA(n){return encodeURIComponent(n).replace(UU,(e,t)=>BU[t]??e)}function hf(n){return`${n}`}var Mi=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Jv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=jU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(hf):[hf(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(hf(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(hf(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Xv=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function $U(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function GA(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function WA(n){return typeof Blob<"u"&&n instanceof Blob}function KA(n){return typeof FormData<"u"&&n instanceof FormData}function zU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var gu=class n{constructor(e,t,r,i){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if($U(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Gn,this.context??=new Xv,!this.params)this.params=new Mi,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||GA(this.body)||WA(this.body)||KA(this.body)||zU(this.body)?this.body:this.body instanceof Mi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||KA(this.body)?null:WA(this.body)?this.body.type||null:GA(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Mi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),l)),e.setParams&&(d=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),d)),new n(t,r,o,{params:d,headers:l,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:s})}},Ri=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Ri||{}),yu=class{constructor(e,t=200,r="OK"){this.headers=e.headers||new Gn,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},pf=class n extends yu{constructor(e={}){super(e),this.type=Ri.ResponseHeader}clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},vu=class n extends yu{constructor(e={}){super(e),this.type=Ri.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},xi=class extends yu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},JA=200,qU=204;function Zv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Rs=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof gu)o=r;else{let l;s.headers instanceof Gn?l=s.headers:l=new Gn(s.headers);let d;s.params&&(s.params instanceof Mi?d=s.params:d=new Mi({fromObject:s.params})),o=new gu(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=oe(o).pipe(Ar(l=>this.handler.handle(l)));if(r instanceof gu||s.observe==="events")return a;let c=a.pipe(mt(l=>l instanceof vu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(se(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(se(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(se(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(se(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Mi().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,Zv(s,i))}post(r,i,s={}){return this.request("POST",r,Zv(s,i))}put(r,i,s={}){return this.request("PUT",r,Zv(s,i))}};e.\u0275fac=function(i){return new(i||e)(L(mu))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),HU=/^\)\]\}',?\n/,GU="X-Request-URL";function QA(n){if(n.url)return n.url;let e=GU.toLocaleLowerCase();return n.headers.get(e)}var WU=(()=>{let e=class e{constructor(){this.fetchImpl=B(ew,{optional:!0})?.fetch??((...r)=>globalThis.fetch(...r)),this.ngZone=B(_e)}handle(r){return new he(i=>{let s=new AbortController;return this.doRequest(r,s.signal,i).then(tw,o=>i.error(new xi({error:o}))),()=>s.abort()})}doRequest(r,i,s){return b(this,null,function*(){let o=this.createRequestInit(r),a;try{let w=this.ngZone.runOutsideAngular(()=>this.fetchImpl(r.urlWithParams,M({signal:i},o)));KU(w),s.next({type:Ri.Sent}),a=yield w}catch(w){s.error(new xi({error:w,status:w.status??0,statusText:w.statusText,url:r.urlWithParams,headers:w.headers}));return}let c=new Gn(a.headers),l=a.statusText,d=QA(a)??r.urlWithParams,f=a.status,g=null;if(r.reportProgress&&s.next(new pf({headers:c,status:f,statusText:l,url:d})),a.body){let w=a.headers.get("content-length"),D=[],C=a.body.getReader(),P=0,O,F,U=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>b(this,null,function*(){for(;;){let{done:z,value:I}=yield C.read();if(z)break;if(D.push(I),P+=I.length,r.reportProgress){F=r.responseType==="text"?(F??"")+(O??=new TextDecoder).decode(I,{stream:!0}):void 0;let v=()=>s.next({type:Ri.DownloadProgress,total:w?+w:void 0,loaded:P,partialText:F});U?U.run(v):v()}}}));let Q=this.concatChunks(D,P);try{let z=a.headers.get("Content-Type")??"";g=this.parseBody(r,Q,z)}catch(z){s.error(new xi({error:z,headers:new Gn(a.headers),status:a.status,statusText:a.statusText,url:QA(a)??r.urlWithParams}));return}}f===0&&(f=g?JA:0),f>=200&&f<300?(s.next(new vu({body:g,headers:c,status:f,statusText:l,url:d})),s.complete()):s.error(new xi({error:g,headers:c,status:f,statusText:l,url:d}))})}parseBody(r,i,s){switch(r.responseType){case"json":let o=new TextDecoder().decode(i).replace(HU,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(i);case"blob":return new Blob([i],{type:s});case"arraybuffer":return i.buffer}}createRequestInit(r){let i={},s=r.withCredentials?"include":void 0;if(r.headers.forEach((o,a)=>i[o]=a.join(",")),r.headers.has("Accept")||(i.Accept="application/json, text/plain, */*"),!r.headers.has("Content-Type")){let o=r.detectContentTypeHeader();o!==null&&(i["Content-Type"]=o)}return{body:r.serializeBody(),method:r.method,headers:i,credentials:s}}concatChunks(r,i){let s=new Uint8Array(i),o=0;for(let a of r)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),ew=class{};function tw(){}function KU(n){n.then(tw,tw)}function QU(n,e){return e(n)}function YU(n,e,t){return(r,i)=>Tn(t,()=>e(r,s=>n(s,i)))}var XA=new H(""),ZU=new H(""),JU=new H("",{providedIn:"root",factory:()=>!0});var YA=(()=>{let e=class e extends mu{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=B(_i),this.contributeToStability=B(JU)}handle(r){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(XA),...this.injector.get(ZU,[])]));this.chain=i.reduceRight((s,o)=>YU(s,o,this.injector),QU)}if(this.contributeToStability){let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(fs(()=>this.pendingTasks.remove(i)))}else return this.chain(r,i=>this.backend.handle(i))}};e.\u0275fac=function(i){return new(i||e)(L(ff),L(Wt))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})();var XU=/^\)\]\}',?\n/;function eB(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}var ZA=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new ee(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?be(i.\u0275loadImpl()):oe(null)).pipe(Be(()=>new he(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((C,P)=>a.setRequestHeader(C,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let C=r.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(r.responseType){let C=r.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let c=r.serializeBody(),l=null,d=()=>{if(l!==null)return l;let C=a.statusText||"OK",P=new Gn(a.getAllResponseHeaders()),O=eB(a)||r.url;return l=new pf({headers:P,status:a.status,statusText:C,url:O}),l},f=()=>{let{headers:C,status:P,statusText:O,url:F}=d(),U=null;P!==qU&&(U=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=U?JA:0);let Q=P>=200&&P<300;if(r.responseType==="json"&&typeof U=="string"){let z=U;U=U.replace(XU,"");try{U=U!==""?JSON.parse(U):null}catch(I){U=z,Q&&(Q=!1,U={error:I,text:U})}}Q?(o.next(new vu({body:U,headers:C,status:P,statusText:O,url:F||void 0})),o.complete()):o.error(new xi({error:U,headers:C,status:P,statusText:O,url:F||void 0}))},g=C=>{let{url:P}=d(),O=new xi({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});o.error(O)},m=!1,w=C=>{m||(o.next(d()),m=!0);let P={type:Ri.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),o.next(P)},D=C=>{let P={type:Ri.UploadProgress,loaded:C.loaded};C.lengthComputable&&(P.total=C.total),o.next(P)};return a.addEventListener("load",f),a.addEventListener("error",g),a.addEventListener("timeout",g),a.addEventListener("abort",g),r.reportProgress&&(a.addEventListener("progress",w),c!==null&&a.upload&&a.upload.addEventListener("progress",D)),a.send(c),o.next({type:Ri.Sent}),()=>{a.removeEventListener("error",g),a.removeEventListener("abort",g),a.removeEventListener("load",f),a.removeEventListener("timeout",g),r.reportProgress&&(a.removeEventListener("progress",w),c!==null&&a.upload&&a.upload.removeEventListener("progress",D)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(L(ea))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),ex=new H(""),tB="XSRF-TOKEN",nB=new H("",{providedIn:"root",factory:()=>tB}),rB="X-XSRF-TOKEN",iB=new H("",{providedIn:"root",factory:()=>rB}),gf=class{},sB=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=uf(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(L(_t),L(At),L(nB))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})();function oB(n,e){let t=n.url.toLowerCase();if(!B(ex)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=B(gf).getToken(),i=B(iB);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function tx(...n){let e=[Rs,ZA,YA,{provide:mu,useExisting:YA},{provide:ff,useFactory:()=>B(WU,{optional:!0})??B(ZA)},{provide:XA,useValue:oB,multi:!0},{provide:ex,useValue:!0},{provide:gf,useClass:sB}];for(let t of n)e.push(...t.\u0275providers);return Ph(e)}var iw=class extends cf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},sw=class n extends iw{static makeCurrent(){LA(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=aB();return t==null?null:cB(t)}resetBaseElement(){wu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return uf(document.cookie,e)}},wu=null;function aB(){return wu=wu||document.querySelector("base"),wu?wu.getAttribute("href"):null}function cB(n){return new URL(n,document.baseURI).pathname}var ow=class{addToWindow(e){Un.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new ee(5103,!1);return s},Un.getAllAngularTestabilities=()=>e.getAllTestabilities(),Un.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Un.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};Un.frameworkStabilizers||(Un.frameworkStabilizers=[]),Un.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Di().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},uB=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),mf=new H(""),ox=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new ee(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(L(mf),L(_e))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),_u=class{constructor(e){this._doc=e}},nw="ng-app-id",ax=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ai(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${nw}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(nw),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(nw,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(L(_t),L(zh),L(hv,8),L(At))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),rw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},cw=/%COMP%/g,cx="%COMP%",lB=`_nghost-${cx}`,dB=`_ngcontent-${cx}`,hB=!0,fB=new H("",{providedIn:"root",factory:()=>hB});function pB(n){return dB.replace(cw,n)}function gB(n){return lB.replace(cw,n)}function ux(n,e){return e.map(t=>t.replace(cw,n))}var rx=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Ai(c),this.defaultRenderer=new Eu(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===sr.ShadowDom&&(i=Z(M({},i),{encapsulation:sr.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof yf?s.applyToHost(r):s instanceof Iu&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(i.encapsulation){case sr.Emulated:o=new yf(l,d,i,this.appId,f,a,c,g);break;case sr.ShadowDom:return new aw(l,d,r,i,a,c,this.nonce,g);default:o=new Iu(l,d,i,f,a,c,g);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(L(ox),L(ax),L(zh),L(fB),L(_t),L(At),L(_e),L(hv))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),Eu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(rw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(ix(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ix(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ee(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=rw[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=rw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Nr.DashCase|Nr.Important)?e.style.setProperty(t,r,i&Nr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Nr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Di().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function ix(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var aw=class extends Eu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ux(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Iu=class extends Eu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?ux(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},yf=class extends Iu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=pB(l),this.hostAttr=gB(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},mB=(()=>{let e=class e extends _u{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(L(_t))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),yB=(()=>{let e=class e extends _u{constructor(r){super(r),this.delegate=B(AA,{optional:!0})}supports(r){return this.delegate?this.delegate.supports(r):!1}addEventListener(r,i,s){return this.delegate.addEventListener(r,i,s)}removeEventListener(r,i,s){return this.delegate.removeEventListener(r,i,s)}};e.\u0275fac=function(i){return new(i||e)(L(_t))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),sx=["alt","control","meta","shift"],vB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_B=(()=>{let e=class e extends _u{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Di().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),sx.forEach(d=>{let f=i.indexOf(d);f>-1&&(i.splice(f,1),a+=d+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=vB[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),sx.forEach(a=>{if(a!==s){let c=wB[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(L(_t))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})();function EB(){sw.makeCurrent()}function IB(){return new Rr}function bB(){return JT(document),document}var DB=[{provide:At,useValue:Yv},{provide:dv,useValue:EB,multi:!0},{provide:_t,useFactory:bB,deps:[]}],lx=Pv(TA,"browser",DB),CB=new H(""),TB=[{provide:fu,useClass:ow,deps:[]},{provide:xv,useClass:nf,deps:[_e,rf,fu]},{provide:nf,useClass:nf,deps:[_e,rf,fu]}],SB=[{provide:Oh,useValue:"root"},{provide:Rr,useFactory:IB,deps:[]},{provide:mf,useClass:mB,multi:!0,deps:[_t,_e,At]},{provide:mf,useClass:_B,multi:!0,deps:[_t]},{provide:mf,useClass:yB,multi:!0},rx,ax,ox,{provide:qo,useExisting:rx},{provide:ea,useClass:uB,deps:[]},[]],dx=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:zh,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(L(CB,12))},e.\u0275mod=St({type:e}),e.\u0275inj=Tt({providers:[...SB,...TB],imports:[df,SA]});let n=e;return n})(),vf=(()=>{let e=class e{constructor(r){this._doc=r,this._dom=Di()}addTag(r,i=!1){return r?this._getOrCreateElement(r,i):null}addTags(r,i=!1){return r?r.reduce((s,o)=>(o&&s.push(this._getOrCreateElement(o,i)),s),[]):[]}getTag(r){return r&&this._doc.querySelector(`meta[${r}]`)||null}getTags(r){if(!r)return[];let i=this._doc.querySelectorAll(`meta[${r}]`);return i?[].slice.call(i):[]}updateTag(r,i){if(!r)return null;i=i||this._parseSelector(r);let s=this.getTag(i);return s?this._setMetaElementAttributes(r,s):this._getOrCreateElement(r,!0)}removeTag(r){this.removeTagElement(this.getTag(r))}removeTagElement(r){r&&this._dom.remove(r)}_getOrCreateElement(r,i=!1){if(!i){let a=this._parseSelector(r),c=this.getTags(a).filter(l=>this._containsAttributes(r,l))[0];if(c!==void 0)return c}let s=this._dom.createElement("meta");return this._setMetaElementAttributes(r,s),this._doc.getElementsByTagName("head")[0].appendChild(s),s}_setMetaElementAttributes(r,i){return Object.keys(r).forEach(s=>i.setAttribute(this._getMetaKeyMap(s),r[s])),i}_parseSelector(r){let i=r.name?"name":"property";return`${i}="${r[i]}"`}_containsAttributes(r,i){return Object.keys(r).every(s=>i.getAttribute(this._getMetaKeyMap(s))===r[s])}_getMetaKeyMap(r){return AB[r]||r}};e.\u0275fac=function(i){return new(i||e)(L(_t))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),AB={httpEquiv:"http-equiv"},ki=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(L(_t))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var uw=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:function(i){let s=null;return i?s=new(i||e):s=L(xB),s},providedIn:"root"});let n=e;return n})(),xB=(()=>{let e=class e extends uw{constructor(r){super(),this._doc=r}sanitize(r,i){if(i==null)return null;switch(r){case gn.NONE:return i;case gn.HTML:return Ss(i,"HTML")?ur(i):lS(this._doc,String(i)).toString();case gn.STYLE:return Ss(i,"Style")?ur(i):i;case gn.SCRIPT:if(Ss(i,"Script"))return ur(i);throw new ee(5200,!1);case gn.URL:return Ss(i,"URL")?ur(i):Hh(String(i));case gn.RESOURCE_URL:if(Ss(i,"ResourceURL"))return ur(i);throw new ee(5201,!1);default:throw new ee(5202,!1)}}bypassSecurityTrustHtml(r){return eS(r)}bypassSecurityTrustStyle(r){return tS(r)}bypassSecurityTrustScript(r){return nS(r)}bypassSecurityTrustUrl(r){return rS(r)}bypassSecurityTrustResourceUrl(r){return iS(r)}};e.\u0275fac=function(i){return new(i||e)(L(_t))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function hw(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ps=hw();function yx(n){Ps=n}var vx=/[&<>"']/,MB=new RegExp(vx.source,"g"),wx=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,RB=new RegExp(wx.source,"g"),kB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},hx=n=>kB[n];function mn(n,e){if(e){if(vx.test(n))return n.replace(MB,hx)}else if(wx.test(n))return n.replace(RB,hx);return n}var NB=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function PB(n){return n.replace(NB,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}var OB=/(^|[^\[])\^/g;function Ve(n,e){let t=typeof n=="string"?n:n.source;e=e||"";let r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(OB,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}function fx(n){try{n=encodeURI(n).replace(/%25/g,"%")}catch{return null}return n}var Du={exec:()=>null};function px(n,e){let t=n.replace(/\|/g,(s,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=t.split(/ \|/),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function wf(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r;){let s=n.charAt(r-i-1);if(s===e&&!t)i++;else if(s!==e&&t)i++;else break}return n.slice(0,r-i)}function FB(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function gx(n,e,t,r){let i=e.href,s=e.title?mn(e.title):null,o=n[1].replace(/\\([\[\]])/g,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let a={type:"link",raw:t,href:i,title:s,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:t,href:i,title:s,text:mn(o)}}function VB(n,e){let t=n.match(/^(\s+)(?:```)/);if(t===null)return e;let r=t[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[o]=s;return o.length>=r.length?i.slice(r.length):i}).join(`
`)}var ia=class{options;rules;lexer;constructor(e){this.options=e||Ps}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:wf(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=VB(r,t[3]||"");return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(/#$/.test(r)){let i=wf(r,"#");(this.options.pedantic||!i||/ $/.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);r=wf(r.replace(/^ *>[ \t]?/gm,""),`
`);let i=this.lexer.state.top;this.lexer.state.top=!0;let s=this.lexer.blockTokens(r);return this.lexer.state.top=i,{type:"blockquote",raw:t[0],tokens:s,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),a="",c="",l=!1;for(;e;){let d=!1;if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;a=t[0],e=e.substring(a.length);let f=t[2].split(`
`,1)[0].replace(/^\t+/,P=>" ".repeat(3*P.length)),g=e.split(`
`,1)[0],m=0;this.options.pedantic?(m=2,c=f.trimStart()):(m=t[2].search(/[^ ]/),m=m>4?1:m,c=f.slice(m),m+=t[1].length);let w=!1;if(!f&&/^ *$/.test(g)&&(a+=g+`
`,e=e.substring(g.length+1),d=!0),!d){let P=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),O=new RegExp(`^ {0,${Math.min(3,m-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),F=new RegExp(`^ {0,${Math.min(3,m-1)}}(?:\`\`\`|~~~)`),U=new RegExp(`^ {0,${Math.min(3,m-1)}}#`);for(;e;){let Q=e.split(`
`,1)[0];if(g=Q,this.options.pedantic&&(g=g.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),F.test(g)||U.test(g)||P.test(g)||O.test(e))break;if(g.search(/[^ ]/)>=m||!g.trim())c+=`
`+g.slice(m);else{if(w||f.search(/[^ ]/)>=4||F.test(f)||U.test(f)||O.test(f))break;c+=`
`+g}!w&&!g.trim()&&(w=!0),a+=Q+`
`,e=e.substring(Q.length+1),f=g.slice(m)}}s.loose||(l?s.loose=!0:/\n *\n *$/.test(a)&&(l=!0));let D=null,C;this.options.gfm&&(D=/^\[[ xX]\] /.exec(c),D&&(C=D[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:a,task:!!D,checked:C,loose:!1,text:c,tokens:[]}),s.raw+=a}s.items[s.items.length-1].raw=a.trimEnd(),s.items[s.items.length-1].text=c.trimEnd(),s.raw=s.raw.trimEnd();for(let d=0;d<s.items.length;d++)if(this.lexer.state.top=!1,s.items[d].tokens=this.lexer.blockTokens(s.items[d].text,[]),!s.loose){let f=s.items[d].tokens.filter(m=>m.type==="space"),g=f.length>0&&f.some(m=>/\n.*\n/.test(m.raw));s.loose=g}if(s.loose)for(let d=0;d<s.items.length;d++)s.items[d].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(/\s+/g," "),i=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;let r=px(t[1]),i=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)/^ *-+: *$/.test(a)?o.align.push("right"):/^ *:-+: *$/.test(a)?o.align.push("center"):/^ *:-+ *$/.test(a)?o.align.push("left"):o.align.push(null);for(let a of r)o.header.push({text:a,tokens:this.lexer.inline(a)});for(let a of s)o.rows.push(px(a,o.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:mn(t[1])}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let o=wf(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=FB(t[2],"()");if(o>-1){let c=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let o=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(r)?i=i.slice(1):i=i.slice(1,-1)),gx(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(/\s+/g," "),s=t[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return gx(r,s,r[0],this.lexer)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,c,l=o,d=0,f=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(f.lastIndex=0,t=t.slice(-1*e.length+o);(i=f.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(c=[...a].length,i[3]||i[4]){l+=c;continue}else if((i[5]||i[6])&&o%3&&!((o+c)%3)){d+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+d);let g=[...i[0]][0].length,m=e.slice(0,o+i.index+g+c);if(Math.min(o,c)%2){let D=m.slice(1,-1);return{type:"em",raw:m,text:D,tokens:this.lexer.inlineTokens(D)}}let w=m.slice(2,-2);return{type:"strong",raw:m,text:w,tokens:this.lexer.inlineTokens(w)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(/\n/g," "),i=/[^ ]/.test(r),s=/^ /.test(r)&&/ $/.test(r);return i&&s&&(r=r.substring(1,r.length-1)),r=mn(r,!0),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=mn(t[1]),i="mailto:"+r):(r=mn(t[1]),i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=mn(t[0]),i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=mn(t[0]),t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r;return this.lexer.state.inRawBlock?r=t[0]:r=mn(t[0]),{type:"text",raw:t[0],text:r}}}},LB=/^(?: *(?:\n|$))+/,jB=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,UB=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Tu=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,BB=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,_x=/(?:[*+-]|\d{1,9}[.)])/,Ex=Ve(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,_x).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),fw=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$B=/^[^\n]+/,pw=/(?!\s*\])(?:\\.|[^\[\]\\])+/,zB=Ve(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",pw).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),qB=Ve(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,_x).getRegex(),If="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",gw=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,HB=Ve("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",gw).replace("tag",If).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ix=Ve(fw).replace("hr",Tu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",If).getRegex(),GB=Ve(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ix).getRegex(),mw={blockquote:GB,code:jB,def:zB,fences:UB,heading:BB,hr:Tu,html:HB,lheading:Ex,list:qB,newline:LB,paragraph:Ix,table:Du,text:$B},mx=Ve("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Tu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",If).getRegex(),WB=Z(M({},mw),{table:mx,paragraph:Ve(fw).replace("hr",Tu).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",mx).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",If).getRegex()}),KB=Z(M({},mw),{html:Ve(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",gw).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Du,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ve(fw).replace("hr",Tu).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ex).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()}),bx=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,QB=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Dx=/^( {2,}|\\)\n(?!\s*$)/,YB=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Su="\\p{P}\\p{S}",ZB=Ve(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Su).getRegex(),JB=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,XB=Ve(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Su).getRegex(),e$=Ve("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Su).getRegex(),t$=Ve("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Su).getRegex(),n$=Ve(/\\([punct])/,"gu").replace(/punct/g,Su).getRegex(),r$=Ve(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),i$=Ve(gw).replace("(?:-->|$)","-->").getRegex(),s$=Ve("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",i$).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Ef=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,o$=Ve(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Ef).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Cx=Ve(/^!?\[(label)\]\[(ref)\]/).replace("label",Ef).replace("ref",pw).getRegex(),Tx=Ve(/^!?\[(ref)\](?:\[\])?/).replace("ref",pw).getRegex(),a$=Ve("reflink|nolink(?!\\()","g").replace("reflink",Cx).replace("nolink",Tx).getRegex(),yw={_backpedal:Du,anyPunctuation:n$,autolink:r$,blockSkip:JB,br:Dx,code:QB,del:Du,emStrongLDelim:XB,emStrongRDelimAst:e$,emStrongRDelimUnd:t$,escape:bx,link:o$,nolink:Tx,punctuation:ZB,reflink:Cx,reflinkSearch:a$,tag:s$,text:YB,url:Du},c$=Z(M({},yw),{link:Ve(/^!?\[(label)\]\((.*?)\)/).replace("label",Ef).getRegex(),reflink:Ve(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Ef).getRegex()}),lw=Z(M({},yw),{escape:Ve(bx).replace("])","~|])").getRegex(),url:Ve(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),u$=Z(M({},lw),{br:Ve(Dx).replace("{2,}","*").getRegex(),text:Ve(lw.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),_f={normal:mw,gfm:WB,pedantic:KB},bu={normal:yw,gfm:lw,breaks:u$,pedantic:c$},jr=class n{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ps,this.options.tokenizer=this.options.tokenizer||new ia,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={block:_f.normal,inline:bu.normal};this.options.pedantic?(t.block=_f.pedantic,t.inline=bu.pedantic):this.options.gfm&&(t.block=_f.gfm,this.options.breaks?t.inline=bu.breaks:t.inline=bu.gfm),this.tokenizer.rules=t}static get rules(){return{block:_f,inline:bu}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let r,i,s,o;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(r=a.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.list(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.def(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+r.raw,i.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startBlock){let a=1/0,c=e.slice(1),l;this.options.extensions.startBlock.forEach(d=>{l=d.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(s=e.substring(0,a+1))}if(this.state.top&&(r=this.tokenizer.paragraph(s))){i=t[t.length-1],o&&i.type==="paragraph"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),o=s.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+r.raw,i.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);continue}if(e){let a="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r,i,s,o=e,a,c,l;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(r=d.call({lexer:this},e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.escape(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.tag(e)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.link(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(r.raw.length),i=t[t.length-1],i&&r.type==="text"&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(r=this.tokenizer.emStrong(e,o,l)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.codespan(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.br(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.del(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.autolink(e)){e=e.substring(r.raw.length),t.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(e))){e=e.substring(r.raw.length),t.push(r);continue}if(s=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,f=e.slice(1),g;this.options.extensions.startInline.forEach(m=>{g=m.call({lexer:this},f),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(s=e.substring(0,d+1))}if(r=this.tokenizer.inlineText(s)){e=e.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=r.raw,i.text+=r.text):t.push(r);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return t}},it=class{options;constructor(e){this.options=e||Ps}code(e,t,r){let i=(t||"").match(/^\S*/)?.[0];return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="language-'+mn(i)+'">'+(r?e:mn(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:mn(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,r){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,r){let i=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+i+s+`>
`+e+"</"+i+`>
`}listitem(e,t,r){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){let r=t.header?"th":"td";return(t.align?`<${r} align="${t.align}">`:`<${r}>`)+e+`</${r}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,r){let i=fx(e);if(i===null)return r;e=i;let s='<a href="'+e+'"';return t&&(s+=' title="'+t+'"'),s+=">"+r+"</a>",s}image(e,t,r){let i=fx(e);if(i===null)return r;e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return e}},Cu=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,r){return""+r}image(e,t,r){return""+r}br(){return""}},Ur=class n{options;renderer;textRenderer;constructor(e){this.options=e||Ps,this.options.renderer=this.options.renderer||new it,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Cu}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=s,a=this.options.extensions.renderers[o.type].call({parser:this},o);if(a!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=a||"";continue}}switch(s.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{let o=s;r+=this.renderer.heading(this.parseInline(o.tokens),o.depth,PB(this.parseInline(o.tokens,this.textRenderer)));continue}case"code":{let o=s;r+=this.renderer.code(o.text,o.lang,!!o.escaped);continue}case"table":{let o=s,a="",c="";for(let d=0;d<o.header.length;d++)c+=this.renderer.tablecell(this.parseInline(o.header[d].tokens),{header:!0,align:o.align[d]});a+=this.renderer.tablerow(c);let l="";for(let d=0;d<o.rows.length;d++){let f=o.rows[d];c="";for(let g=0;g<f.length;g++)c+=this.renderer.tablecell(this.parseInline(f[g].tokens),{header:!1,align:o.align[g]});l+=this.renderer.tablerow(c)}r+=this.renderer.table(a,l);continue}case"blockquote":{let o=s,a=this.parse(o.tokens);r+=this.renderer.blockquote(a);continue}case"list":{let o=s,a=o.ordered,c=o.start,l=o.loose,d="";for(let f=0;f<o.items.length;f++){let g=o.items[f],m=g.checked,w=g.task,D="";if(g.task){let C=this.renderer.checkbox(!!m);l?g.tokens.length>0&&g.tokens[0].type==="paragraph"?(g.tokens[0].text=C+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&g.tokens[0].tokens[0].type==="text"&&(g.tokens[0].tokens[0].text=C+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:C+" "}):D+=C+" "}D+=this.parse(g.tokens,l),d+=this.renderer.listitem(D,w,!!m)}r+=this.renderer.list(d,a,c);continue}case"html":{let o=s;r+=this.renderer.html(o.text,o.block);continue}case"paragraph":{let o=s;r+=this.renderer.paragraph(this.parseInline(o.tokens));continue}case"text":{let o=s,a=o.tokens?this.parseInline(o.tokens):o.text;for(;i+1<e.length&&e[i+1].type==="text";)o=e[++i],a+=`
`+(o.tokens?this.parseInline(o.tokens):o.text);r+=t?this.renderer.paragraph(a):a;continue}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,t){t=t||this.renderer;let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){let o=this.options.extensions.renderers[s.type].call({parser:this},s);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=o||"";continue}}switch(s.type){case"escape":{let o=s;r+=t.text(o.text);break}case"html":{let o=s;r+=t.html(o.text);break}case"link":{let o=s;r+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{let o=s;r+=t.image(o.href,o.title,o.text);break}case"strong":{let o=s;r+=t.strong(this.parseInline(o.tokens,t));break}case"em":{let o=s;r+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{let o=s;r+=t.codespan(o.text);break}case"br":{r+=t.br();break}case"del":{let o=s;r+=t.del(this.parseInline(o.tokens,t));break}case"text":{let o=s;r+=t.text(o.text);break}default:{let o='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},ra=class{options;constructor(e){this.options=e||Ps}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},dw=class{defaults=hw();options=this.setOptions;parse=this.#s(jr.lex,Ur.parse);parseInline=this.#s(jr.lexInline,Ur.parseInline);Parser=Ur;Renderer=it;TextRenderer=Cu;Lexer=jr;Tokenizer=ia;Hooks=ra;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i=M({},r);if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let c=s.renderer.apply(this,a);return c===!1&&(c=o.apply(this,a)),c}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){let s=this.defaults.renderer||new it(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.renderer[a],l=s[a];s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=l.apply(s,d)),f||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new ia(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,c=r.tokenizer[a],l=s[a];s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=l.apply(s,d)),f}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new ra;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(o==="options")continue;let a=o,c=r.hooks[a],l=s[a];ra.passThroughHooks.has(o)?s[a]=d=>{if(this.defaults.async)return Promise.resolve(c.call(s,d)).then(g=>l.call(s,g));let f=c.call(s,d);return l.call(s,f)}:s[a]=(...d)=>{let f=c.apply(s,d);return f===!1&&(f=l.apply(s,d)),f}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let c=[];return c.push(o.call(this,a)),s&&(c=c.concat(s.call(this,a))),c}}this.defaults=M(M({},this.defaults),i)}),this}setOptions(e){return this.defaults=M(M({},this.defaults),e),this}lexer(e,t){return jr.lex(e,t??this.defaults)}parser(e,t){return Ur.parse(e,t??this.defaults)}#s(e,t){return(r,i)=>{let s=M({},i),o=M(M({},this.defaults),s);this.defaults.async===!0&&s.async===!1&&(o.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),o.async=!0);let a=this.#u(!!o.silent,!!o.async);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}#u(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+mn(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Ns=new dw;function De(n,e){return Ns.parse(n,e)}De.options=De.setOptions=function(n){return Ns.setOptions(n),De.defaults=Ns.defaults,yx(De.defaults),De};De.getDefaults=hw;De.defaults=Ps;De.use=function(...n){return Ns.use(...n),De.defaults=Ns.defaults,yx(De.defaults),De};De.walkTokens=function(n,e){return Ns.walkTokens(n,e)};De.parseInline=Ns.parseInline;De.Parser=Ur;De.parser=Ur.parse;De.Renderer=it;De.TextRenderer=Cu;De.Lexer=jr;De.lexer=jr.lex;De.Tokenizer=ia;De.Hooks=ra;De.parse=De;var mY=De.options,yY=De.setOptions,vY=De.use,wY=De.walkTokens,_Y=De.parseInline;var EY=Ur.parse,IY=jr.lex;var l$=["*"],d$="Copy",h$="Copied",f$=(()=>{let e=class e{constructor(){this._buttonClick$=new ke,this.copied$=this._buttonClick$.pipe(Be(()=>Bc(oe(!0),Am(3e3).pipe($c(!1)))),zc(),Ao(1)),this.copiedText$=this.copied$.pipe(Mr(!1),se(r=>r?h$:d$))}onCopyToClipboardClick(){this._buttonClick$.next()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=He({type:e,selectors:[["markdown-clipboard"]],standalone:!0,features:[hu],decls:4,vars:7,consts:[[1,"markdown-clipboard-button",3,"click"]],template:function(i,s){i&1&&(K(0,"button",0),Yt(1,"async"),Ft("click",function(){return s.onCopyToClipboardClick()}),ne(2),Yt(3,"async"),J()),i&2&&(du("copied",zn(1,3,s.copied$)),ie(2),wt(zn(3,5,s.copiedText$)))},dependencies:[zA],encapsulation:2,changeDetection:0});let n=e;return n})(),p$=new H("CLIPBOARD_OPTIONS");var vw=function(n){return n.CommandLine="command-line",n.LineHighlight="line-highlight",n.LineNumbers="line-numbers",n}(vw||{}),Ax=new H("MARKED_EXTENSIONS"),ww=new H("MARKED_OPTIONS"),g$="[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information",m$="[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information",y$="[ngx-markdown] When using the `mermaid` attribute you *have to* include Mermaid files to `angular.json` or use imports. See README for more information",v$="[ngx-markdown] When using the `clipboard` attribute you *have to* include Clipboard files to `angular.json` or use imports. See README for more information",w$="[ngx-markdown] When using the `clipboard` attribute you *have to* provide the `viewContainerRef` parameter to `MarkdownService.render()` function",_$="[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information",xx=new H("SECURITY_CONTEXT");var Ni=(()=>{let e=class e{get options(){return this._options}set options(r){this._options=M(M({},this.DEFAULT_MARKED_OPTIONS),r)}get renderer(){return this.options.renderer}set renderer(r){this.options.renderer=r}constructor(r,i,s,o,a,c,l){this.clipboardOptions=r,this.extensions=i,this.platform=o,this.securityContext=a,this.http=c,this.sanitizer=l,this.DEFAULT_MARKED_OPTIONS={renderer:new it},this.DEFAULT_KATEX_OPTIONS={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\begin{equation}",right:"\\end{equation}",display:!0},{left:"\\begin{align}",right:"\\end{align}",display:!0},{left:"\\begin{alignat}",right:"\\end{alignat}",display:!0},{left:"\\begin{gather}",right:"\\end{gather}",display:!0},{left:"\\begin{CD}",right:"\\end{CD}",display:!0},{left:"\\[",right:"\\]",display:!0}]},this.DEFAULT_MERMAID_OPTIONS={startOnLoad:!1},this.DEFAULT_CLIPBOARD_OPTIONS={buttonComponent:void 0},this.DEFAULT_PARSE_OPTIONS={decodeHtml:!1,inline:!1,emoji:!1,mermaid:!1,markedOptions:void 0,disableSanitizer:!1},this.DEFAULT_RENDER_OPTIONS={clipboard:!1,clipboardOptions:void 0,katex:!1,katexOptions:void 0,mermaid:!1,mermaidOptions:void 0},this._reload$=new ke,this.reload$=this._reload$.asObservable(),this.options=s}parse(r,i=this.DEFAULT_PARSE_OPTIONS){let{decodeHtml:s,inline:o,emoji:a,mermaid:c,disableSanitizer:l}=i,d=M(M({},this.options),i.markedOptions),f=d.renderer||this.renderer||new it;this.extensions&&(this.renderer=this.extendsRendererForExtensions(f)),c&&(this.renderer=this.extendsRendererForMermaid(f));let g=this.trimIndentation(r),m=s?this.decodeHtml(g):g,w=a?this.parseEmoji(m):m,D=this.parseMarked(w,d,o);return(l?D:this.sanitizer.sanitize(this.securityContext,D))||""}render(r,i=this.DEFAULT_RENDER_OPTIONS,s){let{clipboard:o,clipboardOptions:a,katex:c,katexOptions:l,mermaid:d,mermaidOptions:f}=i;c&&this.renderKatex(r,M(M({},this.DEFAULT_KATEX_OPTIONS),l)),d&&this.renderMermaid(r,M(M({},this.DEFAULT_MERMAID_OPTIONS),f)),o&&this.renderClipboard(r,s,M(M(M({},this.DEFAULT_CLIPBOARD_OPTIONS),this.clipboardOptions),a)),this.highlight(r)}reload(){this._reload$.next()}getSource(r){if(!this.http)throw new Error(_$);return this.http.get(r,{responseType:"text"}).pipe(se(i=>this.handleExtension(r,i)))}highlight(r){if(!Si(this.platform)||typeof Prism>"u"||typeof Prism.highlightAllUnder>"u")return;r||(r=document);let i=r.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(i,s=>s.classList.add("language-none")),Prism.highlightAllUnder(r)}decodeHtml(r){if(!Si(this.platform))return r;let i=document.createElement("textarea");return i.innerHTML=r,i.value}extendsRendererForExtensions(r){let i=r;return i.\u0275NgxMarkdownRendererExtendedForExtensions===!0||(this.extensions?.length>0&&De.use(...this.extensions),i.\u0275NgxMarkdownRendererExtendedForExtensions=!0),r}extendsRendererForMermaid(r){let i=r;if(i.\u0275NgxMarkdownRendererExtendedForMermaid===!0)return r;let s=r.code;return r.code=function(o,a,c){return a==="mermaid"?`<div class="mermaid">${o}</div>`:s.call(this,o,a,c)},i.\u0275NgxMarkdownRendererExtendedForMermaid=!0,r}handleExtension(r,i){let s=r.lastIndexOf("://"),o=s>-1?r.substring(s+4):r,a=o.lastIndexOf("/"),c=a>-1?o.substring(a+1).split("?")[0]:"",l=c.lastIndexOf("."),d=l>-1?c.substring(l+1):"";return d&&d!=="md"?"```"+d+`
`+i+"\n```":i}parseMarked(r,i,s=!1){if(i.renderer){let o=M({},i.renderer);delete o.\u0275NgxMarkdownRendererExtendedForExtensions,delete o.\u0275NgxMarkdownRendererExtendedForMermaid,delete i.renderer,De.use({renderer:o})}return s?De.parseInline(r,i):De.parse(r,i)}parseEmoji(r){if(!Si(this.platform))return r;if(typeof joypixels>"u"||typeof joypixels.shortnameToUnicode>"u")throw new Error(g$);return joypixels.shortnameToUnicode(r)}renderKatex(r,i){if(Si(this.platform)){if(typeof katex>"u"||typeof renderMathInElement>"u")throw new Error(m$);renderMathInElement(r,i)}}renderClipboard(r,i,s){if(!Si(this.platform))return;if(typeof ClipboardJS>"u")throw new Error(v$);if(!i)throw new Error(w$);let{buttonComponent:o,buttonTemplate:a}=s,c=r.querySelectorAll("pre");for(let l=0;l<c.length;l++){let d=c.item(l),f=document.createElement("div");f.style.position="relative",d.parentNode.insertBefore(f,d),f.appendChild(d);let g=document.createElement("div");g.classList.add("markdown-clipboard-toolbar"),g.style.position="absolute",g.style.top=".5em",g.style.right=".5em",g.style.zIndex="1",f.insertAdjacentElement("beforeend",g),f.onmouseenter=()=>g.classList.add("hover"),f.onmouseleave=()=>g.classList.remove("hover");let m;if(o){let D=i.createComponent(o);m=D.hostView,D.changeDetectorRef.markForCheck()}else if(a)m=i.createEmbeddedView(a);else{let D=i.createComponent(f$);m=D.hostView,D.changeDetectorRef.markForCheck()}let w;m.rootNodes.forEach(D=>{g.appendChild(D),w=new ClipboardJS(D,{text:()=>d.innerText})}),m.onDestroy(()=>w.destroy())}}renderMermaid(r,i=this.DEFAULT_MERMAID_OPTIONS){if(!Si(this.platform))return;if(typeof mermaid>"u"||typeof mermaid.initialize>"u")throw new Error(y$);let s=r.querySelectorAll(".mermaid");s.length!==0&&(mermaid.initialize(i),mermaid.run({nodes:s}))}trimIndentation(r){if(!r)return"";let i;return r.split(`
`).map(s=>{let o=i;return s.length>0&&(o=isNaN(o)?s.search(/\S|$/):Math.min(s.search(/\S|$/),o)),isNaN(i)&&(i=o),o?s.substring(o):s}).join(`
`)}};e.\u0275fac=function(i){return new(i||e)(L(p$,8),L(Ax,8),L(ww,8),L(At),L(xx),L(Rs,8),L(uw))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})(),Pi=(()=>{let e=class e{get disableSanitizer(){return this._disableSanitizer}set disableSanitizer(r){this._disableSanitizer=this.coerceBooleanProperty(r)}get inline(){return this._inline}set inline(r){this._inline=this.coerceBooleanProperty(r)}get clipboard(){return this._clipboard}set clipboard(r){this._clipboard=this.coerceBooleanProperty(r)}get emoji(){return this._emoji}set emoji(r){this._emoji=this.coerceBooleanProperty(r)}get katex(){return this._katex}set katex(r){this._katex=this.coerceBooleanProperty(r)}get mermaid(){return this._mermaid}set mermaid(r){this._mermaid=this.coerceBooleanProperty(r)}get lineHighlight(){return this._lineHighlight}set lineHighlight(r){this._lineHighlight=this.coerceBooleanProperty(r)}get lineNumbers(){return this._lineNumbers}set lineNumbers(r){this._lineNumbers=this.coerceBooleanProperty(r)}get commandLine(){return this._commandLine}set commandLine(r){this._commandLine=this.coerceBooleanProperty(r)}constructor(r,i,s){this.element=r,this.markdownService=i,this.viewContainerRef=s,this.error=new Ze,this.load=new Ze,this.ready=new Ze,this._clipboard=!1,this._commandLine=!1,this._disableSanitizer=!1,this._emoji=!1,this._inline=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1,this._mermaid=!1,this.destroyed$=new ke}ngOnChanges(){this.loadContent()}loadContent(){if(this.data!=null){this.handleData();return}if(this.src!=null){this.handleSrc();return}}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion(),this.markdownService.reload$.pipe(Hc(this.destroyed$)).subscribe(()=>this.loadContent())}ngOnDestroy(){this.destroyed$.next(),this.destroyed$.complete()}render(r,i=!1){return b(this,null,function*(){let s={decodeHtml:i,inline:this.inline,emoji:this.emoji,mermaid:this.mermaid,disableSanitizer:this.disableSanitizer},o={clipboard:this.clipboard,clipboardOptions:{buttonComponent:this.clipboardButtonComponent,buttonTemplate:this.clipboardButtonTemplate},katex:this.katex,katexOptions:this.katexOptions,mermaid:this.mermaid,mermaidOptions:this.mermaidOptions},a=yield this.markdownService.parse(r,s);this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.render(this.element.nativeElement,o,this.viewContainerRef),this.ready.emit()})}coerceBooleanProperty(r){return r!=null&&`${String(r)}`!="false"}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe({next:r=>{this.render(r).then(()=>{this.load.emit(r)})},error:r=>this.error.emit(r)})}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.commandLine&&(this.setPluginClass(this.element.nativeElement,vw.CommandLine),this.setPluginOptions(this.element.nativeElement,{dataFilterOutput:this.filterOutput,dataHost:this.host,dataPrompt:this.prompt,dataOutput:this.output,dataUser:this.user})),this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,vw.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++){let a=i instanceof Array?i:[i];s.item(o).classList.add(...a)}}setPluginOptions(r,i){let s=r.querySelectorAll("pre");for(let o=0;o<s.length;o++)Object.keys(i).forEach(a=>{let c=i[a];if(c){let l=this.toLispCase(a);s.item(o).setAttribute(l,c.toString())}})}toLispCase(r){let i=r.match(/([A-Z])/g);if(!i)return r;let s=r.toString();for(let o=0,a=i.length;o<a;o++)s=s.replace(new RegExp(i[o]),"-"+i[o].toLowerCase());return s.slice(0,1)==="-"&&(s=s.slice(1)),s}};e.\u0275fac=function(i){return new(i||e)(te(Ei),te(Ni),te(lr))},e.\u0275cmp=He({type:e,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",disableSanitizer:"disableSanitizer",inline:"inline",clipboard:"clipboard",clipboardButtonComponent:"clipboardButtonComponent",clipboardButtonTemplate:"clipboardButtonTemplate",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",mermaid:"mermaid",mermaidOptions:"mermaidOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start",commandLine:"commandLine",filterOutput:"filterOutput",host:"host",prompt:"prompt",output:"output",user:"user"},outputs:{error:"error",load:"load",ready:"ready"},standalone:!0,features:[Ts,hu],ngContentSelectors:l$,decls:1,vars:0,template:function(i,s){i&1&&(lA(),dA(0))},encapsulation:2});let n=e;return n})();function E$(n){return[Ni,n?.loader??[],n?.clipboardOptions??[],n?.markedOptions??[],{provide:Ax,useValue:n?.markedExtensions??[]},{provide:xx,useValue:n?.sanitize??gn.HTML}]}var Mx=(()=>{let e=class e{static forRoot(r){return{ngModule:e,providers:[E$(r)]}}static forChild(){return{ngModule:e}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=St({type:e}),e.\u0275inj=Tt({imports:[df]});let n=e;return n})(),Sx;(function(n){let e;(function(i){i.Strict="strict",i.Loose="loose",i.Antiscript="antiscript",i.Sandbox="sandbox"})(e=n.SecurityLevel||(n.SecurityLevel={}));let t;(function(i){i.Base="base",i.Forest="forest",i.Dark="dark",i.Default="default",i.Neutral="neutral"})(t=n.Theme||(n.Theme={}));let r;(function(i){i[i.Debug=1]="Debug",i[i.Info=2]="Info",i[i.Warn=3]="Warn",i[i.Error=4]="Error",i[i.Fatal=5]="Fatal"})(r=n.LogLevel||(n.LogLevel={}))})(Sx||(Sx={}));var b$=new H(""),D$=new H("");function Ox(n){return n!=null}function Fx(n){return bi(n)?be(n):n}function Vx(n){let e={};return n.forEach(t=>{e=t!=null?M(M({},e),t):e}),Object.keys(e).length===0?null:e}function Lx(n,e){return e.map(t=>t(n))}function C$(n){return!n.validate}function jx(n){return n.map(e=>C$(e)?e:t=>e.validate(t))}function T$(n){if(!n)return null;let e=n.filter(Ox);return e.length==0?null:function(t){return Vx(Lx(t,e))}}function Dw(n){return n!=null?T$(jx(n)):null}function S$(n){if(!n)return null;let e=n.filter(Ox);return e.length==0?null:function(t){let r=Lx(t,e).map(Fx);return Sm(r).pipe(se(Vx))}}function Cw(n){return n!=null?S$(jx(n)):null}function Rx(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function A$(n){return n._rawValidators}function x$(n){return n._rawAsyncValidators}function _w(n){return n?Array.isArray(n)?n:[n]:[]}function Cf(n,e){return Array.isArray(n)?n.includes(e):n===e}function kx(n,e){let t=_w(e);return _w(n).forEach(i=>{Cf(t,i)||t.push(i)}),t}function Nx(n,e){return _w(e).filter(t=>!Cf(n,t))}var Ew=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dw(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Cw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Nu=class extends Ew{get formDirective(){return null}get path(){return null}};var Iw=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},M$={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},tZ=Z(M({},M$),{"[class.ng-submitted]":"isSubmitted"});var Ux=(()=>{let e=class e extends Iw{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(te(Nu,10))},e.\u0275dir=cr({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&du("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ii]});let n=e;return n})();var Au="VALID",Df="INVALID",sa="PENDING",xu="DISABLED",aa=class{},Tf=class extends aa{constructor(e,t){super(),this.value=e,this.source=t}},Ru=class extends aa{constructor(e,t){super(),this.pristine=e,this.source=t}},ku=class extends aa{constructor(e,t){super(),this.touched=e,this.source=t}},oa=class extends aa{constructor(e,t){super(),this.status=e,this.source=t}};function R$(n){return(Tw(n)?n.validators:n)||null}function k$(n){return Array.isArray(n)?Dw(n):n||null}function N$(n,e){return(Tw(e)?e.asyncValidators:n)||null}function P$(n){return Array.isArray(n)?Cw(n):n||null}function Tw(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function O$(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ee(1e3,"");if(!r[t])throw new ee(1001,"")}function F$(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ee(1002,"")})}var bw=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=pu(()=>this.statusReactive()),this.statusReactive=lu(void 0),this._pristine=pu(()=>this.pristineReactive()),this.pristineReactive=lu(!0),this._touched=pu(()=>this.touchedReactive()),this.touchedReactive=lu(!1),this._events=new ke,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Hn(this.statusReactive)}set status(e){Hn(()=>this.statusReactive.set(e))}get valid(){return this.status===Au}get invalid(){return this.status===Df}get pending(){return this.status==sa}get disabled(){return this.status===xu}get enabled(){return this.status!==xu}get pristine(){return Hn(this.pristineReactive)}set pristine(e){Hn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Hn(this.touchedReactive)}set touched(e){Hn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Nx(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Nx(e,this._rawAsyncValidators))}hasValidator(e){return Cf(this._rawValidators,e)}hasAsyncValidator(e){return Cf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Z(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ku(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ku(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Z(M({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ru(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ru(!0,r))}markAsPending(e={}){this.status=sa;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new oa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Z(M({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=xu,this.errors=null,this._forEachChild(i=>{i.disable(Z(M({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tf(this.value,r)),this._events.next(new oa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Z(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Au,this._forEachChild(r=>{r.enable(Z(M({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Z(M({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Au||this.status===sa)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Tf(this.value,t)),this._events.next(new oa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Z(M({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xu:Au}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=sa,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Fx(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new oa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ze,this.statusChanges=new Ze}_calculateStatus(){return this._allControlsDisabled()?xu:this.errors?Df:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(sa)?sa:this._anyControlsHaveStatus(Df)?Df:Au}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ru(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ku(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Tw(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=k$(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=P$(this._rawAsyncValidators)}},Sf=class extends bw{constructor(e,t,r){super(R$(t),N$(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){F$(this,!0,e),Object.keys(e).forEach(r=>{O$(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bx=new H("CallSetDisabledState",{providedIn:"root",factory:()=>Sw}),Sw="always";function V$(n,e,t=Sw){$x(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),j$(n,e),B$(n,e),U$(n,e),L$(n,e)}function Px(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function L$(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function $x(n,e){let t=A$(n);e.validator!==null?n.setValidators(Rx(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=x$(n);e.asyncValidator!==null?n.setAsyncValidators(Rx(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Px(e._rawValidators,i),Px(e._rawAsyncValidators,i)}function j$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&zx(n,e)})}function U$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&zx(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function zx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function B$(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function $$(n,e){n==null,$x(n,e)}function z$(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}var q$={provide:Nu,useExisting:Mh(()=>Aw)},Mu=Promise.resolve(),Aw=(()=>{let e=class e extends Nu{get submitted(){return Hn(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=pu(()=>this.submittedReactive()),this.submittedReactive=lu(!1),this._directives=new Set,this.ngSubmit=new Ze,this.form=new Sf({},Dw(r),Cw(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Mu.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),V$(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Mu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Mu.then(()=>{let i=this._findContainer(r.path),s=new Sf({});$$(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Mu.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Mu.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),z$(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(te(b$,10),te(D$,10),te(Bx,8))},e.\u0275dir=cr({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Ft("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[pA([q$]),Ii]});let n=e;return n})();var qx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=cr({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var H$=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=St({type:e}),e.\u0275inj=Tt({});let n=e;return n})();var Hx=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Bx,useValue:r.callSetDisabledState??Sw}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=St({type:e}),e.\u0275inj=Tt({imports:[H$]});let n=e;return n})();var ge="primary",Ku=Symbol("RouteTitle"),Nw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function fa(n){return new Nw(n)}function W$(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function K$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!hr(n[t],e[t]))return!1;return!0}function hr(n,e){let t=n?Pw(n):void 0,r=e?Pw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!nM(n[i],e[i]))return!1;return!0}function Pw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function rM(n){return n.length>0?n[n.length-1]:null}function Fi(n){return Tm(n)?n:bi(n)?be(Promise.resolve(n)):oe(n)}var Q$={exact:sM,subset:oM},iM={exact:Y$,subset:Z$,ignored:()=>!0};function Gx(n,e,t){return Q$[t.paths](n.root,e.root,t.matrixParams)&&iM[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Y$(n,e){return hr(n,e)}function sM(n,e,t){if(!Fs(n.segments,e.segments)||!Mf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!sM(n.children[r],e.children[r],t))return!1;return!0}function Z$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nM(n[t],e[t]))}function oM(n,e,t){return aM(n,e,e.segments,t)}function aM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fs(i,t)||e.hasChildren()||!Mf(i,t,r))}else if(n.segments.length===t.length){if(!Fs(n.segments,t)||!Mf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!oM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Fs(n.segments,i)||!Mf(n.segments,i,r)||!n.children[ge]?!1:aM(n.children[ge],e,s,r)}}function Mf(n,e,t){return e.every((r,i)=>iM[t](n[i].parameters,r.parameters))}var $r=class{constructor(e=new Re([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=fa(this.queryParams),this._queryParamMap}toString(){return ez.serialize(this)}},Re=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Rf(this)}},Os=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=fa(this.parameters),this._parameterMap}toString(){return uM(this)}};function J$(n,e){return Fs(n,e)&&n.every((t,r)=>hr(t.parameters,e[r].parameters))}function Fs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function X$(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ge&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ge&&(t=t.concat(e(i,r)))}),t}var Qu=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>new pa,providedIn:"root"});let n=e;return n})(),pa=class{parse(e){let t=new Fw(e);return new $r(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Pu(e.root,!0)}`,r=rz(e.queryParams),i=typeof e.fragment=="string"?`#${tz(e.fragment)}`:"";return`${t}${r}${i}`}},ez=new pa;function Rf(n){return n.segments.map(e=>uM(e)).join("/")}function Pu(n,e){if(!n.hasChildren())return Rf(n);if(e){let t=n.children[ge]?Pu(n.children[ge],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ge&&r.push(`${i}:${Pu(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=X$(n,(r,i)=>i===ge?[Pu(n.children[ge],!1)]:[`${i}:${Pu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ge]!=null?`${Rf(n)}/${t[0]}`:`${Rf(n)}/(${t.join("//")})`}}function cM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Af(n){return cM(n).replace(/%3B/gi,";")}function tz(n){return encodeURI(n)}function Ow(n){return cM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kf(n){return decodeURIComponent(n)}function Wx(n){return kf(n.replace(/\+/g,"%20"))}function uM(n){return`${Ow(n.path)}${nz(n.parameters)}`}function nz(n){return Object.entries(n).map(([e,t])=>`;${Ow(e)}=${Ow(t)}`).join("")}function rz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Af(t)}=${Af(i)}`).join("&"):`${Af(t)}=${Af(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var iz=/^[^\/()?;#]+/;function xw(n){let e=n.match(iz);return e?e[0]:""}var sz=/^[^\/()?;=#]+/;function oz(n){let e=n.match(sz);return e?e[0]:""}var az=/^[^=?&#]+/;function cz(n){let e=n.match(az);return e?e[0]:""}var uz=/^[^&#]+/;function lz(n){let e=n.match(uz);return e?e[0]:""}var Fw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Re([],{}):new Re([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ge]=new Re(e,t)),r}parseSegment(){let e=xw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ee(4009,!1);return this.capture(e),new Os(kf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=oz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=xw(this.remaining);i&&(r=i,this.capture(r))}e[kf(t)]=kf(r)}parseQueryParam(e){let t=cz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=lz(this.remaining);o&&(r=o,this.capture(r))}let i=Wx(t),s=Wx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=xw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new ee(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ge);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ge]:new Re([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ee(4011,!1)}};function lM(n){return n.segments.length>0?new Re([],{[ge]:n}):n}function dM(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=dM(i);if(r===ge&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Re(n.segments,e);return dz(t)}function dz(n){if(n.numberOfChildren===1&&n.children[ge]){let e=n.children[ge];return new Re(n.segments.concat(e.segments),e.children)}return n}function Uu(n){return n instanceof $r}function hz(n,e,t=null,r=null){let i=hM(n);return fM(i,e,t,r)}function hM(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Re(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=lM(r);return e??i}function fM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Mw(i,i,i,t,r);let s=fz(e);if(s.toRoot())return Mw(i,i,new Re([],{}),t,r);let o=pz(s,i,n),a=o.processChildren?Vu(o.segmentGroup,o.index,s.commands):gM(o.segmentGroup,o.index,s.commands);return Mw(i,o.segmentGroup,a,t,r)}function Nf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Bu(n){return typeof n=="object"&&n!=null&&n.outlets}function Mw(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=pM(n,e,t);let a=lM(dM(o));return new $r(a,s,i)}function pM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=pM(s,e,t)}),new Re(n.segments,r)}var Pf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nf(r[0]))throw new ee(4003,!1);let i=r.find(Bu);if(i&&i!==rM(r))throw new ee(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function fz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Pf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Pf(t,e,r)}var la=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function pz(n,e,t){if(n.isAbsolute)return new la(e,!0,0);if(!t)return new la(e,!1,NaN);if(t.parent===null)return new la(t,!0,0);let r=Nf(n.commands[0])?0:1,i=t.segments.length-1+r;return gz(t,i,n.numberOfDoubleDots)}function gz(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new ee(4005,!1);i=r.segments.length}return new la(r,!1,i-s)}function mz(n){return Bu(n[0])?n[0].outlets:{[ge]:n}}function gM(n,e,t){if(n??=new Re([],{}),n.segments.length===0&&n.hasChildren())return Vu(n,e,t);let r=yz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Re(n.segments.slice(0,r.pathIndex),{});return s.children[ge]=new Re(n.segments.slice(r.pathIndex),n.children),Vu(s,0,i)}else return r.match&&i.length===0?new Re(n.segments,{}):r.match&&!n.hasChildren()?Vw(n,e,t):r.match?Vu(n,0,i):Vw(n,e,t)}function Vu(n,e,t){if(t.length===0)return new Re(n.segments,{});{let r=mz(t),i={};if(Object.keys(r).some(s=>s!==ge)&&n.children[ge]&&n.numberOfChildren===1&&n.children[ge].segments.length===0){let s=Vu(n.children[ge],e,t);return new Re(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=gM(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Re(n.segments,i)}}function yz(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Bu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Qx(c,l,o))return s;r+=2}else{if(!Qx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vw(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Bu(s)){let c=vz(s.outlets);return new Re(r,c)}if(i===0&&Nf(t[0])){let c=n.segments[e];r.push(new Os(c.path,Kx(t[0]))),i++;continue}let o=Bu(s)?s.outlets[ge]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Nf(a)?(r.push(new Os(o,Kx(a))),i+=2):(r.push(new Os(o,{})),i++)}return new Re(r,{})}function vz(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Vw(new Re([],{}),0,r))}),e}function Kx(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Qx(n,e,t){return n==t.path&&hr(e,t.parameters)}var Lu="imperative",bt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(bt||{}),xn=class{constructor(e,t){this.id=e,this.url=t}},ga=class extends xn{constructor(e,t,r="imperative",i=null){super(e,t),this.type=bt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zr=class extends xn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(vn||{}),Of=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Of||{}),Br=class extends xn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Oi=class extends xn{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=bt.NavigationSkipped}},$u=class extends xn{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ff=class extends xn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lw=class extends xn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jw=class extends xn{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Uw=class extends xn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bw=class extends xn{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$w=class{constructor(e){this.route=e,this.type=bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zw=class{constructor(e){this.route=e,this.type=bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qw=class{constructor(e){this.snapshot=e,this.type=bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hw=class{constructor(e){this.snapshot=e,this.type=bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gw=class{constructor(e){this.snapshot=e,this.type=bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ww=class{constructor(e){this.snapshot=e,this.type=bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vf=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=bt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},zu=class{},ma=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function wz(n,e){return n.providers&&!n._injector&&(n._injector=Yh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wn(n){return n.outlet||ge}function _z(n,e){let t=n.filter(r=>Wn(r)===e);return t.push(...n.filter(r=>Wn(r)!==e)),t}function Yu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Kw=class{get injector(){return Yu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Zu(this.rootInjector),this.attachRef=null}},Zu=(()=>{let e=class e{constructor(r){this.rootInjector=r,this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Kw(this.rootInjector),this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)(L(Wt))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Lf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Qw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Qw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Yw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Yw(e,this._root).map(t=>t.value)}};function Qw(n,e){if(n===e.value)return e;for(let t of e.children){let r=Qw(n,t);if(r)return r}return null}function Yw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Yw(n,t);if(r.length)return r.unshift(e),r}return[]}var yn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ua(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var jf=class extends Lf{constructor(e,t){super(e),this.snapshot=t,s_(this,e)}toString(){return this.snapshot.toString()}};function mM(n){let e=Ez(n),t=new Ct([new Os("",{})]),r=new Ct({}),i=new Ct({}),s=new Ct({}),o=new Ct(""),a=new Vt(t,r,s,o,i,ge,n,e.root);return a.snapshot=e.root,new jf(new yn(a,[]),e)}function Ez(n){let e={},t={},r={},i="",s=new da([],e,r,i,t,ge,n,null,{});return new Bf("",new yn(s,[]))}var Vt=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(se(l=>l[Ku]))??oe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(e=>fa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(e=>fa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Uf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:M(M({},e.params),n.params),data:M(M({},e.data),n.data),resolve:M(M(M(M({},n.data),e.data),i?.data),n._resolvedData)}:r={params:M({},n.params),data:M({},n.data),resolve:M(M({},n.data),n._resolvedData??{})},i&&vM(i)&&(r.resolve[Ku]=i.title),r}var da=class{get title(){return this.data?.[Ku]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Bf=class extends Lf{constructor(e,t){super(t),this.url=e,s_(this,t)}toString(){return yM(this._root)}};function s_(n,e){e.value._routerState=n,e.children.forEach(t=>s_(n,t))}function yM(n){let e=n.children.length>0?` { ${n.children.map(yM).join(", ")} } `:"";return`${n.value}${e}`}function Rw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,hr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),hr(e.params,t.params)||n.paramsSubject.next(t.params),K$(e.url,t.url)||n.urlSubject.next(t.url),hr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zw(n,e){let t=hr(n.params,e.params)&&J$(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Zw(n.parent,e.parent))}function vM(n){return typeof n.title=="string"||n.title===null}var o_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ge,this.activateEvents=new Ze,this.deactivateEvents=new Ze,this.attachEvents=new Ze,this.detachEvents=new Ze,this.parentContexts=B(Zu),this.location=B(lr),this.changeDetector=B(qn),this.inputBinder=B(Gf,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ee(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ee(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ee(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new ee(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Jw(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=cr({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ts]});let n=e;return n})(),Jw=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Vt?this.route:e===Zu?this.childContexts:this.parent.get(e,t)}},Gf=new H(""),Yx=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Uc([i.queryParams,i.params,i.data]).pipe(Be(([o,a,c],l)=>(c=M(M(M({},o),a),c),l===0?oe(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=xA(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})();function Iz(n,e,t){let r=qu(n,e._root,t?t._root:void 0);return new jf(r,e)}function qu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=bz(n,e,t);return new yn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>qu(n,a)),o}}let r=Dz(e.value),i=e.children.map(s=>qu(n,s));return new yn(r,i)}}function bz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return qu(n,r,i);return qu(n,r)})}function Dz(n){return new Vt(new Ct(n.url),new Ct(n.params),new Ct(n.queryParams),new Ct(n.fragment),new Ct(n.data),n.outlet,n.component,n)}var Hu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},wM="ngNavigationCancelingError";function $f(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Uu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=_M(!1,vn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function _M(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[wM]=!0,t.cancellationCode=e,t}function Cz(n){return EM(n)&&Uu(n.url)}function EM(n){return!!n&&n[wM]}var Tz=(n,e,t,r)=>se(i=>(new Xw(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Xw=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ua(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ua(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ua(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ua(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ww(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Hw(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Rw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Rw(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},zf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ha=class{constructor(e,t){this.component=e,this.route=t}};function Sz(n,e,t){let r=n._root,i=e?e._root:null;return Ou(r,i,t,[r.value])}function Az(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function va(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!OC(n)?n:e.get(n):r}function Ou(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ua(e);return n.children.forEach(o=>{xz(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ju(a,t.getContext(o),i)),i}function xz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Mz(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new zf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ou(n,e,a?a.children:null,r,i):Ou(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ha(a.outlet.component,o))}else o&&ju(e,a,i),i.canActivateChecks.push(new zf(r)),s.component?Ou(n,null,a?a.children:null,r,i):Ou(n,null,t,r,i);return i}function Mz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Fs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fs(n.url,e.url)||!hr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zw(n,e)||!hr(n.queryParams,e.queryParams);case"paramsChange":default:return!Zw(n,e)}}function ju(n,e,t){let r=ua(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ju(o,e.children.getContext(s),t):ju(o,null,t):ju(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ha(e.outlet.component,i)):t.canDeactivateChecks.push(new ha(null,i)):t.canDeactivateChecks.push(new ha(null,i))}function Ju(n){return typeof n=="function"}function Rz(n){return typeof n=="boolean"}function kz(n){return n&&Ju(n.canLoad)}function Nz(n){return n&&Ju(n.canActivate)}function Pz(n){return n&&Ju(n.canActivateChild)}function Oz(n){return n&&Ju(n.canDeactivate)}function Fz(n){return n&&Ju(n.canMatch)}function IM(n){return n instanceof Sr||n?.name==="EmptyError"}var xf=Symbol("INITIAL_VALUE");function ya(){return Be(n=>Uc(n.map(e=>e.pipe(xr(1),Mr(xf)))).pipe(se(e=>{for(let t of e)if(t!==!0){if(t===xf)return xf;if(t===!1||Vz(t))return t}return!0}),mt(e=>e!==xf),xr(1)))}function Vz(n){return Uu(n)||n instanceof Hu}function Lz(n,e){return ut(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?oe(Z(M({},t),{guardsResult:!0})):jz(o,r,i,n).pipe(ut(a=>a&&Rz(a)?Uz(r,s,n,e):oe(a)),se(a=>Z(M({},t),{guardsResult:a})))})}function jz(n,e,t,r){return be(n).pipe(ut(i=>Hz(i.component,i.route,t,e,r)),hn(i=>i!==!0,!0))}function Uz(n,e,t,r){return be(e).pipe(Ar(i=>To($z(i.route.parent,r),Bz(i.route,r),qz(n,i.path,t),zz(n,i.route,t))),hn(i=>i!==!0,!0))}function Bz(n,e){return n!==null&&e&&e(new Gw(n)),oe(!0)}function $z(n,e){return n!==null&&e&&e(new qw(n)),oe(!0)}function zz(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return oe(!0);let i=r.map(s=>$d(()=>{let o=Yu(e)??t,a=va(s,o),c=Nz(a)?a.canActivate(e,n):Tn(o,()=>a(e,n));return Fi(c).pipe(hn())}));return oe(i).pipe(ya())}function qz(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Az(o)).filter(o=>o!==null).map(o=>$d(()=>{let a=o.guards.map(c=>{let l=Yu(o.node)??t,d=va(c,l),f=Pz(d)?d.canActivateChild(r,n):Tn(l,()=>d(r,n));return Fi(f).pipe(hn())});return oe(a).pipe(ya())}));return oe(s).pipe(ya())}function Hz(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return oe(!0);let o=s.map(a=>{let c=Yu(e)??i,l=va(a,c),d=Oz(l)?l.canDeactivate(n,e,t,r):Tn(c,()=>l(n,e,t,r));return Fi(d).pipe(hn())});return oe(o).pipe(ya())}function Gz(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return oe(!0);let s=i.map(o=>{let a=va(o,n),c=kz(a)?a.canLoad(e,t):Tn(n,()=>a(e,t));return Fi(c)});return oe(s).pipe(ya(),bM(r))}function bM(n){return wm(lt(e=>{if(typeof e!="boolean")throw $f(n,e)}),se(e=>e===!0))}function Wz(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return oe(!0);let s=i.map(o=>{let a=va(o,n),c=Fz(a)?a.canMatch(e,t):Tn(n,()=>a(e,t));return Fi(c)});return oe(s).pipe(ya(),bM(r))}var Gu=class{constructor(e){this.segmentGroup=e||null}},Wu=class extends Error{constructor(e){super(),this.urlTree=e}};function ca(n){return Co(new Gu(n))}function Kz(n){return Co(new ee(4e3,!1))}function Qz(n){return Co(_M(!1,vn.GuardRejected))}var e_=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return oe(r);if(i.numberOfChildren>1||!i.children[ge])return Kz(`${e.redirectTo}`);i=i.children[ge]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:m,data:w,title:D}=i,C=Tn(s,()=>a({params:m,data:w,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:D}));if(C instanceof $r)throw new Wu(C);t=C}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Wu(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new $r(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Re(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new ee(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},t_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Yz(n,e,t,r,i){let s=DM(n,e,t);return s.matched?(r=wz(e,r),Wz(r,e,t,i).pipe(se(o=>o===!0?s:M({},t_)))):oe(s)}function DM(n,e,t){if(e.path==="**")return Zz(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?M({},t_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||W$)(t,n,e);if(!i)return M({},t_);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?M(M({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Zz(n){return{matched:!0,parameters:n.length>0?rM(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Zx(n,e,t,r){return t.length>0&&eq(n,t,r)?{segmentGroup:new Re(e,Xz(r,new Re(t,n.children))),slicedSegments:[]}:t.length===0&&tq(n,t,r)?{segmentGroup:new Re(n.segments,Jz(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Re(n.segments,n.children),slicedSegments:t}}function Jz(n,e,t,r){let i={};for(let s of t)if(Wf(n,e,s)&&!r[Wn(s)]){let o=new Re([],{});i[Wn(s)]=o}return M(M({},r),i)}function Xz(n,e){let t={};t[ge]=e;for(let r of n)if(r.path===""&&Wn(r)!==ge){let i=new Re([],{});t[Wn(r)]=i}return t}function eq(n,e,t){return t.some(r=>Wf(n,e,r)&&Wn(r)!==ge)}function tq(n,e,t){return t.some(r=>Wf(n,e,r))}function Wf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function nq(n,e,t){return e.length===0&&!n.children[t]}var n_=class{};function rq(n,e,t,r,i,s,o="emptyOnly"){return new r_(n,e,t,r,i,o,s).recognize()}var iq=31,r_=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new e_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ee(4002,`'${e.segmentGroup}'`)}recognize(){let e=Zx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(se(({children:t,rootSnapshot:r})=>{let i=new yn(r,t),s=new Bf("",i),o=hz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new da([],Object.freeze({}),Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ge,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ge,t).pipe(se(r=>({children:r,rootSnapshot:t})),ci(r=>{if(r instanceof Wu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Gu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(se(o=>o instanceof yn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return be(s).pipe(Ar(o=>{let a=r.children[o],c=_z(t,o);return this.processSegmentGroup(e,c,a,o,i)}),ps((o,a)=>(o.push(...a),o)),ui(null),xm(),ut(o=>{if(o===null)return ca(r);let a=CM(o);return sq(a),oe(a)}))}processSegment(e,t,r,i,s,o,a){return be(t).pipe(Ar(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(ci(l=>{if(l instanceof Gu)return oe(null);throw l}))),hn(c=>!!c),ci(c=>{if(IM(c))return nq(r,i,s)?oe(new n_):ca(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Wn(r)!==o&&(o===ge||!Wf(i,s,r))?ca(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):ca(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=DM(t,i,s);if(!c)return ca(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>iq&&(this.allowRedirects=!1));let m=new da(s,l,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Jx(i),Wn(i),i.component??i._loadedComponent??null,i,Xx(i)),w=Uf(m,a,this.paramsInheritanceStrategy);m.params=Object.freeze(w.params),m.data=Object.freeze(w.data);let D=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,m,e);return this.applyRedirects.lineralizeSegments(i,D).pipe(ut(C=>this.processSegment(e,r,t,C.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=Yz(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Be(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Be(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:m}=c,w=new da(g,f,Object.freeze(M({},this.urlTree.queryParams)),this.urlTree.fragment,Jx(r),Wn(r),r.component??r._loadedComponent??null,r,Xx(r)),D=Uf(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(D.params),w.data=Object.freeze(D.data);let{segmentGroup:C,slicedSegments:P}=Zx(t,g,m,l);if(P.length===0&&C.hasChildren())return this.processChildren(d,l,C,w).pipe(se(F=>new yn(w,F)));if(l.length===0&&P.length===0)return oe(new yn(w,[]));let O=Wn(r)===s;return this.processSegment(d,l,C,P,O?ge:s,!0,w).pipe(se(F=>new yn(w,F instanceof yn?[F]:[])))}))):ca(t)))}getChildConfig(e,t,r){return t.children?oe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?oe({routes:t._loadedRoutes,injector:t._loadedInjector}):Gz(e,t,r,this.urlSerializer).pipe(ut(i=>i?this.configLoader.loadChildren(e,t).pipe(lt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):Qz(t))):oe({routes:[],injector:e})}};function sq(n){n.sort((e,t)=>e.value.outlet===ge?-1:t.value.outlet===ge?1:e.value.outlet.localeCompare(t.value.outlet))}function oq(n){let e=n.value.routeConfig;return e&&e.path===""}function CM(n){let e=[],t=new Set;for(let r of n){if(!oq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=CM(r.children);e.push(new yn(r.value,i))}return e.filter(r=>!t.has(r))}function Jx(n){return n.data||{}}function Xx(n){return n.resolve||{}}function aq(n,e,t,r,i,s){return ut(o=>rq(n,e,t,r,o.extractedUrl,i,s).pipe(se(({state:a,tree:c})=>Z(M({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function cq(n,e){return ut(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return oe(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of TM(c))o.add(l);let a=0;return be(o).pipe(Ar(c=>s.has(c)?uq(c,r,n,e):(c.data=Uf(c,c.parent,n).resolve,oe(void 0))),lt(()=>a++),So(1),ut(c=>a===o.size?oe(t):qt))})}function TM(n){let e=n.children.map(t=>TM(t)).flat();return[n,...e]}function uq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!vM(i)&&(s[Ku]=i.title),lq(s,n,e,r).pipe(se(o=>(n._resolvedData=o,n.data=Uf(n,n.parent,t).resolve,null)))}function lq(n,e,t,r){let i=Pw(n);if(i.length===0)return oe({});let s={};return be(i).pipe(ut(o=>dq(n[o],e,t,r).pipe(hn(),lt(a=>{if(a instanceof Hu)throw $f(new pa,a);s[o]=a}))),So(1),$c(s),ci(o=>IM(o)?qt:Co(o)))}function dq(n,e,t,r){let i=Yu(e)??r,s=va(n,i),o=s.resolve?s.resolve(e,t):Tn(i,()=>s(e,t));return Fi(o)}function kw(n){return Be(e=>{let t=n(e);return t?be(t).pipe(se(()=>e)):oe(e)})}var SM=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===ge);return i}getResolvedTitleForRoute(r){return r.data[Ku]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>B(hq),providedIn:"root"});let n=e;return n})(),hq=(()=>{let e=class e extends SM{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(L(ki))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Xu=new H("",{providedIn:"root",factory:()=>({})}),fq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=He({type:e,selectors:[["ng-component"]],standalone:!0,features:[hu],decls:1,vars:0,template:function(i,s){i&1&&Fe(0,"router-outlet")},dependencies:[o_],encapsulation:2});let n=e;return n})();function a_(n){let e=n.children&&n.children.map(a_),t=e?Z(M({},n),{children:e}):M({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ge&&(t.component=fq),t}var qf=new H(""),c_=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(af)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return oe(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Fi(r.loadComponent()).pipe(se(AM),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),fs(()=>{this.componentLoaders.delete(r)})),s=new _o(i,()=>new ke).pipe(wo());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return oe({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=pq(i,this.compiler,r,this.onLoadEndListener).pipe(fs(()=>{this.childrenLoaders.delete(i)})),a=new _o(o,()=>new ke).pipe(wo());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function pq(n,e,t,r){return Fi(n.loadChildren()).pipe(se(AM),ut(i=>i instanceof tu||Array.isArray(i)?oe(i):be(e.compileModuleAsync(i))),se(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(qf,[],{optional:!0,self:!0}).flat()),{routes:o.map(a_),injector:s}}))}function gq(n){return n&&typeof n=="object"&&"default"in n}function AM(n){return gq(n)?n.default:n}var u_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>B(mq),providedIn:"root"});let n=e;return n})(),mq=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),xM=new H(""),MM=new H("");function yq(n,e,t){let r=n.get(MM),i=n.get(_t);return n.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),vq(n))),{onViewTransitionCreated:c}=r;return c&&Tn(n,()=>c({transition:a,from:e,to:t})),o})}function vq(n){return new Promise(e=>{Cv({read:()=>setTimeout(e)},{injector:n})})}var wq=new H(""),l_=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ke,this.transitionAbortSubject=new ke,this.configLoader=B(c_),this.environmentInjector=B(Wt),this.urlSerializer=B(Qu),this.rootContexts=B(Zu),this.location=B(ta),this.inputBindingEnabled=B(Gf,{optional:!0})!==null,this.titleStrategy=B(SM),this.options=B(Xu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(u_),this.createViewTransition=B(xM,{optional:!0}),this.navigationErrorHandler=B(wq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>oe(void 0),this.rootComponentType=null;let r=s=>this.events.next(new $w(s)),i=s=>this.events.next(new zw(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Z(M(M({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ct({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Lu,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mt(o=>o.id!==0),se(o=>Z(M({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Be(o=>{let a=!1,c=!1;return oe(o).pipe(Be(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",vn.SupersededByNewNavigation),qt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Z(M({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!d&&f!=="reload"){let g="";return this.events.next(new Oi(l.id,this.urlSerializer.serialize(l.rawUrl),g,Of.IgnoredSameUrlNavigation)),l.resolve(!1),qt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return oe(l).pipe(Be(g=>{let m=this.transitions?.getValue();return this.events.next(new ga(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?qt:Promise.resolve(g)}),aq(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=Z(M({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new Ff(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:g,extractedUrl:m,source:w,restoredState:D,extras:C}=l,P=new ga(g,this.urlSerializer.serialize(m),w,D);this.events.next(P);let O=mM(this.rootComponentType).snapshot;return this.currentTransition=o=Z(M({},l),{targetSnapshot:O,urlAfterRedirects:m,extras:Z(M({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,oe(o)}else{let g="";return this.events.next(new Oi(l.id,this.urlSerializer.serialize(l.extractedUrl),g,Of.IgnoredByUrlHandlingStrategy)),l.resolve(!1),qt}}),lt(l=>{let d=new Lw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),se(l=>(this.currentTransition=o=Z(M({},l),{guards:Sz(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),Lz(this.environmentInjector,l=>this.events.next(l)),lt(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw $f(this.urlSerializer,l.guardsResult);let d=new jw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),mt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",vn.GuardRejected),!1)),kw(l=>{if(l.guards.canActivateChecks.length)return oe(l).pipe(lt(d=>{let f=new Uw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Be(d=>{let f=!1;return oe(d).pipe(cq(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",vn.NoDataFromResolver)}}))}),lt(d=>{let f=new Bw(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),kw(l=>{let d=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(lt(m=>{f.component=m}),se(()=>{})));for(let m of f.children)g.push(...d(m));return g};return Uc(d(l.targetSnapshot.root)).pipe(ui(null),xr(1))}),kw(()=>this.afterPreactivation()),Be(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,f=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return f?be(f).pipe(se(()=>o)):oe(o)}),se(l=>{let d=Iz(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Z(M({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),lt(()=>{this.events.next(new zu)}),Tz(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),xr(1),lt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new zr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Hc(this.transitionAbortSubject.pipe(lt(l=>{throw l}))),fs(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",vn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ci(l=>{if(c=!0,EM(l))this.events.next(new Br(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Cz(l)?this.events.next(new ma(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new $u(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let f=Tn(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(f instanceof Hu){let{message:g,cancellationCode:m}=$f(this.urlSerializer,f);this.events.next(new Br(o.id,this.urlSerializer.serialize(o.extractedUrl),g,m)),this.events.next(new ma(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(d);let g=r.errorHandler(l);o.resolve(!!g)}}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return qt}))}))}cancelNavigationTransition(r,i,s){let o=new Br(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let r=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return r.toString()!==i?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function _q(n){return n!==Lu}var Eq=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>B(Iq),providedIn:"root"});let n=e;return n})(),i_=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Iq=(()=>{let e=class e extends i_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bh(e)))(s||e)}})(),e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),RM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>B(bq),providedIn:"root"});let n=e;return n})(),bq=(()=>{let e=class e extends RM{constructor(){super(...arguments),this.location=B(ta),this.urlSerializer=B(Qu),this.options=B(Xu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(u_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $r,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mM(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof ga)this.stateMemento=this.createStateMemento();else if(r instanceof Oi)this.rawUrlTree=i.initialUrl;else if(r instanceof Ff){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(i.targetBrowserUrl??s,i)}}else r instanceof zu?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(i.targetBrowserUrl??this.rawUrlTree,i)):r instanceof Br&&(r.code===vn.GuardRejected||r.code===vn.NoDataFromResolver)?this.restoreHistory(i):r instanceof $u?this.restoreHistory(i,!0):r instanceof zr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=r instanceof $r?this.urlSerializer.serialize(r):r;if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=M(M({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=M(M({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Bh(e)))(s||e)}})(),e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Fu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Fu||{});function kM(n,e){n.events.pipe(mt(t=>t instanceof zr||t instanceof Br||t instanceof $u||t instanceof Oi),se(t=>t instanceof zr||t instanceof Oi?Fu.COMPLETE:(t instanceof Br?t.code===vn.Redirect||t.code===vn.SupersededByNewNavigation:!1)?Fu.REDIRECTING:Fu.FAILED),mt(t=>t!==Fu.REDIRECTING),xr(1)).subscribe(()=>{e()})}function Dq(n){throw n}var Cq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},wn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(tf),this.stateManager=B(RM),this.options=B(Xu,{optional:!0})||{},this.pendingTasks=B(_i),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(l_),this.urlSerializer=B(Qu),this.location=B(ta),this.urlHandlingStrategy=B(u_),this._events=new ke,this.errorHandler=this.options.errorHandler||Dq,this.navigated=!1,this.routeReuseStrategy=B(Eq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(qf,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Gf,{optional:!0}),this.eventsSubscription=new tt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Br&&i.code!==vn.Redirect&&i.code!==vn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof zr)this.navigated=!0;else if(i instanceof ma){let a=i.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),l=M({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||_q(s.source)},a);this.scheduleNavigation(c,Lu,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Aq(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Lu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=M({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(a_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=i,d=l?this.currentUrlTree.fragment:a,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=M(M({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=hM(m)}catch{(typeof r[0]!="string"||r[0][0]!=="/")&&(r=[]),g=this.currentUrlTree.root}return fM(g,r,f,d??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Uu(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Lu,null,i)}navigate(r,i={skipLocationChange:!1}){return Sq(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=M({},Cq):i===!1?s=M({},Tq):s=i,Uu(r))return Gx(this.currentUrlTree,r,s);let o=this.parseUrl(r);return Gx(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((g,m)=>{c=g,l=m});let f=this.pendingTasks.add();return kM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(g=>Promise.reject(g))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Sq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ee(4008,!1)}function Aq(n){return!(n instanceof zu)&&!(n instanceof ma)}var Hf=class{};var xq=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(mt(r=>r instanceof zr),Ar(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Yh(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return be(s).pipe(ai())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=oe(null);let o=s.pipe(ut(a=>a===null?oe(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return be([o,a]).pipe(ai())}else return o})}};e.\u0275fac=function(i){return new(i||e)(L(wn),L(af),L(Wt),L(Hf),L(c_))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),NM=new H(""),Mq=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof ga?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof zr?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Oi&&r.code===Of.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Vf&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Vf(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){CS()},e.\u0275prov=$({token:e,factory:e.\u0275fac});let n=e;return n})();function Rq(n){return n.routerState.root}function el(n,e){return{\u0275kind:n,\u0275providers:e}}function kq(){let n=B(fn);return e=>{let t=n.get(Vr);if(e!==t.components[0])return;let r=n.get(wn),i=n.get(PM);n.get(d_)===1&&r.initialNavigation(),n.get(OM,null,ve.Optional)?.setUpPreloading(),n.get(NM,null,ve.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var PM=new H("",{factory:()=>new ke}),d_=new H("",{providedIn:"root",factory:()=>1});function Nq(){return el(2,[{provide:d_,useValue:0},{provide:sf,multi:!0,deps:[fn],useFactory:e=>{let t=e.get(jA,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(wn),s=e.get(PM);kM(i,()=>{r(!0)}),e.get(l_).afterPreactivation=()=>(r(!0),s.closed?oe(void 0):s),i.initialNavigation()}))}}])}function Pq(){return el(3,[{provide:sf,multi:!0,useFactory:()=>{let e=B(wn);return()=>{e.setUpLocationChangeListener()}}},{provide:d_,useValue:2}])}var OM=new H("");function Oq(n){return el(0,[{provide:OM,useExisting:xq},{provide:Hf,useExisting:n}])}function Fq(){return el(8,[Yx,{provide:Gf,useExisting:Yx}])}function Vq(n){let e=[{provide:xM,useValue:yq},{provide:MM,useValue:M({skipNextTransition:!!n?.skipInitialTransition},n)}];return el(9,e)}var eM=new H("ROUTER_FORROOT_GUARD"),Lq=[ta,{provide:Qu,useClass:pa},wn,Zu,{provide:Vt,useFactory:Rq,deps:[wn]},c_,[]],FM=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[Lq,[],{provide:qf,multi:!0,useValue:r},{provide:eM,useFactory:$q,deps:[[wn,new Wo,new Nh]]},{provide:Xu,useValue:i||{}},i?.useHash?Uq():Bq(),jq(),i?.preloadingStrategy?Oq(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?zq(i):[],i?.bindToComponentInputs?Fq().\u0275providers:[],i?.enableViewTransitions?Vq().\u0275providers:[],qq()]}}static forChild(r){return{ngModule:e,providers:[{provide:qf,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(L(eM,8))},e.\u0275mod=St({type:e}),e.\u0275inj=Tt({});let n=e;return n})();function jq(){return{provide:NM,useFactory:()=>{let n=B(qA),e=B(_e),t=B(Xu),r=B(l_),i=B(Qu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Mq(i,r,n,e,t)}}}function Uq(){return{provide:xs,useClass:BA}}function Bq(){return{provide:xs,useClass:Qv}}function $q(n){return"guarded"}function zq(n){return[n.initialNavigation==="disabled"?Pq().\u0275providers:[],n.initialNavigation==="enabledBlocking"?Nq().\u0275providers:[]]}var tM=new H("");function qq(){return[{provide:tM,useFactory:kq},{provide:of,multi:!0,useExisting:tM}]}var ce={production:!0,host:"https://publichome.page",port:"8888",eventBusURL:"https://publichome.page:8888/eventbus/",defaultFirm:"SS",redirect_url:"https://publichome.page/u",client_id:"8c987bdba61457c20417",client_secret:"DONT_SEND_FROM_FRONT_END",gh_default_user_repo:"publichomepage",gh_dr_folder:"my/main",gh_dr_url:"https://raw.githubusercontent.com",gh_api_url:"https://api.github.com",gh_auth_url:"https://github.com/login/oauth/authorize",gh_private_dr_folder:"my",supabaseUrl:"https://hnqbvkzmfdcshdgnhipy.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhucWJ2a3ptZmRjc2hkZ25oaXB5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjkyMjAwOTAsImV4cCI6MjA0NDc5NjA5MH0.3PlLXR6ljTwIWsrMO8QT2fvy0VIGKsXLfahjSgBIN7U",firebaseConfig:{apiKey:"AIzaSyBdEWJQNGtrtL88aX5sE2VGEqYpWLXtpFQ",authDomain:"publichomepage-b872d.firebaseapp.com",projectId:"publichomepage-b872d",storageBucket:"publichomepage-b872d.appspot.com",messagingSenderId:"850538578524",appId:"1:850538578524:web:56c70f38ac285bffd5dc99",measurementId:"G-TRBD0HQFWM"}};var cn=(()=>{let e=class e{constructor(){this._event=new ke,this.event$=this._event.asObservable()}send(r){this._event.next(r)}observable(){return this.event$}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Hq(n,e){n&1&&Fe(0,"app-footer")}var Ne=class Ne{constructor(e,t){this.cdRef=e,this.messaging=t,this.sponserVisible=!0,this.footerVisible=!0,Ne.iconsColorByKey.set("facebook","#3b5998"),Ne.iconsColorByKey.set("youtube","#ed302f"),Ne.iconsColorByKey.set("discord","#7289DA"),Ne.iconsColorByKey.set("linkedin","#0082ca"),Ne.iconsColorByKey.set("github","#bcbcbc"),Ne.iconsColorByKey.set("link","green"),t.event$.subscribe(r=>{let i=r;switch(i.cmd){case"host":i.file=="IaComponent"&&(this.sponserVisible=!1,this.footerVisible=!1);break;default:break}})}loadScript(e){let t=document.body,r=document.createElement("script");r.innerHTML="",r.src=e,r.async=!1,t.appendChild(r)}};Ne.title="Public Homepage",Ne.ghUserLoaded=ce.gh_default_user_repo,Ne.readme_home=`${ce.gh_dr_url}/${ce.gh_default_user_repo}/${ce.gh_dr_folder}/README.md`,Ne.user_contacts=`${ce.gh_dr_url}/${ce.gh_default_user_repo}/${ce.gh_dr_folder}/contacts.md`,Ne.fab_questions_list2=`${ce.gh_dr_url}/${ce.gh_default_user_repo}/${ce.gh_dr_folder}/questions/ds-list2.md`,Ne.YOUR_READ_ME="",Ne.ghUser={name:Ne.title,blog:"/"},Ne.userContext={username:"",status:"0",directory:{},youtube_links:new Set,leetcode_links:new Set,assessment:{}},Ne.INTERNAL_FOLDERS=["my","roadmap","questions","articles","faqs","coding","credits","README.md","contacts.md","assessments"],Ne.homeContext={username:"",status:"0",directory:{},youtube_links:new Set,leetcode_links:new Set,assessment:{}},Ne.homeUser={name:Ne.title,blog:"/"},Ne.navLinks=[{link:"#about",text:"About"},{link:"#projects",text:"Projects"},{link:"#about",text:"Contact"}],Ne.iconsColorByKey=new Map,Ne.contactLinksByKey=new Map,Ne.contactTextsByKey=new Map,Ne.\u0275fac=function(t){return new(t||Ne)(te(qn),te(cn))},Ne.\u0275cmp=He({type:Ne,selectors:[["app-root"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(t,r){t&1&&(Fe(0,"app-navbar")(1,"router-outlet"),vt(2,Hq,1,0,"app-footer",0)),t&2&&(ie(2),pe("ngIf",r.footerVisible))}});var Y=Ne;var Ke=class n{static isMobileBrowser(){let e=navigator.userAgent||window.opera;return!!(/android/i.test(e)||/iPad|iPhone|iPod/.test(e)&&!window.MSStream)}static toString(e){return e==null?"":typeof e=="string"?e:String(e)}static unescape(e){return e=this.toString(e),e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'")}static getTodaysDate(e){let t=new Date().toUTCString();return t=t.replaceAll(" ",e),t.replace(",","")}static getBasePath(e){let t="",r=e.snapshot.url[0];return r&&r.path&&(t=r.path),r.path}static getUrl(e){let t=e.url.indexOf("?");return t>0?e.url.substring(0,t):e.url}static getRouterUrl(e,t){return this.getUrl(e).replace("/"+t,"")}static getRouteParam(e,t){return e.snapshot.paramMap.get(t)}static getQueryParam(e,t){return e.snapshot.queryParamMap.get(t)}static getFirstLineEnd(e){return e.indexOf(`
`)}static getFirstLine(e){let t=e.indexOf(`
`);return t!==-1?e.substring(0,t):e}static getDataValueFromString(e){let t=e.charAt(0);return t=="["?(e=e.replace(/'/g,'"'),e=JSON.parse(e),e):t=="'"||t=="`"||t=='"'?(e=e.replace(/'/g,'"'),JSON.parse(e)):new Number(e)}static getFilesInFolder(e,t){return e.files.filter(r=>r.includes(t))}static getFileNameWithoutCurrentFolder(e,t){return n.getFileName(e.substring(e.indexOf(t)+t.length+1),!0)}static getFileName(e,t=!1){let i=(t?e:e.substring(e.lastIndexOf("/")+1)).replace(/[-_]/g," ");return i.substring(0,i.lastIndexOf("."))}static getFileNameWithCategory(e,t=!1){let r="",i=e.lastIndexOf("/");e.indexOf("/")!=-1&&(r=t?e.substring(0,e.indexOf("/")):e.substring(e.lastIndexOf("/",i-1)+1,i));let a=e.substring(i+1).replace(/[-_]/g," ");return{Category:r,File:a.substring(0,a.lastIndexOf("."))}}static closestHost(e){e=e.substring(e.indexOf("."));let t=new Map;return t.set("raw.githubusercontent","github"),t.set(".githubusercontent","github"),t.set("youtu","youtube"),t.set(".publichome","link"),t.has(e)?t.get(e):e}static getGhUserFilePath(e,t,r=!1){return r?`${ce.gh_api_url}/repos/${e}/${ce.gh_private_dr_folder}/contents/${t}`:`${ce.gh_dr_url}/${e}/${ce.gh_dr_folder}/${t}`}};function Lt(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}function Kf(n,e,t,r){if(typeof t!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce((i,s)=>Kf.bind(null,n,s,i,r),t)():Promise.resolve().then(()=>n.registry[e]?n.registry[e].reduce((i,s)=>s.hook.bind(null,i,r),t)():t(r))}function VM(n,e,t,r){let i=r;n.registry[t]||(n.registry[t]=[]),e==="before"&&(r=(s,o)=>Promise.resolve().then(i.bind(null,o)).then(s.bind(null,o))),e==="after"&&(r=(s,o)=>{let a;return Promise.resolve().then(s.bind(null,o)).then(c=>(a=c,i(a,o))).then(()=>a)}),e==="error"&&(r=(s,o)=>Promise.resolve().then(s.bind(null,o)).catch(a=>i(a,o))),n.registry[t].push({hook:r,orig:i})}function LM(n,e,t){if(!n.registry[e])return;let r=n.registry[e].map(i=>i.orig).indexOf(t);r!==-1&&n.registry[e].splice(r,1)}var jM=Function.bind,UM=jM.bind(jM);function BM(n,e,t){let r=UM(LM,null).apply(null,t?[e,t]:[e]);n.api={remove:r},n.remove=r,["before","error","after","wrap"].forEach(i=>{let s=t?[e,i,t]:[e,i];n[i]=n.api[i]=UM(VM,null).apply(null,s)})}function Gq(){let n=Symbol("Singular"),e={registry:{}},t=Kf.bind(null,e,n);return BM(t,e,n),t}function Wq(){let n={registry:{}},e=Kf.bind(null,n);return BM(e,n),e}var $M={Singular:Gq,Collection:Wq};var Kq="0.0.0-development",Qq=`octokit-endpoint.js/${Kq} ${Lt()}`,Yq={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Qq},mediaType:{format:""}};function Zq(n){return n?Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=n[t],e),{}):{}}function Jq(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function HM(n,e){let t=Object.assign({},n);return Object.keys(e).forEach(r=>{Jq(e[r])?r in n?t[r]=HM(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function zM(n){for(let e in n)n[e]===void 0&&delete n[e];return n}function f_(n,e,t){if(typeof e=="string"){let[i,s]=e.split(" ");t=Object.assign(s?{method:i,url:s}:{url:i},t)}else t=Object.assign({},e);t.headers=Zq(t.headers),zM(t),zM(t.headers);let r=HM(n||{},t);return t.url==="/graphql"&&(n&&n.mediaType.previews?.length&&(r.mediaType.previews=n.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=(r.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),r}function Xq(n,e){let t=/\?/.test(n)?"&":"?",r=Object.keys(e);return r.length===0?n:n+t+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var e4=/\{[^}]+\}/g;function t4(n){return n.replace(/^\W+|\W+$/g,"").split(/,/)}function n4(n){let e=n.match(e4);return e?e.map(t4).reduce((t,r)=>t.concat(r),[]):[]}function qM(n,e){let t={__proto__:null};for(let r of Object.keys(n))e.indexOf(r)===-1&&(t[r]=n[r]);return t}function GM(n){return n.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function Ea(n){return encodeURIComponent(n).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function nl(n,e,t){return e=n==="+"||n==="#"?GM(e):Ea(e),t?Ea(t)+"="+e:e}function _a(n){return n!=null}function h_(n){return n===";"||n==="&"||n==="?"}function r4(n,e,t,r){var i=n[t],s=[];if(_a(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(nl(e,i,h_(e)?t:""));else if(r==="*")Array.isArray(i)?i.filter(_a).forEach(function(o){s.push(nl(e,o,h_(e)?t:""))}):Object.keys(i).forEach(function(o){_a(i[o])&&s.push(nl(e,i[o],o))});else{let o=[];Array.isArray(i)?i.filter(_a).forEach(function(a){o.push(nl(e,a))}):Object.keys(i).forEach(function(a){_a(i[a])&&(o.push(Ea(a)),o.push(nl(e,i[a].toString())))}),h_(e)?s.push(Ea(t)+"="+o.join(",")):o.length!==0&&s.push(o.join(","))}else e===";"?_a(i)&&s.push(Ea(t)):i===""&&(e==="&"||e==="?")?s.push(Ea(t)+"="):i===""&&s.push("");return s}function i4(n){return{expand:s4.bind(null,n)}}function s4(n,e){var t=["+","#",".","/",";","?","&"];return n=n.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let a="",c=[];if(t.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(l){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(l);c.push(r4(e,a,d[1],d[2]||d[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(c.length!==0?a:"")+c.join(o)}else return c.join(",")}else return GM(s)}),n==="/"?n:n.replace(/\/$/,"")}function WM(n){let e=n.method.toUpperCase(),t=(n.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},n.headers),i,s=qM(n,["method","baseUrl","url","headers","request","mediaType"]),o=n4(t);t=i4(t).expand(s),/^http/.test(t)||(t=n.baseUrl+t);let a=Object.keys(n).filter(d=>o.includes(d)).concat("baseUrl"),c=qM(s,a);if(!/application\/octet-stream/i.test(r.accept)&&(n.mediaType.format&&(r.accept=r.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${n.mediaType.format}`)).join(",")),t.endsWith("/graphql")&&n.mediaType.previews?.length)){let d=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=d.concat(n.mediaType.previews).map(f=>{let g=n.mediaType.format?`.${n.mediaType.format}`:"+json";return`application/vnd.github.${f}-preview${g}`}).join(",")}return["GET","HEAD"].includes(e)?t=Xq(t,c):"data"in c?i=c.data:Object.keys(c).length&&(i=c),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:t,headers:r},typeof i<"u"?{body:i}:null,n.request?{request:n.request}:null)}function o4(n,e,t){return WM(f_(n,e,t))}function KM(n,e){let t=f_(n,e),r=o4.bind(null,t);return Object.assign(r,{DEFAULTS:t,defaults:KM.bind(null,t),merge:f_.bind(null,t),parse:WM})}var QM=KM(null,Yq);var qr=class extends Error{name;status;request;response;constructor(e,t,r){super(e),this.name="HttpError",this.status=Number.parseInt(t),Number.isNaN(this.status)&&(this.status=0),"response"in r&&(this.response=r.response);let i=Object.assign({},r.request);r.request.headers.authorization&&(i.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}};var a4="0.0.0-development",c4={headers:{"user-agent":`octokit-request.js/${a4} ${Lt()}`}};function u4(n){if(typeof n!="object"||n===null||Object.prototype.toString.call(n)!=="[object Object]")return!1;let e=Object.getPrototypeOf(n);if(e===null)return!0;let t=Object.prototype.hasOwnProperty.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Function.prototype.call(t)===Function.prototype.call(n)}function YM(n){return b(this,null,function*(){let e=n.request?.fetch||globalThis.fetch;if(!e)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let t=n.request?.log||console,r=n.request?.parseSuccessResponseBody!==!1,i=u4(n.body)||Array.isArray(n.body)?JSON.stringify(n.body):n.body,s=Object.fromEntries(Object.entries(n.headers).map(([f,g])=>[f,String(g)])),o;try{o=yield e(n.url,M({method:n.method,body:i,redirect:n.request?.redirect,headers:s,signal:n.request?.signal},n.body&&{duplex:"half"}))}catch(f){let g="Unknown Error";if(f instanceof Error){if(f.name==="AbortError")throw f.status=500,f;g=f.message,f.name==="TypeError"&&"cause"in f&&(f.cause instanceof Error?g=f.cause.message:typeof f.cause=="string"&&(g=f.cause))}let m=new qr(g,500,{request:n});throw m.cause=f,m}let a=o.status,c=o.url,l={};for(let[f,g]of o.headers)l[f]=g;let d={url:c,status:a,headers:l,data:""};if("deprecation"in l){let f=l.link&&l.link.match(/<([^>]+)>; rel="deprecation"/),g=f&&f.pop();t.warn(`[@octokit/request] "${n.method} ${n.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${g?`. See ${g}`:""}`)}if(a===204||a===205)return d;if(n.method==="HEAD"){if(a<400)return d;throw new qr(o.statusText,a,{response:d,request:n})}if(a===304)throw d.data=yield p_(o),new qr("Not modified",a,{response:d,request:n});if(a>=400)throw d.data=yield p_(o),new qr(l4(d.data),a,{response:d,request:n});return d.data=r?yield p_(o):o.body,d})}function p_(n){return b(this,null,function*(){let e=n.headers.get("content-type");return/application\/json/.test(e)?n.json().catch(()=>n.text()).catch(()=>""):!e||/^text\/|charset=utf-8$/.test(e)?n.text():n.arrayBuffer()})}function l4(n){if(typeof n=="string")return n;if(n instanceof ArrayBuffer)return"Unknown error";if("message"in n){let e="documentation_url"in n?` - ${n.documentation_url}`:"";return Array.isArray(n.errors)?`${n.message}: ${n.errors.map(t=>JSON.stringify(t)).join(", ")}${e}`:`${n.message}${e}`}return`Unknown error: ${JSON.stringify(n)}`}function g_(n,e){let t=n.defaults(e);return Object.assign(function(i,s){let o=t.merge(i,s);if(!o.request||!o.request.hook)return YM(t.parse(o));let a=(c,l)=>YM(t.parse(t.merge(c,l)));return Object.assign(a,{endpoint:t,defaults:g_.bind(null,t)}),o.request.hook(a,o)},{endpoint:t,defaults:g_.bind(null,t)})}var Pe=g_(QM,c4);var d4="0.0.0-development";function h4(n){return`Request failed due to following response errors:
`+n.errors.map(e=>` - ${e.message}`).join(`
`)}var f4=class extends Error{constructor(n,e,t){super(h4(t)),this.request=n,this.headers=e,this.response=t,this.errors=t.errors,this.data=t.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},p4=["method","baseUrl","url","headers","request","query","mediaType"],g4=["query","method","url"],ZM=/\/api\/v3\/?$/;function m4(n,e,t){if(t){if(typeof e=="string"&&"query"in t)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in t)if(g4.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let r=typeof e=="string"?Object.assign({query:e},t):e,i=Object.keys(r).reduce((o,a)=>p4.includes(a)?(o[a]=r[a],o):(o.variables||(o.variables={}),o.variables[a]=r[a],o),{}),s=r.baseUrl||n.endpoint.DEFAULTS.baseUrl;return ZM.test(s)&&(i.url=s.replace(ZM,"/api/graphql")),n(i).then(o=>{if(o.data.errors){let a={};for(let c of Object.keys(o.headers))a[c]=o.headers[c];throw new f4(i,a,o.data)}return o.data.data})}function m_(n,e){let t=n.defaults(e);return Object.assign((i,s)=>m4(t,i,s),{defaults:m_.bind(null,t),endpoint:t.endpoint})}var KZ=m_(Pe,{headers:{"user-agent":`octokit-graphql.js/${d4} ${Lt()}`},method:"POST",url:"/graphql"});function JM(n){return m_(n,{method:"POST",url:"/graphql"})}var y4=/^v1\./,v4=/^ghs_/,w4=/^ghu_/;function _4(n){return b(this,null,function*(){let e=n.split(/\./).length===3,t=y4.test(n)||v4.test(n),r=w4.test(n);return{type:"token",token:n,tokenType:e?"app":t?"installation":r?"user-to-server":"oauth"}})}function E4(n){return n.split(/\./).length===3?`bearer ${n}`:`token ${n}`}function I4(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);return i.headers.authorization=E4(n),e(i)})}var XM=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(_4.bind(null,e),{hook:I4.bind(null,e)})};var y_="6.1.2";var eR=()=>{},b4=console.warn.bind(console),D4=console.error.bind(console),tR=`octokit-core.js/${y_} ${Lt()}`,v_=(()=>{class n{static VERSION=y_;static defaults(t){return class extends this{constructor(...i){let s=i[0]||{};if(typeof t=="function"){super(t(s));return}super(Object.assign({},t,s,s.userAgent&&t.userAgent?{userAgent:`${s.userAgent} ${t.userAgent}`}:null))}}}static plugins=[];static plugin(...t){let r=this.plugins;return class extends this{static plugins=r.concat(t.filter(s=>!r.includes(s)))}}constructor(t={}){let r=new $M.Collection,i={baseUrl:Pe.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},t.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(i.headers["user-agent"]=t.userAgent?`${t.userAgent} ${tR}`:tR,t.baseUrl&&(i.baseUrl=t.baseUrl),t.previews&&(i.mediaType.previews=t.previews),t.timeZone&&(i.headers["time-zone"]=t.timeZone),this.request=Pe.defaults(i),this.graphql=JM(this.request).defaults(i),this.log=Object.assign({debug:eR,info:eR,warn:b4,error:D4},t.log),this.hook=r,t.authStrategy){let o=t,{authStrategy:a}=o,c=en(o,["authStrategy"]),l=a(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:c},t.auth));r.wrap("request",l.hook),this.auth=l}else if(!t.auth)this.auth=()=>b(this,null,function*(){return{type:"unauthenticated"}});else{let a=XM(t.auth);r.wrap("request",a.hook),this.auth=a}let s=this.constructor;for(let a=0;a<s.plugins.length;++a)Object.assign(this,s.plugins[a](this,t))}request;graphql;log;hook;auth}return n})();function C4(n){let e=n.endpoint.DEFAULTS;return/^https:\/\/(api\.)?github\.com$/.test(e.baseUrl)?"https://github.com":e.baseUrl.replace("/api/v3","")}function Qf(n,e,t){return b(this,null,function*(){let r=M({baseUrl:C4(n),headers:{accept:"application/json"}},t),i=yield n(e,r);if("error"in i.data){let s=new qr(`${i.data.error_description} (${i.data.error}, ${i.data.error_uri})`,400,{request:n.endpoint.merge(e,r)});throw s.response=i,s}return i})}function sR(n){return b(this,null,function*(){let e=n.request||Pe,t=yield Qf(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,code:n.code,redirect_uri:n.redirectUrl}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if(n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=nR(i,t.data.expires_in),r.refreshTokenExpiresAt=nR(i,t.data.refresh_token_expires_in)}delete r.scopes}return Z(M({},t),{authentication:r})})}function nR(n,e){return new Date(n+e*1e3).toISOString()}function oR(n){return b(this,null,function*(){let e=n.request||Pe,t={client_id:n.clientId};return"scopes"in n&&Array.isArray(n.scopes)&&(t.scope=n.scopes.join(" ")),Qf(e,"POST /login/device/code",t)})}function w_(n){return b(this,null,function*(){let e=n.request||Pe,t=yield Qf(e,"POST /login/oauth/access_token",{client_id:n.clientId,device_code:n.code,grant_type:"urn:ietf:params:oauth:grant-type:device_code"}),r={clientType:n.clientType,clientId:n.clientId,token:t.data.access_token,scopes:t.data.scope.split(/\s+/).filter(Boolean)};if("clientSecret"in n&&(r.clientSecret=n.clientSecret),n.clientType==="github-app"){if("refresh_token"in t.data){let i=new Date(t.headers.date).getTime();r.refreshToken=t.data.refresh_token,r.expiresAt=rR(i,t.data.expires_in),r.refreshTokenExpiresAt=rR(i,t.data.refresh_token_expires_in)}delete r.scopes}return Z(M({},t),{authentication:r})})}function rR(n,e){return new Date(n+e*1e3).toISOString()}function aR(n){return b(this,null,function*(){let t=yield(n.request||Pe)("POST /applications/{client_id}/token",{headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`},client_id:n.clientId,access_token:n.token}),r={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.token,scopes:t.data.scopes};return t.data.expires_at&&(r.expiresAt=t.data.expires_at),n.clientType==="github-app"&&delete r.scopes,Z(M({},t),{authentication:r})})}function cR(n){return b(this,null,function*(){let e=n.request||Pe,t=yield Qf(e,"POST /login/oauth/access_token",{client_id:n.clientId,client_secret:n.clientSecret,grant_type:"refresh_token",refresh_token:n.refreshToken}),r=new Date(t.headers.date).getTime(),i={clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,token:t.data.access_token,refreshToken:t.data.refresh_token,expiresAt:iR(r,t.data.expires_in),refreshTokenExpiresAt:iR(r,t.data.refresh_token_expires_in)};return Z(M({},t),{authentication:i})})}function iR(n,e){return new Date(n+e*1e3).toISOString()}function uR(n){return b(this,null,function*(){let e=n.request||Pe,t=btoa(`${n.clientId}:${n.clientSecret}`),r=yield e("PATCH /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token}),i={clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:r.data.token,scopes:r.data.scopes};return r.data.expires_at&&(i.expiresAt=r.data.expires_at),n.clientType==="github-app"&&delete i.scopes,Z(M({},r),{authentication:i})})}function lR(n){return b(this,null,function*(){let e=n.request||Pe,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/token",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function dR(n){return b(this,null,function*(){let e=n.request||Pe,t=btoa(`${n.clientId}:${n.clientSecret}`);return e("DELETE /applications/{client_id}/grant",{headers:{authorization:`basic ${t}`},client_id:n.clientId,access_token:n.token})})}function fR(n,e){return b(this,null,function*(){let t=T4(n,e.auth);if(t)return t;let{data:r}=yield oR({clientType:n.clientType,clientId:n.clientId,request:e.request||n.request,scopes:e.auth.scopes||n.scopes});yield n.onVerification(r);let i=yield __(e.request||n.request,n.clientId,n.clientType,r);return n.authentication=i,i})}function T4(n,e){if(e.refresh===!0||!n.authentication)return!1;if(n.clientType==="github-app")return n.authentication;let t=n.authentication,r=("scopes"in e&&e.scopes||n.scopes).join(" "),i=t.scopes.join(" ");return r===i?t:!1}function hR(n){return b(this,null,function*(){yield new Promise(e=>setTimeout(e,n*1e3))})}function __(n,e,t,r){return b(this,null,function*(){try{let i={clientId:e,request:n,code:r.device_code},{authentication:s}=t==="oauth-app"?yield w_(Z(M({},i),{clientType:"oauth-app"})):yield w_(Z(M({},i),{clientType:"github-app"}));return M({type:"token",tokenType:"oauth"},s)}catch(i){if(!i.response)throw i;let s=i.response.data.error;if(s==="authorization_pending")return yield hR(r.interval),__(n,e,t,r);if(s==="slow_down")return yield hR(r.interval+5),__(n,e,t,r);throw i}})}function S4(n,e){return b(this,null,function*(){return fR(n,{auth:e})})}function A4(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);let{token:s}=yield fR(n,{request:e,auth:{type:"oauth"}});return i.headers.authorization=`token ${s}`,e(i)})}var x4="0.0.0-development";function pR(n){let e=n.request||Pe.defaults({headers:{"user-agent":`octokit-auth-oauth-device.js/${x4} ${Lt()}`}}),s=n,{request:t=e}=s,r=en(s,["request"]),i=n.clientType==="github-app"?Z(M({},r),{clientType:"github-app",request:t}):Z(M({},r),{clientType:"oauth-app",request:t,scopes:n.scopes||[]});if(!n.clientId)throw new Error('[@octokit/auth-oauth-device] "clientId" option must be set (https://github.com/octokit/auth-oauth-device.js#usage)');if(!n.onVerification)throw new Error('[@octokit/auth-oauth-device] "onVerification" option must be a function (https://github.com/octokit/auth-oauth-device.js#usage)');return Object.assign(S4.bind(null,i),{hook:A4.bind(null,i)})}var mR="0.0.0-development";function gR(n){return b(this,null,function*(){if("code"in n.strategyOptions){let{authentication:e}=yield sR(Z(M({clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}));return M({type:"token",tokenType:"oauth"},e)}if("onVerification"in n.strategyOptions){let t=yield pR(Z(M({clientType:n.clientType,clientId:n.clientId,onTokenCreated:n.onTokenCreated},n.strategyOptions),{request:n.request}))({type:"oauth"});return M({clientSecret:n.clientSecret},t)}if("token"in n.strategyOptions)return M({type:"token",tokenType:"oauth",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,onTokenCreated:n.onTokenCreated},n.strategyOptions);throw new Error("[@octokit/auth-oauth-user] Invalid strategy options")})}function E_(t){return b(this,arguments,function*(n,e={}){if(n.authentication||(n.authentication=n.clientType==="oauth-app"?yield gR(n):yield gR(n)),n.authentication.invalid)throw new Error("[@octokit/auth-oauth-user] Token is invalid");let r=n.authentication;if("expiresAt"in r&&(e.type==="refresh"||new Date(r.expiresAt)<new Date)){let{authentication:i}=yield cR({clientType:"github-app",clientId:n.clientId,clientSecret:n.clientSecret,refreshToken:r.refreshToken,request:n.request});n.authentication=M({tokenType:"oauth",type:"token"},i)}if(e.type==="refresh"){if(n.clientType==="oauth-app")throw new Error("[@octokit/auth-oauth-user] OAuth Apps do not support expiring tokens");if(!r.hasOwnProperty("expiresAt"))throw new Error("[@octokit/auth-oauth-user] Refresh token missing");yield n.onTokenCreated?.(n.authentication,{type:e.type})}if(e.type==="check"||e.type==="reset"){let i=e.type==="check"?aR:uR;try{let{authentication:s}=yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request});return n.authentication=M({tokenType:"oauth",type:"token"},s),e.type==="reset"&&(yield n.onTokenCreated?.(n.authentication,{type:e.type})),n.authentication}catch(s){throw s.status===404&&(s.message="[@octokit/auth-oauth-user] Token is invalid",n.authentication.invalid=!0),s}}if(e.type==="delete"||e.type==="deleteAuthorization"){let i=e.type==="delete"?lR:dR;try{yield i({clientType:n.clientType,clientId:n.clientId,clientSecret:n.clientSecret,token:n.authentication.token,request:n.request})}catch(s){if(s.status!==404)throw s}return n.authentication.invalid=!0,n.authentication}return n.authentication})}var M4=/\/applications\/[^/]+\/(token|grant)s?/;function rl(n){return n&&M4.test(n)}function R4(i,s,o){return b(this,arguments,function*(n,e,t,r={}){let a=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(a.url))return e(a);if(rl(a.url)){let l=btoa(`${n.clientId}:${n.clientSecret}`);return a.headers.authorization=`basic ${l}`,e(a)}let{token:c}=n.clientType==="oauth-app"?yield E_(Z(M({},n),{request:e})):yield E_(Z(M({},n),{request:e}));return a.headers.authorization="token "+c,e(a)})}function Yf(o){var a=o,{clientId:n,clientSecret:e,clientType:t="oauth-app",request:r=Pe.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${mR} ${Lt()}`}}),onTokenCreated:i}=a,s=en(a,["clientId","clientSecret","clientType","request","onTokenCreated"]);let c=Object.assign({clientType:t,clientId:n,clientSecret:e,onTokenCreated:i,strategyOptions:s,request:r});return Object.assign(E_.bind(null,c),{hook:R4.bind(null,c)})}Yf.VERSION=mR;function k4(n,e){return b(this,null,function*(){if(e.type==="oauth-app")return{type:"oauth-app",clientId:n.clientId,clientSecret:n.clientSecret,clientType:n.clientType,headers:{authorization:`basic ${btoa(`${n.clientId}:${n.clientSecret}`)}`}};if("factory"in e){let i=M(M({},e),n),{type:s}=i,o=en(i,["type"]);return e.factory(o)}let t=M({clientId:n.clientId,clientSecret:n.clientSecret,request:n.request},e);return(n.clientType==="oauth-app"?yield Yf(Z(M({},t),{clientType:n.clientType})):yield Yf(Z(M({},t),{clientType:n.clientType})))()})}function N4(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r);if(/\/login\/(oauth\/access_token|device\/code)$/.test(i.url))return e(i);if(n.clientType==="github-app"&&!rl(i.url))throw new Error(`[@octokit/auth-oauth-app] GitHub Apps cannot use their client ID/secret for basic authentication for endpoints other than "/applications/{client_id}/**". "${i.method} ${i.url}" is not supported.`);let s=btoa(`${n.clientId}:${n.clientSecret}`);i.headers.authorization=`basic ${s}`;try{return yield e(i)}catch(o){throw o.status!==401||(o.message=`[@octokit/auth-oauth-app] "${i.method} ${i.url}" does not support clientId/clientSecret basic authentication.`),o}})}var P4="0.0.0-development";function yR(n){let e=Object.assign({request:Pe.defaults({headers:{"user-agent":`octokit-auth-oauth-app.js/${P4} ${Lt()}`}}),clientType:"oauth-app"},n);return Object.assign(k4.bind(null,e),{hook:N4.bind(null,e)})}function wR(n){return n.includes("-----BEGIN RSA PRIVATE KEY-----")}function _R(n){return n.includes("-----BEGIN OPENSSH PRIVATE KEY-----")}function I_(n){let e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0,i=n.length;r<i;r++)t[r]=n.charCodeAt(r);return e}function ER(n){let e=n.trim().split(`
`).slice(1,-1).join(""),t=atob(e);return I_(t)}function IR(n,e){return`${vR(n)}.${vR(e)}`}function bR(n){for(var e="",t=new Uint8Array(n),r=t.byteLength,i=0;i<r;i++)e+=String.fromCharCode(t[i]);return DR(btoa(e))}function DR(n){return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vR(n){return DR(btoa(JSON.stringify(n)))}var{subtle:b_}=globalThis.crypto;function CR(t){return b(this,arguments,function*({privateKey:n,payload:e}){let r=n;if(wR(r))throw new Error("[universal-github-app-jwt] Private Key is in PKCS#1 format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");if(_R(r))throw new Error("[universal-github-app-jwt] Private Key is in OpenSSH format, but only PKCS#8 is supported. See https://github.com/gr2m/universal-github-app-jwt#private-key-formats");let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},s={alg:"RS256",typ:"JWT"},o=ER(r),a=yield b_.importKey("pkcs8",o,i,!1,["sign"]),c=IR(s,e),l=I_(c),d=yield b_.sign(i.name,a,l),f=bR(d);return`${c}.${f}`})}function D_(r){return b(this,arguments,function*({id:n,privateKey:e,now:t=Math.floor(Date.now()/1e3)}){let i=e.replace(/\\n/g,`
`),s=t-30,o=s+60*10,c=yield CR({privateKey:i,payload:{iat:s,exp:o,iss:n}});return{appId:n,expiration:o,token:c}})}var Ia=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,SR=new Set,C_=typeof process=="object"&&process?process:{},AR=(n,e,t,r)=>{typeof C_.emitWarning=="function"?C_.emitWarning(n,e,t,r):console.error(`[${t}] ${e}: ${n}`)},Zf=globalThis.AbortController,TR=globalThis.AbortSignal;if(typeof Zf>"u"){TR=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,i){this._onabort.push(i)}},Zf=class{constructor(){e()}signal=new TR;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let i of this.signal._onabort)i(r);this.signal.onabort?.(r)}}};let n=C_.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=()=>{n&&(n=!1,AR("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var O4=n=>!SR.has(n),ZJ=Symbol("type"),Vi=n=>n&&n===Math.floor(n)&&n>0&&isFinite(n),xR=n=>Vi(n)?n<=Math.pow(2,8)?Uint8Array:n<=Math.pow(2,16)?Uint16Array:n<=Math.pow(2,32)?Uint32Array:n<=Number.MAX_SAFE_INTEGER?ba:null:null,ba=class extends Array{constructor(e){super(e),this.fill(0)}},T_=class n{heap;length;static#s=!1;static create(e){let t=xR(e);if(!t)return[];n.#s=!0;let r=new n(e,t);return n.#s=!1,r}constructor(e,t){if(!n.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Jf=class n{#s;#u;#g;#m;#M;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#i;#y;#r;#n;#e;#l;#h;#c;#o;#v;#a;#w;#_;#f;#E;#T;#d;static unsafeExposeInternals(e){return{starts:e.#_,ttls:e.#f,sizes:e.#w,keyMap:e.#r,keyList:e.#n,valList:e.#e,next:e.#l,prev:e.#h,get head(){return e.#c},get tail(){return e.#o},free:e.#v,isBackgroundFetch:t=>e.#t(t),backgroundFetch:(t,r,i,s)=>e.#P(t,r,i,s),moveToTail:t=>e.#x(t),indexes:t=>e.#I(t),rindexes:t=>e.#b(t),isStale:t=>e.#p(t)}}get max(){return this.#s}get maxSize(){return this.#u}get calculatedSize(){return this.#y}get size(){return this.#i}get fetchMethod(){return this.#M}get memoMethod(){return this.#R}get dispose(){return this.#g}get disposeAfter(){return this.#m}constructor(e){let{max:t=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:d,noDisposeOnSet:f,noUpdateTTL:g,maxSize:m=0,maxEntrySize:w=0,sizeCalculation:D,fetchMethod:C,memoMethod:P,noDeleteOnFetchRejection:O,noDeleteOnStaleGet:F,allowStaleOnFetchRejection:U,allowStaleOnFetchAbort:Q,ignoreFetchAbort:z}=e;if(t!==0&&!Vi(t))throw new TypeError("max option must be a nonnegative integer");let I=t?xR(t):Array;if(!I)throw new Error("invalid max value: "+t);if(this.#s=t,this.#u=m,this.maxEntrySize=w||this.#u,this.sizeCalculation=D,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(P!==void 0&&typeof P!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=P,C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#M=C,this.#T=!!C,this.#r=new Map,this.#n=new Array(t).fill(void 0),this.#e=new Array(t).fill(void 0),this.#l=new I(t),this.#h=new I(t),this.#c=0,this.#o=0,this.#v=T_.create(t),this.#i=0,this.#y=0,typeof l=="function"&&(this.#g=l),typeof d=="function"?(this.#m=d,this.#a=[]):(this.#m=void 0,this.#a=void 0),this.#E=!!this.#g,this.#d=!!this.#m,this.noDisposeOnSet=!!f,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!O,this.allowStaleOnFetchRejection=!!U,this.allowStaleOnFetchAbort=!!Q,this.ignoreFetchAbort=!!z,this.maxEntrySize!==0){if(this.#u!==0&&!Vi(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!Vi(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#B()}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!F,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=Vi(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!Vi(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#O()}if(this.#s===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#u){let v="LRU_CACHE_UNBOUNDED";O4(v)&&(SR.add(v),AR("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",v,n))}}getRemainingTTL(e){return this.#r.has(e)?1/0:0}#O(){let e=new ba(this.#s),t=new ba(this.#s);this.#f=e,this.#_=t,this.#F=(s,o,a=Ia.now())=>{if(t[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let c=setTimeout(()=>{this.#p(s)&&this.#D(this.#n[s],"expire")},o+1);c.unref&&c.unref()}},this.#S=s=>{t[s]=e[s]!==0?Ia.now():0},this.#C=(s,o)=>{if(e[o]){let a=e[o],c=t[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();let l=s.now-c;s.remainingTTL=a-l}};let r=0,i=()=>{let s=Ia.now();if(this.ttlResolution>0){r=s;let o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=this.#r.get(s);if(o===void 0)return 0;let a=e[o],c=t[o];if(!a||!c)return 1/0;let l=(r||i())-c;return a-l},this.#p=s=>{let o=t[s],a=e[s];return!!a&&!!o&&(r||i())-o>a}}#S=()=>{};#C=()=>{};#F=()=>{};#p=()=>!1;#B(){let e=new ba(this.#s);this.#y=0,this.#w=e,this.#A=t=>{this.#y-=e[t],e[t]=0},this.#V=(t,r,i,s)=>{if(this.#t(r))return 0;if(!Vi(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,t),!Vi(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#k=(t,r,i)=>{if(e[t]=r,this.#u){let s=this.#u-e[t];for(;this.#y>s;)this.#N(!0)}this.#y+=e[t],i&&(i.entrySize=r,i.totalCalculatedSize=this.#y)}}#A=e=>{};#k=(e,t,r)=>{};#V=(e,t,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#I({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#o;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#c));)t=this.#h[t]}*#b({allowStale:e=this.allowStale}={}){if(this.#i)for(let t=this.#c;!(!this.#L(t)||((e||!this.#p(t))&&(yield t),t===this.#o));)t=this.#l[t]}#L(e){return e!==void 0&&this.#r.get(this.#n[e])===e}*entries(){for(let e of this.#I())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(let e of this.#b())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#t(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(let e of this.#I()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*rkeys(){for(let e of this.#b()){let t=this.#n[e];t!==void 0&&!this.#t(this.#e[e])&&(yield t)}}*values(){for(let e of this.#I())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(let e of this.#b())this.#e[e]!==void 0&&!this.#t(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#n[r],this))return this.get(this.#n[r],t)}}forEach(e,t=this){for(let r of this.#I()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}rforEach(e,t=this){for(let r of this.#b()){let i=this.#e[r],s=this.#t(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#n[r],this)}}purgeStale(){let e=!1;for(let t of this.#b({allowStale:!0}))this.#p(t)&&(this.#D(this.#n[t],"expire"),e=!0);return e}info(e){let t=this.#r.get(e);if(t===void 0)return;let r=this.#e[t],i=this.#t(r)?r.__staleWhileFetching:r;if(i===void 0)return;let s={value:i};if(this.#f&&this.#_){let o=this.#f[t],a=this.#_[t];if(o&&a){let c=o-(Ia.now()-a);s.ttl=c,s.start=Date.now()}}return this.#w&&(s.size=this.#w[t]),s}dump(){let e=[];for(let t of this.#I({allowStale:!0})){let r=this.#n[t],i=this.#e[t],s=this.#t(i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;let o={value:s};if(this.#f&&this.#_){o.ttl=this.#f[t];let a=Ia.now()-this.#_[t];o.start=Math.floor(Date.now()-a)}this.#w&&(o.size=this.#w[t]),e.unshift([r,o])}return e}load(e){this.clear();for(let[t,r]of e){if(r.start){let i=Date.now()-r.start;r.start=Ia.now()-i}this.set(t,r.value,r)}}set(e,t,r={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r,{noUpdateTTL:l=this.noUpdateTTL}=r,d=this.#V(e,t,r.size||0,a);if(this.maxEntrySize&&d>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let f=this.#i===0?void 0:this.#r.get(e);if(f===void 0)f=this.#i===0?this.#o:this.#v.length!==0?this.#v.pop():this.#i===this.#s?this.#N(!1):this.#i,this.#n[f]=e,this.#e[f]=t,this.#r.set(e,f),this.#l[this.#o]=f,this.#h[f]=this.#o,this.#o=f,this.#i++,this.#k(f,d,c),c&&(c.set="add"),l=!1;else{this.#x(f);let g=this.#e[f];if(t!==g){if(this.#T&&this.#t(g)){g.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=g;m!==void 0&&!o&&(this.#E&&this.#g?.(m,e,"set"),this.#d&&this.#a?.push([m,e,"set"]))}else o||(this.#E&&this.#g?.(g,e,"set"),this.#d&&this.#a?.push([g,e,"set"]));if(this.#A(f),this.#k(f,d,c),this.#e[f]=t,c){c.set="replace";let m=g&&this.#t(g)?g.__staleWhileFetching:g;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!this.#f&&this.#O(),this.#f&&(l||this.#F(f,i,s),c&&this.#C(c,f)),!o&&this.#d&&this.#a){let g=this.#a,m;for(;m=g?.shift();)this.#m?.(...m)}return this}pop(){try{for(;this.#i;){let e=this.#e[this.#c];if(this.#N(!0),this.#t(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#d&&this.#a){let e=this.#a,t;for(;t=e?.shift();)this.#m?.(...t)}}}#N(e){let t=this.#c,r=this.#n[t],i=this.#e[t];return this.#T&&this.#t(i)?i.__abortController.abort(new Error("evicted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(i,r,"evict"),this.#d&&this.#a?.push([i,r,"evict"])),this.#A(t),e&&(this.#n[t]=void 0,this.#e[t]=void 0,this.#v.push(t)),this.#i===1?(this.#c=this.#o=0,this.#v.length=0):this.#c=this.#l[t],this.#r.delete(r),this.#i--,t}has(e,t={}){let{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=t,s=this.#r.get(e);if(s!==void 0){let o=this.#e[s];if(this.#t(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(s))i&&(i.has="stale",this.#C(i,s));else return r&&this.#S(s),i&&(i.has="hit",this.#C(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:r=this.allowStale}=t,i=this.#r.get(e);if(i===void 0||!r&&this.#p(i))return;let s=this.#e[i];return this.#t(s)?s.__staleWhileFetching:s}#P(e,t,r,i){let s=t===void 0?void 0:this.#e[t];if(this.#t(s))return s;let o=new Zf,{signal:a}=r;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let c={signal:o.signal,options:r,context:i},l=(D,C=!1)=>{let{aborted:P}=o.signal,O=r.ignoreFetchAbort&&D!==void 0;if(r.status&&(P&&!C?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,O&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),P&&!O&&!C)return f(o.signal.reason);let F=m;return this.#e[t]===m&&(D===void 0?F.__staleWhileFetching?this.#e[t]=F.__staleWhileFetching:this.#D(e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,D,c.options))),D},d=D=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=D),f(D)),f=D=>{let{aborted:C}=o.signal,P=C&&r.allowStaleOnFetchAbort,O=P||r.allowStaleOnFetchRejection,F=O||r.noDeleteOnFetchRejection,U=m;if(this.#e[t]===m&&(!F||U.__staleWhileFetching===void 0?this.#D(e,"fetch"):P||(this.#e[t]=U.__staleWhileFetching)),O)return r.status&&U.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),U.__staleWhileFetching;if(U.__returned===U)throw D},g=(D,C)=>{let P=this.#M?.(e,s,c);P&&P instanceof Promise&&P.then(O=>D(O===void 0?void 0:O),C),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(D(void 0),r.allowStaleOnFetchAbort&&(D=O=>l(O,!0)))})};r.status&&(r.status.fetchDispatched=!0);let m=new Promise(g).then(l,d),w=Object.assign(m,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,w,Z(M({},c.options),{status:void 0})),t=this.#r.get(e)):this.#e[t]=w,w}#t(e){if(!this.#T)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Zf}fetch(r){return b(this,arguments,function*(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:l=0,sizeCalculation:d=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:g=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:m=this.allowStaleOnFetchRejection,ignoreFetchAbort:w=this.ignoreFetchAbort,allowStaleOnFetchAbort:D=this.allowStaleOnFetchAbort,context:C,forceRefresh:P=!1,status:O,signal:F}=t;if(!this.#T)return O&&(O.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:O});let U={allowStale:i,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:c,size:l,sizeCalculation:d,noUpdateTTL:f,noDeleteOnFetchRejection:g,allowStaleOnFetchRejection:m,allowStaleOnFetchAbort:D,ignoreFetchAbort:w,status:O,signal:F},Q=this.#r.get(e);if(Q===void 0){O&&(O.fetch="miss");let z=this.#P(e,Q,U,C);return z.__returned=z}else{let z=this.#e[Q];if(this.#t(z)){let S=i&&z.__staleWhileFetching!==void 0;return O&&(O.fetch="inflight",S&&(O.returnedStale=!0)),S?z.__staleWhileFetching:z.__returned=z}let I=this.#p(Q);if(!P&&!I)return O&&(O.fetch="hit"),this.#x(Q),s&&this.#S(Q),O&&this.#C(O,Q),z;let v=this.#P(e,Q,U,C),T=v.__staleWhileFetching!==void 0&&i;return O&&(O.fetch=I?"stale":"refresh",T&&I&&(O.returnedStale=!0)),T?v.__staleWhileFetching:v.__returned=v}})}forceFetch(r){return b(this,arguments,function*(e,t={}){let i=yield this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i})}memo(e,t={}){let r=this.#R;if(!r)throw new Error("no memoMethod provided to constructor");let l=t,{context:i,forceRefresh:s}=l,o=en(l,["context","forceRefresh"]),a=this.get(e,o);if(!s&&a!==void 0)return a;let c=r(e,a,{options:o,context:i});return this.set(e,c,o),c}get(e,t={}){let{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,a=this.#r.get(e);if(a!==void 0){let c=this.#e[a],l=this.#t(c);return o&&this.#C(o,a),this.#p(a)?(o&&(o.get="stale"),l?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(this.#x(a),i&&this.#S(a),c))}else o&&(o.get="miss")}#j(e,t){this.#h[t]=e,this.#l[e]=t}#x(e){e!==this.#o&&(e===this.#c?this.#c=this.#l[e]:this.#j(this.#h[e],this.#l[e]),this.#j(this.#o,e),this.#o=e)}delete(e){return this.#D(e,"delete")}#D(e,t){let r=!1;if(this.#i!==0){let i=this.#r.get(e);if(i!==void 0)if(r=!0,this.#i===1)this.#U(t);else{this.#A(i);let s=this.#e[i];if(this.#t(s)?s.__abortController.abort(new Error("deleted")):(this.#E||this.#d)&&(this.#E&&this.#g?.(s,e,t),this.#d&&this.#a?.push([s,e,t])),this.#r.delete(e),this.#n[i]=void 0,this.#e[i]=void 0,i===this.#o)this.#o=this.#h[i];else if(i===this.#c)this.#c=this.#l[i];else{let o=this.#h[i];this.#l[o]=this.#l[i];let a=this.#l[i];this.#h[a]=this.#h[i]}this.#i--,this.#v.push(i)}}if(this.#d&&this.#a?.length){let i=this.#a,s;for(;s=i?.shift();)this.#m?.(...s)}return r}clear(){return this.#U("delete")}#U(e){for(let t of this.#b({allowStale:!0})){let r=this.#e[t];if(this.#t(r))r.__abortController.abort(new Error("deleted"));else{let i=this.#n[t];this.#E&&this.#g?.(r,i,e),this.#d&&this.#a?.push([r,i,e])}}if(this.#r.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#f&&this.#_&&(this.#f.fill(0),this.#_.fill(0)),this.#w&&this.#w.fill(0),this.#c=0,this.#o=0,this.#v.length=0,this.#y=0,this.#i=0,this.#d&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#m?.(...r)}}};function Xf(r){return b(this,arguments,function*({appId:n,privateKey:e,timeDifference:t}){try{let i=yield D_({id:n,privateKey:e,now:t&&Math.floor(Date.now()/1e3)+t});return{type:"app",token:i.token,appId:i.appId,expiresAt:new Date(i.expiration*1e3).toISOString()}}catch(i){throw e==="-----BEGIN RSA PRIVATE KEY-----"?new Error("The 'privateKey` option contains only the first line '-----BEGIN RSA PRIVATE KEY-----'. If you are setting it using a `.env` file, make sure it is set on a single line with newlines replaced by '\n'"):i}})}function F4(){return new Jf({max:15e3,ttl:1e3*60*59})}function V4(n,e){return b(this,null,function*(){let t=RR(e),r=yield n.get(t);if(!r)return;let[i,s,o,a,c,l]=r.split("|"),d=e.permissions||c.split(/,/).reduce((f,g)=>(/!$/.test(g)?f[g.slice(0,-1)]="write":f[g]="read",f),{});return{token:i,createdAt:s,expiresAt:o,permissions:d,repositoryIds:e.repositoryIds,repositoryNames:e.repositoryNames,singleFileName:l,repositorySelection:a}})}function L4(n,e,t){return b(this,null,function*(){let r=RR(e),i=e.permissions?"":Object.keys(t.permissions).map(o=>`${o}${t.permissions[o]==="write"?"!":""}`).join(","),s=[t.token,t.createdAt,t.expiresAt,t.repositorySelection,i,t.singleFileName].join("|");yield n.set(r,s)})}function RR({installationId:n,permissions:e={},repositoryIds:t=[],repositoryNames:r=[]}){let i=Object.keys(e).sort().map(a=>e[a]==="read"?a:`${a}!`).join(","),s=t.sort().join(","),o=r.join(",");return[n,s,o,i].filter(Boolean).join("|")}function MR({installationId:n,token:e,createdAt:t,expiresAt:r,repositorySelection:i,permissions:s,repositoryIds:o,repositoryNames:a,singleFileName:c}){return Object.assign({type:"token",tokenType:"installation",token:e,installationId:n,permissions:s,createdAt:t,expiresAt:r,repositorySelection:i},o?{repositoryIds:o}:null,a?{repositoryNames:a}:null,c?{singleFileName:c}:null)}function kR(n,e,t){return b(this,null,function*(){let r=Number(e.installationId||n.installationId);if(!r)throw new Error("[@octokit/auth-app] installationId option is required for installation authentication.");if(e.factory){let O=M(M({},n),e),{type:F,factory:U,oauthApp:Q}=O,z=en(O,["type","factory","oauthApp"]);return U(z)}let i=Object.assign({installationId:r},e);if(!e.refresh){let F=yield V4(n.cache,i);if(F){let{token:U,createdAt:Q,expiresAt:z,permissions:I,repositoryIds:v,repositoryNames:_,singleFileName:T,repositorySelection:S}=F;return MR({installationId:r,token:U,createdAt:Q,expiresAt:z,permissions:I,repositorySelection:S,repositoryIds:v,repositoryNames:_,singleFileName:T})}}let s=yield Xf(n),o=t||n.request,{data:{token:a,expires_at:c,repositories:l,permissions:d,repository_selection:f,single_file:g}}=yield o("POST /app/installations/{installation_id}/access_tokens",{installation_id:r,repository_ids:e.repositoryIds,repositories:e.repositoryNames,permissions:e.permissions,mediaType:{previews:["machine-man"]},headers:{authorization:`bearer ${s.token}`}}),m=d||{},w=f||"all",D=l?l.map(F=>F.id):void 0,C=l?l.map(F=>F.name):void 0,P=new Date().toISOString();return yield L4(n.cache,i,{token:a,createdAt:P,expiresAt:c,repositorySelection:w,permissions:m,repositoryIds:D,repositoryNames:C,singleFileName:g}),MR({installationId:r,token:a,createdAt:P,expiresAt:c,repositorySelection:w,permissions:m,repositoryIds:D,repositoryNames:C,singleFileName:g})})}function j4(n,e){return b(this,null,function*(){switch(e.type){case"app":return Xf(n);case"oauth-app":return n.oauthApp({type:"oauth-app"});case"installation":return kR(n,Z(M({},e),{type:"installation"}));case"oauth-user":return n.oauthApp(e);default:throw new Error(`Invalid auth type: ${e.type}`)}})}var U4=["/app","/app/hook/config","/app/hook/deliveries","/app/hook/deliveries/{delivery_id}","/app/hook/deliveries/{delivery_id}/attempts","/app/installations","/app/installations/{installation_id}","/app/installations/{installation_id}/access_tokens","/app/installations/{installation_id}/suspended","/app/installation-requests","/marketplace_listing/accounts/{account_id}","/marketplace_listing/plan","/marketplace_listing/plans","/marketplace_listing/plans/{plan_id}/accounts","/marketplace_listing/stubbed/accounts/{account_id}","/marketplace_listing/stubbed/plan","/marketplace_listing/stubbed/plans","/marketplace_listing/stubbed/plans/{plan_id}/accounts","/orgs/{org}/installation","/repos/{owner}/{repo}/installation","/users/{username}/installation"];function B4(n){let t=`^(?:${n.map(r=>r.split("/").map(i=>i.startsWith("{")?"(?:.+?)":i).join("/")).map(r=>`(?:${r})`).join("|")})$`;return new RegExp(t,"i")}var $4=B4(U4);function z4(n){return!!n&&$4.test(n.split("?")[0])}var q4=5*1e3;function H4(n){return!(n.message.match(/'Expiration time' claim \('exp'\) must be a numeric value representing the future time at which the assertion expires/)||n.message.match(/'Issued at' claim \('iat'\) must be an Integer representing the time that the assertion was issued/))}function G4(n,e,t,r){return b(this,null,function*(){let i=e.endpoint.merge(t,r),s=i.url;if(/\/login\/oauth\/access_token$/.test(s))return e(i);if(z4(s.replace(e.endpoint.DEFAULTS.baseUrl,""))){let{token:c}=yield Xf(n);i.headers.authorization=`bearer ${c}`;let l;try{l=yield e(i)}catch(d){if(H4(d)||typeof d.response.headers.date>"u")throw d;let f=Math.floor((Date.parse(d.response.headers.date)-Date.parse(new Date().toString()))/1e3);n.log.warn(d.message),n.log.warn(`[@octokit/auth-app] GitHub API time and system time are different by ${f} seconds. Retrying request with the difference accounted for.`);let{token:g}=yield Xf(Z(M({},n),{timeDifference:f}));return i.headers.authorization=`bearer ${g}`,e(i)}return l}if(rl(s)){let c=yield n.oauthApp({type:"oauth-app"});return i.headers.authorization=c.headers.authorization,e(i)}let{token:o,createdAt:a}=yield kR(n,{},e.defaults({baseUrl:i.baseUrl}));return i.headers.authorization=`token ${o}`,NR(n,e,i,a)})}function NR(n,e,t,r,i=0){return b(this,null,function*(){let s=+new Date-+new Date(r);try{return yield e(t)}catch(o){if(o.status!==401)throw o;if(s>=q4)throw i>0&&(o.message=`After ${i} retries within ${s/1e3}s of creating the installation access token, the response remains 401. At this point, the cause may be an authentication problem or a system outage. Please check https://www.githubstatus.com for status information`),o;++i;let a=i*1e3;return n.log.warn(`[@octokit/auth-app] Retrying after 401 response to account for token replication delay (retry: ${i}, wait: ${a/1e3}s)`),yield new Promise(c=>setTimeout(c,a)),NR(n,e,t,r,i)}})}var W4="7.1.1";function S_(n){if(!n.appId)throw new Error("[@octokit/auth-app] appId option is required");if(!n.privateKey)throw new Error("[@octokit/auth-app] privateKey option is required");if("installationId"in n&&!n.installationId)throw new Error("[@octokit/auth-app] installationId is set to a falsy value");let e=Object.assign({warn:console.warn.bind(console)},n.log),t=n.request||Pe.defaults({headers:{"user-agent":`octokit-auth-app.js/${W4} ${Lt()}`}}),r=Object.assign({request:t,cache:F4()},n,n.installationId?{installationId:Number(n.installationId)}:{},{log:e,oauthApp:yR({clientType:"github-app",clientId:n.clientId||"",clientSecret:n.clientSecret||"",request:t})});return Object.assign(j4.bind(null,r),{hook:G4.bind(null,r)})}var Mn=(()=>{let e=class e{constructor(r){this._http=r,this.applicationId="1012063",this.privateKey=`-----BEGIN PRIVATE KEY-----
MIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCnxYEcKaEsyRx7
8VicDgz+XwMOECEVLtMWwmfn0bdilPKLVTJRZF12Hz0BAckilc3nW7tTAikDpXyw
efTnmt9DQhI6mAlpfIx8l7yNoucj1xxOzclZy6noOke9CSjhu8UhcrRd6XoYGvQH
vKjttln1tv0EgyIREnAbHNPhK8b1SpHE/MzaJs9yCNU4lidwmHEl/hw+lzrUp+O2
7Gi38WLJEaycChXtq94b6z5866cqgi0pPz+FTQNHlRg2rei2XGfb7pHxzQPkouS1
Cg+3NZ15cPv9jsAk15HRMr/1fV8xk4JZ+V403zlCAl6gKaogfeZbC+3OTPNKvw4o
HVHlcSYPAgMBAAECggEAGjDcCgB5t9shhjvUIHCVGLTObkiYUY1AyOHKhMcZgNtN
zfCb7VbkvEb+KAUWWD7YqRCJ+thwfLA9+fLgB7QGvKI45ErN1VjrOZwahGX0/YRc
V/UKROlleep3PoyKhEri6GjWvX5wYAj9JaQPHyUDgDdz4ltyWwXs2F60uQczhSFB
NIeF55lyN3/cqBUHNQalrlD64LXwZLzviS8dpTIH1Qsp+S7TJgGM9NgeQ8yYiyzz
tduux+gu6IxgL1aOgBiBonRFZdfAySws1mUhYvPWr1fzn64kaYsiDqXwCdmKmzxx
+RbXGWvKX/wctN6454E1UlTPWVVOx4SHZ4Yf03ulWQKBgQDb4ZQqHb0chwFvHTIW
pIc5DMmepQ2+/syxXumjrNMpi3sltmnGNu/n7DebuiyZOaFlHrDKLcC4WO/ILPe6
O1A/LjgliTsHiQYmaB/XRj5iy6pGYra0esxFuhWZeYTJ00yBwpWGpAh91TvpxGcR
PweOToPvq+nZi6tgVbMRu5gUkwKBgQDDVJ1yPYSAhnBDGkXU8XQp1jrKkzxwO7Zo
UDAJ69LbTmC6rw7s4ZRT6KmS/7p3g7HXz1HQaEN7u1fzie5I8AZvhE21y42w9+z2
r41rW+Q/IM+3102L6Okm9o91aLCIozyWgoBWXuXM67/oj4HlXgTZOVeiGZAcwN7o
2PUjkrpyFQKBgEts4RdlZiawBQTpnfH4dE5UnaDm+4UmAG9joH+93B2nNBImtbgB
xl/nPtgTkBLrmvqGAZ0I/s/96hrfmgbvK8LQhwARSAd4sHxiQXHmLaZUOM+2MvhM
G2BbyecAsVVOPzNP3Vz3TdZkXA3/il93II9nTYjcjvZKG/qKy0ds82kzAoGBAIAo
KTFGKYSGMGvmdgDT9upoM6Sr29CrbO+eBRbNUkgvcYmqx/klvEMdeP0Iqlg14N5+
mOhLMFOjRH52dhAG48IRJUds6Wc+E4x6/Cd/YA8HQSIWsjtksmytAsz+xiywJVV/
BCMnGlFMMFqupYRPHpFDbTre2M30wYw2pQgVAh1NAoGBANDbSx25LnRwUlgsA1Go
c6YXlZ+ggQfjYfCjMjj26I/nLzxCQe3Ghw/dSI0IVQ6kjFWkNVllEaA7ESxMKAtq
W+9Tc4e7MN5sqQoTIos0um2l+7BJaft/14WB1GxQiK2grgff8BtiQQuUORBl/F4g
D2tNDflWM97viVfizU9grXkW
-----END PRIVATE KEY-----`,this.installationId="Iv23li7aCJeV1yPt8rcr",this.accessToken=null,this.fetchOptions={},this.httpHeaders=new Gn({Accept:"application/json"}),this.ghUser={authenticated:!1,name:"",login:"",avatar_url:"/assets/github-logo.png",email:""},this.token={access_token:"",scope:"",token_type:""},this.octokit=new v_({authStrategy:S_,auth:{appId:this.applicationId,privateKey:this.privateKey}})}getInstallationId(r){return b(this,null,function*(){this.installationId="";try{let i=yield this.octokit.request("GET /repos/{owner}/my/installation",{owner:r,repo:"my"});return i.status==200?(this.installationId=i.data.id,this.octokit=new v_({authStrategy:S_,auth:{appId:this.applicationId,privateKey:this.privateKey,installationId:this.installationId}}),this.installationId):null}catch(i){console.debug("Error fetching InstallationId :",i)}return null})}getJwtToken(r,i=""){return b(this,null,function*(){let s=null;if(r)try{yield this.getInstallationId(r)}catch(o){console.debug("Error fetching InstallationId :",o)}if(this.installationId)try{let o=yield this.octokit.auth({type:"app"});o.token&&(this.fetchOptions={headers:{Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${o.token}`,"X-GitHub-Api-Version":"2022-11-28"}},s=o.token)}catch(o){throw console.error("Error fetching JWT:",o),o}return s})}getAccessToken(r){return b(this,null,function*(){if(this.accessToken=null,this.installationId)try{let i=yield fetch(`https://api.github.com/app/installations/${this.installationId}/access_tokens`,Z(M({},this.fetchOptions),{method:"POST"}));if(i.ok){let s=yield i.json();this.fetchOptions={headers:{"X-GitHub-Api-Version":"2022-11-28",Accept:"application/vnd.github.v3.raw",Authorization:`Bearer ${s.token}`}},this.accessToken=s.token}return this.accessToken}catch(i){throw console.error("Error fetching AccessToken:",i),i}return this.accessToken})}getInstalledContent(r,i="README.md"){return b(this,null,function*(){let s="Not Found";try{s=yield this.get(`repos/${r}/my/contents/${i}`)}catch(o){console.error("Error fetching repository:",o)}return s})}setToken(r){this.token=r}getSavedToken(){return this.ghUser.authenticated?this.token.access_token:""}getSavedUser(){return this.ghUser}isAuthenticated(){return this.ghUser.authenticated}setUserAuthenticated(r){this.ghUser.authenticated=r}setEmail(r){this.ghUser.email=r}getEmail(){return this.ghUser.email}setName(r){this.ghUser.name=r}setUserId(r){this.ghUser.login=r}getUserId(){return this.ghUser.login}setAvatar(r){return this.ghUser.avatar_url=r}creatHttpHeaders(r){return this.httpHeaders.append("Authorization","Bearer "+r)}getAuthUrl(){return`${ce.gh_auth_url}?client_id=${ce.client_id}`}getInstalledAccessToken(){return this.accessToken}hasInstalledAccessToken(){return this.accessToken!=null}getToken(r){return ce.production?this._http.get(`${ce.host}/ghproxy.php?code=${r}`):this._http.get(`${ce.host}/token/ghproxy.php?code=${r}`)}getUser(r){return this._http.get(`${ce.gh_api_url}/user`,{headers:this.creatHttpHeaders(r)})}getInternalArticleContent(r,i=""){return r=i?`${i}/${r}`:r,this.getMdFileContent(ce.gh_default_user_repo,r)}getReadMeContent(r){let i=`${ce.gh_dr_url}/${r}/${ce.gh_dr_folder}/README.md`;return fetch(i,this.fetchOptions).then(s=>s.ok?s.text():Promise.reject("File not found"))}getMdFileContent(r,i){i=i.replace(/^\/?/,"")+(i.endsWith(".md")?"":".md");let s=Ke.getGhUserFilePath(r,i,this.accessToken!=null);return fetch(s,this.fetchOptions).then(o=>o.ok?o.text():Promise.reject("File not found"))}getFileContent(r,i,s){return s=i?`${i}/${s}`:s,this.getMdFileContent(r,s)}getLocalFileContent(r){return fetch(r,this.fetchOptions).then(i=>i.ok?i:Promise.reject("File not found"))}getGhDirectoryContents(r,i=!0,s=""){let o=`${ce.gh_api_url}/repos/${r}/my/git/trees/main`;i||(o=`${ce.gh_api_url}/repos/${r}/my/contents/${s}?ref=main`),o+=i?"?recursive=1":"";let a={root:"/",files:[],folders:[]};return fetch(o,this.fetchOptions).then(c=>c.ok?c.json():Promise.reject("Directory not found")).then(c=>{let l;if(c.tree?l=c.tree:l=c,l&&l.forEach(d=>{if(d.type==="tree"||d.type==="dir"){let f=d.path.split("/")[0];a.folders.includes(f)||a.folders.push(f)}else(d.type==="file"||d.type==="blob"&&d.path!=".DS_Store")&&a.files.push(d.path)}),s){let d=Ke.getFilesInFolder(a,s);a.root=s,a.files=d}return Promise.resolve(a)}).catch(c=>Promise.reject("Folder not found"))}getFirstCertificate(r="certificates"){return this.getGhDirectoryContents(ce.gh_default_user_repo,!1,r).then(i=>{let s=i;return s.files&&s.files.length==0?Promise.reject(""):Promise.resolve(`${ce.gh_dr_url}/${ce.gh_default_user_repo}/${ce.gh_dr_folder}/${s.files[0]}`)})}get(r){return fetch(`${ce.gh_api_url}/${r}`,this.fetchOptions).then(i=>i.ok?i.text():Promise.reject("File not found"))}};e.\u0275fac=function(i){return new(i||e)(L(Rs))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var PR=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=He({type:e,selectors:[["app-webfront-jumbotron"]],decls:39,vars:0,consts:[[1,"masthead"],[1,"container","px-4","px-lg-5","d-flex","h-100","align-items-center","justify-content-center"],[1,"d-flex","justify-content-center"],[1,"text-center"],[1,"mx-auto","my-0","text-uppercase"],[1,"text-white-50","mx-auto","mt-2","mb-5"],["href","#about",1,"btn","btn-primary"],["id","about",1,"about-section","text-center"],[1,"container","px-lg-5"],[1,"row","justify-content-center"],[1,"col-lg-8"],[1,"text-white","mb-4"],[1,"text-white-50"],[1,"row","py-4","justify-content-center"],["id","contactForm","data-sb-form-api-token","API_TOKEN",1,"form-signup"],[1,"row","input-group-newsletter","justify-content-center"],[1,"col-6"],["id","emailAddress","type","email","placeholder","Enter email address...","aria-label","Enter email address...","data-sb-validations","required,email",1,"form-control"],[1,"col-auto"],["id","submitButton","type","Submit","onclick","sendMessage()",1,"btn","btn-primary"],["data-sb-feedback","emailAddress:required",1,"invalid-feedback","mt-2"],["data-sb-feedback","emailAddress:email",1,"invalid-feedback","mt-2"],["id","submitSuccessMessage",1,"d-none"],[1,"text-center","mb-3","mt-2","text-white"],[1,"fw-bolder"],["href",""],["id","submitErrorMessage",1,"d-none"],[1,"text-center","text-danger","mb-3","mt-2"]],template:function(i,s){i&1&&(K(0,"header",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),ne(5,"Own your own Homepage"),J(),K(6,"h2",5),ne(7,"Want to Own a Public Homepage ?"),J(),K(8,"a",6),ne(9,"Get Started"),J()()()()(),K(10,"section",7)(11,"div",8)(12,"div",9)(13,"div",10)(14,"h2",11),ne(15,"Your PublicHome.Page is Your secret sauce!"),J(),K(16,"div",12),ne(17," Boost your business or portfolio's visibility to millions with a strong public presence. It's easy to get started ! Contact us today and elevate your brand. "),J()()(),K(18,"div",13)(19,"form",14)(20,"div",15)(21,"div",16),Fe(22,"input",17),J(),K(23,"div",18)(24,"button",19),ne(25,"Notify"),J()()(),K(26,"div",20),ne(27,"An email is required."),J(),K(28,"div",21),ne(29,"Email is not valid."),J(),K(30,"div",22)(31,"div",23)(32,"div",24),ne(33,"Thank you for your interest!"),J(),Fe(34,"br")(35,"a",25),J()(),K(36,"div",26)(37,"div",27),ne(38,"Error sending message!"),J()()()()()())},dependencies:[qx,Ux,Aw]});let n=e;return n})();var OR=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.homePageFile=Y.readme_home;let o=s.snapshot.url[0];o&&o.path=="questions"&&(this.homePageFile=Y.fab_questions_list2)}};e.\u0275fac=function(i){return new(i||e)(te(Mn),te(wn),te(Vt))},e.\u0275cmp=He({type:e,selectors:[["app-webfront-main"]],decls:5,vars:1,consts:[[1,"container"],["id","questions",1,"row","justify-content-center"],[1,""],[1,"container",3,"src"]],template:function(i,s){i&1&&(K(0,"div",0)(1,"div",1)(2,"div",2)(3,"markdown",3),ne(4,`
            `),J()()()()),i&2&&(ie(3),pe("src",s.homePageFile))},dependencies:[Pi]});let n=e;return n})();var FR=(()=>{let e=class e{constructor(r,i,s){this.metaService=r,this.githubService=i,this.messaging=s,i.get("users/"+ce.gh_default_user_repo).then(o=>{Y.homeUser=JSON.parse(o),this.initialiseHomeContext(ce.gh_default_user_repo)})}ngOnInit(){this.metaService.addTag({name:"keywords",content:"My Brand, Your brand, Your landing page, Resume Builder, Resume"}),this.metaService.addTag({name:"description",content:"Own your Own page ! Create your brand, Reach millions"})}ngOnDestroy(){}initialiseHomeContext(r){Y.homeContext.username=r,this.githubService.getGhDirectoryContents(r).then(i=>{Y.homeContext.directory=i,this.messaging.send({cmd:"page",file:"HomeGHUser"})})}};e.\u0275fac=function(i){return new(i||e)(te(vf),te(Mn),te(cn))},e.\u0275cmp=He({type:e,selectors:[["home"]],decls:2,vars:0,template:function(i,s){i&1&&Fe(0,"app-webfront-jumbotron")(1,"app-webfront-main")},dependencies:[PR,OR]});let n=e;return n})();var VR=(()=>{let e=class e{constructor(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var LR=(()=>{let e=class e{constructor(){this.WIT_URL="https://api.wit.ai/message?v=20211010&q=",this.WIT_TOKEN="GLM547LWVQYPHR6QWS5ADO3YYTB6ZRI3"}getIntent(r){return b(this,null,function*(){return fetch(`https://api.wit.ai/message?v=20211010&q=${encodeURIComponent(r.substring(0,250))}`,{headers:{Authorization:`Bearer ${this.WIT_TOKEN}`}}).then(i=>i.ok?i.json():Promise.reject(i.statusText))})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var xt=[];for(ep=0;ep<256;++ep)xt.push((ep+256).toString(16).slice(1));var ep;function jR(n,e=0){return(xt[n[e+0]]+xt[n[e+1]]+xt[n[e+2]]+xt[n[e+3]]+"-"+xt[n[e+4]]+xt[n[e+5]]+"-"+xt[n[e+6]]+xt[n[e+7]]+"-"+xt[n[e+8]]+xt[n[e+9]]+"-"+xt[n[e+10]]+xt[n[e+11]]+xt[n[e+12]]+xt[n[e+13]]+xt[n[e+14]]+xt[n[e+15]]).toLowerCase()}var tp,J4=new Uint8Array(16);function A_(){if(!tp&&(tp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tp(J4)}var X4=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),x_={randomUUID:X4};function eH(n,e,t){if(x_.randomUUID&&!e&&!n)return x_.randomUUID();n=n||{};var r=n.random||(n.rng||A_)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){t=t||0;for(var i=0;i<16;++i)e[t+i]=r[i];return e}return jR(r)}var M_=eH;var tH="firebase",nH="10.14.1";si(tH,nH,"app");var rH=(n,e)=>{let t=e?[e]:dD(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Vs=class{constructor(){return rH(iH)}},iH="app-check";function R_(){}var np=class{zone;delegate;constructor(e,t=Dm){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},k_=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",R_,{},R_,R_)),t.pipe(lt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},rp=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new np(Zone.current)),this.insideAngular=t.run(()=>new np(Zone.current,Do)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(L(_e))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sH(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function un(n){return oH(sH())(n)}function oH(n){return function(t){return t=t.lift(new k_(n.ngZone)),t.pipe(Fn(n.outsideAngular),In(n.insideAngular))}}var uH=new Map,lH={activated:!1,tokenObservers:[]},dH={initialized:!1,enabled:!1};function Kn(n){return uH.get(n)||Object.assign({},lH)}function HR(){return dH}var hH="https://content-firebaseappcheck.googleapis.com/v1";var fH="exchangeDebugToken",BR={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},$X=24*60*60*1e3;var P_=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return b(this,null,function*(){this.stop();try{this.pending=new im,this.pending.promise.catch(t=>{}),yield pH(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new im,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function pH(n){return new Promise(e=>{setTimeout(e,n)})}var gH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Li=new uD("appCheck","AppCheck",gH);function GR(n){if(!Kn(n).activated)throw Li.create("use-before-activation",{appName:n.name})}function WR(r,i){return b(this,arguments,function*({url:n,body:e},t){let s={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(e),headers:s},c;try{c=yield fetch(n,a)}catch(m){throw Li.create("fetch-network-error",{originalErrorMessage:m?.message})}if(c.status!==200)throw Li.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(m){throw Li.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=l.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw Li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let f=Number(d[1])*1e3,g=Date.now();return{token:l.token,expireTimeMillis:g+f,issuedAtTimeMillis:g}})}function KR(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${hH}/projects/${t}/apps/${r}:${fH}?key=${i}`,body:{debug_token:e}}}var mH="firebase-app-check-database",yH=1,O_="firebase-app-check-store";var ip=null;function vH(){return ip||(ip=new Promise((n,e)=>{try{let t=indexedDB.open(mH,yH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Li.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(O_,{keyPath:"compositeKey"})}}}catch(t){e(Li.create("storage-open",{originalErrorMessage:t?.message}))}}),ip)}function wH(n,e){return _H(EH(n),e)}function _H(n,e){return b(this,null,function*(){let r=(yield vH()).transaction(O_,"readwrite"),s=r.objectStore(O_).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=c=>{o()},r.onerror=c=>{var l;a(Li.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function EH(n){return`${n.options.appId}-${n.name}`}var F_=new dd("@firebase/app-check");function N_(n,e){return ld()?wH(n,e).catch(t=>{F_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function QR(){return HR().enabled}function YR(){return b(this,null,function*(){let n=HR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var IH={error:"UNKNOWN_ERROR"};function bH(n){return oD.encodeString(JSON.stringify(n),!1)}function V_(n,e=!1){return b(this,null,function*(){let t=n.app;GR(t);let r=Kn(t),i=r.token,s;if(i&&!il(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(il(c)?i=c:yield N_(t,void 0))}if(!e&&i&&il(i))return{token:i.token};let o=!1;if(QR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=WR(KR(t,yield YR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);let c=yield r.exchangeTokenPromise;return yield N_(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=yield Kn(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?F_.warn(c.message):F_.error(c),s=c}let a;return i?s?il(i)?a={token:i.token,internalError:s}:a=zR(s):(a={token:i.token},r.token=i,yield N_(t,i)):a=zR(s),o&&SH(t,a),a})}function DH(n){return b(this,null,function*(){let e=n.app;GR(e);let{provider:t}=Kn(e);if(QR()){let r=yield YR(),{token:i}=yield WR(KR(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function CH(n,e,t,r){let{app:i}=n,s=Kn(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&il(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),$R(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>$R(n))}function ZR(n,e){let t=Kn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $R(n){let{app:e}=n,t=Kn(e),r=t.tokenRefresher;r||(r=TH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function TH(n){let{app:e}=n;return new P_(()=>b(this,null,function*(){let t=Kn(e),r;if(t.token?r=yield V_(n,!0):r=yield V_(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Kn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},BR.RETRIAL_MIN_WAIT,BR.RETRIAL_MAX_WAIT)}function SH(n,e){let t=Kn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function il(n){return n.expireTimeMillis-Date.now()>0}function zR(n){return{token:bH(IH),error:n}}var L_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Kn(this.app);for(let t of e)ZR(this.app,t.next);return Promise.resolve()}};function AH(n,e){return new L_(n,e)}function xH(n){return{getToken:e=>V_(n,e),getLimitedUseToken:()=>DH(n),addTokenListener:e=>CH(n,"INTERNAL",e),removeTokenListener:e=>ZR(n.app,e)}}var MH="@firebase/app-check",RH="0.8.8";var kH="app-check",qR="app-check-internal";function NH(){Pc(new us(kH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return AH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qR).initialize()})),Pc(new us(qR,n=>{let e=n.getProvider("app-check").getImmediate();return xH(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),si(MH,RH)}NH();var PH=["localhost","0.0.0.0","127.0.0.1"],eee=typeof window<"u"&&PH.includes(window.location.hostname);var OH="firebase",FH="10.14.1";tr.registerVersion(OH,FH,"app-compat");var VH=["ngOnDestroy"],ek=(n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(VH.indexOf(s)>-1)return()=>{};let o=e.toPromise().then(a=>{let c=a?.[s];return typeof c=="function"?c.bind(a):c?.then?c.then(l=>t.run(()=>l)):t.run(()=>c)});return new Proxy(()=>{},{get:(a,c)=>o[c],apply:(a,c,l)=>o.then(d=>{let f=d?.(...l);return r?.spy?.apply&&r.spy.apply(s,l,f),f})})})});var j_=class{constructor(e){return e}},Ca=new H("angularfire2.app.options"),sp=new H("angularfire2.app.name");function op(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let o=tr.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>tr.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){let a=!!module.hot;LH("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new j_(o)}var LH=(n,...e)=>{Ov()&&typeof console<"u"&&console[n](...e)};function ap(n,e,t,r,i){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return jH(i,o)||(XR("error",`${e} was already initialized on the ${t} Firebase App with different settings.${UH?" You may need to reload as Firebase is not HMR aware.":""}`),XR("warn",{is:i,was:o})),s;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function jH(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var UH=typeof module<"u"&&!!module.hot,XR=(n,...e)=>{Ov()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var U_=new H("angularfire2.auth.use-emulator"),B_=new H("angularfire2.auth.settings"),$_=new H("angularfire2.auth.tenant-id"),z_=new H("angularfire2.auth.langugage-code"),q_=new H("angularfire2.auth.use-device-language"),H_=new H("angularfire.auth.persistence"),G_=(n,e,t,r,i,s,o,a)=>ap(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let c=e.runOutsideAngular(()=>n.auth());if(t&&c.useEmulator(...t),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(let[l,d]of Object.entries(o))c.settings[l]=d;return a&&c.setPersistence(a),c},[t,r,i,s,o,a]),tk=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,s,o,a,c,l,d,f,g,m){let w=new ke,D=oe(void 0).pipe(In(o.outsideAngular),Be(()=>s.runOutsideAngular(()=>import("./chunk-GA2XKJLQ.js"))),se(()=>op(t,s,r)),se(C=>G_(C,s,a,l,d,f,c,g)),Ao({bufferSize:1,refCount:!1}));if(Ai(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=oe(null);else{D.pipe(hn()).subscribe();let C=D.pipe(Be(F=>F.getRedirectResult().then(U=>U,()=>null)),un,Ao({bufferSize:1,refCount:!1})),P=D.pipe(Be(F=>new he(U=>({unsubscribe:s.runOutsideAngular(()=>F.onAuthStateChanged(Q=>U.next(Q),Q=>U.error(Q),()=>U.complete()))})))),O=D.pipe(Be(F=>new he(U=>({unsubscribe:s.runOutsideAngular(()=>F.onIdTokenChanged(Q=>U.next(Q),Q=>U.error(Q),()=>U.complete()))}))));this.authState=C.pipe(qd(P),Fn(o.outsideAngular),In(o.insideAngular)),this.user=C.pipe(qd(O),Fn(o.outsideAngular),In(o.insideAngular)),this.idToken=this.user.pipe(Be(F=>F?be(F.getIdToken()):oe(null))),this.idTokenResult=this.user.pipe(Be(F=>F?be(F.getIdTokenResult()):oe(null))),this.credential=Bc(C,w,this.authState.pipe(mt(F=>!F))).pipe(se(F=>F?.user?F:null),Fn(o.outsideAngular),In(o.insideAngular))}return ek(this,D,s,{spy:{apply:(C,P,O)=>{(C.startsWith("signIn")||C.startsWith("createUser"))&&O.then(F=>w.next(F))}}})}static \u0275fac=function(r){return new(r||n)(L(Ca),L(sp,8),L(At),L(_e),L(rp),L(U_,8),L(B_,8),L($_,8),L(z_,8),L(q_,8),L(H_,8),L(Vs,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var nk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rk={};var ji,W_;(function(){var n;function e(I,v){function _(){}_.prototype=v.prototype,I.D=v.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(T,S,x){for(var E=Array(arguments.length-2),br=2;br<arguments.length;br++)E[br-2]=arguments[br];return v.prototype[S].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,v,_){_||(_=0);var T=Array(16);if(typeof v=="string")for(var S=0;16>S;++S)T[S]=v.charCodeAt(_++)|v.charCodeAt(_++)<<8|v.charCodeAt(_++)<<16|v.charCodeAt(_++)<<24;else for(S=0;16>S;++S)T[S]=v[_++]|v[_++]<<8|v[_++]<<16|v[_++]<<24;v=I.g[0],_=I.g[1],S=I.g[2];var x=I.g[3],E=v+(x^_&(S^x))+T[0]+3614090360&4294967295;v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[1]+3905402710&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[2]+606105819&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[3]+3250441966&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[4]+4118548399&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[5]+1200080426&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[6]+2821735955&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[7]+4249261313&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[8]+1770035416&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[9]+2336552879&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[10]+4294925233&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[11]+2304563134&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(x^_&(S^x))+T[12]+1804603682&4294967295,v=_+(E<<7&4294967295|E>>>25),E=x+(S^v&(_^S))+T[13]+4254626195&4294967295,x=v+(E<<12&4294967295|E>>>20),E=S+(_^x&(v^_))+T[14]+2792965006&4294967295,S=x+(E<<17&4294967295|E>>>15),E=_+(v^S&(x^v))+T[15]+1236535329&4294967295,_=S+(E<<22&4294967295|E>>>10),E=v+(S^x&(_^S))+T[1]+4129170786&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[6]+3225465664&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[11]+643717713&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[0]+3921069994&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[5]+3593408605&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[10]+38016083&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[15]+3634488961&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[4]+3889429448&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[9]+568446438&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[14]+3275163606&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[3]+4107603335&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[8]+1163531501&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(S^x&(_^S))+T[13]+2850285829&4294967295,v=_+(E<<5&4294967295|E>>>27),E=x+(_^S&(v^_))+T[2]+4243563512&4294967295,x=v+(E<<9&4294967295|E>>>23),E=S+(v^_&(x^v))+T[7]+1735328473&4294967295,S=x+(E<<14&4294967295|E>>>18),E=_+(x^v&(S^x))+T[12]+2368359562&4294967295,_=S+(E<<20&4294967295|E>>>12),E=v+(_^S^x)+T[5]+4294588738&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[8]+2272392833&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[11]+1839030562&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[14]+4259657740&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[1]+2763975236&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[4]+1272893353&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[7]+4139469664&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[10]+3200236656&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[13]+681279174&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[0]+3936430074&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[3]+3572445317&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[6]+76029189&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(_^S^x)+T[9]+3654602809&4294967295,v=_+(E<<4&4294967295|E>>>28),E=x+(v^_^S)+T[12]+3873151461&4294967295,x=v+(E<<11&4294967295|E>>>21),E=S+(x^v^_)+T[15]+530742520&4294967295,S=x+(E<<16&4294967295|E>>>16),E=_+(S^x^v)+T[2]+3299628645&4294967295,_=S+(E<<23&4294967295|E>>>9),E=v+(S^(_|~x))+T[0]+4096336452&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[7]+1126891415&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[14]+2878612391&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[5]+4237533241&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[12]+1700485571&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[3]+2399980690&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[10]+4293915773&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[1]+2240044497&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[8]+1873313359&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[15]+4264355552&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[6]+2734768916&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[13]+1309151649&4294967295,_=S+(E<<21&4294967295|E>>>11),E=v+(S^(_|~x))+T[4]+4149444226&4294967295,v=_+(E<<6&4294967295|E>>>26),E=x+(_^(v|~S))+T[11]+3174756917&4294967295,x=v+(E<<10&4294967295|E>>>22),E=S+(v^(x|~_))+T[2]+718787259&4294967295,S=x+(E<<15&4294967295|E>>>17),E=_+(x^(S|~v))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+S&4294967295,I.g[3]=I.g[3]+x&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var _=v-this.blockSize,T=this.B,S=this.h,x=0;x<v;){if(S==0)for(;x<=_;)i(this,I,x),x+=this.blockSize;if(typeof I=="string"){for(;x<v;)if(T[S++]=I.charCodeAt(x++),S==this.blockSize){i(this,T),S=0;break}}else for(;x<v;)if(T[S++]=I[x++],S==this.blockSize){i(this,T),S=0;break}}this.h=S,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var _=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=_&255,_/=256;for(this.u(I),I=Array(16),v=_=0;4>v;++v)for(var T=0;32>T;T+=8)I[_++]=this.g[v]>>>T&255;return I};function s(I,v){var _=a;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=v(I)}function o(I,v){this.h=v;for(var _=[],T=!0,S=I.length-1;0<=S;S--){var x=I[S]|0;T&&x==v||(_[S]=x,T=!1)}this.g=_}var a={};function c(I){return-128<=I&&128>I?s(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return C(l(-I));for(var v=[],_=1,T=0;I>=_;T++)v[T]=I/_|0,_*=4294967296;return new o(v,0)}function d(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return C(d(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(v,8)),T=f,S=0;S<I.length;S+=8){var x=Math.min(8,I.length-S),E=parseInt(I.substring(S,S+x),v);8>x?(x=l(Math.pow(v,x)),T=T.j(x).add(l(E))):(T=T.j(_),T=T.add(l(E)))}return T}var f=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(D(this))return-C(this).m();for(var I=0,v=1,_=0;_<this.g.length;_++){var T=this.i(_);I+=(0<=T?T:4294967296+T)*v,v*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(w(this))return"0";if(D(this))return"-"+C(this).toString(I);for(var v=l(Math.pow(I,6)),_=this,T="";;){var S=U(_,v).g;_=P(_,S.j(v));var x=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=S,w(_))return x+T;for(;6>x.length;)x="0"+x;T=x+T}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function w(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function D(I){return I.h==-1}n.l=function(I){return I=P(this,I),D(I)?-1:w(I)?0:1};function C(I){for(var v=I.g.length,_=[],T=0;T<v;T++)_[T]=~I.g[T];return new o(_,~I.h).add(g)}n.abs=function(){return D(this)?C(this):this},n.add=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0,S=0;S<=v;S++){var x=T+(this.i(S)&65535)+(I.i(S)&65535),E=(x>>>16)+(this.i(S)>>>16)+(I.i(S)>>>16);T=E>>>16,x&=65535,E&=65535,_[S]=E<<16|x}return new o(_,_[_.length-1]&-2147483648?-1:0)};function P(I,v){return I.add(C(v))}n.j=function(I){if(w(this)||w(I))return f;if(D(this))return D(I)?C(this).j(C(I)):C(C(this).j(I));if(D(I))return C(this.j(C(I)));if(0>this.l(m)&&0>I.l(m))return l(this.m()*I.m());for(var v=this.g.length+I.g.length,_=[],T=0;T<2*v;T++)_[T]=0;for(T=0;T<this.g.length;T++)for(var S=0;S<I.g.length;S++){var x=this.i(T)>>>16,E=this.i(T)&65535,br=I.i(S)>>>16,pc=I.i(S)&65535;_[2*T+2*S]+=E*pc,O(_,2*T+2*S),_[2*T+2*S+1]+=x*pc,O(_,2*T+2*S+1),_[2*T+2*S+1]+=E*br,O(_,2*T+2*S+1),_[2*T+2*S+2]+=x*br,O(_,2*T+2*S+2)}for(T=0;T<v;T++)_[T]=_[2*T+1]<<16|_[2*T];for(T=v;T<2*v;T++)_[T]=0;return new o(_,0)};function O(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function F(I,v){this.g=I,this.h=v}function U(I,v){if(w(v))throw Error("division by zero");if(w(I))return new F(f,f);if(D(I))return v=U(C(I),v),new F(C(v.g),C(v.h));if(D(v))return v=U(I,C(v)),new F(C(v.g),v.h);if(30<I.g.length){if(D(I)||D(v))throw Error("slowDivide_ only works with positive integers.");for(var _=g,T=v;0>=T.l(I);)_=Q(_),T=Q(T);var S=z(_,1),x=z(T,1);for(T=z(T,2),_=z(_,2);!w(T);){var E=x.add(T);0>=E.l(I)&&(S=S.add(_),x=E),T=z(T,1),_=z(_,1)}return v=P(I,S.j(v)),new F(S,v)}for(S=f;0<=I.l(v);){for(_=Math.max(1,Math.floor(I.m()/v.m())),T=Math.ceil(Math.log(_)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),x=l(_),E=x.j(v);D(E)||0<E.l(I);)_-=T,x=l(_),E=x.j(v);w(x)&&(x=g),S=S.add(x),I=P(I,E)}return new F(S,I)}n.A=function(I){return U(this,I).h},n.and=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)&I.i(T);return new o(_,this.h&I.h)},n.or=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)|I.i(T);return new o(_,this.h|I.h)},n.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),_=[],T=0;T<v;T++)_[T]=this.i(T)^I.i(T);return new o(_,this.h^I.h)};function Q(I){for(var v=I.g.length+1,_=[],T=0;T<v;T++)_[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(_,I.h)}function z(I,v){var _=v>>5;v%=32;for(var T=I.g.length-_,S=[],x=0;x<T;x++)S[x]=0<v?I.i(x+_)>>>v|I.i(x+_+1)<<32-v:I.i(x+_);return new o(S,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,W_=rk.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,ji=rk.Integer=o}).apply(typeof nk<"u"?nk:typeof self<"u"?self:typeof window<"u"?window:{});var cp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Hr={};var K_,zH,Ta,Q_,sl,up,Y_,Z_,J_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof cp=="object"&&cp];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var y=0;y<u.length-1;y++){var A=u[y];if(!(A in p))break e;p=p[A]}u=u[u.length-1],y=p[u],h=h(y),h!=y&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,y=!1,A={next:function(){if(!y&&p<u.length){var k=p++;return{value:h(k,u[k]),done:!1}}return y=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,y),u.apply(h,A)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function m(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function w(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(y,A,k){for(var q=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)q[Le-2]=arguments[Le];return h.prototype[A].apply(y,q)}}function D(u){let h=u.length;if(0<h){let p=Array(h);for(let y=0;y<h;y++)p[y]=u[y];return p}return[]}function C(u,h){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let A=u.length||0,k=y.length||0;u.length=A+k;for(let q=0;q<k;q++)u[A+q]=y[q]}else u.push(y)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function O(u){return/^[\s\xa0]*$/.test(u)}function F(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function U(u){return U[" "](u),u}U[" "]=function(){};var Q=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function z(u,h,p){for(let y in u)h.call(p,u[y],y,u)}function I(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,y;for(let A=1;A<arguments.length;A++){y=arguments[A];for(p in y)u[p]=y[p];for(let k=0;k<_.length;k++)p=_[k],Object.prototype.hasOwnProperty.call(y,p)&&(u[p]=y[p])}}function S(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function x(u){a.setTimeout(()=>{throw u},0)}function E(){var u=kg;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class br{constructor(){this.h=this.g=null}add(h,p){let y=pc.get();y.set(h,p),this.h?this.h.next=y:this.g=y,this.h=y}}var pc=new P(()=>new q1,u=>u.reset());class q1{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let gc,mc=!1,kg=new br,n0=()=>{let u=a.Promise.resolve(void 0);gc=()=>{u.then(H1)}};var H1=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){x(p)}var h=pc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}mc=!1};function ti(){this.s=this.s,this.C=this.C}ti.prototype.s=!1,ti.prototype.ma=function(){this.s||(this.s=!0,this.N())},ti.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function kt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}kt.prototype.h=function(){this.defaultPrevented=!0};var G1=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function yc(u,h){if(kt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Q){e:{try{U(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:W1[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&yc.aa.h.call(this)}}w(yc,kt);var W1={2:"touch",3:"pen",4:"mouse"};yc.prototype.h=function(){yc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var vc="closure_listenable_"+(1e6*Math.random()|0),K1=0;function Q1(u,h,p,y,A){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!y,this.ha=A,this.key=++K1,this.da=this.fa=!1}function Gl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Wl(u){this.src=u,this.g={},this.h=0}Wl.prototype.add=function(u,h,p,y,A){var k=u.toString();u=this.g[k],u||(u=this.g[k]=[],this.h++);var q=Pg(u,h,y,A);return-1<q?(h=u[q],p||(h.fa=!1)):(h=new Q1(h,this.src,k,!!y,A),h.fa=p,u.push(h)),h};function Ng(u,h){var p=h.type;if(p in u.g){var y=u.g[p],A=Array.prototype.indexOf.call(y,h,void 0),k;(k=0<=A)&&Array.prototype.splice.call(y,A,1),k&&(Gl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Pg(u,h,p,y){for(var A=0;A<u.length;++A){var k=u[A];if(!k.da&&k.listener==h&&k.capture==!!p&&k.ha==y)return A}return-1}var Og="closure_lm_"+(1e6*Math.random()|0),Fg={};function r0(u,h,p,y,A){if(y&&y.once)return s0(u,h,p,y,A);if(Array.isArray(h)){for(var k=0;k<h.length;k++)r0(u,h[k],p,y,A);return null}return p=Ug(p),u&&u[vc]?u.K(h,p,l(y)?!!y.capture:!!y,A):i0(u,h,p,!1,y,A)}function i0(u,h,p,y,A,k){if(!h)throw Error("Invalid event type");var q=l(A)?!!A.capture:!!A,Le=Lg(u);if(Le||(u[Og]=Le=new Wl(u)),p=Le.add(h,p,y,q,k),p.proxy)return p;if(y=Y1(),p.proxy=y,y.src=u,y.listener=p,u.addEventListener)G1||(A=q),A===void 0&&(A=!1),u.addEventListener(h.toString(),y,A);else if(u.attachEvent)u.attachEvent(a0(h.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Y1(){function u(p){return h.call(u.src,u.listener,p)}let h=Z1;return u}function s0(u,h,p,y,A){if(Array.isArray(h)){for(var k=0;k<h.length;k++)s0(u,h[k],p,y,A);return null}return p=Ug(p),u&&u[vc]?u.L(h,p,l(y)?!!y.capture:!!y,A):i0(u,h,p,!0,y,A)}function o0(u,h,p,y,A){if(Array.isArray(h))for(var k=0;k<h.length;k++)o0(u,h[k],p,y,A);else y=l(y)?!!y.capture:!!y,p=Ug(p),u&&u[vc]?(u=u.i,h=String(h).toString(),h in u.g&&(k=u.g[h],p=Pg(k,p,y,A),-1<p&&(Gl(k[p]),Array.prototype.splice.call(k,p,1),k.length==0&&(delete u.g[h],u.h--)))):u&&(u=Lg(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Pg(h,p,y,A)),(p=-1<u?h[u]:null)&&Vg(p))}function Vg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[vc])Ng(h.i,u);else{var p=u.type,y=u.proxy;h.removeEventListener?h.removeEventListener(p,y,u.capture):h.detachEvent?h.detachEvent(a0(p),y):h.addListener&&h.removeListener&&h.removeListener(y),(p=Lg(h))?(Ng(p,u),p.h==0&&(p.src=null,h[Og]=null)):Gl(u)}}}function a0(u){return u in Fg?Fg[u]:Fg[u]="on"+u}function Z1(u,h){if(u.da)u=!0;else{h=new yc(h,this);var p=u.listener,y=u.ha||u.src;u.fa&&Vg(u),u=p.call(y,h)}return u}function Lg(u){return u=u[Og],u instanceof Wl?u:null}var jg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ug(u){return typeof u=="function"?u:(u[jg]||(u[jg]=function(h){return u.handleEvent(h)}),u[jg])}function Nt(){ti.call(this),this.i=new Wl(this),this.M=this,this.F=null}w(Nt,ti),Nt.prototype[vc]=!0,Nt.prototype.removeEventListener=function(u,h,p,y){o0(this,u,h,p,y)};function Bt(u,h){var p,y=u.F;if(y)for(p=[];y;y=y.F)p.push(y);if(u=u.M,y=h.type||h,typeof h=="string")h=new kt(h,u);else if(h instanceof kt)h.target=h.target||u;else{var A=h;h=new kt(y,u),T(h,A)}if(A=!0,p)for(var k=p.length-1;0<=k;k--){var q=h.g=p[k];A=Kl(q,y,!0,h)&&A}if(q=h.g=u,A=Kl(q,y,!0,h)&&A,A=Kl(q,y,!1,h)&&A,p)for(k=0;k<p.length;k++)q=h.g=p[k],A=Kl(q,y,!1,h)&&A}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],y=0;y<p.length;y++)Gl(p[y]);delete u.g[h],u.h--}}this.F=null},Nt.prototype.K=function(u,h,p,y){return this.i.add(String(u),h,!1,p,y)},Nt.prototype.L=function(u,h,p,y){return this.i.add(String(u),h,!0,p,y)};function Kl(u,h,p,y){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,k=0;k<h.length;++k){var q=h[k];if(q&&!q.da&&q.capture==p){var Le=q.listener,Dt=q.ha||q.src;q.fa&&Ng(u.i,q),A=Le.call(Dt,y)!==!1&&A}}return A&&!y.defaultPrevented}function c0(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function u0(u){u.g=c0(()=>{u.g=null,u.i&&(u.i=!1,u0(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class J1 extends ti{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:u0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wc(u){ti.call(this),this.h=u,this.g={}}w(wc,ti);var l0=[];function d0(u){z(u.g,function(h,p){this.g.hasOwnProperty(p)&&Vg(h)},u),u.g={}}wc.prototype.N=function(){wc.aa.N.call(this),d0(this)},wc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bg=a.JSON.stringify,X1=a.JSON.parse,eO=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function $g(){}$g.prototype.h=null;function h0(u){return u.h||(u.h=u.i())}function f0(){}var _c={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zg(){kt.call(this,"d")}w(zg,kt);function qg(){kt.call(this,"c")}w(qg,kt);var ss={},p0=null;function Ql(){return p0=p0||new Nt}ss.La="serverreachability";function g0(u){kt.call(this,ss.La,u)}w(g0,kt);function Ec(u){let h=Ql();Bt(h,new g0(h))}ss.STAT_EVENT="statevent";function m0(u,h){kt.call(this,ss.STAT_EVENT,u),this.stat=h}w(m0,kt);function $t(u){let h=Ql();Bt(h,new m0(h,u))}ss.Ma="timingevent";function y0(u,h){kt.call(this,ss.Ma,u),this.size=h}w(y0,kt);function Ic(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function bc(){this.g=!0}bc.prototype.xa=function(){this.g=!1};function tO(u,h,p,y,A,k){u.info(function(){if(u.g)if(k)for(var q="",Le=k.split("&"),Dt=0;Dt<Le.length;Dt++){var Me=Le[Dt].split("=");if(1<Me.length){var Pt=Me[0];Me=Me[1];var Ot=Pt.split("_");q=2<=Ot.length&&Ot[1]=="type"?q+(Pt+"="+Me+"&"):q+(Pt+"=redacted&")}}else q=null;else q=k;return"XMLHTTP REQ ("+y+") [attempt "+A+"]: "+h+`
`+p+`
`+q})}function nO(u,h,p,y,A,k,q){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+A+"]: "+h+`
`+p+`
`+k+" "+q})}function lo(u,h,p,y){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+iO(u,p)+(y?" "+y:"")})}function rO(u,h){u.info(function(){return"TIMEOUT: "+h})}bc.prototype.info=function(){};function iO(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var y=p[u];if(!(2>y.length)){var A=y[1];if(Array.isArray(A)&&!(1>A.length)){var k=A[0];if(k!="noop"&&k!="stop"&&k!="close")for(var q=1;q<A.length;q++)A[q]=""}}}}return Bg(p)}catch{return h}}var Yl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},v0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Hg;function Zl(){}w(Zl,$g),Zl.prototype.g=function(){return new XMLHttpRequest},Zl.prototype.i=function(){return{}},Hg=new Zl;function ni(u,h,p,y){this.j=u,this.i=h,this.l=p,this.R=y||1,this.U=new wc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new w0}function w0(){this.i=null,this.g="",this.h=!1}var _0={},Gg={};function Wg(u,h,p){u.L=1,u.v=td(Dr(h)),u.m=p,u.P=!0,E0(u,null)}function E0(u,h){u.F=Date.now(),Jl(u),u.A=Dr(u.v);var p=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),O0(p.i,"t",y),u.C=0,p=u.j.J,u.h=new w0,u.g=X0(u.j,p?h:null,!u.m),0<u.O&&(u.M=new J1(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,y=u.ca;var A="readystatechange";Array.isArray(A)||(A&&(l0[0]=A.toString()),A=l0);for(var k=0;k<A.length;k++){var q=r0(p,A[k],y||h.handleEvent,!1,h.h||h);if(!q)break;h.g[q.key]=q}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Ec(),tO(u.i,u.u,u.A,u.l,u.R,u.m)}ni.prototype.ca=function(u){u=u.target;let h=this.M;h&&Cr(u)==3?h.j():this.Y(u)},ni.prototype.Y=function(u){try{if(u==this.g)e:{let Ot=Cr(this.g);var h=this.g.Ba();let po=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||$0(this.g)))){this.J||Ot!=4||h==7||(h==8||0>=po?Ec(3):Ec(2)),Kg(this);var p=this.g.Z();this.X=p;t:if(I0(this)){var y=$0(this.g);u="";var A=y.length,k=Cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){os(this),Dc(this);var q="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,u+=this.h.i.decode(y[h],{stream:!(k&&h==A-1)});y.length=0,this.h.g+=u,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=p==200,nO(this.i,this.u,this.A,this.l,this.R,Ot,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Dt=this.g;if((Le=Dt.g?Dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!O(Le)){var Me=Le;break t}}Me=null}if(p=Me)lo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qg(this,p);else{this.o=!1,this.s=3,$t(12),os(this),Dc(this);break e}}if(this.P){p=!0;let Pn;for(;!this.J&&this.C<q.length;)if(Pn=sO(this,q),Pn==Gg){Ot==4&&(this.s=4,$t(14),p=!1),lo(this.i,this.l,null,"[Incomplete Response]");break}else if(Pn==_0){this.s=4,$t(15),lo(this.i,this.l,q,"[Invalid Chunk]"),p=!1;break}else lo(this.i,this.l,Pn,null),Qg(this,Pn);if(I0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||q.length!=0||this.h.h||(this.s=1,$t(16),p=!1),this.o=this.o&&p,!p)lo(this.i,this.l,q,"[Invalid Chunked Response]"),os(this),Dc(this);else if(0<q.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),tm(Pt),Pt.M=!0,$t(11))}}else lo(this.i,this.l,q,null),Qg(this,q);Ot==4&&os(this),this.o&&!this.J&&(Ot==4?Q0(this.j,this):(this.o=!1,Jl(this)))}else IO(this.g),p==400&&0<q.indexOf("Unknown SID")?(this.s=3,$t(12)):(this.s=0,$t(13)),os(this),Dc(this)}}}catch{}finally{}};function I0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function sO(u,h){var p=u.C,y=h.indexOf(`
`,p);return y==-1?Gg:(p=Number(h.substring(p,y)),isNaN(p)?_0:(y+=1,y+p>h.length?Gg:(h=h.slice(y,y+p),u.C=y+p,h)))}ni.prototype.cancel=function(){this.J=!0,os(this)};function Jl(u){u.S=Date.now()+u.I,b0(u,u.I)}function b0(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ic(g(u.ba,u),h)}function Kg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ni.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(rO(this.i,this.A),this.L!=2&&(Ec(),$t(17)),os(this),this.s=2,Dc(this)):b0(this,this.S-u)};function Dc(u){u.j.G==0||u.J||Q0(u.j,u)}function os(u){Kg(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,d0(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Qg(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Yg(p.h,u))){if(!u.K&&Yg(p.h,u)&&p.G==3){try{var y=p.Da.g.parse(h)}catch{y=null}if(Array.isArray(y)&&y.length==3){var A=y;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)od(p),id(p);else break e;em(p),$t(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ic(g(p.Za,p),6e3));if(1>=T0(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else cs(p,11)}else if((u.K||p.g==u)&&od(p),!O(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Me=A[h];if(p.T=Me[0],Me=Me[1],p.G==2)if(Me[0]=="c"){p.K=Me[1],p.ia=Me[2];let Pt=Me[3];Pt!=null&&(p.la=Pt,p.j.info("VER="+p.la));let Ot=Me[4];Ot!=null&&(p.Aa=Ot,p.j.info("SVER="+p.Aa));let po=Me[5];po!=null&&typeof po=="number"&&0<po&&(y=1.5*po,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let Pn=u.g;if(Pn){let cd=Pn.g?Pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cd){var k=y.h;k.g||cd.indexOf("spdy")==-1&&cd.indexOf("quic")==-1&&cd.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Zg(k,k.h),k.h=null))}if(y.D){let nm=Pn.g?Pn.g.getResponseHeader("X-HTTP-Session-Id"):null;nm&&(y.ya=nm,ze(y.I,y.D,nm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var q=u;if(y.qa=J0(y,y.J?y.ia:null,y.W),q.K){S0(y.h,q);var Le=q,Dt=y.L;Dt&&(Le.I=Dt),Le.B&&(Kg(Le),Jl(Le)),y.g=q}else W0(y);0<p.i.length&&sd(p)}else Me[0]!="stop"&&Me[0]!="close"||cs(p,7);else p.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?cs(p,7):Xg(p):Me[0]!="noop"&&p.l&&p.l.ta(Me),p.v=0)}}Ec(4)}catch{}}var oO=class{constructor(u,h){this.g=u,this.map=h}};function D0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function C0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function T0(u){return u.h?1:u.g?u.g.size:0}function Yg(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Zg(u,h){u.g?u.g.add(h):u.h=h}function S0(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}D0.prototype.cancel=function(){if(this.i=A0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function A0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return D(u.i)}function aO(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,y=0;y<p;y++)h.push(u[y]);return h}h=[],p=0;for(y in u)h[p++]=u[y];return h}function cO(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let y in u)h[p++]=y;return h}}}function x0(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=cO(u),y=aO(u),A=y.length,k=0;k<A;k++)h.call(void 0,y[k],p&&p[k],u)}var M0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uO(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var y=u[p].indexOf("="),A=null;if(0<=y){var k=u[p].substring(0,y);A=u[p].substring(y+1)}else k=u[p];h(k,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function as(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof as){this.h=u.h,Xl(this,u.j),this.o=u.o,this.g=u.g,ed(this,u.s),this.l=u.l;var h=u.i,p=new Sc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),R0(this,p),this.m=u.m}else u&&(h=String(u).match(M0))?(this.h=!1,Xl(this,h[1]||"",!0),this.o=Cc(h[2]||""),this.g=Cc(h[3]||"",!0),ed(this,h[4]),this.l=Cc(h[5]||"",!0),R0(this,h[6]||"",!0),this.m=Cc(h[7]||"")):(this.h=!1,this.i=new Sc(null,this.h))}as.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Tc(h,k0,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Tc(h,k0,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Tc(p,p.charAt(0)=="/"?hO:dO,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Tc(p,pO)),u.join("")};function Dr(u){return new as(u)}function Xl(u,h,p){u.j=p?Cc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function ed(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function R0(u,h,p){h instanceof Sc?(u.i=h,gO(u.i,u.h)):(p||(h=Tc(h,fO)),u.i=new Sc(h,u.h))}function ze(u,h,p){u.i.set(h,p)}function td(u){return ze(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Cc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Tc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,lO),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function lO(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var k0=/[#\/\?@]/g,dO=/[#\?:]/g,hO=/[#\?]/g,fO=/[#\?@]/g,pO=/#/g;function Sc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function ri(u){u.g||(u.g=new Map,u.h=0,u.i&&uO(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Sc.prototype,n.add=function(u,h){ri(this),this.i=null,u=ho(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function N0(u,h){ri(u),h=ho(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function P0(u,h){return ri(u),h=ho(u,h),u.g.has(h)}n.forEach=function(u,h){ri(this),this.g.forEach(function(p,y){p.forEach(function(A){u.call(h,A,y,this)},this)},this)},n.na=function(){ri(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let y=0;y<h.length;y++){let A=u[y];for(let k=0;k<A.length;k++)p.push(h[y])}return p},n.V=function(u){ri(this);let h=[];if(typeof u=="string")P0(this,u)&&(h=h.concat(this.g.get(ho(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return ri(this),this.i=null,u=ho(this,u),P0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function O0(u,h,p){N0(u,h),0<p.length&&(u.i=null,u.g.set(ho(u,h),D(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var y=h[p];let k=encodeURIComponent(String(y)),q=this.V(y);for(y=0;y<q.length;y++){var A=k;q[y]!==""&&(A+="="+encodeURIComponent(String(q[y]))),u.push(A)}}return this.i=u.join("&")};function ho(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function gO(u,h){h&&!u.j&&(ri(u),u.i=null,u.g.forEach(function(p,y){var A=y.toLowerCase();y!=A&&(N0(this,y),O0(this,A,p))},u)),u.j=h}function mO(u,h){let p=new bc;if(a.Image){let y=new Image;y.onload=m(ii,p,"TestLoadImage: loaded",!0,h,y),y.onerror=m(ii,p,"TestLoadImage: error",!1,h,y),y.onabort=m(ii,p,"TestLoadImage: abort",!1,h,y),y.ontimeout=m(ii,p,"TestLoadImage: timeout",!1,h,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else h(!1)}function yO(u,h){let p=new bc,y=new AbortController,A=setTimeout(()=>{y.abort(),ii(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:y.signal}).then(k=>{clearTimeout(A),k.ok?ii(p,"TestPingServer: ok",!0,h):ii(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),ii(p,"TestPingServer: error",!1,h)})}function ii(u,h,p,y,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),y(p)}catch{}}function vO(){this.g=new eO}function wO(u,h,p){let y=p||"";try{x0(u,function(A,k){let q=A;l(A)&&(q=Bg(A)),h.push(y+k+"="+encodeURIComponent(q))})}catch(A){throw h.push(y+"type="+encodeURIComponent("_badmap")),A}}function Ac(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Ac,$g),Ac.prototype.g=function(){return new nd(this.l,this.j)},Ac.prototype.i=function(u){return function(){return u}}({});function nd(u,h){Nt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(nd,Nt),n=nd.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Mc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mc(this)),this.g&&(this.readyState=3,Mc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;F0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function F0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?xc(this):Mc(this),this.readyState==3&&F0(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,xc(this))},n.Qa=function(u){this.g&&(this.response=u,xc(this))},n.ga=function(){this.g&&xc(this)};function xc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Mc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(nd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function V0(u){let h="";return z(u,function(p,y){h+=y,h+=":",h+=p,h+=`\r
`}),h}function Jg(u,h,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=V0(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):ze(u,h,p))}function et(u){Nt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(et,Nt);var _O=/^https?$/i,EO=["POST","PUT"];n=et.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Hg.g(),this.v=this.o?h0(this.o):h0(Hg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(k){L0(this,k);return}if(u=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var A in y)p.set(A,y[A]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let k of y.keys())p.set(k,y.get(k));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(k=>k.toLowerCase()=="content-type"),A=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(EO,h,void 0))||y||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,q]of p)this.g.setRequestHeader(k,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{B0(this),this.u=!0,this.g.send(u),this.u=!1}catch(k){L0(this,k)}};function L0(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,j0(u),rd(u)}function j0(u){u.A||(u.A=!0,Bt(u,"complete"),Bt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Bt(this,"complete"),Bt(this,"abort"),rd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rd(this,!0)),et.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?U0(this):this.bb())},n.bb=function(){U0(this)};function U0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Cr(u)!=4||u.Z()!=2)){if(u.u&&Cr(u)==4)c0(u.Ea,0,u);else if(Bt(u,"readystatechange"),Cr(u)==4){u.h=!1;try{let q=u.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var y;if(y=q===0){var A=String(u.D).match(M0)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),y=!_O.test(A?A.toLowerCase():"")}p=y}if(p)Bt(u,"complete"),Bt(u,"success");else{u.m=6;try{var k=2<Cr(u)?u.g.statusText:""}catch{k=""}u.l=k+" ["+u.Z()+"]",j0(u)}}finally{rd(u)}}}}function rd(u,h){if(u.g){B0(u);let p=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Bt(u,"ready");try{p.onreadystatechange=y}catch{}}}function B0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Cr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Cr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),X1(h)}};function $0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function IO(u){let h={};u=(u.g&&2<=Cr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(O(u[y]))continue;var p=S(u[y]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let k=h[A]||[];h[A]=k,k.push(p)}I(h,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function z0(u){this.Aa=0,this.i=[],this.j=new bc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Rc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Rc("baseRetryDelayMs",5e3,u),this.cb=Rc("retryDelaySeedMs",1e4,u),this.Wa=Rc("forwardChannelMaxRetries",2,u),this.wa=Rc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new D0(u&&u.concurrentRequestLimit),this.Da=new vO,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=z0.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,y){$t(0),this.W=u,this.H=h||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=J0(this,null,this.W),sd(this)};function Xg(u){if(q0(u),u.G==3){var h=u.U++,p=Dr(u.I);if(ze(p,"SID",u.K),ze(p,"RID",h),ze(p,"TYPE","terminate"),kc(u,p),h=new ni(u,u.j,h),h.L=2,h.v=td(Dr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=X0(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Jl(h)}Z0(u)}function id(u){u.g&&(tm(u),u.g.cancel(),u.g=null)}function q0(u){id(u),u.u&&(a.clearTimeout(u.u),u.u=null),od(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function sd(u){if(!C0(u.h)&&!u.s){u.s=!0;var h=u.Ga;gc||n0(),mc||(gc(),mc=!0),kg.add(h,u),u.B=0}}function bO(u,h){return T0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ic(g(u.Ga,u,h),Y0(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let A=new ni(this,this.j,u),k=this.o;if(this.S&&(k?(k=v(k),T(k,this.S)):k=this.S),this.m!==null||this.O||(A.H=k,k=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(h+=y,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=G0(this,A,h),p=Dr(this.I),ze(p,"RID",u),ze(p,"CVER",22),this.D&&ze(p,"X-HTTP-Session-Id",this.D),kc(this,p),k&&(this.O?h="headers="+encodeURIComponent(String(V0(k)))+"&"+h:this.m&&Jg(p,this.m,k)),Zg(this.h,A),this.Ua&&ze(p,"TYPE","init"),this.P?(ze(p,"$req",h),ze(p,"SID","null"),A.T=!0,Wg(A,p,null)):Wg(A,p,h),this.G=2}}else this.G==3&&(u?H0(this,u):this.i.length==0||C0(this.h)||H0(this))};function H0(u,h){var p;h?p=h.l:p=u.U++;let y=Dr(u.I);ze(y,"SID",u.K),ze(y,"RID",p),ze(y,"AID",u.T),kc(u,y),u.m&&u.o&&Jg(y,u.m,u.o),p=new ni(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=G0(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Zg(u.h,p),Wg(p,y,h)}function kc(u,h){u.H&&z(u.H,function(p,y){ze(h,y,p)}),u.l&&x0({},function(p,y){ze(h,y,p)})}function G0(u,h,p){p=Math.min(u.i.length,p);var y=u.l?g(u.l.Na,u.l,u):null;e:{var A=u.i;let k=-1;for(;;){let q=["count="+p];k==-1?0<p?(k=A[0].g,q.push("ofs="+k)):k=0:q.push("ofs="+k);let Le=!0;for(let Dt=0;Dt<p;Dt++){let Me=A[Dt].g,Pt=A[Dt].map;if(Me-=k,0>Me)k=Math.max(0,A[Dt].g-100),Le=!1;else try{wO(Pt,q,"req"+Me+"_")}catch{y&&y(Pt)}}if(Le){y=q.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,y}function W0(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;gc||n0(),mc||(gc(),mc=!0),kg.add(h,u),u.v=0}}function em(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ic(g(u.Fa,u),Y0(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,K0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ic(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,$t(10),id(this),K0(this))};function tm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function K0(u){u.g=new ni(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Dr(u.qa);ze(h,"RID","rpc"),ze(h,"SID",u.K),ze(h,"AID",u.T),ze(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&ze(h,"TO",u.ja),ze(h,"TYPE","xmlhttp"),kc(u,h),u.m&&u.o&&Jg(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=td(Dr(h)),p.m=null,p.P=!0,E0(p,u)}n.Za=function(){this.C!=null&&(this.C=null,id(this),em(this),$t(19))};function od(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Q0(u,h){var p=null;if(u.g==h){od(u),tm(u),u.g=null;var y=2}else if(Yg(u.h,h))p=h.D,S0(u.h,h),y=1;else return;if(u.G!=0){if(h.o)if(y==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=u.B;y=Ql(),Bt(y,new y0(y,p)),sd(u)}else W0(u);else if(A=h.s,A==3||A==0&&0<h.X||!(y==1&&bO(u,h)||y==2&&em(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),A){case 1:cs(u,5);break;case 4:cs(u,10);break;case 3:cs(u,6);break;default:cs(u,2)}}}function Y0(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function cs(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),y=u.Xa;let A=!y;y=new as(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Xl(y,"https"),td(y),A?mO(y.toString(),p):yO(y.toString(),p)}else $t(2);u.G=0,u.l&&u.l.sa(h),Z0(u),q0(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),$t(2)):(this.j.info("Failed to ping google.com"),$t(1))};function Z0(u){if(u.G=0,u.ka=[],u.l){let h=A0(u.h);(h.length!=0||u.i.length!=0)&&(C(u.ka,h),C(u.ka,u.i),u.h.i.length=0,D(u.i),u.i.length=0),u.l.ra()}}function J0(u,h,p){var y=p instanceof as?Dr(p):new as(p);if(y.g!="")h&&(y.g=h+"."+y.g),ed(y,y.s);else{var A=a.location;y=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var k=new as(null);y&&Xl(k,y),h&&(k.g=h),A&&ed(k,A),p&&(k.l=p),y=k}return p=u.D,h=u.ya,p&&h&&ze(y,p,h),ze(y,"VER",u.la),kc(u,y),y}function X0(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new et(new Ac({eb:p})):new et(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function eD(){}n=eD.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ad(){}ad.prototype.g=function(u,h){return new dn(u,h)};function dn(u,h){Nt.call(this),this.g=new z0(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!O(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!O(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new fo(this)}w(dn,Nt),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Xg(this.g)},dn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Bg(u),u=p);h.i.push(new oO(h.Ya++,u)),h.G==3&&sd(h)},dn.prototype.N=function(){this.g.l=null,delete this.j,Xg(this.g),delete this.g,dn.aa.N.call(this)};function tD(u){zg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}w(tD,zg);function nD(){qg.call(this),this.status=1}w(nD,qg);function fo(u){this.g=u}w(fo,eD),fo.prototype.ua=function(){Bt(this.g,"a")},fo.prototype.ta=function(u){Bt(this.g,new tD(u))},fo.prototype.sa=function(u){Bt(this.g,new nD)},fo.prototype.ra=function(){Bt(this.g,"b")},ad.prototype.createWebChannel=ad.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,J_=Hr.createWebChannelTransport=function(){return new ad},Z_=Hr.getStatEventTarget=function(){return Ql()},Y_=Hr.Event=ss,up=Hr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yl.NO_ERROR=0,Yl.TIMEOUT=8,Yl.HTTP_ERROR=6,sl=Hr.ErrorCode=Yl,v0.COMPLETE="complete",Q_=Hr.EventType=v0,f0.EventType=_c,_c.OPEN="a",_c.CLOSE="b",_c.ERROR="c",_c.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,Ta=Hr.WebChannel=f0,zH=Hr.FetchXmlHttpFactory=Ac,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,K_=Hr.XhrIo=et}).apply(typeof cp<"u"?cp:typeof self<"u"?self:typeof window<"u"?window:{});var ik="@firebase/firestore";var ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");var rc="10.14.0";var Gi=new dd("@firebase/firestore");function Ra(){return Gi.logLevel}function aN(n){Gi.setLogLevel(n)}function j(n,...e){if(Gi.logLevel<=er.DEBUG){let t=e.map(rb);Gi.debug(`Firestore (${rc}): ${n}`,...t)}}function st(n,...e){if(Gi.logLevel<=er.ERROR){let t=e.map(rb);Gi.error(`Firestore (${rc}): ${n}`,...t)}}function Qn(n,...e){if(Gi.logLevel<=er.WARN){let t=e.map(rb);Gi.warn(`Firestore (${rc}): ${n}`,...t)}}function rb(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function X(n="Unexpected state"){let e=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: `+n;throw st(e),new Error(e)}function re(n,e){n||X()}function cN(n,e){n||X()}function G(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},V=class extends cD{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Et=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var wp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},iE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ft.UNAUTHENTICATED))}shutdown(){}},sE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},oE=class{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){re(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Et;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Et,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Et)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string"),new wp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new ft(e)}},aE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},cE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new aE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},uE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},lE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){re(this.o===void 0);let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(re(typeof t.token=="string"),this.R=t.token,new uE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function qH(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var _p=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=qH(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function de(n,e){return n<e?-1:n>e?1:0}function Ua(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function uN(n){return n+"\0"}var Je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new V(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new V(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ae=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Je(0,0))}static max(){return new n(new Je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ep=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&X(),r===void 0?r=e.length-t:r>e.length-t&&X(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Te=class n extends Ep{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},HH=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ot=class n extends Ep{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return HH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new V(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new V(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new V(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var W=class n{constructor(e){this.path=e}static fromPath(e){return new n(Te.fromString(e))}static fromName(e){return new n(Te.fromString(e).popFirst(5))}static empty(){return new n(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Te(e.slice()))}};var Ba=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function dE(n){return n.fields.find(e=>e.kind===2)}function js(n){return n.fields.filter(e=>e.kind!==2)}Ba.UNKNOWN_ID=-1;var Va=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var yl=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,kn.min())}};function lN(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ae.fromTimestamp(r===1e9?new Je(t+1,0):new Je(t,r));return new kn(i,W.empty(),e)}function dN(n){return new kn(n.readTime,n.key,-1)}var kn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ae.min(),W.empty(),-1)}static max(){return new n(ae.max(),W.empty(),-1)}};function ib(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=W.comparator(n.documentKey,e.documentKey),t!==0?t:de(n.largestBatchId,e.largestBatchId))}var hN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ip=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ns(n){return b(this,null,function*(){if(n.code!==N.FAILED_PRECONDITION||n.message!==hN)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};var bp=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Et,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Hs(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=sb(r.target.error);this.V.reject(new Hs(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(s){throw new Hs(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(j("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new fE(t)}},Wi=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Nc())===12.2&&st("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return j("SimpleDb","Removing database:",e),Us(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ld())return!1;if(n.v())return!0;let e=Nc(),t=n.S(e),r=0<t&&t<10,i=fN(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return b(this,null,function*(){return this.db||(j("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;t(o)},i.onblocked=()=>{r(new Hs(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new V(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new V(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Hs(e,o))},i.onupgradeneeded=s=>{j("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.O(o,i.transaction,s.oldVersion,this.version).next(()=>{j("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return b(this,null,function*(){let s=t==="readonly",o=0;for(;;){++o;try{this.db=yield this.M(e);let a=bp.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),R.reject(l))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,l=c.name!=="FirebaseError"&&o<3;if(j("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),this.close(),!l)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function fN(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var hE=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Us(this.B.delete())}},Hs=class extends V{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function rs(n){return n.name==="IndexedDbTransactionError"}var fE=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(j("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(j("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Us(r)}add(e){return j("SimpleDb","ADD",this.store.name,e,e),Us(this.store.add(e))}get(e){return Us(this.store.get(e)).next(t=>(t===void 0&&(t=null),j("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return j("SimpleDb","DELETE",this.store.name,e),Us(this.store.delete(e))}count(){return j("SimpleDb","COUNT",this.store.name),Us(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new R((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.W(s,(a,c)=>{o.push(c)}).next(()=>o)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new R((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,t){j("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new R((r,i)=>{t.onerror=s=>{let o=sb(s.target.error);i(o)},t.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,t){let r=[];return new R((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new hE(a),l=t(a.primaryKey,a.value,c);if(l instanceof R){let d=l.catch(f=>(c.done(),R.reject(f)));r.push(d)}c.isDone?i():c.K===null?a.continue():a.continue(c.K)}}).next(()=>R.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function Us(n){return new R((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=sb(r.target.error);t(i)}})}var sk=!1;function sb(n){let e=Wi.S(Nc());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new V("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return sk||(sk=!0,setTimeout(()=>{throw r},0)),r}}return n}var pE=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){j("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>b(this,null,function*(){this.task=null;try{j("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){rs(t)?j("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield ns(t)}yield this.X(6e4)}))}},gE=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return b(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,s=!0;return R.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return j("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(j("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{let o=dN(s);ib(o,r)>0&&(r=o)}),new kn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var _n=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Ll(n){return n==null}function vl(n){return n===0&&1/n==-1/0}function pN(n){return typeof n=="number"&&Number.isInteger(n)&&!vl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Zt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ok(e)),e=GH(n.get(t),e);return ok(e)}function GH(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function ok(n){return n+""}function fr(n){let e=n.length;if(re(e>=2),e===2)return re(n.charAt(0)===""&&n.charAt(1)===""),Te.emptyPath();let t=e-2,r=[],i="";for(let s=0;s<e;){let o=n.indexOf("",s);switch((o<0||o>t)&&X(),n.charAt(o+1)){case"":let a=n.substring(s,o),c;i.length===0?c=a:(i+=a,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,o),i+="\0";break;case"":i+=n.substring(s,o+1);break;default:X()}s=o+2}return new Te(r)}var ak=["userId","batchId"];function pp(n,e){return[n,Zt(e)]}function gN(n,e,t){return[n,Zt(e),t]}var WH={},KH=["prefixPath","collectionGroup","readTime","documentId"],QH=["prefixPath","collectionGroup","documentId"],YH=["collectionGroup","readTime","prefixPath","documentId"],ZH=["canonicalId","targetId"],JH=["targetId","path"],XH=["path","targetId"],e3=["collectionId","parent"],t3=["indexId","uid"],n3=["uid","sequenceNumber"],r3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],i3=["indexId","uid","orderedDocumentKey"],s3=["userId","collectionPath","documentId"],o3=["userId","collectionPath","largestBatchId"],a3=["userId","collectionGroup","largestBatchId"],mN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],c3=[...mN,"documentOverlays"],yN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],vN=yN,ob=[...vN,"indexConfiguration","indexState","indexEntries"],u3=ob,l3=[...ob,"globals"];var wl=class extends Ip{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function It(n,e){let t=G(n);return Wi.F(t._e,e)}function ck(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ro(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function wN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var We=class n{constructor(e,t){this.comparator=e,this.root=t||gr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}},Fa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},gr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();let e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}};gr.EMPTY=null,gr.RED=!0,gr.BLACK=!1;gr.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,t,r,i,s){return this}insert(e,t,r){return new gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ue=class n{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Dp(this.data.getIterator())}getIteratorFrom(e){return new Dp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Dp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Sa(n){return n.hasNext()?n.getNext():void 0}var En=class n{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ue(ot.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ua(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Cp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function _N(){return typeof atob<"u"}var ct=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Cp("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ct.EMPTY_BYTE_STRING=new ct("");var d3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(n){if(re(!!n),typeof n=="string"){let e=0,t=d3.exec(n);if(re(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(n.seconds),nanos:Qe(n.nanos)}}function Qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ki(n){return typeof n=="string"?ct.fromBase64String(n):ct.fromUint8Array(n)}function mg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ab(n){let e=n.mapValue.fields.__previous_value__;return mg(e)?ab(e):e}function _l(n){let e=Kr(n.mapValue.fields.__local_write_time__.timestampValue);return new Je(e.seconds,e.nanos)}var mE=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Qi=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var qi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},gp={nullValue:"NULL_VALUE"};function Gs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?mg(n)?4:EN(n)?9007199254740991:yg(n)?10:11:X()}function vr(n,e){if(n===e)return!0;let t=Gs(n);if(t!==Gs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return _l(n).isEqual(_l(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Kr(i.timestampValue),a=Kr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ki(i.bytesValue).isEqual(Ki(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?vl(o)===vl(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ua(n.arrayValue.values||[],e.arrayValue.values||[],vr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ck(o)!==ck(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!vr(o[c],a[c])))return!1;return!0}(n,e);default:return X()}}function El(n,e){return(n.values||[]).find(t=>vr(t,e))!==void 0}function Yi(n,e){if(n===e)return 0;let t=Gs(n),r=Gs(e);if(t!==r)return de(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return de(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Qe(s.integerValue||s.doubleValue),c=Qe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return uk(n.timestampValue,e.timestampValue);case 4:return uk(_l(n),_l(e));case 5:return de(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Ki(s),c=Ki(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=de(a[l],c[l]);if(d!==0)return d}return de(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=de(Qe(s.latitude),Qe(o.latitude));return a!==0?a:de(Qe(s.longitude),Qe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return lk(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,D=de(((l=m?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return D!==0?D:lk(m,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===qi.mapValue&&o===qi.mapValue)return 0;if(s===qi.mapValue)return 1;if(o===qi.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=de(c[f],d[f]);if(g!==0)return g;let m=Yi(a[c[f]],l[d[f]]);if(m!==0)return m}return de(c.length,d.length)}(n.mapValue,e.mapValue);default:throw X()}}function uk(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return de(n,e);let t=Kr(n),r=Kr(e),i=de(t.seconds,r.seconds);return i!==0?i:de(t.nanos,r.nanos)}function lk(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Yi(t[i],r[i]);if(s)return s}return de(t.length,r.length)}function $a(n){return yE(n)}function yE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Kr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ki(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return W.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=yE(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${yE(t.fields[o])}`;return i+"}"}(n.mapValue):X()}function Ws(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vE(n){return!!n&&"integerValue"in n}function Il(n){return!!n&&"arrayValue"in n}function dk(n){return!!n&&"nullValue"in n}function hk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function mp(n){return!!n&&"mapValue"in n}function yg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function hl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ro(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=hl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=hl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function EN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var IN={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function h3(n){return"nullValue"in n?gp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Ws(Qi.empty(),W.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?yg(n)?IN:{mapValue:{}}:X()}function f3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Ws(Qi.empty(),W.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?IN:"mapValue"in n?yg(n)?{mapValue:{}}:qi:X()}function fk(n,e){let t=Yi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function pk(n,e){let t=Yi(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var Ut=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!mp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=hl(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=hl(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());mp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];mp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ro(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(hl(this.value))}};function bN(n){let e=[];return ro(n.fields,(t,r)=>{let i=new ot([t]);if(mp(r)){let s=bN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new En(e)}var pt=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ae.min(),ae.min(),ae.min(),Ut.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ae.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ae.min(),ae.min(),Ut.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ae.min(),ae.min(),Ut.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var wr=class{constructor(e,t){this.position=e,this.inclusive=t}};function gk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),t.key):r=Yi(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function mk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!vr(n.position[t],e.position[t]))return!1;return!0}var Ks=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function p3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Tp=class{},Ie=class n extends Tp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new EE(e,t,r):t==="array-contains"?new DE(e,r):t==="in"?new Sp(e,r):t==="not-in"?new CE(e,r):t==="array-contains-any"?new TE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new IE(e,r):new bE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Yi(t,this.value)):t!==null&&Gs(this.value)===Gs(t)&&this.matchesComparison(Yi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Oe=class n extends Tp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return za(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function za(n){return n.op==="and"}function wE(n){return n.op==="or"}function cb(n){return DN(n)&&za(n)}function DN(n){for(let e of n.filters)if(e instanceof Oe)return!1;return!0}function _E(n){if(n instanceof Ie)return n.field.canonicalString()+n.op.toString()+$a(n.value);if(cb(n))return n.filters.map(e=>_E(e)).join(",");{let e=n.filters.map(t=>_E(t)).join(",");return`${n.op}(${e})`}}function CN(n,e){return n instanceof Ie?function(r,i){return i instanceof Ie&&r.op===i.op&&r.field.isEqual(i.field)&&vr(r.value,i.value)}(n,e):n instanceof Oe?function(r,i){return i instanceof Oe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&CN(o,i.filters[a]),!0):!1}(n,e):void X()}function TN(n,e){let t=n.filters.concat(e);return Oe.create(t,n.op)}function SN(n){return n instanceof Ie?function(t){return`${t.field.canonicalString()} ${t.op} ${$a(t.value)}`}(n):n instanceof Oe?function(t){return t.op.toString()+" {"+t.getFilters().map(SN).join(" ,")+"}"}(n):"Filter"}var EE=class extends Ie{constructor(e,t,r){super(e,t,r),this.key=W.fromName(r.referenceValue)}matches(e){let t=W.comparator(e.key,this.key);return this.matchesComparison(t)}},IE=class extends Ie{constructor(e,t){super(e,"in",t),this.keys=AN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},bE=class extends Ie{constructor(e,t){super(e,"not-in",t),this.keys=AN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function AN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>W.fromName(r.referenceValue))}var DE=class extends Ie{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Il(t)&&El(t.arrayValue,this.value)}},Sp=class extends Ie{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&El(this.value.arrayValue,t)}},CE=class extends Ie{constructor(e,t){super(e,"not-in",t)}matches(e){if(El(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!El(this.value.arrayValue,t)}},TE=class extends Ie{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Il(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>El(this.value.arrayValue,r))}};var SE=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function AE(n,e=null,t=[],r=[],i=null,s=null,o=null){return new SE(n,e,t,r,i,s,o)}function Qs(n){let e=G(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_E(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ll(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$a(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$a(r)).join(",")),e.ue=t}return e.ue}function jl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!p3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!CN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mk(n.startAt,e.startAt)&&mk(n.endAt,e.endAt)}function Ap(n){return W.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function xp(n,e){return n.filters.filter(t=>t instanceof Ie&&t.field.isEqual(e))}function yk(n,e,t){let r=gp,i=!0;for(let s of xp(n,e)){let o=gp,a=!0;switch(s.op){case"<":case"<=":o=h3(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=gp}fk({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];fk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}function vk(n,e,t){let r=qi,i=!0;for(let s of xp(n,e)){let o=qi,a=!0;switch(s.op){case">=":case">":o=f3(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=qi}pk({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){let o=t.position[s];pk({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}}return{value:r,inclusive:i}}var Yn=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function xN(n,e,t,r,i,s,o,a){return new Yn(n,e,t,r,i,s,o,a)}function ic(n){return new Yn(n)}function wk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function ub(n){return n.collectionGroup!==null}function La(n){let e=G(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ue(ot.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ks(s,r))}),t.has(ot.keyField().canonicalString())||e.ce.push(new Ks(ot.keyField(),r))}return e.ce}function Jt(n){let e=G(n);return e.le||(e.le=g3(e,La(n))),e.le}function g3(n,e){if(n.limitType==="F")return AE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ks(i.field,s)});let t=n.endAt?new wr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new wr(n.startAt.position,n.startAt.inclusive):null;return AE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xE(n,e){let t=n.filters.concat([e]);return new Yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Mp(n,e,t){return new Yn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ul(n,e){return jl(Jt(n),Jt(e))&&n.limitType===e.limitType}function MN(n){return`${Qs(Jt(n))}|lt:${n.limitType}`}function ka(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>SN(i)).join(", ")}]`),Ll(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$a(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$a(i)).join(",")),`Target(${r})`}(Jt(n))}; limitType=${n.limitType})`}function Bl(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of La(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=gk(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,La(r),i)||r.endAt&&!function(o,a,c){let l=gk(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,La(r),i))}(n,e)}function RN(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function kN(n){return(e,t)=>{let r=!1;for(let i of La(n)){let s=m3(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function m3(n,e,t){let r=n.field.isKeyField()?W.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Yi(c,l):X()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}var _r=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return wN(this.inner)}size(){return this.innerSize}};var y3=new We(W.comparator);function ln(){return y3}var NN=new We(W.comparator);function ll(...n){let e=NN;for(let t of n)e=e.insert(t.key,t);return e}function PN(n){let e=NN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function pr(){return fl()}function ON(){return fl()}function fl(){return new _r(n=>n.toString(),(n,e)=>n.isEqual(e))}var v3=new We(W.comparator),w3=new Ue(W.comparator);function fe(...n){let e=w3;for(let t of n)e=e.add(t);return e}var _3=new Ue(de);function lb(){return _3}function db(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vl(e)?"-0":e}}function FN(n){return{integerValue:""+n}}function VN(n,e){return pN(e)?FN(e):db(n,e)}var qa=class{constructor(){this._=void 0}};function E3(n,e,t){return n instanceof Zi?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mg(s)&&(s=ab(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Qr?jN(n,e):n instanceof Yr?UN(n,e):function(i,s){let o=LN(i,s),a=_k(o)+_k(i.Pe);return vE(o)&&vE(i.Pe)?FN(a):db(i.serializer,a)}(n,e)}function I3(n,e,t){return n instanceof Qr?jN(n,e):n instanceof Yr?UN(n,e):t}function LN(n,e){return n instanceof Ji?function(r){return vE(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Zi=class extends qa{},Qr=class extends qa{constructor(e){super(),this.elements=e}};function jN(n,e){let t=BN(e);for(let r of n.elements)t.some(i=>vr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Yr=class extends qa{constructor(e){super(),this.elements=e}};function UN(n,e){let t=BN(e);for(let r of n.elements)t=t.filter(i=>!vr(i,r));return{arrayValue:{values:t}}}var Ji=class extends qa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function _k(n){return Qe(n.integerValue||n.doubleValue)}function BN(n){return Il(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Ys=class{constructor(e,t){this.field=e,this.transform=t}};function b3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Qr&&i instanceof Qr||r instanceof Yr&&i instanceof Yr?Ua(r.elements,i.elements,vr):r instanceof Ji&&i instanceof Ji?vr(r.Pe,i.Pe):r instanceof Zi&&i instanceof Zi}(n.transform,e.transform)}var ME=class{constructor(e,t){this.version=e,this.transformResults=t}},rt=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function yp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ha=class{};function $N(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new es(n.key,rt.none()):new Xi(n.key,n.data,rt.none());{let t=n.data,r=Ut.empty(),i=new Ue(ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zn(n.key,r,new En(i.toArray()),rt.none())}}function D3(n,e,t){n instanceof Xi?function(i,s,o){let a=i.value.clone(),c=Ik(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Zn?function(i,s,o){if(!yp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Ik(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(zN(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function pl(n,e,t,r){return n instanceof Xi?function(s,o,a,c){if(!yp(s.precondition,o))return a;let l=s.value.clone(),d=bk(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Zn?function(s,o,a,c){if(!yp(s.precondition,o))return a;let l=bk(s.fieldTransforms,c,o),d=o.data;return d.setAll(zN(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return yp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function C3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=LN(r.transform,i||null);s!=null&&(t===null&&(t=Ut.empty()),t.set(r.field,s))}return t||null}function Ek(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ua(r,i,(s,o)=>b3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Xi=class extends Ha{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Zn=class extends Ha{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function zN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function Ik(n,e,t){let r=new Map;re(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,I3(o,a,t[i]))}return r}function bk(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,E3(s,o,e))}return r}var es=class extends Ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},bl=class extends Ha{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Dl=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&D3(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=pl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=pl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=ON();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=$N(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ae.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),fe())}isEqual(e){return this.batchId===e.batchId&&Ua(this.mutations,e.mutations,(t,r)=>Ek(t,r))&&Ua(this.baseMutations,e.baseMutations,(t,r)=>Ek(t,r))}},RE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){re(e.mutations.length===r.length);let i=function(){return v3}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var Cl=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var kE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var dt,Ce;function qN(n){switch(n){default:return X();case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0}}function HN(n){if(n===void 0)return st("GRPC error has no .code"),N.UNKNOWN;switch(n){case dt.OK:return N.OK;case dt.CANCELLED:return N.CANCELLED;case dt.UNKNOWN:return N.UNKNOWN;case dt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case dt.INTERNAL:return N.INTERNAL;case dt.UNAVAILABLE:return N.UNAVAILABLE;case dt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case dt.NOT_FOUND:return N.NOT_FOUND;case dt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case dt.ABORTED:return N.ABORTED;case dt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case dt.DATA_LOSS:return N.DATA_LOSS;default:return X()}}(Ce=dt||(dt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var Dk=null;function GN(){return new TextEncoder}var T3=new ji([4294967295,4294967295],0);function Ck(n){let e=GN().encode(n),t=new W_;return t.update(e),new Uint8Array(t.digest())}function Tk(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ji([t,r],0),new ji([i,s],0)]}var NE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new qs(`Invalid padding: ${t}`);if(r<0)throw new qs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new qs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new qs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ji.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ji.fromNumber(r)));return i.compare(T3)===1&&(i=new ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Ck(e),[r,i]=Tk(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=Ck(e),[r,i]=Tk(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},qs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Tl=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ae.min(),i,new We(de),ln(),fe())}},Sl=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,fe(),fe(),fe())}};var ja=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Rp=class{constructor(e,t){this.targetId=e,this.me=t}},kp=class{constructor(e,t,r=ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Np=class{constructor(){this.fe=0,this.ge=Ak(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=fe(),t=fe(),r=fe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:X()}}),new Sl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Ak()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},PE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=ln(),this.qe=Sk(),this.Qe=new We(de)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(Ap(s))if(r===0){let o=new W(s.path);this.Ue(t,o,pt.newNoDocument(o,ae.min()))}else re(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}Dk?.et(function(d,f,g,m,w){var D,C,P,O,F,U;let Q={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},z=f.unchangedNames;return z&&(Q.bloomFilter={applied:w===0,hashCount:(D=z?.hashCount)!==null&&D!==void 0?D:0,bitmapLength:(O=(P=(C=z?.bits)===null||C===void 0?void 0:C.bitmap)===null||P===void 0?void 0:P.length)!==null&&O!==void 0?O:0,padding:(U=(F=z?.bits)===null||F===void 0?void 0:F.padding)!==null&&U!==void 0?U:0,mightContain:I=>{var v;return(v=m?.mightContain(I))!==null&&v!==void 0&&v}}),Q}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ki(r).toUint8Array()}catch(c){if(c instanceof Cp)return Qn("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new NE(o,i,s)}catch(c){return Qn(c instanceof qs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Ap(a.target)){let c=new W(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,pt.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=fe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Tl(e,t,this.Qe,this.ke,r);return this.ke=ln(),this.qe=Sk(),this.Qe=new We(de),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Np,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ue(de),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Np),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Sk(){return new We(W.comparator)}function Ak(){return new We(W.comparator)}var S3={asc:"ASCENDING",desc:"DESCENDING"},A3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x3={and:"AND",or:"OR"},OE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function FE(n,e){return n.useProto3Json||Ll(e)?e:{value:e}}function Ga(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function M3(n,e){return Ga(n,e.toTimestamp())}function at(n){return re(!!n),ae.fromTimestamp(function(t){let r=Kr(t);return new Je(r.seconds,r.nanos)}(n))}function hb(n,e){return VE(n,e).canonicalString()}function VE(n,e){let t=function(i){return new Te(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function KN(n){let e=Te.fromString(n);return re(iP(e)),e}function Al(n,e){return hb(n.databaseId,e.path)}function mr(n,e){let t=KN(e);if(t.get(1)!==n.databaseId.projectId)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new V(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new W(ZN(t))}function QN(n,e){return hb(n.databaseId,e)}function YN(n){let e=KN(n);return e.length===4?Te.emptyPath():ZN(e)}function LE(n){return new Te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZN(n){return re(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function xk(n,e,t){return{name:Al(n,e),fields:t.value.mapValue.fields}}function JN(n,e,t){let r=mr(n,e.name),i=at(e.updateTime),s=e.createTime?at(e.createTime):ae.min(),o=new Ut({mapValue:{fields:e.fields}}),a=pt.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function R3(n,e){return"found"in e?function(r,i){re(!!i.found),i.found.name,i.found.updateTime;let s=mr(r,i.found.name),o=at(i.found.updateTime),a=i.found.createTime?at(i.found.createTime):ae.min(),c=new Ut({mapValue:{fields:i.found.fields}});return pt.newFoundDocument(s,o,a,c)}(n,e):"missing"in e?function(r,i){re(!!i.missing),re(!!i.readTime);let s=mr(r,i.missing),o=at(i.readTime);return pt.newNoDocument(s,o)}(n,e):X()}function k3(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(re(d===void 0||typeof d=="string"),ct.fromBase64String(d||"")):(re(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ct.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?N.UNKNOWN:HN(l.code);return new V(d,l.message||"")}(o);t=new kp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=mr(n,r.document.name),s=at(r.document.updateTime),o=r.document.createTime?at(r.document.createTime):ae.min(),a=new Ut({mapValue:{fields:r.document.fields}}),c=pt.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new ja(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=mr(n,r.document),s=r.readTime?at(r.readTime):ae.min(),o=pt.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ja([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=mr(n,r.document),s=r.removedTargetIds||[];t=new ja([],s,i,null)}else{if(!("filter"in e))return X();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new kE(i,s),a=r.targetId;t=new Rp(a,o)}}return t}function xl(n,e){let t;if(e instanceof Xi)t={update:xk(n,e.key,e.value)};else if(e instanceof es)t={delete:Al(n,e.key)};else if(e instanceof Zn)t={update:xk(n,e.key,e.data),updateMask:L3(e.fieldMask)};else{if(!(e instanceof bl))return X();t={verify:Al(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Zi)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Yr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ji)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw X()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:M3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:X()}(n,e.precondition)),t}function jE(n,e){let t=e.currentDocument?function(s){return s.updateTime!==void 0?rt.updateTime(at(s.updateTime)):s.exists!==void 0?rt.exists(s.exists):rt.none()}(e.currentDocument):rt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let c=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME"),c=new Zi;else if("appendMissingElements"in a){let d=a.appendMissingElements.values||[];c=new Qr(d)}else if("removeAllFromArray"in a){let d=a.removeAllFromArray.values||[];c=new Yr(d)}else"increment"in a?c=new Ji(o,a.increment):X();let l=ot.fromServerFormat(a.fieldPath);return new Ys(l,c)}(n,i)):[];if(e.update){e.update.name;let i=mr(n,e.update.name),s=new Ut({mapValue:{fields:e.update.fields}});if(e.updateMask){let o=function(c){let l=c.fieldPaths||[];return new En(l.map(d=>ot.fromServerFormat(d)))}(e.updateMask);return new Zn(i,s,o,t,r)}return new Xi(i,s,t,r)}if(e.delete){let i=mr(n,e.delete);return new es(i,t)}if(e.verify){let i=mr(n,e.verify);return new bl(i,t)}return X()}function N3(n,e){return n&&n.length>0?(re(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?at(i.updateTime):at(s);return o.isEqual(ae.min())&&(o=at(s)),new ME(o,i.transformResults||[])}(t,e))):[]}function XN(n,e){return{documents:[QN(n,e.path)]}}function eP(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=QN(n,i);let s=function(l){if(l.length!==0)return rP(Oe.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Na(g.field),direction:O3(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=FE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function tP(n){let e=YN(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){re(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=nP(f);return g instanceof Oe&&cb(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(w){return new Ks(Pa(w.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Ll(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new wr(m,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,m=f.values||[];return new wr(m,g)}(t.endAt)),xN(e,i,o,s,a,"F",c,l)}function P3(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Pa(t.unaryFilter.field);return Ie.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Pa(t.unaryFilter.field);return Ie.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Pa(t.unaryFilter.field);return Ie.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Pa(t.unaryFilter.field);return Ie.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(n):n.fieldFilter!==void 0?function(t){return Ie.create(Pa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Oe.create(t.compositeFilter.filters.map(r=>nP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return X()}}(t.compositeFilter.op))}(n):X()}function O3(n){return S3[n]}function F3(n){return A3[n]}function V3(n){return x3[n]}function Na(n){return{fieldPath:n.canonicalString()}}function Pa(n){return ot.fromServerFormat(n.fieldPath)}function rP(n){return n instanceof Ie?function(t){if(t.op==="=="){if(hk(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NAN"}};if(dk(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hk(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NOT_NAN"}};if(dk(t.value))return{unaryFilter:{field:Na(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Na(t.field),op:F3(t.op),value:t.value}}}(n):n instanceof Oe?function(t){let r=t.getFilters().map(i=>rP(i));return r.length===1?r[0]:{compositeFilter:{op:V3(t.op),filters:r}}}(n):X()}function L3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wa=class n{constructor(e,t,r,i,s=ae.min(),o=ae.min(),a=ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Pp=class{constructor(e){this.ct=e}};function j3(n,e){let t;if(e.document)t=JN(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=W.fromSegments(e.noDocument.path),i=Js(e.noDocument.readTime);t=pt.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return X();{let r=W.fromSegments(e.unknownDocument.path),i=Js(e.unknownDocument.version);t=pt.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let s=new Je(i[0],i[1]);return ae.fromTimestamp(s)}(e.readTime)),t}function Mk(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Op(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Al(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Ga(s,o.version.toTimestamp()),createTime:Ga(s,o.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Zs(e.version)};else{if(!e.isUnknownDocument())return X();r.unknownDocument={path:t.path.toArray(),version:Zs(e.version)}}return r}function Op(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Zs(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Js(n){let e=new Je(n.seconds,n.nanoseconds);return ae.fromTimestamp(e)}function Bs(n,e){let t=(e.baseMutations||[]).map(s=>jE(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){let o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){let a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}let r=e.mutations.map(s=>jE(n.ct,s)),i=Je.fromMillis(e.localWriteTimeMs);return new Dl(e.batchId,i,t,r)}function dl(n){let e=Js(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?Js(n.lastLimboFreeSnapshotVersion):ae.min(),r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return re(s.documents.length===1),Jt(ic(YN(s.documents[0])))}(n.query):function(s){return Jt(tP(s))}(n.query),new Wa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ct.fromBase64String(n.resumeToken))}function sP(n,e){let t=Zs(e.snapshotVersion),r=Zs(e.lastLimboFreeSnapshotVersion),i;i=Ap(e.target)?XN(n.ct,e.target):eP(n.ct,e.target)._t;let s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Qs(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function fb(n){let e=tP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mp(e,e.limit,"L"):e}function X_(n,e){return new Cl(e.largestBatchId,jE(n.ct,e.overlayMutation))}function Rk(n,e){let t=e.path.lastSegment();return[n,Zt(e.path.popLast()),t]}function kk(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Zs(r.readTime),documentKey:Zt(r.documentKey.path),largestBatchId:r.largestBatchId}}var UE=class{getBundleMetadata(e,t){return Nk(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Js(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return Nk(e).put(function(i){return{bundleId:i.id,createTime:Zs(at(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Pk(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:fb(s.bundledQuery),readTime:Js(s.readTime)}}(r)})}saveNamedQuery(e,t){return Pk(e).put(function(i){return{name:i.name,readTime:Zs(at(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function Nk(n){return It(n,"bundles")}function Pk(n){return It(n,"namedQueries")}var Fp=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return ol(e).get(Rk(this.userId,t)).next(r=>r?X_(this.serializer,r):null)}getOverlays(e,t){let r=pr();return R.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((s,o)=>{let a=new Cl(t,o);i.push(this.ht(e,a))}),R.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(o=>i.add(Zt(o.getCollectionPath())));let s=[];return i.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ol(e).j("collectionPathOverlayIndex",a))}),R.waitFor(s)}getOverlaysForCollection(e,t,r){let i=pr(),s=Zt(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ol(e).U("collectionPathOverlayIndex",o).next(a=>{for(let c of a){let l=X_(this.serializer,c);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let s=pr(),o,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ol(e).J({index:"collectionGroupOverlayIndex",range:a},(c,l,d)=>{let f=X_(this.serializer,l);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):d.done()}).next(()=>s)}ht(e,t){return ol(e).put(function(i,s,o){let[a,c,l]=Rk(s,o.mutation.key);return{userId:s,collectionPath:c,documentId:l,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:xl(i.ct,o.mutation)}}(this.serializer,this.userId,t))}};function ol(n){return It(n,"documentOverlays")}var BE=class{Pt(e){return It(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?ct.fromUint8Array(r):ct.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Gr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Qe(e.integerValue));else if("doubleValue"in e){let r=Qe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),vl(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Kr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ki(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?EN(e)?this.dt(t,Number.MAX_SAFE_INTEGER):yg(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):X()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Qe(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),W.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Gr.vt=new Gr;function U3(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Ok(n){let e=64-function(r){let i=0;for(let s=0;s<8;++s){let o=U3(255&r[s]);if(i+=o,o!==8)break}return i}(n);return Math.ceil(e/8)}var $E=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=Ok(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=Ok(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(s){let o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},zE=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},qE=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},$s=class{constructor(){this.jt=new $E,this.Ht=new zE(this.jt),this.Jt=new qE(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var zs=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function Ui(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Fk(n.arrayValue,e.arrayValue),t!==0?t:(t=Fk(n.directionalValue,e.directionalValue),t!==0?t:W.comparator(n.documentKey,e.documentKey)))}function Fk(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var Vp=class{constructor(e){this.Xt=new Ue((t,r)=>ot.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(re(e.collectionGroup===this.collectionId),this.nn)return!1;let t=dE(e);if(t!==void 0&&!this.sn(t))return!1;let r=js(e),i=new Set,s=0,o=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let c=r[s];if(!this.on(a,c)||!this._n(this.en[o++],c))return!1}++s}for(;s<r.length;++s){let a=r[s];if(o>=this.en.length||!this._n(this.en[o++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Ue(ot.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Va(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Va(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Va(r.field,r.dir==="asc"?0:1)));return new Ba(Ba.UNKNOWN_ID,this.collectionId,t,yl.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function oP(n){var e,t;if(re(n instanceof Ie||n instanceof Oe),n instanceof Ie){if(n instanceof Sp){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Ie.create(n.field,"==",s)))||[];return Oe.create(i,"or")}return n}let r=n.filters.map(i=>oP(i));return Oe.create(r,n.op)}function B3(n){if(n.getFilters().length===0)return[];let e=WE(oP(n));return re(aP(e)),HE(e)||GE(e)?[e]:e.getFilters()}function HE(n){return n instanceof Ie}function GE(n){return n instanceof Oe&&cb(n)}function aP(n){return HE(n)||GE(n)||function(t){if(t instanceof Oe&&wE(t)){for(let r of t.getFilters())if(!HE(r)&&!GE(r))return!1;return!0}return!1}(n)}function WE(n){if(re(n instanceof Ie||n instanceof Oe),n instanceof Ie)return n;if(n.filters.length===1)return WE(n.filters[0]);let e=n.filters.map(r=>WE(r)),t=Oe.create(e,n.op);return t=Lp(t),aP(t)?t:(re(t instanceof Oe),re(za(t)),re(t.filters.length>1),t.filters.reduce((r,i)=>pb(r,i)))}function pb(n,e){let t;return re(n instanceof Ie||n instanceof Oe),re(e instanceof Ie||e instanceof Oe),t=n instanceof Ie?e instanceof Ie?function(i,s){return Oe.create([i,s],"and")}(n,e):Vk(n,e):e instanceof Ie?Vk(e,n):function(i,s){if(re(i.filters.length>0&&s.filters.length>0),za(i)&&za(s))return TN(i,s.getFilters());let o=wE(i)?i:s,a=wE(i)?s:i,c=o.filters.map(l=>pb(l,a));return Oe.create(c,"or")}(n,e),Lp(t)}function Vk(n,e){if(za(e))return TN(e,n.getFilters());{let t=e.filters.map(r=>pb(n,r));return Oe.create(t,"or")}}function Lp(n){if(re(n instanceof Ie||n instanceof Oe),n instanceof Ie)return n;let e=n.getFilters();if(e.length===1)return Lp(e[0]);if(DN(n))return n;let t=e.map(i=>Lp(i)),r=[];return t.forEach(i=>{i instanceof Ie?r.push(i):i instanceof Oe&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Oe.create(r,n.op)}var KE=class{constructor(){this.un=new Ml}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(kn.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(kn.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},Ml=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ue(Te.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ue(Te.comparator)).toArray()}};var lp=new Uint8Array(0),QE=class{constructor(e,t){this.databaseId=t,this.cn=new Ml,this.ln=new _r(r=>Qs(r),(r,i)=>jl(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let s={collectionId:r,parent:Zt(i)};return Lk(e).put(s)}return R.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[uN(t),""],!1,!0);return Lk(e).U(i).next(s=>{for(let o of s){if(o.collectionId!==t)break;r.push(fr(o.parent))}return r})}addFieldIndex(e,t){let r=al(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;let s=r.add(i);if(t.indexState){let o=xa(e);return s.next(a=>{o.put(kk(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){let r=al(e),i=xa(e),s=Aa(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=al(e),r=Aa(e),i=xa(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return R.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let s=new Vp(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){let r=Aa(e),i=!0,s=new Map;return R.forEach(this.hn(t),o=>this.Pn(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=fe(),a=[];return R.forEach(s,(c,l)=>{j("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(U=>`${U.fieldPath}:${U.kind}`).join(",")}`}(c)} to execute ${Qs(t)}`);let d=function(F,U){let Q=dE(U);if(Q===void 0)return null;for(let z of xp(F,Q.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null}(l,c),f=function(F,U){let Q=new Map;for(let z of js(U))for(let I of xp(F,z.fieldPath))switch(I.op){case"==":case"in":Q.set(z.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return Q.set(z.fieldPath.canonicalString(),I.value),Array.from(Q.values())}return null}(l,c),g=function(F,U){let Q=[],z=!0;for(let I of js(U)){let v=I.kind===0?yk(F,I.fieldPath,F.startAt):vk(F,I.fieldPath,F.startAt);Q.push(v.value),z&&(z=v.inclusive)}return new wr(Q,z)}(l,c),m=function(F,U){let Q=[],z=!0;for(let I of js(U)){let v=I.kind===0?vk(F,I.fieldPath,F.endAt):yk(F,I.fieldPath,F.endAt);Q.push(v.value),z&&(z=v.inclusive)}return new wr(Q,z)}(l,c),w=this.In(c,l,g),D=this.In(c,l,m),C=this.Tn(c,l,f),P=this.En(c.indexId,d,w,g.inclusive,D,m.inclusive,C);return R.forEach(P,O=>r.G(O,t.limit).next(F=>{F.forEach(U=>{let Q=W.fromSegments(U.documentKey);o.has(Q)||(o=o.add(Q),a.push(Q))})}))}).next(()=>a)}return R.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=B3(Oe.create(e.filters,"and")).map(r=>AE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,o,a){let c=(t!=null?t.length:1)*Math.max(r.length,s.length),l=c/(t!=null?t.length:1),d=[];for(let f=0;f<c;++f){let g=t?this.dn(t[f/l]):lp,m=this.An(e,g,r[f%l],i),w=this.Rn(e,g,s[f%l],o),D=a.map(C=>this.An(e,g,C,!0));d.push(...this.createRange(m,w,D))}return d}An(e,t,r,i){let s=new zs(e,W.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){let s=new zs(e,W.empty(),t,r);return i?s.Zt():s}Pn(e,t){let r=new Vp(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(let a of s)r.rn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2,i=this.hn(t);return R.forEach(i,s=>this.Pn(e,s).next(o=>{o?r!==0&&o.fields.length<function(c){let l=new Ue(ot.comparator),d=!1;for(let f of c.filters)for(let g of f.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?d=!0:l=l.add(g.field));for(let f of c.orderBy)f.field.isKeyField()||(l=l.add(f.field));return l.size+(d?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new $s;for(let i of js(e)){let s=t.data.field(i.fieldPath);if(s==null)return null;let o=r.Yt(i.kind);Gr.vt.It(s,o)}return r.zt()}dn(e){let t=new $s;return Gr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new $s;return Gr.vt.It(Ws(this.databaseId,t),r.Yt(function(s){let o=js(s);return o.length===0?0:o[o.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new $s);let s=0;for(let o of js(e)){let a=r[s++];for(let c of i)if(this.fn(t,o.fieldPath)&&Il(a))i=this.gn(i,o,a);else{let l=c.Yt(o.kind);Gr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],s=[];for(let o of r.arrayValue.values||[])for(let a of i){let c=new $s;c.seed(a.zt()),Gr.vt.It(o,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Ie&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=al(e),i=xa(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{let o=[];return R.forEach(s,a=>i.get([a.indexId,this.uid]).next(c=>{o.push(function(d,f){let g=f?new yl(f.sequenceNumber,new kn(Js(f.readTime),new W(fr(f.documentKey)),f.largestBatchId)):yl.empty(),m=d.fields.map(([w,D])=>new Va(ot.fromServerFormat(w),D));return new Ba(d.indexId,d.collectionGroup,m,g)}(a,c))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:de(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=al(e),s=xa(e);return this.yn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>R.forEach(a,c=>s.put(kk(c.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){let r=new Map;return R.forEach(t,(i,s)=>{let o=r.get(i.collectionGroup);return(o?R.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),R.forEach(a,c=>this.wn(e,i,c).next(l=>{let d=this.Sn(s,c);return l.isEqual(d)?R.resolve():this.bn(e,s,c,l,d)}))))})}Dn(e,t,r,i){return Aa(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Aa(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Aa(e),s=new Ue(Ui);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(o,a)=>{s=s.add(new zs(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Ue(Ui),i=this.Vn(t,e);if(i==null)return r;let s=dE(t);if(s!=null){let o=e.data.field(s.fieldPath);if(Il(o))for(let a of o.arrayValue.values||[])r=r.add(new zs(t.indexId,e.key,this.dn(a),i))}else r=r.add(new zs(t.indexId,e.key,lp,i));return r}bn(e,t,r,i,s){j("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let o=[];return function(c,l,d,f,g){let m=c.getIterator(),w=l.getIterator(),D=Sa(m),C=Sa(w);for(;D||C;){let P=!1,O=!1;if(D&&C){let F=d(D,C);F<0?O=!0:F>0&&(P=!0)}else D!=null?O=!0:P=!0;P?(f(C),C=Sa(w)):O?(g(D),D=Sa(m)):(D=Sa(m),C=Sa(w))}}(i,s,Ui,a=>{o.push(this.Dn(e,t,r,a))},a=>{o.push(this.vn(e,t,r,a))}),R.waitFor(o)}yn(e){let t=1;return xa(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Ui(o,a)).filter((o,a,c)=>!a||Ui(o,c[a-1])!==0);let i=[];i.push(e);for(let o of r){let a=Ui(o,e),c=Ui(o,t);if(a===0)i[0]=e.Zt();else if(a>0&&c<0)i.push(o),i.push(o.Zt());else if(c>0)break}i.push(t);let s=[];for(let o=0;o<i.length;o+=2){if(this.Cn(i[o],i[o+1]))return[];let a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,lp,[]],c=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,lp,[]];s.push(IDBKeyRange.bound(a,c))}return s}Cn(e,t){return Ui(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jk)}getMinOffset(e,t){return R.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||X())).next(jk)}};function Lk(n){return It(n,"collectionParents")}function Aa(n){return It(n,"indexEntries")}function al(n){return It(n,"indexConfiguration")}function xa(n){return It(n,"indexState")}function jk(n){re(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;ib(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new kn(e.readTime,e.documentKey,t)}var Uk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function cP(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId),a=0,c=r.J({range:o},(d,f,g)=>(a++,g.delete()));s.push(c.next(()=>{re(a===1)}));let l=[];for(let d of t.mutations){let f=gN(e,d.key.path,t.batchId);s.push(i.delete(f)),l.push(d.key)}return R.waitFor(s).next(()=>l)}function jp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw X();e=n.noDocument}return JSON.stringify(e).length}Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(41943040,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);var Up=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){re(e.uid!=="");let s=e.isAuthenticated()?e.uid:"";return new n(s,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bi(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let s=Oa(e),o=Bi(e);return o.add({}).next(a=>{re(typeof a=="number");let c=new Dl(a,t,r,i),l=function(m,w,D){let C=D.baseMutations.map(O=>xl(m.ct,O)),P=D.mutations.map(O=>xl(m.ct,O));return{userId:w,batchId:D.batchId,localWriteTimeMs:D.localWriteTime.toMillis(),baseMutations:C,mutations:P}}(this.serializer,this.userId,c),d=[],f=new Ue((g,m)=>de(g.canonicalString(),m.canonicalString()));for(let g of i){let m=gN(this.userId,g.key.path,a);f=f.add(g.key.path.popLast()),d.push(o.put(l)),d.push(s.put(m,WH))}return f.forEach(g=>{d.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[a]=c.keys()}),R.waitFor(d).next(()=>c)})}lookupMutationBatch(e,t){return Bi(e).get(t).next(r=>r?(re(r.userId===this.userId),Bs(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?R.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),s=null;return Bi(e).J({index:"userMutationsIndex",range:i},(o,a,c)=>{a.userId===this.userId&&(re(a.batchId>=r),s=Bs(this.serializer,a)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Bi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bi(e).U("userMutationsIndex",t).next(r=>r.map(i=>Bs(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=pp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return Oa(e).J({range:i},(o,a,c)=>{let[l,d,f]=o,g=fr(d);if(l===this.userId&&t.path.isEqual(g))return Bi(e).get(f).next(m=>{if(!m)throw X();re(m.userId===this.userId),s.push(Bs(this.serializer,m))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ue(de),i=[];return t.forEach(s=>{let o=pp(this.userId,s.path),a=IDBKeyRange.lowerBound(o),c=Oa(e).J({range:a},(l,d,f)=>{let[g,m,w]=l,D=fr(m);g===this.userId&&s.path.isEqual(D)?r=r.add(w):f.done()});i.push(c)}),R.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=pp(this.userId,r),o=IDBKeyRange.lowerBound(s),a=new Ue(de);return Oa(e).J({range:o},(c,l,d)=>{let[f,g,m]=c,w=fr(g);f===this.userId&&r.isPrefixOf(w)?w.length===i&&(a=a.add(m)):d.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(s=>{i.push(Bi(e).get(s).next(o=>{if(o===null)throw X();re(o.userId===this.userId),r.push(Bs(this.serializer,o))}))}),R.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return cP(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),R.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return R.resolve();let r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Oa(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){let c=fr(s[1]);i.push(c)}else a.done()}).next(()=>{re(i.length===0)})})}containsKey(e,t){return uP(e,this.userId,t)}Nn(e){return lP(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function uP(n,e,t){let r=pp(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r),o=!1;return Oa(n).J({range:s,H:!0},(a,c,l)=>{let[d,f,g]=a;d===e&&f===i&&(o=!0),l.done()}).next(()=>o)}function Bi(n){return It(n,"mutations")}function Oa(n){return It(n,"documentMutations")}function lP(n){return It(n,"mutationQueues")}var Ka=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var YE=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new Ka(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ae.fromTimestamp(new Je(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ma(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(re(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,s=[];return Ma(e).J((o,a)=>{let c=dl(a);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>R.waitFor(s)).next(()=>i)}forEachTarget(e,t){return Ma(e).J((r,i)=>{let s=dl(i);t(s)})}qn(e){return Bk(e).get("targetGlobalKey").next(t=>(re(t!==null),t))}Qn(e,t){return Bk(e).put("targetGlobalKey",t)}Kn(e,t){return Ma(e).put(sP(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Qs(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),s=null;return Ma(e).J({range:i,index:"queryTargetsIndex"},(o,a,c)=>{let l=dl(a);jl(t,l.target)&&(s=l,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){let i=[],s=$i(e);return t.forEach(o=>{let a=Zt(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),R.waitFor(i)}removeMatchingKeys(e,t,r){let i=$i(e);return R.forEach(t,s=>{let o=Zt(s.path);return R.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){let r=$i(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=$i(e),s=fe();return i.J({range:r,H:!0},(o,a,c)=>{let l=fr(o[1]),d=new W(l);s=s.add(d)}).next(()=>s)}containsKey(e,t){let r=Zt(t.path),i=IDBKeyRange.bound([r],[uN(r)],!1,!0),s=0;return $i(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],c,l)=>{o!==0&&(s++,l.done())}).next(()=>s>0)}ot(e,t){return Ma(e).get(t).next(r=>r?dl(r):null)}};function Ma(n){return It(n,"targets")}function Bk(n){return It(n,"targetGlobal")}function $i(n){return It(n,"targetDocuments")}function $k([n,e],[t,r]){let i=de(n,t);return i===0?de(e,r):i}var ZE=class{constructor(e){this.Un=e,this.buffer=new Ue($k),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();$k(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},JE=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){j("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>b(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){rs(t)?j("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield ns(t)}yield this.Hn(3e5)}))}},XE=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return R.resolve(_n.oe);let r=new ZE(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(j("LruGarbageCollector","Garbage collection skipped; disabled"),R.resolve(Uk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(j("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uk):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,o,a,c,l,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(j("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(s=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(l=Date.now(),Ra()<=er.DEBUG&&j("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(l-c)+`ms
Total Duration: ${l-d}ms`),R.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}};function $3(n,e){return new XE(n,e)}var eI=class{constructor(e,t){this.db=e,this.garbageCollector=$3(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return dp(e,r)}removeReference(e,t,r){return dp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return dp(e,t)}nr(e,t){return function(i,s){let o=!1;return lP(i).Y(a=>uP(i,a,s).next(c=>(c&&(o=!0),R.resolve(!c)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],s=0;return this.tr(e,(o,a)=>{if(a<=t){let c=this.nr(e,o).next(l=>{if(!l)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,ae.min()),$i(e).delete(function(f){return[0,Zt(f.path)]}(o))))});i.push(c)}}).next(()=>R.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return dp(e,t)}tr(e,t){let r=$i(e),i,s=_n.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:c,sequenceNumber:l})=>{o===0?(s!==_n.oe&&t(new W(fr(i)),s),s=l,i=c):s=_n.oe}).next(()=>{s!==_n.oe&&t(new W(fr(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function dp(n,e){return $i(n).put(function(r,i){return{targetId:0,path:Zt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var Bp=class{constructor(){this.changes=new _r(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tI=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ls(e).put(r)}removeEntry(e,t,r){return Ls(e).delete(function(s,o){let a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Op(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=pt.newInvalidDocument(t);return Ls(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cl(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:pt.newInvalidDocument(t)};return Ls(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(cl(t))},(i,s)=>{r={document:this.ir(t,s),size:jp(s)}}).next(()=>r)}getEntries(e,t){let r=ln();return this._r(e,t,(i,s)=>{let o=this.ir(i,s);r=r.insert(i,o)}).next(()=>r)}ar(e,t){let r=ln(),i=new We(W.comparator);return this._r(e,t,(s,o)=>{let a=this.ir(s,o);r=r.insert(s,a),i=i.insert(s,jp(o))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return R.resolve();let i=new Ue(Hk);t.forEach(c=>i=i.add(c));let s=IDBKeyRange.bound(cl(i.first()),cl(i.last())),o=i.getIterator(),a=o.getNext();return Ls(e).J({index:"documentKeyIndex",range:s},(c,l,d)=>{let f=W.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&Hk(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,l),a=o.hasNext()?o.getNext():null),a?d.$(cl(a)):d.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){let o=t.path,a=[o.popLast().toArray(),o.lastSegment(),Op(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ls(e).U(IDBKeyRange.bound(a,c,!0)).next(l=>{s?.incrementDocumentReadCount(l.length);let d=ln();for(let f of l){let g=this.ir(W.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);g.isFoundDocument()&&(Bl(t,g)||i.has(g.key))&&(d=d.insert(g.key,g))}return d})}getAllFromCollectionGroup(e,t,r,i){let s=ln(),o=qk(t,r),a=qk(t,kn.max());return Ls(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(c,l,d)=>{let f=this.ir(W.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);s=s.insert(f.key,f),s.size===i&&d.done()}).next(()=>s)}newChangeBuffer(e){return new nI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return zk(e).get("remoteDocumentGlobalKey").next(t=>(re(!!t),t))}rr(e,t){return zk(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=j3(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ae.min())))return r}return pt.newInvalidDocument(e)}};function dP(n){return new tI(n)}var nI=class extends Bp{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new _r(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Ue((s,o)=>de(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,a.readTime)),o.isValidDocument()){let c=Mk(this.cr.serializer,o);i=i.add(s.path.popLast());let l=jp(c);r+=l-a.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=a.size,this.trackRemovals){let c=Mk(this.cr.serializer,o.convertToNoDocument(ae.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),R.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,o)=>{this.lr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}};function zk(n){return It(n,"remoteDocumentGlobal")}function Ls(n){return It(n,"remoteDocumentsV14")}function cl(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qk(n,e){let t=e.documentKey.path.toArray();return[n,Op(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Hk(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=de(t[s],r[s]),i)return i;return i=de(t.length,r.length),i||(i=de(t[t.length-2],r[r.length-2]),i||de(t[t.length-1],r[r.length-1]))}var rI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var $p=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&pl(r.mutation,i,En.empty(),Je.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=fe()){let i=pr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ll();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=pr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,fe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ln(),o=fl(),a=function(){return fl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Zn)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),pl(d.mutation,l,d.mutation.getFieldMask(),Je.now())):o.set(l.key,En.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new rI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=fl(),i=new We((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||En.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||fe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=ON();d.forEach(g=>{if(!s.has(g)){let m=$N(t.get(g),r.get(g));m!==null&&f.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return R.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ub(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):R.resolve(pr()),a=-1,c=s;return o.next(l=>R.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?R.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,fe())).next(d=>({batchId:a,changes:PN(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new W(t)).next(r=>{let i=ll();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=ll();return this.indexManager.getCollectionParents(e,s).next(a=>R.forEach(a,c=>{let l=function(f,g){return new Yn(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,pt.newInvalidDocument(d)))});let a=ll();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&pl(d.mutation,l,En.empty(),Je.now()),Bl(t,l)&&(a=a.insert(c,l))}),a})}};var iI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:at(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:fb(i.bundledQuery),readTime:at(i.readTime)}}(t)),R.resolve()}};var sI=class{constructor(){this.overlays=new We(W.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=pr();return R.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=pr(),s=t.length+1,o=new W(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new We((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=pr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=pr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return R.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Cl(t,r));let s=this.Ir.get(t);s===void 0&&(s=fe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var oI=class{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var Rl=class{constructor(){this.Tr=new Ue(ht.Er),this.dr=new Ue(ht.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ht(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ht(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new W(new Te([])),r=new ht(t,e),i=new ht(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new W(new Te([])),r=new ht(t,e),i=new ht(t,e+1),s=fe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new ht(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ht=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return W.comparator(e.key,t.key)||de(e.wr,t.wr)}static Ar(e,t){return de(e.wr,t.wr)||W.comparator(e.key,t.key)}};var aI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ue(ht.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Dl(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new ht(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return R.resolve(o)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return R.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ht(t,0),i=new ht(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),R.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ue(de);return t.forEach(i=>{let s=new ht(i,0),o=new ht(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;W.isDocumentKey(s)||(s=s.child(""));let o=new ht(new W(s),0),a=new Ue(de);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),R.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){re(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let s=new ht(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ht(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var cI=class{constructor(e){this.Mr=e,this.docs=function(){return new We(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():pt.newInvalidDocument(t))}getEntries(e,t){let r=ln();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pt.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ln(),o=t.path,a=new W(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||ib(dN(d),r)<=0||(i.has(d.key)||Bl(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return R.resolve(s)}getAllFromCollectionGroup(e,t,r,i){X()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new uI(this)}getSize(e){return R.resolve(this.size)}},uI=class extends Bp{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var lI=class{constructor(e){this.persistence=e,this.Nr=new _r(t=>Qs(t),jl),this.lastRemoteSnapshotVersion=ae.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rl,this.targetCount=0,this.kr=Ka.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ka(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),R.waitFor(s).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),R.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var zp=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new _n(0),this.Kr=!1,this.Kr=!0,this.$r=new oI,this.referenceDelegate=e(this),this.Ur=new lI(this),this.indexManager=new KE,this.remoteDocumentCache=function(i){return new cI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Pp(t),this.Gr=new iI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new sI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new aI(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new dI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},dI=class extends Ip{constructor(e){super(),this.currentSequenceNumber=e}},qp=class n{constructor(e){this.persistence=e,this.Jr=new Rl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ae.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var hI=class{constructor(e){this.serializer=e}O(e,t,r,i){let s=new bp("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ak,{unique:!0}),c.createObjectStore("documentMutations")}(e),Gk(e),function(c){c.createObjectStore("remoteDocuments")}(e));let o=R.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Gk(e)),o=o.next(()=>function(c){let l=c.store("targetGlobal"),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ae.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",d)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(c,l){return l.store("mutations").U().next(d=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ak,{unique:!0});let f=l.store("mutations"),g=d.map(m=>f.put(m));return R.waitFor(g)})}(e,s))),o=o.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ni(s))),r<6&&i>=6&&(o=o.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(o=o.next(()=>this.ii(s))),r<8&&i>=8&&(o=o.next(()=>this.si(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.oi(s))),r<11&&i>=11&&(o=o.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(c){let l=c.createObjectStore("documentOverlays",{keyPath:s3});l.createIndex("collectionPathOverlayIndex",o3,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",a3,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(c){let l=c.createObjectStore("remoteDocumentsV14",{keyPath:KH});l.createIndex("documentKeyIndex",QH),l.createIndex("collectionGroupIndex",YH)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ai(e,s))),r<15&&i>=15&&(o=o.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:t3}).createIndex("sequenceNumberIndex",n3,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:r3}).createIndex("documentKeyIndex",i3,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),o}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=jp(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>R.forEach(i,s=>{let o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>R.forEach(a,c=>{re(c.userId===s.userId);let l=Bs(this.serializer,c);return cP(e,s.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let s=[];return r.J((o,a)=>{let c=new Te(o),l=function(f){return[0,Zt(f)]}(c);s.push(t.get(l).next(d=>d?R.resolve():(f=>t.put({targetId:0,path:Zt(f),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>R.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:e3});let r=t.store("collectionParents"),i=new Ml,s=o=>{if(i.add(o)){let a=o.lastSegment(),c=o.popLast();return r.put({collectionId:a,parent:Zt(c)})}};return t.store("remoteDocuments").J({H:!0},(o,a)=>{let c=new Te(o);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([o,a,c],l)=>{let d=fr(a);return s(d.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let s=dl(i),o=sP(this.serializer,s);return t.put(o)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((s,o)=>{let a=t.store("remoteDocumentsV14"),c=function(f){return f.document?new W(Te.fromString(f.document.name).popFirst(5)):f.noDocument?W.fromSegments(f.noDocument.path):f.unknownDocument?W.fromSegments(f.unknownDocument.path):X()}(o).path.toArray(),l={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(l))}).next(()=>R.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=dP(this.serializer),s=new zp(qp.Zr,this.serializer.ct);return r.U().next(o=>{let a=new Map;return o.forEach(c=>{var l;let d=(l=a.get(c.userId))!==null&&l!==void 0?l:fe();Bs(this.serializer,c).keys().forEach(f=>d=d.add(f)),a.set(c.userId,d)}),R.forEach(a,(c,l)=>{let d=new ft(l),f=Fp.lt(this.serializer,d),g=s.getIndexManager(d),m=Up.lt(d,this.serializer,g,s.referenceDelegate);return new $p(i,m,f,g).recalculateAndSaveOverlaysForDocumentKeys(new wl(t,_n.oe),c).next()})})}};function Gk(n){n.createObjectStore("targetDocuments",{keyPath:JH}).createIndex("documentTargetsIndex",XH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ZH,{unique:!0}),n.createObjectStore("targetGlobal")}var eE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fI=class n{constructor(e,t,r,i,s,o,a,c,l,d,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=o,this.document=a,this.ci=l,this.li=d,this.hi=f,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!n.D())throw new V(N.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new eI(this,i),this.Ai=t+"main",this.serializer=new Pp(c),this.Ri=new Wi(this.Ai,this.hi,new hI(this.serializer)),this.$r=new BE,this.Ur=new YE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dP(this.serializer),this.Gr=new UE,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,d===!1&&st("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new V(N.FAILED_PRECONDITION,eE);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new _n(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>b(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>b(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>b(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>hp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(rs(e))return j("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return j("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ul(e).get("owner").next(t=>R.resolve(this.vi(t)))}Ci(e){return hp(e).delete(this.clientId)}Fi(){return b(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=It(t,"clientMetadata");return r.U().next(i=>{let s=this.xi(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return R.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?R.resolve(!0):ul(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new V(N.FAILED_PRECONDITION,eE);return!1}}return!(!this.networkEnabled||!this.inForeground)||hp(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&j("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return b(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new wl(e,_n.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>hp(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Up.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new QE(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Fp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){j("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?l3:c===16?u3:c===15?ob:c===14?vN:c===13?yN:c===12?c3:c===11?mN:void X()}(this.hi),o;return this.Ri.runTransaction(e,i,s,a=>(o=new wl(a,this.Qr?this.Qr.next():_n.oe),t==="readwrite-primary"?this.wi(o).next(c=>!!c||this.Si(o)).next(c=>{if(!c)throw st(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new V(N.FAILED_PRECONDITION,hN);return r(o)}).next(c=>this.Di(o).next(()=>c)):this.Ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ki(e){return ul(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new V(N.FAILED_PRECONDITION,eE)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ul(e).put("owner",t)}static D(){return Wi.D()}bi(e){let t=ul(e);return t.get("owner").next(r=>this.vi(r)?(j("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):R.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(st(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;sm()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return j("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return st("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){st("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function ul(n){return It(n,"owner")}function hp(n){return It(n,"clientMetadata")}function gb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var pI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=fe(),i=fe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var gI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Hp=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return sm()?8:fN(Nc())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new gI;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Ra()<=er.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",ka(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Ra()<=er.DEBUG&&j("QueryEngine","Query:",ka(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ra()<=er.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",ka(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jt(t))):R.resolve())}Yi(e,t){if(wk(t))return R.resolve(null);let r=Jt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Mp(t,null,"F"),r=Jt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=fe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,Mp(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return wk(t)||i.isEqual(ae.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?R.resolve(null):(Ra()<=er.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ka(t)),this.rs(e,o,t,lN(i,-1)).next(a=>a))})}ts(e,t){let r=new Ue(kN(e));return t.forEach((i,s)=>{Bl(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Ra()<=er.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",ka(t)),this.Ji.getDocumentsMatchingQuery(e,t,kn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var mI=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new We(de),this._s=new _r(s=>Qs(s),jl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $p(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function hP(n,e,t,r){return new mI(n,e,t,r)}function fP(n,e){return b(this,null,function*(){let t=G(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=fe();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function z3(n,e){let t=G(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),m=R.resolve();return g.forEach(w=>{m=m.next(()=>d.getEntry(c,w)).next(D=>{let C=l.docVersions.get(w);re(C!==null),D.version.compareTo(C)<0&&(f.applyToRemoteDocument(D,l),D.isValidDocument()&&(D.setReadTime(l.commitVersion),d.addEntry(D)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function pP(n){let e=G(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function q3(n,e){let t=G(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(ct.EMPTY_BYTE_STRING,ae.min()).withLastLimboFreeSnapshotVersion(ae.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(D,C,P){return D.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,m,d)&&a.push(t.Ur.updateTargetData(s,m))});let c=ln(),l=fe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(gP(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(ae.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return R.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function gP(n,e,t){let r=fe(),i=fe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ln();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ae.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function H3(n,e){let t=G(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qa(n,e){let t=G(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,R.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Wa(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Ya(n,e,t){return b(this,null,function*(){let r=G(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!rs(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function Gp(n,e,t){let r=G(n),i=ae.min(),s=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=G(c),g=f._s.get(d);return g!==void 0?R.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,Jt(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ae.min(),t?s:fe())).next(a=>(vP(r,RN(e),a),{documents:a,Ts:s})))}function mP(n,e){let t=G(n),r=G(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(o=>o?o.target:null))}function yP(n,e){let t=G(n),r=t.us.get(e)||ae.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,lN(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(vP(t,e,i),i))}function vP(n,e,t){let r=n.us.get(e)||ae.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}function G3(n,e,t,r){return b(this,null,function*(){let i=G(n),s=fe(),o=ln();for(let l of t){let d=e.Es(l.metadata.name);l.document&&(s=s.add(d));let f=e.ds(l);f.setReadTime(e.As(l.metadata.readTime)),o=o.insert(d,f)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),c=yield Qa(i,function(d){return Jt(ic(Te.fromString(`__bundle__/docs/${d}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>gP(l,a,o).next(d=>(a.apply(l),d)).next(d=>i.Ur.removeMatchingKeysForTargetId(l,c.targetId).next(()=>i.Ur.addMatchingKeys(l,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,d.Ps,d.Is)).next(()=>d.Ps)))})}function W3(r,i){return b(this,arguments,function*(n,e,t=fe()){let s=yield Qa(n,Jt(fb(e.bundledQuery))),o=G(n);return o.persistence.runTransaction("Save named query","readwrite",a=>{let c=at(e.readTime);if(s.snapshotVersion.compareTo(c)>=0)return o.Gr.saveNamedQuery(a,e);let l=s.withResumeToken(ct.EMPTY_BYTE_STRING,c);return o.os=o.os.insert(l.targetId,l),o.Ur.updateTargetData(a,l).next(()=>o.Ur.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.Ur.addMatchingKeys(a,t,s.targetId)).next(()=>o.Gr.saveNamedQuery(a,e))})})}function Wk(n,e){return`firestore_clients_${n}_${e}`}function Kk(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function tE(n,e){return`firestore_targets_${n}_${e}`}var Wp=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new V(i.error.code,i.error.message))),o?new n(e,t,i.state,s):(st("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},gl=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new V(r.error.code,r.error.message))),s?new n(e,r.state,i):(st("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Kp=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=lb();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=pN(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new n(e,s):(st("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},yI=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(st("SharedClientState",`Failed to parse online state: ${e}`),null)}},kl=class{constructor(){this.activeTargetIds=lb()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},ml=class{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new We(de),this.started=!1,this.bs=[];let o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Wk(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new kl),this.Cs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return b(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(Wk(this.persistenceKey,r));if(i){let s=Kp.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(tE(this.persistenceKey,e));if(i){let s=gl.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(tE(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return j("SharedClientState","READ",e,t),t}setItem(e,t){j("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){j("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(j("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void st("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>b(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(s){let o=_n.oe;if(s!=null)try{let a=JSON.parse(s);re(typeof a=="number"),o=a}catch(a){st("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(t.newValue);r!==_n.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new Wp(this.currentUser,e,t,r),s=Kk(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){let t=Kk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=tE(this.persistenceKey,e),s=new gl(e,t,r);this.setItem(i,s.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Kp.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Wp.Rs(new ft(s),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return gl.Rs(i,t)}Ls(e){return yI.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return b(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);j("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),o=[],a=[];return s.forEach(c=>{i.has(c)||o.push(c)}),i.forEach(c=>{s.has(c)||a.push(c)}),this.syncEngine.io(o,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=lb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},Qp=class{constructor(){this.so=new kl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new kl,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var vI=class{_o(e){}shutdown(){}};var Yp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var fp=null;function nE(){return fp===null?fp=function(){return 268435456+Math.round(2147483648*Math.random())}():fp++,"0x"+fp.toString(16)}var K3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var wI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var jt="WebChannelConnection",_I=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=nE(),c=this.xo(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(j("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Qn("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+rc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=K3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=nE();return new Promise((o,a)=>{let c=new K_;c.setWithCredentials(!0),c.listenOnce(Q_.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case sl.NO_ERROR:let d=c.getResponseJson();j(jt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case sl.TIMEOUT:j(jt,`RPC '${e}' ${s} timed out`),a(new V(N.DEADLINE_EXCEEDED,"Request time out"));break;case sl.HTTP_ERROR:let f=c.getStatus();if(j(jt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let w=function(C){let P=C.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(P)>=0?P:N.UNKNOWN}(m.status);a(new V(w,m.message))}else a(new V(N.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new V(N.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{j(jt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(jt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=nE(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=J_(),a=Z_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");j(jt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,m=!1,w=new wI({Io:C=>{m?j(jt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(g||(j(jt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),j(jt,`RPC '${e}' stream ${i} sending:`,C),f.send(C))},To:()=>f.close()}),D=(C,P,O)=>{C.listen(P,F=>{try{O(F)}catch(U){setTimeout(()=>{throw U},0)}})};return D(f,Ta.EventType.OPEN,()=>{m||(j(jt,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),D(f,Ta.EventType.CLOSE,()=>{m||(m=!0,j(jt,`RPC '${e}' stream ${i} transport closed`),w.So())}),D(f,Ta.EventType.ERROR,C=>{m||(m=!0,Qn(jt,`RPC '${e}' stream ${i} transport errored:`,C),w.So(new V(N.UNAVAILABLE,"The operation could not be completed")))}),D(f,Ta.EventType.MESSAGE,C=>{var P;if(!m){let O=C.data[0];re(!!O);let F=O,U=F.error||((P=F[0])===null||P===void 0?void 0:P.error);if(U){j(jt,`RPC '${e}' stream ${i} received error:`,U);let Q=U.status,z=function(_){let T=dt[_];if(T!==void 0)return HN(T)}(Q),I=U.message;z===void 0&&(z=N.INTERNAL,I="Unknown error status: "+Q+" with message "+U.message),m=!0,w.So(new V(z,I)),f.close()}else j(jt,`RPC '${e}' stream ${i} received:`,O),w.bo(O)}}),D(a,Y_.STAT_EVENT,C=>{C.stat===up.PROXY?j(jt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===up.NOPROXY&&j(jt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function wP(){return typeof window<"u"?window:null}function vp(){return typeof document<"u"?document:null}function $l(n){return new OE(n,!0)}var Nl=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Zp=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Nl(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(st(t.toString()),st("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new V(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},EI=class extends Zp{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=k3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ae.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ae.min():o.readTime?at(o.readTime):ae.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=LE(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Ap(c)?{documents:XN(s,c)}:{query:eP(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WN(s,o.resumeToken);let l=FE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ae.min())>0){a.readTime=Ga(s,o.snapshotVersion.toTimestamp());let l=FE(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=P3(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=LE(this.serializer),t.removeTarget=e,this.a_(t)}},II=class extends Zp{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return re(!!e.streamToken),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=N3(e.writeResults,e.commitTime),r=at(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=LE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>xl(this.serializer,r))};this.a_(t)}};var bI=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,VE(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new V(N.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,VE(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new V(N.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},DI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(st(t),this.D_=!1):j("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var CI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>b(this,null,function*(){is(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let l=G(c);l.L_.add(4),yield sc(l),l.q_.set("Unknown"),l.L_.delete(4),yield zl(l)})}(this))}))}),this.q_=new DI(r,i)}};function zl(n){return b(this,null,function*(){if(is(n))for(let e of n.B_)yield e(!0)})}function sc(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function vg(n,e){let t=G(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),vb(t)?yb(t):ac(t).r_()&&mb(t,e))}function Za(n,e){let t=G(n),r=ac(t);t.N_.delete(e),r.r_()&&_P(t,e),t.N_.size===0&&(r.r_()?r.o_():is(t)&&t.q_.set("Unknown"))}function mb(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ae.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ac(n).A_(e)}function _P(n,e){n.Q_.xe(e),ac(n).R_(e)}function yb(n){n.Q_=new PE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ac(n).start(),n.q_.v_()}function vb(n){return is(n)&&!ac(n).n_()&&n.N_.size>0}function is(n){return G(n).L_.size===0}function EP(n){n.Q_=void 0}function Q3(n){return b(this,null,function*(){n.q_.set("Online")})}function Y3(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{mb(n,e)})})}function Z3(n,e){return b(this,null,function*(){EP(n),vb(n)?(n.q_.M_(e),yb(n)):n.q_.set("Unknown")})}function J3(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof kp&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jp(n,r)}else if(e instanceof ja?n.Q_.Ke(e):e instanceof Rp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ae.min()))try{let r=yield pP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(ct.EMPTY_BYTE_STRING,d.snapshotVersion)),_P(s,c);let f=new Wa(d.target,c,l,d.sequenceNumber);mb(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield Jp(n,r)}})}function Jp(n,e,t){return b(this,null,function*(){if(!rs(e))throw e;n.L_.add(1),yield sc(n),n.q_.set("Offline"),t||(t=()=>pP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield zl(n)}))})}function IP(n,e){return e().catch(t=>Jp(n,t,e))}function oc(n){return b(this,null,function*(){let e=G(n),t=ts(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;X3(e);)try{let i=yield H3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,eG(e,i)}catch(i){yield Jp(e,i)}bP(e)&&DP(e)})}function X3(n){return is(n)&&n.O_.length<10}function eG(n,e){n.O_.push(e);let t=ts(n);t.r_()&&t.V_&&t.m_(e.mutations)}function bP(n){return is(n)&&!ts(n).n_()&&n.O_.length>0}function DP(n){ts(n).start()}function tG(n){return b(this,null,function*(){ts(n).p_()})}function nG(n){return b(this,null,function*(){let e=ts(n);for(let t of n.O_)e.m_(t.mutations)})}function rG(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=RE.from(r,e,t);yield IP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield oc(n)})}function iG(n,e){return b(this,null,function*(){e&&ts(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(o){return qN(o)&&o!==N.ABORTED}(i.code)){let s=r.O_.shift();ts(r).s_(),yield IP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield oc(r)}})}(n,e)),bP(n)&&DP(n)})}function Qk(n,e){return b(this,null,function*(){let t=G(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=is(t);t.L_.add(3),yield sc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield zl(t)})}function TI(n,e){return b(this,null,function*(){let t=G(n);e?(t.L_.delete(2),yield zl(t)):e||(t.L_.add(2),yield sc(t),t.q_.set("Unknown"))})}function ac(n){return n.K_||(n.K_=function(t,r,i){let s=G(t);return s.w_(),new EI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Q3.bind(null,n),Ro:Y3.bind(null,n),mo:Z3.bind(null,n),d_:J3.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),vb(n)?yb(n):n.q_.set("Unknown")):(yield n.K_.stop(),EP(n))}))),n.K_}function ts(n){return n.U_||(n.U_=function(t,r,i){let s=G(t);return s.w_(),new II(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:tG.bind(null,n),mo:iG.bind(null,n),f_:nG.bind(null,n),g_:rG.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield oc(n)):(yield n.U_.stop(),n.O_.length>0&&(j("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var SI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Et,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new V(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function cc(n,e){if(st("AsyncQueue",`${e}: ${n}`),rs(n))return new V(N.UNAVAILABLE,`${e}: ${n}`);throw n}var Xp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||W.comparator(t.key,r.key):(t,r)=>W.comparator(t.key,r.key),this.keyedMap=ll(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var eg=class{constructor(){this.W_=new We(W.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ja=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Xp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ul(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var AI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},xI=class{constructor(){this.queries=Yk(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=G(t),s=i.queries;i.queries=Yk(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new V(N.ABORTED,"Firestore shutting down"))}};function Yk(){return new _r(n=>MN(n),Ul)}function wb(n,e){return b(this,null,function*(){let t=G(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new AI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=cc(o,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Eb(t)})}function _b(n,e){return b(this,null,function*(){let t=G(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function sG(n,e){let t=G(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&Eb(t)}function oG(n,e,t){let r=G(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function Eb(n){n.Y_.forEach(e=>{e.next()})}var MI,Zk;(Zk=MI||(MI={})).ea="default",Zk.Cache="cache";var Pl=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==MI.Cache}};var RI=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var tg=class{constructor(e){this.serializer=e}Es(e){return mr(this.serializer,e)}ds(e){return e.metadata.exists?JN(this.serializer,e.document,!1):pt.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return at(e)}},kI=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CP(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Te.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new tg(this.serializer);for(let i of e)if(i.metadata.queries){let s=r.Es(i.metadata.name);for(let o of i.metadata.queries){let a=(t.get(o)||fe()).add(s);t.set(o,a)}}return t}complete(){return b(this,null,function*(){let e=yield G3(this.localStore,new tg(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield W3(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function CP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var ng=class{constructor(e){this.key=e}},rg=class{constructor(e){this.key=e}},ig=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=fe(),this.mutatedKeys=fe(),this.Aa=kN(e),this.Ra=new Xp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new eg,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),m=Bl(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),D=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),C=!1;g&&m?g.data.isEqual(m.data)?w!==D&&(r.track({type:3,doc:m}),C=!0):this.ga(g,m)||(r.track({type:2,doc:m}),C=!0,(c&&this.Aa(m,c)>0||l&&this.Aa(m,l)<0)&&(a=!0)):!g&&m?(r.track({type:0,doc:m}),C=!0):g&&!m&&(r.track({type:1,doc:g}),C=!0,(c||l)&&(a=!0)),C&&(m?(o=o.add(m),s=D?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(m,w){let D=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return D(m)-D(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Ja(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new eg,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=fe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new rg(r))}),this.da.forEach(r=>{e.has(r)||t.push(new ng(r))}),t}ba(e){this.Ta=e.Ts,this.da=fe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ja.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},NI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},PI=class{constructor(e){this.key=e,this.va=!1}},OI=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new _r(a=>MN(a),Ul),this.Ma=new Map,this.xa=new Set,this.Oa=new We(W.comparator),this.Na=new Map,this.La=new Rl,this.Ba={},this.ka=new Map,this.qa=Ka.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function aG(n,e,t=!0){return b(this,null,function*(){let r=wg(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield TP(r,e,t,!0),i})}function cG(n,e){return b(this,null,function*(){let t=wg(n);yield TP(t,e,!0,!1)})}function TP(n,e,t,r){return b(this,null,function*(){let i=yield Qa(n.localStore,Jt(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Ib(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&vg(n.remoteStore,i),a})}function Ib(n,e,t,r,i){return b(this,null,function*(){n.Ka=(f,g,m)=>function(D,C,P,O){return b(this,null,function*(){let F=C.view.ma(P);F.ns&&(F=yield Gp(D.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,F)));let U=O&&O.targetChanges.get(C.targetId),Q=O&&O.targetMismatches.get(C.targetId)!=null,z=C.view.applyChanges(F,D.isPrimaryClient,U,Q);return FI(D,C.targetId,z.wa),z.snapshot})}(n,f,g,m);let s=yield Gp(n.localStore,e,!0),o=new ig(e,s.Ts),a=o.ma(s.documents),c=Sl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);FI(n,t,l.wa);let d=new NI(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function uG(n,e,t){return b(this,null,function*(){let r=G(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Ul(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ya(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Za(r.remoteStore,i.targetId),Xa(r,i.targetId)}).catch(ns))):(Xa(r,i.targetId),yield Ya(r.localStore,i.targetId,!0))})}function lG(n,e){return b(this,null,function*(){let t=G(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Za(t.remoteStore,r.targetId))})}function dG(n,e,t){return b(this,null,function*(){let r=Tb(n);try{let i=yield function(o,a){let c=G(o),l=Je.now(),d=a.reduce((m,w)=>m.add(w.key),fe()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=ln(),D=fe();return c.cs.getEntries(m,d).next(C=>{w=C,w.forEach((P,O)=>{O.isValidDocument()||(D=D.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,w)).next(C=>{f=C;let P=[];for(let O of a){let F=C3(O,f.get(O.key).overlayedDocument);F!=null&&P.push(new Zn(O.key,F,bN(F.value.mapValue),rt.exists(!0)))}return c.mutationQueue.addMutationBatch(m,l,P,a)}).next(C=>{g=C;let P=C.applyToLocalDocumentSet(f,D);return c.documentOverlayCache.saveOverlays(m,C.batchId,P)})}).then(()=>({batchId:g.batchId,changes:PN(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new We(de)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Xr(r,i.changes),yield oc(r.remoteStore)}catch(i){let s=cc(i,"Failed to persist write");t.reject(s)}})}function SP(n,e){return b(this,null,function*(){let t=G(n);try{let r=yield q3(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?re(o.va):i.removedDocuments.size>0&&(re(o.va),o.va=!1))}),yield Xr(t,r,e)}catch(r){yield ns(r)}})}function Jk(n,e,t){let r=G(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=G(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&Eb(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hG(n,e,t){return b(this,null,function*(){let r=G(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new We(W.comparator);o=o.insert(s,pt.newNoDocument(s,ae.min()));let a=fe().add(s),c=new Tl(ae.min(),new Map,new We(de),o,a);yield SP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),Cb(r)}else yield Ya(r.localStore,e,!1).then(()=>Xa(r,e,t)).catch(ns)})}function fG(n,e){return b(this,null,function*(){let t=G(n),r=e.batch.batchId;try{let i=yield z3(t.localStore,e);Db(t,r,null),bb(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Xr(t,i)}catch(i){yield ns(i)}})}function pG(n,e,t){return b(this,null,function*(){let r=G(n);try{let i=yield function(o,a){let c=G(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(re(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);Db(r,e,t),bb(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Xr(r,i)}catch(i){yield ns(i)}})}function gG(n,e){return b(this,null,function*(){let t=G(n);is(t.remoteStore)||j("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(o){let a=G(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>a.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=cc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function bb(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Db(n,e,t){let r=G(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Xa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||AP(n,r)})}function AP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(Za(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),Cb(n))}function FI(n,e,t){for(let r of t)r instanceof ng?(n.La.addReference(r.key,e),mG(n,r)):r instanceof rg?(j("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||AP(n,r.key)):X()}function mG(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(j("SyncEngine","New document in limbo: "+t),n.xa.add(r),Cb(n))}function Cb(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new W(Te.fromString(e)),r=n.qa.next();n.Na.set(r,new PI(t)),n.Oa=n.Oa.insert(t,r),vg(n.remoteStore,new Wa(Jt(ic(t.path)),r,"TargetPurposeLimboResolution",_n.oe))}}function Xr(n,e,t){return b(this,null,function*(){let r=G(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=pI.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return b(this,null,function*(){let d=G(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>R.forEach(l,g=>R.forEach(g.$i,m=>d.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>R.forEach(g.Ui,m=>d.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!rs(f))throw f;j("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let m=d.os.get(g),w=m.snapshotVersion,D=m.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,D)}}})}(r.localStore,s))})}function yG(n,e){return b(this,null,function*(){let t=G(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield fP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new V(N.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Xr(t,r.hs)}})}function vG(n,e){let t=G(n),r=t.Na.get(e);if(r&&r.va)return fe().add(r.key);{let i=fe(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function wG(n,e){return b(this,null,function*(){let t=G(n),r=yield Gp(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&FI(t,e.targetId,i.wa),i})}function _G(n,e){return b(this,null,function*(){let t=G(n);return yP(t.localStore,e).then(r=>Xr(t,r))})}function EG(n,e,t,r){return b(this,null,function*(){let i=G(n),s=yield function(a,c){let l=G(a),d=G(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",f=>d.Mn(f,c).next(g=>g?l.localDocuments.getDocuments(f,g):R.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?yield oc(i.remoteStore):t==="acknowledged"||t==="rejected"?(Db(i,e,r||null),bb(i,e),function(a,c){G(G(a).mutationQueue).On(c)}(i.localStore,e)):X(),yield Xr(i,s)):j("SyncEngine","Cannot apply mutation batch with id: "+e)})}function IG(n,e){return b(this,null,function*(){let t=G(n);if(wg(t),Tb(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Xk(t,r.toArray());t.Qa=!0,yield TI(t.remoteStore,!0);for(let s of i)vg(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Xa(t,o),Ya(t.localStore,o,!0))),Za(t.remoteStore,o)}),yield i,yield Xk(t,r),function(o){let a=G(o);a.Na.forEach((c,l)=>{Za(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new We(W.comparator)}(t),t.Qa=!1,yield TI(t.remoteStore,!1)}})}function Xk(n,e,t){return b(this,null,function*(){let r=G(n),i=[],s=[];for(let o of e){let a,c=r.Ma.get(o);if(c&&c.length!==0){a=yield Qa(r.localStore,Jt(c[0]));for(let l of c){let d=r.Fa.get(l),f=yield wG(r,d);f.snapshot&&s.push(f.snapshot)}}else{let l=yield mP(r.localStore,o);a=yield Qa(r.localStore,l),yield Ib(r,xP(l),o,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(s),i})}function xP(n){return xN(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function bG(n){return function(t){return G(G(t).persistence).Qi()}(G(n).localStore)}function DG(n,e,t,r){return b(this,null,function*(){let i=G(n);if(i.Qa)return void j("SyncEngine","Ignoring unexpected query state notification.");let s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{let o=yield yP(i.localStore,RN(s[0])),a=Tl.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ct.EMPTY_BYTE_STRING);yield Xr(i,o,a);break}case"rejected":yield Ya(i.localStore,e,!0),Xa(i,e,r);break;default:X()}})}function CG(n,e,t){return b(this,null,function*(){let r=wg(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){j("SyncEngine","Adding an already active target "+i);continue}let s=yield mP(r.localStore,i),o=yield Qa(r.localStore,s);yield Ib(r,xP(s),o.targetId,!1,o.resumeToken),vg(r.remoteStore,o)}for(let i of t)r.Ma.has(i)&&(yield Ya(r.localStore,i,!1).then(()=>{Za(r.remoteStore,i),Xa(r,i)}).catch(ns))}})}function wg(n){let e=G(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hG.bind(null,e),e.Ca.d_=sG.bind(null,e.eventManager),e.Ca.$a=oG.bind(null,e.eventManager),e}function Tb(n){let e=G(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fG.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=pG.bind(null,e),e}function TG(n,e,t){let r=G(n);(function(s,o,a){return b(this,null,function*(){try{let c=yield o.getMetadata();if(yield function(m,w){let D=G(m),C=at(w.createTime);return D.persistence.runTransaction("hasNewerBundle","readonly",P=>D.Gr.getBundleMetadata(P,w.id)).then(P=>!!P&&P.createTime.compareTo(C)>=0)}(s.localStore,c))return yield o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(c)),Promise.resolve(new Set);a._updateProgress(CP(c));let l=new kI(c,s.localStore,o.serializer),d=yield o.Ua();for(;d;){let g=yield l.la(d);g&&a._updateProgress(g),d=yield o.Ua()}let f=yield l.complete();return yield Xr(s,f.Ia,void 0),yield function(m,w){let D=G(m);return D.persistence.runTransaction("Save bundle","readwrite",C=>D.Gr.saveBundleMetadata(C,w))}(s.localStore,c),a._completeWith(f.progress),Promise.resolve(f.Pa)}catch(c){return Qn("SyncEngine",`Loading bundle failed with ${c}`),a._failWith(c),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var VI=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return b(this,null,function*(){this.serializer=$l(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return hP(this.persistence,new Hp,t.initialUser,this.serializer)}Ga(t){return new zp(qp.Zr,this.serializer)}Wa(t){return new Qp}terminate(){return b(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var sg=class n extends VI{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){yield rm(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield Tb(this.Ja.syncEngine),yield oc(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return hP(this.persistence,new Hp,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new JE(r,e.asyncQueue,t)}Ha(e,t){let r=new gE(t,this.persistence);return new pE(e.asyncQueue,r)}Ga(e){let t=gb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new fI(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wP(),vp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new Qp}},LI=class n extends sg{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return b(this,null,function*(){yield rm(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof ml&&(this.sharedClientState.syncEngine={no:EG.bind(null,t),ro:DG.bind(null,t),io:CG.bind(null,t),Qi:bG.bind(null,t),eo:_G.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>b(this,null,function*(){yield IG(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=wP();if(!ml.D(t))throw new V(N.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=gb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ml(t,e.asyncQueue,r,e.clientId,e.initialUser)}},Sb=(()=>{class n{initialize(t,r){return b(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Jk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yG.bind(null,this.syncEngine),yield TI(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new xI}()}createDatastore(t){let r=$l(t.databaseInfo.databaseId),i=function(o){return new _I(o)}(t.databaseInfo);return function(o,a,c,l){return new bI(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new CI(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Jk(this.syncEngine,r,0),function(){return Yp.D()?new Yp:new vI}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,f){let g=new OI(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return b(this,null,function*(){var t,r;yield function(s){return b(this,null,function*(){let o=G(s);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield sc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function eN(n,e=10240){let t=0;return{read(){return b(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return b(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ec=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):st("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var jI=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new Et,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return b(this,null,function*(){return this.metadata.promise})}Ua(){return b(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return b(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new RI(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return b(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return b(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return b(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var UI=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new V(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,s){return b(this,null,function*(){let o=G(i),a={documents:s.map(f=>Al(o.serializer,f))},c=yield o.Lo("BatchGetDocuments",o.serializer.databaseId,Te.emptyPath(),a,s.length),l=new Map;c.forEach(f=>{let g=R3(o.serializer,f);l.set(g.key.toString(),g)});let d=[];return s.forEach(f=>{let g=l.get(f.toString());re(!!g),d.push(g)}),d})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new es(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return b(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=W.fromPath(r);this.mutations.push(new bl(i,this.precondition(i)))}),yield function(r,i){return b(this,null,function*(){let s=G(r),o={writes:i.map(a=>xl(s.serializer,a))};yield s.Mo("Commit",s.serializer.databaseId,Te.emptyPath(),o)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw X();t=ae.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new V(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ae.min())?rt.exists(!1):rt.updateTime(t):rt.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ae.min()))throw new V(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rt.updateTime(t)}return rt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var BI=class{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new Nl(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>b(this,null,function*(){let e=new UI(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!Ll(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!qN(t)}return!1}};var $I=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ft.UNAUTHENTICATED,this.clientId=_p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>b(this,null,function*(){j("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Et;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=cc(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function rE(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield fP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function tN(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Ab(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Qk(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Qk(e.remoteStore,i)),n._onlineComponents=e})}function Ab(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qn("Error using user provided cache. Falling back to memory cache: "+t),yield rE(n,new VI)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield rE(n,new VI);return n._offlineComponents})}function _g(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield tN(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield tN(n,new Sb))),n._onlineComponents})}function MP(n){return Ab(n).then(e=>e.persistence)}function xb(n){return Ab(n).then(e=>e.localStore)}function RP(n){return _g(n).then(e=>e.remoteStore)}function Mb(n){return _g(n).then(e=>e.syncEngine)}function SG(n){return _g(n).then(e=>e.datastore)}function tc(n){return b(this,null,function*(){let e=yield _g(n),t=e.eventManager;return t.onListen=aG.bind(null,e.syncEngine),t.onUnlisten=uG.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cG.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=lG.bind(null,e.syncEngine),t})}function AG(n){return n.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield MP(n),t=yield RP(n);return e.setNetworkEnabled(!0),function(i){let s=G(i);return s.L_.delete(0),zl(s)}(t)}))}function xG(n){return n.asyncQueue.enqueue(()=>b(this,null,function*(){let e=yield MP(n),t=yield RP(n);return e.setNetworkEnabled(!1),function(i){return b(this,null,function*(){let s=G(i);s.L_.add(0),yield sc(s),s.q_.set("Offline")})}(t)}))}function MG(n,e){let t=new Et;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s,o){return b(this,null,function*(){try{let a=yield function(l,d){let f=G(l);return f.persistence.runTransaction("read document","readonly",g=>f.localDocuments.getDocument(g,d))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new V(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let c=cc(a,`Failed to get document '${s} from cache`);o.reject(c)}})}(yield xb(n),e,t)})),t.promise}function kP(n,e,t={}){let r=new Et;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,l){let d=new ec({next:g=>{d.Za(),o.enqueueAndForget(()=>_b(s,f));let m=g.docs.has(a);!m&&g.fromCache?l.reject(new V(N.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&g.fromCache&&c&&c.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Pl(ic(a.path),d,{includeMetadataChanges:!0,_a:!0});return wb(s,f)}(yield tc(n),n.asyncQueue,e,t,r)})),r.promise}function RG(n,e){let t=new Et;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s,o){return b(this,null,function*(){try{let a=yield Gp(i,s,!0),c=new ig(s,a.Ts),l=c.ma(a.documents),d=c.applyChanges(l,!1);o.resolve(d.snapshot)}catch(a){let c=cc(a,`Failed to execute query '${s} against cache`);o.reject(c)}})}(yield xb(n),e,t)})),t.promise}function NP(n,e,t={}){let r=new Et;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,l){let d=new ec({next:g=>{d.Za(),o.enqueueAndForget(()=>_b(s,f)),g.fromCache&&c.source==="server"?l.reject(new V(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Pl(a,d,{includeMetadataChanges:!0,_a:!0});return wb(s,f)}(yield tc(n),n.asyncQueue,e,t,r)})),r.promise}function kG(n,e){let t=new ec(e);return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s){G(i).Y_.add(s),s.next()}(yield tc(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(i,s){G(i).Y_.delete(s)}(yield tc(n),t)}))}}function NG(n,e,t,r){let i=function(o,a){let c;return c=typeof o=="string"?GN().encode(o):o,function(d,f){return new jI(d,f)}(function(d,f){if(d instanceof Uint8Array)return eN(d,f);if(d instanceof ArrayBuffer)return eN(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),a)}(t,$l(e));n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){TG(yield Mb(n),i,r)}))}function PG(n,e){return n.asyncQueue.enqueue(()=>b(this,null,function*(){return function(r,i){let s=G(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.Gr.getNamedQuery(o,i))}(yield xb(n),e)}))}function PP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var nN=new Map;function Rb(n,e,t){if(!t)throw new V(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kb(n,e,t,r){if(e===!0&&r===!0)throw new V(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function rN(n){if(!W.isDocumentKey(n))throw new V(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iN(n){if(W.isDocumentKey(n))throw new V(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Eg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":X()}function xe(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new V(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Eg(n);throw new V(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function OP(n,e){if(e<=0)throw new V(N.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var og=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new V(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new V(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=PP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new V(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xs=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new og({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new V(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new og(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new iE;switch(r.type){case"firstParty":return new cE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new V(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return b(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=nN.get(t);r&&(j("ComponentProvider","Removing Datastore"),nN.delete(t),r.terminate())}(this),Promise.resolve()}};function FP(n,e,t,r={}){var i;let s=(n=xe(n,Xs))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=ft.MOCK_USER;else{a=aD(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new V(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ft(l)}n._authCredentials=new sE(new wp(a,c))}}var Mt=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},$e=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},yr=class n extends Mt{constructor(e,t,r){super(e,t,ic(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new W(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Nb(n,e,...t){if(n=Ye(n),Rb("collection","path",e),n instanceof Xs){let r=Te.fromString(e,...t);return iN(r),new yr(n,null,r)}{if(!(n instanceof $e||n instanceof yr))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Te.fromString(e,...t));return iN(r),new yr(n.firestore,null,r)}}function VP(n,e){if(n=xe(n,Xs),Rb("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new V(N.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Mt(n,null,function(r){return new Yn(Te.emptyPath(),r)}(e))}function ql(n,e,...t){if(n=Ye(n),arguments.length===1&&(e=_p.newId()),Rb("doc","path",e),n instanceof Xs){let r=Te.fromString(e,...t);return rN(r),new $e(n,null,new W(r))}{if(!(n instanceof $e||n instanceof yr))throw new V(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Te.fromString(e,...t));return rN(r),new $e(n.firestore,n instanceof yr?n.converter:null,new W(r))}}function Pb(n,e){return n=Ye(n),e=Ye(e),(n instanceof $e||n instanceof yr)&&(e instanceof $e||e instanceof yr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Ob(n,e){return n=Ye(n),e=Ye(e),n instanceof Mt&&e instanceof Mt&&n.firestore===e.firestore&&Ul(n._query,e._query)&&n.converter===e.converter}var ag=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Nl(this,"async_queue_retry"),this.Vu=()=>{let r=vp();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Et;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return b(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!rs(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw st("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=SI.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&X()}verifyOperationInProgress(){}wu(){return b(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function zI(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var qI=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Et,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var LP=-1,Xe=class extends Xs{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ag,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return b(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ag(e),this._firestoreClient=void 0,yield e}})}};function Rt(n){if(n._terminated)throw new V(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jP(n),n._firestoreClient}function jP(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new mE(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,PP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new $I(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}function UP(n,e){Qn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return $P(n,Sb.provider,{build:r=>new sg(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function BP(n){return b(this,null,function*(){Qn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();$P(n,Sb.provider,{build:t=>new LI(t,e.cacheSizeBytes)})})}function $P(n,e,t){if((n=xe(n,Xe))._firestoreClient||n._terminated)throw new V(N.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new V(N.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},jP(n)}function zP(n){if(n._initialized&&!n._terminated)throw new V(N.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new Et;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{yield function(r){return b(this,null,function*(){if(!Wi.D())return Promise.resolve();let i=r+"main";yield Wi.delete(i)})}(gb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function qP(n){return function(t){let r=new Et;return t.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return gG(yield Mb(t),r)})),r.promise}(Rt(n=xe(n,Xe)))}function HP(n){return AG(Rt(n=xe(n,Xe)))}function GP(n){return xG(Rt(n=xe(n,Xe)))}function WP(n,e){let t=Rt(n=xe(n,Xe)),r=new qI;return NG(t,n._databaseId,e,r),r}function KP(n,e){return PG(Rt(n=xe(n,Xe)),e).then(t=>t?new Mt(n,null,t.query):null)}var Er=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ct.fromBase64String(e))}catch(t){throw new V(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Jn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new V(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Zr=class{constructor(e){this._methodName=e}};var eo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new V(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new V(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}};var Ol=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var OG=/^__.*__$/,HI=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Zn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xi(e,this.data,t,this.fieldTransforms)}},cg=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Zn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function QP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}var ug=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lg(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(QP(this.Cu)&&OG.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},GI=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$l(e)}Qu(e,t,r,i=!1){return new ug({Cu:e,methodName:t,qu:r,path:ot.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function io(n){let e=n._freezeSettings(),t=$l(n._databaseId);return new GI(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ig(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);Lb("Data must be an object, but it was:",o,r);let a=JP(r,o),c,l;if(s.merge)c=new En(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=ZI(e,f,t);if(!o.contains(g))throw new V(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);e1(d,g)||d.push(g)}c=new En(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new HI(new Ut(a),c,l)}var Fl=class n extends Zr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function YP(n,e,t){return new ug({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var WI=class n extends Zr{_toFieldTransform(e){return new Ys(e.path,new Zi)}isEqual(e){return e instanceof n}},KI=class n extends Zr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=YP(this,e,!0),r=this.Ku.map(s=>so(s,t)),i=new Qr(r);return new Ys(e.path,i)}isEqual(e){return e instanceof n&&om(this.Ku,e.Ku)}},QI=class n extends Zr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=YP(this,e,!0),r=this.Ku.map(s=>so(s,t)),i=new Yr(r);return new Ys(e.path,i)}isEqual(e){return e instanceof n&&om(this.Ku,e.Ku)}},YI=class n extends Zr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ji(e.serializer,VN(e.serializer,this.$u));return new Ys(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function Fb(n,e,t,r){let i=n.Qu(1,e,t);Lb("Data must be an object, but it was:",i,r);let s=[],o=Ut.empty();ro(r,(c,l)=>{let d=jb(e,c,t);l=Ye(l);let f=i.Nu(d);if(l instanceof Fl)s.push(d);else{let g=so(l,f);g!=null&&(s.push(d),o.set(d,g))}});let a=new En(s);return new cg(o,a,i.fieldTransforms)}function Vb(n,e,t,r,i,s){let o=n.Qu(1,e,t),a=[ZI(e,r,t)],c=[i];if(s.length%2!=0)throw new V(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(ZI(e,s[g])),c.push(s[g+1]);let l=[],d=Ut.empty();for(let g=a.length-1;g>=0;--g)if(!e1(l,a[g])){let m=a[g],w=c[g];w=Ye(w);let D=o.Nu(m);if(w instanceof Fl)l.push(m);else{let C=so(w,D);C!=null&&(l.push(m),d.set(m,C))}}let f=new En(l);return new cg(d,f,o.fieldTransforms)}function ZP(n,e,t,r=!1){return so(t,n.Qu(r?4:3,e))}function so(n,e){if(XP(n=Ye(n)))return Lb("Unsupported field value:",e,n),JP(n,e);if(n instanceof Zr)return function(r,i){if(!QP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=so(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return VN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Je.fromDate(r);return{timestampValue:Ga(i.serializer,s)}}if(r instanceof Je){let s=new Je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ga(i.serializer,s)}}if(r instanceof eo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Er)return{bytesValue:WN(i.serializer,r._byteString)};if(r instanceof $e){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hb(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ol)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return db(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Eg(r)}`)}(n,e)}function JP(n,e){let t={};return wN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(n,(r,i)=>{let s=so(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function XP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Je||n instanceof eo||n instanceof Er||n instanceof $e||n instanceof Zr||n instanceof Ol)}function Lb(n,e,t){if(!XP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Eg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function ZI(n,e,t){if((e=Ye(e))instanceof Jn)return e._internalPath;if(typeof e=="string")return jb(n,e);throw lg("Field path arguments must be of type string or ",n,!1,void 0,t)}var FG=new RegExp("[~\\*/\\[\\]]");function jb(n,e,t){if(e.search(FG)>=0)throw lg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jn(...e.split("."))._internalPath}catch{throw lg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function lg(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new V(N.INVALID_ARGUMENT,a+n+c)}function e1(n,e){return n.some(t=>t.isEqual(e))}var to=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new JI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(bg("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},JI=class extends to{data(){return super.data()}};function bg(n,e){return typeof e=="string"?jb(n,e):e instanceof Jn?e._internalPath:e._delegate._internalPath}function t1(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new V(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Vl=class{},no=class extends Vl{};function ei(n,e,...t){let r=[];e instanceof Vl&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof XI).length,a=s.filter(c=>c instanceof dg).length;if(o>1||o>0&&a>0)throw new V(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var dg=class n extends no{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return d1(e._query,t),new Mt(e.firestore,e.converter,xE(e._query,t))}_parse(e){let t=io(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new V(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){oN(f,d);let m=[];for(let w of f)m.push(sN(c,s,w));g={arrayValue:{values:m}}}else g=sN(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||oN(f,d),g=ZP(a,o,f,d==="in"||d==="not-in");return Ie.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function n1(n,e,t){let r=e,i=bg("where",n);return dg._create(i,r,t)}var XI=class n extends Vl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Oe.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)d1(o,c),o=xE(o,c)}(e._query,t),new Mt(e.firestore,e.converter,xE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var eb=class n extends no{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,o){if(i.startAt!==null)throw new V(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new V(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ks(s,o)}(e._query,this._field,this._direction);return new Mt(e.firestore,e.converter,function(i,s){let o=i.explicitOrderBy.concat([s]);return new Yn(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function r1(n,e="asc"){let t=e,r=bg("orderBy",n);return eb._create(r,t)}var hg=class n extends no{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new Mt(e.firestore,e.converter,Mp(e._query,this._limit,this._limitType))}};function i1(n){return OP("limit",n),hg._create("limit",n,"F")}function s1(n){return OP("limitToLast",n),hg._create("limitToLast",n,"L")}var fg=class n extends no{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=l1(e,this.type,this._docOrFields,this._inclusive);return new Mt(e.firestore,e.converter,function(i,s){return new Yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}};function o1(...n){return fg._create("startAt",n,!0)}function a1(...n){return fg._create("startAfter",n,!1)}var pg=class n extends no{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=l1(e,this.type,this._docOrFields,this._inclusive);return new Mt(e.firestore,e.converter,function(i,s){return new Yn(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}};function c1(...n){return pg._create("endBefore",n,!1)}function u1(...n){return pg._create("endAt",n,!0)}function l1(n,e,t,r){if(t[0]=Ye(t[0]),t[0]instanceof to)return function(s,o,a,c,l){if(!c)throw new V(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let d=[];for(let f of La(s))if(f.field.isKeyField())d.push(Ws(o,c.key));else{let g=c.data.field(f.field);if(mg(g))throw new V(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){let m=f.field.canonicalString();throw new V(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}d.push(g)}return new wr(d,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=io(n.firestore);return function(o,a,c,l,d,f){let g=o.explicitOrderBy;if(d.length>g.length)throw new V(N.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let m=[];for(let w=0;w<d.length;w++){let D=d[w];if(g[w].field.isKeyField()){if(typeof D!="string")throw new V(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof D}`);if(!ub(o)&&D.indexOf("/")!==-1)throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${D}' contains a slash.`);let C=o.path.child(Te.fromString(D));if(!W.isDocumentKey(C))throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);let P=new W(C);m.push(Ws(a,P))}else{let C=ZP(c,l,D);m.push(C)}}return new wr(m,f)}(n._query,n.firestore._databaseId,i,e,t,r)}}function sN(n,e,t){if(typeof(t=Ye(t))=="string"){if(t==="")throw new V(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ub(e)&&t.indexOf("/")!==-1)throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Te.fromString(t));if(!W.isDocumentKey(r))throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ws(n,new W(r))}if(t instanceof $e)return Ws(n,t._key);throw new V(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Eg(t)}.`)}function oN(n,e){if(!Array.isArray(n)||n.length===0)throw new V(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function d1(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new V(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var nc=class{convertValue(e,t="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ro(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Qe(o.doubleValue));return new Ol(s)}convertGeoPoint(e){return new eo(Qe(e.latitude),Qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ab(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(_l(e));default:return null}}convertTimestamp(e){let t=Kr(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Te.fromString(e);re(iP(r));let i=new Qi(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(t)||st(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function Dg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var tb=class extends nc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}};var Wr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Nn=class extends to{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Hi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(bg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Hi=class extends Nn{data(e={}){return super.data(e)}},Xn=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Wr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hi(this._firestore,this._userDataWriter,r.key,r,new Wr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new V(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Hi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Hi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Wr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:VG(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function VG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return X()}}function Ub(n,e){return n instanceof Nn&&e instanceof Nn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xn&&e instanceof Xn&&n._firestore===e._firestore&&Ob(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function h1(n){n=xe(n,$e);let e=xe(n.firestore,Xe);return kP(Rt(e),n._key).then(t=>qb(e,n,t))}var Jr=class extends nc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}};function f1(n){n=xe(n,$e);let e=xe(n.firestore,Xe),t=Rt(e),r=new Jr(e);return MG(t,n._key).then(i=>new Nn(e,r,n._key,i,new Wr(i!==null&&i.hasLocalMutations,!0),n.converter))}function p1(n){n=xe(n,$e);let e=xe(n.firestore,Xe);return kP(Rt(e),n._key,{source:"server"}).then(t=>qb(e,n,t))}function g1(n){n=xe(n,Mt);let e=xe(n.firestore,Xe),t=Rt(e),r=new Jr(e);return t1(n._query),NP(t,n._query).then(i=>new Xn(e,r,n,i))}function m1(n){n=xe(n,Mt);let e=xe(n.firestore,Xe),t=Rt(e),r=new Jr(e);return RG(t,n._query).then(i=>new Xn(e,r,n,i))}function y1(n){n=xe(n,Mt);let e=xe(n.firestore,Xe),t=Rt(e),r=new Jr(e);return NP(t,n._query,{source:"server"}).then(i=>new Xn(e,r,n,i))}function Bb(n,e,t){n=xe(n,$e);let r=xe(n.firestore,Xe),i=Dg(n.converter,e,t);return uc(r,[Ig(io(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,rt.none())])}function $b(n,e,t,...r){n=xe(n,$e);let i=xe(n.firestore,Xe),s=io(i),o;return o=typeof(e=Ye(e))=="string"||e instanceof Jn?Vb(s,"updateDoc",n._key,e,t,r):Fb(s,"updateDoc",n._key,e),uc(i,[o.toMutation(n._key,rt.exists(!0))])}function v1(n){return uc(xe(n.firestore,Xe),[new es(n._key,rt.none())])}function w1(n,e){let t=xe(n.firestore,Xe),r=ql(n),i=Dg(n.converter,e);return uc(t,[Ig(io(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,rt.exists(!1))]).then(()=>r)}function zb(n,...e){var t,r,i;n=Ye(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||zI(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(zI(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof $e)l=xe(n.firestore,Xe),d=ic(n._key.path),c={next:f=>{e[o]&&e[o](qb(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=xe(n,Mt);l=xe(f.firestore,Xe),d=f._query;let g=new Jr(l);c={next:m=>{e[o]&&e[o](new Xn(l,g,f,m))},error:e[o+1],complete:e[o+2]},t1(n._query)}return function(g,m,w,D){let C=new ec(D),P=new Pl(m,C,w);return g.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return wb(yield tc(g),P)})),()=>{C.Za(),g.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return _b(yield tc(g),P)}))}}(Rt(l),d,a,c)}function _1(n,e){return kG(Rt(n=xe(n,Xe)),zI(e)?e:{next:e})}function uc(n,e){return function(r,i){let s=new Et;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return dG(yield Mb(r),i,s)})),s.promise}(Rt(n),e)}function qb(n,e,t){let r=t.docs.get(e._key),i=new Jr(n);return new Nn(n,i,e._key,r,new Wr(t.hasPendingWrites,t.fromCache),e.converter)}var LG={maxAttempts:5};var gg=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=io(e)}set(e,t,r){this._verifyNotCommitted();let i=zi(e,this._firestore),s=Dg(i.converter,t,r),o=Ig(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,rt.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let s=zi(e,this._firestore),o;return o=typeof(t=Ye(t))=="string"||t instanceof Jn?Vb(this._dataReader,"WriteBatch.update",s._key,t,r,i):Fb(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,rt.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=zi(e,this._firestore);return this._mutations=this._mutations.concat(new es(t._key,rt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new V(N.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function zi(n,e){if((n=Ye(n)).firestore!==e)throw new V(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var nb=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=io(t)}get(t){let r=zi(t,this._firestore),i=new tb(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return X();let o=s[0];if(o.isFoundDocument())return new to(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new to(this._firestore,i,r._key,null,r.converter);throw X()})}set(t,r,i){let s=zi(t,this._firestore),o=Dg(s.converter,r,i),a=Ig(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){let o=zi(t,this._firestore),a;return a=typeof(r=Ye(r))=="string"||r instanceof Jn?Vb(this._dataReader,"Transaction.update",o._key,r,i,s):Fb(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){let r=zi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=zi(e,this._firestore),r=new Jr(this._firestore);return super.get(e).then(i=>new Nn(this._firestore,r,t._key,i._document,new Wr(!1,!1),t.converter))}};function E1(n,e,t){n=xe(n,Xe);let r=Object.assign(Object.assign({},LG),t);return function(s){if(s.maxAttempts<1)throw new V(N.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){let c=new Et;return s.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){let l=yield SG(s);new BI(s.asyncQueue,l,a,o,c).au()})),c.promise}(Rt(n),i=>e(new nb(n,i)),r)}function I1(){return new Fl("deleteField")}function b1(){return new WI("serverTimestamp")}function D1(...n){return new KI("arrayUnion",n)}function C1(...n){return new QI("arrayRemove",n)}function T1(n){return new YI("increment",n)}(function(e,t=!0){(function(i){rc=i})(lD),Pc(new us("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Xe(new oE(r.getProvider("auth-internal")),new lE(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new V(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qi(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),si(ik,"4.7.3",e),si(ik,"4.7.3","esm2017")})();var jG="@firebase/firestore-compat",UG="0.3.38";function Yb(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new V("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function S1(){if(typeof Uint8Array>"u")throw new V("unimplemented","Uint8Arrays are not available in this environment.")}function A1(){if(!_N())throw new V("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Cg=class n{constructor(e){this._delegate=e}static fromBase64String(e){return A1(),new n(Er.fromBase64String(e))}static fromUint8Array(e){return S1(),new n(Er.fromUint8Array(e))}toBase64(){return A1(),this._delegate.toBase64()}toUint8Array(){return S1(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function Hb(n){return BG(n,["next","error","complete"])}function BG(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var Gb=class{enableIndexedDbPersistence(e,t){return UP(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return BP(e._delegate)}clearIndexedDbPersistence(e){return zP(e._delegate)}},Tg=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qi||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){FP(this._delegate,e,t,r)}enableNetwork(){return HP(this._delegate)}disableNetwork(){return GP(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,kb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qP(this._delegate)}onSnapshotsInSync(e){return _1(this._delegate,e)}get app(){if(!this._appCompat)throw new V("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new hc(this,Nb(this._delegate,e))}catch(t){throw Xt(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ir(this,ql(this._delegate,e))}catch(t){throw Xt(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new uo(this,VP(this._delegate,e))}catch(t){throw Xt(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return E1(this._delegate,t=>e(new Sg(this,t)))}batch(){return Rt(this._delegate),new Ag(new gg(this._delegate,e=>uc(this._delegate,e)))}loadBundle(e){return WP(this._delegate,e)}namedQuery(e){return KP(this._delegate,e).then(t=>t?new uo(this,t):null)}},lc=class extends nc{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cg(new Er(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return Ir.forKey(t,this.firestore,null)}};function $G(n){aN(n)}var Sg=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lc(e)}get(e){let t=oo(e);return this._delegate.get(t).then(r=>new ao(this._firestore,new Nn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=oo(e);return r?(Yb("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=oo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=oo(e);return this._delegate.delete(t),this}},Ag=class{constructor(e){this._delegate=e}set(e,t,r){let i=oo(e);return r?(Yb("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let s=oo(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){let t=oo(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},dc=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new Hi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new co(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new n(e,new lc(e),t),i.set(t,s)),s}};dc.INSTANCES=new WeakMap;var Ir=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lc(e)}static forPath(e,t,r){if(e.length%2!==0)throw new V("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new $e(t._delegate,r,new W(e)))}static forKey(e,t,r){return new n(t,new $e(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new hc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new hc(this.firestore,Nb(this._delegate,e))}catch(t){throw Xt(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=Ye(e),e instanceof $e?Pb(this._delegate,e):!1}set(e,t){t=Yb("DocumentReference.set",t);try{return t?Bb(this._delegate,e,t):Bb(this._delegate,e)}catch(r){throw Xt(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?$b(this._delegate,e):$b(this._delegate,e,t,...r)}catch(i){throw Xt(i,"updateDoc()","DocumentReference.update()")}}delete(){return v1(this._delegate)}onSnapshot(...e){let t=x1(e),r=M1(e,i=>new ao(this.firestore,new Nn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zb(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=f1(this._delegate):e?.source==="server"?t=p1(this._delegate):t=h1(this._delegate),t.then(r=>new ao(this.firestore,new Nn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(dc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Xt(n,e,t){return n.message=n.message.replace(e,t),n}function x1(n){for(let e of n)if(typeof e=="object"&&!Hb(e))return e;return{}}function M1(n,e){var t,r;let i;return Hb(n[0])?i=n[0]:Hb(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ao=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ir(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Ub(this._delegate,e._delegate)}},co=class extends ao{data(e){let t=this._delegate.data(e);return this._delegate._converter||cN(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},uo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lc(e)}where(e,t,r){try{return new n(this.firestore,ei(this._delegate,n1(e,t,r)))}catch(i){throw Xt(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,ei(this._delegate,r1(e,t)))}catch(r){throw Xt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,ei(this._delegate,i1(e)))}catch(t){throw Xt(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,ei(this._delegate,s1(e)))}catch(t){throw Xt(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,ei(this._delegate,o1(...e)))}catch(t){throw Xt(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,ei(this._delegate,a1(...e)))}catch(t){throw Xt(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,ei(this._delegate,c1(...e)))}catch(t){throw Xt(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,ei(this._delegate,u1(...e)))}catch(t){throw Xt(t,"endAt()","Query.endAt()")}}isEqual(e){return Ob(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=m1(this._delegate):e?.source==="server"?t=y1(this._delegate):t=g1(this._delegate),t.then(r=>new Hl(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=x1(e),r=M1(e,i=>new Hl(this.firestore,new Xn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zb(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(dc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},Wb=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new co(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Hl=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new uo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new co(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Wb(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new co(this._firestore,r))})}isEqual(e){return Ub(this._delegate,e._delegate)}},hc=class n extends uo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new Ir(this.firestore,e):null}doc(e){try{return e===void 0?new Ir(this.firestore,ql(this._delegate)):new Ir(this.firestore,ql(this._delegate,e))}catch(t){throw Xt(t,"doc()","CollectionReference.doc()")}}add(e){return w1(this._delegate,e).then(t=>new Ir(this.firestore,t))}isEqual(e){return Pb(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(dc.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function oo(n){return xe(n,$e)}var Kb=class n{constructor(...e){this._delegate=new Jn(...e)}static documentId(){return new n(ot.keyField().canonicalString())}isEqual(e){return e=Ye(e),e instanceof Jn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var Qb=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=b1();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=I1();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=D1(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=C1(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=T1(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var zG={Firestore:Tg,GeoPoint:eo,Timestamp:Je,Blob:Cg,Transaction:Sg,WriteBatch:Ag,DocumentReference:Ir,DocumentSnapshot:ao,Query:uo,QueryDocumentSnapshot:co,QuerySnapshot:Hl,CollectionReference:hc,FieldPath:Kb,FieldValue:Qb,setLogLevel:$G,CACHE_SIZE_UNLIMITED:LP};function qG(n,e){n.INTERNAL.registerComponent(new us("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},zG)))}function HG(n){qG(n,(e,t)=>new Tg(e,t,new Gb)),n.registerVersion(jG,UG)}HG(tr);function GG(n,e=Do){return new he(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function R1(n,e){return GG(n,e)}function WG(n,e){return R1(n,e).pipe(Mr(void 0),qc(),se(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function Xb(n,e){return R1(n,e).pipe(se(t=>({payload:t,type:"query"})))}var xg=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:s}=P1(r,t);return new Rg(i,s,this.afs)}snapshotChanges(){return WG(this.ref,this.afs.schedulers.outsideAngular).pipe(un)}valueChanges(e={}){return this.snapshotChanges().pipe(se(({payload:t})=>e.idField?Z(M({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return be(this.ref.get(e)).pipe(un)}};function Mg(n,e){return Xb(n,e).pipe(Mr(void 0),qc(),se(t=>{let[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,c)=>{let l=s.find(f=>f.doc.ref.isEqual(a.ref)),d=r?.payload.docs.find(f=>f.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:c,newIndex:c,type:"modified",doc:a}})}),o}))}function k1(n,e,t){return Mg(n,t).pipe(ps((r,i)=>KG(r,i.map(s=>s.payload),e),[]),zc(),se(r=>r.map(i=>({type:i.type,payload:i}))))}function KG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=QG(n,r))}),n}function Zb(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function QG(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return Zb(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return Zb(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Zb(n,e.oldIndex,1);break}return n}function N1(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var Rg=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Mg(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(se(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Mr(void 0),qc(),mt(([r,i])=>i.length>0||!r),se(([,r])=>r),un)}auditTrail(e){return this.stateChanges(e).pipe(ps((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=N1(e);return k1(this.query,t,this.afs.schedulers.outsideAngular).pipe(un)}valueChanges(e={}){return Xb(this.query,this.afs.schedulers.outsideAngular).pipe(se(t=>t.payload.docs.map(r=>e.idField?Z(M({},r.data()),{[e.idField]:r.id}):r.data())),un)}get(e){return be(this.query.get(e)).pipe(un)}add(e){return this.ref.add(e)}doc(e){return new xg(this.ref.doc(e),this.afs)}},Jb=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?Mg(this.query,this.afs.schedulers.outsideAngular).pipe(un):Mg(this.query,this.afs.schedulers.outsideAngular).pipe(se(t=>t.filter(r=>e.indexOf(r.type)>-1)),mt(t=>t.length>0),un)}auditTrail(e){return this.stateChanges(e).pipe(ps((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=N1(e);return k1(this.query,t,this.afs.schedulers.outsideAngular).pipe(un)}valueChanges(e={}){return Xb(this.query,this.afs.schedulers.outsideAngular).pipe(se(r=>r.payload.docs.map(i=>e.idField?M({[e.idField]:i.id},i.data()):i.data())),un)}get(e){return be(this.query.get(e)).pipe(un)}},YG=new H("angularfire2.enableFirestorePersistence"),ZG=new H("angularfire2.firestore.persistenceSettings"),JG=new H("angularfire2.firestore.settings"),XG=new H("angularfire2.firestore.use-emulator");function P1(n,e=t=>t){return{query:e(n),ref:n}}var O1=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,s,o,a,c,l,d,f,g,m,w,D,C,P,O){this.schedulers=c;let F=op(t,a,r),U=d;f&&G_(F,a,g,w,D,C,m,P),[this.firestore,this.persistenceEnabled$]=ap(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let Q=a.runOutsideAngular(()=>F.firestore());if(s&&Q.settings(s),U&&Q.useEmulator(...U),i&&!Ai(o)){let z=()=>{try{return be(Q.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(I){return typeof console<"u"&&console.warn(I),oe(!1)}};return[Q,a.runOutsideAngular(z)]}else return[Q,oe(!1)]},[s,U,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:s,query:o}=P1(i,r),a=this.schedulers.ngZone.run(()=>s);return new Rg(a,o,this)}collectionGroup(t,r){let i=r||(o=>o),s=this.firestore.collectionGroup(t);return new Jb(i(s),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new xg(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(L(Ca),L(sp,8),L(YG,8),L(JG,8),L(At),L(_e),L(rp),L(ZG,8),L(XG,8),L(tk,8),L(U_,8),L(B_,8),L($_,8),L(z_,8),L(q_,8),L(H_,8),L(Vs,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var F1=(()=>{let e=class e{constructor(r){this.store=r,this.TABLE_NAME="user_speech",this.uuid=M_()}setRecordUid(r){r&&(this.uuid=r)}getRecordUid(){return this.uuid}getRecord(r){return this.store.collection(this.TABLE_NAME).doc(r).valueChanges()}saveRecord(r){return b(this,null,function*(){return r.id=this.uuid,r.updated_at=new Date,this.store.collection(this.TABLE_NAME).doc(this.uuid).set(r,{merge:!0}).then(()=>this.uuid).catch(i=>(console.error("Error upserting :",i),i.status)),this.uuid})}};e.\u0275fac=function(i){return new(i||e)(L(O1))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var n9=(n,e)=>({"btn-success pulse-animation":n,"btn-danger":e});function r9(n,e){if(n&1){let t=Jh();K(0,"p"),ne(1,'Try saying "Start listening" or "Stop listening". Say "Clear" to clean the board. '),K(2,"button",17),Ft("click",function(){Qo(t);let i=nt();return Yo(i.toggleListening())}),Fe(3,"i",18),J(),ne(4,"\xA0 "),K(5,"a",19),Ft("click",function(){Qo(t);let i=nt();return Yo(i.copyVoiceSmithLink())}),K(6,"i",20),Ft("click",function(){Qo(t);let i=nt();return Yo(i.copyVoiceSmithLink())}),J(),ne(7,"\xA0 "),K(8,"span",21),ne(9),J()(),ne(10,"\xA0 "),K(11,"a",22),Fe(12,"i",23),J(),K(13,"span",24),ne(14,"Desktop-only / "),K(15,"span",25),ne(16,"Mobile-limited"),J()()()}if(n&2){let t=nt();ie(2),pe("ngClass",yA(4,n9,t.listening,!t.listening)),ie(),pe("ngClass",t.listening?"fa-microphone":"fa-microphone-slash"),ie(3),pe("ngClass",t.copied?"fa-solid":"fa-regular"),ie(3),wt(t.getRecordUid())}}function i9(n,e){n&1&&(K(0,"span",27),ne(1,"Listening"),J())}function s9(n,e){n&1&&(K(0,"span",27),ne(1,"Stopped"),J())}function o9(n,e){if(n&1&&(K(0,"p"),ne(1,"Transcript will appear in the space below as your host speaks. "),vt(2,i9,2,0,"span",26)(3,s9,2,0,"span",26),J()),n&2){let t=nt();ie(2),pe("ngIf",t.listening),ie(),pe("ngIf",!t.listening)}}function a9(n,e){if(n&1&&(K(0,"span",28),ne(1),K(2,"span",12),ne(3),J()()),n&2){let t=e.$implicit,r=nt();pe("ngClass",r.isLeader(t.key)?"badge badge-border-success":"badge badge-border-danger"),ie(),An("",t.key,"\xA0"),ie(2),wt(t.value)}}var V1=(()=>{let e=class e{constructor(r,i,s,o,a,c){this.annyangService=r,this.zone=i,this.witaiService=s,this.messaging=o,this.database=a,this.route=c,this.START_COMMAND="start listening",this.STOP_COMMAND="stop listening",this.CLEAR_COMMAND="clear",this.MAX_SPEECH_TIME=5,this.fillerWords=["oh","ok","okay","um","uh","it's like","like","you know","basically","actually","so","right","I mean","well","just","er","anyway","now","let me think","haha","bla","really","and","well"],this.probableFillers=["fine","good","awesome"],this.unwantedVerbs=["am","is","are","were","do","did","done","doing","go","going","worked","work","working"],this.listening=!1,this.speaking=!1,this.fullTranscript=`Hi there! \u{1F44B} I am nA'vI
I would love to hear your story.
\u{1F3A4} Tell me something about yourself ..

Say "Start listening" to begin \u{1F680}`,this.interimTranscript="",this.currentTerm="",this.verbsMap=new Map,this.leaderwordsMap=new Map,this.fillerWordsMap=new Map,this.goodbadwordsMap=new Map,this.sentenseClarity={good:0,bad:0},this.previousTime=0,this.totalWords=0,this.prevSentense="",this.isMobile=!1,this.minutes=this.MAX_SPEECH_TIME,this.seconds=0,this.speechTime="",this.voiceMode=!1,this.copied=!1,this.leadershipWords=["lead","vision","empower","collaborate","adapt","communicate","integrate","mentore","mentor","account","innovate","innovation","resilient","resilience","delegate","resolve","include","strategic","motivate","empower","encourage"],this.createTimer=()=>{this.timerInterval=setInterval(()=>{this.updateTime()},1e3),this.speechTime=""},this.updateTime=()=>{this.seconds>0?this.seconds--:this.minutes>0?(this.minutes--,this.seconds=59):(console.debug("Time's up!"),this.stopListening()),this.speechTime=`${this.minutes}m ${this.seconds}s`},this.clearTimer=()=>{this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),this.minutes=this.MAX_SPEECH_TIME,this.seconds=0},this.myTask=()=>{let d=performance.now(),f=d-this.previousTime;f!=d&&f>5,requestAnimationFrame(this.myTask)},this.isMobile=Ke.isMobileBrowser();let l=Ke.getQueryParam(c,"vid");a.setRecordUid(l),this.initCompromiseNLP(),l?(this.voiceMode=!1,this.fullTranscript="",this.database.getRecord(l).subscribe(d=>{if(d){let f=d.message;this.updateFullText(f)}})):(this.voiceMode=!0,this.initAnnyang())}getRecordUid(){return this.database.getRecordUid().split("-")[0]}getVoiceSmithLink(){return`${ce.host}/${Ke.getBasePath(this.route)}?vid=${this.database.getRecordUid()}`}copyVoiceSmithLink(){return b(this,null,function*(){try{yield navigator.clipboard.writeText(this.getVoiceSmithLink()),this.copied=!0}catch{console.error("Failed to copy the link")}})}isLeader(r){return this.leaderwordsMap.get(r)!=null}analyseClarity(r){return b(this,null,function*(){if(r){let i=r.trim().split(" ").length;i>=5&&i<=20?this.sentenseClarity.good++:this.sentenseClarity.bad++,this.totalWords+=i}})}analyseVerbs(r){return b(this,null,function*(){let i=r.match("#Verb").out("array");return i.forEach(s=>{let o=s.toLowerCase();this.unwantedVerbs.includes(o)||(this.verbsMap.has(o)?this.verbsMap.set(o,this.verbsMap.get(o)+1):this.verbsMap.set(o,1))}),i.length})}analyseFillers(r){return b(this,null,function*(){let i=r.lookup(this.fillerWords).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.fillerWordsMap.has(o)?this.fillerWordsMap.set(o,this.fillerWordsMap.get(o)+1):this.fillerWordsMap.set(o,1),this.goodbadwordsMap.set(o,this.fillerWordsMap.get(o))}),i.length>0})}analyseLeaedershipQualities(r){return b(this,null,function*(){let i=r.compute("root").lookup(this.leadershipWords,{form:"root"}).out("array");return i.forEach(s=>{let o=s.toLowerCase();this.leaderwordsMap.has(o)?this.leaderwordsMap.set(o,this.leaderwordsMap.get(o)+1):this.leaderwordsMap.set(o,1),this.goodbadwordsMap.set(o,this.leaderwordsMap.get(o))}),i.length})}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"SpeechToText":this.analyseClarity(i.payload);let s=this.nlp(i.payload);this.analyseFillers(s),this.analyseVerbs(s),this.analyseLeaedershipQualities(s),this.voiceMode&&(this.witaiService.getIntent(i.payload).then(o=>{}),this.database.saveRecord({message:i.payload}));break;default:break}})}initCompromiseNLP(){this.loadExternalScript("https://unpkg.com/compromise").then(()=>{this.nlp=window.nlp,this.nlp&&this.nlp.compile(this.leadershipWords)})}initAnnyang(){this.loadExternalScript("assets/annyang.js").then(()=>{this.initializeSpeechRecognition()})}stopListening(){this.listening&&this.voiceMode&&this.database.saveRecord({message:this.STOP_COMMAND}),this.listening=!1,this.interimTranscript="",this.clearTimer()}startListening(){this.fullTranscript="",this.listening=!0,this.clearMaps(),this.createTimer()}clearCommand(){this.fullTranscript="",this.interimTranscript="",this.clearMaps()}toggleListening(){this.listening=!this.listening,this.listening?this.startListening():this.stopListening()}clearMaps(){this.leaderwordsMap.clear(),this.verbsMap.clear(),this.fillerWordsMap.clear(),this.goodbadwordsMap.clear(),this.previousTime=0,this.totalWords=0,this.sentenseClarity={good:0,bad:0},this.timerInterval&&(clearInterval(this.timerInterval),this.speechTime="")}initializeSpeechRecognition(){if(this.annyang=window.annyang,this.annyang){let r={"Stop listening":()=>{this.zone.run(()=>{this.stopListening()})},"Start listening":()=>{this.zone.run(()=>{this.startListening()})},Clear:()=>{this.zone.run(()=>{this.clearCommand()})}};this.annyang.addCallback("result",(i,s,o)=>{if(this.listening){let a=this.previousTime?o-this.previousTime>=300:!1;this.previousTime=o,this.zone.run(()=>{if(this.interimTranscript="",s&&i[0]){if(this.isMobile){let l=i[0].trim();if(this.prevSentense==l)return;this.prevSentense=l}let c=i[0]+(a?". ":" ");this.updateFullText(c)}else this.interimTranscript+=i})}}),this.annyang.addCallback("soundstart",()=>{console.debug("sound detected"),this.zone.run(()=>{this.speaking=!0})}),this.annyang.addCommands(r),this.recognition=this.annyang.getSpeechRecognizer(),this.recognition?(this.recognition.interimResults=!0,this.annyang.start({autoRestart:!0,continuous:!0}),console.debug("Speech recognition started")):console.error("Voice is not supported in this browser.")}else console.error("Voice is not supported in this browser.")}loadExternalScript(r){return new Promise((i,s)=>{let o=document.createElement("script");o.src=r,o.onload=()=>{i()},o.onerror=()=>{s("Script load error")},document.body.appendChild(o)})}updateFullText(r){this.voiceMode?r.includes(this.START_COMMAND)||(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r):r.includes(this.CLEAR_COMMAND)?this.clearCommand():r.includes(this.STOP_COMMAND)?this.stopListening():(this.messaging.send({cmd:"SpeechToText",payload:r}),this.fullTranscript+=r,this.listening=!0)}};e.\u0275fac=function(i){return new(i||e)(te(VR),te(_e),te(LR),te(cn),te(F1),te(Vt))},e.\u0275cmp=He({type:e,selectors:[["app-your-voice"]],decls:42,vars:13,consts:[[1,"container","mt-5"],[1,"row"],[1,"col-md-8"],[4,"ngIf"],["id","voice-output"],[1,"float-end"],[1,"fa-regular","fa-clock"],[1,"col-md-4"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"badge","badge-border-info"],[1,"badge","text-bg-light"],[1,"badge","badge-border-danger"],[1,"badge","badge-border-primary"],[1,"card-text"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"btn","rounded-circle","justify-content-center","align-items-center",3,"click","ngClass"],[1,"fas",3,"ngClass"],["target","_blank",1,"text-decoration-none",3,"click"],[1,"fa-clipboard",3,"click","ngClass"],[1,"badge","rounded-pill","text-bg-primary"],["href","https://www.merriam-webster.com/word-of-the-day","target","_blank",1,""],[1,"fa-solid","fa-lightbulb",2,"color","#efbc06"],[1,"d-sm-none","badge","badge-border-success"],[1,"text-strike-black"],["class","badge text-bg-primary",4,"ngIf"],[1,"badge","text-bg-primary"],[3,"ngClass"]],template:function(i,s){i&1&&(K(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1),vt(4,r9,17,7,"p",3)(5,o9,4,2,"p",3),J(),K(6,"div",4),ne(7),K(8,"em"),ne(9),J()(),K(10,"div",5)(11,"span"),ne(12),J(),ne(13,"\xA0"),Fe(14,"i",6),ne(15,"\xA0"),K(16,"span"),ne(17),J()()(),K(18,"div",7)(19,"div",8)(20,"div",9)(21,"h5",10),ne(22,"Strength Board"),J(),K(23,"p")(24,"span",11),ne(25,"Actions\xA0"),K(26,"span",12),ne(27),J()(),ne(28," | "),K(29,"span",13),ne(30,"Fillers\xA0"),K(31,"span",12),ne(32),J()(),ne(33," | "),K(34,"span",14),ne(35,"Clarity\xA0"),K(36,"span",12),ne(37),J()()(),Fe(38,"hr"),K(39,"div",15),vt(40,a9,4,3,"span",16),Yt(41,"keyvalue"),J()()()()()()),i&2&&(ie(4),pe("ngIf",s.voiceMode),ie(),pe("ngIf",!s.voiceMode),ie(2),An("",s.fullTranscript," "),ie(2),wt(s.interimTranscript),ie(3),An("Words : ",s.totalWords,""),ie(5),wt(s.speechTime),ie(10),wt(s.verbsMap.size),ie(5),wt(s.fillerWordsMap.size),ie(5),Sv("",s.sentenseClarity.good,"/",s.sentenseClarity.bad,""),ie(3),pe("ngForOf",zn(41,11,s.goodbadwordsMap)))},dependencies:[lf,dr,Ci,Ti],styles:["#voice-output[_ngcontent-%COMP%]{font-size:1.4em;line-height:1.6;border:1px solid #ccc;padding:20px;min-height:200px;background-color:#f9f9f9;margin-top:10px;white-space:pre-wrap}.typing-cursor[_ngcontent-%COMP%]{border-right:2px solid black;animation:_ngcontent-%COMP%_blink 1s steps(1) infinite}@keyframes _ngcontent-%COMP%_blink{50%{border-color:transparent}}button[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #007bffb3}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);box-shadow:0 0 #007bffb3}50%{transform:scale(1.1);box-shadow:0 0 10px #00ff7bb3}to{transform:scale(1);box-shadow:0 0 #007bffb3}}.pulse-animation[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1.5s infinite}.badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}.badge-border-primary[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-primary);color:var(--bs-primary)!important}.badge-border-danger[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-danger);color:var(--bs-danger)!important}.badge-border-info[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-info);color:var(--bs-info)!important}.text-strike-black[_ngcontent-%COMP%]{text-decoration:line-through;text-decoration-color:#000}"]});let n=e;return n})();var e0=(()=>{let e=class e{constructor(r,i,s,o,a,c,l,d){this.markdownService=r,this.titleService=i,this.metaService=s,this.githubService=o,this.router=a,this.route=c,this.messaging=l,this.viewContainer=d,this.homePageContent="Loading..",this.imgLayout="LayoutMix",this.firstHeading=!1,this.firstPara=!1,this.loadNewWidget=!1;let f=Ke.getBasePath(c);if(Y.INTERNAL_FOLDERS.includes(f))this.router.navigate(["/i"+Ke.getUrl(a)]);else{let g=Ke.getRouterUrl(this.router,f);f&&this.githubService.getJwtToken(f).then(m=>this.githubService.getAccessToken(m)).finally(()=>this.fetchUserContent(f,g))}}fetchUserContent(r,i){i?this.githubService.getMdFileContent(r,i).then(s=>this.homePageContent=s):(this.initialiseUserContext(r),Y.YOUR_READ_ME?this.homePageContent=Y.YOUR_READ_ME:this.githubService.getInstalledAccessToken()?this.githubService.getInstalledContent(r).then(s=>{this.homePageContent=s}):this.githubService.getReadMeContent(r).then(s=>{this.homePageContent=s}).catch(s=>{console.log(r+" not available")}))}ngAfterViewInit(){}ngOnInit(){this.titleService.setTitle("John Doe"),this.markdownService.renderer.html=r=>(Ke.getFirstLine(r).includes("Widget")&&(this.loadNewWidget=!0),this.imgLayout=="<!-- Theme:Classic, ImgAlign:Left Widget:NAVI-->"||this.imgLayout,r),this.markdownService.renderer.heading=(r,i,s)=>i==1&&!this.firstHeading?(this.firstHeading=!0,`<h1 class="first-heading">${s}</h1>`):it.prototype.heading.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.paragraph=r=>r.startsWith("<a")&&r.endsWith("</a>")?r:this.firstHeading&&!this.firstPara?(this.firstPara=!0,`<p class="first-para">${r}<p>`):`<p>${r}<p>`,this.markdownService.renderer.link=(r,i,s)=>it.prototype.link.call(this.markdownService.renderer,r,i,s),this.markdownService.renderer.image=(r,i,s)=>`<img src="${r}" class="img-fluid mx-auto d-block" alt="${s}">`}onMarkdownReady(){if(this.applyLastHeadingStyle(),this.loadNewWidget){let r=document.querySelector("#phWidget");if(r){this.viewContainer.clear();let i=this.viewContainer.createComponent(V1);r.appendChild(i.location.nativeElement)}}}applyLastHeadingStyle(){let r=document.querySelectorAll("h1");if(r.length>1){let i=r[r.length-1];i.classList.add("cta");let s=i.nextElementSibling;for(;s;)s.classList.add("cta"),s=s.nextElementSibling}}initialiseUserContext(r){this.githubService.get("users/"+r).then(i=>{Y.ghUser=JSON.parse(i),Y.userContext.username=r,this.titleService.setTitle(Y.ghUser.name),this.githubService.getGhDirectoryContents(r).then(s=>{Y.userContext.directory=s,this.messaging.send({cmd:"page",file:"GHUser"}),Y.ghUserLoaded=r})})}};e.\u0275fac=function(i){return new(i||e)(te(Ni),te(ki),te(vf),te(Mn),te(wn),te(Vt),te(cn),te(lr))},e.\u0275cmp=He({type:e,selectors:[["app-ghhome"]],decls:5,vars:1,consts:[["mdContent",""],[1,"container"],[1,"row","justify-content-center"],[1,"container",3,"ready","data"]],template:function(i,s){if(i&1){let o=Jh();K(0,"div",1)(1,"div",2,0)(3,"markdown",3),Ft("ready",function(){return Qo(o),Yo(s.onMarkdownReady())}),ne(4,`
        `),J()()()}i&2&&(ie(3),pe("data",s.homePageContent))},dependencies:[Pi],styles:[".badge-border-success[_ngcontent-%COMP%]{background-color:transparent!important;border:1px solid var(--bs-success);color:var(--bs-success)!important}"]});let n=e;return n})();var fc=class{constructor(e){this.githubService=e,this.router=B(wn),this.route=B(Vt),this.messaging=B(cn),this.routerFileUrl="",this.hasPrivateAccess=!1;let t=Ke.getRouteParam(this.route,"owner");t||(t=ce.gh_default_user_repo),this.routerFileUrl=Ke.getRouterUrl(this.router,t),Y.INTERNAL_FOLDERS.includes(t)||t&&this.githubService.getJwtToken(t).then(r=>this.githubService.getAccessToken(r).then(i=>{this.hasPrivateAccess=i!=null})).finally(()=>this.initialiseUserContext(t))}initialiseUserContext(e){return b(this,null,function*(){this.githubService.get("users/"+e).then(t=>{Y.ghUser=JSON.parse(t),Y.userContext.username=e,this.githubService.getGhDirectoryContents(e).then(r=>{Y.userContext.directory=r,this.messaging.send({cmd:"page",file:"GHUser"}),this.messaging.send({cmd:"Directory"})})}).finally(()=>{Y.ghUserLoaded=e,this.messaging.send({cmd:"ContextInit"})})})}};var c9=n=>({"text-center":n});function u9(n,e){if(n&1&&(K(0,"h2"),ne(1),J()),n&2){let t=nt(2);ie(),wt(t.contacts_title)}}function l9(n,e){if(n&1&&(K(0,"a",15),Fe(1,"i"),ne(2),J()),n&2){let t=nt().$implicit,r=nt(2);As("href",r.availableLinks.get(t.key),Qt),ie(),Zh("fa-brands fa-",t.key,""),Jo("color",r.iconsByKey.get(t.key)),ie(),An(" ",r.availableTexts.get(t.key),"")}}function d9(n,e){if(n&1&&(K(0,"a",15),ne(1),J()),n&2){let t=nt().$implicit,r=nt(2);pe("href",r.availableLinks.get(t.key),Qt),ie(),wt(r.availableLinks.get(t.key))}}function h9(n,e){if(n&1&&(K(0,"div"),vt(1,l9,3,7,"a",14)(2,d9,2,2,"ng-template",null,0,ef),J()),n&2){let t=e.$implicit,r=Xh(3);ie(),pe("ngIf",t.key!="link")("ngIfElse",r)}}function f9(n,e){if(n&1&&(K(0,"div",9)(1,"div",10),Fe(2,"img",11),K(3,"h5"),ne(4),J(),K(5,"p"),ne(6),J(),vt(7,u9,2,1,"h2",12)(8,h9,4,2,"div",13),Yt(9,"keyvalue"),Yt(10,"slice"),J()()),n&2){let t=nt();ie(2),As("src",t.userData.avatar_url,Qt),ie(2),wt(t.userData.name||t.userData.login),ie(2),wt(t.userData.bio),ie(),pe("ngIf",t.contacts_title),ie(),pe("ngForOf",Xo(10,7,zn(9,5,t.availableLinks),0,7))}}function p9(n,e){if(n&1&&(K(0,"a",16),Fe(1,"img",17),J()),n&2){let t=e.$implicit;ie(),As("src",t,Qt)}}var t0=(()=>{let e=class e extends fc{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.badgesAvailable=[],this.contactPageContent="Loading..",this.contactsContent="",this.availableLinks=new Map,this.availableTexts=new Map,this.iconsByKey=Y.iconsColorByKey,this.useUsersContent=!1,this.firstList=!0,this.firstHtml=!0,this.contacts_title="",this.userData={},this.certificateLink="",this.messaging.event$.subscribe(o=>{switch(o.cmd){case"ContextInit":this.titleService.setTitle(Y.ghUser.name),this.userData=Y.ghUser,this.githubService.getMdFileContent(Y.ghUserLoaded,this.routerFileUrl).then(l=>this.contactPageContent=l);break;case"Directory":let c=Ke.getFilesInFolder(Y.userContext.directory,"certificates/badges");for(let l of c){let d=Ke.getGhUserFilePath(Y.ghUserLoaded,l,this.githubService.hasInstalledAccessToken());this.badgesAvailable.push(d),this.badgesAvailable.length==1&&(this.certificateLink=this.badgesAvailable[0])}break;default:break}})}getAvailableKeys(){return Array.from(this.availableLinks.keys())}ngOnInit(){Y.contactLinksByKey.clear(),this.markdownService.renderer.html=r=>(this.useUsersContent=this.firstHtml?Ke.getFirstLine(r)=="<!-- My Contacts -->":this.useUsersContent,this.firstHtml=!1,r),this.markdownService.renderer.list=(r,i,s)=>this.firstList||!this.useUsersContent?(this.firstList=!1,""):it.prototype.list.call(this.markdownService.renderer,r,i,s)}onMarkdownReady(){this.firstHtml,this.iconsByKey=Y.iconsColorByKey,this.availableLinks=Y.contactLinksByKey,this.availableTexts=Y.contactTextsByKey,this.messaging.send({cmd:"page",file:"Contacts"})}};e.\u0275fac=function(i){return new(i||e)(te(Ni),te(Mn),te(ki))},e.\u0275cmp=He({type:e,selectors:[["app-contact"]],features:[Ii],decls:9,vars:6,consts:[["nonbrandLink",""],[1,"container"],[1,"row","justify-content-center",3,"ngClass"],[1,"col-lg-8"],[1,"container",3,"ready","data"],["class","row justify-content-center",4,"ngIf"],[1,"row"],[1,"d-flex","justify-content-center"],["href","/certificates",4,"ngFor","ngForOf"],[1,"row","justify-content-center"],[1,"col-lg-6"],["alt","Passport Pic",1,"col-4","rounded-circle",3,"src"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","btn btn-outline-secondary my-2","style","width:100%","target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",1,"btn","btn-outline-secondary","my-2",2,"width","100%",3,"href"],["href","/certificates"],["alt","Thumbnail Image",3,"src"]],template:function(i,s){i&1&&(K(0,"div",1)(1,"div",2)(2,"div",3)(3,"markdown",4),Ft("ready",function(){return s.onMarkdownReady()}),ne(4,`
            `),J()(),vt(5,f9,11,11,"div",5),K(6,"div",6)(7,"div",7),vt(8,p9,2,1,"a",8),J()()()()),i&2&&(ie(),pe("ngClass",mA(4,c9,!s.useUsersContent)),ie(2),pe("data",s.contactPageContent),ie(2),pe("ngIf",!s.useUsersContent),ie(3),pe("ngForOf",s.badgesAvailable))},dependencies:[lf,dr,Ci,Pi,na,Ti]});let n=e;return n})();function g9(n,e){if(n&1&&(K(0,"div",6)(1,"div",7)(2,"a",8),Fe(3,"img",9),J(),K(4,"div",10)(5,"a",11)(6,"h5",12),ne(7),J()()()()()),n&2){let t=e.$implicit,r=nt();ie(2),pe("href",r.galaryLinks.get(t.key),Qt),ie(),As("alt",t.key),pe("src",t.value,Qt),ie(2),pe("href",r.galaryLinks.get(t.key),Qt),ie(2),wt(t.key)}}var L1=(()=>{let e=class e extends fc{constructor(r,i,s){super(i),this.markdownService=r,this.githubService=i,this.titleService=s,this.markdownContent="Loading..",this.galaryLinks=new Map,this.galaryImgs=new Map,this.messaging.event$.subscribe(o=>{switch(o.cmd){case"ContextInit":this.titleService.setTitle(Y.ghUser.name),this.githubService.getReadMeContent(this.routerFileUrl).then(c=>this.markdownContent=c);break;default:break}})}ngOnInit(){this.markdownService.renderer.link=(r,i,s)=>(this.galaryLinks.set(s,r),it.prototype.link.call(this.markdownService.renderer,r,i,s)),this.markdownService.renderer.image=(r,i,s)=>(this.galaryImgs.set(s,r),s)}onMarkdownReady(){}};e.\u0275fac=function(i){return new(i||e)(te(Ni),te(Mn),te(ki))},e.\u0275cmp=He({type:e,selectors:[["app-crazy-coupons"]],features:[Ii],decls:8,vars:4,consts:[[1,"container","mt-5"],[1,"row"],["class","col-12 col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"container"],[1,"row","justify-content-center"],[3,"ready","data"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"card"],["target","_blank","rel","noopener noreferrer",3,"href"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],["target","_blank","rel","noopener noreferrer",1,"text-decoration-none",3,"href"],[1,"card-title"]],template:function(i,s){i&1&&(K(0,"div",0)(1,"div",1),vt(2,g9,8,5,"div",2),Yt(3,"keyvalue"),J()(),K(4,"div",3)(5,"div",4)(6,"markdown",5),Ft("ready",function(){return s.onMarkdownReady()}),ne(7,`
        `),J()()()),i&2&&(ie(2),pe("ngForOf",zn(3,2,s.galaryImgs)),ie(4),pe("data",s.markdownContent))},dependencies:[dr,Pi,Ti],styles:['@import"https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css";.card-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;color:#333;margin-top:4px;text-align:left;line-height:1.2}.card-body[_ngcontent-%COMP%]{padding:8px}.card[_ngcontent-%COMP%]{border:none}']});let n=e;return n})();var j1={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",enableTracing:!ce.production},U1=[{path:"crazycoupons",component:L1},{path:"contacts",component:t0},{path:":owner/contacts",component:t0},{path:"",component:FR},{path:":ghUser",component:e0,children:[{path:"**",component:e0}]}];function m9(n,e){if(n&1&&(K(0,"li",10)(1,"a",11),ne(2),J()()),n&2){let t=e.$implicit;ie(),pe("href",t.link,Qt),ie(),wt(t.text)}}var B1=(()=>{let e=class e{constructor(r,i){this.cdRef=r,this.messaging=i,this.navUser=Y.homeUser,this.photoUrl="",this.navLinks=Y.navLinks,this.contactsFileFound=!1,this.userLoaded=Y.ghUserLoaded,i.event$.subscribe(s=>{let o=s;switch(this.userLoaded=Y.ghUserLoaded,o.file){case"HomeGHUser":this.navUser=Y.homeUser,Y.homeContext.directory.folders.forEach(c=>{let l=c.charAt(0).toUpperCase()+c.slice(1);this.navLinks.push({link:"/"+l,text:l})}),Y.homeContext.directory.files&&Y.homeContext.directory.files.includes("contacts.md")&&(Y.navLinks[2].link="/contacts",Y.navLinks[2].text="Contacts");break;case"GHUser":this.navUser=Y.ghUser,Y.userContext.directory.folders.forEach(c=>{let l=c.charAt(0).toUpperCase()+c.slice(1);this.navLinks.push({link:"/"+l,text:l})}),this.navLinks.forEach(c=>{let l=Y.navLinks.indexOf(c);Y.navLinks[l].link=Y.ghUser.blog}),Y.userContext.directory.files&&Y.userContext.directory.files.includes("contacts.md")&&(Y.navLinks[2].link=`${Y.userContext.username}/contacts`,Y.navLinks[2].text="Contacts");break;default:break}})}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)(te(qn),te(cn))},e.\u0275cmp=He({type:e,selectors:[["app-navbar"]],decls:14,vars:7,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light","sticky-top"],[1,"container"],["href","/"],[1,"fa-solid","fa-link",2,"color","green"],[1,"navbar-brand",3,"href"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"nav","navbar-nav","ml-auto"],["class","nav-item",4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link","js-scroll-trigger",3,"href"]],template:function(i,s){i&1&&(K(0,"nav",0)(1,"div",1)(2,"span")(3,"a",2),Fe(4,"i",3),J(),K(5,"a",4)(6,"b"),ne(7),J()()(),K(8,"button",5),Fe(9,"span",6),J(),K(10,"div",7)(11,"ul",8),vt(12,m9,3,2,"li",9),Yt(13,"slice"),J()()()()),i&2&&(ie(5),pe("href",s.userLoaded,Qt),ie(2),An("\xA0",s.navUser.name,""),ie(5),pe("ngForOf",Xo(13,3,s.navLinks,0,7)))},dependencies:[dr,na]});let n=e;return n})();function y9(n,e){if(n&1&&(K(0,"a",9),Fe(1,"i"),J()),n&2){let t=nt().$implicit,r=nt();pe("href",r.availableLinks.get(t.key),Qt),ie(),Zh("fa-brands fa-",t.key,""),Jo("color",r.iconsByKey.get(t.key))}}function v9(n,e){if(n&1&&(K(0,"a",9),Fe(1,"i",10),J()),n&2){let t=nt().$implicit,r=nt();pe("href",r.availableLinks.get(t.key),Qt)}}function w9(n,e){if(n&1&&(K(0,"li"),vt(1,y9,2,6,"a",8)(2,v9,2,1,"ng-template",null,0,ef),J()),n&2){let t=e.$implicit,r=Xh(3),i=nt();ie(),pe("ngIf",i.hasBrandLink(t.key))("ngIfElse",r)}}var $1=(()=>{let e=class e{constructor(r,i,s){this.githubService=r,this.messaging=i,this.route=s,this.footerNote="Copyright",this.contactsFileUrl=Y.user_contacts,this.availableLinks=new Map,this.iconsByKey=Y.iconsColorByKey,this.oldRender={}}ngOnInit(){this.messaging.event$.subscribe(r=>{let i=r;switch(i.cmd){case"page":i.file=="HomeGHUser"?this.footerNote="Copyright":i.file=="GHUser"?(this.footerNote="Powered By",this.loadContacts(Y.userContext.username)):i.file=="Contacts"&&(this.availableLinks=Y.contactLinksByKey);break;default:break}}),this.loadContacts(ce.gh_default_user_repo)}availableKeys(){return this.availableLinks.keys()}loadContacts(r){this.githubService.getMdFileContent(r,"contacts.md").then(i=>{Y.contactLinksByKey.clear(),this.parseMarkdownWithCustomRenderer(i)}).catch(i=>{console.log("Contacts not available")}).finally(()=>{this.availableLinks=Y.contactLinksByKey})}parseMarkdownWithCustomRenderer(r){let i=new it;return i.link=(s,o,a)=>{try{if(s){let l=new URL(s).hostname.replace("www.","");l=l.substring(0,l.lastIndexOf(".")),l=Ke.closestHost(l),Y.contactLinksByKey.set(l,s),Y.iconsColorByKey.has(l)?Y.contactTextsByKey.set(l,this.getHostText(l)):Y.contactTextsByKey.set(l,a!=s?Ke.unescape(a):this.getHostText(l))}}catch{}return it.prototype.link.call(i,s,o,a)},De(r,{renderer:i})}hasBrandLink(r){return r!="link"&&Y.iconsColorByKey.get(r)}ngAfterViewInit(){}getHostText(r){switch(r){case"youtube":return"YouTube";case"github":return"Github";case"linkedin":return"Linkedin";default:break}return r}};e.\u0275fac=function(i){return new(i||e)(te(Mn),te(cn),te(Vt))},e.\u0275cmp=He({type:e,selectors:[["app-footer"]],decls:12,vars:8,consts:[["nonbrandLink",""],["id","contact",1,"text-center"],[1,"container"],[1,"socials-media","text-center"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"credits"],["href","/"],["target","_blank",3,"href",4,"ngIf","ngIfElse"],["target","_blank",3,"href"],[1,"fa-solid","fa-link"]],template:function(i,s){i&1&&(K(0,"div",1)(1,"div",2)(2,"div",3)(3,"ul",4),vt(4,w9,4,2,"li",5),Yt(5,"keyvalue"),Yt(6,"slice"),J()(),K(7,"div",6),ne(8),K(9,"a",7),ne(10,"www.publichome.page"),J(),ne(11," All rights reserved. "),J()()()),i&2&&(ie(4),pe("ngForOf",Xo(6,4,zn(5,2,s.availableLinks),0,7)),ie(4),An(" ",s.footerNote," \xA9 "))},dependencies:[dr,Ci,na,Ti],styles:['#contact[_ngcontent-%COMP%]{background:#f7f7f7;padding-top:25px;padding-bottom:25px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]{width:100%}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:inline-block;float:none;margin:0}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left;margin-left:10px;margin-right:10px}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:24px;color:#999;letter-spacing:.1em;font-weight:500;background:transparent;text-transform:uppercase;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   .socials-media[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b8a07e;-moz-transition:all .5s ease-in-out 0s;-ms-transition:all .5s ease-in-out 0s;-o-transition:all .5s ease-in-out 0s;-webkit-transition:all .5s ease-in-out 0s;transition:all .5s ease-in-out 0s}#contact[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px;letter-spacing:.1em;font-weight:500;margin-top:0;text-transform:uppercase}.credits[_ngcontent-%COMP%]{font-size:13px}pre.code[_ngcontent-%COMP%]{white-space:pre-wrap}pre.code[_ngcontent-%COMP%]:before{counter-reset:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{counter-increment:listing}pre.code[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]:before{content:counter(listing) ". ";width:8em;padding-left:auto;margin-left:auto;text-align:right}']});let n=e;return n})();var z1=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=St({type:e,bootstrap:[Y]}),e.\u0275inj=Tt({providers:[tx(),{provide:Ca,useValue:ce.firebaseConfig}],imports:[dx,Hx,FM.forRoot(U1,j1),Mx.forRoot({loader:Rs,markedOptions:{provide:ww,useValue:{gfm:!0,breaks:!1,pedantic:!1}},sanitize:gn.NONE})]});let n=e;return n})();gA(Y,function(){return[Ci,o_,B1,$1]},[]);lx().bootstrapModule(z1).catch(n=>console.error(n));
